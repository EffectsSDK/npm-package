"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tsvb=void 0;var _excluded=["region"],_excluded2=["chars","padding","resolution","textureWidth","textureHeight"];function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(t,e,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var p=new(t.bind.apply(t,o))();return r&&_setPrototypeOf(p,r.prototype),p;}function _isNativeFunction(fn){try{return Function.toString.call(fn).indexOf("[native code]")!==-1;}catch(e){return typeof fn==="function";}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:String(i);}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},"catch":function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e953){throw _e953;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e954){didErr=true;err=_e954;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}function _asyncIterator(r){var n,t,o,e=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,o=Symbol.iterator);e--;){if(t&&null!=(n=r[t]))return n.call(r);if(o&&null!=(n=r[o]))return new AsyncFromSyncIterator(n.call(r));t="@@asyncIterator",o="@@iterator";}throw new TypeError("Object is not async iterable");}function AsyncFromSyncIterator(r){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(r){return{value:r,done:n};});}return AsyncFromSyncIterator=function AsyncFromSyncIterator(r){this.s=r,this.n=r.next;},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments));},"return":function _return(r){var n=this.s["return"];return void 0===n?Promise.resolve({value:r,done:!0}):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));},"throw":function _throw(r){var n=this.s["return"];return void 0===n?Promise.reject(r):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));}},new AsyncFromSyncIterator(r);}/*! For license information please see tsvb.js.LICENSE.txt */var __webpack_modules__={4912:function _(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1;}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,o||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e;}function a(e,t){0==--e._eventsCount?e._events=new n():delete e._events[t];}function s(){this._events=new n(),this._eventsCount=0;}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i;},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a;},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0;},s.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,o),!0;case 6:return h.fn.call(h.context,t,n,i,o,a),!0;}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u);}else{var d,f=h.length;for(l=0;l<f;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,n);break;case 4:h[l].fn.call(h[l].context,t,n,i);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];h[l].fn.apply(h[l].context,u);}}return!0;},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1);},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0);},s.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||a(this,o);else{for(var u=0,l=[],h=s.length;u<h;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o);}return this;},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n(),this._eventsCount=0),this;},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s;},6240:function _(e){var t;t=function t(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports;}return r.m=e,r.c=t,r.p="",r(0);}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.isNotPNG=function(e){return e===s;},t.isNotAPNG=function(e){return e===u;},t["default"]=function(e){var t=new Uint8Array(e);if(Array.prototype.some.call(l,function(e,r){return e!==t[r];}))return s;var r=!1;if(h(t,function(e){return!(r="acTL"===e);}),!r)return u;var n=[],i=[],o=null,c=null,y=0,g=new a.APNG();if(h(t,function(e,t,r,s){var u=new DataView(t.buffer);switch(e){case"IHDR":o=t.subarray(r+8,r+8+s),g.width=u.getUint32(r+8),g.height=u.getUint32(r+12);break;case"acTL":g.numPlays=u.getUint32(r+8+4);break;case"fcTL":c&&(g.frames.push(c),y++),(c=new a.Frame()).width=u.getUint32(r+8+4),c.height=u.getUint32(r+8+8),c.left=u.getUint32(r+8+12),c.top=u.getUint32(r+8+16);var l=u.getUint16(r+8+20),h=u.getUint16(r+8+22);0===h&&(h=100),c.delay=1e3*l/h,c.delay<=10&&(c.delay=100),g.playTime+=c.delay,c.disposeOp=u.getUint8(r+8+24),c.blendOp=u.getUint8(r+8+25),c.dataParts=[],0===y&&2===c.disposeOp&&(c.disposeOp=1);break;case"fdAT":c&&c.dataParts.push(t.subarray(r+8+4,r+8+s));break;case"IDAT":c&&c.dataParts.push(t.subarray(r+8,r+8+s));break;case"IEND":i.push(d(t,r,12+s));break;default:n.push(d(t,r,12+s));}}),c&&g.frames.push(c),0==g.frames.length)return u;var m=new Blob(n),w=new Blob(i);return g.frames.forEach(function(e){var t=[];t.push(l),o.set(p(e.width),0),o.set(p(e.height),4),t.push(f("IHDR",o)),t.push(m),e.dataParts.forEach(function(e){return t.push(f("IDAT",e));}),t.push(w),e.imageData=new Blob(t,{type:"image/png"}),delete e.dataParts,t=null;}),g;};var n,i=r(1),o=(n=i)&&n.__esModule?n:{"default":n},a=r(2),s=new Error("Not a PNG"),u=new Error("Not an animated PNG"),l=new Uint8Array([137,80,78,71,13,10,26,10]);function h(e,t){var r=new DataView(e.buffer),n=8,i=void 0,o=void 0,a=void 0;do{o=r.getUint32(n),a=t(i=c(e,n+4,4),e,n,o),n+=12+o;}while(!1!==a&&"IEND"!=i&&n<e.length);}function c(e,t,r){var n=Array.prototype.slice.call(e.subarray(t,t+r));return String.fromCharCode.apply(String,n);}function d(e,t,r){var n=new Uint8Array(r);return n.set(e.subarray(t,t+r)),n;}var f=function f(e,t){var r=e.length+t.length,n=new Uint8Array(r+8),i=new DataView(n.buffer);i.setUint32(0,t.length),n.set(function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t;}(e),4),n.set(t,8);var a=(0,o["default"])(n,4,r);return i.setUint32(r+4,a),n;},p=function p(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e]);};},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,i=t,o=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-t);i<o;i++)n=n>>>8^r[255&(n^e[i])];return-1^n;};for(var r=new Uint32Array(256),n=0;n<256;n++){for(var i=n,o=0;o<8;o++)i=0!=(1&i)?3988292384^i>>>1:i>>>1;r[n]=i;}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=t.APNG=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t;};}(),o=r(3),a=(n=o)&&n.__esModule?n:{"default":n};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}t.APNG=function(){function e(){s(this,e),this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[];}return i(e,[{key:"createImages",value:function value(){return Promise.all(this.frames.map(function(e){return e.createImage();}));}},{key:"getPlayer",value:function value(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.createImages().then(function(){return new a["default"](t,e,r);});}}]),e;}(),t.Frame=function(){function e(){s(this,e),this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.imageData=null,this.imageElement=null;}return i(e,[{key:"createImage",value:function value(){var e=this;return this.imageElement?Promise.resolve():new Promise(function(t,r){var n=URL.createObjectURL(e.imageData);e.imageElement=document.createElement("img"),e.imageElement.onload=function(){URL.revokeObjectURL(n),t();},e.imageElement.onerror=function(){URL.revokeObjectURL(n),e.imageElement=null,r(new Error("Image creation error"));},e.imageElement.src=n;});}}]),e;}();},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t;};}(),o=r(4),a=function(e){function t(e,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t;}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.playbackRate=1,i._currentFrameNumber=0,i._ended=!1,i._paused=!0,i._numPlays=0,i._apng=e,i.context=r,i.stop(),n&&i.play(),i;}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);}(t,e),i(t,[{key:"renderNextFrame",value:function value(){this._currentFrameNumber=(this._currentFrameNumber+1)%this._apng.frames.length,this._currentFrameNumber===this._apng.frames.length-1&&(this._numPlays++,0!==this._apng.numPlays&&this._numPlays>=this._apng.numPlays&&(this._ended=!0,this._paused=!0)),this._prevFrame&&1==this._prevFrame.disposeOp?this.context.clearRect(this._prevFrame.left,this._prevFrame.top,this._prevFrame.width,this._prevFrame.height):this._prevFrame&&2==this._prevFrame.disposeOp&&this.context.putImageData(this._prevFrameData,this._prevFrame.left,this._prevFrame.top);var e=this.currentFrame;this._prevFrame=e,this._prevFrameData=null,2==e.disposeOp&&(this._prevFrameData=this.context.getImageData(e.left,e.top,e.width,e.height)),0==e.blendOp&&this.context.clearRect(e.left,e.top,e.width,e.height),this.context.drawImage(e.imageElement,e.left,e.top),this.emit("frame",this._currentFrameNumber),this._ended&&this.emit("end");}},{key:"play",value:function value(){var e=this;this.emit("play"),this._ended&&this.stop(),this._paused=!1;var t=performance.now()+this.currentFrame.delay/this.playbackRate;requestAnimationFrame(function r(n){if(!e._ended&&!e._paused){if(n>=t){for(;n-t>=e._apng.playTime/e.playbackRate;)t+=e._apng.playTime/e.playbackRate,e._numPlays++;do{e.renderNextFrame(),t+=e.currentFrame.delay/e.playbackRate;}while(!e._ended&&n>t);}requestAnimationFrame(r);}});}},{key:"pause",value:function value(){this._paused||(this.emit("pause"),this._paused=!0);}},{key:"stop",value:function value(){this.emit("stop"),this._numPlays=0,this._ended=!1,this._paused=!0,this._currentFrameNumber=-1,this.context.clearRect(0,0,this._apng.width,this._apng.height),this.renderNextFrame();}},{key:"currentFrameNumber",get:function get(){return this._currentFrameNumber;}},{key:"currentFrame",get:function get(){return this._apng.frames[this._currentFrameNumber];}},{key:"paused",get:function get(){return this._paused;}},{key:"ended",get:function get(){return this._ended;}}]),t;}(((n=o)&&n.__esModule?n:{"default":n})["default"]);t["default"]=a;},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0;}function n(e){return"function"==typeof e;}function i(e){return"object"==_typeof(e)&&null!==e;}function o(e){return void 0===e;}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this;},r.prototype.emit=function(e){var t,r,a,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h;}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s);}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(l=r.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0;},r.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this;},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments));}return i.listener=t,this.on(e,i),this;},r.prototype.removeListener=function(e,t){var r,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=a;s-->0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=s;break;}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t);}return this;},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this;}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this;},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[];},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length;}return 0;},r.listenerCount=function(e,t){return e.listenerCount(t);};}]);},e.exports=t();},9899:function _(e,t,r){e.exports=r(2860);},1816:function _(e,t,r){var n=r(2652),i=r(1776),o=r(2484),a=r(3640),s=r(6784),u=r(320),l=r(8104),h=r(5108),c=r(288),d=r(6432);e.exports=function(e){return new Promise(function(t,r){var f,p=e.data,y=e.headers,g=e.responseType;function m(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f);}n.isFormData(p)&&delete y["Content-Type"];var w=new XMLHttpRequest();if(e.auth){var b=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(b+":"+v);}var x=s(e.baseURL,e.url);function _(){if(w){var n="getAllResponseHeaders"in w?u(w.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:n,config:e,request:w};i(function(e){t(e),m();},function(e){r(e),m();},o),w=null;}}if(w.open(e.method.toUpperCase(),a(x,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=_:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(_);},w.onabort=function(){w&&(r(h("Request aborted",e,"ECONNABORTED",w)),w=null);},w.onerror=function(){r(h("Network Error",e,null,w)),w=null;},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||c;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(h(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",w)),w=null;},n.isStandardBrowserEnv()){var I=(e.withCredentials||l(x))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;I&&(y[e.xsrfHeaderName]=I);}"setRequestHeader"in w&&n.forEach(y,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete y[t]:w.setRequestHeader(t,e);}),n.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),g&&"json"!==g&&(w.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function f(e){w&&(r(!e||e&&e.type?new d("canceled"):e),w.abort(),w=null);},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),p||(p=null),w.send(p);});};},2860:function _(e,t,r){var n=r(2652),i=r(9504),o=r(2508),a=r(6183);var s=function e(t){var r=new o(t),s=i(o.prototype.request,r);return n.extend(s,o.prototype,r),n.extend(s,r),s.create=function(r){return e(a(t,r));},s;}(r(5260));s.Axios=o,s.Cancel=r(6432),s.CancelToken=r(6312),s.isCancel=r(9864),s.VERSION=r(8340).version,s.all=function(e){return Promise.all(e);},s.spread=r(9092),s.isAxiosError=r(6288),e.exports=s,e.exports["default"]=s;},6432:function _(e){function t(e){this.message=e;}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"");},t.prototype.__CANCEL__=!0,e.exports=t;},6312:function _(e,t,r){var n=r(6432);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e;});var r=this;this.promise.then(function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null;}}),this.promise.then=function(e){var t,n=new Promise(function(e){r.subscribe(e),t=e;}).then(e);return n.cancel=function(){r.unsubscribe(t);},n;},e(function(e){r.reason||(r.reason=new n(e),t(r.reason));});}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason;},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e];},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1);}},i.source=function(){var e;return{token:new i(function(t){e=t;}),cancel:e};},e.exports=i;},9864:function _(e){e.exports=function(e){return!(!e||!e.__CANCEL__);};},2508:function _(e,t,r){var n=r(2652),i=r(3640),o=r(2747),a=r(9088),s=r(6183),u=r(5984),l=u.validators;function h(e){this.defaults=e,this.interceptors={request:new o(),response:new o()};}h.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&u.assertOptions(r,{silentJSONParsing:l.transitional(l["boolean"]),forcedJSONParsing:l.transitional(l["boolean"]),clarifyTimeoutError:l.transitional(l["boolean"])},!1);var n=[],i=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,n.unshift(e.fulfilled,e.rejected));});var o,h=[];if(this.interceptors.response.forEach(function(e){h.push(e.fulfilled,e.rejected);}),!i){var c=[a,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(h),o=Promise.resolve(t);c.length;)o=o.then(c.shift(),c.shift());return o;}for(var d=t;n.length;){var f=n.shift(),p=n.shift();try{d=f(d);}catch(e){p(e);break;}}try{o=a(d);}catch(e){return Promise.reject(e);}for(;h.length;)o=o.then(h.shift(),h.shift());return o;},h.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"");},n.forEach(["delete","get","head","options"],function(e){h.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}));};}),n.forEach(["post","put","patch"],function(e){h.prototype[e]=function(t,r,n){return this.request(s(n||{},{method:e,url:t,data:r}));};}),e.exports=h;},2747:function _(e,t,r){var n=r(2652);function i(){this.handlers=[];}i.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1;},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null);},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t);});},e.exports=i;},6784:function _(e,t,r){var n=r(7992),i=r(344);e.exports=function(e,t){return e&&!n(t)?i(e,t):t;};},5108:function _(e,t,r){var n=r(7544);e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o);};},9088:function _(e,t,r){var n=r(2652),i=r(712),o=r(9864),a=r(5260),s=r(6432);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled");}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t];}),(e.adapter||a.adapter)(e).then(function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t;},function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t);});};},7544:function _(e){e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null};},e;};},6183:function _(e,t,r){var n=r(2652);e.exports=function(e,t){t=t||{};var r={};function i(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t;}function o(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:i(void 0,e[r]):i(e[r],t[r]);}function a(e){if(!n.isUndefined(t[e]))return i(void 0,t[e]);}function s(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:i(void 0,e[r]):i(void 0,t[r]);}function u(r){return r in t?i(e[r],t[r]):r in e?i(void 0,e[r]):void 0;}var l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return n.forEach(Object.keys(e).concat(Object.keys(t)),function(e){var t=l[e]||o,i=t(e);n.isUndefined(i)&&t!==u||(r[e]=i);}),r;};},1776:function _(e,t,r){var n=r(5108);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r);};},712:function _(e,t,r){var n=r(2652),i=r(5260);e.exports=function(e,t,r){var o=this||i;return n.forEach(r,function(r){e=r.call(o,e,t);}),e;};},5260:function _(e,t,r){var n=r(6512),i=r(2652),o=r(7700),a=r(7544),s=r(288),u={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t);}var h,c={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==n&&"[object process]"===Object.prototype.toString.call(n))&&(h=r(1816)),h),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(l(t,"application/json"),function(e,t,r){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e);}catch(e){if("SyntaxError"!==e.name)throw e;}return(r||JSON.stringify)(e);}(e)):e;}],transformResponse:[function(e){var t=this.transitional||c.transitional,r=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,o=!r&&"json"===this.responseType;if(o||n&&i.isString(e)&&e.length)try{return JSON.parse(e);}catch(e){if(o){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e;}}return e;}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300;},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(e){c.headers[e]={};}),i.forEach(["post","put","patch"],function(e){c.headers[e]=i.merge(u);}),e.exports=c;},288:function _(e){e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};},8340:function _(e){e.exports={version:"0.26.1"};},9504:function _(e){e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r);};};},3640:function _(e,t,r){var n=r(2652);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]");}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e));}));}),o=a.join("&");}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o;}return e;};},344:function _(e){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e;};},2484:function _(e,t,r){var n=r(2652);e.exports=n.isStandardBrowserEnv()?{write:function write(e,t,r,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ");},read:function read(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null;},remove:function remove(e){this.write(e,"",Date.now()-864e5);}}:{write:function write(){},read:function read(){return null;},remove:function remove(){}};},7992:function _(e){e.exports=function(e){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);};},6288:function _(e,t,r){var n=r(2652);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError;};},8104:function _(e,t,r){var n=r(2652);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname};}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host;};}():function(){return!0;};},7700:function _(e,t,r){var n=r(2652);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n]);});};},320:function _(e,t,r){var n=r(2652),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r;}}),a):a;};},9092:function _(e){e.exports=function(e){return function(t){return e.apply(null,t);};};},5984:function _(e,t,r){var n=r(8340).version,i={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){i[e]=function(r){return _typeof(r)===e||"a"+(t<1?"n ":" ")+e;};});var o={};i.transitional=function(e,t,r){function i(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"");}return function(r,n,a){if(!1===e)throw new Error(i(n," has been removed"+(t?" in "+t:"")));return t&&!o[n]&&(o[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a);};},e.exports={assertOptions:function assertOptions(e,t,r){if("object"!=_typeof(e))throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-->0;){var o=n[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u);}else if(!0!==r)throw Error("Unknown option "+o);}},validators:i};},2652:function _(e,t,r){var n=r(9504),i=Object.prototype.toString;function o(e){return Array.isArray(e);}function a(e){return void 0===e;}function s(e){return"[object ArrayBuffer]"===i.call(e);}function u(e){return null!==e&&"object"==_typeof(e);}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype;}function h(e){return"[object Function]"===i.call(e);}function c(e,t){if(null!=e)if("object"!=_typeof(e)&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e);}e.exports={isArray:o,isArrayBuffer:s,isBuffer:function isBuffer(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e);},isFormData:function isFormData(e){return"[object FormData]"===i.call(e);},isArrayBufferView:function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer);},isString:function isString(e){return"string"==typeof e;},isNumber:function isNumber(e){return"number"==typeof e;},isObject:u,isPlainObject:l,isUndefined:a,isDate:function isDate(e){return"[object Date]"===i.call(e);},isFile:function isFile(e){return"[object File]"===i.call(e);},isBlob:function isBlob(e){return"[object Blob]"===i.call(e);},isFunction:h,isStream:function isStream(e){return u(e)&&h(e.pipe);},isURLSearchParams:function isURLSearchParams(e){return"[object URLSearchParams]"===i.call(e);},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document;},forEach:c,merge:function e(){var t={};function r(r,n){l(t[n])&&l(r)?t[n]=e(t[n],r):l(r)?t[n]=e({},r):o(r)?t[n]=r.slice():t[n]=r;}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return t;},extend:function extend(e,t,r){return c(t,function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t;}),e;},trim:function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"");},stripBOM:function stripBOM(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e;}};},5620:function _(e,t,r){r.d(t,{M:function M(){return c;}});var n="3.1.5";function i(e){return i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},i(e);}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n);}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==i(t)?t:String(t);}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}var l={overlay:!1,overlay_attrs:{url:"https://effectssdk.ai/assets/videos/overlay/esdk.mp4"},lowerthird:!1,lowerthird_type:"lowerthird_3",lowerthird_text:{text:{title:"Max Troshin",subtitle:"CEO at Effects SDK / effectssdk.com"}},lowerthird_color:{color:{primary:161271}},lowerthird_offset:{offset:{x:15/1280,y:75/720}},emoji_duration:{duration:3500},emoji_size:{size:.3},emoji_position:{position:{placement:"top-left"}},giphy_duration:{duration:3500},giphy_size:{size:.3},giphy_position:{position:{placement:"top-left"}},seg_mode:"balanced",background:"none",layout:"center",layout_custom:void 0,blur:!0,blur_power:.6,beautification:!0,beauty_power:.68,boundary:0,frameskipping:!1,sz_switch:!0,sz_facearea:.1,sz_drawface:!1,sz_drawprefaces:!1,sz_accuracy:.75,sz_smoothing:.2,sz_period:100,cc_switch:!1,cc_power:1,cc_part:1,cc_period:1e3,cf_switch:!1,cf_lut:{lut:"none"},cf_part:{part:1},cf_power:{power:1},cf_capacity:{capacity:5}},h=a(function e(){u(this,e);});h.APP_ENV="web",h.API_URL="https://effectssdk.ai/sdk/session/",h.STATS_URL="https://effectssdk.ai/sdk/stats/",h.BASE_URL="https://effectssdk.ai/",h.SDK_URL=h.BASE_URL+"sdk/",h.VB_MODEL=h.SDK_URL+"models/model-1.2.1.tsvb",h.PRESET="balanced",h.DEMO_IMAGE=h.SDK_URL+"100.jpg",h.DEMO_VIDEO=h.SDK_URL+"video-background.mp4";var c=function(){function e(){u(this,e);}return a(e,null,[{key:"getModelUrl",value:function value(t){return e.SDK_URL+t;}},{key:"getPresetUrl",value:function value(t){return e.SDK_URL+t;}},{key:"setVersion",value:function value(){e.VERSION=n;}}]),e;}();c.VERSION="0.0.0",c.CUSTOMER_ID="",c.APP_ENV=h.APP_ENV,c.API_URL=h.API_URL,c.STATS_URL=h.STATS_URL,c.MODEL_URL=h.SDK_URL+"models/model-1.2.1.tsvb",c.PRESET=h.PRESET,c.SDK_URL=h.SDK_URL,c.MODELS={colorcorrector:"models/model-cc-1.0.0.tsvb",facedetector:"models/model-fd-1.1.0.tsvb",lowlighter:"models/model-ll-1.2.0.tsvb"},c.PROXY=!0,c.STATS=!1,c.PROVIDER="wasm",c.WASM_PATHS={},c.PRESETS={quality:"models/model-1.0.1.tsvb",balanced:"models/model-5.5.0.tsvb",speed:"models/model-3.1.1.tsvb",lightning:"models/model-4.0.1.tsvb"},c.PRESETS_PORTRAIT={quality:"models/m-model-1.0.1.tsvb",balanced:"models/m-model-5.5.0.tsvb",speed:"models/m-model-3.1.1.tsvb",lightning:"models/m-model-4.0.1.tsvb"},c.STATES_PRESET=l;},1140:function _(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},n(e);}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n);}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==n(t)?t:String(t);}r.d(t,{E7:function E7(){return s;},cL:function cL(){return a;},ie:function ie(){return u;}});var a,s,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e);}var t,r,n;return t=e,n=[{key:"getInstance",value:function value(){return e._instance||(e._instance=new e()),e._instance;}}],(r=[{key:"subscribe",value:function value(e){var t="function"==typeof e;this.onErrorFunction=t?e:void 0;}},{key:"notify",value:function value(e){"function"==typeof this.onErrorFunction&&(e.emitter&&(e.message="[ ".concat(e.emitter," ]: ").concat(e.message)),e.type||(e.type=a.ERROR),this.onErrorFunction(e));}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}().getInstance();!function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error";}(a||(a={})),function(e){e.TSVB="tsvb",e.COMPONENTS_SYSTEM="components_system",e.SRTEAM_PROCESSOR="stream_processor",e.ML_INFERENCE="ml_inference",e.PRESET_INIT="preset_init",e.RENDERER="renderer",e.RECORDER="recorder",e.EFFECT_VIRTUAL_BACKGROUND="effect_virtual_background",e.EFFECT_COLOR_CORRECTION="effect_color_correction",e.EFFECT_COLOR_FILTER="effect_color_filter",e.EFFECT_SMART_ZOOM="effect_smart_zoom",e.EFFECT_LOW_LIGHT="effect_low_light";}(s||(s={}));},4220:function _(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},n(e);}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n);}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==n(t)?t:String(t);}r.d(t,{w:function w(){return a;}});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e);}var t,r,n;return t=e,(r=[{key:"createPromise",value:function value(){var e=this;return this._promise=new Promise(function(t,r){e.resolver=t,e.rejecter=r;}),this._promise;}},{key:"promise",get:function get(){return this._promise;}},{key:"resolve",value:function value(e){if("function"!=typeof this.resolver)return!1;this.resolver(e),this.resolver=void 0;}},{key:"reject",value:function value(e){if("function"!=typeof this.rejecter)return!1;this.rejecter(e),this.rejecter=void 0,this._promise=void 0;}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();},9e3:function _(e,t,r){r.d(t,{k:function k(){return h;}});var n=r(5620),i=r(4941),o=r(9899),a=r.n(o);function s(e){return s="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},s(e);}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n);}}function l(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==s(t)?t:String(t);}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.data=[],this.delay=5e3,this.isRunning=!1,this.deferred=new Set();}var t,r,o;return t=e,o=[{key:"Instance",get:function get(){return this._instance||(this._instance=new this());}}],(r=[{key:"setCustomerID",value:function value(e){this.customer_id=e;}},{key:"push",value:function value(e){var t=this;n.M.STATS&&(this.checkRunning(e),this.isRunning?(clearTimeout(this.timer),this.data.push({feature:e,user_id:i.i.getInstance().getUID(this.customer_id)}),this.timer=setTimeout(function(){t.send();},this.delay)):this.deferred.add(e));}},{key:"send",value:function value(){var e=this;a().post(n.M.STATS_URL+this.customer_id,this.data,{headers:{"Tsvb-Version":n.M.VERSION}}).then(function(){return e.data=[];})["catch"](function(e){return e;});}},{key:"checkRunning",value:function value(e){var t=this,r=i.i.getInstance().getUID(this.customer_id);"run"===e&&(this.isRunning=!0,this.deferred.forEach(function(e){t.data.push({feature:e,user_id:r});}),this.deferred.clear());}}])&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e;}();},4941:function _(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n];}return e;}r.d(t,{i:function i(){return y;}});var i=function e(t,r){function i(e,i,o){if("undefined"!=typeof document){"number"==typeof(o=n({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in o)o[s]&&(a+="; "+s,!0!==o[s]&&(a+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+a;}}return Object.create({set:i,get:function get(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var o=r[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=t.read(a,s),e===s)break;}catch(e){}}return e?n[e]:n;}},remove:function remove(e,t){i(e,"",n({},t,{expires:-1}));},withAttributes:function withAttributes(t){return e(this.converter,n({},this.attributes,t));},withConverter:function withConverter(t){return e(n({},this.converter,t),this.attributes);}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}});}({read:function read(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);},write:function write(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent);}},{path:"/"});var o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var a;var s=new Uint8Array(16);function u(){if(!a&&(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(s);}var l=[];for(var _e2=0;_e2<256;++_e2)l.push((_e2+256).toString(16).slice(1));function h(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]];}var c=function c(e,t,r){if(o.randomUUID&&!t&&!e)return o.randomUUID();var n=(e=e||{}).random||(e.rng||u)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var _e3=0;_e3<16;++_e3)t[r+_e3]=n[_e3];return t;}return h(n);};function d(e){return d="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},d(e);}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n);}}function p(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==d(t)?t:String(t);}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e);}var t,r,n;return t=e,n=[{key:"getInstance",value:function value(){return e.instance||(e.instance=new e()),e.instance;}}],(r=[{key:"getUID",value:function value(e){if(this._uid)return this._uid;var t=i.get("TSVB_UID");return t||(t=c(),i.set("TSVB_UID",t)),t;}},{key:"setUID",value:function value(e){this._uid=e;}}])&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();},5704:function _(e,t){t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n;},t.toByteArray=function(e){var t,r,o=s(e),a=o[0],u=o[1],l=new i(function(e,t,r){return 3*(t+r)/4-r;}(0,a,u)),h=0,c=u>0?a-4:a;for(r=0;r<c;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[h++]=255&t);1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t);return l;},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,l=n-i;s<l;s+=a)o.push(u(e,s,s+a>l?l:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("");};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4];}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("");}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;},3296:function _(e,t,r){var n=r(5704),i=r(4404),o=r(9600);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823;}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e;}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e);}return l(this,e,t,r);}function l(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e;}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r);e=s(e,n);var i=e.write(t,r);i!==n&&(e=e.slice(0,i));return e;}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|f(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e;}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data);}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}(e,t);}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');}function c(e,t){if(h(t),e=s(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e;}function d(e,t){var r=t.length<0?0:0|f(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e;}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e;}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return j(e).length;t=(""+t).toLowerCase(),n=!0;}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return E(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n;}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1;}else if(r<0){if(!i)return-1;r=0;}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer");}function w(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2;}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a);}if(i){var h=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*a;}else-1!==h&&(o-=o-h),h=-1;}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var c=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){c=!1;break;}if(c)return o;}return-1;}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s;}return a;}function v(e,t,r,n){return z(j(t,e.length-r),e,r,n);}function x(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t;}(t),e,r,n);}function _(e,t,r,n){return x(e,t,r,n);}function I(e,t,r,n){return z(G(t),e,r,n);}function A(e,t,r,n){return z(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o;}(t,e.length-r),e,r,n);}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r));}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,l=e[i],h=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c<=r)switch(c){case 1:l<128&&(h=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(h=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(h=u);}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c;}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r;}(n);}t.Sn=u,t.ZK=50,u.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42;}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength;}catch(e){return!1;}}(),a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e;},u.from=function(e,t,r){return l(null,e,t,r);},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return h(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t);}(null,e,t,r);},u.allocUnsafe=function(e){return c(null,e);},u.allocUnsafeSlow=function(e){return c(null,e);},u.isBuffer=function(e){return!(null==e||!e._isBuffer);},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break;}return r<n?-1:n<r?1:0;},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length;}return n;},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this;},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this;},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this;},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments);},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e);},u.prototype.inspect=function(){var e="",r=t.ZK;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">";},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(n,i),h=e.slice(t,r),c=0;c<s;++c)if(l[c]!==h[c]){o=l[c],a=h[c];break;}return o<a?-1:a<o?1:0;},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r);},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0);},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1);},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0;}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};};var C=4096;function E(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n;}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n;}function k(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=U(e[o]);return i;}function P(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i;}function $(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length");}function R(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range");}function B(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i);}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255;}function M(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range");}function L(e,t,r,n,o){return o||M(e,0,r,4),i.write(e,t,r,n,23,4),r+4;}function F(e,t,r,n,o){return o||M(e,0,r,8),i.write(e,t,r,n,52,8),r+8;}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e];}return r;},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||$(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n;},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||$(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n;},u.prototype.readUInt8=function(e,t){return t||$(e,1,this.length),this[e];},u.prototype.readUInt16LE=function(e,t){return t||$(e,2,this.length),this[e]|this[e+1]<<8;},u.prototype.readUInt16BE=function(e,t){return t||$(e,2,this.length),this[e]<<8|this[e+1];},u.prototype.readUInt32LE=function(e,t){return t||$(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3];},u.prototype.readUInt32BE=function(e,t){return t||$(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3]);},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||$(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n;},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||$(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o;},u.prototype.readInt8=function(e,t){return t||$(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e];},u.prototype.readInt16LE=function(e,t){t||$(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r;},u.prototype.readInt16BE=function(e,t){t||$(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r;},u.prototype.readInt32LE=function(e,t){return t||$(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24;},u.prototype.readInt32BE=function(e,t){return t||$(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3];},u.prototype.readFloatLE=function(e,t){return t||$(e,4,this.length),i.read(this,e,!0,23,4);},u.prototype.readFloatBE=function(e,t){return t||$(e,4,this.length),i.read(this,e,!1,23,4);},u.prototype.readDoubleLE=function(e,t){return t||$(e,8,this.length),i.read(this,e,!0,52,8);},u.prototype.readDoubleBE=function(e,t){return t||$(e,8,this.length),i.read(this,e,!1,52,8);},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r;},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r;},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1;},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2;},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2;},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4;},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4;},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i);}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r;},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i);}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r;},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1;},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2;},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2;},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4;},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4;},u.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r);},u.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r);},u.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r);},u.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r);},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o;},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i);}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:j(new u(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s];}return this;};var N=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16);}function j(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue;}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue;}i=r;continue;}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue;}r=65536+(i-55296<<10|r-56320);}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r);}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128);}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128);}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return o;}function G(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"");}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e;}(e));}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i;}},2768:function _(e,t,r){var n=r(6604),i=r(4572),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r;};},4572:function _(e,t,r){var n=r(268),i=r(6604),o=r(2392),a=r(6556),s=i("%Function.prototype.apply%"),u=i("%Function.prototype.call%"),l=i("%Reflect.apply%",!0)||n.call(u,s),h=r(8252),c=i("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new a("a function is required");var t=l(n,u,arguments);return o(t,1+c(0,e.length-(arguments.length-1)),!0);};var d=function d(){return l(n,s,arguments);};h?h(e.exports,"apply",{value:d}):e.exports.apply=d;},1528:function _(e,t,r){var n=r(6384);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1;}e.exports=function(e){var t=new i();t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var o=0;o<r.length;++o){var a=r[o];if("array"===a||"object"==_typeof(a)&&a.blockIndices){if(t.argTypes[o]="array",t.arrayArgs.push(o),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args");}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index");}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape");}else{if("object"!=_typeof(a)||!a.offset)throw new Error("cwise: Unknown argument type "+r[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o);}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,n(t);};},9676:function _(e,t,r){var n=r(2248);function i(e,t,r){var n,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],l=[],h=0,c=0;for(n=0;n<o;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)c=h,h=e[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",h].join("")):l.push(["d",i,"s",n,"=(t",i,"p",h,"-s",c,"*t",i,"p",c,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=o-1;n>=0;--n)h=e[n],u.push(["for(i",n,"=0;i",n,"<s",h,";++i",n,"){"].join(""));for(u.push(r),n=0;n<o;++n){for(c=h,h=e[n],i=0;i<a;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",c,"]-=s",c].join("")),u.push(["++index[",h,"]"].join(""))),u.push("}");}return u.join("\n");}function o(e,t,r){for(var n=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",h=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var c=t.offsetArgIndex.indexOf(a);h=t.offsetArgs[c].array,l="+q"+c;case"array":l="p"+h+l;var d="l"+a,f="a"+h;if(0===t.arrayBlockIndices[h])1===s.count?"generic"===r[h]?s.lvalue?(i.push(["var ",d,"=",f,".get(",l,")"].join("")),n=n.replace(u,d),o.push([f,".set(",l,",",d,")"].join(""))):n=n.replace(u,[f,".get(",l,")"].join("")):n=n.replace(u,[f,"[",l,"]"].join("")):"generic"===r[h]?(i.push(["var ",d,"=",f,".get(",l,")"].join("")),n=n.replace(u,d),s.lvalue&&o.push([f,".set(",l,",",d,")"].join(""))):(i.push(["var ",d,"=",f,"[",l,"]"].join("")),n=n.replace(u,d),s.lvalue&&o.push([f,"[",l,"]=",d].join("")));else{for(var p=[s.name],y=[l],g=0;g<Math.abs(t.arrayBlockIndices[h]);g++)p.push("\\s*\\[([^\\]]+)\\]"),y.push("$"+(g+1)+"*t"+h+"b"+g);if(u=new RegExp(p.join(""),"g"),l=y.join("+"),"generic"===r[h])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[f,"[",l,"]"].join(""));}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape");}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim();}function a(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+o:t[n]=i.charAt(0)+o,n>0&&(r=r&&t[n]===t[n-1]);}return r?t[0]:t.join("");}e.exports=function(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),u=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)u[l]=t[2*l],s[l]=t[2*l+1];var h=[],c=[],d=[],f=[],p=[];for(l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(d.push(0),f.push(r),h.push(r),c.push(r+e.arrayBlockIndices[l])):(d.push(e.arrayBlockIndices[l]),f.push(e.arrayBlockIndices[l]+r),h.push(0),c.push(e.arrayBlockIndices[l]));for(var y=[],g=0;g<s[l].length;g++)d[l]<=s[l][g]&&s[l][g]<f[l]&&y.push(s[l][g]-d[l]);p.push(y);}var m=["SS"],w=["'use strict'"],b=[];for(g=0;g<r;++g)b.push(["s",g,"=SS[",g,"]"].join(""));for(l=0;l<e.arrayArgs.length;++l){m.push("a"+l),m.push("t"+l),m.push("p"+l);for(g=0;g<r;++g)b.push(["t",l,"p",g,"=t",l,"[",d[l]+g,"]"].join(""));for(g=0;g<Math.abs(e.arrayBlockIndices[l]);++g)b.push(["t",l,"b",g,"=t",l,"[",h[l]+g,"]"].join(""));}for(l=0;l<e.scalarArgs.length;++l)m.push("Y"+l);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){var v=new Array(r);for(l=0;l<r;++l)v[l]="0";b.push(["index=[",v.join(","),"]"].join(""));}for(l=0;l<e.offsetArgs.length;++l){var x=e.offsetArgs[l],_=[];for(g=0;g<x.offset.length;++g)0!==x.offset[g]&&(1===x.offset[g]?_.push(["t",x.array,"p",g].join("")):_.push([x.offset[g],"*t",x.array,"p",g].join("")));0===_.length?b.push("q"+l+"=0"):b.push(["q",l,"=",_.join("+")].join(""));}var I=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((b=b.concat(I)).length>0&&w.push("var "+b.join(",")),l=0;l<e.arrayArgs.length;++l)w.push("p"+l+"|=0");e.pre.body.length>3&&w.push(o(e.pre,e,u));var A=o(e.body,e,u),S=function(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t;}return t;}(p);S<r?w.push(function(e,t,r,n){for(var o=t.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[],h=0;h<a;++h)l.push(["var offset",h,"=p",h].join(""));for(h=e;h<o;++h)l.push(["for(var j"+h+"=SS[",t[h],"]|0;j",h,">0;){"].join("")),l.push(["if(j",h,"<",s,"){"].join("")),l.push(["s",t[h],"=j",h].join("")),l.push(["j",h,"=0"].join("")),l.push(["}else{s",t[h],"=",s].join("")),l.push(["j",h,"-=",s,"}"].join("")),u&&l.push(["index[",t[h],"]=j",h].join(""));for(h=0;h<a;++h){for(var c=["offset"+h],d=e;d<o;++d)c.push(["j",d,"*t",h,"p",t[d]].join(""));l.push(["p",h,"=(",c.join("+"),")"].join(""));}for(l.push(i(t,r,n)),h=e;h<o;++h)l.push("}");return l.join("\n");}(S,p[0],e,A)):w.push(i(p[0],e,A)),e.post.body.length>3&&w.push(o(e.post,e,u)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+w.join("\n")+"\n----------");var T=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",S,a(u)].join("");return new Function(["function ",T,"(",m.join(","),"){",w.join("\n"),"} return ",T].join(""))();};},6384:function _(e,t,r){var n=r(9676);e.exports=function(e){var t=["'use strict'","var CACHED={}"],r=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],h=0;h<e.arrayArgs.length;++h){var c=e.arrayArgs[h];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),o.push("t"+c),o.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),s.push("array"+c+".data"),s.push("array"+c+".stride"),s.push("array"+c+".offset|0"),h>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[h]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[h])+"]"));}for(e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),h=0;h<e.scalarArgs.length;++h)s.push("scalar"+e.scalarArgs[h]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(n.bind(void 0,e));};},5456:function _(e,t,r){var n=r(8252),i=r(7668),o=r(6556),a=r(872);e.exports=function(e,t,r){if(!e||"object"!=_typeof(e)&&"function"!=typeof e)throw new o("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=_typeof(t))throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,h=arguments.length>6&&arguments[6],c=!!a&&a(e,t);if(n)n(e,t,{configurable:null===l&&c?c.configurable:!l,enumerable:null===s&&c?c.enumerable:!s,value:r,writable:null===u&&c?c.writable:!u});else{if(!h&&(s||u||l))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r;}};},1948:function _(e){function t(e,t,n){n=n||2;var o,a,s,u,c,d,p,y=t&&t.length,g=y?t[0]*n:e.length,m=r(e,0,g,n,!0),w=[];if(!m||m.next===m.prev)return w;if(y&&(m=function(e,t,n,i){var o,a,s,u=[];for(o=0,a=t.length;o<a;o++)(s=r(e,t[o]*i,o<a-1?t[o+1]*i:e.length,i,!1))===s.next&&(s.steiner=!0),u.push(f(s));for(u.sort(l),o=0;o<u.length;o++)n=h(u[o],n);return n;}(e,t,m,n)),e.length>80*n){o=s=e[0],a=u=e[1];for(var b=n;b<g;b+=n)(c=e[b])<o&&(o=c),(d=e[b+1])<a&&(a=d),c>s&&(s=c),d>u&&(u=d);p=0!==(p=Math.max(s-o,u-a))?32767/p:0;}return i(m,w,n,o,a,p,0),w;}function r(e,t,r,n,i){var o,a;if(i===T(e,t,r,n)>0)for(o=t;o<r;o+=n)a=I(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=I(o,e[o],e[o+1],a);return a&&m(a,a.next)&&(A(a),a=a.next),a;}function n(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!m(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(A(n),(n=t=n.prev)===n.next)break;r=!0;}}while(r||n!==t);return t;}function i(e,t,r,l,h,c,f){if(e){!f&&c&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=d(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,u,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n;}o.nextZ=null,l*=2;}while(a>1);}(i);}(e,l,h,c);for(var p,y,g=e;e.prev!==e.next;)if(p=e.prev,y=e.next,c?a(e,l,h,c):o(e))t.push(p.i/r|0),t.push(e.i/r|0),t.push(y.i/r|0),A(e),e=y.next,g=y.next;else if((e=y)===g){f?1===f?i(e=s(n(e),t,r),t,r,l,h,c,2):2===f&&u(e,t,r,l,h,c):i(n(e),t,r,l,h,c,1);break;}}}function o(e){var t=e.prev,r=e,n=e.next;if(g(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,u=r.y,l=n.y,h=i<o?i<a?i:a:o<a?o:a,c=s<u?s<l?s:l:u<l?u:l,d=i>o?i>a?i:a:o>a?o:a,f=s>u?s>l?s:l:u>l?u:l,y=n.next;y!==t;){if(y.x>=h&&y.x<=d&&y.y>=c&&y.y<=f&&p(i,s,o,u,a,l,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.next;}return!0;}function a(e,t,r,n){var i=e.prev,o=e,a=e.next;if(g(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,l=a.x,h=i.y,c=o.y,f=a.y,y=s<u?s<l?s:l:u<l?u:l,m=h<c?h<f?h:f:c<f?c:f,w=s>u?s>l?s:l:u>l?u:l,b=h>c?h>f?h:f:c>f?c:f,v=d(y,m,t,r,n),x=d(w,b,t,r,n),_=e.prevZ,I=e.nextZ;_&&_.z>=v&&I&&I.z<=x;){if(_.x>=y&&_.x<=w&&_.y>=m&&_.y<=b&&_!==i&&_!==a&&p(s,h,u,c,l,f,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,I.x>=y&&I.x<=w&&I.y>=m&&I.y<=b&&I!==i&&I!==a&&p(s,h,u,c,l,f,I.x,I.y)&&g(I.prev,I,I.next)>=0)return!1;I=I.nextZ;}for(;_&&_.z>=v;){if(_.x>=y&&_.x<=w&&_.y>=m&&_.y<=b&&_!==i&&_!==a&&p(s,h,u,c,l,f,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.prevZ;}for(;I&&I.z<=x;){if(I.x>=y&&I.x<=w&&I.y>=m&&I.y<=b&&I!==i&&I!==a&&p(s,h,u,c,l,f,I.x,I.y)&&g(I.prev,I,I.next)>=0)return!1;I=I.nextZ;}return!0;}function s(e,t,r){var i=e;do{var o=i.prev,a=i.next.next;!m(o,a)&&w(o,i,i.next,a)&&x(o,a)&&x(a,o)&&(t.push(o.i/r|0),t.push(i.i/r|0),t.push(a.i/r|0),A(i),A(i.next),i=e=a),i=i.next;}while(i!==e);return n(i);}function u(e,t,r,o,a,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&y(u,l)){var h=_(u,l);return u=n(u,u.next),h=n(h,h.next),i(u,t,r,o,a,s,0),void i(h,t,r,o,a,s,0);}l=l.next;}u=u.next;}while(u!==e);}function l(e,t){return e.x-t.x;}function h(e,t){var r=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a&&(a=s,r=n.x<n.next.x?n:n.next,s===i))return r;}n=n.next;}while(n!==t);if(!r)return null;var u,l=r,h=r.x,d=r.y,f=1/0;n=r;do{i>=n.x&&n.x>=h&&i!==n.x&&p(o<d?i:a,o,h,d,o<d?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),x(n,e)&&(u<f||u===f&&(n.x>r.x||n.x===r.x&&c(r,n)))&&(r=n,f=u)),n=n.next;}while(n!==l);return r;}(e,t);if(!r)return t;var i=_(r,e);return n(i,i.next),n(r,r.next);}function c(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0;}function d(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1;}function f(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;}while(t!==e);return r;}function p(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s);}function y(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&w(r,r.next,e,t))return!0;r=r.next;}while(r!==e);return!1;}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;}while(r!==e);return n;}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||m(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0);}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y);}function m(e,t){return e.x===t.x&&e.y===t.y;}function w(e,t,r,n){var i=v(g(e,t,r)),o=v(g(e,t,n)),a=v(g(r,n,e)),s=v(g(r,n,t));return i!==o&&a!==s||!(0!==i||!b(e,r,t))||!(0!==o||!b(e,n,t))||!(0!==a||!b(r,e,n))||!(0!==s||!b(r,t,n));}function b(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y);}function v(e){return e>0?1:e<0?-1:0;}function x(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0;}function _(e,t){var r=new S(e.i,e.x,e.y),n=new S(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n;}function I(e,t,r,n){var i=new S(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i;}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ);}function S(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1;}function T(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i;}e.exports=t,e.exports["default"]=t,t.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(T(e,0,o,r));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,h=s<u-1?t[s+1]*r:e.length;a-=Math.abs(T(e,l,h,r));}var c=0;for(s=0;s<n.length;s+=3){var d=n[s]*r,f=n[s+1]*r,p=n[s+2]*r;c+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]));}return 0===a&&0===c?0:Math.abs((c-a)/a);},t.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n));}return r;};},8252:function _(e,t,r){var n=r(6604)("%Object.defineProperty%",!0)||!1;if(n)try{n({},"a",{value:1});}catch(e){n=!1;}e.exports=n;},9576:function _(e){e.exports=EvalError;},2772:function _(e){e.exports=Error;},5360:function _(e){e.exports=RangeError;},2380:function _(e){e.exports=ReferenceError;},7668:function _(e){e.exports=SyntaxError;},6556:function _(e){e.exports=TypeError;},568:function _(e){e.exports=URIError;},9328:function _(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1;}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,o||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e;}function a(e,t){0==--e._eventsCount?e._events=new n():delete e._events[t];}function s(){this._events=new n(),this._eventsCount=0;}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i;},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a;},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0;},s.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,o),!0;case 6:return h.fn.call(h.context,t,n,i,o,a),!0;}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u);}else{var d,f=h.length;for(l=0;l<f;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,n);break;case 4:h[l].fn.call(h[l].context,t,n,i);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];h[l].fn.apply(h[l].context,u);}}return!0;},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1);},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0);},s.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||a(this,o);else{for(var u=0,l=[],h=s.length;u<h;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o);}return this;},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n(),this._eventsCount=0),this;},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s;},3444:function _(e,t){!function(e){var t=function t(e){return function(t){var r=e(t);return t.add(r),r;};},r=function r(e){return function(t,r){return e.set(t,r),r;};},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,o=2*i,a=function a(e,t){return function(r){var a=t.get(r),s=void 0===a?r.size:a<o?a+1:0;if(!r.has(s))return e(r,s);if(r.size<i){for(;r.has(s);)s=Math.floor(Math.random()*o);return e(r,s);}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(s);)s=Math.floor(Math.random()*n);return e(r,s);};},s=new WeakMap(),u=r(s),l=a(u,s),h=t(l);e.addUniqueNumber=h,e.generateUniqueNumber=l;}(t);},4412:function _(e,t,r){var n,i;void 0===(i="function"==typeof(n=function n(){var e={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e;}function r(e,t){this.name=e||"Unknown",this.type=t||"Unknown";}function n(e,t){r.call(this,e,t||"Uint");}function i(e){return e.length%2==1?"0"+e:e;}function o(e,t){r.call(this,e,t||"Float");}function a(e,t){r.call(this,e,t||"Container");}function s(e){a.call(this,"File","File"),this.setSource(e);}function u(e,t,r,n){if("object"==_typeof(r)&&(n=r,r=void 0),!r)return new Promise(function(r){u(e,t,r,n);});try{var i=new FileReader();i.onloadend=function(){try{var o=new s(new Uint8Array(i.result));o.fixDuration(t,n)&&(e=o.toBlob(e.type));}catch(e){}r(e);},i.readAsArrayBuffer(e);}catch(t){r(e);}}return r.prototype.updateBySource=function(){},r.prototype.setSource=function(e){this.source=e,this.updateBySource();},r.prototype.updateByData=function(){},r.prototype.setData=function(e){this.data=e,this.updateByData();},t(n,r),n.prototype.updateBySource=function(){this.data="";for(var e=0;e<this.source.length;e++){var t=this.source[e].toString(16);this.data+=i(t);}},n.prototype.updateByData=function(){var e=this.data.length/2;this.source=new Uint8Array(e);for(var t=0;t<e;t++){var r=this.data.substr(2*t,2);this.source[t]=parseInt(r,16);}},n.prototype.getValue=function(){return parseInt(this.data,16);},n.prototype.setValue=function(e){this.setData(i(e.toString(16)));},t(o,r),o.prototype.getFloatArrayType=function(){return this.source&&4===this.source.length?Float32Array:Float64Array;},o.prototype.updateBySource=function(){var e=this.source.reverse(),t=new(this.getFloatArrayType())(e.buffer);this.data=t[0];},o.prototype.updateByData=function(){var e=new(this.getFloatArrayType())([this.data]),t=new Uint8Array(e.buffer);this.source=t.reverse();},o.prototype.getValue=function(){return this.data;},o.prototype.setValue=function(e){this.setData(e);},t(a,r),a.prototype.readByte=function(){return this.source[this.offset++];},a.prototype.readUint=function(){for(var e=this.readByte(),t=8-e.toString(2).length,r=e-(1<<7-t),n=0;n<t;n++)r*=256,r+=this.readByte();return r;},a.prototype.updateBySource=function(){for(this.data=[],this.offset=0;this.offset<this.source.length;this.offset=s){var t=this.readUint(),i=this.readUint(),s=Math.min(this.offset+i,this.source.length),u=this.source.slice(this.offset,s),l=e[t]||{name:"Unknown",type:"Unknown"},h=r;switch(l.type){case"Container":h=a;break;case"Uint":h=n;break;case"Float":h=o;}var c=new h(l.name,l.type);c.setSource(u),this.data.push({id:t,idHex:t.toString(16),data:c});}},a.prototype.writeUint=function(e,t){for(var r=1,n=128;e>=n&&r<8;r++,n*=128);if(!t)for(var i=n+e,o=r-1;o>=0;o--){var a=i%256;this.source[this.offset+o]=a,i=(i-a)/256;}this.offset+=r;},a.prototype.writeSections=function(e){this.offset=0;for(var t=0;t<this.data.length;t++){var r=this.data[t],n=r.data.source,i=n.length;this.writeUint(r.id,e),this.writeUint(i,e),e||this.source.set(n,this.offset),this.offset+=i;}return this.offset;},a.prototype.updateByData=function(){var e=this.writeSections("draft");this.source=new Uint8Array(e),this.writeSections();},a.prototype.getSectionById=function(e){for(var t=0;t<this.data.length;t++){var r=this.data[t];if(r.id===e)return r.data;}return null;},t(s,a),s.prototype.fixDuration=function(e,t){var r=t&&t.logger;void 0===r?r=function r(e){console.log(e);}:r||(r=function r(){});var n=this.getSectionById(139690087);if(!n)return r("[fix-webm-duration] Segment section is missing"),!1;var i=n.getSectionById(88713574);if(!i)return r("[fix-webm-duration] Info section is missing"),!1;var a=i.getSectionById(710577);if(!a)return r("[fix-webm-duration] TimecodeScale section is missing"),!1;var s=i.getSectionById(1161);if(s){if(!(s.getValue()<=0))return r("[fix-webm-duration] Duration section is present"),!1;r("[fix-webm-duration] Duration section is present, but the value is empty"),s.setValue(e);}else r("[fix-webm-duration] Duration section is missing"),(s=new o("Duration","Float")).setValue(e),i.data.push({id:1161,data:s});return a.setValue(1e6),i.updateByData(),n.updateByData(),this.updateByData(),!0;},s.prototype.toBlob=function(e){return new Blob([this.source.buffer],{type:e||"video/webm"});},u["default"]=u,u;})?n.call(t,r,t,e):n)||(e.exports=i);},7840:function _(e){var t=Object.prototype.toString,r=Math.max,n=function n(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r;};e.exports=function(e){var i=this;if("function"!=typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,a=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r;}(arguments,1),s=r(0,i.length-a.length),u=[],l=0;l<s;l++)u[l]="$"+l;if(o=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r;}(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var t=i.apply(this,n(a,arguments));return Object(t)===t?t:this;}return i.apply(e,n(a,arguments));}),i.prototype){var h=function h(){};h.prototype=i.prototype,o.prototype=new h(),h.prototype=null;}return o;};},268:function _(e,t,r){var n=r(7840);e.exports=Function.prototype.bind||n;},6604:function _(e,t,r){var n,i=r(2772),o=r(9576),a=r(5360),s=r(2380),u=r(7668),l=r(6556),h=r(568),c=Function,d=function d(e){try{return c('"use strict"; return ('+e+").constructor;")();}catch(e){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"");}catch(e){f=null;}var p=function p(){throw new l();},y=f?function(){try{return p;}catch(e){try{return f(arguments,"callee").get;}catch(e){return p;}}}():p,g=r(4308)(),m=r(7636)(),w=Object.getPrototypeOf||(m?function(e){return e.__proto__;}:null),b={},v="undefined"!=typeof Uint8Array&&w?w(Uint8Array):n,x={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&w?w([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&w?w(w([][Symbol.iterator]())):n,"%JSON%":"object"==(typeof JSON==="undefined"?"undefined":_typeof(JSON))?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&w?w(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&w?w(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&w?w(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":y,"%TypedArray%":v,"%TypeError%":l,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":h,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(w)try{null.error;}catch(e){var _=w(w(e));x["%Error.prototype%"]=_;}var I=function e(t){var r;if("%AsyncFunction%"===t)r=d("async function () {}");else if("%GeneratorFunction%"===t)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=d("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype);}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&w&&(r=w(i.prototype));}return x[t]=r,r;},A={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=r(268),T=r(5176),C=S.call(Function.call,Array.prototype.concat),E=S.call(Function.apply,Array.prototype.splice),O=S.call(Function.call,String.prototype.replace),k=S.call(Function.call,String.prototype.slice),P=S.call(Function.call,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,B=function B(e,t){var r,n=e;if(T(A,n)&&(n="%"+(r=A[n])[0]+"%"),T(x,n)){var i=x[n];if(i===b&&(i=I(n)),void 0===i&&!t)throw new l("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i};}throw new u("intrinsic "+e+" does not exist!");};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new l('"allowMissing" argument must be a boolean');if(null===P(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return O(e,$,function(e,t,r,i){n[n.length]=r?O(i,R,"$1"):t||e;}),n;}(e),n=r.length>0?r[0]:"",i=B("%"+n+"%",t),o=i.name,a=i.value,s=!1,h=i.alias;h&&(n=h[0],E(r,C([0,1],h)));for(var c=1,d=!0;c<r.length;c+=1){var p=r[c],y=k(p,0,1),g=k(p,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==p&&d||(s=!0),T(x,o="%"+(n+="."+p)+"%"))a=x[o];else if(null!=a){if(!(p in a)){if(!t)throw new l("base intrinsic for "+e+" exists, but the property is not available.");return;}if(f&&c+1>=r.length){var m=f(a,p);a=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[p];}else d=T(a,p),a=a[p];d&&!s&&(x[o]=a);}}return a;};},872:function _(e,t,r){var n=r(6604)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length");}catch(e){n=null;}e.exports=n;},1188:function _(e,t,r){var n=r(8252),i=function i(){return!!n;};i.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length;}catch(e){return!0;}},e.exports=i;},7636:function _(e){var t={foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof r);};},4308:function _(e,t,r){var n="undefined"!=typeof Symbol&&Symbol,i=r(1968);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==_typeof(n("foo"))&&"symbol"==_typeof(Symbol("bar"))&&i();};},1968:function _(e){e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==_typeof(Symbol.iterator))return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1;}return!0;};},5176:function _(e,t,r){var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=r(268);e.exports=o.call(n,i);},4404:function _(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,h=-7,c=r?i-1:0,d=r?-1:1,f=e[t+c];for(c+=d,o=f&(1<<-h)-1,f>>=-h,h+=s;h>0;o=256*o+e[t+c],c+=d,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+e[t+c],c+=d,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=l;}return(f?-1:1)*a*Math.pow(2,o-n);},t.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,h=(1<<l)-1,c=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+c>=1?d/u:d*Math.pow(2,1-c))*u>=2&&(a++,u/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(t*u-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+f]=255&a,f+=p,a/=256,l-=8);e[r+f-p]|=128*y;};},4819:function _(e){e.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t;};},6792:function _(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e);}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0));}(e)||!!e._isBuffer);};},9600:function _(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e);};},8684:function _(e,t,r){var n=r(1528),i={body:"",args:[],thisVars:[],localVars:[]};function o(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1};}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e;}function a(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return n({args:e.args,pre:o(e.pre),body:o(e.body),post:o(e.proc),funcName:e.funcName});}(e));}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var r=s[e];t[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:e+"seq"});}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var r=u[e];t[e]=a({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:e}),t[e+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:e+"eq"});}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var r=l[e];t[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:e+"seq"});}}();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<h.length;++e){var r=h[e];t[r]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),t[r+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"});}}();var c=["max","min","atan2","pow"];!function(){for(var e=0;e<c.length;++e){var r=c[e];t[r]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),t[r+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),t[r+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),t[r+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"});}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var r=d[e];t[r+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),t[r+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),t[r+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),t[r+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"});}}(),t.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});},4300:function _(e,t,r){var n=r(4819),i=r(6792),o="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0];}function s(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(a);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n;}function u(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var i="generic"===e;if(-1===t){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(o)();}if(0===t){o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",o)(l[e][0]);}o=["'use strict'"];var a=n(t),u=a.map(function(e){return"i"+e;}),h="this.offset+"+a.map(function(e){return"this.stride["+e+"]*i"+e;}).join("+"),c=a.map(function(e){return"b"+e;}).join(","),d=a.map(function(e){return"c"+e;}).join(",");o.push("function "+r+"(a,"+c+","+d+",d){this.data=a","this.shape=["+c+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(e){return"this.shape["+e+"]";}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+r+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),i?o.push("return this.data.set("+h+",v)}"):o.push("return this.data["+h+"]=v}"),o.push("proto.get=function "+r+"_get("+u.join(",")+"){"),i?o.push("return this.data.get("+h+")}"):o.push("return this.data["+h+"]}"),o.push("proto.index=function "+r+"_index(",u.join(),"){return "+h+"}"),o.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+a.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("");}).join(",")+","+a.map(function(e){return"this.stride["+e+"]";}).join(",")+",this.offset)}");var f=a.map(function(e){return"a"+e+"=this.shape["+e+"]";}),p=a.map(function(e){return"c"+e+"=this.stride["+e+"]";});o.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+p.join(","));for(var y=0;y<t;++y)o.push("if(typeof i"+y+"==='number'&&i"+y+">=0){d=i"+y+"|0;b+=c"+y+"*d;a"+y+"-=d}");o.push("return new "+r+"(this.data,"+a.map(function(e){return"a"+e;}).join(",")+","+a.map(function(e){return"c"+e;}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+a.map(function(e){return"a"+e+"=this.shape["+e+"]";}).join(",")+","+a.map(function(e){return"b"+e+"=this.stride["+e+"]";}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(y=0;y<t;++y)o.push("if(typeof i"+y+"==='number'){d=i"+y+"|0;if(d<0){c+=b"+y+"*(a"+y+"-1);a"+y+"=ceil(-a"+y+"/d)}else{a"+y+"=ceil(a"+y+"/d)}b"+y+"*=d}");o.push("return new "+r+"(this.data,"+a.map(function(e){return"a"+e;}).join(",")+","+a.map(function(e){return"b"+e;}).join(",")+",c)}");var g=new Array(t),m=new Array(t);for(y=0;y<t;++y)g[y]="a[i"+y+"]",m[y]="b[i"+y+"]";o.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)";}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+m.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(y=0;y<t;++y)o.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(e){return"shape["+e+"]";}).join(",")+","+a.map(function(e){return"stride["+e+"]";}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(l[e],s);}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,r,n){if(void 0===e)return(0,l.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===r){r=new Array(a);for(var s=a-1,h=1;s>=0;--s)r[s]=h,h*=t[s];}if(void 0===n){n=0;for(s=0;s<a;++s)r[s]<0&&(n-=(t[s]-1)*r[s]);}for(var c=function(e){if(i(e))return"buffer";if(o)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64";}return Array.isArray(e)?"array":"generic";}(e),d=l[c];d.length<=a+1;)d.push(u(c,d.length-1));return(0,d[a+1])(e,t,r,n);};},7872:function _(e,t,r){var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"==typeof i.get?i.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&u&&"function"==typeof u.get?u.get:null,h=s&&Set.prototype.forEach,c="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,y=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,w=String.prototype.slice,b=String.prototype.replace,v=String.prototype.toUpperCase,x=String.prototype.toLowerCase,_=RegExp.prototype.test,I=Array.prototype.concat,A=Array.prototype.join,S=Array.prototype.slice,T=Math.floor,C="function"==typeof BigInt?BigInt.prototype.valueOf:null,E=Object.getOwnPropertySymbols,O="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?Symbol.prototype.toString:null,k="function"==typeof Symbol&&"object"==_typeof(Symbol.iterator),P="function"==typeof Symbol&&Symbol.toStringTag&&(_typeof(Symbol.toStringTag)===k||"symbol")?Symbol.toStringTag:null,$=Object.prototype.propertyIsEnumerable,R=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__;}:null);function B(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||_.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-T(-e):T(e);if(n!==e){var i=String(n),o=w.call(t,i.length+1);return b.call(i,r,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"");}}return b.call(t,r,"$&_");}var D=r(6204),M=D.custom,L=G(M)?M:null;function F(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n;}function N(e){return b.call(String(e),/"/g,"&quot;");}function U(e){return!("[object Array]"!==H(e)||P&&"object"==_typeof(e)&&P in e);}function j(e){return!("[object RegExp]"!==H(e)||P&&"object"==_typeof(e)&&P in e);}function G(e){if(k)return e&&"object"==_typeof(e)&&e instanceof Symbol;if("symbol"==_typeof(e))return!0;if(!e||"object"!=_typeof(e)||!O)return!1;try{return O.call(e),!0;}catch(e){}return!1;}e.exports=function e(t,n,i,s){var u=n||{};if(V(u,"quoteStyle")&&"single"!==u.quoteStyle&&"double"!==u.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(u,"maxStringLength")&&("number"==typeof u.maxStringLength?u.maxStringLength<0&&u.maxStringLength!==1/0:null!==u.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var y=!V(u,"customInspect")||u.customInspect;if("boolean"!=typeof y&&"symbol"!==y)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(u,"indent")&&null!==u.indent&&"\t"!==u.indent&&!(parseInt(u.indent,10)===u.indent&&u.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(u,"numericSeparator")&&"boolean"!=typeof u.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var v=u.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return Y(t,u);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var _=String(t);return v?B(t,_):_;}if("bigint"==typeof t){var T=String(t)+"n";return v?B(t,T):T;}var E=void 0===u.depth?5:u.depth;if(void 0===i&&(i=0),i>=E&&E>0&&"object"==_typeof(t))return U(t)?"[Array]":"[Object]";var M=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=A.call(Array(e.indent+1)," ");}return{base:r,prev:A.call(Array(t+1),r)};}(u,i);if(void 0===s)s=[];else if(W(s,t)>=0)return"[Circular]";function z(t,r,n){if(r&&(s=S.call(s)).push(r),n){var o={depth:u.depth};return V(u,"quoteStyle")&&(o.quoteStyle=u.quoteStyle),e(t,o,i+1,s);}return e(t,u,i+1,s);}if("function"==typeof t&&!j(t)){var K=function(e){if(e.name)return e.name;var t=m.call(g.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null;}(t),ee=Q(t,z);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(ee.length>0?" { "+A.call(ee,", ")+" }":"");}if(G(t)){var te=k?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(t);return"object"!=_typeof(t)||k?te:X(te);}if(function(e){if(!e||"object"!=_typeof(e))return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute;}(t)){for(var re="<"+x.call(String(t.nodeName)),ne=t.attributes||[],ie=0;ie<ne.length;ie++)re+=" "+ne[ie].name+"="+F(N(ne[ie].value),"double",u);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+="</"+x.call(String(t.nodeName))+">";}if(U(t)){if(0===t.length)return"[]";var oe=Q(t,z);return M&&!function(e){for(var t=0;t<e.length;t++)if(W(e[t],"\n")>=0)return!1;return!0;}(oe)?"["+J(oe,M)+"]":"[ "+A.call(oe,", ")+" ]";}if(function(e){return!("[object Error]"!==H(e)||P&&"object"==_typeof(e)&&P in e);}(t)){var ae=Q(t,z);return"cause"in Error.prototype||!("cause"in t)||$.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+A.call(ae,", ")+" }":"{ ["+String(t)+"] "+A.call(I.call("[cause]: "+z(t.cause),ae),", ")+" }";}if("object"==_typeof(t)&&y){if(L&&"function"==typeof t[L]&&D)return D(t,{depth:E-i});if("symbol"!==y&&"function"==typeof t.inspect)return t.inspect();}if(function(e){if(!o||!e||"object"!=_typeof(e))return!1;try{o.call(e);try{l.call(e);}catch(e){return!0;}return e instanceof Map;}catch(e){}return!1;}(t)){var se=[];return a&&a.call(t,function(e,r){se.push(z(r,t,!0)+" => "+z(e,t));}),q("Map",o.call(t),se,M);}if(function(e){if(!l||!e||"object"!=_typeof(e))return!1;try{l.call(e);try{o.call(e);}catch(e){return!0;}return e instanceof Set;}catch(e){}return!1;}(t)){var ue=[];return h&&h.call(t,function(e){ue.push(z(e,t));}),q("Set",l.call(t),ue,M);}if(function(e){if(!c||!e||"object"!=_typeof(e))return!1;try{c.call(e,c);try{d.call(e,d);}catch(e){return!0;}return e instanceof WeakMap;}catch(e){}return!1;}(t))return Z("WeakMap");if(function(e){if(!d||!e||"object"!=_typeof(e))return!1;try{d.call(e,d);try{c.call(e,c);}catch(e){return!0;}return e instanceof WeakSet;}catch(e){}return!1;}(t))return Z("WeakSet");if(function(e){if(!f||!e||"object"!=_typeof(e))return!1;try{return f.call(e),!0;}catch(e){}return!1;}(t))return Z("WeakRef");if(function(e){return!("[object Number]"!==H(e)||P&&"object"==_typeof(e)&&P in e);}(t))return X(z(Number(t)));if(function(e){if(!e||"object"!=_typeof(e)||!C)return!1;try{return C.call(e),!0;}catch(e){}return!1;}(t))return X(z(C.call(t)));if(function(e){return!("[object Boolean]"!==H(e)||P&&"object"==_typeof(e)&&P in e);}(t))return X(p.call(t));if(function(e){return!("[object String]"!==H(e)||P&&"object"==_typeof(e)&&P in e);}(t))return X(z(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if(t===r.g)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==H(e)||P&&"object"==_typeof(e)&&P in e);}(t)&&!j(t)){var le=Q(t,z),he=R?R(t)===Object.prototype:t instanceof Object||t.constructor===Object,ce=t instanceof Object?"":"null prototype",de=!he&&P&&Object(t)===t&&P in t?w.call(H(t),8,-1):ce?"Object":"",fe=(he||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(de||ce?"["+A.call(I.call([],de||[],ce||[]),": ")+"] ":"");return 0===le.length?fe+"{}":M?fe+"{"+J(le,M)+"}":fe+"{ "+A.call(le,", ")+" }";}return String(t);};var z=Object.prototype.hasOwnProperty||function(e){return e in this;};function V(e,t){return z.call(e,t);}function H(e){return y.call(e);}function W(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1;}function Y(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Y(w.call(e,0,t.maxStringLength),t)+n;}return F(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",t);}function K(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+v.call(t.toString(16));}function X(e){return"Object("+e+")";}function Z(e){return e+" { ? }";}function q(e,t,r,n){return e+" ("+t+") {"+(n?J(r,n):A.call(r,", "))+"}";}function J(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+A.call(e,","+r)+"\n"+t.prev;}function Q(e,t){var r=U(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=V(e,i)?t(e[i],e):"";}var o,a="function"==typeof E?E(e):[];if(k){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s];}for(var u in e)V(e,u)&&(r&&String(Number(u))===u&&u<e.length||k&&o["$"+u]instanceof Symbol||(_.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if("function"==typeof E)for(var l=0;l<a.length;l++)$.call(e,a[l])&&n.push("["+t(a[l])+"]: "+t(e[a[l]],e));return n;}},6512:function _(e){var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined");}function o(){throw new Error("clearTimeout has not been defined");}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0);}catch(r){try{return t.call(null,e,0);}catch(r){return t.call(this,e,0);}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i;}catch(e){t=i;}try{r="function"==typeof clearTimeout?clearTimeout:o;}catch(e){r=o;}}();var s,u=[],l=!1,h=-1;function c(){l&&s&&(l=!1,s.length?u=s.concat(u):h=-1,u.length&&d());}function d(){if(!l){var e=a(c);l=!0;for(var t=u.length;t;){for(s=u,u=[];++h<t;)s&&s[h].run();h=-1,t=u.length;}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e);}catch(t){try{return r.call(null,e);}catch(t){return r.call(this,e);}}}(e);}}function f(e,t){this.fun=e,this.array=t;}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||l||a(d);},f.prototype.run=function(){this.fun.apply(null,this.array);},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[];},n.binding=function(e){throw new Error("process.binding is not supported");},n.cwd=function(){return"/";},n.chdir=function(e){throw new Error("process.chdir is not supported");},n.umask=function(){return 0;};},7568:function _(e,t,r){var n;e=r.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==_typeof(r.g)&&r.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,u=36,l=1,h=26,c=38,d=700,f=72,p=128,y="-",g=/^xn--/,m=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=u-l,x=Math.floor,_=String.fromCharCode;function I(e){throw new RangeError(b[e]);}function A(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n;}function S(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+A((e=e.replace(w,".")).split("."),t).join(".");}function T(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n;}function C(e){return A(e,function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e);}).join("");}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5);}function O(e,t,r){var n=0;for(e=r?x(e/d):e>>1,e+=x(e/t);e>v*h>>1;n+=u)e=x(e/v);return x(n+(v+1)*e/(e+c));}function k(e){var t,r,n,i,o,a,c,d,g,m,w,b=[],v=e.length,_=0,A=p,S=f;for((r=e.lastIndexOf(y))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&I("not-basic"),b.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<v;){for(o=_,a=1,c=u;i>=v&&I("invalid-input"),((d=(w=e.charCodeAt(i++))-48<10?w-22:w-65<26?w-65:w-97<26?w-97:u)>=u||d>x((s-_)/a))&&I("overflow"),_+=d*a,!(d<(g=c<=S?l:c>=S+h?h:c-S));c+=u)a>x(s/(m=u-g))&&I("overflow"),a*=m;S=O(_-o,t=b.length+1,0==o),x(_/t)>s-A&&I("overflow"),A+=x(_/t),_%=t,b.splice(_++,0,A);}return C(b);}function P(e){var t,r,n,i,o,a,c,d,g,m,w,b,v,A,S,C=[];for(b=(e=T(e)).length,t=p,r=0,o=f,a=0;a<b;++a)(w=e[a])<128&&C.push(_(w));for(n=i=C.length,i&&C.push(y);n<b;){for(c=s,a=0;a<b;++a)(w=e[a])>=t&&w<c&&(c=w);for(c-t>x((s-r)/(v=n+1))&&I("overflow"),r+=(c-t)*v,t=c,a=0;a<b;++a)if((w=e[a])<t&&++r>s&&I("overflow"),w==t){for(d=r,g=u;!(d<(m=g<=o?l:g>=o+h?h:g-o));g+=u)S=d-m,A=u-m,C.push(_(E(m+S%A,0))),d=x(S/A);C.push(_(E(d,0))),o=O(r,v,n==i),r=0,++n;}++r,++t;}return C.join("");}a={version:"1.4.1",ucs2:{decode:T,encode:C},decode:k,encode:P,toASCII:function toASCII(e){return S(e,function(e){return m.test(e)?"xn--"+P(e):e;});},toUnicode:function toUnicode(e){return S(e,function(e){return g.test(e)?k(e.slice(4).toLowerCase()):e;});}},void 0===(n=function(){return a;}.call(t,r,t,e))||(e.exports=n);}();},6515:function _(e){var t=String.prototype.replace,r=/%20/g,n="RFC1738",i="RFC3986";e.exports={"default":i,formatters:{RFC1738:function RFC1738(e){return t.call(e,r,"+");},RFC3986:function RFC3986(e){return String(e);}},RFC1738:n,RFC3986:i};},7392:function _(e,t,r){var n=r(4368),i=r(4812),o=r(6515);e.exports={formats:o,parse:i,stringify:n};},4812:function _(e,t,r){var n=r(5872),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function s(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10));});},u=function u(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e;},l=function l(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(o),l=s?o.slice(0,s.index):o,h=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;h.push(l);}for(var c=0;r.depth>0&&null!==(s=a.exec(o))&&c<r.depth;){if(c+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;h.push(s[1]);}return s&&h.push("["+o.slice(s.index)+"]"),function(e,t,r,n){for(var i=n?t:u(t,r),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,h=parseInt(l,10);r.parseArrays||""!==l?!isNaN(h)&&s!==l&&String(h)===l&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(a=[])[h]=i:"__proto__"!==l&&(a[l]=i):a={0:i};}i=a;}return i;}(h,t,r,n);}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling};}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var h="string"==typeof e?function(e,t){var r,l={__proto__:null},h=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,d=h.split(t.delimiter,c),f=-1,p=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?p="utf-8":"utf8=%26%2310003%3B"===d[r]&&(p="iso-8859-1"),f=r,r=d.length);for(r=0;r<d.length;++r)if(r!==f){var y,g,m=d[r],w=m.indexOf("]="),b=-1===w?m.indexOf("="):w+1;-1===b?(y=t.decoder(m,a.decoder,p,"key"),g=t.strictNullHandling?null:""):(y=t.decoder(m.slice(0,b),a.decoder,p,"key"),g=n.maybeMap(u(m.slice(b+1),t),function(e){return t.decoder(e,a.decoder,p,"value");})),g&&t.interpretNumericEntities&&"iso-8859-1"===p&&(g=s(g)),m.indexOf("[]=")>-1&&(g=o(g)?[g]:g),i.call(l,y)?l[y]=n.combine(l[y],g):l[y]=g;}return l;}(e,r):e,c=r.plainObjects?Object.create(null):{},d=Object.keys(h),f=0;f<d.length;++f){var p=d[f],y=l(p,h[p],r,"string"==typeof e);c=n.merge(c,y,r);}return!0===r.allowSparse?c:n.compact(c);};},4368:function _(e,t,r){var n=r(7223),i=r(5872),o=r(6515),a=Object.prototype.hasOwnProperty,s={brackets:function brackets(e){return e+"[]";},comma:"comma",indices:function indices(e,t){return e+"["+t+"]";},repeat:function repeat(e){return e;}},u=Array.isArray,l=Array.prototype.push,h=function h(e,t){l.apply(e,u(t)?t:[t]);},c=Date.prototype.toISOString,d=o["default"],f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:d,formatter:o.formatters[d],indices:!1,serializeDate:function serializeDate(e){return c.call(e);},skipNulls:!1,strictNullHandling:!1},p={},y=function e(t,r,o,a,s,l,c,d,y,g,m,w,b,v,x,_){for(var I,A=t,S=_,T=0,C=!1;void 0!==(S=S.get(p))&&!C;){var E=S.get(t);if(T+=1,void 0!==E){if(E===T)throw new RangeError("Cyclic object value");C=!0;}void 0===S.get(p)&&(T=0);}if("function"==typeof d?A=d(r,A):A instanceof Date?A=m(A):"comma"===o&&u(A)&&(A=i.maybeMap(A,function(e){return e instanceof Date?m(e):e;})),null===A){if(s)return c&&!v?c(r,f.encoder,x,"key",w):r;A="";}if("string"==typeof(I=A)||"number"==typeof I||"boolean"==typeof I||"symbol"==_typeof(I)||"bigint"==typeof I||i.isBuffer(A))return c?[b(v?r:c(r,f.encoder,x,"key",w))+"="+b(c(A,f.encoder,x,"value",w))]:[b(r)+"="+b(String(A))];var O,k=[];if(void 0===A)return k;if("comma"===o&&u(A))v&&c&&(A=i.maybeMap(A,c)),O=[{value:A.length>0?A.join(",")||null:void 0}];else if(u(d))O=d;else{var P=Object.keys(A);O=y?P.sort(y):P;}for(var $=a&&u(A)&&1===A.length?r+"[]":r,R=0;R<O.length;++R){var B=O[R],D="object"==_typeof(B)&&void 0!==B.value?B.value:A[B];if(!l||null!==D){var M=u(A)?"function"==typeof o?o($,B):$:$+(g?"."+B:"["+B+"]");_.set(t,T);var L=n();L.set(p,_),h(k,e(D,M,o,a,s,l,"comma"===o&&v&&u(A)?null:c,d,y,g,m,w,b,v,x,L));}}return k;};e.exports=function(e,t){var r,i=e,l=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o["default"];if(void 0!==e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format;}var n=o.formatters[r],i=f.filter;return("function"==typeof e.filter||u(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling};}(t);"function"==typeof l.filter?i=(0,l.filter)("",i):u(l.filter)&&(r=l.filter);var c,d=[];if("object"!=_typeof(i)||null===i)return"";c=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=s[c];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var g="comma"===p&&t&&t.commaRoundTrip;r||(r=Object.keys(i)),l.sort&&r.sort(l.sort);for(var m=n(),w=0;w<r.length;++w){var b=r[w];l.skipNulls&&null===i[b]||h(d,y(i[b],b,p,g,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,m));}var v=d.join(l.delimiter),x=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),v.length>0?x+v:"";};},5872:function _(e,t,r){var n=r(6515),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e;}(),s=function s(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r;};e.exports={arrayToObject:s,assign:function assign(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e;},e);},combine:function combine(e,t){return[].concat(e,t);},compact:function compact(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var l=s[u],h=a[l];"object"==_typeof(h)&&null!==h&&-1===r.indexOf(h)&&(t.push({obj:a,prop:l}),r.push(h));}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n;}}}(t),e;},decode:function decode(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n);}catch(e){return n;}},encode:function encode(e,t,r,i,o){if(0===e.length)return e;var s=e;if("symbol"==_typeof(e)?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B";});for(var u="",l=0;l<s.length;++l){var h=s.charCodeAt(l);45===h||46===h||95===h||126===h||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===n.RFC1738&&(40===h||41===h)?u+=s.charAt(l):h<128?u+=a[h]:h<2048?u+=a[192|h>>6]+a[128|63&h]:h<55296||h>=57344?u+=a[224|h>>12]+a[128|h>>6&63]+a[128|63&h]:(l+=1,h=65536+((1023&h)<<10|1023&s.charCodeAt(l)),u+=a[240|h>>18]+a[128|h>>12&63]+a[128|h>>6&63]+a[128|63&h]);}return u;},isBuffer:function isBuffer(e){return!(!e||"object"!=_typeof(e))&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e));},isRegExp:function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e);},maybeMap:function maybeMap(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r;}return t(e);},merge:function e(t,r,n){if(!r)return t;if("object"!=_typeof(r)){if(o(t))t.push(r);else{if(!t||"object"!=_typeof(t))return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0);}return t;}if(!t||"object"!=_typeof(t))return[t].concat(r);var a=t;return o(t)&&!o(r)&&(a=s(t,n)),o(t)&&o(r)?(r.forEach(function(r,o){if(i.call(t,o)){var a=t[o];a&&"object"==_typeof(a)&&r&&"object"==_typeof(r)?t[o]=e(a,r,n):t.push(r);}else t[o]=r;}),t):Object.keys(r).reduce(function(t,o){var a=r[o];return i.call(t,o)?t[o]=e(t[o],a,n):t[o]=a,t;},a);}};},2392:function _(e,t,r){var n=r(6604),i=r(5456),o=r(1188)(),a=r(872),s=r(6556),u=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||u(t)!==t)throw new s("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,l=!0;if("length"in e&&a){var h=a(e,"length");h&&!h.configurable&&(n=!1),h&&!h.writable&&(l=!1);}return(n||l||!r)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e;};},7223:function _(e,t,r){var n=r(6604),i=r(2768),o=r(7872),a=r(6556),s=n("%WeakMap%",!0),u=n("%Map%",!0),l=i("WeakMap.prototype.get",!0),h=i("WeakMap.prototype.set",!0),c=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),y=function y(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r;};e.exports=function(){var e,t,r,n={assert:function assert(e){if(!n.has(e))throw new a("Side channel does not contain "+o(e));},get:function get(n){if(s&&n&&("object"==_typeof(n)||"function"==typeof n)){if(e)return l(e,n);}else if(u){if(t)return d(t,n);}else if(r)return function(e,t){var r=y(e,t);return r&&r.value;}(r,n);},has:function has(n){if(s&&n&&("object"==_typeof(n)||"function"==typeof n)){if(e)return c(e,n);}else if(u){if(t)return p(t,n);}else if(r)return function(e,t){return!!y(e,t);}(r,n);return!1;},set:function set(n,i){s&&n&&("object"==_typeof(n)||"function"==typeof n)?(e||(e=new s()),h(e,n,i)):u?(t||(t=new u()),f(t,n,i)):(r||(r={key:{},next:null}),function(e,t,r){var n=y(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r};}(r,n,i));}};return n;};},2248:function _(e){e.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],a=1;a<n;++a)if(o=i,t(i=e[a],o)){if(a===r){r++;continue;}e[r++]=i;}return e.length=r,e;}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,(n=e[o])!==i){if(o===t){t++;continue;}e[t++]=n;}return e.length=t,e;}(e));};},4776:function _(e,t,r){var n=r(7568);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null;}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),h=["%","/","?",";","#"].concat(l),c=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=r(7392);function w(e,t,r){if(e&&"object"==_typeof(e)&&e instanceof i)return e;var n=new i();return n.parse(e,t,r),n;}i.prototype.parse=function(e,t,r){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+_typeof(e));var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(a);u[0]=u[0].replace(/\\/g,"/");var w=e=u.join(a);if(w=w.trim(),!r&&1===e.split("#").length){var b=s.exec(w);if(b)return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?m.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this;}var v=o.exec(w);if(v){var x=(v=v[0]).toLowerCase();this.protocol=x,w=w.substr(v.length);}if(r||v||w.match(/^\/\/[^@/]+@[^@/]+/)){var _="//"===w.substr(0,2);!_||v&&y[v]||(w=w.substr(2),this.slashes=!0);}if(!y[v]&&(_||v&&!g[v])){for(var I,A,S=-1,T=0;T<c.length;T++){-1!==(C=w.indexOf(c[T]))&&(-1===S||C<S)&&(S=C);}-1!==(A=-1===S?w.lastIndexOf("@"):w.lastIndexOf("@",S))&&(I=w.slice(0,A),w=w.slice(A+1),this.auth=decodeURIComponent(I)),S=-1;for(T=0;T<h.length;T++){var C;-1!==(C=w.indexOf(h[T]))&&(-1===S||C<S)&&(S=C);}-1===S&&(S=w.length),this.host=w.slice(0,S),w=w.slice(S),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var O=this.hostname.split(/\./),k=(T=0,O.length);T<k;T++){var P=O[T];if(P&&!P.match(d)){for(var $="",R=0,B=P.length;R<B;R++)P.charCodeAt(R)>127?$+="x":$+=P[R];if(!$.match(d)){var D=O.slice(0,T),M=O.slice(T+1),L=P.match(f);L&&(D.push(L[1]),M.unshift(L[2])),M.length&&(w="/"+M.join(".")+w),this.hostname=D.join(".");break;}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=n.toASCII(this.hostname));var F=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+F,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w));}if(!p[x])for(T=0,k=l.length;T<k;T++){var U=l[T];if(-1!==w.indexOf(U)){var j=encodeURIComponent(U);j===U&&(j=escape(U)),w=w.split(U).join(j);}}var G=w.indexOf("#");-1!==G&&(this.hash=w.substr(G),w=w.slice(0,G));var z=w.indexOf("?");if(-1!==z?(this.search=w.substr(z),this.query=w.substr(z+1),t&&(this.query=m.parse(this.query)),w=w.slice(0,z)):t&&(this.search="",this.query={}),w&&(this.pathname=w),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var V=this.search||"";this.path=F+V;}return this.href=this.format(),this;},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"==_typeof(this.query)&&Object.keys(this.query).length&&(o=m.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e);}))+(a=a.replace("#","%23"))+n;},i.prototype.resolve=function(e){return this.resolveObject(w(e,!1,!0)).format();},i.prototype.resolveObject=function(e){if("string"==typeof e){var t=new i();t.parse(e,!1,!0),e=t;}for(var r=new i(),n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];r[a]=this[a];}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(r[l]=e[l]);}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r;}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var d=h[c];r[d]=e[d];}return r.href=r.format(),r;}if(r.protocol=e.protocol,e.host||y[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/");}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",m=r.search||"";r.path=p+m;}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r;}var w=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=b||w||r.host&&e.pathname,x=v,_=r.pathname&&r.pathname.split("/")||[],I=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(I&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),v=v&&(""===f[0]||""===_[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),r.search=e.search,r.query=e.query;else if(null!=e.search){if(I)r.host=_.shift(),r.hostname=r.host,(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname);return r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=_.slice(-1)[0],S=(r.host||e.host||_.length>1)&&("."===A||".."===A)||""===A,T=0,C=_.length;C>=0;C--)"."===(A=_[C])?_.splice(C,1):".."===A?(_.splice(C,1),T++):T&&(_.splice(C,1),T--);if(!v&&!x)for(;T--;T)_.unshift("..");!v||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),S&&"/"!==_.join("/").substr(-1)&&_.push("");var E,O=""===_[0]||_[0]&&"/"===_[0].charAt(0);I&&(r.hostname=O?"":_.length?_.shift():"",r.host=r.hostname,(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname));return(v=v||r.host&&_.length)&&!O&&_.unshift(""),_.length>0?r.pathname=_.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r;},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e);},t.K0=w,t.WI=function(e,t){return w(e,!1,!0).resolve(t);},t.E9=function(e){return"string"==typeof e&&(e=w(e)),e instanceof i?e.format():i.prototype.format.call(e);};},8804:function _(e){e.exports="data:application/javascript;base64,ZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQociwgbCkgeyB2YXIgdCA9IG51bGwgPT0gciA/IG51bGwgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByWyJAQGl0ZXJhdG9yIl07IGlmIChudWxsICE9IHQpIHsgdmFyIGUsIG4sIGksIHUsIGEgPSBbXSwgZiA9ICEwLCBvID0gITE7IHRyeSB7IGlmIChpID0gKHQgPSB0LmNhbGwocikpLm5leHQsIDAgPT09IGwpIHsgaWYgKE9iamVjdCh0KSAhPT0gdCkgcmV0dXJuOyBmID0gITE7IH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTsgfSBjYXRjaCAocikgeyBvID0gITAsIG4gPSByOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIWYgJiYgbnVsbCAhPSB0WyJyZXR1cm4iXSAmJiAodSA9IHRbInJldHVybiJdKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjsgfSBmaW5hbGx5IHsgaWYgKG8pIHRocm93IG47IH0gfSByZXR1cm4gYTsgfSB9CmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQpmdW5jdGlvbiBfY29uc3RydWN0KHQsIGUsIHIpIHsgaWYgKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSkgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IHZhciBvID0gW251bGxdOyBvLnB1c2guYXBwbHkobywgZSk7IHZhciBwID0gbmV3ICh0LmJpbmQuYXBwbHkodCwgbykpKCk7IHJldHVybiByICYmIF9zZXRQcm90b3R5cGVPZihwLCByLnByb3RvdHlwZSksIHA7IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9CmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlclsiQEBpdGVyYXRvciJdICE9IG51bGwpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH0KZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBrZXkgPSBfdG9Qcm9wZXJ0eUtleShrZXkpOyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCAic3RyaW5nIik7IHJldHVybiAic3ltYm9sIiA9PSBfdHlwZW9mKGkpID8gaSA6IFN0cmluZyhpKTsgfQpmdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoIm9iamVjdCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgImRlZmF1bHQiKTsgaWYgKCJvYmplY3QiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoInN0cmluZyIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9CmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvWyJAQGl0ZXJhdG9yIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2U0KSB7IHRocm93IF9lNDsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lNSkgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTU7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdFsicmV0dXJuIl0gIT0gbnVsbCkgaXRbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH0KZnVuY3Rpb24gX3R5cGVvZihvKSB7ICJAYmFiZWwvaGVscGVycyAtIHR5cGVvZiI7IHJldHVybiBfdHlwZW9mID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9Ci8qISBGb3IgbGljZW5zZSBpbmZvcm1hdGlvbiBwbGVhc2Ugc2VlIGxvd0xpZ2h0LmpzLkxJQ0VOU0UudHh0ICovCihmdW5jdGlvbiAoKSB7CiAgInVzZSBzdHJpY3QiOwoKICBmdW5jdGlvbiB0KGUpIHsKICAgIHJldHVybiB0ID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IF90eXBlb2YoU3ltYm9sLml0ZXJhdG9yKSA/IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBfdHlwZW9mKHQpOwogICAgfSA6IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiB0LmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgdCAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZih0KTsKICAgIH0sIHQoZSk7CiAgfQogIGZ1bmN0aW9uIGUodCwgZSkgewogICAgZm9yICh2YXIgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKSB7CiAgICAgIHZhciBhID0gZVtyXTsKICAgICAgYS5lbnVtZXJhYmxlID0gYS5lbnVtZXJhYmxlIHx8ICExLCBhLmNvbmZpZ3VyYWJsZSA9ICEwLCAidmFsdWUiIGluIGEgJiYgKGEud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBuKGEua2V5KSwgYSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG4oZSkgewogICAgdmFyIG4gPSBmdW5jdGlvbiAoZSwgbikgewogICAgICBpZiAoIm9iamVjdCIgIT0gdChlKSB8fCAhZSkgcmV0dXJuIGU7CiAgICAgIHZhciByID0gZVtTeW1ib2wudG9QcmltaXRpdmVdOwogICAgICBpZiAodm9pZCAwICE9PSByKSB7CiAgICAgICAgdmFyIGEgPSByLmNhbGwoZSwgbiB8fCAiZGVmYXVsdCIpOwogICAgICAgIGlmICgib2JqZWN0IiAhPSB0KGEpKSByZXR1cm4gYTsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOwogICAgICB9CiAgICAgIHJldHVybiAoInN0cmluZyIgPT09IG4gPyBTdHJpbmcgOiBOdW1iZXIpKGUpOwogICAgfShlLCAic3RyaW5nIik7CiAgICByZXR1cm4gInN5bWJvbCIgPT0gdChuKSA/IG4gOiBTdHJpbmcobik7CiAgfQogIHZhciByID0gLjAwODg1NiwKICAgIGEgPSAxIC8gTWF0aC5zcXJ0KDIpLAogICAgbyA9IDEgLyBNYXRoLnNxcnQoMyksCiAgICBpID0gMSAvIE1hdGguc3FydCg2KSwKICAgIHUgPSBNYXRoLmxvZygxMCksCiAgICBsID0gZnVuY3Rpb24gKCkgewogICAgICBmdW5jdGlvbiB0KCkgewogICAgICAgICFmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIGUpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgICB9KHRoaXMsIHQpOwogICAgICB9CiAgICAgIHZhciBuLCBsLCBjOwogICAgICByZXR1cm4gbiA9IHQsIGMgPSBbewogICAgICAgIGtleTogIlJHQnRvWFlaIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgICAgdmFyIGUgPSB0LlIsCiAgICAgICAgICAgIG4gPSB0LkcsCiAgICAgICAgICAgIHIgPSB0LkI7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBYOiAuNDEyNDUzICogKGUgPSBhKGUpKSArIC4zNTc1OCAqIChuID0gYShuKSkgKyAuMTgwNDIzICogKHIgPSBhKHIpKSwKICAgICAgICAgICAgWTogLjIxMjY3MSAqIGUgKyAuNzE1MTYgKiBuICsgLjA3MjE2OSAqIHIsCiAgICAgICAgICAgIFo6IC4wMTkzMzQgKiBlICsgLjExOTE5MyAqIG4gKyAuOTUwMjI3ICogcgogICAgICAgICAgfTsKICAgICAgICAgIGZ1bmN0aW9uIGEodCkgewogICAgICAgICAgICByZXR1cm4gKHQgLz0gMjU1KSA+IC4wNDA0NSA/IE1hdGgucG93KCh0ICsgLjA1NSkgLyAxLjA1NSwgMi40KSA6IHQgLyAxMi45MjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJSR0J0b0NJRUxhYiIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLlhZWnRvQ0lFTGFiKHRoaXMuUkdCdG9YWVoodCkpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIlJHQnRvTE1TIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgICAgdmFyIGUgPSB0LlIsCiAgICAgICAgICAgIG4gPSB0LkcsCiAgICAgICAgICAgIHIgPSB0LkI7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBMOiAuMzgxMSAqIGUgKyAuNTc4MyAqIG4gKyAuMDQwMiAqIHIsCiAgICAgICAgICAgIE06IC4xOTY3ICogZSArIC43MjQ0ICogbiArIC4wNzgyICogciwKICAgICAgICAgICAgUzogLjAyNDEgKiBlICsgLjEyODggKiBuICsgLjg0NDQgKiByCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIlJHQnRvTGFiIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuTE1TdG9MYWIodGhpcy5SR0J0b0xNUyh0KSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiUkdCdG9ZIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgWTogKC4yOTkgKiB0LlIgKyAuNTg3ICogdC5HICsgLjExNCAqIHQuQikgLyAyNTUKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiWFladG9SR0IiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh0KSB7CiAgICAgICAgICB2YXIgZSA9IHQuWCwKICAgICAgICAgICAgbiA9IHQuWSwKICAgICAgICAgICAgciA9IHQuWiwKICAgICAgICAgICAgYSA9IHUoMy4yNDA2ICogZSArIC0xLjUzNzIgKiBuICsgLS40OTg2ICogciksCiAgICAgICAgICAgIG8gPSB1KC0uOTY4OSAqIGUgKyAxLjg3NTggKiBuICsgLjA0MTUgKiByKSwKICAgICAgICAgICAgaSA9IHUoLjA1NTcgKiBlICsgLS4yMDQgKiBuICsgMS4wNTcgKiByKTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIFI6IHMoMjU1ICogYSksCiAgICAgICAgICAgIEc6IHMoMjU1ICogbyksCiAgICAgICAgICAgIEI6IHMoMjU1ICogaSkKICAgICAgICAgIH07CiAgICAgICAgICBmdW5jdGlvbiB1KHQpIHsKICAgICAgICAgICAgcmV0dXJuIHQgPiAuMDAzMTMwOCA/IDEuMDU1ICogTWF0aC5wb3codCwgMSAvIDIuNCkgLSAuMDU1IDogMTIuOTIgKiB0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIlhZWnRvQ0lFTGFiIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgICAgdmFyIGUgPSB0LlgsCiAgICAgICAgICAgIG4gPSB0LlksCiAgICAgICAgICAgIGEgPSB0LlosCiAgICAgICAgICAgIG8gPSAhKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdKSB8fCBhcmd1bWVudHNbMV0sCiAgICAgICAgICAgIGkgPSBuID4gciA/IDExNiAqIE1hdGgucG93KG4sIDEgLyAzKSAtIDE2IDogOTAzLjMgKiBuLAogICAgICAgICAgICB1ID0gNTAwICogKHMoZSkgLSBzKG4pKSwKICAgICAgICAgICAgbCA9IDIwMCAqIChzKG4pIC0gcyhhKSk7CiAgICAgICAgICByZXR1cm4gbyA/IHRoaXMubm9ybWFsaXplQ0lFTGFiKHsKICAgICAgICAgICAgTDogaSwKICAgICAgICAgICAgYTogdSwKICAgICAgICAgICAgYjogbAogICAgICAgICAgfSkgOiB7CiAgICAgICAgICAgIEw6IGksCiAgICAgICAgICAgIGE6IHUsCiAgICAgICAgICAgIGI6IGwKICAgICAgICAgIH07CiAgICAgICAgICBmdW5jdGlvbiBzKHQpIHsKICAgICAgICAgICAgcmV0dXJuIHQgPiByID8gTWF0aC5wb3codCwgMSAvIDMpIDogNy43ODcgKiB0ICsgMTYgLyAxMTY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiQ0lFTGFidG9YWVoiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh0KSB7CiAgICAgICAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdICYmICFhcmd1bWVudHNbMV0gPyB0IDogdGhpcy5ub3JtYWxpemVCYWNrQ0lFTGFiKHQpLAogICAgICAgICAgICBuID0gZS5MLAogICAgICAgICAgICBhID0gZS5hLAogICAgICAgICAgICBvID0gZS5iLAogICAgICAgICAgICBpID0gKG4gKyAxNikgLyAxMTYsCiAgICAgICAgICAgIHUgPSBzKGEgLyA1MDAgKyBpKSwKICAgICAgICAgICAgbCA9IHMoaSAtIG8gLyAyMDApOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgWDogdSwKICAgICAgICAgICAgWTogcyhpKSwKICAgICAgICAgICAgWjogbAogICAgICAgICAgfTsKICAgICAgICAgIGZ1bmN0aW9uIHModCkgewogICAgICAgICAgICB2YXIgZSA9IE1hdGgucG93KHQsIDMpOwogICAgICAgICAgICByZXR1cm4gZSA+IHIgPyBlIDogKHQgLSAxNiAvIDExNikgLyA3Ljc4NzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJDSUVMYWJ0b1JHQiIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLlhZWnRvUkdCKHRoaXMuQ0lFTGFidG9YWVoodCkpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIm5vcm1hbGl6ZUNJRUxhYiIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIEw6IHQuTCAvIDEwMCwKICAgICAgICAgICAgYTogKHQuYSArIDEyOCkgLyAyNTUsCiAgICAgICAgICAgIGI6ICh0LmIgKyAxMjgpIC8gMjU1CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIm5vcm1hbGl6ZUJhY2tDSUVMYWIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh0KSB7CiAgICAgICAgICB2YXIgZSA9IHQuTCwKICAgICAgICAgICAgbiA9IHQuYSwKICAgICAgICAgICAgciA9IHQuYjsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIEw6IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgMTAwICogZSkpLAogICAgICAgICAgICBhOiBNYXRoLm1pbigxMjcsIE1hdGgubWF4KC0xMjcsIDI1NSAqIG4gLSAxMjgpKSwKICAgICAgICAgICAgYjogTWF0aC5taW4oMTI3LCBNYXRoLm1heCgtMTI3LCAyNTUgKiByIC0gMTI4KSkKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiTE1TdG9SR0IiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh0KSB7CiAgICAgICAgICB2YXIgZSA9IHQuTCwKICAgICAgICAgICAgbiA9IHQuTSwKICAgICAgICAgICAgciA9IHQuUzsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIFI6IHMoNC40Njg2ICogZSAtIDMuNTg4NiAqIG4gKyAuMTE5NiAqIHIpLAogICAgICAgICAgICBHOiBzKC0xLjIxOTcgKiBlICsgMi4zODMgKiBuIC0gLjE2MjYgKiByKSwKICAgICAgICAgICAgQjogcyguMDU4NSAqIGUgLSAuMjYxICogbiArIDEuMjA1NiAqIHIpCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIkxNU3RvTGFiIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgICAgdmFyIGUgPSB0LkwsCiAgICAgICAgICAgIG4gPSB0Lk0sCiAgICAgICAgICAgIHIgPSB0LlM7CiAgICAgICAgICByZXR1cm4gZSAmJiAoZSA9IE1hdGgubG9nKGUpIC8gdSksIG4gJiYgKG4gPSBNYXRoLmxvZyhuKSAvIHUpLCByICYmIChyID0gTWF0aC5sb2cocikgLyB1KSwgewogICAgICAgICAgICBMOiAoZSArIG4gKyByKSAqIG8sCiAgICAgICAgICAgIGE6IChlICsgbiAtIDIgKiByKSAqIGksCiAgICAgICAgICAgIGI6IChlIC0gbikgKiBhCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIkxhYnRvUkdCIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuTE1TdG9SR0IodGhpcy5MYWJ0b0xNUyh0KSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiTGFidG9MTVMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh0KSB7CiAgICAgICAgICB2YXIgZSA9IHQuTCwKICAgICAgICAgICAgbiA9IHQuYSwKICAgICAgICAgICAgciA9IHQuYjsKICAgICAgICAgIHJldHVybiBlICo9IG8sIG4gKj0gaSwgciAqPSBhLCB7CiAgICAgICAgICAgIEw6IE1hdGgucG93KDEwLCBlICsgbiArIHIpLAogICAgICAgICAgICBNOiBNYXRoLnBvdygxMCwgZSArIG4gLSByKSwKICAgICAgICAgICAgUzogTWF0aC5wb3coMTAsIGUgLSAyICogbikKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9XSwgKGwgPSBudWxsKSAmJiBlKG4ucHJvdG90eXBlLCBsKSwgYyAmJiBlKG4sIGMpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkobiwgInByb3RvdHlwZSIsIHsKICAgICAgICB3cml0YWJsZTogITEKICAgICAgfSksIHQ7CiAgICB9KCk7CiAgZnVuY3Rpb24gcyh0KSB7CiAgICByZXR1cm4gTWF0aC5taW4oMjU1LCBNYXRoLm1heCgwLCB0KSk7CiAgfQogIGZ1bmN0aW9uIGModCkgewogICAgcmV0dXJuIGMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gX3R5cGVvZihTeW1ib2wuaXRlcmF0b3IpID8gZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIF90eXBlb2YodCk7CiAgICB9IDogZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIHQgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIHQuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiB0ICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mKHQpOwogICAgfSwgYyh0KTsKICB9CiAgZnVuY3Rpb24gZih0LCBlKSB7CiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHsKICAgICAgdmFyIHIgPSBlW25dOwogICAgICByLmVudW1lcmFibGUgPSByLmVudW1lcmFibGUgfHwgITEsIHIuY29uZmlndXJhYmxlID0gITAsICJ2YWx1ZSIgaW4gciAmJiAoci53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIGgoci5rZXkpLCByKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gaCh0KSB7CiAgICB2YXIgZSA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIGlmICgib2JqZWN0IiAhPSBjKHQpIHx8ICF0KSByZXR1cm4gdDsKICAgICAgdmFyIG4gPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07CiAgICAgIGlmICh2b2lkIDAgIT09IG4pIHsKICAgICAgICB2YXIgciA9IG4uY2FsbCh0LCBlIHx8ICJkZWZhdWx0Iik7CiAgICAgICAgaWYgKCJvYmplY3QiICE9IGMocikpIHJldHVybiByOwogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuIik7CiAgICAgIH0KICAgICAgcmV0dXJuICgic3RyaW5nIiA9PT0gZSA/IFN0cmluZyA6IE51bWJlcikodCk7CiAgICB9KHQsICJzdHJpbmciKTsKICAgIHJldHVybiAic3ltYm9sIiA9PSBjKGUpID8gZSA6IFN0cmluZyhlKTsKICB9CiAgdmFyIHYgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiB0KGUpIHsKICAgICAgIWZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIGUpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgfSh0aGlzLCB0KSwgdGhpcy5hQXZlcmFnZSA9IHt9LCB0aGlzLnN0ZERldiA9IHt9LCB0aGlzLnN1bSA9IHt9LCB0aGlzLnN1bVNxciA9IHt9LCB0aGlzLnBpeGVsc0NvdW50ID0gZTsKICAgIH0KICAgIHZhciBlLCBuLCByOwogICAgcmV0dXJuIGUgPSB0LCAobiA9IFt7CiAgICAgIGtleTogImFkZFBpeGVsIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQpIHsKICAgICAgICB2YXIgZSA9IHRoaXM7CiAgICAgICAgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAobikgewogICAgICAgICAgdmFyIHIsIGE7CiAgICAgICAgICBlLnN1bVtuXSA9IChudWxsICE9PSAociA9IGUuc3VtW25dKSAmJiB2b2lkIDAgIT09IHIgPyByIDogMCkgKyB0W25dLCBlLnN1bVNxcltuXSA9IChudWxsICE9PSAoYSA9IGUuc3VtU3FyW25dKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogMCkgKyBNYXRoLnBvdyh0W25dLCAyKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJjb3VudEF2ZXJhZ2UiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN1bSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIG47CiAgICAgICAgICB0LmFBdmVyYWdlW2VdID0gKG51bGwgIT09IChuID0gdC5zdW1bZV0pICYmIHZvaWQgMCAhPT0gbiA/IG4gOiAwKSAvIHQucGl4ZWxzQ291bnQ7CiAgICAgICAgfSksIHRoaXMuYUF2ZXJhZ2U7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiY291bnRTdGREZXYiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN1bVNxcikuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIG4sCiAgICAgICAgICAgIHIsCiAgICAgICAgICAgIGEgPSAobnVsbCAhPT0gKG4gPSB0LnN1bVNxcltlXSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IDApIC0gdC5waXhlbHNDb3VudCAqIE1hdGgucG93KG51bGwgIT09IChyID0gdC5hQXZlcmFnZVtlXSkgJiYgdm9pZCAwICE9PSByID8gciA6IDAsIDIpOwogICAgICAgICAgdC5zdGREZXZbZV0gPSBNYXRoLnNxcnQoK2EudG9GaXhlZCg1KSAvICh0LnBpeGVsc0NvdW50IC0gMSkpOwogICAgICAgIH0pLCB0aGlzLnN0ZERldjsKICAgICAgfQogICAgfV0pICYmIGYoZS5wcm90b3R5cGUsIG4pLCByICYmIGYoZSwgciksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAicHJvdG90eXBlIiwgewogICAgICB3cml0YWJsZTogITEKICAgIH0pLCB0OwogIH0oKTsKICBmdW5jdGlvbiBiKHQpIHsKICAgIHJldHVybiBiID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IF90eXBlb2YoU3ltYm9sLml0ZXJhdG9yKSA/IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBfdHlwZW9mKHQpOwogICAgfSA6IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiB0LmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgdCAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZih0KTsKICAgIH0sIGIodCk7CiAgfQogIGZ1bmN0aW9uIHkodCwgZSkgewogICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB7CiAgICAgIHZhciByID0gZVtuXTsKICAgICAgci5lbnVtZXJhYmxlID0gci5lbnVtZXJhYmxlIHx8ICExLCByLmNvbmZpZ3VyYWJsZSA9ICEwLCAidmFsdWUiIGluIHIgJiYgKHIud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBtKHIua2V5KSwgcik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG0odCkgewogICAgdmFyIGUgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICBpZiAoIm9iamVjdCIgIT0gYih0KSB8fCAhdCkgcmV0dXJuIHQ7CiAgICAgIHZhciBuID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOwogICAgICBpZiAodm9pZCAwICE9PSBuKSB7CiAgICAgICAgdmFyIHIgPSBuLmNhbGwodCwgZSB8fCAiZGVmYXVsdCIpOwogICAgICAgIGlmICgib2JqZWN0IiAhPSBiKHIpKSByZXR1cm4gcjsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOwogICAgICB9CiAgICAgIHJldHVybiAoInN0cmluZyIgPT09IGUgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOwogICAgfSh0LCAic3RyaW5nIik7CiAgICByZXR1cm4gInN5bWJvbCIgPT0gYihlKSA/IGUgOiBTdHJpbmcoZSk7CiAgfQogIHZhciBwID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gdChlKSB7CiAgICAgICFmdW5jdGlvbiAodCwgZSkgewogICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgICAgIH0odGhpcywgdCksIHRoaXMuZGF0YVJHQmEgPSBlLCB0aGlzLnBpeGVsc0NvdW50ID0gZS5sZW5ndGggLyA0LCB0aGlzLmNoYW5uZWxzQ0lFTGFiID0gbmV3IHYodGhpcy5waXhlbHNDb3VudCksIHRoaXMuY2hhbm5lbHNMYWIgPSBuZXcgdih0aGlzLnBpeGVsc0NvdW50KSwgdGhpcy5jaGFubmVsc1kgPSBuZXcgdih0aGlzLnBpeGVsc0NvdW50KTsKICAgIH0KICAgIHZhciBlLCBuLCByOwogICAgcmV0dXJuIGUgPSB0LCAobiA9IFt7CiAgICAgIGtleTogImNvdW50QXZlcmFnZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgICB0aGlzLmNoYW5uZWxzQ0lFTGFiLmNvdW50QXZlcmFnZSgpLCB0aGlzLmNoYW5uZWxzTGFiLmNvdW50QXZlcmFnZSgpLCB0aGlzLmNoYW5uZWxzWS5jb3VudEF2ZXJhZ2UoKTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJjb3VudFN0ZERldiIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgICB0aGlzLmNoYW5uZWxzQ0lFTGFiLmNvdW50U3RkRGV2KCksIHRoaXMuY2hhbm5lbHNMYWIuY291bnRTdGREZXYoKSwgdGhpcy5jaGFubmVsc1kuY291bnRTdGREZXYoKTsKICAgICAgfQogICAgfV0pICYmIHkoZS5wcm90b3R5cGUsIG4pLCByICYmIHkoZSwgciksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAicHJvdG90eXBlIiwgewogICAgICB3cml0YWJsZTogITEKICAgIH0pLCB0OwogIH0oKTsKICBmdW5jdGlvbiBMKHQpIHsKICAgIHJldHVybiBMID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IF90eXBlb2YoU3ltYm9sLml0ZXJhdG9yKSA/IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBfdHlwZW9mKHQpOwogICAgfSA6IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiB0LmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgdCAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZih0KTsKICAgIH0sIEwodCk7CiAgfQogIGZ1bmN0aW9uIGQodCwgZSkgewogICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB7CiAgICAgIHZhciByID0gZVtuXTsKICAgICAgci5lbnVtZXJhYmxlID0gci5lbnVtZXJhYmxlIHx8ICExLCByLmNvbmZpZ3VyYWJsZSA9ICEwLCAidmFsdWUiIGluIHIgJiYgKHIud3JpdGFibGUgPSAhMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBnKHIua2V5KSwgcik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGcodCkgewogICAgdmFyIGUgPSBmdW5jdGlvbiAodCwgZSkgewogICAgICBpZiAoIm9iamVjdCIgIT0gTCh0KSB8fCAhdCkgcmV0dXJuIHQ7CiAgICAgIHZhciBuID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOwogICAgICBpZiAodm9pZCAwICE9PSBuKSB7CiAgICAgICAgdmFyIHIgPSBuLmNhbGwodCwgZSB8fCAiZGVmYXVsdCIpOwogICAgICAgIGlmICgib2JqZWN0IiAhPSBMKHIpKSByZXR1cm4gcjsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOwogICAgICB9CiAgICAgIHJldHVybiAoInN0cmluZyIgPT09IGUgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOwogICAgfSh0LCAic3RyaW5nIik7CiAgICByZXR1cm4gInN5bWJvbCIgPT0gTChlKSA/IGUgOiBTdHJpbmcoZSk7CiAgfQogIHZhciBFID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gdCgpIHsKICAgICAgIWZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIGUpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgfSh0aGlzLCB0KSwgdGhpcy5kZWZhdWx0TFVUMzZfUkdCID0gdGhpcy5nZW5lcmF0ZURlZmF1bHRMVVQzNl9SR0IoKSwgdGhpcy5kZWZhdWx0TFVUMzZfQ0lFTGFiID0gdGhpcy5nZW5lcmF0ZURlZmF1bHRMVVQzNl9DSUVMYWIodGhpcy5kZWZhdWx0TFVUMzZfUkdCKSwgdGhpcy5kZWZhdWx0TFVUMzZfTGFiID0gdGhpcy5nZW5lcmF0ZURlZmF1bHRMVVQzNl9MYWIodGhpcy5kZWZhdWx0TFVUMzZfUkdCKSwgdGhpcy5kZWZhdWx0TFVUMzZfWSA9IHRoaXMuZ2VuZXJhdGVEZWZhdWx0TFVUMzZfWSh0aGlzLmRlZmF1bHRMVVQzNl9SR0IpOwogICAgfQogICAgdmFyIGUsIG4sIHI7CiAgICByZXR1cm4gZSA9IHQsIG4gPSBbewogICAgICBrZXk6ICJwcm9jZXNzIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQsIGUpIHsKICAgICAgICBmb3IgKHZhciBuID0gdGhpcywgciA9IG5ldyBwKHQpLCBhID0gbmV3IHAoZSksIG8gPSAwOyBvIDwgci5kYXRhUkdCYS5sZW5ndGg7IG8gKz0gNCkgewogICAgICAgICAgdmFyIGkgPSB7CiAgICAgICAgICAgICAgUjogci5kYXRhUkdCYVtvICsgMF0sCiAgICAgICAgICAgICAgRzogci5kYXRhUkdCYVtvICsgMV0sCiAgICAgICAgICAgICAgQjogci5kYXRhUkdCYVtvICsgMl0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgdSA9IHsKICAgICAgICAgICAgICBSOiBhLmRhdGFSR0JhW28gKyAwXSwKICAgICAgICAgICAgICBHOiBhLmRhdGFSR0JhW28gKyAxXSwKICAgICAgICAgICAgICBCOiBhLmRhdGFSR0JhW28gKyAyXQogICAgICAgICAgICB9LAogICAgICAgICAgICBzID0gbC5SR0J0b0NJRUxhYihpKSwKICAgICAgICAgICAgYyA9IGwuUkdCdG9DSUVMYWIodSk7CiAgICAgICAgICByLmNoYW5uZWxzQ0lFTGFiLmFkZFBpeGVsKHMpLCBhLmNoYW5uZWxzQ0lFTGFiLmFkZFBpeGVsKGMpOwogICAgICAgICAgdmFyIGYgPSBsLlJHQnRvTGFiKGkpLAogICAgICAgICAgICBoID0gbC5SR0J0b0xhYih1KTsKICAgICAgICAgIHIuY2hhbm5lbHNMYWIuYWRkUGl4ZWwoZiksIGEuY2hhbm5lbHNMYWIuYWRkUGl4ZWwoaCk7CiAgICAgICAgICB2YXIgdiA9IGwuUkdCdG9ZKGkpLAogICAgICAgICAgICBiID0gbC5SR0J0b1kodSk7CiAgICAgICAgICByLmNoYW5uZWxzWS5hZGRQaXhlbCh2KSwgYS5jaGFubmVsc1kuYWRkUGl4ZWwoYik7CiAgICAgICAgfQogICAgICAgIHIuY291bnRBdmVyYWdlKCksIGEuY291bnRBdmVyYWdlKCksIHIuY291bnRTdGREZXYoKSwgYS5jb3VudFN0ZERldigpOwogICAgICAgIGZvciAodmFyIHkgPSBbXSwgbSA9IGZ1bmN0aW9uIG0oKSB7CiAgICAgICAgICAgIHZhciB0ID0gbi5tZXJnZShuLmRlZmF1bHRMVVQzNl9DSUVMYWJbMyAqIEwgKyAwXSwgIkwiLCByLmNoYW5uZWxzQ0lFTGFiLCBhLmNoYW5uZWxzQ0lFTGFiLCAhMCksCiAgICAgICAgICAgICAgZSA9IG4ubWVyZ2Uobi5kZWZhdWx0TFVUMzZfQ0lFTGFiWzMgKiBMICsgMV0sICJhIiwgci5jaGFubmVsc0NJRUxhYiwgYS5jaGFubmVsc0NJRUxhYiwgITApLAogICAgICAgICAgICAgIG8gPSBuLm1lcmdlKG4uZGVmYXVsdExVVDM2X0NJRUxhYlszICogTCArIDJdLCAiYiIsIHIuY2hhbm5lbHNDSUVMYWIsIGEuY2hhbm5lbHNDSUVMYWIsICEwKSwKICAgICAgICAgICAgICBpID0gbC5DSUVMYWJ0b1JHQih7CiAgICAgICAgICAgICAgICBMOiB0LAogICAgICAgICAgICAgICAgYTogZSwKICAgICAgICAgICAgICAgIGI6IG8KICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB1ID0gbi5tZXJnZShuLmRlZmF1bHRMVVQzNl9MYWJbMyAqIEwgKyAwXSwgIkwiLCByLmNoYW5uZWxzTGFiLCBhLmNoYW5uZWxzTGFiKSwKICAgICAgICAgICAgICBzID0gbi5tZXJnZShuLmRlZmF1bHRMVVQzNl9MYWJbMyAqIEwgKyAxXSwgImEiLCByLmNoYW5uZWxzTGFiLCBhLmNoYW5uZWxzTGFiKSwKICAgICAgICAgICAgICBjID0gbi5tZXJnZShuLmRlZmF1bHRMVVQzNl9MYWJbMyAqIEwgKyAyXSwgImIiLCByLmNoYW5uZWxzTGFiLCBhLmNoYW5uZWxzTGFiKSwKICAgICAgICAgICAgICBmID0gbC5MYWJ0b1JHQih7CiAgICAgICAgICAgICAgICBMOiB1LAogICAgICAgICAgICAgICAgYTogcywKICAgICAgICAgICAgICAgIGI6IGMKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBoID0gbi5taXgoaSwgZiwgLjYpLAogICAgICAgICAgICAgIHYgPSBuLm1lcmdlKG4uZGVmYXVsdExVVDM2X1lbTF0sICJZIiwgci5jaGFubmVsc1ksIGEuY2hhbm5lbHNZLCAhMCksCiAgICAgICAgICAgICAgYiA9IGwuUkdCdG9ZKGgpLlksCiAgICAgICAgICAgICAgbSA9IGZ1bmN0aW9uIG0odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKDI1NSwgdCAqIHYgLyBNYXRoLm1heChiLCAxIC8gMjU1KSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwID0gewogICAgICAgICAgICAgICAgUjogbShoLlIpLAogICAgICAgICAgICAgICAgRzogbShoLkcpLAogICAgICAgICAgICAgICAgQjogbShoLkIpCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkID0gewogICAgICAgICAgICAgICAgUjogMjU1ICogbi5kZWZhdWx0TFVUMzZfWVtMXSwKICAgICAgICAgICAgICAgIEc6IDI1NSAqIG4uZGVmYXVsdExVVDM2X1lbTF0sCiAgICAgICAgICAgICAgICBCOiAyNTUgKiBuLmRlZmF1bHRMVVQzNl9ZW0xdCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnID0gbi5taXgocCwgZCwgLjkpOwogICAgICAgICAgICB5LnB1c2goZy5SLCBnLkcsIGcuQiwgMjU1KTsKICAgICAgICAgIH0sIEwgPSAwOyBMIDwgdGhpcy5kZWZhdWx0TFVUMzZfUkdCLmxlbmd0aCAvIDM7IEwrKykgbSgpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBORVdfTFVUMzZfUkdCYV9USU5URUQ6IHkKICAgICAgICB9OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImdlbmVyYXRlRGVmYXVsdExVVDM2X1JHQiIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgICBmb3IgKHZhciB0ID0gMzYsIGUgPSBNYXRoLnBvdygyMTYsIDIpLCBuID0gMjU1IC8gdCwgciA9IG5ldyBVaW50OENsYW1wZWRBcnJheSgzICogZSksIGEgPSAwOyBhIDwgZTsgYSsrKSB7CiAgICAgICAgICB2YXIgbyA9IGkoYSwgNiwgdCk7CiAgICAgICAgICByWzMgKiBhICsgMF0gPSBhICUgdCAqIG4sIHJbMyAqIGEgKyAxXSA9IE1hdGgudHJ1bmMoYSAvIDIxNiAlIHQpICogbiwgclszICogYSArIDJdID0gbyAqICgyNTUgLyAzNik7CiAgICAgICAgfQogICAgICAgIHJldHVybiByOwogICAgICAgIGZ1bmN0aW9uIGkodCwgZSwgbikgewogICAgICAgICAgdmFyIHIgPSBNYXRoLnRydW5jKHQgLyBuKSAlIGU7CiAgICAgICAgICByZXR1cm4gZSAqIE1hdGgudHJ1bmModCAvIChuICogbiAqIGUpKSArIHI7CiAgICAgICAgfQogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImdlbmVyYXRlRGVmYXVsdExVVDM2X0NJRUxhYiIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh0KSB7CiAgICAgICAgZm9yICh2YXIgZSA9IG5ldyBBcnJheSh0Lmxlbmd0aCksIG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgewogICAgICAgICAgdmFyIHIgPSB7CiAgICAgICAgICAgICAgUjogdFszICogbiArIDBdLAogICAgICAgICAgICAgIEc6IHRbMyAqIG4gKyAxXSwKICAgICAgICAgICAgICBCOiB0WzMgKiBuICsgMl0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYSA9IGwuUkdCdG9DSUVMYWIociksCiAgICAgICAgICAgIG8gPSBhLkwsCiAgICAgICAgICAgIGkgPSBhLmEsCiAgICAgICAgICAgIHUgPSBhLmI7CiAgICAgICAgICBlWzMgKiBuICsgMF0gPSBvLCBlWzMgKiBuICsgMV0gPSBpLCBlWzMgKiBuICsgMl0gPSB1OwogICAgICAgIH0KICAgICAgICByZXR1cm4gZTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJnZW5lcmF0ZURlZmF1bHRMVVQzNl9MYWIiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgIGZvciAodmFyIGUgPSBuZXcgQXJyYXkodC5sZW5ndGgpLCBuID0gMDsgbiA8IHQubGVuZ3RoIC8gMzsgbisrKSB7CiAgICAgICAgICB2YXIgciA9IHsKICAgICAgICAgICAgICBSOiB0WzMgKiBuICsgMF0sCiAgICAgICAgICAgICAgRzogdFszICogbiArIDFdLAogICAgICAgICAgICAgIEI6IHRbMyAqIG4gKyAyXQogICAgICAgICAgICB9LAogICAgICAgICAgICBhID0gbC5SR0J0b0xhYihyKSwKICAgICAgICAgICAgbyA9IGEuTCwKICAgICAgICAgICAgaSA9IGEuYSwKICAgICAgICAgICAgdSA9IGEuYjsKICAgICAgICAgIGVbMyAqIG4gKyAwXSA9IG8sIGVbMyAqIG4gKyAxXSA9IGksIGVbMyAqIG4gKyAyXSA9IHU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBlOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImdlbmVyYXRlRGVmYXVsdExVVDM2X1kiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCkgewogICAgICAgIGZvciAodmFyIGUgPSBbXSwgbiA9IDA7IG4gPCB0Lmxlbmd0aCAvIDM7IG4rKykgewogICAgICAgICAgdmFyIHIgPSB7CiAgICAgICAgICAgICAgUjogdFszICogbiArIDBdLAogICAgICAgICAgICAgIEc6IHRbMyAqIG4gKyAxXSwKICAgICAgICAgICAgICBCOiB0WzMgKiBuICsgMl0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYSA9IGwuUkdCdG9ZKHIpLlk7CiAgICAgICAgICBlLnB1c2goYSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBlOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIm1lcmdlIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQsIGUsIG4sIHIpIHsKICAgICAgICB2YXIgYSwKICAgICAgICAgIG8sCiAgICAgICAgICBpLAogICAgICAgICAgdSwKICAgICAgICAgIGwgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1s0XSAmJiBhcmd1bWVudHNbNF0sCiAgICAgICAgICBzID0gbnVsbCAhPT0gKGEgPSBuLmFBdmVyYWdlW2VdKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogMCwKICAgICAgICAgIGMgPSBudWxsICE9PSAobyA9IHIuYUF2ZXJhZ2VbZV0pICYmIHZvaWQgMCAhPT0gbyA/IG8gOiAwLAogICAgICAgICAgZiA9IG51bGwgIT09IChpID0gbi5zdGREZXZbZV0pICYmIHZvaWQgMCAhPT0gaSA/IGkgOiAwLAogICAgICAgICAgaCA9IG51bGwgIT09ICh1ID0gci5zdGREZXZbZV0pICYmIHZvaWQgMCAhPT0gdSA/IHUgOiAwOwogICAgICAgIGlmICghbi5zdGREZXZbZV0gfHwgIXIuc3RkRGV2W2VdKSB7CiAgICAgICAgICB2YXIgdiA9IHQgKyBjIC0gczsKICAgICAgICAgIHJldHVybiBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCB2KSk7CiAgICAgICAgfQogICAgICAgIHZhciBiID0gKHQgLSBzKSAvIGYgKiBoICsgYzsKICAgICAgICByZXR1cm4gbCA/IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIGIpKSA6IGI7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAibWl4IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQsIGUsIG4pIHsKICAgICAgICByZXR1cm4gbiA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG4pKSwgewogICAgICAgICAgUjogcih0LlIsIGUuUiksCiAgICAgICAgICBHOiByKHQuRywgZS5HKSwKICAgICAgICAgIEI6IHIodC5CLCBlLkIpCiAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiByKHQsIGUpIHsKICAgICAgICAgIHJldHVybiB0ICogbiArIGUgKiAoMSAtIG4pOwogICAgICAgIH0KICAgICAgfQogICAgfV0sIG4gJiYgZChlLnByb3RvdHlwZSwgbiksIHIgJiYgZChlLCByKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICJwcm90b3R5cGUiLCB7CiAgICAgIHdyaXRhYmxlOiAhMQogICAgfSksIHQ7CiAgfSgpOwogIHZhciBTID0gU3ltYm9sKCJDb21saW5rLnByb3h5IiksCiAgICBSID0gU3ltYm9sKCJDb21saW5rLmVuZHBvaW50IiksCiAgICB3ID0gU3ltYm9sKCJDb21saW5rLnJlbGVhc2VQcm94eSIpLAogICAgRyA9IFN5bWJvbCgiQ29tbGluay5maW5hbGl6ZXIiKSwKICAgIE0gPSBTeW1ib2woIkNvbWxpbmsudGhyb3duIiksCiAgICBCID0gZnVuY3Rpb24gQih0KSB7CiAgICAgIHJldHVybiAib2JqZWN0IiA9PSBfdHlwZW9mKHQpICYmIG51bGwgIT09IHQgfHwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdDsKICAgIH0sCiAgICBUID0gbmV3IE1hcChbWyJwcm94eSIsIHsKICAgICAgY2FuSGFuZGxlOiBmdW5jdGlvbiBjYW5IYW5kbGUodCkgewogICAgICAgIHJldHVybiBCKHQpICYmIHRbU107CiAgICAgIH0sCiAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24gc2VyaWFsaXplKHQpIHsKICAgICAgICB2YXIgX01lc3NhZ2VDaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCksCiAgICAgICAgICBlID0gX01lc3NhZ2VDaGFubmVsLnBvcnQxLAogICAgICAgICAgbiA9IF9NZXNzYWdlQ2hhbm5lbC5wb3J0MjsKICAgICAgICByZXR1cm4gQyh0LCBlKSwgW24sIFtuXV07CiAgICAgIH0sCiAgICAgIGRlc2VyaWFsaXplOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZSh0KSB7CiAgICAgICAgcmV0dXJuIHQuc3RhcnQoKSwgXyh0LCBbXSwgZSk7CiAgICAgICAgdmFyIGU7CiAgICAgIH0KICAgIH1dLCBbInRocm93IiwgewogICAgICBjYW5IYW5kbGU6IGZ1bmN0aW9uIGNhbkhhbmRsZSh0KSB7CiAgICAgICAgcmV0dXJuIEIodCkgJiYgTSBpbiB0OwogICAgICB9LAogICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uIHNlcmlhbGl6ZShfcmVmKSB7CiAgICAgICAgdmFyIHQgPSBfcmVmLnZhbHVlOwogICAgICAgIHZhciBlOwogICAgICAgIHJldHVybiBlID0gdCBpbnN0YW5jZW9mIEVycm9yID8gewogICAgICAgICAgaXNFcnJvcjogITAsCiAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICBtZXNzYWdlOiB0Lm1lc3NhZ2UsCiAgICAgICAgICAgIG5hbWU6IHQubmFtZSwKICAgICAgICAgICAgc3RhY2s6IHQuc3RhY2sKICAgICAgICAgIH0KICAgICAgICB9IDogewogICAgICAgICAgaXNFcnJvcjogITEsCiAgICAgICAgICB2YWx1ZTogdAogICAgICAgIH0sIFtlLCBbXV07CiAgICAgIH0sCiAgICAgIGRlc2VyaWFsaXplOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZSh0KSB7CiAgICAgICAgaWYgKHQuaXNFcnJvcikgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IodC52YWx1ZS5tZXNzYWdlKSwgdC52YWx1ZSk7CiAgICAgICAgdGhyb3cgdC52YWx1ZTsKICAgICAgfQogICAgfV1dKTsKICBmdW5jdGlvbiBDKHQpIHsKICAgIHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBnbG9iYWxUaGlzOwogICAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IFsiKiJdOwogICAgZS5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgZnVuY3Rpb24gcihhKSB7CiAgICAgIGlmICghYSB8fCAhYS5kYXRhKSByZXR1cm47CiAgICAgIGlmICghZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodCksCiAgICAgICAgICBfc3RlcDsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9uID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIGlmIChlID09PSBfbiB8fCAiKiIgPT09IF9uKSByZXR1cm4gITA7CiAgICAgICAgICAgIGlmIChfbiBpbnN0YW5jZW9mIFJlZ0V4cCAmJiBfbi50ZXN0KGUpKSByZXR1cm4gITA7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gITE7CiAgICAgIH0obiwgYS5vcmlnaW4pKSByZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkludmFsaWQgb3JpZ2luICciLmNvbmNhdChhLm9yaWdpbiwgIicgZm9yIGNvbWxpbmsgcHJveHkiKSk7CiAgICAgIHZhciBfT2JqZWN0JGFzc2lnbiA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgcGF0aDogW10KICAgICAgICB9LCBhLmRhdGEpLAogICAgICAgIG8gPSBfT2JqZWN0JGFzc2lnbi5pZCwKICAgICAgICBpID0gX09iamVjdCRhc3NpZ24udHlwZSwKICAgICAgICB1ID0gX09iamVjdCRhc3NpZ24ucGF0aCwKICAgICAgICBsID0gKGEuZGF0YS5hcmd1bWVudExpc3QgfHwgW10pLm1hcChEKTsKICAgICAgdmFyIHM7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF9lID0gdS5zbGljZSgwLCAtMSkucmVkdWNlKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgIHJldHVybiB0W2VdOwogICAgICAgICAgfSwgdCksCiAgICAgICAgICBfbjIgPSB1LnJlZHVjZShmdW5jdGlvbiAodCwgZSkgewogICAgICAgICAgICByZXR1cm4gdFtlXTsKICAgICAgICAgIH0sIHQpOwogICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgY2FzZSAiR0VUIjoKICAgICAgICAgICAgcyA9IF9uMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJTRVQiOgogICAgICAgICAgICBfZVt1LnNsaWNlKC0xKVswXV0gPSBEKGEuZGF0YS52YWx1ZSksIHMgPSAhMDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJBUFBMWSI6CiAgICAgICAgICAgIHMgPSBfbjIuYXBwbHkoX2UsIGwpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIkNPTlNUUlVDVCI6CiAgICAgICAgICAgIHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHQsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgUywgITApKTsKICAgICAgICAgICAgfShfY29uc3RydWN0KF9uMiwgX3RvQ29uc3VtYWJsZUFycmF5KGwpKSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiRU5EUE9JTlQiOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdmFyIF9NZXNzYWdlQ2hhbm5lbDIgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKSwKICAgICAgICAgICAgICAgIF9lMiA9IF9NZXNzYWdlQ2hhbm5lbDIucG9ydDEsCiAgICAgICAgICAgICAgICBfbjMgPSBfTWVzc2FnZUNoYW5uZWwyLnBvcnQyOwogICAgICAgICAgICAgIEModCwgX24zKSwgcyA9IGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gai5zZXQodCwgZSksIHQ7CiAgICAgICAgICAgICAgfShfZTIsIFtfZTJdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIlJFTEVBU0UiOgogICAgICAgICAgICBzID0gdm9pZCAwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICBzID0gX2RlZmluZVByb3BlcnR5KHsKICAgICAgICAgIHZhbHVlOiB0CiAgICAgICAgfSwgTSwgMCk7CiAgICAgIH0KICAgICAgUHJvbWlzZS5yZXNvbHZlKHMpWyJjYXRjaCJdKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eSh7CiAgICAgICAgICB2YWx1ZTogdAogICAgICAgIH0sIE0sIDApOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgdmFyIF9BID0gQShuKSwKICAgICAgICAgIF9BMiA9IF9zbGljZWRUb0FycmF5KF9BLCAyKSwKICAgICAgICAgIGEgPSBfQTJbMF0sCiAgICAgICAgICB1ID0gX0EyWzFdOwogICAgICAgIGUucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBhKSwgewogICAgICAgICAgaWQ6IG8KICAgICAgICB9KSwgdSksICJSRUxFQVNFIiA9PT0gaSAmJiAoZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgciksIGsoZSksIEcgaW4gdCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiB0W0ddICYmIHRbR10oKSk7CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIF9BMyA9IEEoX2RlZmluZVByb3BlcnR5KHsKICAgICAgICAgICAgdmFsdWU6IG5ldyBUeXBlRXJyb3IoIlVuc2VyaWFsaXphYmxlIHJldHVybiB2YWx1ZSIpCiAgICAgICAgICB9LCBNLCAwKSksCiAgICAgICAgICBfQTQgPSBfc2xpY2VkVG9BcnJheShfQTMsIDIpLAogICAgICAgICAgbiA9IF9BNFswXSwKICAgICAgICAgIHIgPSBfQTRbMV07CiAgICAgICAgZS5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG4pLCB7CiAgICAgICAgICBpZDogbwogICAgICAgIH0pLCByKTsKICAgICAgfSk7CiAgICB9KSwgZS5zdGFydCAmJiBlLnN0YXJ0KCk7CiAgfQogIGZ1bmN0aW9uIGsodCkgewogICAgKGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiAiTWVzc2FnZVBvcnQiID09PSB0LmNvbnN0cnVjdG9yLm5hbWU7CiAgICB9KSh0KSAmJiB0LmNsb3NlKCk7CiAgfQogIGZ1bmN0aW9uIEkodCkgewogICAgaWYgKHQpIHRocm93IG5ldyBFcnJvcigiUHJveHkgaGFzIGJlZW4gcmVsZWFzZWQgYW5kIGlzIG5vdCB1c2VhYmxlIik7CiAgfQogIGZ1bmN0aW9uIFkodCkgewogICAgcmV0dXJuIE8odCwgewogICAgICB0eXBlOiAiUkVMRUFTRSIKICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBrKHQpOwogICAgfSk7CiAgfQogIHZhciB4ID0gbmV3IFdlYWtNYXAoKSwKICAgIFAgPSAiRmluYWxpemF0aW9uUmVnaXN0cnkiIGluIGdsb2JhbFRoaXMgJiYgbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBlID0gKHguZ2V0KHQpIHx8IDApIC0gMTsKICAgICAgeC5zZXQodCwgZSksIDAgPT09IGUgJiYgWSh0KTsKICAgIH0pOwogIGZ1bmN0aW9uIF8odCkgewogICAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwogICAgdmFyIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHt9OwogICAgdmFyIHIgPSAhMTsKICAgIHZhciBhID0gbmV3IFByb3h5KG4sIHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQobiwgbykgewogICAgICAgIGlmIChJKHIpLCBvID09PSB3KSByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgIWZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIFAgJiYgUC51bnJlZ2lzdGVyKHQpOwogICAgICAgICAgfShhKSwgWSh0KSwgciA9ICEwOwogICAgICAgIH07CiAgICAgICAgaWYgKCJ0aGVuIiA9PT0gbykgewogICAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm4gewogICAgICAgICAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKCkgewogICAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgdmFyIF9uNCA9IE8odCwgewogICAgICAgICAgICB0eXBlOiAiR0VUIiwKICAgICAgICAgICAgcGF0aDogZS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gdC50b1N0cmluZygpOwogICAgICAgICAgICB9KQogICAgICAgICAgfSkudGhlbihEKTsKICAgICAgICAgIHJldHVybiBfbjQudGhlbi5iaW5kKF9uNCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfKHQsIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZSksIFtvXSkpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuLCBhLCBvKSB7CiAgICAgICAgSShyKTsKICAgICAgICB2YXIgX0E2ID0gQShvKSwKICAgICAgICAgIF9BNyA9IF9zbGljZWRUb0FycmF5KF9BNiwgMiksCiAgICAgICAgICBpID0gX0E3WzBdLAogICAgICAgICAgdSA9IF9BN1sxXTsKICAgICAgICByZXR1cm4gTyh0LCB7CiAgICAgICAgICB0eXBlOiAiU0VUIiwKICAgICAgICAgIHBhdGg6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZSksIFthXSkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiB0LnRvU3RyaW5nKCk7CiAgICAgICAgICB9KSwKICAgICAgICAgIHZhbHVlOiBpCiAgICAgICAgfSwgdSkudGhlbihEKTsKICAgICAgfSwKICAgICAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KG4sIGEsIG8pIHsKICAgICAgICBJKHIpOwogICAgICAgIHZhciBpID0gZVtlLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChpID09PSBSKSByZXR1cm4gTyh0LCB7CiAgICAgICAgICB0eXBlOiAiRU5EUE9JTlQiCiAgICAgICAgfSkudGhlbihEKTsKICAgICAgICBpZiAoImJpbmQiID09PSBpKSByZXR1cm4gXyh0LCBlLnNsaWNlKDAsIC0xKSk7CiAgICAgICAgdmFyIF9VID0gVShvKSwKICAgICAgICAgIF9VMiA9IF9zbGljZWRUb0FycmF5KF9VLCAyKSwKICAgICAgICAgIHUgPSBfVTJbMF0sCiAgICAgICAgICBsID0gX1UyWzFdOwogICAgICAgIHJldHVybiBPKHQsIHsKICAgICAgICAgIHR5cGU6ICJBUFBMWSIsCiAgICAgICAgICBwYXRoOiBlLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gdC50b1N0cmluZygpOwogICAgICAgICAgfSksCiAgICAgICAgICBhcmd1bWVudExpc3Q6IHUKICAgICAgICB9LCBsKS50aGVuKEQpOwogICAgICB9LAogICAgICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIGNvbnN0cnVjdChuLCBhKSB7CiAgICAgICAgSShyKTsKICAgICAgICB2YXIgX1UzID0gVShhKSwKICAgICAgICAgIF9VNCA9IF9zbGljZWRUb0FycmF5KF9VMywgMiksCiAgICAgICAgICBvID0gX1U0WzBdLAogICAgICAgICAgaSA9IF9VNFsxXTsKICAgICAgICByZXR1cm4gTyh0LCB7CiAgICAgICAgICB0eXBlOiAiQ09OU1RSVUNUIiwKICAgICAgICAgIHBhdGg6IGUubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiB0LnRvU3RyaW5nKCk7CiAgICAgICAgICB9KSwKICAgICAgICAgIGFyZ3VtZW50TGlzdDogbwogICAgICAgIH0sIGkpLnRoZW4oRCk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIHZhciBuID0gKHguZ2V0KGUpIHx8IDApICsgMTsKICAgICAgeC5zZXQoZSwgbiksIFAgJiYgUC5yZWdpc3Rlcih0LCBlLCB0KTsKICAgIH0oYSwgdCksIGE7CiAgfQogIGZ1bmN0aW9uIFUodCkgewogICAgdmFyIGUgPSB0Lm1hcChBKTsKICAgIHJldHVybiBbZS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIHRbMF07CiAgICB9KSwgKG4gPSBlLm1hcChmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdFsxXTsKICAgIH0pLCBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBuKSldOwogICAgdmFyIG47CiAgfQogIHZhciBqID0gbmV3IFdlYWtNYXAoKTsKICBmdW5jdGlvbiBBKHQpIHsKICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoVCksCiAgICAgIF9zdGVwMjsKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIF9zdGVwMiR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwMi52YWx1ZSwgMiksCiAgICAgICAgICBfZTMgPSBfc3RlcDIkdmFsdWVbMF0sCiAgICAgICAgICBfbjUgPSBfc3RlcDIkdmFsdWVbMV07CiAgICAgICAgaWYgKF9uNS5jYW5IYW5kbGUodCkpIHsKICAgICAgICAgIHZhciBfbjUkc2VyaWFsaXplID0gX241LnNlcmlhbGl6ZSh0KSwKICAgICAgICAgICAgX241JHNlcmlhbGl6ZTIgPSBfc2xpY2VkVG9BcnJheShfbjUkc2VyaWFsaXplLCAyKSwKICAgICAgICAgICAgX3IgPSBfbjUkc2VyaWFsaXplMlswXSwKICAgICAgICAgICAgX2EgPSBfbjUkc2VyaWFsaXplMlsxXTsKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICB0eXBlOiAiSEFORExFUiIsCiAgICAgICAgICAgIG5hbWU6IF9lMywKICAgICAgICAgICAgdmFsdWU6IF9yCiAgICAgICAgICB9LCBfYV07CiAgICAgICAgfQogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3IyLmYoKTsKICAgIH0KICAgIHJldHVybiBbewogICAgICB0eXBlOiAiUkFXIiwKICAgICAgdmFsdWU6IHQKICAgIH0sIGouZ2V0KHQpIHx8IFtdXTsKICB9CiAgZnVuY3Rpb24gRCh0KSB7CiAgICBzd2l0Y2ggKHQudHlwZSkgewogICAgICBjYXNlICJIQU5ETEVSIjoKICAgICAgICByZXR1cm4gVC5nZXQodC5uYW1lKS5kZXNlcmlhbGl6ZSh0LnZhbHVlKTsKICAgICAgY2FzZSAiUkFXIjoKICAgICAgICByZXR1cm4gdC52YWx1ZTsKICAgIH0KICB9CiAgZnVuY3Rpb24gTyh0LCBlLCBuKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHIpIHsKICAgICAgdmFyIGEgPSBuZXcgQXJyYXkoNCkuZmlsbCgwKS5tYXAoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpOwogICAgICB9KS5qb2luKCItIik7CiAgICAgIHQuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGZ1bmN0aW9uIGUobikgewogICAgICAgIG4uZGF0YSAmJiBuLmRhdGEuaWQgJiYgbi5kYXRhLmlkID09PSBhICYmICh0LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBlKSwgcihuLmRhdGEpKTsKICAgICAgfSksIHQuc3RhcnQgJiYgdC5zdGFydCgpLCB0LnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oewogICAgICAgIGlkOiBhCiAgICAgIH0sIGUpLCBuKTsKICAgIH0pOwogIH0KICB2YXIgTiA9IG5ldyBFKCk7CiAgQyh7CiAgICBnZXRMVVRUZXh0dXJlOiBmdW5jdGlvbiBnZXRMVVRUZXh0dXJlKHQsIGUpIHsKICAgICAgcmV0dXJuIE4ucHJvY2Vzcyh0LCBlKS5ORVdfTFVUMzZfUkdCYV9USU5URUQ7CiAgICB9CiAgfSk7Cn0pKCk7";},6204:function _(){},1472:function _(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{CU:function CU(){return Nd;},_K:function _K(){return ee;},w3:function w3(){return Re;}});var process=__webpack_require__(6512),Buffer=__webpack_require__(3296).Sn,Fd=Object.create,kn=Object.defineProperty,Cd=Object.getOwnPropertyDescriptor,$d=Object.getOwnPropertyNames,Bd=Object.getPrototypeOf,kd=Object.prototype.hasOwnProperty,Ka=(a=function a(e){if((typeof require==="undefined"?"undefined":_typeof(require))<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported');},(typeof require==="undefined"?"undefined":_typeof(require))<"u"?require:(typeof Proxy==="undefined"?"undefined":_typeof(Proxy))<"u"?new Proxy(a,{get:function get(e,t){return((typeof require==="undefined"?"undefined":_typeof(require))<"u"?require:e)[t];}}):a),a,L=function L(e,t){return function(){return e&&(t=e(e=0)),t;};},ye=function ye(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports;};},kr=function kr(e,t){for(var r in t)kn(e,r,{get:t[r],enumerable:!0});},Ja=function Ja(e,t,r,n){if(t&&"object"==_typeof(t)||"function"==typeof t){var _iterator3=_createForOfIteratorHelper($d(t)),_step3;try{var _loop=function _loop(){var i=_step3.value;!kd.call(e,i)&&i!==r&&kn(e,i,{get:function get(){return t[i];},enumerable:!(n=Cd(t,i))||n.enumerable});};for(_iterator3.s();!(_step3=_iterator3.n()).done;){_loop();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return e;},Nr=function Nr(e,t,r){return r=null!=e?Fd(Bd(e)):{},Ja(!t&&e&&e.__esModule?r:kn(r,"default",{value:e,enumerable:!0}),e);},fr=function fr(e){return Ja(kn({},"__esModule",{value:!0}),e);},Nn,cr,pr,Rn,Mn=L(function(){Nn=new Map(),cr=[],pr=function pr(e,t,r){if(!t||"function"!=typeof t.init||"function"!=typeof t.createInferenceSessionHandler)throw new TypeError("not a valid backend");{var n=Nn.get(e);if(void 0===n)Nn.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error("cannot register backend \"".concat(e,"\" using priority ").concat(r));}if(r>=0){var _t2=cr.indexOf(e);-1!==_t2&&cr.splice(_t2,1);for(var _t3=0;_t3<cr.length;_t3++)if(Nn.get(cr[_t3]).priority<=r)return void cr.splice(_t3,0,e);cr.push(e);}}},Rn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var t,r,_iterator4,_step4,_e4,_t4,n;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:t=0===e.length?cr:e,r=[];_iterator4=_createForOfIteratorHelper(t);_context.prev=2;_iterator4.s();case 4:if((_step4=_iterator4.n()).done){_context.next=29;break;}_e4=_step4.value;_t4=Nn.get(_e4);if(!_t4){_context.next=27;break;}if(!_t4.initialized){_context.next=10;break;}return _context.abrupt("return",_t4.backend);case 10:if(!_t4.aborted){_context.next=12;break;}return _context.abrupt("continue",27);case 12:n=!!_t4.initPromise;_context.prev=13;n||(_t4.initPromise=_t4.backend.init(_e4));_context.next=17;return _t4.initPromise;case 17:_t4.initialized=!0;return _context.abrupt("return",_t4.backend);case 21:_context.prev=21;_context.t0=_context["catch"](13);n||r.push({name:_e4,err:_context.t0}),_t4.aborted=!0;case 24:_context.prev=24;delete _t4.initPromise;return _context.finish(24);case 27:_context.next=4;break;case 29:_context.next=34;break;case 31:_context.prev=31;_context.t1=_context["catch"](2);_iterator4.e(_context.t1);case 34:_context.prev=34;_iterator4.f();return _context.finish(34);case 37:throw new Error("no available backend found. ERR: ".concat(r.map(function(e){return"[".concat(e.name,"] ").concat(e.err);}).join(", ")));case 38:case"end":return _context.stop();}},_callee,null,[[2,31,34,37],[13,21,24,27]]);}));return function Rn(_x2){return _ref.apply(this,arguments);};}();}),Za=L(function(){Mn();}),Qa,es=L(function(){Qa="1.17.0";}),ts,dr,Ko=L(function(){es(),ts="warning",dr={wasm:{},webgl:{},webgpu:{},versions:{common:Qa},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error("Unsupported logging level: ".concat(e));ts=e;}},get logLevel(){return ts;}},Object.defineProperty(dr,"logLevel",{enumerable:!0});}),ee,rs=L(function(){Ko(),ee=dr;}),ns,os,is=L(function(){ns=function ns(e,t){var r=(typeof document==="undefined"?"undefined":_typeof(document))<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];var n=r.getContext("2d");if(null!=n){var i,o;void 0!==(t===null||t===void 0?void 0:t.tensorLayout)&&"NHWC"===t.tensorLayout?(i=e.dims[2],o=e.dims[3]):(i=e.dims[3],o=e.dims[2]);var _a2,s,u=void 0!==(t===null||t===void 0?void 0:t.format)?t.format:"RGB",l=t===null||t===void 0?void 0:t.norm;void 0===l||void 0===l.mean?_a2=[255,255,255,255]:"number"==typeof l.mean?_a2=[l.mean,l.mean,l.mean,l.mean]:(_a2=[l.mean[0],l.mean[1],l.mean[2],0],void 0!==l.mean[3]&&(_a2[3]=l.mean[3])),void 0===l||void 0===l.bias?s=[0,0,0,0]:"number"==typeof l.bias?s=[l.bias,l.bias,l.bias,l.bias]:(s=[l.bias[0],l.bias[1],l.bias[2],0],void 0!==l.bias[3]&&(s[3]=l.bias[3]));var h=o*i,c=0,d=h,f=2*h,p=-1;"RGBA"===u?(c=0,d=h,f=2*h,p=3*h):"RGB"===u?(c=0,d=h,f=2*h):"RBG"===u&&(c=0,f=h,d=2*h);for(var _t5=0;_t5<o;_t5++)for(var _r2=0;_r2<i;_r2++){var _i2=(e.data[c++]-s[0])*_a2[0],_o2=(e.data[d++]-s[1])*_a2[1],_u2=(e.data[f++]-s[2])*_a2[2],_l2=-1===p?255:(e.data[p++]-s[3])*_a2[3];n.fillStyle="rgba("+_i2+","+_o2+","+_u2+","+_l2+")",n.fillRect(_r2,_t5,1,1);}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported");}throw new Error("Can not access image data");},os=function os(e,t){var r,n=(typeof document==="undefined"?"undefined":_typeof(document))<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");if(null==n)throw new Error("Can not access image data");{var i,o,_a3;void 0!==(t===null||t===void 0?void 0:t.tensorLayout)&&"NHWC"===t.tensorLayout?(i=e.dims[2],o=e.dims[1],_a3=e.dims[3]):(i=e.dims[3],o=e.dims[2],_a3=e.dims[1]);var s,u,l=void 0!==t&&void 0!==t.format?t.format:"RGB",h=t===null||t===void 0?void 0:t.norm;void 0===h||void 0===h.mean?s=[255,255,255,255]:"number"==typeof h.mean?s=[h.mean,h.mean,h.mean,h.mean]:(s=[h.mean[0],h.mean[1],h.mean[2],255],void 0!==h.mean[3]&&(s[3]=h.mean[3])),void 0===h||void 0===h.bias?u=[0,0,0,0]:"number"==typeof h.bias?u=[h.bias,h.bias,h.bias,h.bias]:(u=[h.bias[0],h.bias[1],h.bias[2],0],void 0!==h.bias[3]&&(u[3]=h.bias[3]));var c=o*i;if(void 0!==t&&(void 0!==t.format&&4===_a3&&"RGBA"!==t.format||3===_a3&&"RGB"!==t.format&&"BGR"!==t.format))throw new Error("Tensor format doesn't match input tensor dims");var d=4,f=0,p=1,y=2,g=3,m=0,w=c,b=2*c,v=-1;"RGBA"===l?(m=0,w=c,b=2*c,v=3*c):"RGB"===l?(m=0,w=c,b=2*c):"RBG"===l&&(m=0,b=c,w=2*c),r=n.createImageData(i,o);for(var _t6=0;_t6<o*i;f+=d,p+=d,y+=d,g+=d,_t6++)r.data[f]=(e.data[m++]-u[0])*s[0],r.data[p]=(e.data[w++]-u[1])*s[1],r.data[y]=(e.data[b++]-u[2])*s[2],r.data[g]=-1===v?255:(e.data[v++]-u[3])*s[3];}return r;};}),Jo,as,ss,us,ls,fs=L(function(){Gn(),Jo=function Jo(e,t){var _t$norm,_a$mean$,_a$bias$;if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");var r,n,i=t.height,o=t.width,a=(_t$norm=t.norm)!==null&&_t$norm!==void 0?_t$norm:{mean:255,bias:0};r="number"==typeof a.mean?[a.mean,a.mean,a.mean,a.mean]:[a.mean[0],a.mean[1],a.mean[2],(_a$mean$=a.mean[3])!==null&&_a$mean$!==void 0?_a$mean$:255],n="number"==typeof a.bias?[a.bias,a.bias,a.bias,a.bias]:[a.bias[0],a.bias[1],a.bias[2],(_a$bias$=a.bias[3])!==null&&_a$bias$!==void 0?_a$bias$:0];var s=void 0!==t.format?t.format:"RGBA",u=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",l=i*o,h="RGBA"===u?new Float32Array(4*l):new Float32Array(3*l),c=4,d=0,f=1,p=2,y=3,g=0,m=l,w=2*l,b=-1;"RGB"===s&&(c=3,d=0,f=1,p=2,y=-1),"RGBA"===u?b=3*l:"RBG"===u?(g=0,w=l,m=2*l):"BGR"===u&&(w=0,m=l,g=2*l);for(var _t7=0;_t7<l;_t7++,d+=c,p+=c,f+=c,y+=c)h[g++]=(e[d]+n[0])/r[0],h[m++]=(e[f]+n[1])/r[1],h[w++]=(e[p]+n[2])/r[2],-1!==b&&-1!==y&&(h[b++]=(e[y]+n[3])/r[3]);return new Xe("float32",h,"RGBA"===u?[1,4,i,o]:[1,3,i,o]);},as=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e,t){var r,n,i,o,a,s,u,l,_n2,_i3,_n3,_o3,_n4,_i4,_t8,_n5,_n6,_i5,_t9,_o4;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:n=(typeof HTMLImageElement==="undefined"?"undefined":_typeof(HTMLImageElement))<"u"&&e instanceof HTMLImageElement,i=(typeof ImageData==="undefined"?"undefined":_typeof(ImageData))<"u"&&e instanceof ImageData,o=(typeof ImageBitmap==="undefined"?"undefined":_typeof(ImageBitmap))<"u"&&e instanceof ImageBitmap,a="string"==typeof e,s=t!==null&&t!==void 0?t:{},u=function u(){if((typeof document==="undefined"?"undefined":_typeof(document))<"u")return document.createElement("canvas");if((typeof OffscreenCanvas==="undefined"?"undefined":_typeof(OffscreenCanvas))<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported");},l=function l(e){return e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas?e.getContext("2d"):null;};if(!n){_context2.next=18;break;}_n2=u();_n2.width=e.width,_n2.height=e.height;_i3=l(_n2);if(!(null==_i3)){_context2.next=7;break;}throw new Error("Can not access image data");case 7:_n3=e.height,_o3=e.width;if(!(void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(_n3=t.resizedHeight,_o3=t.resizedWidth),void 0!==t)){_context2.next=14;break;}if(!(s=t,void 0!==t.tensorFormat)){_context2.next=11;break;}throw new Error("Image input config format must be RGBA for HTMLImageElement");case 11:s.tensorFormat="RGBA",s.height=_n3,s.width=_o3;_context2.next=15;break;case 14:s.tensorFormat="RGBA",s.height=_n3,s.width=_o3;case 15:_i3.drawImage(e,0,0),r=_i3.getImageData(0,0,_o3,_n3).data;_context2.next=42;break;case 18:if(i){_context2.next=32;break;}if(!o){_context2.next=29;break;}if(!(void 0===t)){_context2.next=22;break;}throw new Error("Please provide image config with format for Imagebitmap");case 22:_n4=u();_n4.width=e.width,_n4.height=e.height;_i4=l(_n4);if(!(null!=_i4)){_context2.next=28;break;}_t8=e.height,_n5=e.width;return _context2.abrupt("return",(_i4.drawImage(e,0,0,_n5,_t8),r=_i4.getImageData(0,0,_n5,_t8).data,s.height=_t8,s.width=_n5,Jo(r,s)));case 28:throw new Error("Can not access image data");case 29:if(!a){_context2.next=31;break;}return _context2.abrupt("return",new Promise(function(t,r){var n=u(),i=l(n);if(!e||!i)return r();var o=new Image();o.crossOrigin="Anonymous",o.src=e,o.onload=function(){n.width=o.width,n.height=o.height,i.drawImage(o,0,0,n.width,n.height);var e=i.getImageData(0,0,n.width,n.height);s.height=n.height,s.width=n.width,t(Jo(e.data,s));};}));case 31:throw new Error("Input data provided is not supported - aborted tensor creation");case 32:if(!(void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(_n6=t.resizedHeight,_i5=t.resizedWidth):(_n6=e.height,_i5=e.width),void 0!==t&&(s=t),s.format="RGBA",s.height=_n6,s.width=_i5,void 0!==t)){_context2.next=41;break;}_t9=u();_t9.width=_i5,_t9.height=_n6;_o4=l(_t9);if(!(null==_o4)){_context2.next=38;break;}throw new Error("Can not access image data");case 38:_o4.putImageData(e,0,0),r=_o4.getImageData(0,0,_i5,_n6).data;_context2.next=42;break;case 41:r=e.data;case 42:if(!(void 0!==r)){_context2.next=44;break;}return _context2.abrupt("return",Jo(r,s));case 44:throw new Error("Input data provided is not supported - aborted tensor creation");case 45:case"end":return _context2.stop();}},_callee2);}));return function as(_x3,_x4){return _ref2.apply(this,arguments);};}(),ss=function ss(e,t){var r=t.width,n=t.height,i=t.download,o=t.dispose;return new Xe({location:"texture",type:"float32",texture:e,dims:[1,n,r,4],download:i,dispose:o});},us=function us(e,t){var r=t.dataType,n=t.dims,i=t.download,o=t.dispose;return new Xe({location:"gpu-buffer",type:r!==null&&r!==void 0?r:"float32",gpuBuffer:e,dims:n,download:i,dispose:o});},ls=function ls(e,t,r){return new Xe({location:"cpu-pinned",type:e,data:t,dims:r!==null&&r!==void 0?r:[t.length]});};}),an,Un,cs,ps,ds=L(function(){an=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Un=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),cs=!1,ps=function ps(){if(!cs){cs=!0;var e=(typeof BigInt64Array==="undefined"?"undefined":_typeof(BigInt64Array))<"u"&&"function"==typeof BigInt64Array.from,t=(typeof BigUint64Array==="undefined"?"undefined":_typeof(BigUint64Array))<"u"&&"function"==typeof BigUint64Array.from;e&&(an.set("int64",BigInt64Array),Un.set(BigInt64Array,"int64")),t&&(an.set("uint64",BigUint64Array),Un.set(BigUint64Array,"uint64"));}};}),hs,ms,bs=L(function(){Gn(),hs=function hs(e){var t=1;for(var r=0;r<e.length;r++){var n=e[r];if("number"!=typeof n||!Number.isSafeInteger(n))throw new TypeError("dims[".concat(r,"] must be an integer, got: ").concat(n));if(n<0)throw new RangeError("dims[".concat(r,"] must be a non-negative integer, got: ").concat(n));t*=n;}return t;},ms=function ms(e,t){switch(e.location){case"cpu":return new Xe(e.type,e.data,t);case"cpu-pinned":return new Xe({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Xe({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Xe({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw new Error("tensorReshape: tensor location ".concat(e.location," is not supported"));}};}),Xe,Gn=L(function(){is(),fs(),ds(),bs(),Xe=/*#__PURE__*/function(){function Xe(e,t,r){_classCallCheck(this,Xe);var n,i;if(ps(),"object"==_typeof(e)&&"location"in e)switch(this.dataLocation=e.location,n=e.type,i=e.dims,e.location){case"cpu-pinned":{var _t10=an.get(n);if(!_t10)throw new TypeError("unsupported type \"".concat(n,"\" to create tensor from pinned buffer"));if(!(e.data instanceof _t10))throw new TypeError("buffer should be of type ".concat(_t10.name));this.cpuData=e.data;break;}case"texture":if("float32"!==n)throw new TypeError("unsupported type \"".concat(n,"\" to create tensor from texture"));this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==n&&"float16"!==n&&"int32"!==n&&"int64"!==n&&"uint32"!==n&&"bool"!==n)throw new TypeError("unsupported type \"".concat(n,"\" to create tensor from gpu buffer"));this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;default:throw new Error("Tensor constructor: unsupported location '".concat(this.dataLocation,"'"));}else{var _o5,_a4;if("string"==typeof e){if(n=e,_a4=r,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");_o5=t;}else{var _r3=an.get(e);if(void 0===_r3)throw new TypeError("Unsupported tensor type: ".concat(e,"."));if(Array.isArray(t)){if("float16"===e)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");_o5="uint64"===e||"int64"===e?_r3.from(t,BigInt):_r3.from(t);}else{if(!(t instanceof _r3))throw new TypeError("A ".concat(n," tensor's data must be type of ").concat(_r3));_o5=t;}}}else if(_a4=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");var _t11=_typeof(e[0]);if("string"===_t11)n="string",_o5=e;else{if("boolean"!==_t11)throw new TypeError("Invalid element type of data array: ".concat(_t11,"."));n="bool",_o5=Uint8Array.from(e);}}else{var _t12=Un.get(e.constructor);if(void 0===_t12)throw new TypeError("Unsupported type for tensor data: ".concat(e.constructor,"."));n=_t12,_o5=e;}if(void 0===_a4)_a4=[_o5.length];else if(!Array.isArray(_a4))throw new TypeError("A tensor's dims must be a number array");i=_a4,this.cpuData=_o5,this.dataLocation="cpu";}var o=hs(i);if(this.cpuData&&o!==this.cpuData.length)throw new Error("Tensor's size(".concat(o,") does not match data length(").concat(this.cpuData.length,")."));this.type=n,this.dims=i,this.size=o;}_createClass(Xe,[{key:"toDataURL",value:function toDataURL(e){return ns(this,e);}},{key:"toImageData",value:function toImageData(e){return os(this,e);}},{key:"data",get:function get(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData;}},{key:"location",get:function get(){return this.dataLocation;}},{key:"texture",get:function get(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData;}},{key:"gpuBuffer",get:function get(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData;}},{key:"getData",value:function(){var _getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){var t;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.t0=(this.ensureValid(),this.dataLocation);_context3.next=_context3.t0==="cpu"?3:_context3.t0==="cpu-pinned"?3:_context3.t0==="texture"?4:_context3.t0==="gpu-buffer"?4:17;break;case 3:return _context3.abrupt("return",this.data);case 4:if(this.downloader){_context3.next=6;break;}throw new Error("The current tensor is not created with a specified data downloader.");case 6:if(!this.isDownloading){_context3.next=8;break;}throw new Error("The current tensor is being downloaded.");case 8:_context3.prev=8;this.isDownloading=!0;_context3.next=12;return this.downloader();case 12:t=_context3.sent;return _context3.abrupt("return",(this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t));case 14:_context3.prev=14;this.isDownloading=!1;return _context3.finish(14);case 17:throw new Error("cannot get data from location: ".concat(this.dataLocation));case 18:case"end":return _context3.stop();}},_callee3,this,[[8,,14,17]]);}));function getData(_x5){return _getData.apply(this,arguments);}return getData;}()},{key:"dispose",value:function dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none";}},{key:"ensureValid",value:function ensureValid(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.");}},{key:"reshape",value:function reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ms(this,e);}}],[{key:"fromImage",value:function(){var _fromImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e,t){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",as(e,t));case 1:case"end":return _context4.stop();}},_callee4);}));function fromImage(_x6,_x7){return _fromImage.apply(this,arguments);}return fromImage;}()},{key:"fromTexture",value:function fromTexture(e,t){return ss(e,t);}},{key:"fromGpuBuffer",value:function fromGpuBuffer(e,t){return us(e,t);}},{key:"fromPinnedBuffer",value:function fromPinnedBuffer(e,t,r){return ls(e,t,r);}}]);return Xe;}();}),Re,zn=L(function(){Gn(),Re=Xe;}),gs,ys,hr,mr,Zo=L(function(){Ko(),gs=function gs(e,t){dr.wasm.trace&&console.timeStamp("".concat(e,"::ORT::").concat(t));},ys=function ys(e,t){var _Error$stack;var r=((_Error$stack=new Error().stack)===null||_Error$stack===void 0?void 0:_Error$stack.split(/\r\n|\r|\n/g))||[],n=!1;for(var i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){var _n7="FUNC_".concat(e,"::").concat(r[i].trim().split(" ")[1]);return t&&(_n7+="::".concat(t)),void gs("CPU",_n7);}r[i].includes("TRACE_FUNC")&&(n=!0);}},hr=function hr(e){dr.wasm.trace&&ys("BEGIN",e);},mr=function mr(e){dr.wasm.trace&&ys("END",e);};}),Wn,Ts=L(function(){Mn(),zn(),Zo(),Wn=/*#__PURE__*/function(){function e(_e5){_classCallCheck(this,e);this.handler=_e5;}_createClass(e,[{key:"run",value:function(){var _run=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(_e6,t,r){var n,i,o,_iterator5,_step5,_e7,_e8,_a5,_iterator6,_step6,_r4,_i6,_iterator7,_step7,_t14,_iterator8,_step8,_e9,a,s,_e15,_t13;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:hr();n={},i={};if(!("object"!=_typeof(_e6)||null===_e6||_e6 instanceof Re||Array.isArray(_e6))){_context5.next=4;break;}throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");case 4:o=!0;if(!("object"==_typeof(t))){_context5.next=57;break;}if(!(null===t)){_context5.next=8;break;}throw new TypeError("Unexpected argument[1]: cannot be null.");case 8:if(!(t instanceof Re)){_context5.next=10;break;}throw new TypeError("'fetches' cannot be a Tensor");case 10:if(!Array.isArray(t)){_context5.next=42;break;}if(!(0===t.length)){_context5.next=13;break;}throw new TypeError("'fetches' cannot be an empty array.");case 13:o=!1;_iterator5=_createForOfIteratorHelper(t);_context5.prev=15;_iterator5.s();case 17:if((_step5=_iterator5.n()).done){_context5.next=26;break;}_e7=_step5.value;if(!("string"!=typeof _e7)){_context5.next=21;break;}throw new TypeError("'fetches' must be a string array or an object.");case 21:if(!(-1===this.outputNames.indexOf(_e7))){_context5.next=23;break;}throw new RangeError("'fetches' contains invalid output name: ".concat(_e7,"."));case 23:n[_e7]=null;case 24:_context5.next=17;break;case 26:_context5.next=31;break;case 28:_context5.prev=28;_context5.t0=_context5["catch"](15);_iterator5.e(_context5.t0);case 31:_context5.prev=31;_iterator5.f();return _context5.finish(31);case 34:if(!("object"==_typeof(r)&&null!==r)){_context5.next=38;break;}i=r;_context5.next=40;break;case 38:if(!(_typeof(r)<"u")){_context5.next=40;break;}throw new TypeError("'options' must be an object.");case 40:_context5.next=55;break;case 42:_e8=!1,_a5=Object.getOwnPropertyNames(t);_iterator6=_createForOfIteratorHelper(this.outputNames);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){_r4=_step6.value;if(-1!==_a5.indexOf(_r4)){_i6=t[_r4];(null===_i6||_i6 instanceof Re)&&(_e8=!0,o=!1,n[_r4]=_i6);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}if(!_e8){_context5.next=54;break;}if(!("object"==_typeof(r)&&null!==r)){_context5.next=50;break;}i=r;_context5.next=52;break;case 50:if(!(_typeof(r)<"u")){_context5.next=52;break;}throw new TypeError("'options' must be an object.");case 52:_context5.next=55;break;case 54:i=t;case 55:_context5.next=59;break;case 57:if(!(_typeof(t)<"u")){_context5.next=59;break;}throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");case 59:_iterator7=_createForOfIteratorHelper(this.inputNames);_context5.prev=60;_iterator7.s();case 62:if((_step7=_iterator7.n()).done){_context5.next=68;break;}_t14=_step7.value;if(!(_typeof(_e6[_t14])>"u")){_context5.next=66;break;}throw new Error("input '".concat(_t14,"' is missing in 'feeds'."));case 66:_context5.next=62;break;case 68:_context5.next=73;break;case 70:_context5.prev=70;_context5.t1=_context5["catch"](60);_iterator7.e(_context5.t1);case 73:_context5.prev=73;_iterator7.f();return _context5.finish(73);case 76:if(o){_iterator8=_createForOfIteratorHelper(this.outputNames);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){_e9=_step8.value;n[_e9]=null;}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}_context5.next=79;return this.handler.run(_e6,n,i);case 79:a=_context5.sent;s={};for(_e15 in a)if(Object.hasOwnProperty.call(a,_e15)){_t13=a[_e15];s[_e15]=_t13 instanceof Re?_t13:new Re(_t13.type,_t13.data,_t13.dims);}return _context5.abrupt("return",(mr(),s));case 83:case"end":return _context5.stop();}},_callee5,this,[[15,28,31,34],[60,70,73,76]]);}));function run(_x8,_x9,_x10){return _run.apply(this,arguments);}return run;}()},{key:"release",value:function(){var _release=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",this.handler.dispose());case 1:case"end":return _context6.stop();}},_callee6,this);}));function release(){return _release.apply(this,arguments);}return release;}()},{key:"configure",value:function(){var _configure=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(_e11){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.handler.configure(_e11);case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop();}},_callee7,this);}));function configure(_x11){return _configure.apply(this,arguments);}return configure;}()},{key:"auth",value:function(){var _auth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(_e12){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.handler.auth(_e12);case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop();}},_callee8,this);}));function auth(_x12){return _auth.apply(this,arguments);}return auth;}()},{key:"startProfiling",value:function startProfiling(){this.handler.startProfiling();}},{key:"endProfiling",value:function endProfiling(){this.handler.endProfiling();}},{key:"inputNames",get:function get(){return this.handler.inputNames;}},{key:"outputNames",get:function get(){return this.handler.outputNames;}}],[{key:"create",value:function(){var _create=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(t,r,n,i){var o,a,_e13,_s2,_u3,s,u;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:hr();a={};if(!("string"==typeof t)){_context9.next=11;break;}if(!(o=t,"object"==_typeof(r)&&null!==r)){_context9.next=7;break;}a=r;_context9.next=9;break;case 7:if(!(_typeof(r)<"u")){_context9.next=9;break;}throw new TypeError("'options' must be an object.");case 9:_context9.next=52;break;case 11:if(!(t instanceof Uint8Array)){_context9.next=20;break;}if(!(o=t,"object"==_typeof(r)&&null!==r)){_context9.next=16;break;}a=r;_context9.next=18;break;case 16:if(!(_typeof(r)<"u")){_context9.next=18;break;}throw new TypeError("'options' must be an object.");case 18:_context9.next=52;break;case 20:if(t instanceof ArrayBuffer||(typeof SharedArrayBuffer==="undefined"?"undefined":_typeof(SharedArrayBuffer))<"u"&&t instanceof SharedArrayBuffer){_context9.next=22;break;}throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");case 22:_e13=t,_s2=0,_u3=t.byteLength;if(!("object"==_typeof(r)&&null!==r)){_context9.next=27;break;}a=r;_context9.next=51;break;case 27:if(!("number"==typeof r)){_context9.next=49;break;}if(!(_s2=r,!Number.isSafeInteger(_s2))){_context9.next=30;break;}throw new RangeError("'byteOffset' must be an integer.");case 30:if(!(_s2<0||_s2>=_e13.byteLength)){_context9.next=32;break;}throw new RangeError("'byteOffset' is out of range [0, ".concat(_e13.byteLength,")."));case 32:if(!(_u3=t.byteLength-_s2,"number"==typeof n)){_context9.next=45;break;}if(!(_u3=n,!Number.isSafeInteger(_u3))){_context9.next=35;break;}throw new RangeError("'byteLength' must be an integer.");case 35:if(!(_u3<=0||_s2+_u3>_e13.byteLength)){_context9.next=37;break;}throw new RangeError("'byteLength' is out of range (0, ".concat(_e13.byteLength-_s2,"]."));case 37:if(!("object"==_typeof(i)&&null!==i)){_context9.next=41;break;}a=i;_context9.next=43;break;case 41:if(!(_typeof(i)<"u")){_context9.next=43;break;}throw new TypeError("'options' must be an object.");case 43:_context9.next=47;break;case 45:if(!(_typeof(n)<"u")){_context9.next=47;break;}throw new TypeError("'byteLength' must be a number.");case 47:_context9.next=51;break;case 49:if(!(_typeof(r)<"u")){_context9.next=51;break;}throw new TypeError("'options' must be an object.");case 51:o=new Uint8Array(_e13,_s2,_u3);case 52:s=(a.executionProviders||[]).map(function(_e14){return"string"==typeof _e14?_e14:_e14.name;});_context9.next=55;return Rn(s);case 55:_context9.next=57;return _context9.sent.createInferenceSessionHandler(o,a);case 57:u=_context9.sent;return _context9.abrupt("return",(mr(),new e(u)));case 59:case"end":return _context9.stop();}},_callee9);}));function create(_x13,_x14,_x15,_x16){return _create.apply(this,arguments);}return create;}()}]);return e;}();}),Nd,xs=L(function(){Ts(),Nd=Wn;}),ws=L(function(){}),Rd,Vn,vs=L(function(){Mn(),zn(),Rd="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Vn=/*#__PURE__*/function(){function e(_e16,t,r){_classCallCheck(this,e);this.handler=_e16,this.hasOptimizerModel=t,this.hasEvalModel=r;}_createClass(e,[{key:"trainingInputNames",get:function get(){return this.handler.inputNames;}},{key:"trainingOutputNames",get:function get(){return this.handler.outputNames;}},{key:"evalInputNames",get:function get(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.");}},{key:"evalOutputNames",get:function get(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.");}},{key:"typeNarrowingForRunStep",value:function typeNarrowingForRunStep(_e18,t,r,n,i){var o={},a={};if("object"!=_typeof(r)||null===r||r instanceof Re||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");var s=!0;if("object"==_typeof(n)){if(null===n)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Re)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(0===n.length)throw new TypeError("'fetches' cannot be an empty array.");s=!1;var _iterator9=_createForOfIteratorHelper(n),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _e19=_step9.value;if("string"!=typeof _e19)throw new TypeError("'fetches' must be a string array or an object.");if(-1===t.indexOf(_e19))throw new RangeError("'fetches' contains invalid output name: ".concat(_e19,"."));o[_e19]=null;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}if("object"==_typeof(i)&&null!==i)a=i;else if(_typeof(i)<"u")throw new TypeError("'options' must be an object.");}else{var _e20=!1,_r5=Object.getOwnPropertyNames(n);var _iterator10=_createForOfIteratorHelper(t),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _i7=_step10.value;if(-1!==_r5.indexOf(_i7)){var _t15=n[_i7];(null===_t15||_t15 instanceof Re)&&(_e20=!0,s=!1,o[_i7]=_t15);}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}if(_e20){if("object"==_typeof(i)&&null!==i)a=i;else if(_typeof(i)<"u")throw new TypeError("'options' must be an object.");}else a=n;}}else if(_typeof(n)<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");var _iterator11=_createForOfIteratorHelper(_e18),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _t16=_step11.value;if(_typeof(r[_t16])>"u")throw new Error("input '".concat(_t16,"' is missing in 'feeds'."));}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}if(s){var _iterator12=_createForOfIteratorHelper(t),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _e21=_step12.value;o[_e21]=null;}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}return[o,a];}},{key:"convertHandlerReturnTypeToMapOfTensors",value:function convertHandlerReturnTypeToMapOfTensors(_e22){var t={};for(var r in _e22)if(Object.hasOwnProperty.call(_e22,r)){var n=_e22[r];t[r]=n instanceof Re?n:new Re(n.type,n.data,n.dims);}return t;}},{key:"lazyResetGrad",value:function(){var _lazyResetGrad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(){return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.handler.lazyResetGrad();case 2:case"end":return _context10.stop();}},_callee10,this);}));function lazyResetGrad(){return _lazyResetGrad.apply(this,arguments);}return lazyResetGrad;}()},{key:"runTrainStep",value:function(){var _runTrainStep=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(_e23,t,r){var _this$typeNarrowingFo,_this$typeNarrowingFo2,n,i,o;return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:_this$typeNarrowingFo=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,_e23,t,r);_this$typeNarrowingFo2=_slicedToArray(_this$typeNarrowingFo,2);n=_this$typeNarrowingFo2[0];i=_this$typeNarrowingFo2[1];_context11.next=6;return this.handler.runTrainStep(_e23,n,i);case 6:o=_context11.sent;return _context11.abrupt("return",this.convertHandlerReturnTypeToMapOfTensors(o));case 8:case"end":return _context11.stop();}},_callee11,this);}));function runTrainStep(_x17,_x18,_x19){return _runTrainStep.apply(this,arguments);}return runTrainStep;}()},{key:"runOptimizerStep",value:function(){var _runOptimizerStep=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(_e24){return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:if(this.hasOptimizerModel){_context12.next=2;break;}throw new Error("This TrainingSession has no OptimizerModel loaded.");case 2:_context12.next=4;return this.handler.runOptimizerStep(_e24||{});case 4:case"end":return _context12.stop();}},_callee12,this);}));function runOptimizerStep(_x20){return _runOptimizerStep.apply(this,arguments);}return runOptimizerStep;}()},{key:"runEvalStep",value:function(){var _runEvalStep=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(_e25,t,r){var _this$typeNarrowingFo3,_this$typeNarrowingFo4,n,i,o;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:if(!this.hasEvalModel){_context13.next=9;break;}_this$typeNarrowingFo3=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,_e25,t,r);_this$typeNarrowingFo4=_slicedToArray(_this$typeNarrowingFo3,2);n=_this$typeNarrowingFo4[0];i=_this$typeNarrowingFo4[1];_context13.next=7;return this.handler.runEvalStep(_e25,n,i);case 7:o=_context13.sent;return _context13.abrupt("return",this.convertHandlerReturnTypeToMapOfTensors(o));case 9:throw new Error("This TrainingSession has no EvalModel loaded.");case 10:case"end":return _context13.stop();}},_callee13,this);}));function runEvalStep(_x21,_x22,_x23){return _runEvalStep.apply(this,arguments);}return runEvalStep;}()},{key:"getParametersSize",value:function(){var _getParametersSize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(){var _e26,_args14=arguments;return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:_e26=_args14.length>0&&_args14[0]!==undefined?_args14[0]:!0;return _context14.abrupt("return",this.handler.getParametersSize(_e26));case 2:case"end":return _context14.stop();}},_callee14,this);}));function getParametersSize(){return _getParametersSize.apply(this,arguments);}return getParametersSize;}()},{key:"loadParametersBuffer",value:function(){var _loadParametersBuffer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(_e27){var t,r,_args15=arguments;return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1)switch(_context15.prev=_context15.next){case 0:t=_args15.length>1&&_args15[1]!==undefined?_args15[1]:!0;_context15.next=3;return this.getParametersSize(t);case 3:r=_context15.sent;if(!(_e27.length!==4*r)){_context15.next=6;break;}throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");case 6:return _context15.abrupt("return",this.handler.loadParametersBuffer(_e27,t));case 7:case"end":return _context15.stop();}},_callee15,this);}));function loadParametersBuffer(_x24){return _loadParametersBuffer.apply(this,arguments);}return loadParametersBuffer;}()},{key:"getContiguousParameters",value:function(){var _getContiguousParameters=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(){var _e28,_args16=arguments;return _regeneratorRuntime().wrap(function _callee16$(_context16){while(1)switch(_context16.prev=_context16.next){case 0:_e28=_args16.length>0&&_args16[0]!==undefined?_args16[0]:!0;return _context16.abrupt("return",this.handler.getContiguousParameters(_e28));case 2:case"end":return _context16.stop();}},_callee16,this);}));function getContiguousParameters(){return _getContiguousParameters.apply(this,arguments);}return getContiguousParameters;}()},{key:"release",value:function(){var _release2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(){return _regeneratorRuntime().wrap(function _callee17$(_context17){while(1)switch(_context17.prev=_context17.next){case 0:return _context17.abrupt("return",this.handler.dispose());case 1:case"end":return _context17.stop();}},_callee17,this);}));function release(){return _release2.apply(this,arguments);}return release;}()}],[{key:"create",value:function(){var _create2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(t,r){var n,i,o,a,s,_r6;return _regeneratorRuntime().wrap(function _callee18$(_context18){while(1)switch(_context18.prev=_context18.next){case 0:n=t.evalModel||"";i=t.optimizerModel||"";o=r||{};a=(o.executionProviders||[]).map(function(_e17){return"string"==typeof _e17?_e17:_e17.name;});_context18.next=6;return Rn(a);case 6:s=_context18.sent;if(!s.createTrainingSessionHandler){_context18.next=12;break;}_context18.next=10;return s.createTrainingSessionHandler(t.checkpointState,t.trainModel,n,i,o);case 10:_r6=_context18.sent;return _context18.abrupt("return",new e(_r6,!!t.optimizerModel,!!t.evalModel));case 12:throw new Error(Rd);case 13:case"end":return _context18.stop();}},_callee18);}));function create(_x25,_x26){return _create2.apply(this,arguments);}return create;}()}]);return e;}();}),Md,_s=L(function(){vs(),Md=Vn;}),Qo={};kr(Qo,{InferenceSession:function InferenceSession(){return Nd;},TRACE:function TRACE(){return gs;},TRACE_FUNC_BEGIN:function TRACE_FUNC_BEGIN(){return hr;},TRACE_FUNC_END:function TRACE_FUNC_END(){return mr;},Tensor:function Tensor(){return Re;},TrainingSession:function TrainingSession(){return Md;},env:function env(){return ee;},registerBackend:function registerBackend(){return pr;}});var It=L(function(){Za(),rs(),xs(),zn(),Zo(),ws(),_s();});function Zt(e,t,r,n){if(void 0===t)return Ud(e);if(void 0===r)Hn(e,t,1);else if("number"==typeof r&&void 0===n)Hn(e,t,r);else if("string"==typeof r&&void 0===n)Hn(e,r,1,t);else{if("string"!=typeof r||"number"!=typeof n)throw new TypeError("input is valid");Hn(e,r,n,t);}}function Ud(e){return{verbose:Zt.verbose.bind(null,e),info:Zt.info.bind(null,e),warning:Zt.warning.bind(null,e),error:Zt.error.bind(null,e),fatal:Zt.fatal.bind(null,e)};}function Hn(e,t,r,n){var i=sn[n||""]||sn[""];Is[e]<Is[i.minimalSeverity]||(i.logDateTime&&(t="".concat(new Date().toISOString(),"|").concat(t)),i.logSourceLocation,Gd[i.provider].log(e,t,n));}var ei,ti,Is,Gd,Ss,sn,pe,qn,Yn,Xn,jn,dt=L(function(){ei=/*#__PURE__*/function(){function ei(){_classCallCheck(this,ei);}_createClass(ei,[{key:"log",value:function log(e,t,r){}}]);return ei;}(),ti=/*#__PURE__*/function(){function ti(){_classCallCheck(this,ti);}_createClass(ti,[{key:"log",value:function log(e,t,r){console.log("".concat(this.color(e)," ").concat(r?"[35m"+r+"[0m ":"").concat(t));}},{key:"color",value:function color(e){switch(e){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error("unsupported severity: ".concat(e));}}}]);return ti;}(),Is={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Gd={none:new ei(),console:new ti()},sn={"":Ss={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1}},function(e){function t(e){sn={},r("",e||{});}function r(e,r){if("*"===e)t(r);else{var _t17=sn[e]||Ss;sn[e]={provider:r.provider||_t17.provider,minimalSeverity:r.minimalSeverity||_t17.minimalSeverity,logDateTime:void 0===r.logDateTime?_t17.logDateTime:r.logDateTime,logSourceLocation:void 0===r.logSourceLocation?_t17.logSourceLocation:r.logSourceLocation};}}e.verbose=function(t,r){e("verbose",t,r);},e.info=function(t,r){e("info",t,r);},e.warning=function(t,r){e("warning",t,r);},e.error=function(t,r){e("error",t,r);},e.fatal=function(t,r){e("fatal",t,r);},e.reset=t,e.set=r,e.setWithEnv=function(e){var t={};e.logLevel&&(t.minimalSeverity=e.logLevel),r("",t);};}(Zt||(Zt={})),pe=Zt,qn=/*#__PURE__*/function(){function qn(e,t,r,n,i,o){_classCallCheck(this,qn);this.category=e,this.name=t,this.startTime=r,this.endCallback=n,this.timer=i,this.ctx=o;}_createClass(qn,[{key:"end",value:function(){var _end=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(){return _regeneratorRuntime().wrap(function _callee19$(_context19){while(1)switch(_context19.prev=_context19.next){case 0:return _context19.abrupt("return",this.endCallback(this));case 1:case"end":return _context19.stop();}},_callee19,this);}));function end(){return _end.apply(this,arguments);}return end;}()},{key:"checkTimer",value:function(){var _checkTimer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(){return _regeneratorRuntime().wrap(function _callee20$(_context20){while(1)switch(_context20.prev=_context20.next){case 0:if(!(void 0===this.ctx||void 0===this.timer)){_context20.next=2;break;}throw new Error("No webgl timer found");case 2:return _context20.abrupt("return",(this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)));case 3:case"end":return _context20.stop();}},_callee20,this);}));function checkTimer(){return _checkTimer.apply(this,arguments);}return checkTimer;}()}]);return qn;}(),Yn=/*#__PURE__*/_createClass(function Yn(e,t,r,n){_classCallCheck(this,Yn);this.category=e,this.name=t,this.startTime=r,this.endTime=n;}),Xn=/*#__PURE__*/function(){function Xn(e,t,r){_classCallCheck(this,Xn);this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===e?1e4:e,this._flushBatchSize=void 0===t?10:t,this._flushIntervalInMilliseconds=void 0===r?5e3:r;}_createClass(Xn,[{key:"start",value:function start(){this._started=!0,this._timingEvents=[],this._flushTime=jn(),this._flushPointer=0;}},{key:"stop",value:function stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);}},{key:"event",value:function event(e,t,r,n){var i=this._started?this.begin(e,t,n):void 0,o=!1,a=r();if(a&&"function"==typeof a.then)return o=!0,new Promise(function(e,t){a.then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21(t){return _regeneratorRuntime().wrap(function _callee21$(_context21){while(1)switch(_context21.prev=_context21.next){case 0:_context21.t0=i;if(!_context21.t0){_context21.next=4;break;}_context21.next=4;return i.end();case 4:e(t);case 5:case"end":return _context21.stop();}},_callee21);}));return function(_x27){return _ref3.apply(this,arguments);};}(),/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(e){return _regeneratorRuntime().wrap(function _callee22$(_context22){while(1)switch(_context22.prev=_context22.next){case 0:_context22.t0=i;if(!_context22.t0){_context22.next=4;break;}_context22.next=4;return i.end();case 4:t(e);case 5:case"end":return _context22.stop();}},_callee22);}));return function(_x28){return _ref4.apply(this,arguments);};}());});if(!o&&i){var _e29=i.end();if(_e29&&"function"==typeof _e29.then)return new Promise(function(t,r){_e29.then(function(){t(a);},function(e){r(e);});});}return a;}},{key:"begin",value:function begin(e,t,r){var _this=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){var _r7=jn();return this.flush(_r7),new qn(e,t,_r7,function(e){return _this.endSync(e);});}{var n=r.beginTimer();return new qn(e,t,0,/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(e){return _regeneratorRuntime().wrap(function _callee23$(_context23){while(1)switch(_context23.prev=_context23.next){case 0:return _context23.abrupt("return",_this.end(e));case 1:case"end":return _context23.stop();}},_callee23);}));return function(_x29){return _ref5.apply(this,arguments);};}(),n,r);}}},{key:"end",value:function(){var _end2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(e){var t;return _regeneratorRuntime().wrap(function _callee24$(_context24){while(1)switch(_context24.prev=_context24.next){case 0:_context24.next=2;return e.checkTimer();case 2:t=_context24.sent;this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Yn(e.category,e.name,e.startTime,t)),this.flush(t));case 4:case"end":return _context24.stop();}},_callee24,this);}));function end(_x30){return _end2.apply(this,arguments);}return end;}()},{key:"endSync",value:function endSync(e){var t=jn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Yn(e.category,e.name,e.startTime,t)),this.flush(t));}},{key:"logOneEvent",value:function logOneEvent(e){pe.verbose("Profiler.".concat(e.category),"".concat((e.endTime-e.startTime).toFixed(2),"ms on event '").concat(e.name,"' at ").concat(e.endTime.toFixed(2)));}},{key:"flush",value:function flush(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(var _e30=this._flushPointer;this._flushPointer<_e30+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=jn();}}},{key:"started",get:function get(){return this._started;}}],[{key:"create",value:function create(e){return void 0===e?new this():new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds);}}]);return Xn;}(),jn=(typeof performance==="undefined"?"undefined":_typeof(performance))<"u"&&performance.now?function(){return performance.now();}:Date.now;});function As(e,t,r){var _iterator13=_createForOfIteratorHelper(r),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var n=_step13.value;var _r8=n[0],i=n[1],o=n[2],_a6=n[3],s=n[4];if(e.opType===_r8){var _iterator14=_createForOfIteratorHelper(t),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _e31=_step14.value;if((_e31.domain===i||"ai.onnx"===_e31.domain&&""===i)&&zd(_e31.version,o))return{opImpl:_a6,opInit:s};}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}throw new TypeError("cannot resolve operator '".concat(e.opType,"' with opsets: ").concat(t.map(function(e){return"".concat(e.domain||"ai.onnx"," v").concat(e.version);}).join(", ")));}function zd(e,t){if(t.endsWith("+")){var r=Number.parseInt(t.substring(0,t.length-1),10);return!isNaN(r)&&r<=e;}if(2===t.split("-").length){var _r9=t.split("-"),n=Number.parseInt(_r9[0],10),i=Number.parseInt(_r9[1],10);return!isNaN(n)&&!isNaN(i)&&n<=e&&e<=i;}return Number.parseInt(t,10)===e;}var Es=L(function(){}),Ps=ye(function(e){e.__esModule=!0;var t=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t);}return e.isGuid=function(t){var r=t.toString();return t&&(t instanceof e||e.validator.test(r));},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"));},e.createEmpty=function(){return new e("emptyguid");},e.parse=function(t){return new e(t);},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-");},e.gen=function(e){for(var t="",r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t;},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString();},e.prototype.isEmpty=function(){return this.value===e.EMPTY;},e.prototype.toString=function(){return this.value;},e.prototype.toJSON=function(){return{value:this.value};},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e;}();e.Guid=t;});function Te(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r;}function He(e){return!0===(e&&e.__isLong__);}function Ds(e){var t=Math.clz32(e&-e);return e?31-t:t;}function br(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=Fs[e])?n:(r=le(e,0,!0),i&&(Fs[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=Ls[e])?n:(r=le(e,e<0?-1:0,!1),i&&(Ls[e]=r),r);}function mt(e,t){if(isNaN(e))return t?Ht:St;if(t){if(e<0)return Ht;if(e>=ks)return Ms;}else{if(e<=-$s)return rt;if(e+1>=$s)return Rs;}return e<0?mt(-e,t).neg():le(e%Mr|0,e/Mr|0,t);}function le(e,t,r){return new Te(e,t,r);}function oi(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?Ht:St;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return oi(e.substring(1),t,r).neg();for(var i=mt(Kn(r,8)),o=St,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+s),r);if(s<8){var l=mt(Kn(r,s));o=o.mul(l).add(mt(u));}else o=(o=o.mul(i)).add(mt(u));}return o.unsigned=t,o;}function At(e,t){return"number"==typeof e?mt(e,t):"string"==typeof e?oi(e,t):le(e.low,e.high,"boolean"==typeof t?t:e.unsigned);}var ht,Ls,Fs,Kn,Cs,Vd,Mr,ks,$s,Bs,St,Ht,Rr,Ns,ni,Rs,Ms,rt,k,jt,ii=L(function(){ht=null;try{ht=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports;}catch(_unused){}Te.prototype.__isLong__,Object.defineProperty(Te.prototype,"__isLong__",{value:!0}),Te.isLong=He,Ls={},Fs={},Te.fromInt=br,Te.fromNumber=mt,Te.fromBits=le,Kn=Math.pow,Te.fromString=oi,Te.fromValue=At,$s=(ks=(Mr=(Cs=65536)*Cs)*Mr)/2,Bs=br(Vd=1<<24),St=br(0),Te.ZERO=St,Ht=br(0,!0),Te.UZERO=Ht,Rr=br(1),Te.ONE=Rr,Ns=br(1,!0),Te.UONE=Ns,ni=br(-1),Te.NEG_ONE=ni,Rs=le(-1,2147483647,!1),Te.MAX_VALUE=Rs,Ms=le(-1,-1,!0),Te.MAX_UNSIGNED_VALUE=Ms,rt=le(0,-2147483648,!1),Te.MIN_VALUE=rt,(k=Te.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low;},k.toNumber=function(){return this.unsigned?(this.high>>>0)*Mr+(this.low>>>0):this.high*Mr+(this.low>>>0);},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(rt)){var t=mt(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e);}return"-"+this.neg().toString(e);}for(var i=mt(Kn(e,6),this.unsigned),o=this,a="";;){var s=o.div(i),u=(o.sub(s.mul(i)).toInt()>>>0).toString(e);if((o=s).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a;}},k.getHighBits=function(){return this.high;},k.getHighBitsUnsigned=function(){return this.high>>>0;},k.getLowBits=function(){return this.low;},k.getLowBitsUnsigned=function(){return this.low>>>0;},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(rt)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1;},k.isZero=function(){return 0===this.high&&0===this.low;},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0;},k.isPositive=function(){return this.unsigned||this.high>=0;},k.isOdd=function(){return 1==(1&this.low);},k.isEven=function(){return 0==(1&this.low);},k.equals=function(e){return He(e)||(e=At(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low;},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e);},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0;},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0;},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0;},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0;},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(He(e)||(e=At(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1;},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(rt)?rt:this.not().add(Rr);},k.neg=k.negate,k.add=function(e){He(e)||(e=At(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,u=0,l=0,h=0,c=0;return h+=(c+=i+(65535&e.low))>>>16,l+=(h+=n+s)>>>16,u+=(l+=r+a)>>>16,u+=t+o,le((h&=65535)<<16|(c&=65535),(u&=65535)<<16|(l&=65535),this.unsigned);},k.subtract=function(e){return He(e)||(e=At(e)),this.add(e.neg());},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return this;if(He(e)||(e=At(e)),ht)return le(ht.mul(this.low,this.high,e.low,e.high),ht.get_high(),this.unsigned);if(e.isZero())return this.unsigned?Ht:St;if(this.eq(rt))return e.isOdd()?rt:St;if(e.eq(rt))return this.isOdd()?rt:St;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Bs)&&e.lt(Bs))return mt(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,u=65535&e.low,l=0,h=0,c=0,d=0;return c+=(d+=i*u)>>>16,h+=(c+=n*u)>>>16,c&=65535,h+=(c+=i*s)>>>16,l+=(h+=r*u)>>>16,h&=65535,l+=(h+=n*s)>>>16,h&=65535,l+=(h+=i*a)>>>16,l+=t*u+r*s+n*a+i*o,le((c&=65535)<<16|(d&=65535),(l&=65535)<<16|(h&=65535),this.unsigned);},k.mul=k.multiply,k.divide=function(e){if(He(e)||(e=At(e)),e.isZero())throw Error("division by zero");var t,r,n;if(ht)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?le((this.unsigned?ht.div_u:ht.div_s)(this.low,this.high,e.low,e.high),ht.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Ht:St;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ht;if(e.gt(this.shru(1)))return Ns;n=Ht;}else{if(this.eq(rt))return e.eq(Rr)||e.eq(ni)?rt:e.eq(rt)?Rr:(t=this.shr(1).div(e).shl(1)).eq(St)?e.isNegative()?Rr:ni:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(rt))return this.unsigned?Ht:St;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=St;}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:Kn(2,i-48),a=mt(t),s=a.mul(e);s.isNegative()||s.gt(r);)s=(a=mt(t-=o,this.unsigned)).mul(e);a.isZero()&&(a=Rr),n=n.add(a),r=r.sub(s);}return n;},k.div=k.divide,k.modulo=function(e){return He(e)||(e=At(e)),ht?le((this.unsigned?ht.rem_u:ht.rem_s)(this.low,this.high,e.low,e.high),ht.get_high(),this.unsigned):this.sub(this.div(e).mul(e));},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return le(~this.low,~this.high,this.unsigned);},k.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32;},k.clz=k.countLeadingZeros,k.countTrailingZeros=function(){return this.low?Ds(this.low):Ds(this.high)+32;},k.ctz=k.countTrailingZeros,k.and=function(e){return He(e)||(e=At(e)),le(this.low&e.low,this.high&e.high,this.unsigned);},k.or=function(e){return He(e)||(e=At(e)),le(this.low|e.low,this.high|e.high,this.unsigned);},k.xor=function(e){return He(e)||(e=At(e)),le(this.low^e.low,this.high^e.high,this.unsigned);},k.shiftLeft=function(e){return He(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le(0,this.low<<e-32,this.unsigned);},k.shl=k.shiftLeft,k.shiftRight=function(e){return He(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le(this.high>>e-32,this.high>=0?0:-1,this.unsigned);},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){return He(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):le(32===e?this.high:this.high>>>e-32,0,this.unsigned);},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.rotateLeft=function(e){var t;return He(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),le(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned));},k.rotl=k.rotateLeft,k.rotateRight=function(e){var t;return He(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?le(this.high,this.low,this.unsigned):e<32?(t=32-e,le(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),le(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned));},k.rotr=k.rotateRight,k.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this;},k.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0);},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE();},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24];},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t];},Te.fromBytes=function(e,t,r){return r?Te.fromBytesLE(e,t):Te.fromBytesBE(e,t);},Te.fromBytesLE=function(e,t){return new Te(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t);},Te.fromBytesBE=function(e,t){return new Te(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t);},jt=Te;}),O,Jn=L(function(){O={},O.Table,O.SIZEOF_SHORT=2,O.SIZEOF_INT=4,O.FILE_IDENTIFIER_LENGTH=4,O.SIZE_PREFIX_LENGTH=4,O.Encoding={UTF8_BYTES:1,UTF16_STRING:2},O.int32=new Int32Array(2),O.float32=new Float32Array(O.int32.buffer),O.float64=new Float64Array(O.int32.buffer),O.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],O.Long=function(e,t){this.low=0|e,this.high=0|t;},O.Long.create=function(e,t){return 0==e&&0==t?O.Long.ZERO:new O.Long(e,t);},O.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high;},O.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high;},O.Long.ZERO=new O.Long(0,0),O.Builder=function(e){if(e)var t=e;else t=1024;this.bb=O.ByteBuffer.allocate(t),this.space=t,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1;},O.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1;},O.Builder.prototype.forceDefaults=function(e){this.force_defaults=e;},O.Builder.prototype.dataBuffer=function(){return this.bb;},O.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset());},O.Builder.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+t)&e-1;this.space<r+e+t;){var n=this.bb.capacity();this.bb=O.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n;}this.pad(r);},O.Builder.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0);},O.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e);},O.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e);},O.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e);},O.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e);},O.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e);},O.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e);},O.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e);},O.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e);},O.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e);},O.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e);},O.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e);},O.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e);},O.Builder.prototype.addFieldInt8=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e));},O.Builder.prototype.addFieldInt16=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e));},O.Builder.prototype.addFieldInt32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e));},O.Builder.prototype.addFieldInt64=function(e,t,r){(this.force_defaults||!t.equals(r))&&(this.addInt64(t),this.slot(e));},O.Builder.prototype.addFieldFloat32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e));},O.Builder.prototype.addFieldFloat64=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e));},O.Builder.prototype.addFieldOffset=function(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e));},O.Builder.prototype.addFieldStruct=function(e,t,r){t!=r&&(this.nested(t),this.slot(e));},O.Builder.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.");},O.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.");},O.Builder.prototype.slot=function(e){this.vtable[e]=this.offset();},O.Builder.prototype.offset=function(){return this.bb.capacity()-this.space;},O.Builder.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=t<<1,n=O.ByteBuffer.allocate(r);return n.setPosition(r-t),n.bytes().set(e.bytes(),r-t),n;},O.Builder.prototype.addOffset=function(e){this.prep(O.SIZEOF_INT,0),this.writeInt32(this.offset()-e+O.SIZEOF_INT);},O.Builder.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset();},O.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&0==this.vtable[t];t--);for(var r=t+1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var n=(r+2)*O.SIZEOF_SHORT;this.addInt16(n);var i=0,o=this.space;e:for(t=0;t<this.vtables.length;t++){var a=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(a)){for(var s=O.SIZEOF_SHORT;s<n;s+=O.SIZEOF_SHORT)if(this.bb.readInt16(o+s)!=this.bb.readInt16(a+s))continue e;i=this.vtables[t];break;}}return i?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,i-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e;},O.Builder.prototype.finish=function(e,t,r){var n=r?O.SIZE_PREFIX_LENGTH:0;if(t){var i=t;if(this.prep(this.minalign,O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH+n),i.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var o=O.FILE_IDENTIFIER_LENGTH-1;o>=0;o--)this.writeInt8(i.charCodeAt(o));}this.prep(this.minalign,O.SIZEOF_INT+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space);},O.Builder.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0);},O.Builder.prototype.requiredField=function(e,t){var r=this.bb.capacity()-e,n=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(n+t)))throw new Error("FlatBuffers: field "+t+" must be set");},O.Builder.prototype.startVector=function(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(O.SIZEOF_INT,e*t),this.prep(r,e*t);},O.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset();},O.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var t=e;else{t=[];for(var r=0;r<e.length;){var n,i=e.charCodeAt(r++);if(i<55296||i>=56320)n=i;else n=(i<<10)+e.charCodeAt(r++)+-56613888;n<128?t.push(n):(n<2048?t.push(n>>6&31|192):(n<65536?t.push(n>>12&15|224):t.push(n>>18&7|240,n>>12&63|128),t.push(n>>6&63|128)),t.push(63&n|128));}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);r=0;for(var o=this.space,a=this.bb.bytes();r<t.length;r++)a[o++]=t[r];return this.endVector();},O.Builder.prototype.createLong=function(e,t){return O.Long.create(e,t);},O.ByteBuffer=function(e){this.bytes_=e,this.position_=0;},O.ByteBuffer.allocate=function(e){return new O.ByteBuffer(new Uint8Array(e));},O.ByteBuffer.prototype.clear=function(){this.position_=0;},O.ByteBuffer.prototype.bytes=function(){return this.bytes_;},O.ByteBuffer.prototype.position=function(){return this.position_;},O.ByteBuffer.prototype.setPosition=function(e){this.position_=e;},O.ByteBuffer.prototype.capacity=function(){return this.bytes_.length;},O.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24;},O.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e];},O.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16;},O.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8;},O.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24;},O.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0;},O.ByteBuffer.prototype.readInt64=function(e){return new O.Long(this.readInt32(e),this.readInt32(e+4));},O.ByteBuffer.prototype.readUint64=function(e){return new O.Long(this.readUint32(e),this.readUint32(e+4));},O.ByteBuffer.prototype.readFloat32=function(e){return O.int32[0]=this.readInt32(e),O.float32[0];},O.ByteBuffer.prototype.readFloat64=function(e){return O.int32[O.isLittleEndian?0:1]=this.readInt32(e),O.int32[O.isLittleEndian?1:0]=this.readInt32(e+4),O.float64[0];},O.ByteBuffer.prototype.writeInt8=function(e,t){this.bytes_[e]=t;},O.ByteBuffer.prototype.writeUint8=function(e,t){this.bytes_[e]=t;},O.ByteBuffer.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8;},O.ByteBuffer.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8;},O.ByteBuffer.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24;},O.ByteBuffer.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24;},O.ByteBuffer.prototype.writeInt64=function(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high);},O.ByteBuffer.prototype.writeUint64=function(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high);},O.ByteBuffer.prototype.writeFloat32=function(e,t){O.float32[0]=t,this.writeInt32(e,O.int32[0]);},O.ByteBuffer.prototype.writeFloat64=function(e,t){O.float64[0]=t,this.writeInt32(e,O.int32[O.isLittleEndian?0:1]),this.writeInt32(e+4,O.int32[O.isLittleEndian?1:0]);},O.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+O.SIZEOF_INT+O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+O.SIZEOF_INT+t));return e;},O.ByteBuffer.prototype.__offset=function(e,t){var r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0;},O.ByteBuffer.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e;},O.ByteBuffer.prototype.__string=function(e,t){e+=this.readInt32(e);var r=this.readInt32(e),n="",i=0;if(e+=O.SIZEOF_INT,t===O.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+r);for(;i<r;){var o,a=this.readUint8(e+i++);if(a<192)o=a;else{var s=this.readUint8(e+i++);if(a<224)o=(31&a)<<6|63&s;else{var u=this.readUint8(e+i++);if(a<240)o=(15&a)<<12|(63&s)<<6|63&u;else o=(7&a)<<18|(63&s)<<12|(63&u)<<6|63&this.readUint8(e+i++);}}o<65536?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296+(o>>10),56320+(1023&o)));}return n;},O.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e);},O.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+O.SIZEOF_INT;},O.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e));},O.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=O.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+O.FILE_IDENTIFIER_LENGTH);for(var t=0;t<O.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position_+O.SIZEOF_INT+t))return!1;return!0;},O.ByteBuffer.prototype.createLong=function(e,t){return O.Long.create(e,t);};}),H,un=L(function(){Jn(),function(e){var t;(function(e){var t;(function(e){var t;var r;(r=t=e.AttributeType||(e.AttributeType={}))[r.UNDEFINED=0]="UNDEFINED",r[r.FLOAT=1]="FLOAT",r[r.INT=2]="INT",r[r.STRING=3]="STRING",r[r.TENSOR=4]="TENSOR",r[r.GRAPH=5]="GRAPH",r[r.FLOATS=6]="FLOATS",r[r.INTS=7]="INTS",r[r.STRINGS=8]="STRINGS",r[r.TENSORS=9]="TENSORS",r[r.GRAPHS=10]="GRAPHS",r[r.SPARSE_TENSOR=11]="SPARSE_TENSOR",r[r.SPARSE_TENSORS=12]="SPARSE_TENSORS";})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t;var r;(r=t=e.DimensionValueType||(e.DimensionValueType={}))[r.UNKNOWN=0]="UNKNOWN",r[r.VALUE=1]="VALUE",r[r.PARAM=2]="PARAM";})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t;var r;(r=t=e.TensorDataType||(e.TensorDataType={}))[r.UNDEFINED=0]="UNDEFINED",r[r.FLOAT=1]="FLOAT",r[r.UINT8=2]="UINT8",r[r.INT8=3]="INT8",r[r.UINT16=4]="UINT16",r[r.INT16=5]="INT16",r[r.INT32=6]="INT32",r[r.INT64=7]="INT64",r[r.STRING=8]="STRING",r[r.BOOL=9]="BOOL",r[r.FLOAT16=10]="FLOAT16",r[r.DOUBLE=11]="DOUBLE",r[r.UINT32=12]="UINT32",r[r.UINT64=13]="UINT64",r[r.COMPLEX64=14]="COMPLEX64",r[r.COMPLEX128=15]="COMPLEX128",r[r.BFLOAT16=16]="BFLOAT16",r[r.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",r[r.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",r[r.FLOAT8E5M2=19]="FLOAT8E5M2",r[r.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ";})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t;var r;(r=t=e.NodeType||(e.NodeType={}))[r.Primitive=0]="Primitive",r[r.Fused=1]="Fused";})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t;var r;(r=t=e.TypeInfoValue||(e.TypeInfoValue={}))[r.NONE=0]="NONE",r[r.tensor_type=1]="tensor_type",r[r.sequence_type=2]="sequence_type",r[r.map_type=3]="map_type";})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"dim",value:function dim(t,_r10){var n=this.bb.__offset(this.bb_pos,4);return n?(_r10||new e.experimental.fbs.Dimension()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"dimLength",value:function dimLength(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsShape",value:function getRootAsShape(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsShape",value:function getSizePrefixedRootAsShape(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startShape",value:function startShape(e){e.startObject(1);}},{key:"addDim",value:function addDim(e,t){e.addFieldOffset(0,t,0);}},{key:"createDimVector",value:function createDimVector(e,t){e.startVector(4,t.length,4);for(var _r12=t.length-1;_r12>=0;_r12--)e.addOffset(t[_r12]);return e.endVector();}},{key:"startDimVector",value:function startDimVector(e,t){e.startVector(4,t,4);}},{key:"endShape",value:function endShape(e){return e.endObject();}},{key:"createShape",value:function createShape(e,t){return r.startShape(e),r.addDim(e,t),r.endShape(e);}}]);return r;}();t.Shape=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"value",value:function value(t){var _r13=this.bb.__offset(this.bb_pos,4);return _r13?(t||new e.experimental.fbs.DimensionValue()).__init(this.bb.__indirect(this.bb_pos+_r13),this.bb):null;}},{key:"denotation",value:function denotation(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;}}],[{key:"getRootAsDimension",value:function getRootAsDimension(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsDimension",value:function getSizePrefixedRootAsDimension(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startDimension",value:function startDimension(e){e.startObject(2);}},{key:"addValue",value:function addValue(e,t){e.addFieldOffset(0,t,0);}},{key:"addDenotation",value:function addDenotation(e,t){e.addFieldOffset(1,t,0);}},{key:"endDimension",value:function endDimension(e){return e.endObject();}},{key:"createDimension",value:function createDimension(e,t,n){return r.startDimension(e),r.addValue(e,t),r.addDenotation(e,n),r.endDimension(e);}}]);return r;}();t.Dimension=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t=/*#__PURE__*/function(){function t(){_classCallCheck(this,t);this.bb=null,this.bb_pos=0;}_createClass(t,[{key:"__init",value:function __init(e,_t18){return this.bb_pos=e,this.bb=_t18,this;}},{key:"dimType",value:function dimType(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):0;}},{key:"dimValue",value:function dimValue(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0);}},{key:"dimParam",value:function dimParam(e){var _t19=this.bb.__offset(this.bb_pos,8);return _t19?this.bb.__string(this.bb_pos+_t19,e):null;}}],[{key:"getRootAsDimensionValue",value:function getRootAsDimensionValue(e,r){return(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsDimensionValue",value:function getSizePrefixedRootAsDimensionValue(e,r){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startDimensionValue",value:function startDimensionValue(e){e.startObject(3);}},{key:"addDimType",value:function addDimType(e,_t20){e.addFieldInt8(0,_t20,0);}},{key:"addDimValue",value:function addDimValue(e,_t21){e.addFieldInt64(1,_t21,e.createLong(0,0));}},{key:"addDimParam",value:function addDimParam(e,_t22){e.addFieldOffset(2,_t22,0);}},{key:"endDimensionValue",value:function endDimensionValue(e){return e.endObject();}},{key:"createDimensionValue",value:function createDimensionValue(e,r,n,i){return t.startDimensionValue(e),t.addDimType(e,r),t.addDimValue(e,n),t.addDimParam(e,i),t.endDimensionValue(e);}}]);return t;}();e.DimensionValue=t;})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"elemType",value:function elemType(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;}},{key:"shape",value:function shape(t){var _r14=this.bb.__offset(this.bb_pos,6);return _r14?(t||new e.experimental.fbs.Shape()).__init(this.bb.__indirect(this.bb_pos+_r14),this.bb):null;}}],[{key:"getRootAsTensorTypeAndShape",value:function getRootAsTensorTypeAndShape(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsTensorTypeAndShape",value:function getSizePrefixedRootAsTensorTypeAndShape(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startTensorTypeAndShape",value:function startTensorTypeAndShape(e){e.startObject(2);}},{key:"addElemType",value:function addElemType(e,t){e.addFieldInt32(0,t,0);}},{key:"addShape",value:function addShape(e,t){e.addFieldOffset(1,t,0);}},{key:"endTensorTypeAndShape",value:function endTensorTypeAndShape(e){return e.endObject();}},{key:"createTensorTypeAndShape",value:function createTensorTypeAndShape(e,t,n){return r.startTensorTypeAndShape(e),r.addElemType(e,t),r.addShape(e,n),r.endTensorTypeAndShape(e);}}]);return r;}();t.TensorTypeAndShape=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"keyType",value:function keyType(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0;}},{key:"valueType",value:function valueType(t){var _r15=this.bb.__offset(this.bb_pos,6);return _r15?(t||new e.experimental.fbs.TypeInfo()).__init(this.bb.__indirect(this.bb_pos+_r15),this.bb):null;}}],[{key:"getRootAsMapType",value:function getRootAsMapType(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsMapType",value:function getSizePrefixedRootAsMapType(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startMapType",value:function startMapType(e){e.startObject(2);}},{key:"addKeyType",value:function addKeyType(e,t){e.addFieldInt32(0,t,0);}},{key:"addValueType",value:function addValueType(e,t){e.addFieldOffset(1,t,0);}},{key:"endMapType",value:function endMapType(e){return e.endObject();}},{key:"createMapType",value:function createMapType(e,t,n){return r.startMapType(e),r.addKeyType(e,t),r.addValueType(e,n),r.endMapType(e);}}]);return r;}();t.MapType=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"elemType",value:function elemType(t){var _r16=this.bb.__offset(this.bb_pos,4);return _r16?(t||new e.experimental.fbs.TypeInfo()).__init(this.bb.__indirect(this.bb_pos+_r16),this.bb):null;}}],[{key:"getRootAsSequenceType",value:function getRootAsSequenceType(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsSequenceType",value:function getSizePrefixedRootAsSequenceType(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startSequenceType",value:function startSequenceType(e){e.startObject(1);}},{key:"addElemType",value:function addElemType(e,t){e.addFieldOffset(0,t,0);}},{key:"endSequenceType",value:function endSequenceType(e){return e.endObject();}},{key:"createSequenceType",value:function createSequenceType(e,t){return r.startSequenceType(e),r.addElemType(e,t),r.endSequenceType(e);}}]);return r;}();t.SequenceType=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(t=e.fbs||(e.fbs={})).EdgeEnd=/*#__PURE__*/function(){function _class(){_classCallCheck(this,_class);this.bb=null,this.bb_pos=0;}_createClass(_class,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"nodeIndex",value:function nodeIndex(){return this.bb.readUint32(this.bb_pos);}},{key:"srcArgIndex",value:function srcArgIndex(){return this.bb.readInt32(this.bb_pos+4);}},{key:"dstArgIndex",value:function dstArgIndex(){return this.bb.readInt32(this.bb_pos+8);}}],[{key:"createEdgeEnd",value:function createEdgeEnd(e,t,r,n){return e.prep(4,12),e.writeInt32(n),e.writeInt32(r),e.writeInt32(t),e.offset();}}]);return _class;}();})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"nodeIndex",value:function nodeIndex(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb_pos+e):0;}},{key:"inputEdges",value:function inputEdges(t,_r17){var n=this.bb.__offset(this.bb_pos,6);return n?(_r17||new e.experimental.fbs.EdgeEnd()).__init(this.bb.__vector(this.bb_pos+n)+12*t,this.bb):null;}},{key:"inputEdgesLength",value:function inputEdgesLength(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"outputEdges",value:function outputEdges(t,_r18){var n=this.bb.__offset(this.bb_pos,8);return n?(_r18||new e.experimental.fbs.EdgeEnd()).__init(this.bb.__vector(this.bb_pos+n)+12*t,this.bb):null;}},{key:"outputEdgesLength",value:function outputEdgesLength(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsNodeEdge",value:function getRootAsNodeEdge(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsNodeEdge",value:function getSizePrefixedRootAsNodeEdge(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startNodeEdge",value:function startNodeEdge(e){e.startObject(3);}},{key:"addNodeIndex",value:function addNodeIndex(e,t){e.addFieldInt32(0,t,0);}},{key:"addInputEdges",value:function addInputEdges(e,t){e.addFieldOffset(1,t,0);}},{key:"startInputEdgesVector",value:function startInputEdgesVector(e,t){e.startVector(12,t,4);}},{key:"addOutputEdges",value:function addOutputEdges(e,t){e.addFieldOffset(2,t,0);}},{key:"startOutputEdgesVector",value:function startOutputEdgesVector(e,t){e.startVector(12,t,4);}},{key:"endNodeEdge",value:function endNodeEdge(e){return e.endObject();}},{key:"createNodeEdge",value:function createNodeEdge(e,t,n,i){return r.startNodeEdge(e),r.addNodeIndex(e,t),r.addInputEdges(e,n),r.addOutputEdges(e,i),r.endNodeEdge(e);}}]);return r;}();t.NodeEdge=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"name",value:function name(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"docString",value:function docString(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"domain",value:function domain(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"sinceVersion",value:function sinceVersion(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0;}},{key:"index",value:function index(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):0;}},{key:"opType",value:function opType(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"type",value:function type(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0;}},{key:"executionProviderType",value:function executionProviderType(e){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"inputs",value:function inputs(e,t){var _r19=this.bb.__offset(this.bb_pos,20);return _r19?this.bb.__string(this.bb.__vector(this.bb_pos+_r19)+4*e,t):null;}},{key:"inputsLength",value:function inputsLength(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"outputs",value:function outputs(e,t){var _r20=this.bb.__offset(this.bb_pos,22);return _r20?this.bb.__string(this.bb.__vector(this.bb_pos+_r20)+4*e,t):null;}},{key:"outputsLength",value:function outputsLength(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"attributes",value:function attributes(t,_r21){var n=this.bb.__offset(this.bb_pos,24);return n?(_r21||new e.experimental.fbs.Attribute()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"attributesLength",value:function attributesLength(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"inputArgCounts",value:function inputArgCounts(e){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0;}},{key:"inputArgCountsLength",value:function inputArgCountsLength(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"inputArgCountsArray",value:function inputArgCountsArray(){var e=this.bb.__offset(this.bb_pos,26);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;}},{key:"implicitInputs",value:function implicitInputs(e,t){var _r22=this.bb.__offset(this.bb_pos,28);return _r22?this.bb.__string(this.bb.__vector(this.bb_pos+_r22)+4*e,t):null;}},{key:"implicitInputsLength",value:function implicitInputsLength(){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsNode",value:function getRootAsNode(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsNode",value:function getSizePrefixedRootAsNode(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startNode",value:function startNode(e){e.startObject(13);}},{key:"addName",value:function addName(e,t){e.addFieldOffset(0,t,0);}},{key:"addDocString",value:function addDocString(e,t){e.addFieldOffset(1,t,0);}},{key:"addDomain",value:function addDomain(e,t){e.addFieldOffset(2,t,0);}},{key:"addSinceVersion",value:function addSinceVersion(e,t){e.addFieldInt32(3,t,0);}},{key:"addIndex",value:function addIndex(e,t){e.addFieldInt32(4,t,0);}},{key:"addOpType",value:function addOpType(e,t){e.addFieldOffset(5,t,0);}},{key:"addType",value:function addType(e,t){e.addFieldInt32(6,t,0);}},{key:"addExecutionProviderType",value:function addExecutionProviderType(e,t){e.addFieldOffset(7,t,0);}},{key:"addInputs",value:function addInputs(e,t){e.addFieldOffset(8,t,0);}},{key:"createInputsVector",value:function createInputsVector(e,t){e.startVector(4,t.length,4);for(var _r28=t.length-1;_r28>=0;_r28--)e.addOffset(t[_r28]);return e.endVector();}},{key:"startInputsVector",value:function startInputsVector(e,t){e.startVector(4,t,4);}},{key:"addOutputs",value:function addOutputs(e,t){e.addFieldOffset(9,t,0);}},{key:"createOutputsVector",value:function createOutputsVector(e,t){e.startVector(4,t.length,4);for(var _r29=t.length-1;_r29>=0;_r29--)e.addOffset(t[_r29]);return e.endVector();}},{key:"startOutputsVector",value:function startOutputsVector(e,t){e.startVector(4,t,4);}},{key:"addAttributes",value:function addAttributes(e,t){e.addFieldOffset(10,t,0);}},{key:"createAttributesVector",value:function createAttributesVector(e,t){e.startVector(4,t.length,4);for(var _r30=t.length-1;_r30>=0;_r30--)e.addOffset(t[_r30]);return e.endVector();}},{key:"startAttributesVector",value:function startAttributesVector(e,t){e.startVector(4,t,4);}},{key:"addInputArgCounts",value:function addInputArgCounts(e,t){e.addFieldOffset(11,t,0);}},{key:"createInputArgCountsVector",value:function createInputArgCountsVector(e,t){e.startVector(4,t.length,4);for(var _r31=t.length-1;_r31>=0;_r31--)e.addInt32(t[_r31]);return e.endVector();}},{key:"startInputArgCountsVector",value:function startInputArgCountsVector(e,t){e.startVector(4,t,4);}},{key:"addImplicitInputs",value:function addImplicitInputs(e,t){e.addFieldOffset(12,t,0);}},{key:"createImplicitInputsVector",value:function createImplicitInputsVector(e,t){e.startVector(4,t.length,4);for(var _r32=t.length-1;_r32>=0;_r32--)e.addOffset(t[_r32]);return e.endVector();}},{key:"startImplicitInputsVector",value:function startImplicitInputsVector(e,t){e.startVector(4,t,4);}},{key:"endNode",value:function endNode(e){return e.endObject();}},{key:"createNode",value:function createNode(e,t,n,i,o,a,s,u,l,h,c,d,f,p){return r.startNode(e),r.addName(e,t),r.addDocString(e,n),r.addDomain(e,i),r.addSinceVersion(e,o),r.addIndex(e,a),r.addOpType(e,s),r.addType(e,u),r.addExecutionProviderType(e,l),r.addInputs(e,h),r.addOutputs(e,c),r.addAttributes(e,d),r.addInputArgCounts(e,f),r.addImplicitInputs(e,p),r.endNode(e);}}]);return r;}();t.Node=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"name",value:function name(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"docString",value:function docString(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"type",value:function type(t){var _r33=this.bb.__offset(this.bb_pos,8);return _r33?(t||new e.experimental.fbs.TypeInfo()).__init(this.bb.__indirect(this.bb_pos+_r33),this.bb):null;}}],[{key:"getRootAsValueInfo",value:function getRootAsValueInfo(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsValueInfo",value:function getSizePrefixedRootAsValueInfo(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startValueInfo",value:function startValueInfo(e){e.startObject(3);}},{key:"addName",value:function addName(e,t){e.addFieldOffset(0,t,0);}},{key:"addDocString",value:function addDocString(e,t){e.addFieldOffset(1,t,0);}},{key:"addType",value:function addType(e,t){e.addFieldOffset(2,t,0);}},{key:"endValueInfo",value:function endValueInfo(e){return e.endObject();}},{key:"createValueInfo",value:function createValueInfo(e,t,n,i){return r.startValueInfo(e),r.addName(e,t),r.addDocString(e,n),r.addType(e,i),r.endValueInfo(e);}}]);return r;}();t.ValueInfo=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t=/*#__PURE__*/function(){function t(){_classCallCheck(this,t);this.bb=null,this.bb_pos=0;}_createClass(t,[{key:"__init",value:function __init(e,_t23){return this.bb_pos=e,this.bb=_t23,this;}},{key:"denotation",value:function denotation(e){var _t24=this.bb.__offset(this.bb_pos,4);return _t24?this.bb.__string(this.bb_pos+_t24,e):null;}},{key:"valueType",value:function valueType(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0;}},{key:"value",value:function value(e){var _t25=this.bb.__offset(this.bb_pos,8);return _t25?this.bb.__union(e,this.bb_pos+_t25):null;}}],[{key:"getRootAsTypeInfo",value:function getRootAsTypeInfo(e,r){return(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsTypeInfo",value:function getSizePrefixedRootAsTypeInfo(e,r){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startTypeInfo",value:function startTypeInfo(e){e.startObject(3);}},{key:"addDenotation",value:function addDenotation(e,_t26){e.addFieldOffset(0,_t26,0);}},{key:"addValueType",value:function addValueType(e,_t27){e.addFieldInt8(1,_t27,0);}},{key:"addValue",value:function addValue(e,_t28){e.addFieldOffset(2,_t28,0);}},{key:"endTypeInfo",value:function endTypeInfo(e){return e.endObject();}},{key:"createTypeInfo",value:function createTypeInfo(e,r,n,i){return t.startTypeInfo(e),t.addDenotation(e,r),t.addValueType(e,n),t.addValue(e,i),t.endTypeInfo(e);}}]);return t;}();e.TypeInfo=t;})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t=/*#__PURE__*/function(){function t(){_classCallCheck(this,t);this.bb=null,this.bb_pos=0;}_createClass(t,[{key:"__init",value:function __init(e,_t29){return this.bb_pos=e,this.bb=_t29,this;}},{key:"domain",value:function domain(e){var _t30=this.bb.__offset(this.bb_pos,4);return _t30?this.bb.__string(this.bb_pos+_t30,e):null;}},{key:"version",value:function version(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0);}}],[{key:"getRootAsOperatorSetId",value:function getRootAsOperatorSetId(e,r){return(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsOperatorSetId",value:function getSizePrefixedRootAsOperatorSetId(e,r){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startOperatorSetId",value:function startOperatorSetId(e){e.startObject(2);}},{key:"addDomain",value:function addDomain(e,_t31){e.addFieldOffset(0,_t31,0);}},{key:"addVersion",value:function addVersion(e,_t32){e.addFieldInt64(1,_t32,e.createLong(0,0));}},{key:"endOperatorSetId",value:function endOperatorSetId(e){return e.endObject();}},{key:"createOperatorSetId",value:function createOperatorSetId(e,r,n){return t.startOperatorSetId(e),t.addDomain(e,r),t.addVersion(e,n),t.endOperatorSetId(e);}}]);return t;}();e.OperatorSetId=t;})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t=/*#__PURE__*/function(){function t(){_classCallCheck(this,t);this.bb=null,this.bb_pos=0;}_createClass(t,[{key:"__init",value:function __init(e,_t33){return this.bb_pos=e,this.bb=_t33,this;}},{key:"name",value:function name(e){var _t34=this.bb.__offset(this.bb_pos,4);return _t34?this.bb.__string(this.bb_pos+_t34,e):null;}},{key:"docString",value:function docString(e){var _t35=this.bb.__offset(this.bb_pos,6);return _t35?this.bb.__string(this.bb_pos+_t35,e):null;}},{key:"dims",value:function dims(e){var _t36=this.bb.__offset(this.bb_pos,8);return _t36?this.bb.readInt64(this.bb.__vector(this.bb_pos+_t36)+8*e):this.bb.createLong(0,0);}},{key:"dimsLength",value:function dimsLength(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"dataType",value:function dataType(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0;}},{key:"rawData",value:function rawData(e){var _t37=this.bb.__offset(this.bb_pos,12);return _t37?this.bb.readUint8(this.bb.__vector(this.bb_pos+_t37)+e):0;}},{key:"rawDataLength",value:function rawDataLength(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"rawDataArray",value:function rawDataArray(){var e=this.bb.__offset(this.bb_pos,12);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;}},{key:"stringData",value:function stringData(e,_t38){var r=this.bb.__offset(this.bb_pos,14);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+4*e,_t38):null;}},{key:"stringDataLength",value:function stringDataLength(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsTensor",value:function getRootAsTensor(e,r){return(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsTensor",value:function getSizePrefixedRootAsTensor(e,r){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startTensor",value:function startTensor(e){e.startObject(6);}},{key:"addName",value:function addName(e,_t39){e.addFieldOffset(0,_t39,0);}},{key:"addDocString",value:function addDocString(e,_t40){e.addFieldOffset(1,_t40,0);}},{key:"addDims",value:function addDims(e,_t41){e.addFieldOffset(2,_t41,0);}},{key:"createDimsVector",value:function createDimsVector(e,_t42){e.startVector(8,_t42.length,8);for(var r=_t42.length-1;r>=0;r--)e.addInt64(_t42[r]);return e.endVector();}},{key:"startDimsVector",value:function startDimsVector(e,_t43){e.startVector(8,_t43,8);}},{key:"addDataType",value:function addDataType(e,_t44){e.addFieldInt32(3,_t44,0);}},{key:"addRawData",value:function addRawData(e,_t45){e.addFieldOffset(4,_t45,0);}},{key:"createRawDataVector",value:function createRawDataVector(e,_t46){e.startVector(1,_t46.length,1);for(var r=_t46.length-1;r>=0;r--)e.addInt8(_t46[r]);return e.endVector();}},{key:"startRawDataVector",value:function startRawDataVector(e,_t47){e.startVector(1,_t47,1);}},{key:"addStringData",value:function addStringData(e,_t48){e.addFieldOffset(5,_t48,0);}},{key:"createStringDataVector",value:function createStringDataVector(e,_t49){e.startVector(4,_t49.length,4);for(var r=_t49.length-1;r>=0;r--)e.addOffset(_t49[r]);return e.endVector();}},{key:"startStringDataVector",value:function startStringDataVector(e,_t50){e.startVector(4,_t50,4);}},{key:"endTensor",value:function endTensor(e){return e.endObject();}},{key:"createTensor",value:function createTensor(e,r,n,i,o,a,s){return t.startTensor(e),t.addName(e,r),t.addDocString(e,n),t.addDims(e,i),t.addDataType(e,o),t.addRawData(e,a),t.addStringData(e,s),t.endTensor(e);}}]);return t;}();e.Tensor=t;})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"values",value:function values(t){var _r34=this.bb.__offset(this.bb_pos,4);return _r34?(t||new e.experimental.fbs.Tensor()).__init(this.bb.__indirect(this.bb_pos+_r34),this.bb):null;}},{key:"indices",value:function indices(t){var _r35=this.bb.__offset(this.bb_pos,6);return _r35?(t||new e.experimental.fbs.Tensor()).__init(this.bb.__indirect(this.bb_pos+_r35),this.bb):null;}},{key:"dims",value:function dims(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0);}},{key:"dimsLength",value:function dimsLength(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsSparseTensor",value:function getRootAsSparseTensor(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsSparseTensor",value:function getSizePrefixedRootAsSparseTensor(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startSparseTensor",value:function startSparseTensor(e){e.startObject(3);}},{key:"addValues",value:function addValues(e,t){e.addFieldOffset(0,t,0);}},{key:"addIndices",value:function addIndices(e,t){e.addFieldOffset(1,t,0);}},{key:"addDims",value:function addDims(e,t){e.addFieldOffset(2,t,0);}},{key:"createDimsVector",value:function createDimsVector(e,t){e.startVector(8,t.length,8);for(var _r37=t.length-1;_r37>=0;_r37--)e.addInt64(t[_r37]);return e.endVector();}},{key:"startDimsVector",value:function startDimsVector(e,t){e.startVector(8,t,8);}},{key:"endSparseTensor",value:function endSparseTensor(e){return e.endObject();}},{key:"createSparseTensor",value:function createSparseTensor(e,t,n,i){return r.startSparseTensor(e),r.addValues(e,t),r.addIndices(e,n),r.addDims(e,i),r.endSparseTensor(e);}}]);return r;}();t.SparseTensor=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"name",value:function name(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"docString",value:function docString(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"type",value:function type(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0;}},{key:"f",value:function f(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):0;}},{key:"i",value:function i(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0);}},{key:"s",value:function s(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"t",value:function t(_t51){var _r38=this.bb.__offset(this.bb_pos,16);return _r38?(_t51||new e.experimental.fbs.Tensor()).__init(this.bb.__indirect(this.bb_pos+_r38),this.bb):null;}},{key:"g",value:function g(t){var _r39=this.bb.__offset(this.bb_pos,18);return _r39?(t||new e.experimental.fbs.Graph()).__init(this.bb.__indirect(this.bb_pos+_r39),this.bb):null;}},{key:"floats",value:function floats(e){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+4*e):0;}},{key:"floatsLength",value:function floatsLength(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"floatsArray",value:function floatsArray(){var e=this.bb.__offset(this.bb_pos,20);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;}},{key:"ints",value:function ints(e){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0);}},{key:"intsLength",value:function intsLength(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"strings",value:function strings(e,t){var _r40=this.bb.__offset(this.bb_pos,24);return _r40?this.bb.__string(this.bb.__vector(this.bb_pos+_r40)+4*e,t):null;}},{key:"stringsLength",value:function stringsLength(){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"tensors",value:function tensors(t,_r41){var n=this.bb.__offset(this.bb_pos,26);return n?(_r41||new e.experimental.fbs.Tensor()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"tensorsLength",value:function tensorsLength(){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"graphs",value:function graphs(t,_r42){var n=this.bb.__offset(this.bb_pos,28);return n?(_r42||new e.experimental.fbs.Graph()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"graphsLength",value:function graphsLength(){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsAttribute",value:function getRootAsAttribute(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsAttribute",value:function getSizePrefixedRootAsAttribute(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startAttribute",value:function startAttribute(e){e.startObject(13);}},{key:"addName",value:function addName(e,t){e.addFieldOffset(0,t,0);}},{key:"addDocString",value:function addDocString(e,t){e.addFieldOffset(1,t,0);}},{key:"addType",value:function addType(e,t){e.addFieldInt32(2,t,0);}},{key:"addF",value:function addF(e,t){e.addFieldFloat32(3,t,0);}},{key:"addI",value:function addI(e,t){e.addFieldInt64(4,t,e.createLong(0,0));}},{key:"addS",value:function addS(e,t){e.addFieldOffset(5,t,0);}},{key:"addT",value:function addT(e,t){e.addFieldOffset(6,t,0);}},{key:"addG",value:function addG(e,t){e.addFieldOffset(7,t,0);}},{key:"addFloats",value:function addFloats(e,t){e.addFieldOffset(8,t,0);}},{key:"createFloatsVector",value:function createFloatsVector(e,t){e.startVector(4,t.length,4);for(var _r48=t.length-1;_r48>=0;_r48--)e.addFloat32(t[_r48]);return e.endVector();}},{key:"startFloatsVector",value:function startFloatsVector(e,t){e.startVector(4,t,4);}},{key:"addInts",value:function addInts(e,t){e.addFieldOffset(9,t,0);}},{key:"createIntsVector",value:function createIntsVector(e,t){e.startVector(8,t.length,8);for(var _r49=t.length-1;_r49>=0;_r49--)e.addInt64(t[_r49]);return e.endVector();}},{key:"startIntsVector",value:function startIntsVector(e,t){e.startVector(8,t,8);}},{key:"addStrings",value:function addStrings(e,t){e.addFieldOffset(10,t,0);}},{key:"createStringsVector",value:function createStringsVector(e,t){e.startVector(4,t.length,4);for(var _r50=t.length-1;_r50>=0;_r50--)e.addOffset(t[_r50]);return e.endVector();}},{key:"startStringsVector",value:function startStringsVector(e,t){e.startVector(4,t,4);}},{key:"addTensors",value:function addTensors(e,t){e.addFieldOffset(11,t,0);}},{key:"createTensorsVector",value:function createTensorsVector(e,t){e.startVector(4,t.length,4);for(var _r51=t.length-1;_r51>=0;_r51--)e.addOffset(t[_r51]);return e.endVector();}},{key:"startTensorsVector",value:function startTensorsVector(e,t){e.startVector(4,t,4);}},{key:"addGraphs",value:function addGraphs(e,t){e.addFieldOffset(12,t,0);}},{key:"createGraphsVector",value:function createGraphsVector(e,t){e.startVector(4,t.length,4);for(var _r52=t.length-1;_r52>=0;_r52--)e.addOffset(t[_r52]);return e.endVector();}},{key:"startGraphsVector",value:function startGraphsVector(e,t){e.startVector(4,t,4);}},{key:"endAttribute",value:function endAttribute(e){return e.endObject();}},{key:"createAttribute",value:function createAttribute(e,t,n,i,o,a,s,u,l,h,c,d,f,p){return r.startAttribute(e),r.addName(e,t),r.addDocString(e,n),r.addType(e,i),r.addF(e,o),r.addI(e,a),r.addS(e,s),r.addT(e,u),r.addG(e,l),r.addFloats(e,h),r.addInts(e,c),r.addStrings(e,d),r.addTensors(e,f),r.addGraphs(e,p),r.endAttribute(e);}}]);return r;}();t.Attribute=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"initializers",value:function initializers(t,_r53){var n=this.bb.__offset(this.bb_pos,4);return n?(_r53||new e.experimental.fbs.Tensor()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"initializersLength",value:function initializersLength(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"nodeArgs",value:function nodeArgs(t,_r54){var n=this.bb.__offset(this.bb_pos,6);return n?(_r54||new e.experimental.fbs.ValueInfo()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"nodeArgsLength",value:function nodeArgsLength(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"nodes",value:function nodes(t,_r55){var n=this.bb.__offset(this.bb_pos,8);return n?(_r55||new e.experimental.fbs.Node()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"nodesLength",value:function nodesLength(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"maxNodeIndex",value:function maxNodeIndex(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):0;}},{key:"nodeEdges",value:function nodeEdges(t,_r56){var n=this.bb.__offset(this.bb_pos,12);return n?(_r56||new e.experimental.fbs.NodeEdge()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"nodeEdgesLength",value:function nodeEdgesLength(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"inputs",value:function inputs(e,t){var _r57=this.bb.__offset(this.bb_pos,14);return _r57?this.bb.__string(this.bb.__vector(this.bb_pos+_r57)+4*e,t):null;}},{key:"inputsLength",value:function inputsLength(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"outputs",value:function outputs(e,t){var _r58=this.bb.__offset(this.bb_pos,16);return _r58?this.bb.__string(this.bb.__vector(this.bb_pos+_r58)+4*e,t):null;}},{key:"outputsLength",value:function outputsLength(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"sparseInitializers",value:function sparseInitializers(t,_r59){var n=this.bb.__offset(this.bb_pos,18);return n?(_r59||new e.experimental.fbs.SparseTensor()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"sparseInitializersLength",value:function sparseInitializersLength(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsGraph",value:function getRootAsGraph(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsGraph",value:function getSizePrefixedRootAsGraph(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startGraph",value:function startGraph(e){e.startObject(8);}},{key:"addInitializers",value:function addInitializers(e,t){e.addFieldOffset(0,t,0);}},{key:"createInitializersVector",value:function createInitializersVector(e,t){e.startVector(4,t.length,4);for(var _r67=t.length-1;_r67>=0;_r67--)e.addOffset(t[_r67]);return e.endVector();}},{key:"startInitializersVector",value:function startInitializersVector(e,t){e.startVector(4,t,4);}},{key:"addNodeArgs",value:function addNodeArgs(e,t){e.addFieldOffset(1,t,0);}},{key:"createNodeArgsVector",value:function createNodeArgsVector(e,t){e.startVector(4,t.length,4);for(var _r68=t.length-1;_r68>=0;_r68--)e.addOffset(t[_r68]);return e.endVector();}},{key:"startNodeArgsVector",value:function startNodeArgsVector(e,t){e.startVector(4,t,4);}},{key:"addNodes",value:function addNodes(e,t){e.addFieldOffset(2,t,0);}},{key:"createNodesVector",value:function createNodesVector(e,t){e.startVector(4,t.length,4);for(var _r69=t.length-1;_r69>=0;_r69--)e.addOffset(t[_r69]);return e.endVector();}},{key:"startNodesVector",value:function startNodesVector(e,t){e.startVector(4,t,4);}},{key:"addMaxNodeIndex",value:function addMaxNodeIndex(e,t){e.addFieldInt32(3,t,0);}},{key:"addNodeEdges",value:function addNodeEdges(e,t){e.addFieldOffset(4,t,0);}},{key:"createNodeEdgesVector",value:function createNodeEdgesVector(e,t){e.startVector(4,t.length,4);for(var _r70=t.length-1;_r70>=0;_r70--)e.addOffset(t[_r70]);return e.endVector();}},{key:"startNodeEdgesVector",value:function startNodeEdgesVector(e,t){e.startVector(4,t,4);}},{key:"addInputs",value:function addInputs(e,t){e.addFieldOffset(5,t,0);}},{key:"createInputsVector",value:function createInputsVector(e,t){e.startVector(4,t.length,4);for(var _r71=t.length-1;_r71>=0;_r71--)e.addOffset(t[_r71]);return e.endVector();}},{key:"startInputsVector",value:function startInputsVector(e,t){e.startVector(4,t,4);}},{key:"addOutputs",value:function addOutputs(e,t){e.addFieldOffset(6,t,0);}},{key:"createOutputsVector",value:function createOutputsVector(e,t){e.startVector(4,t.length,4);for(var _r72=t.length-1;_r72>=0;_r72--)e.addOffset(t[_r72]);return e.endVector();}},{key:"startOutputsVector",value:function startOutputsVector(e,t){e.startVector(4,t,4);}},{key:"addSparseInitializers",value:function addSparseInitializers(e,t){e.addFieldOffset(7,t,0);}},{key:"createSparseInitializersVector",value:function createSparseInitializersVector(e,t){e.startVector(4,t.length,4);for(var _r73=t.length-1;_r73>=0;_r73--)e.addOffset(t[_r73]);return e.endVector();}},{key:"startSparseInitializersVector",value:function startSparseInitializersVector(e,t){e.startVector(4,t,4);}},{key:"endGraph",value:function endGraph(e){return e.endObject();}},{key:"createGraph",value:function createGraph(e,t,n,i,o,a,s,u,l){return r.startGraph(e),r.addInitializers(e,t),r.addNodeArgs(e,n),r.addNodes(e,i),r.addMaxNodeIndex(e,o),r.addNodeEdges(e,a),r.addInputs(e,s),r.addOutputs(e,u),r.addSparseInitializers(e,l),r.endGraph(e);}}]);return r;}();t.Graph=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"irVersion",value:function irVersion(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0);}},{key:"opsetImport",value:function opsetImport(t,_r74){var n=this.bb.__offset(this.bb_pos,6);return n?(_r74||new e.experimental.fbs.OperatorSetId()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"opsetImportLength",value:function opsetImportLength(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"producerName",value:function producerName(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"producerVersion",value:function producerVersion(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"domain",value:function domain(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"modelVersion",value:function modelVersion(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0);}},{key:"docString",value:function docString(e){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"graph",value:function graph(t){var _r75=this.bb.__offset(this.bb_pos,18);return _r75?(t||new e.experimental.fbs.Graph()).__init(this.bb.__indirect(this.bb_pos+_r75),this.bb):null;}},{key:"graphDocString",value:function graphDocString(e){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb_pos+t,e):null;}}],[{key:"getRootAsModel",value:function getRootAsModel(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsModel",value:function getSizePrefixedRootAsModel(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startModel",value:function startModel(e){e.startObject(9);}},{key:"addIrVersion",value:function addIrVersion(e,t){e.addFieldInt64(0,t,e.createLong(0,0));}},{key:"addOpsetImport",value:function addOpsetImport(e,t){e.addFieldOffset(1,t,0);}},{key:"createOpsetImportVector",value:function createOpsetImportVector(e,t){e.startVector(4,t.length,4);for(var _r77=t.length-1;_r77>=0;_r77--)e.addOffset(t[_r77]);return e.endVector();}},{key:"startOpsetImportVector",value:function startOpsetImportVector(e,t){e.startVector(4,t,4);}},{key:"addProducerName",value:function addProducerName(e,t){e.addFieldOffset(2,t,0);}},{key:"addProducerVersion",value:function addProducerVersion(e,t){e.addFieldOffset(3,t,0);}},{key:"addDomain",value:function addDomain(e,t){e.addFieldOffset(4,t,0);}},{key:"addModelVersion",value:function addModelVersion(e,t){e.addFieldInt64(5,t,e.createLong(0,0));}},{key:"addDocString",value:function addDocString(e,t){e.addFieldOffset(6,t,0);}},{key:"addGraph",value:function addGraph(e,t){e.addFieldOffset(7,t,0);}},{key:"addGraphDocString",value:function addGraphDocString(e,t){e.addFieldOffset(8,t,0);}},{key:"endModel",value:function endModel(e){return e.endObject();}},{key:"createModel",value:function createModel(e,t,n,i,o,a,s,u,l,h){return r.startModel(e),r.addIrVersion(e,t),r.addOpsetImport(e,n),r.addProducerName(e,i),r.addProducerVersion(e,o),r.addDomain(e,a),r.addModelVersion(e,s),r.addDocString(e,u),r.addGraph(e,l),r.addGraphDocString(e,h),r.endModel(e);}}]);return r;}();t.Model=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(e){var t;(function(e){var t=/*#__PURE__*/function(){function t(){_classCallCheck(this,t);this.bb=null,this.bb_pos=0;}_createClass(t,[{key:"__init",value:function __init(e,_t52){return this.bb_pos=e,this.bb=_t52,this;}},{key:"nodeIndices",value:function nodeIndices(e){var _t53=this.bb.__offset(this.bb_pos,4);return _t53?this.bb.readUint32(this.bb.__vector(this.bb_pos+_t53)+4*e):0;}},{key:"nodeIndicesLength",value:function nodeIndicesLength(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0;}},{key:"nodeIndicesArray",value:function nodeIndicesArray(){var e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null;}},{key:"kernelDefHashes",value:function kernelDefHashes(e){var _t54=this.bb.__offset(this.bb_pos,6);return _t54?this.bb.readUint64(this.bb.__vector(this.bb_pos+_t54)+8*e):this.bb.createLong(0,0);}},{key:"kernelDefHashesLength",value:function kernelDefHashesLength(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsKernelCreateInfos",value:function getRootAsKernelCreateInfos(e,r){return(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsKernelCreateInfos",value:function getSizePrefixedRootAsKernelCreateInfos(e,r){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(r||new t()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startKernelCreateInfos",value:function startKernelCreateInfos(e){e.startObject(2);}},{key:"addNodeIndices",value:function addNodeIndices(e,_t55){e.addFieldOffset(0,_t55,0);}},{key:"createNodeIndicesVector",value:function createNodeIndicesVector(e,_t56){e.startVector(4,_t56.length,4);for(var r=_t56.length-1;r>=0;r--)e.addInt32(_t56[r]);return e.endVector();}},{key:"startNodeIndicesVector",value:function startNodeIndicesVector(e,_t57){e.startVector(4,_t57,4);}},{key:"addKernelDefHashes",value:function addKernelDefHashes(e,_t58){e.addFieldOffset(1,_t58,0);}},{key:"createKernelDefHashesVector",value:function createKernelDefHashesVector(e,_t59){e.startVector(8,_t59.length,8);for(var r=_t59.length-1;r>=0;r--)e.addInt64(_t59[r]);return e.endVector();}},{key:"startKernelDefHashesVector",value:function startKernelDefHashesVector(e,_t60){e.startVector(8,_t60,8);}},{key:"endKernelCreateInfos",value:function endKernelCreateInfos(e){return e.endObject();}},{key:"createKernelCreateInfos",value:function createKernelCreateInfos(e,r,n){return t.startKernelCreateInfos(e),t.addNodeIndices(e,r),t.addKernelDefHashes(e,n),t.endKernelCreateInfos(e);}}]);return t;}();e.KernelCreateInfos=t;})(t=e.fbs||(e.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"graphId",value:function graphId(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"sessionState",value:function sessionState(t){var _r78=this.bb.__offset(this.bb_pos,6);return _r78?(t||new e.experimental.fbs.SessionState()).__init(this.bb.__indirect(this.bb_pos+_r78),this.bb):null;}}],[{key:"getRootAsSubGraphSessionState",value:function getRootAsSubGraphSessionState(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsSubGraphSessionState",value:function getSizePrefixedRootAsSubGraphSessionState(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startSubGraphSessionState",value:function startSubGraphSessionState(e){e.startObject(2);}},{key:"addGraphId",value:function addGraphId(e,t){e.addFieldOffset(0,t,0);}},{key:"addSessionState",value:function addSessionState(e,t){e.addFieldOffset(1,t,0);}},{key:"endSubGraphSessionState",value:function endSubGraphSessionState(e){var t=e.endObject();return e.requiredField(t,4),t;}},{key:"createSubGraphSessionState",value:function createSubGraphSessionState(e,t,n){return r.startSubGraphSessionState(e),r.addGraphId(e,t),r.addSessionState(e,n),r.endSubGraphSessionState(e);}}]);return r;}();t.SubGraphSessionState=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"kernels",value:function kernels(t){var _r79=this.bb.__offset(this.bb_pos,4);return _r79?(t||new e.experimental.fbs.KernelCreateInfos()).__init(this.bb.__indirect(this.bb_pos+_r79),this.bb):null;}},{key:"subGraphSessionStates",value:function subGraphSessionStates(t,_r80){var n=this.bb.__offset(this.bb_pos,6);return n?(_r80||new e.experimental.fbs.SubGraphSessionState()).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null;}},{key:"subGraphSessionStatesLength",value:function subGraphSessionStatesLength(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0;}}],[{key:"getRootAsSessionState",value:function getRootAsSessionState(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsSessionState",value:function getSizePrefixedRootAsSessionState(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"startSessionState",value:function startSessionState(e){e.startObject(2);}},{key:"addKernels",value:function addKernels(e,t){e.addFieldOffset(0,t,0);}},{key:"addSubGraphSessionStates",value:function addSubGraphSessionStates(e,t){e.addFieldOffset(1,t,0);}},{key:"createSubGraphSessionStatesVector",value:function createSubGraphSessionStatesVector(e,t){e.startVector(4,t.length,4);for(var _r82=t.length-1;_r82>=0;_r82--)e.addOffset(t[_r82]);return e.endVector();}},{key:"startSubGraphSessionStatesVector",value:function startSubGraphSessionStatesVector(e,t){e.startVector(4,t,4);}},{key:"endSessionState",value:function endSessionState(e){return e.endObject();}},{key:"createSessionState",value:function createSessionState(e,t,n){return r.startSessionState(e),r.addKernels(e,t),r.addSubGraphSessionStates(e,n),r.endSessionState(e);}}]);return r;}();t.SessionState=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={})),function(e){var t;(function(t){var r;(function(t){var r=/*#__PURE__*/function(){function r(){_classCallCheck(this,r);this.bb=null,this.bb_pos=0;}_createClass(r,[{key:"__init",value:function __init(e,t){return this.bb_pos=e,this.bb=t,this;}},{key:"ortVersion",value:function ortVersion(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null;}},{key:"model",value:function model(t){var _r83=this.bb.__offset(this.bb_pos,6);return _r83?(t||new e.experimental.fbs.Model()).__init(this.bb.__indirect(this.bb_pos+_r83),this.bb):null;}},{key:"sessionState",value:function sessionState(t){var _r84=this.bb.__offset(this.bb_pos,8);return _r84?(t||new e.experimental.fbs.SessionState()).__init(this.bb.__indirect(this.bb_pos+_r84),this.bb):null;}}],[{key:"getRootAsInferenceSession",value:function getRootAsInferenceSession(e,t){return(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"getSizePrefixedRootAsInferenceSession",value:function getSizePrefixedRootAsInferenceSession(e,t){return e.setPosition(e.position()+O.SIZE_PREFIX_LENGTH),(t||new r()).__init(e.readInt32(e.position())+e.position(),e);}},{key:"bufferHasIdentifier",value:function bufferHasIdentifier(e){return e.__has_identifier("ORTM");}},{key:"startInferenceSession",value:function startInferenceSession(e){e.startObject(3);}},{key:"addOrtVersion",value:function addOrtVersion(e,t){e.addFieldOffset(0,t,0);}},{key:"addModel",value:function addModel(e,t){e.addFieldOffset(1,t,0);}},{key:"addSessionState",value:function addSessionState(e,t){e.addFieldOffset(2,t,0);}},{key:"endInferenceSession",value:function endInferenceSession(e){return e.endObject();}},{key:"finishInferenceSessionBuffer",value:function finishInferenceSessionBuffer(e,t){e.finish(t,"ORTM");}},{key:"finishSizePrefixedInferenceSessionBuffer",value:function finishSizePrefixedInferenceSessionBuffer(e,t){e.finish(t,"ORTM",!0);}},{key:"createInferenceSession",value:function createInferenceSession(e,t,n,i){return r.startInferenceSession(e),r.addOrtVersion(e,t),r.addModel(e,n),r.addSessionState(e,i),r.endInferenceSession(e);}}]);return r;}();t.InferenceSession=r;})(r=t.fbs||(t.fbs={}));})(t=e.experimental||(e.experimental={}));}(H||(H={}));}),Us=ye(function(e,t){t.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t);}};try{e.apply(t||null,r);}catch(e){o&&(o=!1,a(e));}});};}),Hs=ye(function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r;};var r,n=new Array(64),i=new Array(123);for(r=0;r<64;)i[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,r){for(var i,o=null,a=[],s=0,u=0;t<r;){var l=e[t++];switch(u){case 0:a[s++]=n[l>>2],i=(3&l)<<4,u=1;break;case 1:a[s++]=n[i|l>>4],i=(15&l)<<2,u=2;break;case 2:a[s++]=n[i|l>>6],a[s++]=n[63&l],u=0;}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0);}return u&&(a[s++]=n[i],a[s++]=61,1===u&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s));};var o="invalid encoding";t.decode=function(e,t,r){for(var n,a=r,s=0,u=0;u<e.length;){var l=e.charCodeAt(u++);if(61===l&&s>1)break;if(void 0===(l=i[l]))throw Error(o);switch(s){case 0:n=l,s=1;break;case 1:t[r++]=n<<2|(48&l)>>4,n=l,s=2;break;case 2:t[r++]=(15&n)<<4|(60&l)>>2,n=l,s=3;break;case 3:t[r++]=(3&n)<<6|l,s=0;}}if(1===s)throw Error(o);return r-a;},t.test=function(e){return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e);};}),qs=ye(function(e,t){function r(){this._listeners={};}t.exports=r,r.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this;},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this;},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r);}return this;};}),eu=ye(function(e,t){function r(e){return(typeof Float32Array==="undefined"?"undefined":_typeof(Float32Array))<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3];}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0];}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0];}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0];}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a;}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n);}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608);}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,o),e.readFloatBE=r.bind(null,a);}(),(typeof Float64Array==="undefined"?"undefined":_typeof(Float64Array))<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7];}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0];}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0];}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0];}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a;}():function(){function t(e,t,r,n,i,o){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=n*Math.pow(2,-u))>>>0,i,o+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,i,o+r);}}}function r(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,u=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496);}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,o,0,4),e.readDoubleBE=r.bind(null,a,4,0);}(),e;}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24;}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e;}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0;}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;}t.exports=r(r);}),tu=ye(function(exports,module){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod;}catch(e){}return null;}module.exports=inquire;}),nu=ye(function(e){var t=e;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t;},t.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)(n=e[t++])<128?o[a++]=n:n>191&&n<224?o[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a));},t.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o;};}),iu=ye(function(e,t){t.exports=function(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s;};};}),su=ye(function(e,t){t.exports=n;var r=er();function n(e,t){this.lo=e>>>0,this.hi=t>>>0;}var i=n.zero=new n(0,0);i.toNumber=function(){return 0;},i.zzEncode=i.zzDecode=function(){return this;},i.length=function(){return 1;};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o);},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(r.isString(e)){if(!r.Long)return n.fromNumber(parseInt(e,10));e=r.Long.fromString(e);}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i;},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r);}return this.lo+4294967296*this.hi;},n.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e};};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===o?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0);},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24);},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this;},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this;},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10;};}),er=ye(function(e){var t=e;function r(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(void 0===e[n[i]]||!r)&&(e[n[i]]=t[n[i]]);return e;}function n(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function get(){return e;}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&r(this,n);}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function get(){return e;},set:void 0,enumerable:!1,configurable:!0},toString:{value:function value(){return this.name+": "+this.message;},writable:!0,enumerable:!1,configurable:!0}}),t;}t.asPromise=Us(),t.base64=Hs(),t.EventEmitter=qs(),t["float"]=eu(),t.inquire=tu(),t.utf8=nu(),t.pool=iu(),t.LongBits=su(),t.isNode=!!((typeof global==="undefined"?"undefined":_typeof(global))<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),t.global=t.isNode&&global||(typeof window==="undefined"?"undefined":_typeof(window))<"u"&&window||(typeof self==="undefined"?"undefined":_typeof(self))<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;},t.isString=function(e){return"string"==typeof e||e instanceof String;},t.isObject=function(e){return e&&"object"==_typeof(e);},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=_typeof(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0);},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null;}catch(_unused2){return null;}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):(typeof Uint8Array==="undefined"?"undefined":_typeof(Uint8Array))>"u"?e:new Uint8Array(e);},t.Array=(typeof Uint8Array==="undefined"?"undefined":_typeof(Uint8Array))<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash;},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r);},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1);},t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r];};},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]];};},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r);},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t);}):t._Buffer_from=t._Buffer_allocUnsafe=null;};}),hi=ye(function(e,t){t.exports=h;var r,n=er(),i=n.LongBits,o=n.base64,a=n.utf8;function s(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r;}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states;}function h(){this.len=0,this.head=new s(u,0,0),this.tail=this.head,this.states=null;}var c=function c(){return n.Buffer?function(){return(h.create=function(){return new r();})();}:function(){return new h();};};function d(e,t,r){t[r]=255&e;}function f(e,t){this.len=e,this.next=void 0,this.val=t;}function p(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo;}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24;}h.create=c(),h.alloc=function(e){return new n.Array(e);},n.Array!==Array&&(h.alloc=n.pool(h.alloc,n.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new s(e,t,r),this.len+=t,this;},f.prototype=Object.create(s.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e;},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this;},h.prototype.int32=function(e){return e<0?this._push(p,10,i.fromNumber(e)):this.uint32(e);},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0);},h.prototype.uint64=function(e){var t=i.from(e);return this._push(p,t.length(),t);},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(p,t.length(),t);},h.prototype.bool=function(e){return this._push(d,1,e?1:0);},h.prototype.fixed32=function(e){return this._push(y,4,e>>>0);},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi);},h.prototype.sfixed64=h.prototype.fixed64,h.prototype["float"]=function(e){return this._push(n["float"].writeFloatLE,4,e);},h.prototype["double"]=function(e){return this._push(n["float"].writeDoubleLE,8,e);};var g=n.Array.prototype.set?function(e,t,r){t.set(e,r);}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n];};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(n.isString(e)){var r=h.alloc(t=o.length(e));o.decode(e,r,0),e=r;}return this.uint32(t)._push(g,t,e);},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(d,1,0);},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(u,0,0),this.len=0,this;},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(u,0,0),this.len=0),this;},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this;},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t;},h._configure=function(e){r=e,h.create=c(),r._configure();};}),bu=ye(function(e,t){t.exports=i;var r=hi();(i.prototype=Object.create(r.prototype)).constructor=i;var n=er();function i(){r.call(this);}function o(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r);}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r);}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++];};},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this;},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this;},i._configure();}),gi=ye(function(e,t){t.exports=s;var r,n=er(),i=n.LongBits,o=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len);}function s(e){this.buf=e,this.pos=0,this.len=e.length;}var u,l=(typeof Uint8Array==="undefined"?"undefined":_typeof(Uint8Array))<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer");}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer");},h=function h(){return n.Buffer?function(e){return(s.create=function(e){return n.Buffer.isBuffer(e)?new r(e):l(e);})(e);}:l;};function c(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e;}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e;}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e;}throw Error("invalid varint encoding");}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0;}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4));}s.create=h(),s.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,s.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u;}),s.prototype.int32=function(){return 0|this.uint32();},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0;},s.prototype.bool=function(){return 0!==this.uint32();},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4);},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4);},s.prototype["float"]=function(){if(this.pos+4>this.len)throw a(this,4);var e=n["float"].readFloatLE(this.buf,this.pos);return this.pos+=4,e;},s.prototype["double"]=function(){if(this.pos+8>this.len)throw a(this,4);var e=n["float"].readDoubleLE(this.buf,this.pos);return this.pos+=8,e;},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r);},s.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length);},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e;}else do{if(this.pos>=this.len)throw a(this);}while(128&this.buf[this.pos++]);return this;},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos);}return this;},s._configure=function(e){r=e,s.create=h(),r._configure();var t=n.Long?"toLong":"toNumber";n.merge(s.prototype,{int64:function int64(){return c.call(this)[t](!1);},uint64:function uint64(){return c.call(this)[t](!0);},sint64:function sint64(){return c.call(this).zzDecode()[t](!1);},fixed64:function fixed64(){return f.call(this)[t](!0);},sfixed64:function sfixed64(){return f.call(this)[t](!1);}});};}),Iu=ye(function(e,t){t.exports=i;var r=gi();(i.prototype=Object.create(r.prototype)).constructor=i;var n=er();function i(e){r.call(this,e);}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice);},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len));},i._configure();}),Au=ye(function(e,t){t.exports=n;var r=er();function n(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n;}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,n,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,i,o);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof i))try{r=i[s.responseDelimited?"decodeDelimited":"decode"](r);}catch(e){return s.emit("error",e,t),a(e);}return s.emit("data",r,t),a(null,r);}s.end(!0);});}catch(e){return s.emit("error",e,t),void setTimeout(function(){a(e);},0);}else setTimeout(function(){a(Error("already ended"));},0);},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this;};}),Pu=ye(function(e){e.Service=Au();}),Lu=ye(function(e,t){t.exports={};}),$u=ye(function(e){var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader);}t.build="minimal",t.Writer=hi(),t.BufferWriter=bu(),t.Reader=gi(),t.BufferReader=Iu(),t.util=er(),t.rpc=Pu(),t.roots=Lu(),t.configure=r,r();}),ku=ye(function(e,t){t.exports=$u();}),Ur=ye(function(e,t){var r=ku(),n=r.Reader,i=r.Writer,o=r.util,a=r.roots["default"]||(r.roots["default"]={});a.onnx=function(){var e,t,s={};return s.Version=(e={},(t=Object.create(e))[e[0]="_START_VERSION"]=0,t[e[1]="IR_VERSION_2017_10_10"]=1,t[e[2]="IR_VERSION_2017_10_30"]=2,t[e[3]="IR_VERSION_2017_11_3"]=3,t[e[4]="IR_VERSION_2019_1_22"]=4,t[e[5]="IR_VERSION_2019_3_18"]=5,t[e[6]="IR_VERSION_2019_9_19"]=6,t[e[7]="IR_VERSION_2020_5_8"]=7,t[e[8]="IR_VERSION_2021_7_30"]=8,t[e[9]="IR_VERSION"]=9,t),s.AttributeProto=function(){function e(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.name="",e.prototype.refAttrName="",e.prototype.docString="",e.prototype.type=0,e.prototype.f=0,e.prototype.i=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.s=o.newBuffer([]),e.prototype.t=null,e.prototype.g=null,e.prototype.sparseTensor=null,e.prototype.tp=null,e.prototype.floats=o.emptyArray,e.prototype.ints=o.emptyArray,e.prototype.strings=o.emptyArray,e.prototype.tensors=o.emptyArray,e.prototype.graphs=o.emptyArray,e.prototype.sparseTensors=o.emptyArray,e.prototype.typeProtos=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.f&&Object.hasOwnProperty.call(e,"f")&&t.uint32(21)["float"](e.f),null!=e.i&&Object.hasOwnProperty.call(e,"i")&&t.uint32(24).int64(e.i),null!=e.s&&Object.hasOwnProperty.call(e,"s")&&t.uint32(34).bytes(e.s),null!=e.t&&Object.hasOwnProperty.call(e,"t")&&a.onnx.TensorProto.encode(e.t,t.uint32(42).fork()).ldelim(),null!=e.g&&Object.hasOwnProperty.call(e,"g")&&a.onnx.GraphProto.encode(e.g,t.uint32(50).fork()).ldelim(),null!=e.floats&&e.floats.length){t.uint32(58).fork();for(var r=0;r<e.floats.length;++r)t["float"](e.floats[r]);t.ldelim();}if(null!=e.ints&&e.ints.length){t.uint32(66).fork();for(r=0;r<e.ints.length;++r)t.int64(e.ints[r]);t.ldelim();}if(null!=e.strings&&e.strings.length)for(r=0;r<e.strings.length;++r)t.uint32(74).bytes(e.strings[r]);if(null!=e.tensors&&e.tensors.length)for(r=0;r<e.tensors.length;++r)a.onnx.TensorProto.encode(e.tensors[r],t.uint32(82).fork()).ldelim();if(null!=e.graphs&&e.graphs.length)for(r=0;r<e.graphs.length;++r)a.onnx.GraphProto.encode(e.graphs[r],t.uint32(90).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(106).string(e.docString),null!=e.tp&&Object.hasOwnProperty.call(e,"tp")&&a.onnx.TypeProto.encode(e.tp,t.uint32(114).fork()).ldelim(),null!=e.typeProtos&&e.typeProtos.length)for(r=0;r<e.typeProtos.length;++r)a.onnx.TypeProto.encode(e.typeProtos[r],t.uint32(122).fork()).ldelim();if(null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(160).int32(e.type),null!=e.refAttrName&&Object.hasOwnProperty.call(e,"refAttrName")&&t.uint32(170).string(e.refAttrName),null!=e.sparseTensor&&Object.hasOwnProperty.call(e,"sparseTensor")&&a.onnx.SparseTensorProto.encode(e.sparseTensor,t.uint32(178).fork()).ldelim(),null!=e.sparseTensors&&e.sparseTensors.length)for(r=0;r<e.sparseTensors.length;++r)a.onnx.SparseTensorProto.encode(e.sparseTensors[r],t.uint32(186).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.AttributeProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.name=e.string();break;case 21:i.refAttrName=e.string();break;case 13:i.docString=e.string();break;case 20:i.type=e.int32();break;case 2:i.f=e["float"]();break;case 3:i.i=e.int64();break;case 4:i.s=e.bytes();break;case 5:i.t=a.onnx.TensorProto.decode(e,e.uint32());break;case 6:i.g=a.onnx.GraphProto.decode(e,e.uint32());break;case 22:i.sparseTensor=a.onnx.SparseTensorProto.decode(e,e.uint32());break;case 14:i.tp=a.onnx.TypeProto.decode(e,e.uint32());break;case 7:if(i.floats&&i.floats.length||(i.floats=[]),2==(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)i.floats.push(e["float"]());else i.floats.push(e["float"]());break;case 8:if(i.ints&&i.ints.length||(i.ints=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)i.ints.push(e.int64());else i.ints.push(e.int64());break;case 9:i.strings&&i.strings.length||(i.strings=[]),i.strings.push(e.bytes());break;case 10:i.tensors&&i.tensors.length||(i.tensors=[]),i.tensors.push(a.onnx.TensorProto.decode(e,e.uint32()));break;case 11:i.graphs&&i.graphs.length||(i.graphs=[]),i.graphs.push(a.onnx.GraphProto.decode(e,e.uint32()));break;case 23:i.sparseTensors&&i.sparseTensors.length||(i.sparseTensors=[]),i.sparseTensors.push(a.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 15:i.typeProtos&&i.typeProtos.length||(i.typeProtos=[]),i.typeProtos.push(a.onnx.TypeProto.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!o.isString(e.name))return"name: string expected";if(null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&!o.isString(e.refAttrName))return"refAttrName: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!o.isString(e.docString))return"docString: string expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(null!=e.f&&e.hasOwnProperty("f")&&"number"!=typeof e.f)return"f: number expected";if(null!=e.i&&e.hasOwnProperty("i")&&!o.isInteger(e.i)&&!(e.i&&o.isInteger(e.i.low)&&o.isInteger(e.i.high)))return"i: integer|Long expected";if(null!=e.s&&e.hasOwnProperty("s")&&!(e.s&&"number"==typeof e.s.length||o.isString(e.s)))return"s: buffer expected";if(null!=e.t&&e.hasOwnProperty("t")&&(r=a.onnx.TensorProto.verify(e.t)))return"t."+r;if(null!=e.g&&e.hasOwnProperty("g")&&(r=a.onnx.GraphProto.verify(e.g)))return"g."+r;if(null!=e.sparseTensor&&e.hasOwnProperty("sparseTensor")&&(r=a.onnx.SparseTensorProto.verify(e.sparseTensor)))return"sparseTensor."+r;if(null!=e.tp&&e.hasOwnProperty("tp")&&(r=a.onnx.TypeProto.verify(e.tp)))return"tp."+r;if(null!=e.floats&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var t=0;t<e.floats.length;++t)if("number"!=typeof e.floats[t])return"floats: number[] expected";}if(null!=e.ints&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(t=0;t<e.ints.length;++t)if(!(o.isInteger(e.ints[t])||e.ints[t]&&o.isInteger(e.ints[t].low)&&o.isInteger(e.ints[t].high)))return"ints: integer|Long[] expected";}if(null!=e.strings&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(t=0;t<e.strings.length;++t)if(!(e.strings[t]&&"number"==typeof e.strings[t].length||o.isString(e.strings[t])))return"strings: buffer[] expected";}if(null!=e.tensors&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(t=0;t<e.tensors.length;++t){if(r=a.onnx.TensorProto.verify(e.tensors[t]))return"tensors."+r;}}if(null!=e.graphs&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(t=0;t<e.graphs.length;++t){if(r=a.onnx.GraphProto.verify(e.graphs[t]))return"graphs."+r;}}if(null!=e.sparseTensors&&e.hasOwnProperty("sparseTensors")){if(!Array.isArray(e.sparseTensors))return"sparseTensors: array expected";for(t=0;t<e.sparseTensors.length;++t){if(r=a.onnx.SparseTensorProto.verify(e.sparseTensors[t]))return"sparseTensors."+r;}}if(null!=e.typeProtos&&e.hasOwnProperty("typeProtos")){if(!Array.isArray(e.typeProtos))return"typeProtos: array expected";for(t=0;t<e.typeProtos.length;++t){var r;if(r=a.onnx.TypeProto.verify(e.typeProtos[t]))return"typeProtos."+r;}}return null;},e.fromObject=function(e){if(e instanceof a.onnx.AttributeProto)return e;var t=new a.onnx.AttributeProto();switch(null!=e.name&&(t.name=String(e.name)),null!=e.refAttrName&&(t.refAttrName=String(e.refAttrName)),null!=e.docString&&(t.docString=String(e.docString)),e.type){default:if("number"==typeof e.type){t.type=e.type;break;}break;case"UNDEFINED":case 0:t.type=0;break;case"FLOAT":case 1:t.type=1;break;case"INT":case 2:t.type=2;break;case"STRING":case 3:t.type=3;break;case"TENSOR":case 4:t.type=4;break;case"GRAPH":case 5:t.type=5;break;case"SPARSE_TENSOR":case 11:t.type=11;break;case"TYPE_PROTO":case 13:t.type=13;break;case"FLOATS":case 6:t.type=6;break;case"INTS":case 7:t.type=7;break;case"STRINGS":case 8:t.type=8;break;case"TENSORS":case 9:t.type=9;break;case"GRAPHS":case 10:t.type=10;break;case"SPARSE_TENSORS":case 12:t.type=12;break;case"TYPE_PROTOS":case 14:t.type=14;}if(null!=e.f&&(t.f=Number(e.f)),null!=e.i&&(o.Long?(t.i=o.Long.fromValue(e.i)).unsigned=!1:"string"==typeof e.i?t.i=parseInt(e.i,10):"number"==typeof e.i?t.i=e.i:"object"==_typeof(e.i)&&(t.i=new o.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),null!=e.s&&("string"==typeof e.s?o.base64.decode(e.s,t.s=o.newBuffer(o.base64.length(e.s)),0):e.s.length>=0&&(t.s=e.s)),null!=e.t){if("object"!=_typeof(e.t))throw TypeError(".onnx.AttributeProto.t: object expected");t.t=a.onnx.TensorProto.fromObject(e.t);}if(null!=e.g){if("object"!=_typeof(e.g))throw TypeError(".onnx.AttributeProto.g: object expected");t.g=a.onnx.GraphProto.fromObject(e.g);}if(null!=e.sparseTensor){if("object"!=_typeof(e.sparseTensor))throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");t.sparseTensor=a.onnx.SparseTensorProto.fromObject(e.sparseTensor);}if(null!=e.tp){if("object"!=_typeof(e.tp))throw TypeError(".onnx.AttributeProto.tp: object expected");t.tp=a.onnx.TypeProto.fromObject(e.tp);}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");t.floats=[];for(var r=0;r<e.floats.length;++r)t.floats[r]=Number(e.floats[r]);}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");t.ints=[];for(r=0;r<e.ints.length;++r)o.Long?(t.ints[r]=o.Long.fromValue(e.ints[r])).unsigned=!1:"string"==typeof e.ints[r]?t.ints[r]=parseInt(e.ints[r],10):"number"==typeof e.ints[r]?t.ints[r]=e.ints[r]:"object"==_typeof(e.ints[r])&&(t.ints[r]=new o.LongBits(e.ints[r].low>>>0,e.ints[r].high>>>0).toNumber());}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");t.strings=[];for(r=0;r<e.strings.length;++r)"string"==typeof e.strings[r]?o.base64.decode(e.strings[r],t.strings[r]=o.newBuffer(o.base64.length(e.strings[r])),0):e.strings[r].length>=0&&(t.strings[r]=e.strings[r]);}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");t.tensors=[];for(r=0;r<e.tensors.length;++r){if("object"!=_typeof(e.tensors[r]))throw TypeError(".onnx.AttributeProto.tensors: object expected");t.tensors[r]=a.onnx.TensorProto.fromObject(e.tensors[r]);}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");t.graphs=[];for(r=0;r<e.graphs.length;++r){if("object"!=_typeof(e.graphs[r]))throw TypeError(".onnx.AttributeProto.graphs: object expected");t.graphs[r]=a.onnx.GraphProto.fromObject(e.graphs[r]);}}if(e.sparseTensors){if(!Array.isArray(e.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");t.sparseTensors=[];for(r=0;r<e.sparseTensors.length;++r){if("object"!=_typeof(e.sparseTensors[r]))throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");t.sparseTensors[r]=a.onnx.SparseTensorProto.fromObject(e.sparseTensors[r]);}}if(e.typeProtos){if(!Array.isArray(e.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");t.typeProtos=[];for(r=0;r<e.typeProtos.length;++r){if("object"!=_typeof(e.typeProtos[r]))throw TypeError(".onnx.AttributeProto.typeProtos: object expected");t.typeProtos[r]=a.onnx.TypeProto.fromObject(e.typeProtos[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.floats=[],r.ints=[],r.strings=[],r.tensors=[],r.graphs=[],r.typeProtos=[],r.sparseTensors=[]),t.defaults){if(r.name="",r.f=0,o.Long){var n=new o.Long(0,0,!1);r.i=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.i=t.longs===String?"0":0;t.bytes===String?r.s="":(r.s=[],t.bytes!==Array&&(r.s=o.newBuffer(r.s))),r.t=null,r.g=null,r.docString="",r.tp=null,r.type=t.enums===String?"UNDEFINED":0,r.refAttrName="",r.sparseTensor=null;}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.f&&e.hasOwnProperty("f")&&(r.f=t.json&&!isFinite(e.f)?String(e.f):e.f),null!=e.i&&e.hasOwnProperty("i")&&("number"==typeof e.i?r.i=t.longs===String?String(e.i):e.i:r.i=t.longs===String?o.Long.prototype.toString.call(e.i):t.longs===Number?new o.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),null!=e.s&&e.hasOwnProperty("s")&&(r.s=t.bytes===String?o.base64.encode(e.s,0,e.s.length):t.bytes===Array?Array.prototype.slice.call(e.s):e.s),null!=e.t&&e.hasOwnProperty("t")&&(r.t=a.onnx.TensorProto.toObject(e.t,t)),null!=e.g&&e.hasOwnProperty("g")&&(r.g=a.onnx.GraphProto.toObject(e.g,t)),e.floats&&e.floats.length){r.floats=[];for(var i=0;i<e.floats.length;++i)r.floats[i]=t.json&&!isFinite(e.floats[i])?String(e.floats[i]):e.floats[i];}if(e.ints&&e.ints.length){r.ints=[];for(i=0;i<e.ints.length;++i)"number"==typeof e.ints[i]?r.ints[i]=t.longs===String?String(e.ints[i]):e.ints[i]:r.ints[i]=t.longs===String?o.Long.prototype.toString.call(e.ints[i]):t.longs===Number?new o.LongBits(e.ints[i].low>>>0,e.ints[i].high>>>0).toNumber():e.ints[i];}if(e.strings&&e.strings.length){r.strings=[];for(i=0;i<e.strings.length;++i)r.strings[i]=t.bytes===String?o.base64.encode(e.strings[i],0,e.strings[i].length):t.bytes===Array?Array.prototype.slice.call(e.strings[i]):e.strings[i];}if(e.tensors&&e.tensors.length){r.tensors=[];for(i=0;i<e.tensors.length;++i)r.tensors[i]=a.onnx.TensorProto.toObject(e.tensors[i],t);}if(e.graphs&&e.graphs.length){r.graphs=[];for(i=0;i<e.graphs.length;++i)r.graphs[i]=a.onnx.GraphProto.toObject(e.graphs[i],t);}if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.tp&&e.hasOwnProperty("tp")&&(r.tp=a.onnx.TypeProto.toObject(e.tp,t)),e.typeProtos&&e.typeProtos.length){r.typeProtos=[];for(i=0;i<e.typeProtos.length;++i)r.typeProtos[i]=a.onnx.TypeProto.toObject(e.typeProtos[i],t);}if(null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?void 0===a.onnx.AttributeProto.AttributeType[e.type]?e.type:a.onnx.AttributeProto.AttributeType[e.type]:e.type),null!=e.refAttrName&&e.hasOwnProperty("refAttrName")&&(r.refAttrName=e.refAttrName),null!=e.sparseTensor&&e.hasOwnProperty("sparseTensor")&&(r.sparseTensor=a.onnx.SparseTensorProto.toObject(e.sparseTensor,t)),e.sparseTensors&&e.sparseTensors.length){r.sparseTensors=[];for(i=0;i<e.sparseTensors.length;++i)r.sparseTensors[i]=a.onnx.SparseTensorProto.toObject(e.sparseTensors[i],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.AttributeProto";},e.AttributeType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="INT"]=2,t[e[3]="STRING"]=3,t[e[4]="TENSOR"]=4,t[e[5]="GRAPH"]=5,t[e[11]="SPARSE_TENSOR"]=11,t[e[13]="TYPE_PROTO"]=13,t[e[6]="FLOATS"]=6,t[e[7]="INTS"]=7,t[e[8]="STRINGS"]=8,t[e[9]="TENSORS"]=9,t[e[10]="GRAPHS"]=10,t[e[12]="SPARSE_TENSORS"]=12,t[e[14]="TYPE_PROTOS"]=14,t;}(),e;}(),s.ValueInfoProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.name="",e.prototype.type=null,e.prototype.docString="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&a.onnx.TypeProto.encode(e.type,t.uint32(18).fork()).ldelim(),null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(26).string(e.docString),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.ValueInfoProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.name=e.string();break;case 2:i.type=a.onnx.TypeProto.decode(e,e.uint32());break;case 3:i.docString=e.string();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!o.isString(e.name))return"name: string expected";if(null!=e.type&&e.hasOwnProperty("type")){var t=a.onnx.TypeProto.verify(e.type);if(t)return"type."+t;}return null!=e.docString&&e.hasOwnProperty("docString")&&!o.isString(e.docString)?"docString: string expected":null;},e.fromObject=function(e){if(e instanceof a.onnx.ValueInfoProto)return e;var t=new a.onnx.ValueInfoProto();if(null!=e.name&&(t.name=String(e.name)),null!=e.type){if("object"!=_typeof(e.type))throw TypeError(".onnx.ValueInfoProto.type: object expected");t.type=a.onnx.TypeProto.fromObject(e.type);}return null!=e.docString&&(t.docString=String(e.docString)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.name="",r.type=null,r.docString=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.type&&e.hasOwnProperty("type")&&(r.type=a.onnx.TypeProto.toObject(e.type,t)),null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.ValueInfoProto";},e;}(),s.NodeProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.input=o.emptyArray,e.prototype.output=o.emptyArray,e.prototype.name="",e.prototype.opType="",e.prototype.domain="",e.prototype.attribute=o.emptyArray,e.prototype.docString="",e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.input&&e.input.length)for(var r=0;r<e.input.length;++r)t.uint32(10).string(e.input[r]);if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)t.uint32(18).string(e.output[r]);if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(26).string(e.name),null!=e.opType&&Object.hasOwnProperty.call(e,"opType")&&t.uint32(34).string(e.opType),null!=e.attribute&&e.attribute.length)for(r=0;r<e.attribute.length;++r)a.onnx.AttributeProto.encode(e.attribute[r],t.uint32(42).fork()).ldelim();return null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(58).string(e.domain),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.NodeProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.input&&i.input.length||(i.input=[]),i.input.push(e.string());break;case 2:i.output&&i.output.length||(i.output=[]),i.output.push(e.string());break;case 3:i.name=e.string();break;case 4:i.opType=e.string();break;case 7:i.domain=e.string();break;case 5:i.attribute&&i.attribute.length||(i.attribute=[]),i.attribute.push(a.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:i.docString=e.string();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!o.isString(e.input[t]))return"input: string[] expected";}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!o.isString(e.output[t]))return"output: string[] expected";}if(null!=e.name&&e.hasOwnProperty("name")&&!o.isString(e.name))return"name: string expected";if(null!=e.opType&&e.hasOwnProperty("opType")&&!o.isString(e.opType))return"opType: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!o.isString(e.domain))return"domain: string expected";if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t){var r=a.onnx.AttributeProto.verify(e.attribute[t]);if(r)return"attribute."+r;}}return null!=e.docString&&e.hasOwnProperty("docString")&&!o.isString(e.docString)?"docString: string expected":null;},e.fromObject=function(e){if(e instanceof a.onnx.NodeProto)return e;var t=new a.onnx.NodeProto();if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");t.input=[];for(var r=0;r<e.input.length;++r)t.input[r]=String(e.input[r]);}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");t.output=[];for(r=0;r<e.output.length;++r)t.output[r]=String(e.output[r]);}if(null!=e.name&&(t.name=String(e.name)),null!=e.opType&&(t.opType=String(e.opType)),null!=e.domain&&(t.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");t.attribute=[];for(r=0;r<e.attribute.length;++r){if("object"!=_typeof(e.attribute[r]))throw TypeError(".onnx.NodeProto.attribute: object expected");t.attribute[r]=a.onnx.AttributeProto.fromObject(e.attribute[r]);}}return null!=e.docString&&(t.docString=String(e.docString)),t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.input=[],r.output=[],r.attribute=[]),t.defaults&&(r.name="",r.opType="",r.docString="",r.domain=""),e.input&&e.input.length){r.input=[];for(var n=0;n<e.input.length;++n)r.input[n]=e.input[n];}if(e.output&&e.output.length){r.output=[];for(n=0;n<e.output.length;++n)r.output[n]=e.output[n];}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.opType&&e.hasOwnProperty("opType")&&(r.opType=e.opType),e.attribute&&e.attribute.length){r.attribute=[];for(n=0;n<e.attribute.length;++n)r.attribute[n]=a.onnx.AttributeProto.toObject(e.attribute[n],t);}return null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.NodeProto";},e;}(),s.TrainingInfoProto=function(){function e(e){if(this.initializationBinding=[],this.updateBinding=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.initialization=null,e.prototype.algorithm=null,e.prototype.initializationBinding=o.emptyArray,e.prototype.updateBinding=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.initialization&&Object.hasOwnProperty.call(e,"initialization")&&a.onnx.GraphProto.encode(e.initialization,t.uint32(10).fork()).ldelim(),null!=e.algorithm&&Object.hasOwnProperty.call(e,"algorithm")&&a.onnx.GraphProto.encode(e.algorithm,t.uint32(18).fork()).ldelim(),null!=e.initializationBinding&&e.initializationBinding.length)for(var r=0;r<e.initializationBinding.length;++r)a.onnx.StringStringEntryProto.encode(e.initializationBinding[r],t.uint32(26).fork()).ldelim();if(null!=e.updateBinding&&e.updateBinding.length)for(r=0;r<e.updateBinding.length;++r)a.onnx.StringStringEntryProto.encode(e.updateBinding[r],t.uint32(34).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TrainingInfoProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.initialization=a.onnx.GraphProto.decode(e,e.uint32());break;case 2:i.algorithm=a.onnx.GraphProto.decode(e,e.uint32());break;case 3:i.initializationBinding&&i.initializationBinding.length||(i.initializationBinding=[]),i.initializationBinding.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 4:i.updateBinding&&i.updateBinding.length||(i.updateBinding=[]),i.updateBinding.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.initialization&&e.hasOwnProperty("initialization")&&(r=a.onnx.GraphProto.verify(e.initialization)))return"initialization."+r;if(null!=e.algorithm&&e.hasOwnProperty("algorithm")&&(r=a.onnx.GraphProto.verify(e.algorithm)))return"algorithm."+r;if(null!=e.initializationBinding&&e.hasOwnProperty("initializationBinding")){if(!Array.isArray(e.initializationBinding))return"initializationBinding: array expected";for(var t=0;t<e.initializationBinding.length;++t){if(r=a.onnx.StringStringEntryProto.verify(e.initializationBinding[t]))return"initializationBinding."+r;}}if(null!=e.updateBinding&&e.hasOwnProperty("updateBinding")){if(!Array.isArray(e.updateBinding))return"updateBinding: array expected";for(t=0;t<e.updateBinding.length;++t){var r;if(r=a.onnx.StringStringEntryProto.verify(e.updateBinding[t]))return"updateBinding."+r;}}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TrainingInfoProto)return e;var t=new a.onnx.TrainingInfoProto();if(null!=e.initialization){if("object"!=_typeof(e.initialization))throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");t.initialization=a.onnx.GraphProto.fromObject(e.initialization);}if(null!=e.algorithm){if("object"!=_typeof(e.algorithm))throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");t.algorithm=a.onnx.GraphProto.fromObject(e.algorithm);}if(e.initializationBinding){if(!Array.isArray(e.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");t.initializationBinding=[];for(var r=0;r<e.initializationBinding.length;++r){if("object"!=_typeof(e.initializationBinding[r]))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");t.initializationBinding[r]=a.onnx.StringStringEntryProto.fromObject(e.initializationBinding[r]);}}if(e.updateBinding){if(!Array.isArray(e.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");t.updateBinding=[];for(r=0;r<e.updateBinding.length;++r){if("object"!=_typeof(e.updateBinding[r]))throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");t.updateBinding[r]=a.onnx.StringStringEntryProto.fromObject(e.updateBinding[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.initializationBinding=[],r.updateBinding=[]),t.defaults&&(r.initialization=null,r.algorithm=null),null!=e.initialization&&e.hasOwnProperty("initialization")&&(r.initialization=a.onnx.GraphProto.toObject(e.initialization,t)),null!=e.algorithm&&e.hasOwnProperty("algorithm")&&(r.algorithm=a.onnx.GraphProto.toObject(e.algorithm,t)),e.initializationBinding&&e.initializationBinding.length){r.initializationBinding=[];for(var n=0;n<e.initializationBinding.length;++n)r.initializationBinding[n]=a.onnx.StringStringEntryProto.toObject(e.initializationBinding[n],t);}if(e.updateBinding&&e.updateBinding.length){r.updateBinding=[];for(n=0;n<e.updateBinding.length;++n)r.updateBinding[n]=a.onnx.StringStringEntryProto.toObject(e.updateBinding[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TrainingInfoProto";},e;}(),s.ModelProto=function(){function e(e){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.irVersion=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.opsetImport=o.emptyArray,e.prototype.producerName="",e.prototype.producerVersion="",e.prototype.domain="",e.prototype.modelVersion=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.docString="",e.prototype.graph=null,e.prototype.metadataProps=o.emptyArray,e.prototype.trainingInfo=o.emptyArray,e.prototype.functions=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.irVersion&&Object.hasOwnProperty.call(e,"irVersion")&&t.uint32(8).int64(e.irVersion),null!=e.producerName&&Object.hasOwnProperty.call(e,"producerName")&&t.uint32(18).string(e.producerName),null!=e.producerVersion&&Object.hasOwnProperty.call(e,"producerVersion")&&t.uint32(26).string(e.producerVersion),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(34).string(e.domain),null!=e.modelVersion&&Object.hasOwnProperty.call(e,"modelVersion")&&t.uint32(40).int64(e.modelVersion),null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),null!=e.graph&&Object.hasOwnProperty.call(e,"graph")&&a.onnx.GraphProto.encode(e.graph,t.uint32(58).fork()).ldelim(),null!=e.opsetImport&&e.opsetImport.length)for(var r=0;r<e.opsetImport.length;++r)a.onnx.OperatorSetIdProto.encode(e.opsetImport[r],t.uint32(66).fork()).ldelim();if(null!=e.metadataProps&&e.metadataProps.length)for(r=0;r<e.metadataProps.length;++r)a.onnx.StringStringEntryProto.encode(e.metadataProps[r],t.uint32(114).fork()).ldelim();if(null!=e.trainingInfo&&e.trainingInfo.length)for(r=0;r<e.trainingInfo.length;++r)a.onnx.TrainingInfoProto.encode(e.trainingInfo[r],t.uint32(162).fork()).ldelim();if(null!=e.functions&&e.functions.length)for(r=0;r<e.functions.length;++r)a.onnx.FunctionProto.encode(e.functions[r],t.uint32(202).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.ModelProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.irVersion=e.int64();break;case 8:i.opsetImport&&i.opsetImport.length||(i.opsetImport=[]),i.opsetImport.push(a.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:i.producerName=e.string();break;case 3:i.producerVersion=e.string();break;case 4:i.domain=e.string();break;case 5:i.modelVersion=e.int64();break;case 6:i.docString=e.string();break;case 7:i.graph=a.onnx.GraphProto.decode(e,e.uint32());break;case 14:i.metadataProps&&i.metadataProps.length||(i.metadataProps=[]),i.metadataProps.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 20:i.trainingInfo&&i.trainingInfo.length||(i.trainingInfo=[]),i.trainingInfo.push(a.onnx.TrainingInfoProto.decode(e,e.uint32()));break;case 25:i.functions&&i.functions.length||(i.functions=[]),i.functions.push(a.onnx.FunctionProto.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&!o.isInteger(e.irVersion)&&!(e.irVersion&&o.isInteger(e.irVersion.low)&&o.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var t=0;t<e.opsetImport.length;++t){if(r=a.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+r;}}if(null!=e.producerName&&e.hasOwnProperty("producerName")&&!o.isString(e.producerName))return"producerName: string expected";if(null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&!o.isString(e.producerVersion))return"producerVersion: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!o.isString(e.domain))return"domain: string expected";if(null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&!o.isInteger(e.modelVersion)&&!(e.modelVersion&&o.isInteger(e.modelVersion.low)&&o.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!o.isString(e.docString))return"docString: string expected";if(null!=e.graph&&e.hasOwnProperty("graph")&&(r=a.onnx.GraphProto.verify(e.graph)))return"graph."+r;if(null!=e.metadataProps&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(t=0;t<e.metadataProps.length;++t){if(r=a.onnx.StringStringEntryProto.verify(e.metadataProps[t]))return"metadataProps."+r;}}if(null!=e.trainingInfo&&e.hasOwnProperty("trainingInfo")){if(!Array.isArray(e.trainingInfo))return"trainingInfo: array expected";for(t=0;t<e.trainingInfo.length;++t){if(r=a.onnx.TrainingInfoProto.verify(e.trainingInfo[t]))return"trainingInfo."+r;}}if(null!=e.functions&&e.hasOwnProperty("functions")){if(!Array.isArray(e.functions))return"functions: array expected";for(t=0;t<e.functions.length;++t){var r;if(r=a.onnx.FunctionProto.verify(e.functions[t]))return"functions."+r;}}return null;},e.fromObject=function(e){if(e instanceof a.onnx.ModelProto)return e;var t=new a.onnx.ModelProto();if(null!=e.irVersion&&(o.Long?(t.irVersion=o.Long.fromValue(e.irVersion)).unsigned=!1:"string"==typeof e.irVersion?t.irVersion=parseInt(e.irVersion,10):"number"==typeof e.irVersion?t.irVersion=e.irVersion:"object"==_typeof(e.irVersion)&&(t.irVersion=new o.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");t.opsetImport=[];for(var r=0;r<e.opsetImport.length;++r){if("object"!=_typeof(e.opsetImport[r]))throw TypeError(".onnx.ModelProto.opsetImport: object expected");t.opsetImport[r]=a.onnx.OperatorSetIdProto.fromObject(e.opsetImport[r]);}}if(null!=e.producerName&&(t.producerName=String(e.producerName)),null!=e.producerVersion&&(t.producerVersion=String(e.producerVersion)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.modelVersion&&(o.Long?(t.modelVersion=o.Long.fromValue(e.modelVersion)).unsigned=!1:"string"==typeof e.modelVersion?t.modelVersion=parseInt(e.modelVersion,10):"number"==typeof e.modelVersion?t.modelVersion=e.modelVersion:"object"==_typeof(e.modelVersion)&&(t.modelVersion=new o.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),null!=e.docString&&(t.docString=String(e.docString)),null!=e.graph){if("object"!=_typeof(e.graph))throw TypeError(".onnx.ModelProto.graph: object expected");t.graph=a.onnx.GraphProto.fromObject(e.graph);}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");t.metadataProps=[];for(r=0;r<e.metadataProps.length;++r){if("object"!=_typeof(e.metadataProps[r]))throw TypeError(".onnx.ModelProto.metadataProps: object expected");t.metadataProps[r]=a.onnx.StringStringEntryProto.fromObject(e.metadataProps[r]);}}if(e.trainingInfo){if(!Array.isArray(e.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");t.trainingInfo=[];for(r=0;r<e.trainingInfo.length;++r){if("object"!=_typeof(e.trainingInfo[r]))throw TypeError(".onnx.ModelProto.trainingInfo: object expected");t.trainingInfo[r]=a.onnx.TrainingInfoProto.fromObject(e.trainingInfo[r]);}}if(e.functions){if(!Array.isArray(e.functions))throw TypeError(".onnx.ModelProto.functions: array expected");t.functions=[];for(r=0;r<e.functions.length;++r){if("object"!=_typeof(e.functions[r]))throw TypeError(".onnx.ModelProto.functions: object expected");t.functions[r]=a.onnx.FunctionProto.fromObject(e.functions[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.opsetImport=[],r.metadataProps=[],r.trainingInfo=[],r.functions=[]),t.defaults){if(o.Long){var n=new o.Long(0,0,!1);r.irVersion=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.irVersion=t.longs===String?"0":0;if(r.producerName="",r.producerVersion="",r.domain="",o.Long){n=new o.Long(0,0,!1);r.modelVersion=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.modelVersion=t.longs===String?"0":0;r.docString="",r.graph=null;}if(null!=e.irVersion&&e.hasOwnProperty("irVersion")&&("number"==typeof e.irVersion?r.irVersion=t.longs===String?String(e.irVersion):e.irVersion:r.irVersion=t.longs===String?o.Long.prototype.toString.call(e.irVersion):t.longs===Number?new o.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),null!=e.producerName&&e.hasOwnProperty("producerName")&&(r.producerName=e.producerName),null!=e.producerVersion&&e.hasOwnProperty("producerVersion")&&(r.producerVersion=e.producerVersion),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.modelVersion&&e.hasOwnProperty("modelVersion")&&("number"==typeof e.modelVersion?r.modelVersion=t.longs===String?String(e.modelVersion):e.modelVersion:r.modelVersion=t.longs===String?o.Long.prototype.toString.call(e.modelVersion):t.longs===Number?new o.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),null!=e.graph&&e.hasOwnProperty("graph")&&(r.graph=a.onnx.GraphProto.toObject(e.graph,t)),e.opsetImport&&e.opsetImport.length){r.opsetImport=[];for(var i=0;i<e.opsetImport.length;++i)r.opsetImport[i]=a.onnx.OperatorSetIdProto.toObject(e.opsetImport[i],t);}if(e.metadataProps&&e.metadataProps.length){r.metadataProps=[];for(i=0;i<e.metadataProps.length;++i)r.metadataProps[i]=a.onnx.StringStringEntryProto.toObject(e.metadataProps[i],t);}if(e.trainingInfo&&e.trainingInfo.length){r.trainingInfo=[];for(i=0;i<e.trainingInfo.length;++i)r.trainingInfo[i]=a.onnx.TrainingInfoProto.toObject(e.trainingInfo[i],t);}if(e.functions&&e.functions.length){r.functions=[];for(i=0;i<e.functions.length;++i)r.functions[i]=a.onnx.FunctionProto.toObject(e.functions[i],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.ModelProto";},e;}(),s.StringStringEntryProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.StringStringEntryProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.key=e.string();break;case 2:i.value=e.string();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=_typeof(e)||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!o.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!o.isString(e.value)?"value: string expected":null;},e.fromObject=function(e){if(e instanceof a.onnx.StringStringEntryProto)return e;var t=new a.onnx.StringStringEntryProto();return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=e.value),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.StringStringEntryProto";},e;}(),s.TensorAnnotation=function(){function e(e){if(this.quantParameterTensorNames=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.tensorName="",e.prototype.quantParameterTensorNames=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.tensorName&&Object.hasOwnProperty.call(e,"tensorName")&&t.uint32(10).string(e.tensorName),null!=e.quantParameterTensorNames&&e.quantParameterTensorNames.length)for(var r=0;r<e.quantParameterTensorNames.length;++r)a.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[r],t.uint32(18).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TensorAnnotation();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.tensorName=e.string();break;case 2:i.quantParameterTensorNames&&i.quantParameterTensorNames.length||(i.quantParameterTensorNames=[]),i.quantParameterTensorNames.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.tensorName&&e.hasOwnProperty("tensorName")&&!o.isString(e.tensorName))return"tensorName: string expected";if(null!=e.quantParameterTensorNames&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var t=0;t<e.quantParameterTensorNames.length;++t){var r=a.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[t]);if(r)return"quantParameterTensorNames."+r;}}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TensorAnnotation)return e;var t=new a.onnx.TensorAnnotation();if(null!=e.tensorName&&(t.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");t.quantParameterTensorNames=[];for(var r=0;r<e.quantParameterTensorNames.length;++r){if("object"!=_typeof(e.quantParameterTensorNames[r]))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");t.quantParameterTensorNames[r]=a.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.quantParameterTensorNames=[]),t.defaults&&(r.tensorName=""),null!=e.tensorName&&e.hasOwnProperty("tensorName")&&(r.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){r.quantParameterTensorNames=[];for(var n=0;n<e.quantParameterTensorNames.length;++n)r.quantParameterTensorNames[n]=a.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorAnnotation";},e;}(),s.GraphProto=function(){function e(e){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.node=o.emptyArray,e.prototype.name="",e.prototype.initializer=o.emptyArray,e.prototype.sparseInitializer=o.emptyArray,e.prototype.docString="",e.prototype.input=o.emptyArray,e.prototype.output=o.emptyArray,e.prototype.valueInfo=o.emptyArray,e.prototype.quantizationAnnotation=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.node&&e.node.length)for(var r=0;r<e.node.length;++r)a.onnx.NodeProto.encode(e.node[r],t.uint32(10).fork()).ldelim();if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.initializer&&e.initializer.length)for(r=0;r<e.initializer.length;++r)a.onnx.TensorProto.encode(e.initializer[r],t.uint32(42).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(82).string(e.docString),null!=e.input&&e.input.length)for(r=0;r<e.input.length;++r)a.onnx.ValueInfoProto.encode(e.input[r],t.uint32(90).fork()).ldelim();if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)a.onnx.ValueInfoProto.encode(e.output[r],t.uint32(98).fork()).ldelim();if(null!=e.valueInfo&&e.valueInfo.length)for(r=0;r<e.valueInfo.length;++r)a.onnx.ValueInfoProto.encode(e.valueInfo[r],t.uint32(106).fork()).ldelim();if(null!=e.quantizationAnnotation&&e.quantizationAnnotation.length)for(r=0;r<e.quantizationAnnotation.length;++r)a.onnx.TensorAnnotation.encode(e.quantizationAnnotation[r],t.uint32(114).fork()).ldelim();if(null!=e.sparseInitializer&&e.sparseInitializer.length)for(r=0;r<e.sparseInitializer.length;++r)a.onnx.SparseTensorProto.encode(e.sparseInitializer[r],t.uint32(122).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.GraphProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.node&&i.node.length||(i.node=[]),i.node.push(a.onnx.NodeProto.decode(e,e.uint32()));break;case 2:i.name=e.string();break;case 5:i.initializer&&i.initializer.length||(i.initializer=[]),i.initializer.push(a.onnx.TensorProto.decode(e,e.uint32()));break;case 15:i.sparseInitializer&&i.sparseInitializer.length||(i.sparseInitializer=[]),i.sparseInitializer.push(a.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 10:i.docString=e.string();break;case 11:i.input&&i.input.length||(i.input=[]),i.input.push(a.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:i.output&&i.output.length||(i.output=[]),i.output.push(a.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:i.valueInfo&&i.valueInfo.length||(i.valueInfo=[]),i.valueInfo.push(a.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:i.quantizationAnnotation&&i.quantizationAnnotation.length||(i.quantizationAnnotation=[]),i.quantizationAnnotation.push(a.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var t=0;t<e.node.length;++t){if(r=a.onnx.NodeProto.verify(e.node[t]))return"node."+r;}}if(null!=e.name&&e.hasOwnProperty("name")&&!o.isString(e.name))return"name: string expected";if(null!=e.initializer&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(t=0;t<e.initializer.length;++t){if(r=a.onnx.TensorProto.verify(e.initializer[t]))return"initializer."+r;}}if(null!=e.sparseInitializer&&e.hasOwnProperty("sparseInitializer")){if(!Array.isArray(e.sparseInitializer))return"sparseInitializer: array expected";for(t=0;t<e.sparseInitializer.length;++t){if(r=a.onnx.SparseTensorProto.verify(e.sparseInitializer[t]))return"sparseInitializer."+r;}}if(null!=e.docString&&e.hasOwnProperty("docString")&&!o.isString(e.docString))return"docString: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(t=0;t<e.input.length;++t){if(r=a.onnx.ValueInfoProto.verify(e.input[t]))return"input."+r;}}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t){if(r=a.onnx.ValueInfoProto.verify(e.output[t]))return"output."+r;}}if(null!=e.valueInfo&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(t=0;t<e.valueInfo.length;++t){if(r=a.onnx.ValueInfoProto.verify(e.valueInfo[t]))return"valueInfo."+r;}}if(null!=e.quantizationAnnotation&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(t=0;t<e.quantizationAnnotation.length;++t){var r;if(r=a.onnx.TensorAnnotation.verify(e.quantizationAnnotation[t]))return"quantizationAnnotation."+r;}}return null;},e.fromObject=function(e){if(e instanceof a.onnx.GraphProto)return e;var t=new a.onnx.GraphProto();if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");t.node=[];for(var r=0;r<e.node.length;++r){if("object"!=_typeof(e.node[r]))throw TypeError(".onnx.GraphProto.node: object expected");t.node[r]=a.onnx.NodeProto.fromObject(e.node[r]);}}if(null!=e.name&&(t.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");t.initializer=[];for(r=0;r<e.initializer.length;++r){if("object"!=_typeof(e.initializer[r]))throw TypeError(".onnx.GraphProto.initializer: object expected");t.initializer[r]=a.onnx.TensorProto.fromObject(e.initializer[r]);}}if(e.sparseInitializer){if(!Array.isArray(e.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");t.sparseInitializer=[];for(r=0;r<e.sparseInitializer.length;++r){if("object"!=_typeof(e.sparseInitializer[r]))throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");t.sparseInitializer[r]=a.onnx.SparseTensorProto.fromObject(e.sparseInitializer[r]);}}if(null!=e.docString&&(t.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");t.input=[];for(r=0;r<e.input.length;++r){if("object"!=_typeof(e.input[r]))throw TypeError(".onnx.GraphProto.input: object expected");t.input[r]=a.onnx.ValueInfoProto.fromObject(e.input[r]);}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");t.output=[];for(r=0;r<e.output.length;++r){if("object"!=_typeof(e.output[r]))throw TypeError(".onnx.GraphProto.output: object expected");t.output[r]=a.onnx.ValueInfoProto.fromObject(e.output[r]);}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");t.valueInfo=[];for(r=0;r<e.valueInfo.length;++r){if("object"!=_typeof(e.valueInfo[r]))throw TypeError(".onnx.GraphProto.valueInfo: object expected");t.valueInfo[r]=a.onnx.ValueInfoProto.fromObject(e.valueInfo[r]);}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");t.quantizationAnnotation=[];for(r=0;r<e.quantizationAnnotation.length;++r){if("object"!=_typeof(e.quantizationAnnotation[r]))throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");t.quantizationAnnotation[r]=a.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.node=[],r.initializer=[],r.input=[],r.output=[],r.valueInfo=[],r.quantizationAnnotation=[],r.sparseInitializer=[]),t.defaults&&(r.name="",r.docString=""),e.node&&e.node.length){r.node=[];for(var n=0;n<e.node.length;++n)r.node[n]=a.onnx.NodeProto.toObject(e.node[n],t);}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.initializer&&e.initializer.length){r.initializer=[];for(n=0;n<e.initializer.length;++n)r.initializer[n]=a.onnx.TensorProto.toObject(e.initializer[n],t);}if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.input&&e.input.length){r.input=[];for(n=0;n<e.input.length;++n)r.input[n]=a.onnx.ValueInfoProto.toObject(e.input[n],t);}if(e.output&&e.output.length){r.output=[];for(n=0;n<e.output.length;++n)r.output[n]=a.onnx.ValueInfoProto.toObject(e.output[n],t);}if(e.valueInfo&&e.valueInfo.length){r.valueInfo=[];for(n=0;n<e.valueInfo.length;++n)r.valueInfo[n]=a.onnx.ValueInfoProto.toObject(e.valueInfo[n],t);}if(e.quantizationAnnotation&&e.quantizationAnnotation.length){r.quantizationAnnotation=[];for(n=0;n<e.quantizationAnnotation.length;++n)r.quantizationAnnotation[n]=a.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[n],t);}if(e.sparseInitializer&&e.sparseInitializer.length){r.sparseInitializer=[];for(n=0;n<e.sparseInitializer.length;++n)r.sparseInitializer[n]=a.onnx.SparseTensorProto.toObject(e.sparseInitializer[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.GraphProto";},e;}(),s.TensorProto=function(){function e(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.dims=o.emptyArray,e.prototype.dataType=0,e.prototype.segment=null,e.prototype.floatData=o.emptyArray,e.prototype.int32Data=o.emptyArray,e.prototype.stringData=o.emptyArray,e.prototype.int64Data=o.emptyArray,e.prototype.name="",e.prototype.docString="",e.prototype.rawData=o.newBuffer([]),e.prototype.externalData=o.emptyArray,e.prototype.dataLocation=0,e.prototype.doubleData=o.emptyArray,e.prototype.uint64Data=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dims&&e.dims.length){t.uint32(10).fork();for(var r=0;r<e.dims.length;++r)t.int64(e.dims[r]);t.ldelim();}if(null!=e.dataType&&Object.hasOwnProperty.call(e,"dataType")&&t.uint32(16).int32(e.dataType),null!=e.segment&&Object.hasOwnProperty.call(e,"segment")&&a.onnx.TensorProto.Segment.encode(e.segment,t.uint32(26).fork()).ldelim(),null!=e.floatData&&e.floatData.length){t.uint32(34).fork();for(r=0;r<e.floatData.length;++r)t["float"](e.floatData[r]);t.ldelim();}if(null!=e.int32Data&&e.int32Data.length){t.uint32(42).fork();for(r=0;r<e.int32Data.length;++r)t.int32(e.int32Data[r]);t.ldelim();}if(null!=e.stringData&&e.stringData.length)for(r=0;r<e.stringData.length;++r)t.uint32(50).bytes(e.stringData[r]);if(null!=e.int64Data&&e.int64Data.length){t.uint32(58).fork();for(r=0;r<e.int64Data.length;++r)t.int64(e.int64Data[r]);t.ldelim();}if(null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(66).string(e.name),null!=e.rawData&&Object.hasOwnProperty.call(e,"rawData")&&t.uint32(74).bytes(e.rawData),null!=e.doubleData&&e.doubleData.length){t.uint32(82).fork();for(r=0;r<e.doubleData.length;++r)t["double"](e.doubleData[r]);t.ldelim();}if(null!=e.uint64Data&&e.uint64Data.length){t.uint32(90).fork();for(r=0;r<e.uint64Data.length;++r)t.uint64(e.uint64Data[r]);t.ldelim();}if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(98).string(e.docString),null!=e.externalData&&e.externalData.length)for(r=0;r<e.externalData.length;++r)a.onnx.StringStringEntryProto.encode(e.externalData[r],t.uint32(106).fork()).ldelim();return null!=e.dataLocation&&Object.hasOwnProperty.call(e,"dataLocation")&&t.uint32(112).int32(e.dataLocation),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TensorProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:if(i.dims&&i.dims.length||(i.dims=[]),2==(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)i.dims.push(e.int64());else i.dims.push(e.int64());break;case 2:i.dataType=e.int32();break;case 3:i.segment=a.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(i.floatData&&i.floatData.length||(i.floatData=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)i.floatData.push(e["float"]());else i.floatData.push(e["float"]());break;case 5:if(i.int32Data&&i.int32Data.length||(i.int32Data=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)i.int32Data.push(e.int32());else i.int32Data.push(e.int32());break;case 6:i.stringData&&i.stringData.length||(i.stringData=[]),i.stringData.push(e.bytes());break;case 7:if(i.int64Data&&i.int64Data.length||(i.int64Data=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)i.int64Data.push(e.int64());else i.int64Data.push(e.int64());break;case 8:i.name=e.string();break;case 12:i.docString=e.string();break;case 9:i.rawData=e.bytes();break;case 13:i.externalData&&i.externalData.length||(i.externalData=[]),i.externalData.push(a.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:i.dataLocation=e.int32();break;case 10:if(i.doubleData&&i.doubleData.length||(i.doubleData=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)i.doubleData.push(e["double"]());else i.doubleData.push(e["double"]());break;case 11:if(i.uint64Data&&i.uint64Data.length||(i.uint64Data=[]),2==(7&o))for(s=e.uint32()+e.pos;e.pos<s;)i.uint64Data.push(e.uint64());else i.uint64Data.push(e.uint64());break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var t=0;t<e.dims.length;++t)if(!(o.isInteger(e.dims[t])||e.dims[t]&&o.isInteger(e.dims[t].low)&&o.isInteger(e.dims[t].high)))return"dims: integer|Long[] expected";}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&!o.isInteger(e.dataType))return"dataType: integer expected";if(null!=e.segment&&e.hasOwnProperty("segment")&&(r=a.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+r;if(null!=e.floatData&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(t=0;t<e.floatData.length;++t)if("number"!=typeof e.floatData[t])return"floatData: number[] expected";}if(null!=e.int32Data&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(t=0;t<e.int32Data.length;++t)if(!o.isInteger(e.int32Data[t]))return"int32Data: integer[] expected";}if(null!=e.stringData&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(t=0;t<e.stringData.length;++t)if(!(e.stringData[t]&&"number"==typeof e.stringData[t].length||o.isString(e.stringData[t])))return"stringData: buffer[] expected";}if(null!=e.int64Data&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(t=0;t<e.int64Data.length;++t)if(!(o.isInteger(e.int64Data[t])||e.int64Data[t]&&o.isInteger(e.int64Data[t].low)&&o.isInteger(e.int64Data[t].high)))return"int64Data: integer|Long[] expected";}if(null!=e.name&&e.hasOwnProperty("name")&&!o.isString(e.name))return"name: string expected";if(null!=e.docString&&e.hasOwnProperty("docString")&&!o.isString(e.docString))return"docString: string expected";if(null!=e.rawData&&e.hasOwnProperty("rawData")&&!(e.rawData&&"number"==typeof e.rawData.length||o.isString(e.rawData)))return"rawData: buffer expected";if(null!=e.externalData&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(t=0;t<e.externalData.length;++t){var r;if(r=a.onnx.StringStringEntryProto.verify(e.externalData[t]))return"externalData."+r;}}if(null!=e.dataLocation&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=e.doubleData&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(t=0;t<e.doubleData.length;++t)if("number"!=typeof e.doubleData[t])return"doubleData: number[] expected";}if(null!=e.uint64Data&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(t=0;t<e.uint64Data.length;++t)if(!(o.isInteger(e.uint64Data[t])||e.uint64Data[t]&&o.isInteger(e.uint64Data[t].low)&&o.isInteger(e.uint64Data[t].high)))return"uint64Data: integer|Long[] expected";}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TensorProto)return e;var t=new a.onnx.TensorProto();if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");t.dims=[];for(var r=0;r<e.dims.length;++r)o.Long?(t.dims[r]=o.Long.fromValue(e.dims[r])).unsigned=!1:"string"==typeof e.dims[r]?t.dims[r]=parseInt(e.dims[r],10):"number"==typeof e.dims[r]?t.dims[r]=e.dims[r]:"object"==_typeof(e.dims[r])&&(t.dims[r]=new o.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber());}if(null!=e.dataType&&(t.dataType=0|e.dataType),null!=e.segment){if("object"!=_typeof(e.segment))throw TypeError(".onnx.TensorProto.segment: object expected");t.segment=a.onnx.TensorProto.Segment.fromObject(e.segment);}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");t.floatData=[];for(r=0;r<e.floatData.length;++r)t.floatData[r]=Number(e.floatData[r]);}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");t.int32Data=[];for(r=0;r<e.int32Data.length;++r)t.int32Data[r]=0|e.int32Data[r];}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");t.stringData=[];for(r=0;r<e.stringData.length;++r)"string"==typeof e.stringData[r]?o.base64.decode(e.stringData[r],t.stringData[r]=o.newBuffer(o.base64.length(e.stringData[r])),0):e.stringData[r].length>=0&&(t.stringData[r]=e.stringData[r]);}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");t.int64Data=[];for(r=0;r<e.int64Data.length;++r)o.Long?(t.int64Data[r]=o.Long.fromValue(e.int64Data[r])).unsigned=!1:"string"==typeof e.int64Data[r]?t.int64Data[r]=parseInt(e.int64Data[r],10):"number"==typeof e.int64Data[r]?t.int64Data[r]=e.int64Data[r]:"object"==_typeof(e.int64Data[r])&&(t.int64Data[r]=new o.LongBits(e.int64Data[r].low>>>0,e.int64Data[r].high>>>0).toNumber());}if(null!=e.name&&(t.name=String(e.name)),null!=e.docString&&(t.docString=String(e.docString)),null!=e.rawData&&("string"==typeof e.rawData?o.base64.decode(e.rawData,t.rawData=o.newBuffer(o.base64.length(e.rawData)),0):e.rawData.length>=0&&(t.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");t.externalData=[];for(r=0;r<e.externalData.length;++r){if("object"!=_typeof(e.externalData[r]))throw TypeError(".onnx.TensorProto.externalData: object expected");t.externalData[r]=a.onnx.StringStringEntryProto.fromObject(e.externalData[r]);}}switch(e.dataLocation){default:if("number"==typeof e.dataLocation){t.dataLocation=e.dataLocation;break;}break;case"DEFAULT":case 0:t.dataLocation=0;break;case"EXTERNAL":case 1:t.dataLocation=1;}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");t.doubleData=[];for(r=0;r<e.doubleData.length;++r)t.doubleData[r]=Number(e.doubleData[r]);}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");t.uint64Data=[];for(r=0;r<e.uint64Data.length;++r)o.Long?(t.uint64Data[r]=o.Long.fromValue(e.uint64Data[r])).unsigned=!0:"string"==typeof e.uint64Data[r]?t.uint64Data[r]=parseInt(e.uint64Data[r],10):"number"==typeof e.uint64Data[r]?t.uint64Data[r]=e.uint64Data[r]:"object"==_typeof(e.uint64Data[r])&&(t.uint64Data[r]=new o.LongBits(e.uint64Data[r].low>>>0,e.uint64Data[r].high>>>0).toNumber(!0));}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dims=[],r.floatData=[],r.int32Data=[],r.stringData=[],r.int64Data=[],r.doubleData=[],r.uint64Data=[],r.externalData=[]),t.defaults&&(r.dataType=0,r.segment=null,r.name="",t.bytes===String?r.rawData="":(r.rawData=[],t.bytes!==Array&&(r.rawData=o.newBuffer(r.rawData))),r.docString="",r.dataLocation=t.enums===String?"DEFAULT":0),e.dims&&e.dims.length){r.dims=[];for(var n=0;n<e.dims.length;++n)"number"==typeof e.dims[n]?r.dims[n]=t.longs===String?String(e.dims[n]):e.dims[n]:r.dims[n]=t.longs===String?o.Long.prototype.toString.call(e.dims[n]):t.longs===Number?new o.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber():e.dims[n];}if(null!=e.dataType&&e.hasOwnProperty("dataType")&&(r.dataType=e.dataType),null!=e.segment&&e.hasOwnProperty("segment")&&(r.segment=a.onnx.TensorProto.Segment.toObject(e.segment,t)),e.floatData&&e.floatData.length){r.floatData=[];for(n=0;n<e.floatData.length;++n)r.floatData[n]=t.json&&!isFinite(e.floatData[n])?String(e.floatData[n]):e.floatData[n];}if(e.int32Data&&e.int32Data.length){r.int32Data=[];for(n=0;n<e.int32Data.length;++n)r.int32Data[n]=e.int32Data[n];}if(e.stringData&&e.stringData.length){r.stringData=[];for(n=0;n<e.stringData.length;++n)r.stringData[n]=t.bytes===String?o.base64.encode(e.stringData[n],0,e.stringData[n].length):t.bytes===Array?Array.prototype.slice.call(e.stringData[n]):e.stringData[n];}if(e.int64Data&&e.int64Data.length){r.int64Data=[];for(n=0;n<e.int64Data.length;++n)"number"==typeof e.int64Data[n]?r.int64Data[n]=t.longs===String?String(e.int64Data[n]):e.int64Data[n]:r.int64Data[n]=t.longs===String?o.Long.prototype.toString.call(e.int64Data[n]):t.longs===Number?new o.LongBits(e.int64Data[n].low>>>0,e.int64Data[n].high>>>0).toNumber():e.int64Data[n];}if(null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.rawData&&e.hasOwnProperty("rawData")&&(r.rawData=t.bytes===String?o.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length){r.doubleData=[];for(n=0;n<e.doubleData.length;++n)r.doubleData[n]=t.json&&!isFinite(e.doubleData[n])?String(e.doubleData[n]):e.doubleData[n];}if(e.uint64Data&&e.uint64Data.length){r.uint64Data=[];for(n=0;n<e.uint64Data.length;++n)"number"==typeof e.uint64Data[n]?r.uint64Data[n]=t.longs===String?String(e.uint64Data[n]):e.uint64Data[n]:r.uint64Data[n]=t.longs===String?o.Long.prototype.toString.call(e.uint64Data[n]):t.longs===Number?new o.LongBits(e.uint64Data[n].low>>>0,e.uint64Data[n].high>>>0).toNumber(!0):e.uint64Data[n];}if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.externalData&&e.externalData.length){r.externalData=[];for(n=0;n<e.externalData.length;++n)r.externalData[n]=a.onnx.StringStringEntryProto.toObject(e.externalData[n],t);}return null!=e.dataLocation&&e.hasOwnProperty("dataLocation")&&(r.dataLocation=t.enums===String?void 0===a.onnx.TensorProto.DataLocation[e.dataLocation]?e.dataLocation:a.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorProto";},e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="UINT8"]=2,t[e[3]="INT8"]=3,t[e[4]="UINT16"]=4,t[e[5]="INT16"]=5,t[e[6]="INT32"]=6,t[e[7]="INT64"]=7,t[e[8]="STRING"]=8,t[e[9]="BOOL"]=9,t[e[10]="FLOAT16"]=10,t[e[11]="DOUBLE"]=11,t[e[12]="UINT32"]=12,t[e[13]="UINT64"]=13,t[e[14]="COMPLEX64"]=14,t[e[15]="COMPLEX128"]=15,t[e[16]="BFLOAT16"]=16,t[e[17]="FLOAT8E4M3FN"]=17,t[e[18]="FLOAT8E4M3FNUZ"]=18,t[e[19]="FLOAT8E5M2"]=19,t[e[20]="FLOAT8E5M2FNUZ"]=20,t;}(),e.Segment=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.begin=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.end=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.begin&&Object.hasOwnProperty.call(e,"begin")&&t.uint32(8).int64(e.begin),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(16).int64(e.end),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TensorProto.Segment();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.begin=e.int64();break;case 2:i.end=e.int64();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=_typeof(e)||null===e?"object expected":null==e.begin||!e.hasOwnProperty("begin")||o.isInteger(e.begin)||e.begin&&o.isInteger(e.begin.low)&&o.isInteger(e.begin.high)?null==e.end||!e.hasOwnProperty("end")||o.isInteger(e.end)||e.end&&o.isInteger(e.end.low)&&o.isInteger(e.end.high)?null:"end: integer|Long expected":"begin: integer|Long expected";},e.fromObject=function(e){if(e instanceof a.onnx.TensorProto.Segment)return e;var t=new a.onnx.TensorProto.Segment();return null!=e.begin&&(o.Long?(t.begin=o.Long.fromValue(e.begin)).unsigned=!1:"string"==typeof e.begin?t.begin=parseInt(e.begin,10):"number"==typeof e.begin?t.begin=e.begin:"object"==_typeof(e.begin)&&(t.begin=new o.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber())),null!=e.end&&(o.Long?(t.end=o.Long.fromValue(e.end)).unsigned=!1:"string"==typeof e.end?t.end=parseInt(e.end,10):"number"==typeof e.end?t.end=e.end:"object"==_typeof(e.end)&&(t.end=new o.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber())),t;},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(o.Long){var n=new o.Long(0,0,!1);r.begin=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.begin=t.longs===String?"0":0;if(o.Long){n=new o.Long(0,0,!1);r.end=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.end=t.longs===String?"0":0;}return null!=e.begin&&e.hasOwnProperty("begin")&&("number"==typeof e.begin?r.begin=t.longs===String?String(e.begin):e.begin:r.begin=t.longs===String?o.Long.prototype.toString.call(e.begin):t.longs===Number?new o.LongBits(e.begin.low>>>0,e.begin.high>>>0).toNumber():e.begin),null!=e.end&&e.hasOwnProperty("end")&&("number"==typeof e.end?r.end=t.longs===String?String(e.end):e.end:r.end=t.longs===String?o.Long.prototype.toString.call(e.end):t.longs===Number?new o.LongBits(e.end.low>>>0,e.end.high>>>0).toNumber():e.end),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorProto.Segment";},e;}(),e.DataLocation=function(){var e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="EXTERNAL"]=1,t;}(),e;}(),s.SparseTensorProto=function(){function e(e){if(this.dims=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.values=null,e.prototype.indices=null,e.prototype.dims=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.values&&Object.hasOwnProperty.call(e,"values")&&a.onnx.TensorProto.encode(e.values,t.uint32(10).fork()).ldelim(),null!=e.indices&&Object.hasOwnProperty.call(e,"indices")&&a.onnx.TensorProto.encode(e.indices,t.uint32(18).fork()).ldelim(),null!=e.dims&&e.dims.length){t.uint32(26).fork();for(var r=0;r<e.dims.length;++r)t.int64(e.dims[r]);t.ldelim();}return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.SparseTensorProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.values=a.onnx.TensorProto.decode(e,e.uint32());break;case 2:i.indices=a.onnx.TensorProto.decode(e,e.uint32());break;case 3:if(i.dims&&i.dims.length||(i.dims=[]),2==(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)i.dims.push(e.int64());else i.dims.push(e.int64());break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";var t;if(null!=e.values&&e.hasOwnProperty("values")&&(t=a.onnx.TensorProto.verify(e.values)))return"values."+t;if(null!=e.indices&&e.hasOwnProperty("indices")&&(t=a.onnx.TensorProto.verify(e.indices)))return"indices."+t;if(null!=e.dims&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var r=0;r<e.dims.length;++r)if(!(o.isInteger(e.dims[r])||e.dims[r]&&o.isInteger(e.dims[r].low)&&o.isInteger(e.dims[r].high)))return"dims: integer|Long[] expected";}return null;},e.fromObject=function(e){if(e instanceof a.onnx.SparseTensorProto)return e;var t=new a.onnx.SparseTensorProto();if(null!=e.values){if("object"!=_typeof(e.values))throw TypeError(".onnx.SparseTensorProto.values: object expected");t.values=a.onnx.TensorProto.fromObject(e.values);}if(null!=e.indices){if("object"!=_typeof(e.indices))throw TypeError(".onnx.SparseTensorProto.indices: object expected");t.indices=a.onnx.TensorProto.fromObject(e.indices);}if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");t.dims=[];for(var r=0;r<e.dims.length;++r)o.Long?(t.dims[r]=o.Long.fromValue(e.dims[r])).unsigned=!1:"string"==typeof e.dims[r]?t.dims[r]=parseInt(e.dims[r],10):"number"==typeof e.dims[r]?t.dims[r]=e.dims[r]:"object"==_typeof(e.dims[r])&&(t.dims[r]=new o.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber());}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dims=[]),t.defaults&&(r.values=null,r.indices=null),null!=e.values&&e.hasOwnProperty("values")&&(r.values=a.onnx.TensorProto.toObject(e.values,t)),null!=e.indices&&e.hasOwnProperty("indices")&&(r.indices=a.onnx.TensorProto.toObject(e.indices,t)),e.dims&&e.dims.length){r.dims=[];for(var n=0;n<e.dims.length;++n)"number"==typeof e.dims[n]?r.dims[n]=t.longs===String?String(e.dims[n]):e.dims[n]:r.dims[n]=t.longs===String?o.Long.prototype.toString.call(e.dims[n]):t.longs===Number?new o.LongBits(e.dims[n].low>>>0,e.dims[n].high>>>0).toNumber():e.dims[n];}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.SparseTensorProto";},e;}(),s.TensorShapeProto=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.dim=o.emptyArray,e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.dim&&e.dim.length)for(var r=0;r<e.dim.length;++r)a.onnx.TensorShapeProto.Dimension.encode(e.dim[r],t.uint32(10).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TensorShapeProto();e.pos<r;){var o=e.uint32();if(o>>>3==1)i.dim&&i.dim.length||(i.dim=[]),i.dim.push(a.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()));else e.skipType(7&o);}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.dim&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var t=0;t<e.dim.length;++t){var r=a.onnx.TensorShapeProto.Dimension.verify(e.dim[t]);if(r)return"dim."+r;}}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TensorShapeProto)return e;var t=new a.onnx.TensorShapeProto();if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");t.dim=[];for(var r=0;r<e.dim.length;++r){if("object"!=_typeof(e.dim[r]))throw TypeError(".onnx.TensorShapeProto.dim: object expected");t.dim[r]=a.onnx.TensorShapeProto.Dimension.fromObject(e.dim[r]);}}return t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dim=[]),e.dim&&e.dim.length){r.dim=[];for(var n=0;n<e.dim.length;++n)r.dim[n]=a.onnx.TensorShapeProto.Dimension.toObject(e.dim[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto";},e.Dimension=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}var t;return e.prototype.dimValue=null,e.prototype.dimParam=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:o.oneOfGetter(t=["dimValue","dimParam"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.dimValue&&Object.hasOwnProperty.call(e,"dimValue")&&t.uint32(8).int64(e.dimValue),null!=e.dimParam&&Object.hasOwnProperty.call(e,"dimParam")&&t.uint32(18).string(e.dimParam),null!=e.denotation&&Object.hasOwnProperty.call(e,"denotation")&&t.uint32(26).string(e.denotation),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TensorShapeProto.Dimension();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.dimValue=e.int64();break;case 2:i.dimParam=e.string();break;case 3:i.denotation=e.string();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";var t={};if(null!=e.dimValue&&e.hasOwnProperty("dimValue")&&(t.value=1,!(o.isInteger(e.dimValue)||e.dimValue&&o.isInteger(e.dimValue.low)&&o.isInteger(e.dimValue.high))))return"dimValue: integer|Long expected";if(null!=e.dimParam&&e.hasOwnProperty("dimParam")){if(1===t.value)return"value: multiple values";if(t.value=1,!o.isString(e.dimParam))return"dimParam: string expected";}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!o.isString(e.denotation)?"denotation: string expected":null;},e.fromObject=function(e){if(e instanceof a.onnx.TensorShapeProto.Dimension)return e;var t=new a.onnx.TensorShapeProto.Dimension();return null!=e.dimValue&&(o.Long?(t.dimValue=o.Long.fromValue(e.dimValue)).unsigned=!1:"string"==typeof e.dimValue?t.dimValue=parseInt(e.dimValue,10):"number"==typeof e.dimValue?t.dimValue=e.dimValue:"object"==_typeof(e.dimValue)&&(t.dimValue=new o.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber())),null!=e.dimParam&&(t.dimParam=String(e.dimParam)),null!=e.denotation&&(t.denotation=String(e.denotation)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.denotation=""),null!=e.dimValue&&e.hasOwnProperty("dimValue")&&("number"==typeof e.dimValue?r.dimValue=t.longs===String?String(e.dimValue):e.dimValue:r.dimValue=t.longs===String?o.Long.prototype.toString.call(e.dimValue):t.longs===Number?new o.LongBits(e.dimValue.low>>>0,e.dimValue.high>>>0).toNumber():e.dimValue,t.oneofs&&(r.value="dimValue")),null!=e.dimParam&&e.hasOwnProperty("dimParam")&&(r.dimParam=e.dimParam,t.oneofs&&(r.value="dimParam")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(r.denotation=e.denotation),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto.Dimension";},e;}(),e;}(),s.TypeProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}var t;return e.prototype.tensorType=null,e.prototype.sequenceType=null,e.prototype.mapType=null,e.prototype.optionalType=null,e.prototype.sparseTensorType=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:o.oneOfGetter(t=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.tensorType&&Object.hasOwnProperty.call(e,"tensorType")&&a.onnx.TypeProto.Tensor.encode(e.tensorType,t.uint32(10).fork()).ldelim(),null!=e.sequenceType&&Object.hasOwnProperty.call(e,"sequenceType")&&a.onnx.TypeProto.Sequence.encode(e.sequenceType,t.uint32(34).fork()).ldelim(),null!=e.mapType&&Object.hasOwnProperty.call(e,"mapType")&&a.onnx.TypeProto.Map.encode(e.mapType,t.uint32(42).fork()).ldelim(),null!=e.denotation&&Object.hasOwnProperty.call(e,"denotation")&&t.uint32(50).string(e.denotation),null!=e.sparseTensorType&&Object.hasOwnProperty.call(e,"sparseTensorType")&&a.onnx.TypeProto.SparseTensor.encode(e.sparseTensorType,t.uint32(66).fork()).ldelim(),null!=e.optionalType&&Object.hasOwnProperty.call(e,"optionalType")&&a.onnx.TypeProto.Optional.encode(e.optionalType,t.uint32(74).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TypeProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.tensorType=a.onnx.TypeProto.Tensor.decode(e,e.uint32());break;case 4:i.sequenceType=a.onnx.TypeProto.Sequence.decode(e,e.uint32());break;case 5:i.mapType=a.onnx.TypeProto.Map.decode(e,e.uint32());break;case 9:i.optionalType=a.onnx.TypeProto.Optional.decode(e,e.uint32());break;case 8:i.sparseTensorType=a.onnx.TypeProto.SparseTensor.decode(e,e.uint32());break;case 6:i.denotation=e.string();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";var t={};if(null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(t.value=1,r=a.onnx.TypeProto.Tensor.verify(e.tensorType)))return"tensorType."+r;if(null!=e.sequenceType&&e.hasOwnProperty("sequenceType")){if(1===t.value)return"value: multiple values";if(t.value=1,r=a.onnx.TypeProto.Sequence.verify(e.sequenceType))return"sequenceType."+r;}if(null!=e.mapType&&e.hasOwnProperty("mapType")){if(1===t.value)return"value: multiple values";if(t.value=1,r=a.onnx.TypeProto.Map.verify(e.mapType))return"mapType."+r;}if(null!=e.optionalType&&e.hasOwnProperty("optionalType")){if(1===t.value)return"value: multiple values";if(t.value=1,r=a.onnx.TypeProto.Optional.verify(e.optionalType))return"optionalType."+r;}if(null!=e.sparseTensorType&&e.hasOwnProperty("sparseTensorType")){if(1===t.value)return"value: multiple values";var r;if(t.value=1,r=a.onnx.TypeProto.SparseTensor.verify(e.sparseTensorType))return"sparseTensorType."+r;}return null!=e.denotation&&e.hasOwnProperty("denotation")&&!o.isString(e.denotation)?"denotation: string expected":null;},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto)return e;var t=new a.onnx.TypeProto();if(null!=e.tensorType){if("object"!=_typeof(e.tensorType))throw TypeError(".onnx.TypeProto.tensorType: object expected");t.tensorType=a.onnx.TypeProto.Tensor.fromObject(e.tensorType);}if(null!=e.sequenceType){if("object"!=_typeof(e.sequenceType))throw TypeError(".onnx.TypeProto.sequenceType: object expected");t.sequenceType=a.onnx.TypeProto.Sequence.fromObject(e.sequenceType);}if(null!=e.mapType){if("object"!=_typeof(e.mapType))throw TypeError(".onnx.TypeProto.mapType: object expected");t.mapType=a.onnx.TypeProto.Map.fromObject(e.mapType);}if(null!=e.optionalType){if("object"!=_typeof(e.optionalType))throw TypeError(".onnx.TypeProto.optionalType: object expected");t.optionalType=a.onnx.TypeProto.Optional.fromObject(e.optionalType);}if(null!=e.sparseTensorType){if("object"!=_typeof(e.sparseTensorType))throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");t.sparseTensorType=a.onnx.TypeProto.SparseTensor.fromObject(e.sparseTensorType);}return null!=e.denotation&&(t.denotation=String(e.denotation)),t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.denotation=""),null!=e.tensorType&&e.hasOwnProperty("tensorType")&&(r.tensorType=a.onnx.TypeProto.Tensor.toObject(e.tensorType,t),t.oneofs&&(r.value="tensorType")),null!=e.sequenceType&&e.hasOwnProperty("sequenceType")&&(r.sequenceType=a.onnx.TypeProto.Sequence.toObject(e.sequenceType,t),t.oneofs&&(r.value="sequenceType")),null!=e.mapType&&e.hasOwnProperty("mapType")&&(r.mapType=a.onnx.TypeProto.Map.toObject(e.mapType,t),t.oneofs&&(r.value="mapType")),null!=e.denotation&&e.hasOwnProperty("denotation")&&(r.denotation=e.denotation),null!=e.sparseTensorType&&e.hasOwnProperty("sparseTensorType")&&(r.sparseTensorType=a.onnx.TypeProto.SparseTensor.toObject(e.sparseTensorType,t),t.oneofs&&(r.value="sparseTensorType")),null!=e.optionalType&&e.hasOwnProperty("optionalType")&&(r.optionalType=a.onnx.TypeProto.Optional.toObject(e.optionalType,t),t.oneofs&&(r.value="optionalType")),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto";},e.Tensor=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&Object.hasOwnProperty.call(e,"shape")&&a.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TypeProto.Tensor();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.elemType=e.int32();break;case 2:i.shape=a.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!o.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=a.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t;}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto.Tensor)return e;var t=new a.onnx.TypeProto.Tensor();if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=_typeof(e.shape))throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");t.shape=a.onnx.TensorShapeProto.fromObject(e.shape);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=0,r.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(r.shape=a.onnx.TensorShapeProto.toObject(e.shape,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Tensor";},e;}(),e.Sequence=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.elemType=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&a.onnx.TypeProto.encode(e.elemType,t.uint32(10).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TypeProto.Sequence();e.pos<r;){var o=e.uint32();if(o>>>3==1)i.elemType=a.onnx.TypeProto.decode(e,e.uint32());else e.skipType(7&o);}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")){var t=a.onnx.TypeProto.verify(e.elemType);if(t)return"elemType."+t;}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto.Sequence)return e;var t=new a.onnx.TypeProto.Sequence();if(null!=e.elemType){if("object"!=_typeof(e.elemType))throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");t.elemType=a.onnx.TypeProto.fromObject(e.elemType);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=a.onnx.TypeProto.toObject(e.elemType,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Sequence";},e;}(),e.Map=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.keyType=0,e.prototype.valueType=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.keyType&&Object.hasOwnProperty.call(e,"keyType")&&t.uint32(8).int32(e.keyType),null!=e.valueType&&Object.hasOwnProperty.call(e,"valueType")&&a.onnx.TypeProto.encode(e.valueType,t.uint32(18).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TypeProto.Map();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.keyType=e.int32();break;case 2:i.valueType=a.onnx.TypeProto.decode(e,e.uint32());break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.keyType&&e.hasOwnProperty("keyType")&&!o.isInteger(e.keyType))return"keyType: integer expected";if(null!=e.valueType&&e.hasOwnProperty("valueType")){var t=a.onnx.TypeProto.verify(e.valueType);if(t)return"valueType."+t;}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto.Map)return e;var t=new a.onnx.TypeProto.Map();if(null!=e.keyType&&(t.keyType=0|e.keyType),null!=e.valueType){if("object"!=_typeof(e.valueType))throw TypeError(".onnx.TypeProto.Map.valueType: object expected");t.valueType=a.onnx.TypeProto.fromObject(e.valueType);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.keyType=0,r.valueType=null),null!=e.keyType&&e.hasOwnProperty("keyType")&&(r.keyType=e.keyType),null!=e.valueType&&e.hasOwnProperty("valueType")&&(r.valueType=a.onnx.TypeProto.toObject(e.valueType,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Map";},e;}(),e.Optional=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.elemType=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&a.onnx.TypeProto.encode(e.elemType,t.uint32(10).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TypeProto.Optional();e.pos<r;){var o=e.uint32();if(o>>>3==1)i.elemType=a.onnx.TypeProto.decode(e,e.uint32());else e.skipType(7&o);}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")){var t=a.onnx.TypeProto.verify(e.elemType);if(t)return"elemType."+t;}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto.Optional)return e;var t=new a.onnx.TypeProto.Optional();if(null!=e.elemType){if("object"!=_typeof(e.elemType))throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");t.elemType=a.onnx.TypeProto.fromObject(e.elemType);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=a.onnx.TypeProto.toObject(e.elemType,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.Optional";},e;}(),e.SparseTensor=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.elemType=0,e.prototype.shape=null,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.elemType&&Object.hasOwnProperty.call(e,"elemType")&&t.uint32(8).int32(e.elemType),null!=e.shape&&Object.hasOwnProperty.call(e,"shape")&&a.onnx.TensorShapeProto.encode(e.shape,t.uint32(18).fork()).ldelim(),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.TypeProto.SparseTensor();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.elemType=e.int32();break;case 2:i.shape=a.onnx.TensorShapeProto.decode(e,e.uint32());break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.elemType&&e.hasOwnProperty("elemType")&&!o.isInteger(e.elemType))return"elemType: integer expected";if(null!=e.shape&&e.hasOwnProperty("shape")){var t=a.onnx.TensorShapeProto.verify(e.shape);if(t)return"shape."+t;}return null;},e.fromObject=function(e){if(e instanceof a.onnx.TypeProto.SparseTensor)return e;var t=new a.onnx.TypeProto.SparseTensor();if(null!=e.elemType&&(t.elemType=0|e.elemType),null!=e.shape){if("object"!=_typeof(e.shape))throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");t.shape=a.onnx.TensorShapeProto.fromObject(e.shape);}return t;},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.elemType=0,r.shape=null),null!=e.elemType&&e.hasOwnProperty("elemType")&&(r.elemType=e.elemType),null!=e.shape&&e.hasOwnProperty("shape")&&(r.shape=a.onnx.TensorShapeProto.toObject(e.shape,t)),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.TypeProto.SparseTensor";},e;}(),e;}(),s.OperatorSetIdProto=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.domain="",e.prototype.version=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t);},e.encode=function(e,t){return t||(t=i.create()),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(10).string(e.domain),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).int64(e.version),t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.OperatorSetIdProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.domain=e.string();break;case 2:i.version=e.int64();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){return"object"!=_typeof(e)||null===e?"object expected":null!=e.domain&&e.hasOwnProperty("domain")&&!o.isString(e.domain)?"domain: string expected":null==e.version||!e.hasOwnProperty("version")||o.isInteger(e.version)||e.version&&o.isInteger(e.version.low)&&o.isInteger(e.version.high)?null:"version: integer|Long expected";},e.fromObject=function(e){if(e instanceof a.onnx.OperatorSetIdProto)return e;var t=new a.onnx.OperatorSetIdProto();return null!=e.domain&&(t.domain=String(e.domain)),null!=e.version&&(o.Long?(t.version=o.Long.fromValue(e.version)).unsigned=!1:"string"==typeof e.version?t.version=parseInt(e.version,10):"number"==typeof e.version?t.version=e.version:"object"==_typeof(e.version)&&(t.version=new o.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),t;},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.domain="",o.Long){var n=new o.Long(0,0,!1);r.version=t.longs===String?n.toString():t.longs===Number?n.toNumber():n;}else r.version=t.longs===String?"0":0;return null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.version&&e.hasOwnProperty("version")&&("number"==typeof e.version?r.version=t.longs===String?String(e.version):e.version:r.version=t.longs===String?o.Long.prototype.toString.call(e.version):t.longs===Number?new o.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.OperatorSetIdProto";},e;}(),s.OperatorStatus=function(){var e={},t=Object.create(e);return t[e[0]="EXPERIMENTAL"]=0,t[e[1]="STABLE"]=1,t;}(),s.FunctionProto=function(){function e(e){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]]);}return e.prototype.name="",e.prototype.input=o.emptyArray,e.prototype.output=o.emptyArray,e.prototype.attribute=o.emptyArray,e.prototype.attributeProto=o.emptyArray,e.prototype.node=o.emptyArray,e.prototype.docString="",e.prototype.opsetImport=o.emptyArray,e.prototype.domain="",e.create=function(t){return new e(t);},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.input&&e.input.length)for(var r=0;r<e.input.length;++r)t.uint32(34).string(e.input[r]);if(null!=e.output&&e.output.length)for(r=0;r<e.output.length;++r)t.uint32(42).string(e.output[r]);if(null!=e.attribute&&e.attribute.length)for(r=0;r<e.attribute.length;++r)t.uint32(50).string(e.attribute[r]);if(null!=e.node&&e.node.length)for(r=0;r<e.node.length;++r)a.onnx.NodeProto.encode(e.node[r],t.uint32(58).fork()).ldelim();if(null!=e.docString&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(66).string(e.docString),null!=e.opsetImport&&e.opsetImport.length)for(r=0;r<e.opsetImport.length;++r)a.onnx.OperatorSetIdProto.encode(e.opsetImport[r],t.uint32(74).fork()).ldelim();if(null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(82).string(e.domain),null!=e.attributeProto&&e.attributeProto.length)for(r=0;r<e.attributeProto.length;++r)a.onnx.AttributeProto.encode(e.attributeProto[r],t.uint32(90).fork()).ldelim();return t;},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim();},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,i=new a.onnx.FunctionProto();e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:i.name=e.string();break;case 4:i.input&&i.input.length||(i.input=[]),i.input.push(e.string());break;case 5:i.output&&i.output.length||(i.output=[]),i.output.push(e.string());break;case 6:i.attribute&&i.attribute.length||(i.attribute=[]),i.attribute.push(e.string());break;case 11:i.attributeProto&&i.attributeProto.length||(i.attributeProto=[]),i.attributeProto.push(a.onnx.AttributeProto.decode(e,e.uint32()));break;case 7:i.node&&i.node.length||(i.node=[]),i.node.push(a.onnx.NodeProto.decode(e,e.uint32()));break;case 8:i.docString=e.string();break;case 9:i.opsetImport&&i.opsetImport.length||(i.opsetImport=[]),i.opsetImport.push(a.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 10:i.domain=e.string();break;default:e.skipType(7&o);}}return i;},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32());},e.verify=function(e){if("object"!=_typeof(e)||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!o.isString(e.name))return"name: string expected";if(null!=e.input&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!o.isString(e.input[t]))return"input: string[] expected";}if(null!=e.output&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!o.isString(e.output[t]))return"output: string[] expected";}if(null!=e.attribute&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t)if(!o.isString(e.attribute[t]))return"attribute: string[] expected";}if(null!=e.attributeProto&&e.hasOwnProperty("attributeProto")){if(!Array.isArray(e.attributeProto))return"attributeProto: array expected";for(t=0;t<e.attributeProto.length;++t){if(r=a.onnx.AttributeProto.verify(e.attributeProto[t]))return"attributeProto."+r;}}if(null!=e.node&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(t=0;t<e.node.length;++t){if(r=a.onnx.NodeProto.verify(e.node[t]))return"node."+r;}}if(null!=e.docString&&e.hasOwnProperty("docString")&&!o.isString(e.docString))return"docString: string expected";if(null!=e.opsetImport&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(t=0;t<e.opsetImport.length;++t){var r;if(r=a.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+r;}}return null!=e.domain&&e.hasOwnProperty("domain")&&!o.isString(e.domain)?"domain: string expected":null;},e.fromObject=function(e){if(e instanceof a.onnx.FunctionProto)return e;var t=new a.onnx.FunctionProto();if(null!=e.name&&(t.name=String(e.name)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.FunctionProto.input: array expected");t.input=[];for(var r=0;r<e.input.length;++r)t.input[r]=String(e.input[r]);}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.FunctionProto.output: array expected");t.output=[];for(r=0;r<e.output.length;++r)t.output[r]=String(e.output[r]);}if(e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");t.attribute=[];for(r=0;r<e.attribute.length;++r)t.attribute[r]=String(e.attribute[r]);}if(e.attributeProto){if(!Array.isArray(e.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");t.attributeProto=[];for(r=0;r<e.attributeProto.length;++r){if("object"!=_typeof(e.attributeProto[r]))throw TypeError(".onnx.FunctionProto.attributeProto: object expected");t.attributeProto[r]=a.onnx.AttributeProto.fromObject(e.attributeProto[r]);}}if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.FunctionProto.node: array expected");t.node=[];for(r=0;r<e.node.length;++r){if("object"!=_typeof(e.node[r]))throw TypeError(".onnx.FunctionProto.node: object expected");t.node[r]=a.onnx.NodeProto.fromObject(e.node[r]);}}if(null!=e.docString&&(t.docString=String(e.docString)),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");t.opsetImport=[];for(r=0;r<e.opsetImport.length;++r){if("object"!=_typeof(e.opsetImport[r]))throw TypeError(".onnx.FunctionProto.opsetImport: object expected");t.opsetImport[r]=a.onnx.OperatorSetIdProto.fromObject(e.opsetImport[r]);}}return null!=e.domain&&(t.domain=String(e.domain)),t;},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.input=[],r.output=[],r.attribute=[],r.node=[],r.opsetImport=[],r.attributeProto=[]),t.defaults&&(r.name="",r.docString="",r.domain=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.input&&e.input.length){r.input=[];for(var n=0;n<e.input.length;++n)r.input[n]=e.input[n];}if(e.output&&e.output.length){r.output=[];for(n=0;n<e.output.length;++n)r.output[n]=e.output[n];}if(e.attribute&&e.attribute.length){r.attribute=[];for(n=0;n<e.attribute.length;++n)r.attribute[n]=e.attribute[n];}if(e.node&&e.node.length){r.node=[];for(n=0;n<e.node.length;++n)r.node[n]=a.onnx.NodeProto.toObject(e.node[n],t);}if(null!=e.docString&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.opsetImport&&e.opsetImport.length){r.opsetImport=[];for(n=0;n<e.opsetImport.length;++n)r.opsetImport[n]=a.onnx.OperatorSetIdProto.toObject(e.opsetImport[n],t);}if(null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),e.attributeProto&&e.attributeProto.length){r.attributeProto=[];for(n=0;n<e.attributeProto.length;++n)r.attributeProto[n]=a.onnx.AttributeProto.toObject(e.attributeProto[n],t);}return r;},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions);},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/onnx.FunctionProto";},e;}(),s;}(),t.exports=a;});function zr(e,t){if(!e)throw new Error("string"==typeof t?t:t());}function dn(e){return new TextDecoder().decode(e);}var we,Tr,Ti,Ke,ro,Ve,ot,z,pn,xr,wr,vr,fe=L(function(){Jn(),ii(),we=Nr(Ur()),_r(),Tr=/*#__PURE__*/function(){function Tr(){_classCallCheck(this,Tr);}_createClass(Tr,null,[{key:"arraysEqual",value:function arraysEqual(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0;}}]);return Tr;}(),Ti=/*#__PURE__*/function(){function Ti(){_classCallCheck(this,Ti);}_createClass(Ti,null,[{key:"preprocessInputShapes",value:function preprocessInputShapes(e,t){return[1===e.length?[1,e[0]]:e,1===t.length?[t[0],1]:t];}},{key:"postprocessOutputShape",value:function postprocessOutputShape(e,t,r){1===t&&e.splice(e.length-2,1),1===r&&e.pop();}},{key:"calcMatMulShape",value:function calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]];}}]);return Ti;}(),Ke=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);}_createClass(e,null,[{key:"calcShape",value:function calcShape(_e32,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=_e32.length,i=t.length;if(0===n)return t;if(0===i)return _e32;var o=Math.max(_e32.length,t.length),a=new Array(o);if(r){if(n<2||i<2)return;var _r85=Ti.calcMatMulShape([_e32[n-2],_e32[n-1]],[t[i-2],t[i-1]]);if(void 0===_r85)return;var _r86=_slicedToArray(_r85,2);a[o-2]=_r86[0];a[o-1]=_r86[1];}for(var s=r?3:1;s<=o;s++){var _r87=n-s<0?1:_e32[n-s],u=i-s<0?1:t[i-s];if(_r87!==u&&_r87>1&&u>1)return;a[o-s]=Math.max(_r87,u);}return a;}},{key:"index",value:function index(t,r){var n=new Array(r.length);return e.fillIndex(t,r,n),n;}},{key:"fillIndex",value:function fillIndex(_e33,t,r){var n=_e33.length-t.length;for(var i=0;i<t.length;i++)r[i]=_e33[n+i]%t[i];}},{key:"calc",value:function calc(t,r,n,i,o){var a=e.calcShape(t.dims,r.dims);if(a){if(i&&!z.areEqual(a,t.dims))return;var s=z.size(a),u=i?t:new Ce(a,o||t.type);if(0===a.length)u.set([],n(t.get([]),r.get([])));else{var _i8,_o6=new Array(a.length),l=new Array(t.dims.length),h=new Array(r.dims.length),c=0,d=0,f=!1,p=!1;0===t.dims.length&&(c=t.get([]),f=!0),0===r.dims.length&&(d=r.get([]),p=!0);for(var y=0;y<s;y++){_i8=y;for(var _e37=a.length-1;_e37>=0;_e37--)_o6[_e37]=_i8%a[_e37],_i8=Math.floor(_i8/a[_e37]);f||(e.fillIndex(_o6,t.dims,l),c=t.get(l)),p||(e.fillIndex(_o6,r.dims,h),d=r.get(h)),u.set(_o6,n(c,d));}}return u;}}},{key:"isValidBroadcast",value:function isValidBroadcast(_e35,t){var r=_e35.length,n=t.length;if(r>n)return!1;for(var i=1;i<=r;i++)if(1!==_e35[r-i]&&_e35[r-i]!==t[n-i])return!1;return!0;}},{key:"getBroadcastDims",value:function getBroadcastDims(_e36,t){var r=_e36.length,n=[];for(var i=0;i<r;i++){var o=r-1-i,_a7=_e36[o]||1;(t[t.length-1-i]||1)>1&&1===_a7&&n.unshift(o);}return n;}}]);return e;}(),ro=/*#__PURE__*/function(){function ro(){_classCallCheck(this,ro);}_createClass(ro,null,[{key:"getShapeOfGemmResult",value:function getShapeOfGemmResult(e,t,r,n,i){if(2!==e.length||2!==r.length)throw new Error("shape need to be of size 2");var o,a,s;t?(o=e[1],a=e[0]):(o=e[0],a=e[1]);var u=-1;if(n?(s=r[0],u=1):(s=r[1],u=0),r[u]!==a)throw new Error("dimension mismatch");if(o<=0||s<=0||a<=0)throw new Error("invalid shape specified");if(i&&!Ke.isValidBroadcast(i,[o,s]))throw new Error("gemm: invalid bias shape for broadcast");return[o,s,a];}}]);return ro;}(),Ve=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);}_createClass(e,null,[{key:"tensorDataTypeFromProto",value:function tensorDataTypeFromProto(_e38){switch(_e38){case we.onnx.TensorProto.DataType.INT8:return"int8";case we.onnx.TensorProto.DataType.UINT8:return"uint8";case we.onnx.TensorProto.DataType.BOOL:return"bool";case we.onnx.TensorProto.DataType.INT16:return"int16";case we.onnx.TensorProto.DataType.UINT16:return"uint16";case we.onnx.TensorProto.DataType.INT32:return"int32";case we.onnx.TensorProto.DataType.UINT32:return"uint32";case we.onnx.TensorProto.DataType.FLOAT:return"float32";case we.onnx.TensorProto.DataType.DOUBLE:return"float64";case we.onnx.TensorProto.DataType.STRING:return"string";case we.onnx.TensorProto.DataType.INT64:return"int32";case we.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: ".concat(we.onnx.TensorProto.DataType[_e38]));}}},{key:"tensorDataTypeStringToEnum",value:function tensorDataTypeStringToEnum(_e39){switch(_e39){case"int8":return we.onnx.TensorProto.DataType.INT8;case"uint8":return we.onnx.TensorProto.DataType.UINT8;case"bool":return we.onnx.TensorProto.DataType.BOOL;case"int16":return we.onnx.TensorProto.DataType.INT16;case"uint16":return we.onnx.TensorProto.DataType.UINT16;case"int32":return we.onnx.TensorProto.DataType.INT32;case"uint32":return we.onnx.TensorProto.DataType.UINT32;case"float32":return we.onnx.TensorProto.DataType.FLOAT;case"float64":return we.onnx.TensorProto.DataType.DOUBLE;case"string":return we.onnx.TensorProto.DataType.STRING;case"int64":return we.onnx.TensorProto.DataType.INT64;case"uint64":return we.onnx.TensorProto.DataType.UINT64;default:throw new Error("unsupported data type: ".concat(_e39));}}},{key:"tensorDimsFromProto",value:function tensorDimsFromProto(_e40){return _e40.map(function(_e41){return jt.isLong(_e41)?_e41.toNumber():_e41;});}},{key:"tensorValueTypeFromProto",value:function tensorValueTypeFromProto(t){return{tensorType:e.tensorDataTypeFromProto(t.elemType),shape:{dims:e.tensorDimsFromProto(t.shape.dim.map(function(_e42){return _e42.dimValue;}))}};}},{key:"tensorDimsFromORTFormat",value:function tensorDimsFromORTFormat(_e43){var t=[];for(var r=0;r<_e43.dimsLength();r++)t.push(ot.longToNumber(_e43.dims(r)));return t;}},{key:"tensorAttributesFromORTFormat",value:function tensorAttributesFromORTFormat(_e44){var t=[];for(var r=0;r<_e44.attributesLength();r++)t.push(_e44.attributes(r));return t;}}]);return e;}(),ot=/*#__PURE__*/function(){function ot(){_classCallCheck(this,ot);}_createClass(ot,null,[{key:"longToNumber",value:function longToNumber(e,t){return jt.isLong(e)?e.toNumber():e instanceof O.Long?jt.fromValue({low:e.low,high:e.high,unsigned:t!==null&&t!==void 0?t:!1}).toNumber():e;}},{key:"isLong",value:function isLong(e){return jt.isLong(e)||e instanceof O.Long;}}]);return ot;}(),z=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);}_createClass(e,null,[{key:"size",value:function size(t){return e.getSizeFromDimensionRange(t,0,t.length);}},{key:"sizeFromDimension",value:function sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error("invalid dimension of ".concat(r," for sizeFromDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,r,t.length);}},{key:"sizeToDimension",value:function sizeToDimension(t,r){if(r<0||r>t.length)throw new Error("invalid dimension of ".concat(r," for sizeToDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,0,r);}},{key:"getSizeFromDimensionRange",value:function getSizeFromDimensionRange(_e45,t,r){var n=1;for(var i=t;i<r;i++){if(_e45[i]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");n*=_e45[i];}return n;}},{key:"computeStrides",value:function computeStrides(_e46){var t=_e46.length;if(0===t)return[];if(1===t)return[1];var r=new Array(t);r[t-1]=1,r[t-2]=_e46[t-1];for(var n=t-3;n>=0;--n)r[n]=r[n+1]*_e46[n+1];return r;}},{key:"transpose",value:function transpose(_e47){return _e47.slice().reverse();}},{key:"indicesToOffset",value:function indicesToOffset(_e48,t,r){void 0===r&&(r=_e48.length);var n=0;for(var i=0;i<r;++i)n+=t[i]*_e48[i];return n;}},{key:"offsetToIndices",value:function offsetToIndices(_e49,t){var r=t.length;if(0===r)return[];if(1===r)return[_e49*t[0]];var n=new Array(t.length);for(var _r88=0;_r88<n.length-1;++_r88)n[_r88]=Math.floor(_e49/t[_r88]),_e49-=n[_r88]*t[_r88];return n[n.length-1]=_e49,n;}},{key:"normalizeAxis",value:function normalizeAxis(_e50,t){if(_e50<-t&&_e50>=t)throw new Error("unsupported axis for this operation.");return _e50<0?_e50+t:_e50;}},{key:"normalizeAxes",value:function normalizeAxes(_e51,t){var _this2=this;return _e51.map(function(_e52){return _this2.normalizeAxis(_e52,t);});}},{key:"incrementIndex",value:function incrementIndex(_e53,t,r){if(0===t.length||0===_e53.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===r)r=t.length;else if(r<=0||r>t.length)throw new Error("Incorrect axis to increment on");for(var n=r-1;n>=0&&(_e53[n]++,!(_e53[n]<t[n]));--n)_e53[n]=0;}},{key:"calculateReshapedDims",value:function calculateReshapedDims(t,r){if(0===r.length){if(0===t.length||1===e.size(t))return[];throw new Error("cannot reshape to a scalar Tensor");}var n=r.length,i=new Array(n),o=-1,a=1;for(var _e66=0;_e66<n;_e66++){if(r[_e66]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===r[_e66]){if(-1!==o)throw new Error("at most one dimension in shape hints can be -1");o=_e66;}else{if(0===r[_e66]){if(_e66>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");i[_e66]=t[_e66];}else i[_e66]=r[_e66];a*=i[_e66];}}var s=e.size(t);if(-1!==o){if(s%a!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: [".concat(t,"] Output shape: [").concat(r,"]"));i[o]=s/a;}else if(a!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return i;}},{key:"sortBasedOnPerm",value:function sortBasedOnPerm(_e55,t){return t?t.map(function(t){return _e55[t];}):_e55.slice().reverse();}},{key:"padShape",value:function padShape(_e56,t){var r=_e56.length;return _e56.map(function(_e57,n){return _e57+t[n]+t[n+r];});}},{key:"areEqual",value:function areEqual(_e58,t){return _e58.length===t.length&&_e58.every(function(_e59,r){return _e59===t[r];});}},{key:"validateDimsAndCalcSize",value:function validateDimsAndCalcSize(_e60){if(_e60.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var t=1;var _iterator15=_createForOfIteratorHelper(_e60),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var r=_step15.value;if(!Number.isInteger(r))throw new TypeError("Invalid shape: ".concat(r," is not an integer"));if(r<0||r>2147483647)throw new TypeError("Invalid shape: length ".concat(r," is not allowed"));t*=r;}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return t;}},{key:"flattenShape",value:function flattenShape(_e61,t){t<0&&(t+=_e61.length);var r=_e61.reduce(function(_e62,t){return _e62*t;},1),n=_e61.slice(t).reduce(function(_e63,t){return _e63*t;},1);return[r/n,n];}},{key:"squeezeShape",value:function squeezeShape(t,r){var n=new Array();r=e.normalizeAxes(r,t.length);for(var _e67=0;_e67<t.length;_e67++){var i=r.indexOf(_e67)>=0;if(i&&1!==t[_e67])throw new Error("squeeze an axis of size different than 1");(0===r.length&&t[_e67]>1||r.length>0&&!i)&&n.push(t[_e67]);}return n;}},{key:"unsqueezeShape",value:function unsqueezeShape(t,r){var n=new Array(t.length+r.length);n.fill(0);for(var _t61=0;_t61<r.length;_t61++){var _i9=e.normalizeAxis(r[_t61],n.length);if(_i9>=n.length)throw new Error("'axes' has an out of range axis");if(0!==n[_i9])throw new Error("'axes' has a duplicate axis");n[_i9]=1;}var i=0;for(var _e68=0;_e68<n.length;_e68++)0===n[_e68]&&(n[_e68]=t[i++]);if(i!==t.length)throw new Error("the unsqueezed dimension could not be established");return n;}}]);return e;}(),pn=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);}_createClass(e,null,[{key:"splitShape",value:function splitShape(t,r,n,i){if(0===n.length){if(!i)throw new Error("need to know number of outputs when the 'split' attribute is not specified");e.determineSplit(t[r],i,n);}var o=[],a=[0];for(var _e71=0;_e71<n.length;++_e71){0!==_e71&&a.push(a[_e71-1]+n[_e71-1]);var _i10=t.slice();_i10[r]=n[_e71],o.push(_i10);}return[o,a];}},{key:"determineSplit",value:function determineSplit(_e70,t,r){if(_e70%t!=0)throw new Error("cannot split tensor to equal sized parts");for(var n=0;n<t;++n)r.push(_e70/t);}}]);return e;}(),xr=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);}_createClass(e,null,[{key:"adjustPoolAttributes",value:function adjustPoolAttributes(_e72,t,r,n,i,o){if(!_e72&&r.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(_e72)for(var _e80=0;_e80<t.length-2;_e80++)_e80>=r.length?r.push(t[_e80+2]):r[_e80]=t[_e80+2];for(var _e81=0;_e81<r.length;_e81++)if(_e81<n.length){if(n[_e81]<0)throw new Error("strides should be greater than or equal to 1");}else n.push(1);for(var _e82=0;_e82<r.length;_e82++)if(_e82<i.length){if(i[_e82]<0)throw new Error("dilations should be greater than or equal to 1");}else i.push(1);for(var _e83=0;_e83<2*r.length;_e83++)if(_e83<o.length){if(o[_e83]<0)throw new Error("pad should be greater than or equal to 1");}else o.push(0);for(var _e84=0;_e84<r.length;_e84++){if(r[_e84]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[_e84]>=r[_e84]||o[_e84+r.length]>=r[_e84])throw new Error("pads should be smaller than kernel");}}},{key:"adjustPadsBasedOnAutoPad",value:function adjustPadsBasedOnAutoPad(t,r,n,i,o,a){if(a){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var s=0;s<t.length-2;s++)e.adjustPadAndReturnShape(t[s+2],r[s],n[s],i[s],o,s,s+t.length-2,a);}}},{key:"computePoolOutputShape",value:function computePoolOutputShape(t,r,n,i,o,a,s){if(r.length<=0)throw new Error("input shape must be of size greater than 0");var u=[r[0],r[1]];return e.computeShapeHelper(t,r,u,n,i,o,a,s),u;}},{key:"computeConvOutputShape",value:function computeConvOutputShape(t,r,n,i,o,a,s){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[t[0],r[0]];return e.computeShapeHelper(!1,t,u,n,i,o,a,s),u;}},{key:"computeShapeHelper",value:function computeShapeHelper(t,r,n,i,o,a,s,u){if(t)for(var _e85=0;_e85<r.length-2;_e85++)n.push(1);else for(var _t62=0;_t62<r.length-2;_t62++)n.push(e.adjustPadAndReturnShape(r[_t62+2],i[_t62],o[_t62],a[_t62],s,_t62,_t62+r.length-2,u));}},{key:"adjustPadAndReturnShape",value:function adjustPadAndReturnShape(_e79,t,r,n,i,o,a,s){var u=r*(n-1)+1;if(!s||"NOTSET"===s)return Math.floor((_e79+i[o]+i[a]-u)/t+1);switch(s){case"VALID":return i[o]=0,i[a]=0,Math.floor((_e79-u)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==r)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{var _r89=((_e79+t-1)/t-1)*t+n-_e79;return i[o]=Math.floor("SAME_LOWER"===s?(_r89+1)/2:_r89/2),i[a]=_r89-i[o],Math.floor((_e79+_r89-n)/t+1);}default:throw new Error("Unsupported AutoPad type");}}}]);return e;}(),wr=-34028234663852886e22,vr=34028234663852886e22;});function eh(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(e));}}function Ru(e){switch(e){case re.onnx.TensorProto.DataType.UINT8:case re.onnx.TensorProto.DataType.INT8:case re.onnx.TensorProto.DataType.BOOL:return 1;case re.onnx.TensorProto.DataType.UINT16:case re.onnx.TensorProto.DataType.INT16:return 2;case re.onnx.TensorProto.DataType.FLOAT:case re.onnx.TensorProto.DataType.INT32:case re.onnx.TensorProto.DataType.UINT32:return 4;case re.onnx.TensorProto.DataType.INT64:case re.onnx.TensorProto.DataType.DOUBLE:case re.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(re.onnx.TensorProto.DataType[e]));}}function th(e,t){return new(Uu(t))(e);}function Uu(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error");}}function wi(e,t){if(t===re.onnx.TensorProto.DataType.INT64||t===xi.TensorDataType.INT64){if(e.greaterThanOrEqual(2147483648)||e.lessThan(-2147483648))throw new TypeError("int64 is not supported");}else{if(t!==re.onnx.TensorProto.DataType.UINT32&&t!==xi.TensorDataType.UINT32&&t!==re.onnx.TensorProto.DataType.UINT64&&t!==xi.TensorDataType.UINT64)throw new TypeError("not a LONG type: ".concat(re.onnx.TensorProto.DataType[t]));if(e.greaterThanOrEqual(4294967296)||e.lessThan(0))throw new TypeError("uint64 is not supported");}return e.toNumber();}function Mu(e,t,r){switch(t){case re.onnx.TensorProto.DataType.BOOL:case re.onnx.TensorProto.DataType.UINT8:return e.getUint8(r);case re.onnx.TensorProto.DataType.INT8:return e.getInt8(r);case re.onnx.TensorProto.DataType.UINT16:return e.getUint16(r,!0);case re.onnx.TensorProto.DataType.INT16:return e.getInt16(r,!0);case re.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(r,!0);case re.onnx.TensorProto.DataType.INT32:return e.getInt32(r,!0);case re.onnx.TensorProto.DataType.UINT32:return e.getUint32(r,!0);case re.onnx.TensorProto.DataType.INT64:return wi(jt.fromBits(e.getUint32(r,!0),e.getUint32(r+4,!0),!1),t);case re.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(r,!0);case re.onnx.TensorProto.DataType.UINT64:return wi(jt.fromBits(e.getUint32(r,!0),e.getUint32(r+4,!0),!0),t);default:throw new Error("cannot read from DataView for type ".concat(re.onnx.TensorProto.DataType[t]));}}var Gu,re,xi,Ce,_r=L(function(){Gu=Nr(Ps()),ii(),un(),re=Nr(Ur()),fe(),xi=H.experimental.fbs,Ce=/*#__PURE__*/function(){function e(_e86,t,r,n,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:Gu.Guid.create();_classCallCheck(this,e);this.dims=_e86,this.type=t,this.dataProvider=r,this.asyncDataProvider=n,this.cache=i,this.dataId=o,this.size=z.validateDimsAndCalcSize(_e86);var a=this.size,s=void 0===r&&void 0===n&&void 0===i;if(void 0!==i&&i.length!==a)throw new RangeError("Input dims doesn't match data length.");if("string"===t){if(!(void 0===i||Array.isArray(i)&&i.every(function(_e87){return"string"==typeof _e87;})))throw new TypeError("cache should be a string array");s&&(this.cache=new Array(a));}else{if(void 0!==i){var _e88=Uu(t);if(!(i instanceof _e88))throw new TypeError("cache should be type ".concat(_e88.name));}if(s){var _e89=new ArrayBuffer(a*eh(t));this.cache=th(_e89,t);}}}_createClass(e,[{key:"data",get:function get(){if(void 0===this.cache){var _e90=this.dataProvider(this.dataId);if(_e90.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=_e90;}return this.cache;}},{key:"stringData",get:function get(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data;}},{key:"integerData",get:function get(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)");}}},{key:"floatData",get:function get(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)");}}},{key:"numberData",get:function get(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)");}},{key:"get",value:function get(_e91){return this.data[z.indicesToOffset(_e91,this.strides)];}},{key:"set",value:function set(_e92,t){this.data[z.indicesToOffset(_e92,this.strides)]=t;}},{key:"getData",value:function(){var _getData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(){return _regeneratorRuntime().wrap(function _callee25$(_context25){while(1)switch(_context25.prev=_context25.next){case 0:_context25.t0=void 0===this.cache;if(!_context25.t0){_context25.next=5;break;}_context25.next=4;return this.asyncDataProvider(this.dataId);case 4:this.cache=_context25.sent;case 5:return _context25.abrupt("return",this.cache);case 6:case"end":return _context25.stop();}},_callee25,this);}));function getData(){return _getData2.apply(this,arguments);}return getData;}()},{key:"strides",get:function get(){return this._strides||(this._strides=z.computeStrides(this.dims)),this._strides;}}],[{key:"fromProto",value:function fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");var r=Ve.tensorDataTypeFromProto(t.dataType),n=Ve.tensorDimsFromProto(t.dims),i=new e(n,r);if("string"===r)t.stringData.forEach(function(_e93,t){i.data[t]=dn(_e93);});else if(t.rawData&&"number"==typeof t.rawData.byteLength&&t.rawData.byteLength>0){var _e94=i.data,_r90=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),_n8=Ru(t.dataType),o=t.rawData.byteLength/_n8;if(t.rawData.byteLength%_n8!=0)throw new Error("invalid buffer length");if(_e94.length!==o)throw new Error("buffer length mismatch");for(var _i11=0;_i11<o;_i11++){var _o7=Mu(_r90,t.dataType,_i11*_n8);_e94[_i11]=_o7;}}else{var _e95;switch(t.dataType){case re.onnx.TensorProto.DataType.FLOAT:_e95=t.floatData;break;case re.onnx.TensorProto.DataType.INT32:case re.onnx.TensorProto.DataType.INT16:case re.onnx.TensorProto.DataType.UINT16:case re.onnx.TensorProto.DataType.INT8:case re.onnx.TensorProto.DataType.UINT8:case re.onnx.TensorProto.DataType.BOOL:_e95=t.int32Data;break;case re.onnx.TensorProto.DataType.INT64:_e95=t.int64Data;break;case re.onnx.TensorProto.DataType.DOUBLE:_e95=t.doubleData;break;case re.onnx.TensorProto.DataType.UINT32:case re.onnx.TensorProto.DataType.UINT64:_e95=t.uint64Data;break;default:throw new Error("unspecific error");}if(null==_e95)throw new Error("failed to populate data from a tensorproto value");var _r91=i.data;if(_r91.length!==_e95.length)throw new Error("array length mismatch");for(var _n9=0;_n9<_e95.length;_n9++){var _i12=_e95[_n9];jt.isLong(_i12)?_r91[_n9]=wi(_i12,t.dataType):_r91[_n9]=_i12;}}return i;}},{key:"fromData",value:function fromData(t,r,n){return new e(r,n,void 0,void 0,t);}},{key:"fromOrtTensor",value:function fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");var r=Ve.tensorDimsFromORTFormat(t),n=Ve.tensorDataTypeFromProto(t.dataType()),i=new e(r,n);if("string"===n)for(var _e98=0;_e98<t.stringDataLength();_e98++)i.data[_e98]=t.stringData(_e98);else if(t.rawDataArray()&&"number"==typeof t.rawDataLength()&&t.rawDataLength()>0){var _e97=i.data,_r92=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),_n10=Ru(t.dataType()),o=t.rawDataLength()/_n10;if(t.rawDataLength()%_n10!=0)throw new Error("invalid buffer length");if(_e97.length!==o)throw new Error("buffer length mismatch");for(var _i13=0;_i13<o;_i13++){var _o8=Mu(_r92,t.dataType(),_i13*_n10);_e97[_i13]=_o8;}}return i;}}]);return e;}();});function q(e){return 1===e?rh:nh;}function zu(e){var t=q(e);return"".concat(t.version,"\n      precision highp float;\n      ").concat(t.attribute," vec3 position;\n      ").concat(t.attribute," vec2 textureCoord;\n\n      ").concat(t.varyingVertex," vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }");}function Wu(e){var t=q(e);return"".concat(t.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(t.varyingFrag," vec2 TexCoords;\n    ").concat(t.outputDeclaration,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    ");}function Vu(e,t){return"\n  void main() {\n    int indices[".concat(t,"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ").concat(q(e).output," = result;\n  }\n  ");}var rh,nh,ve=L(function(){rh={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},nh={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};}),ae=L(function(){});function vi(_x31){return _vi.apply(this,arguments);}function _vi(){_vi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee70(e){var t,r,_args73=arguments;return _regeneratorRuntime().wrap(function _callee70$(_context73){while(1)switch(_context73.prev=_context73.next){case 0:t=_args73.length>1&&_args73[1]!==undefined?_args73[1]:function(e){return 0;};r=_args73.length>2?_args73[2]:undefined;return _context73.abrupt("return",new Promise(function(n,i){var o=0,a=function a(){if(e())return void n();o++;var s=t(o);null!=r&&o>=r?i():setTimeout(a,s);};a();}));case 3:case"end":return _context73.stop();}},_callee70);}));return _vi.apply(this,arguments);}function no(e){return zr(_typeof(e)<"u"&&0!==e.length,function(){return"empty string found for sampler name";}),"get"+e.charAt(0).toUpperCase()+e.slice(1);}function Hu(e){return zr(_typeof(e)<"u"&&0!==e.length,function(){return"empty string found for sampler name";}),"get"+e.charAt(0).toUpperCase()+e.slice(1)+"AtOutCoords";}function Wr(e,t){var r=JSON.parse(JSON.stringify(e));return r=t,r;}function Vr(e,t){return t.map(function(t){return e[t];}).join(", ");}function Je(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"));}function Dt(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:6;return["x","y","z","w","u","v"].slice(0,e);}var Bt=L(function(){fe();});function oh(e,t){return Dt(t).map(function(t){return"".concat(e,".").concat(t);});}function Hr(e,t){return 1===t?[e]:oh(e,t);}function kt(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  ";}var Or=L(function(){Bt();});function ah(e,t,r){if(0===e)return"false";if(1===e)return"rc > ".concat(t[0]);var n="";for(var i=e-2;i<e;i++)n+="".concat(r[i]," >= ").concat(t[i-e+2]),i<e-1&&(n+="||");return n;}function sh(e,t){var r=e.length;if(0===r)return"getA(), 0, 0, 0";if(1===r)return"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0");var n="";if(r>2)for(var _e99=0;_e99<r-2;++_e99)n+="".concat(t[_e99],",");return"getA(".concat(n,"r, c),\n          rEdge ? 0. : getA(").concat(n,"rp1, c),\n          cEdge ? 0. : getA(").concat(n,"r, cp1),\n          rEdge || cEdge ? 0. : getA(").concat(n,"rp1, cp1)");}function uh(e,t,r,n){return 0===e||1===e?"":"\n    int r = ".concat(t[e-2],";\n    int c = ").concat(t[e-1],";\n    int rp1 = ").concat(t[e-2]," + 1;\n    int cp1 = ").concat(t[e-1]," + 1;\n    bool rEdge = rp1 >= ").concat(n,";\n    bool cEdge = cp1 >= ").concat(r,";\n    ");}var ju,ih,qu,Yu=L(function(){ve(),ae(),Bt(),Or(),ju={name:"pack",inputNames:["A"],inputTypes:[1]},ih=function ih(e,t){var r,n=q(e.session.backend.glContext.version),i=t.dims,o=i.length,a=t.dims.length,s=Je(a),u=Hr("rc",a),l=uh(a,u,i[i.length-2],i[i.length-1]);r=0===o?[1,1]:1===o?[i[0],1]:[i[a-1],i[a-2]];var h=ah(a,r,u),c=sh(i,u),d="\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n\n          if(").concat(h,") {\n            ").concat(n.output," = vec4(0);\n          } else {\n            ").concat(l,"\n\n            ").concat(n.output," = vec4(").concat(c,");\n          }\n        }\n      ");return _objectSpread(_objectSpread({},ju),{},{hasMain:!0,output:{dims:t.dims,type:t.type,textureType:2},shaderSource:d});},qu=function qu(e,t){return _objectSpread(_objectSpread({},ju),{},{get:function get(){return ih(e,t);}});};});function _i(e){if(0===e.length)return[1,1,1];var t=1;for(var r=0;r<e.length-2;++r)t*=e[r];return[t,e.length>1?e[e.length-2]:1,e[e.length-1]];}function Ku(e,t){var r=!1;return r=0===e.length||0===t.length||(e.length<2||t.length<2?e[e.length-1]===t[t.length-1]:e[e.length-1]===t[t.length-1]&&e[e.length-2]===t[t.length-2]),r;}function ch(e){var t=z.computeStrides(e),r=["b","r","c"],n="index";return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t.map(function(e,i){return"".concat("int ".concat(r[i]," = ").concat(n," / ").concat(e),"; ",i===t.length-1?"int ".concat(r[i+1]," = ").concat(n," - ").concat(r[i]," * ").concat(e):"index -= ".concat(r[i]," * ").concat(e),";");}).join(""),"\n      return ivec3(b, r, c);\n    }\n  ");}function ph(e){var t=z.computeStrides(e);return"\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ".concat(t[0]," + coords.z * ").concat(t[1]," + coords.y;\n  }\n");}var lh,fh,Xu,Ju=L(function(){fe(),ve(),ae(),Or(),lh=function lh(e){return{name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:"".concat(e)};},fh=function fh(e,t,r,n){var i=t.dims,o=n,a="";for(var _e100=0;_e100<4;_e100++){var _t63="";switch(_e100){case 0:_t63="outputCoords = rc;";break;case 1:_t63="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:_t63="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:_t63="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error();}a+="\n        ".concat(_t63,"\n        ").concat(_e100>0?"if(outputCoords.y < rows && outputCoords.z < cols){":"","\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(_e100,"] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ").concat(_e100>0?"}":"","\n      ");}var s=q(e.session.backend.glContext.version),u="\n      ".concat(ch(i),"\n      ").concat(ph(o),"\n      ").concat(kt(),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ").concat(o[2],";\n        int cols = ").concat(o[1],";\n\n        ").concat(a,"\n        ").concat(s.output," = result;\n      }\n    ");return _objectSpread(_objectSpread({},r),{},{output:{dims:o,type:t.type,textureType:2},shaderSource:u,hasMain:!0});},Xu=function Xu(e,t,r){var n=lh(r);return _objectSpread(_objectSpread({},n),{},{get:function get(){return fh(e,t,n,r);}});};}),Oi,Zu=L(function(){ve(),ae(),Oi=function Oi(e,t){var r=t.shape,n=q(e.session.backend.glContext.version),i="\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ".concat(n.texture2D,"(X,TexCoords).r;\n      ").concat(n.output," = encodeAsUint8(value);\n    }"),o={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:r,type:t.tensor.type,textureType:3},shaderSource:i,hasMain:!0};return e.executeProgram(o,[t.tensor]);};});function hh(e,t){if(1===e)return"rc";var r="";for(var n=0;n<e;n++)r+=t[n],n<e-1&&(r+=",");return r;}var Qu,dh,el,tl=L(function(){ve(),ae(),Bt(),Or(),Qu={name:"unpack",inputNames:["A"],inputTypes:[2]},dh=function dh(e,t){var r=t.dims.length,n=Hr("rc",r),i=n.slice(-2),o=Je(r),a=kt(),s=0===t.dims.length?"":hh(r,n),u=r<=1?"rc":"vec2(".concat(i.join(","),")"),l="\n    ".concat(a,"\n    void main() {\n      ").concat(o," rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(").concat(s,");\n\n       ").concat(q(e.session.backend.glContext.version).output," = vec4(getChannel(packedInput, ").concat(u,"), 0, 0, 0);\n     }\n   ");return _objectSpread(_objectSpread({},Qu),{},{hasMain:!0,output:{dims:t.dims,type:t.type,textureType:0},shaderSource:l});},el=function el(e,t){return _objectSpread(_objectSpread({},Qu),{},{get:function get(){return dh(e,t);}});};}),oo,hn,io,mn=L(function(){dt(),oo=/*#__PURE__*/function(){function oo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;_classCallCheck(this,oo);if(1===t)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=t;else{if(4!==t)throw new Error("Invalid number of channels: ".concat(t));this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=t;}}_createClass(oo,[{key:"encode",value:function encode(e,t){var r,n;return e.constructor!==Float32Array&&(pe.warning("Encoder","data was not of type Float32; creating new Float32Array"),n=new Float32Array(e)),t*this.channelSize>e.length?(pe.warning("Encoder","Source data too small. Allocating larger array"),n=e,r=this.allocate(t*this.channelSize),n.forEach(function(e,t){return r[t]=e;})):(n=e,r=n),r;}},{key:"allocate",value:function allocate(e){return new Float32Array(4*e);}},{key:"decode",value:function decode(e,t){return 1===this.channelSize?e.filter(function(e,t){return t%4==0;}).subarray(0,t):e.subarray(0,t);}}]);return oo;}(),hn=/*#__PURE__*/function(){function hn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,hn);if(1!==t&&4!==t)throw new Error("Invalid number of channels: ".concat(t));this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=t,this.textureType=r||e.FLOAT;}_createClass(hn,[{key:"encode",value:function encode(e,t){var r=e;return 1===this.channelSize&&(pe.verbose("Encoder","Exploding into a larger array"),r=this.allocate(t),e.forEach(function(e,t){return r[4*t]=e;})),r;}},{key:"allocate",value:function allocate(e){return new Float32Array(4*e);}},{key:"decode",value:function decode(e,t){return 1===this.channelSize?e.filter(function(e,t){return t%4==0;}).subarray(0,t):e.subarray(0,t);}}]);return hn;}(),io=/*#__PURE__*/function(){function io(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;_classCallCheck(this,io);if(this.channelSize=4,1===t)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;else{if(4!==t)throw new Error("Invalid number of channels: ".concat(t));this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=t;}}_createClass(io,[{key:"encode",value:function encode(e,t){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);}},{key:"allocate",value:function allocate(e){return new Uint8Array(e*this.channelSize);}},{key:"decode",value:function decode(e,t){if(e instanceof Uint8Array)return e.subarray(0,t);throw new Error("Invalid array type: ".concat(e.constructor));}}]);return io;}();}),bn,rl,Ii,nl=L(function(){fe(),ae(),bn=function bn(e,t,r){var n=0===r||1===r?1:4,i=2===r,o=1===r||2===r,a=4===r?t.length-1:void 0,s=4===r?t.map(function(e,r){return r===t.length-1?4*e:e;}):void 0;return Ii(e,t,n,s,{isPacked:i,reverseWH:o,breakAxis:a});},rl=function rl(e,t,r){var n=bn(e,t,r);return[n.width,n.height];},Ii=function Ii(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=arguments.length>3?arguments[3]:undefined;var i=arguments.length>4?arguments[4]:undefined;var o=!(!i||!i.isPacked),_e$computeTextureWH=e.computeTextureWH(o&&n||t,i),_e$computeTextureWH2=_slicedToArray(_e$computeTextureWH,2),a=_e$computeTextureWH2[0],s=_e$computeTextureWH2[1],u=t.length,l=t.slice(0);if(0===u&&(l=[1]),1===r)n=t;else if(o){if(4!==r)throw new Error("a packed texture must be 4-channel");n=t,u>0&&(l[u-1]=Math.ceil(l[u-1]/2)),u>1&&(l[u-2]=Math.ceil(l[u-2]/2));}else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:a,height:s,channels:r,isPacked:o,shape:l,strides:z.computeStrides(l),unpackedShape:n,reversedWH:i&&i.reverseWH};};}),bh,ao,il=L(function(){dt(),_r(),fe(),Yu(),Ju(),Zu(),tl(),mn(),nl(),ae(),bh=function bh(e,t){var r=t.map(function(e){return"".concat(e.unpackedShape.join(","),";").concat(e.width,"x").concat(e.height);}).join("_"),n=e.name;return e.cacheHint&&(n+="["+e.cacheHint+"]"),n+=":"+r,n;},ao=/*#__PURE__*/function(){function ao(e){_classCallCheck(this,ao);this.session=e,this.packedTextureDataCache=new Map(),this.unpackedTextureDataCache=new Map();}_createClass(ao,[{key:"calculateTextureWidthAndHeight",value:function calculateTextureWidthAndHeight(e,t){return rl(this.session.layoutStrategy,e,t);}},{key:"executeProgram",value:function executeProgram(e,t){if(t.length<e.inputNames.length)throw new Error("Input size mustn't be less than ".concat(e.inputNames.length,"."));if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");var r=[];for(var _n11=0;_n11<e.inputNames.length;++_n11)r[_n11]=this.getOrCreateTextureData(t[_n11],e.inputTypes[_n11]);var n=bh(e,r),i=this.session.programManager.getArtifact(n),o=i?i.programInfo:"function"==typeof e.get?e.get():e,a=bn(this.session.layoutStrategy,o.output.dims,o.output.textureType),s=this.createTextureData(a,o.output.type);return i||(i=this.session.programManager.build(o,r,s),this.session.programManager.setArtifact(n,i)),this.runProgram(i,r,s),s;}},{key:"run",value:function run(e,t){return this.executeProgram(e,t).tensor;}},{key:"runProgram",value:function runProgram(e,t,r){for(var _r93=0;_r93<t.length;++_r93)if(!!t[_r93].isPacked!=(2===e.programInfo.inputTypes[_r93]))throw new Error("input[".concat(_r93,"] property packed inconsistent"));if(!!r.isPacked!=(2===e.programInfo.output.textureType))throw new Error("output property packed inconsistent");this.session.programManager.run(e,t,r);}},{key:"getOrCreateTextureData",value:function getOrCreateTextureData(e,t){var r=this.getTextureData(e.dataId,2===t);if(!r&&(r=this.getTextureData(e.dataId,2!==t),r))return 2===t?this.pack(r):this.unpack(r);if(!r){var n=bn(this.session.layoutStrategy,e.dims,t);if(4===t){var _r94=e.dims;if(4===_r94.length){var _n12=[_r94[0],Math.ceil(_r94[1]*_r94[2]*_r94[3]/4)],i=bn(this.session.layoutStrategy,_n12,t),o=e.numberData;if(_r94[1]*_r94[2]*_r94[3]%4!=0){var _t64=_r94[0],_n13=_r94[1]*_r94[2]*_r94[3],_i14=4*Math.ceil(1*_n13/4);o=new Float32Array(_t64*_i14);for(var _r95=0;_r95<_t64;++_r95){var _t65=_r95*_n13,_a8=_r95*_i14+_r95%1*_n13;o.set(e.numberData.subarray(_t65,_t65+_n13),_a8);}}return this.createTextureData(i,e.type,o,e,1);}}if(2===t){var _t66=Ii(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),_n14=this.createTextureData(_t66,e.type,e.numberData,e,1);r=this.pack(_n14);}else r=this.createTextureData(n,e.type,e.numberData,e,1);}return r;}},{key:"createTextureDataFromLayoutBindTensor",value:function createTextureDataFromLayoutBindTensor(e,t,r,n){return this.createTextureData(e,t,r,n,1);}},{key:"createTextureData",value:function createTextureData(e,t,r,n,i){pe.verbose("InferenceHandler","Creating TextureData: layout:[".concat(JSON.stringify(e),"]"));var o=this.session.textureManager.createTextureFromLayout(t,e,r,i);return this.createTextureDataFromTexture(e,t,o,n);}},{key:"reshapeUnpacked",value:function reshapeUnpacked(e,t){var r=this.getOrCreateTextureData(e,0),n={channels:r.channels,height:r.height,width:r.width,shape:0!==t.length?t:[1],strides:z.computeStrides(t),unpackedShape:t};return this.createTextureDataFromTexture(n,e.type,r.texture).tensor;}},{key:"reshapePacked",value:function reshapePacked(e,t){var r=this.getOrCreateTextureData(e,2);if(Ku(e.dims,t)){var _n15={channels:r.channels,height:r.height,width:r.width,shape:0!==t.length?t:[1],strides:z.computeStrides(t),unpackedShape:t,isPacked:!0};return this.createTextureDataFromTexture(_n15,e.type,r.texture).tensor;}var n=_i(e.dims),i=_i(t),o=this.reshapePacked(e,n),a=this.run(Xu(this,o,i),[o]);return this.reshapePacked(a,t);}},{key:"cast",value:function cast(e,t){var r=this.getOrCreateTextureData(e,0);return this.createTextureDataFromTexture(r,t,r.texture).tensor;}},{key:"createTextureDataFromTexture",value:function createTextureDataFromTexture(e,t,r,n,i){var _this3=this;var o=_objectSpread(_objectSpread({},e),{},{tensor:n||new Ce(e.unpackedShape,t,function(e){return _this3.readTexture(o);},/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(e){return _regeneratorRuntime().wrap(function _callee26$(_context26){while(1)switch(_context26.prev=_context26.next){case 0:return _context26.abrupt("return",_this3.readTextureAsync(o));case 1:case"end":return _context26.stop();}},_callee26);}));return function(_x32){return _ref6.apply(this,arguments);};}(),void 0,i),texture:r});return this.setTextureData(o.tensor.dataId,o,e.isPacked),o;}},{key:"getTextureData",value:function getTextureData(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return this.session.isInitializer(e)?this.session.getTextureData(e,t):t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e);}},{key:"setTextureData",value:function setTextureData(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;this.session.isInitializer(e)?this.session.setTextureData(e,t,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,t);}},{key:"isTextureLayoutCached",value:function isTextureLayoutCached(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return!!this.getTextureData(e.dataId,t);}},{key:"dispose",value:function dispose(){var _this4=this;this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(function(e){return _this4.session.textureManager.releaseTexture(e);}),this.packedTextureDataCache=new Map(),this.unpackedTextureDataCache.forEach(function(e){return _this4.session.textureManager.releaseTexture(e);}),this.unpackedTextureDataCache=new Map();}},{key:"readTexture",value:function readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(Oi(this,e));}},{key:"readTextureAsync",value:function(){var _readTextureAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(e){return _regeneratorRuntime().wrap(function _callee27$(_context27){while(1)switch(_context27.prev=_context27.next){case 0:return _context27.abrupt("return",e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(Oi(this,e)));case 1:case"end":return _context27.stop();}},_callee27,this);}));function readTextureAsync(_x33){return _readTextureAsync.apply(this,arguments);}return readTextureAsync;}()},{key:"pack",value:function pack(e){return this.executeProgram(qu(this,e.tensor),[e.tensor]);}},{key:"unpack",value:function unpack(e){return this.executeProgram(el(this,e.tensor),[e.tensor]);}}]);return ao;}();}),Si,te,Ge=L(function(){Si=/*#__PURE__*/function(){function Si(e){_classCallCheck(this,Si);Object.assign(this,e);}_createClass(Si,[{key:"cacheKey",get:function get(){var _this5=this;return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(function(e){return"".concat(_this5[e]);}).join(";")),this.key;}}]);return Si;}(),te=function te(e){return new Si(e);};}),al,sl,ul,gh,yh,ll=L(function(){Ge(),ve(),ae(),al={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},sl=function sl(e,t,r){return yh(t),[e.run(_objectSpread(_objectSpread({},al),{},{cacheHint:r.cacheKey,get:function get(){return gh(e,t,r);}}),t)];},ul=function ul(e){var t=e.attributes.getFloat("epsilon",1e-5),r=e.attributes.getFloat("momentum",.9),n=e.attributes.getInt("spatial",1);return te({epsilon:t,momentum:r,spatial:n});},gh=function gh(e,t,r){var n=q(e.session.backend.glContext.version),i=t[0].dims.length,_e$calculateTextureWi=e.calculateTextureWidthAndHeight(t[1].dims,0),_e$calculateTextureWi2=_slicedToArray(_e$calculateTextureWi,2),o=_e$calculateTextureWi2[0],a=_e$calculateTextureWi2[1],s="\n  float process(int[".concat(i,"] indices) {\n    vec2 position = offsetToCoords(indices[1], ").concat(o,", ").concat(a,");\n    float scale = getColorAsFloat(").concat(n.texture2D,"(Scale, position));\n    float mean = getColorAsFloat(").concat(n.texture2D,"(Mean, position));\n    float variance = getColorAsFloat(").concat(n.texture2D,"(Variance, position));\n    float b = getColorAsFloat(").concat(n.texture2D,"(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(").concat(r.epsilon,")) ) + b;\n  }");return _objectSpread(_objectSpread({},al),{},{output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:s});},yh=function yh(e){if(!e||5!==e.length)throw new Error("BatchNormalization requires 5 inputs.");var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(t.dims.length<3||1!==r.dims.length||1!==n.dims.length||1!==i.dims.length||1!==o.dims.length)throw new Error("invalid input shape.");if(r.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1]||i.dims[0]!==t.dims[1]||o.dims[0]!==t.dims[1])throw new Error("invalid input shape.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==o.type&&"float64"!==o.type)throw new Error("invalid input tensor types.");};}),so,gt,G,gn,uo,qt=L(function(){so=/*#__PURE__*/_createClass(function so(e,t,r,n){_classCallCheck(this,so);this.glContext=e,this.programInfo=t,this.inputTextureLayouts=r,this.outputTextureLayout=n;}),gt=/*#__PURE__*/_createClass(function gt(e){_classCallCheck(this,gt);this.context=e;}),G=/*#__PURE__*/_createClass(function G(e,t){_classCallCheck(this,G);this.routineBody=e,this.dependencies=t;}),gn=/*#__PURE__*/function(){function gn(e,t,r){_classCallCheck(this,gn);this.name=e,this.dependencies=r||[],t&&(this.routineBody=t);}_createClass(gn,[{key:"addDependency",value:function addDependency(e){e&&this.dependencies.push(e);}}]);return gn;}(),uo=/*#__PURE__*/function(){function uo(){_classCallCheck(this,uo);}_createClass(uo,null,[{key:"returnOrderedNodes",value:function returnOrderedNodes(e){if(!e||0===e.length)return[];if(1===e.length)return e;var t=new Set(),r=new Set(),n=new Array();return this.createOrderedNodes(e,t,r,n),n;}},{key:"createOrderedNodes",value:function createOrderedNodes(e,t,r,n){for(var i=0;i<e.length;++i)this.dfsTraverse(e[i],t,r,n);}},{key:"dfsTraverse",value:function dfsTraverse(e,t,r,n){if(!e||r.has(e.name))return;if(t.has(e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");t.add(e.name);var i=e.dependencies;if(i&&i.length>0)for(var _e101=0;_e101<i.length;++_e101)this.dfsTraverse(i[_e101],t,r,n);n.push(e),r.add(e.name),t["delete"](e.name);}}]);return uo;}();});function xh(){var e="add_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a + b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  "),name:e,type:0};}function wh(){var e="div_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a / b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  "),name:e,type:0};}function vh(){var e="mul_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a * b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  "),name:e,type:0};}function _h(){var e="sub_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a - b;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  "),name:e,type:0};}function Oh(){var e="equal_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  "),name:e,type:0};}function Ih(){var e="greater_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  "),name:e,type:0};}function Sh(){var e="less_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  "),name:e,type:0};}function Ah(){var e="and_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  "),name:e,type:0};}function Eh(){var e="or_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  "),name:e,type:0};}function Ph(){var e="xor_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  "),name:e,type:0};}function Dh(){return Fh("pow");}function Lh(){var e="prelu_";return{body:"\n  float ".concat(e,"(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  "),name:e,type:0};}function Fh(e){var t="".concat(e,"_");return{body:"\n  float ".concat(t,"(float a, float b) {\n    return ").concat(e,"(a, b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return ").concat(e,"(v1, v2);\n  }\n  "),name:t,type:0};}var yt,Ch,fl,cl,pl,dl,hl,ml,bl,gl,yl,Tl,xl,wl,vl=L(function(){fe(),qt(),ve(),ae(),yt=function yt(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:t[0].type;var i=arguments.length>4?arguments[4]:undefined;var o=e.session.pack?2:0;return{name:r.name,inputNames:["A","B"],inputTypes:[o,o],cacheHint:i,get:function get(){return Ch(e,t,r,n);}};},Ch=function Ch(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:t[0].type;var i=e.session.pack?2:0,o=!z.areEqual(t[0].dims,t[1].dims),a=t[0].dims,s=e.session.pack;if(o){var _o9=Ke.calcShape(t[0].dims,t[1].dims,!1);if(!_o9)throw new Error("Can't perform binary op on the given tensors");a=_o9;var _u4=a.length,_l3=0!==t[0].dims.length?t[0].dims.length:1,h=0!==t[1].dims.length?t[1].dims.length:1,c=0!==t[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",d=0!==t[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",f=q(e.session.backend.glContext.version),p=s?"\n      ".concat(r.body,"\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ").concat(r.name,"(a, b);\n        ").concat(f.output," = result;\n      }"):"\n      ".concat(r.body,"\n      float process(int indices[").concat(_u4,"]) {\n        int aindices[").concat(_l3,"];\n        int bindices[").concat(h,"];\n        ").concat(c,"\n        ").concat(d,"\n        return ").concat(r.name,"(_A(aindices), _B(bindices));\n      }");return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:a,type:n,textureType:i},shaderSource:p,hasMain:s};}var u=q(e.session.backend.glContext.version),l="\n    ".concat(r.body,"\n    void main() {\n      vec4 v1 = ").concat(u.texture2D,"(A, TexCoords);\n      vec4 v2 = ").concat(u.texture2D,"(B, TexCoords);\n      vec4 result = ").concat(r.name,"(v1, v2);\n      ").concat(u.output," = result;\n    }\n    ");return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:t[0].dims,type:n,textureType:i},shaderSource:l,hasMain:!0};},fl=function fl(e,t){return[e.run(yt(e,t,xh()),t)];},cl=function cl(e,t){return[e.run(yt(e,t,Ah(),"bool"),t)];},pl=function pl(e,t){return[e.run(yt(e,t,wh()),t)];},dl=function dl(e,t){return[e.run(yt(e,t,Oh(),"bool"),t)];},hl=function hl(e,t){return[e.run(yt(e,t,Ih(),"bool"),t)];},ml=function ml(e,t){return[e.run(yt(e,t,Sh(),"bool"),t)];},bl=function bl(e,t){return[e.run(yt(e,t,vh()),t)];},gl=function gl(e,t){return[e.run(yt(e,t,Eh(),"bool"),t)];},yl=function yl(e,t){return[e.run(yt(e,t,Dh()),t)];},Tl=function Tl(e,t){return[e.run(yt(e,t,Lh()),t)];},xl=function xl(e,t){return[e.run(yt(e,t,_h()),t)];},wl=function wl(e,t){return[e.run(yt(e,t,Ph(),"bool"),t)];};}),_l,Ol,Bh,Il=L(function(){fe(),_l=function _l(e,t,r){return Bh(t),[e.cast(t[0],r)];},Ol=function Ol(e){return Ve.tensorDataTypeFromProto(e.attributes.getInt("to"));},Bh=function Bh(e){if(!e||1!==e.length)throw new Error("Cast requires 1 input.");if("string"===e[0].type)throw new Error("Invalid input type.");};}),kh,Nh,Sl,lo,Al=L(function(){ve(),ae(),Bt(),Or(),kh=function kh(e,t){return{name:"Concat (packed)",inputNames:Array.from({length:e},function(e,t){return"X".concat(t);}),inputTypes:Array(e).fill(2),cacheHint:t};},Nh=function Nh(e,t,r,n){var i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);var o=i.slice(0);for(var _e102=1;_e102<r.length;_e102++){var _t67=r[_e102].dims.slice();for(var _e103=0;_e103<i.length;_e103++)if(_e103===n)o[n]+=_t67[_e103];else if(i[_e103]!==_t67[_e103])throw new Error("non concat dimensions must match");}var a=o.length,s=Hr("coords",a),u=Je(a),l=kt(),h=r.map(function(e){return e.dims;}),c=Dt(a),d=new Array(h.length-1);d[0]=h[0][n];for(var _e104=1;_e104<d.length;_e104++)d[_e104]=d[_e104-1]+h[_e104][n];var f=c[n],p=c.slice(-2),y=c.join(),g="if (".concat(f," < ").concat(d[0],") {\n        return getChannel(\n            getX0(").concat(y,"), vec2(").concat(p.join(),"));\n        }");for(var _e105=1;_e105<d.length;_e105++){var _t68=d[_e105-1];g+="\n            if (".concat(f," < ").concat(d[_e105],"  && ").concat(f," >= ").concat(d[_e105-1],") {\n              return getChannel(\n                getX").concat(_e105,"(").concat(lo(c,f,_t68),"),\n                vec2(").concat(lo(p,f,_t68),"));\n            }");}var m=d.length,w=d[d.length-1];g+="\n            return getChannel(\n              getX".concat(m,"(").concat(lo(c,f,w),"),\n              vec2(").concat(lo(p,f,w),"));");var b=q(e.session.backend.glContext.version),v="\n          ".concat(l,"\n          float getValue(").concat(c.map(function(e){return"int "+e;}),") {\n            ").concat(g,"\n          }\n\n          void main() {\n            ").concat(u," coords = getOutputCoords();\n            int lastDim = coords.").concat(c[a-1],";\n            coords.").concat(c[a-1]," = coords.").concat(c[a-2],";\n            coords.").concat(c[a-2]," = lastDim;\n\n            vec4 result = vec4(getValue(").concat(s,"), 0., 0., 0.);\n\n            ").concat(s[a-1]," = ").concat(s[a-1]," + 1;\n            if (").concat(s[a-1]," < ").concat(o[a-1],") {\n              result.g = getValue(").concat(s,");\n            }\n\n            ").concat(s[a-2]," = ").concat(s[a-2]," + 1;\n            if (").concat(s[a-2]," < ").concat(o[a-2],") {\n              result.a = getValue(").concat(s,");\n            }\n\n            ").concat(s[a-1]," = ").concat(s[a-1]," - 1;\n            if (").concat(s[a-2]," < ").concat(o[a-2]," &&\n                ").concat(s[a-1]," < ").concat(o[a-1],") {\n              result.b = getValue(").concat(s,");\n            }\n            ").concat(b.output," = result;\n          }\n        ");return _objectSpread(_objectSpread({},t),{},{output:{dims:o,type:r[0].type,textureType:2},shaderSource:v,hasMain:!0});},Sl=function Sl(e,t,r){var n=kh(t.length,r.cacheKey);return _objectSpread(_objectSpread({},n),{},{get:function get(){return Nh(e,n,t,r.axis);}});},lo=function lo(e,t,r){var n=e.indexOf(t);return e.map(function(e,t){return t===n?"".concat(e," - ").concat(r):e;}).join();};}),El,Rh,Mh,Gh,Pl,Uh,zh,Wh,Dl,Vh,Ll=L(function(){Ge(),ae(),Al(),El=function El(e,t,r){return Vh(t),e.session.pack&&t[0].dims.length>1?[e.run(Sl(e,t,r),t)]:[e.run(Gh(e,t,r),t)];},Rh=function Rh(e,t){return{name:"Concat",inputNames:Array.from({length:e},function(e,t){return"X".concat(t);}),inputTypes:Array(e).fill(0),cacheHint:t};},Mh=function Mh(e,t,r,n){var i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);var o=i.slice(0);for(var _e106=1;_e106<r.length;_e106++){var _t69=r[_e106].dims.slice();for(var _e107=0;_e107<i.length;_e107++)if(_e107===n)o[n]+=_t69[_e107];else if(i[_e107]!==_t69[_e107])throw new Error("non concat dimensions must match");}var a=o.length,s=new Array(r.length),u=0;for(var _e108=0;_e108<s.length;++_e108)u+=r[_e108].dims[n],s[_e108]=u;var l="";l=r.length<5?Pl(s):Uh(s);var h="\n        ".concat(zh(r.length,a),"\n        ").concat(Wh(s),"\n        ").concat(l,"\n        float process(int indices[").concat(a,"]) {\n          int textureIndex = getTextureWhereDataResides (indices[").concat(n,"]);\n\n          if(textureIndex != 0) {\n            indices[").concat(n,"] = indices[").concat(n,"] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }");return _objectSpread(_objectSpread({},t),{},{output:{dims:o,type:r[0].type,textureType:0},shaderSource:h});},Gh=function Gh(e,t,r){var n=Rh(t.length,r.cacheKey);return _objectSpread(_objectSpread({},n),{},{get:function get(){return Mh(e,n,t,r.axis);}});},Pl=function Pl(e){return"int getTextureWhereDataResides(int index) {\n      ".concat(e.map(function(e,t){return"if(index<".concat(e,") {return ").concat(t,";}\n");}).join(""),"\n    }");},Uh=function Uh(e){return Pl(e);},zh=function zh(e,t){var r=["float fetchDataFromCorrectTexture(int textureIndex, int indices[".concat(t,"]) {")];for(var _t70=0;_t70<e;++_t70)0===_t70?r.push("\tif (textureIndex == ".concat(_t70,") { return _X").concat(_t70,"(indices); }")):_t70===e-1?r.push("\telse { return _X".concat(_t70,"(indices); }")):r.push("\telse if (textureIndex == ".concat(_t70,") { return _X").concat(_t70,"(indices); }"));return r.push("\t}"),r.join("\n");},Wh=function Wh(e){var t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(var r=0;r<e.length;++r)0===r?t.push("\tif (index == ".concat(r,") { return ").concat(e[r],"; }")):r===e.length-1?t.push("\telse { return ".concat(e[r],"; }")):t.push("\telse if (index == ".concat(r,") { return ").concat(e[r],"; }"));return t.push("\t}"),t.join("\n");},Dl=function Dl(e){return te({axis:e.attributes.getInt("axis")});},Vh=function Vh(e){if(!e||e.length<1)throw new Error("too few inputs");var t=e[0].type,r=e[0].dims.length;if("string"===t)throw new Error("string tensor is not supported yet");var _iterator16=_createForOfIteratorHelper(e),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var n=_step16.value;if(n.type!==t)throw new Error("input tensors should be one type");if(n.dims.length!==r)throw new Error("input tensors should have the same shape");}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}};});function Hh(){return Tt("abs");}function jh(){return Tt("acos");}function qh(){return Tt("asin");}function Yh(){return Tt("atan");}function Xh(){return Tt("ceil");}function Kh(){return Tt("cos");}function Jh(e){var t="elu";return{body:"\n  const float alpha = float(".concat(e,");\n\n  float ").concat(t,"_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(").concat(t,"_(v.x), ").concat(t,"_(v.y), ").concat(t,"_(v.z), ").concat(t,"_(v.w));\n  }\n  "),name:t,type:0};}function Zh(){return Tt("exp");}function Qh(){return Tt("floor");}function Ai(e,t){var r="clip";return{body:"\n  const float min = float(".concat(e,");\n  const float max = float(").concat(t,");\n\n  float ").concat(r,"_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ").concat(r,"_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  "),name:r,type:0};}function em(){var e="indentity";return{body:"\n  float ".concat(e,"_(float a) {\n    return a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return v;\n  }\n  "),name:e,type:0};}function tm(e){var t="leakyRelu";return{body:"\n  const float alpha = float(".concat(e,");\n\n  float ").concat(t,"_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(").concat(t,"_(v.x), ").concat(t,"_(v.y), ").concat(t,"_(v.z), ").concat(t,"_(v.w));\n  }\n  "),name:t,type:0};}function rm(){return Tt("log");}function nm(){var e="neg";return{body:"\n  float ".concat(e,"_(float a) {\n    return -a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return -v;\n  }\n  "),name:e,type:0};}function om(){var e="not";return{body:"\n  float ".concat(e,"_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ").concat(e,"_(bool a) {\n    return !a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ").concat(e,"_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  "),name:e,type:0};}function im(){return Tt("sin");}function Ei(){var e="relu";return{body:"\n  float ".concat(e,"_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  "),name:e,type:0};}function Pi(){var e="sigmoid";return{body:"\n  float ".concat(e,"_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  "),name:e,type:0};}function am(){return Tt("sqrt");}function sm(){return Tt("tan");}function um(){var e="tanh";return{body:"\n  float ".concat(e,"_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  "),name:e,type:0};}function Tt(e){return{body:"\n  float ".concat(e,"_(float a) {\n    return ").concat(e,"(a);\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return ").concat(e,"(v);\n  }\n  "),name:e,type:0};}var lm,Le,Fl,Cl,$l,Bl,Di,kl,Nl,fm,Rl,Ml,Gl,Ul,zl,Wl,Li,Vl,Hl,jl,ql,Yl,Xl,Kl,Jl,Zl,Ql,ef,Fi=L(function(){Ge(),fe(),qt(),ve(),ae(),lm=function lm(e,t,r,n){var i=e.session.pack?2:0,o=q(e.session.backend.glContext.version);return _objectSpread(_objectSpread({},t),{},{output:{dims:r.dims,type:r.type,textureType:i},shaderSource:"\n     ".concat(n.body,"\n     void main() {\n       vec4 v = ").concat(o.texture2D,"(A, TexCoords);\n       v = ").concat(n.name,"_(v);\n       ").concat(o.output," = v;\n     }\n     "),hasMain:!0});},Le=function Le(e,t,r,n){var i=e.session.pack?2:0,o={name:r.name,inputTypes:[i],inputNames:["A"],cacheHint:n};return _objectSpread(_objectSpread({},o),{},{get:function get(){return lm(e,o,t,r);}});},Fl=function Fl(e,t){return[e.run(Le(e,t[0],Hh()),t)];},Cl=function Cl(e,t){return[e.run(Le(e,t[0],jh()),t)];},$l=function $l(e,t){return[e.run(Le(e,t[0],qh()),t)];},Bl=function Bl(e,t){return[e.run(Le(e,t[0],Yh()),t)];},Di=function Di(e,t,r){return[e.run(Le(e,t[0],Ai(r.min,r.max),r.cacheKey),t)];},kl=function kl(e){return te({min:e.attributes.getFloat("min",wr),max:e.attributes.getFloat("max",vr)});},Nl=function Nl(e,t){var r=fm(e,t);return Di(e,[t[0]],r);},fm=function fm(e,t){if(t.length>=3&&(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)))throw new Error("dynamic clip attributes are not allowed");var r=t.length>=3?t[1].numberData[0]:wr,n=t.length>=3?t[2].numberData[0]:vr;return te({min:r,max:n});},Rl=function Rl(e,t){return[e.run(Le(e,t[0],Xh()),t)];},Ml=function Ml(e,t){return[e.run(Le(e,t[0],Kh()),t)];},Gl=function Gl(e,t,r){return[e.run(Le(e,t[0],Jh(r.alpha),r.cacheKey),t)];},Ul=function Ul(e){return te({alpha:e.attributes.getFloat("alpha",1)});},zl=function zl(e,t){return[e.run(Le(e,t[0],Zh()),t)];},Wl=function Wl(e,t){return[e.run(Le(e,t[0],Qh()),t)];},Li=function Li(e,t){return[e.run(Le(e,t[0],em()),t)];},Vl=function Vl(e,t,r){return[e.run(Le(e,t[0],tm(r.alpha),r.cacheKey),t)];},Hl=function Hl(e){return te({alpha:e.attributes.getFloat("alpha",.01)});},jl=function jl(e,t){return[e.run(Le(e,t[0],rm()),t)];},ql=function ql(e,t){return[e.run(Le(e,t[0],nm()),t)];},Yl=function Yl(e,t){return[e.run(Le(e,t[0],om()),t)];},Xl=function Xl(e,t){return[e.run(Le(e,t[0],Ei()),t)];},Kl=function Kl(e,t){return[e.run(Le(e,t[0],Pi()),t)];},Jl=function Jl(e,t){return[e.run(Le(e,t[0],im()),t)];},Zl=function Zl(e,t){return[e.run(Le(e,t[0],am()),t)];},Ql=function Ql(e,t){return[e.run(Le(e,t[0],sm()),t)];},ef=function ef(e,t){return[e.run(Le(e,t[0],um()),t)];};});function Nt(e){var t;switch(e.activation){case"Relu":t=Ei();break;case"Sigmoid":t=Pi();break;case"Clip":t=Ai(e.clipMin,e.clipMax);break;default:return{activationFunction:"",applyActivation:""};}var r=t.name;return{activationFunction:t.body,applyActivation:"value = ".concat(r,"_(value);")};}var jr,Ir=L(function(){fe(),Fi(),jr=function jr(e){var t=e.getString("activation","");if("Clip"===t){var _e$getFloats=e.getFloats("activation_params",[wr,vr]),_e$getFloats2=_slicedToArray(_e$getFloats,2),r=_e$getFloats2[0],n=_e$getFloats2[1];return{activation:t,clipMax:n,clipMin:r,activationCacheKey:"".concat(t,":").concat(r,",").concat(n)};}return{activation:t,activationCacheKey:t};};}),pm,dm,tf,rf=L(function(){dt(),ve(),ae(),fo(),Ir(),pm=function pm(e,t){return{name:"GroupedConv",inputNames:e?["X","W","Bias"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t};},dm=function dm(e,t,r,n){var i=t.length>2?"value += getBias(output_channel);":"",o=t[0].dims.slice(),a=t[1].dims.slice(),s=a[0]/n.group;pe.verbose("GroupedConv","autpPad:".concat(n.autoPad,", dilations:").concat(n.dilations,", group:").concat(n.group,", kernelShape:").concat(n.kernelShape,", pads:").concat(n.pads,", strides:").concat(n.strides));var u=qr(o,a,n.dilations,n.pads,n.strides),l=q(e.session.backend.glContext.version),_Nt=Nt(n),h=_Nt.activationFunction,c=_Nt.applyActivation,d="\n  const ivec2 strides = ivec2(".concat(n.strides[0],", ").concat(n.strides[1],");\n  const ivec2 pads = ivec2(").concat(n.pads[0],", ").concat(n.pads[1],");\n  ").concat(h,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ").concat(s,";\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ").concat(a[1],"; wInChannel++) {\n      int input_channel = group_id * ").concat(a[1]," + wInChannel;\n      for (int wHeight = 0; wHeight < ").concat(a[2],"; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ").concat(n.dilations[0],";\n\n        if (xHeight < 0 || xHeight >= ").concat(o[2],") {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ").concat(a[3],"; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ").concat(n.dilations[1],";\n          if (xWidth < 0 || xWidth >= ").concat(o[3],") {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(i,"\n    ").concat(c,"\n    ").concat(l.output," = vec4(value, .0, .0, .0);\n  }\n");return _objectSpread(_objectSpread({},r),{},{output:{dims:u,type:t[0].type,textureType:0},shaderSource:d,hasMain:!0});},tf=function tf(e,t,r){var n=pm(t.length>2,r.cacheKey);return _objectSpread(_objectSpread({},n),{},{get:function get(){return dm(e,t,n,r);}});};}),hm,mm,nf,of=L(function(){ve(),ae(),Or(),hm=function hm(e){return{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:e};},mm=function mm(e,t,r,n,i,o){var a=r.dims,s=n.dims,u=i.length,l=[s[1]*s[2]*s[3],i[2]*i[3]],h=s[2]*s[3],c=kt(),d=q(e.session.backend.glContext.version),f="";for(var _e109=0;_e109<=1;_e109++)for(var _t71=0;_t71<=1;_t71++)f+="\n            blockIndex = rc.x + ".concat(_t71,";\n            pos = rc.y + ").concat(_e109,";\n\n            if(blockIndex < ").concat(l[1]," && pos < ").concat(l[0],") {\n              offsetY = int(blockIndex / (").concat(i[u-1],")) * ").concat(o.strides[0]," -\n                ").concat(o.pads[0],";\n              d0 = offsetY + ").concat(o.dilations[0]," * (imod(pos, ").concat(h,") / ").concat(s[2],");\n\n              if(d0 < ").concat(a[2]," && d0 >= 0) {\n                offsetX = imod(blockIndex, ").concat(i[u-1],") * ").concat(o.strides[1]," -\n                  ").concat(o.pads[1],";\n                d1 = offsetX + ").concat(o.dilations[1]," * imod(imod(pos, ").concat(h,"), ").concat(s[2],");\n\n                if(d1 < ").concat(a[3]," && d1 >= 0) {\n\n                  ch = int(float(pos)/ ").concat(h,".);\n                    innerDims = vec2(d0, d1);\n                    result[").concat(2*_e109+_t71,"] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          ");var p="\n      ".concat(c,"\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ").concat(f,"\n          ").concat(d.output," = result;\n      }\n            ");return _objectSpread(_objectSpread({},t),{},{output:{dims:l,type:r.type,textureType:2},shaderSource:p,hasMain:!0});},nf=function nf(e,t,r,n,i){var o=hm(i.cacheKey);return _objectSpread(_objectSpread({},o),{},{get:function get(){return mm(e,o,t,r,n,i);}});};});function gm(e,t,r){var n=t[0].dims,i=t[1].dims,o=Ke.calcShape(n,i,!0);if(!o)throw new Error("Can't use matmul on the given tensors");var a=Je(o.length),s=Dt(),_Nt2=Nt(r),u=_Nt2.activationFunction,l=_Nt2.applyActivation,h=t.length>2,c=h?"value += getBiasForMatmul();":"",d=h?"".concat($i(a,s,t[2].dims,o,!1)):"",f=o.length,p=n.length,y=i.length,g="\n    ".concat(u,"\n    ").concat(d,"\n    float process(int indices[").concat(f,"]) {\n        int a[").concat(p,"];\n        int b[").concat(y,"];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<").concat(n[n.length-1],"; ++k) {\n            a[").concat(p-1,"] = k;\n            b[").concat(y-2,"] = k;\n            value += _A(a) * _B(b);\n        }\n        ").concat(c,"\n        ").concat(l,"\n        return value;\n    }");return _objectSpread(_objectSpread({},e),{},{output:{dims:o,type:t[0].type,textureType:0},shaderSource:g});}function Ci(e,t){var r=bm(e.length>2,t.activationCacheKey);return _objectSpread(_objectSpread({},r),{},{get:function get(){return gm(r,e,t);}});}function $i(e,t,r,n,i){var o="",a=r.length,s=n.length,u=s-a;o=s<2&&a>0?"coords":r.map(function(e,r){return"coords.".concat(t[r+u]);}).join(", ");var l=Ke.getBroadcastDims(r,n).map(function(e){return"coords.".concat(t[e+u]," = 0;");}).join("\n"),h="vec4(outputValue.xx, outputValue.yy)";return 1===z.size(r)&&(h="vec4(outputValue.x)"),i?"\nvec4 getBiasForMatmul() {\n  ".concat(e," coords = getOutputCoords();\n  ").concat(l,"\n  vec4 outputValue = getBias(").concat(o,");\n  return ").concat(h,";\n}"):"\nfloat getBiasForMatmul() {\n  ".concat(e," coords = getOutputCoords();\n  ").concat(l,"\n  return getBias(coords.x);\n}");}var af,sf,bm,ym,co=L(function(){fe(),ae(),Bt(),Ir(),Bi(),af=function af(e,t,r){return ym(t),e.session.pack?[e.run(po(e,t,r),t)]:[e.run(Ci(t,r),t)];},sf=function sf(e){return jr(e.attributes);},bm=function bm(e,t){return{name:"MatMul",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t};},ym=function ym(e){if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type)throw new Error("inputs should be float type");if(e[0].type!==e[1].type)throw new Error("inputs types should match");};});function wm(e,t,r,n){var i=[],o=[],a=r[0].dims,s=r[1].dims,u=a.length,l=s.length,h=n.length,c=h-u,d=h-l;i=a.map(function(e,r){return"coords.".concat(t[r+c]);}),i[u-1]="i*2",i.join(", "),o=s.map(function(e,r){return"coords.".concat(t[r+d]);}),o[l-2]="i*2",o.join(", ");var f=Ke.getBroadcastDims(a,n),p=Ke.getBroadcastDims(s,n),y=f.map(function(e){return"coords.".concat(t[e+c]," = 0;");}).join("\n"),g=p.map(function(e){return"coords.".concat(t[e+d]," = 0;");}).join("\n"),m="int lastDim = coords.".concat(t[h-1],";\n  coords.").concat(t[h-1]," = coords.").concat(t[h-2],";\n  coords.").concat(t[h-2]," = lastDim;");return"\nvec4 getAAtOutCoordsMatmul(int i) {\n  ".concat(e," coords = getOutputCoords();\n  ").concat(m,"\n  ").concat(y,"\n  vec4 outputValue = getA(").concat(i,");\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ").concat(e," coords = getOutputCoords();\n  ").concat(m,"\n  ").concat(g,"\n  vec4 outputValue = getB(").concat(o,");\n  return outputValue;\n}");}function vm(e,t){var r="";for(var n=0;n<t-2;n++)r+="rc.".concat(e[n],", ");return r+="rc.".concat(e[t-2],", i*2"),r;}function _m(e,t){var r="";for(var n=0;n<t-2;n++)r+="rc.".concat(e[n],", ");return r+="i*2, rc.".concat(e[t-1]),r;}var Tm,xm,po,Bi=L(function(){fe(),ve(),ae(),Bt(),Ir(),co(),Tm=function Tm(e,t){return{name:"MatMul (packed)",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[2,2,2]:[2,2],cacheHint:t};},xm=function xm(e,t,r,n){var i=r.length>2,o=i?"value += getBiasForMatmul();":"",a=r[0].dims,s=r[1].dims,u=Ke.calcShape(a,s,!0),l=!z.areEqual(r[0].dims,r[1].dims);if(!u)throw new Error("Can't use matmul on the given tensors");var h=a[a.length-1],c=Math.ceil(h/2),d=a.length,f=s.length,p=q(e.session.backend.glContext.version),y=Je(u.length),g=u.length,m=Dt(),_Nt3=Nt(n),w=_Nt3.activationFunction,b=_Nt3.applyActivation,v=i?"".concat($i(y,m,r[2].dims,u,!0)):"",x=l?"".concat(wm(y,m,r,u)):"",_=l?"getAAtOutCoordsMatmul(i)":"getA(".concat(vm(m,d),")"),I=l?"getBAtOutCoordsMatmul(i)":"getB(".concat(_m(m,f),")"),A="\n            ".concat(x,"\n            ").concat(v,"\n            ").concat(w,"\n            void main() {\n              ").concat(l?"":"".concat(y," rc =\n          getOutputCoords(); int lastDim = rc.").concat(m[g-1],"; rc.").concat(m[g-1]," =\n          rc.").concat(m[g-2],"; rc.").concat(m[g-2]," = lastDim;\n      "),"\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ").concat(c,"; i++) {\n                vec4 a = ").concat(_,";\n                vec4 b = ").concat(I,";\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ").concat(o,"\n              ").concat(b,"\n              ").concat(p.output," = value;\n            }");return _objectSpread(_objectSpread({},t),{},{output:{dims:u,type:r[0].type,textureType:2},shaderSource:A,hasMain:!0});},po=function po(e,t,r){var n=Tm(t.length>2,r.activationCacheKey);return _objectSpread(_objectSpread({},n),{},{get:function get(){return xm(e,n,t,r);}});};}),uf,lf=L(function(){fo(),of(),Bi(),uf=function uf(e,t,r){var n=t[0].dims,i=t[1].dims,o=qr(n,i,r.dilations,r.pads,r.strides),a=e.run(nf(e,t[0],t[1],o,r),[t[0]]),s=e.reshapePacked(t[1],[i[0],i[1]*i[2]*i[3]]),u=3===t.length?[s,a,t[2]]:[s,a],l=e.run(po(e,u,r),u);return e.reshapePacked(l,o);};}),Om,Im,ff,ki,Ni=L(function(){ae(),Om=function Om(e){return{name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:e};},Im=function Im(e,t,r,n,i,o){var a=r.dims,s=n.dims,u=i.length,l=ki(a,s,i,4),h="\n        const int XC = ".concat(a[1],";\n        const int XH = ").concat(a[2],";\n        const int XW = ").concat(a[3],";\n        const int KH = ").concat(o.kernelShape[0],";\n        const int KW = ").concat(o.kernelShape[1],";\n        const int dilationH = ").concat(o.dilations[0],";\n        const int dilationW = ").concat(o.dilations[1],";\n        const int strideH = ").concat(o.strides[0],";\n        const int strideW = ").concat(o.strides[1],";\n        const int padH = ").concat(o.pads[0],";\n        const int padW = ").concat(o.pads[1],";\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[").concat(u,"]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[").concat(a.length,"];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        ");return _objectSpread(_objectSpread({},t),{},{output:{dims:l,type:r.type,textureType:4},shaderSource:h});},ff=function ff(e,t,r,n,i){var o=Om(i.cacheKey);return _objectSpread(_objectSpread({},o),{},{get:function get(){return Im(e,o,t,r,n,i);}});},ki=function ki(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4;return[r[0],r[2],r[3],Math.ceil(e[1]*t[2]*t[3]/n)];};}),Sm,Am,cf,pf=L(function(){fe(),ve(),ae(),Ir(),Ni(),Sm=function Sm(e,t){return{name:"ConvDotProduct",inputNames:e?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:e?[0,4,0]:[0,4],cacheKey:t.activationCacheKey};},Am=function Am(e,t,r,n,i){var o=r[0].dims,a=r[1].dims,s=[a[0],Math.ceil(o[1]*a[2]*a[3]/4)],u=ki(o,a,n),_e$calculateTextureWi3=e.calculateTextureWidthAndHeight(s,4),_e$calculateTextureWi4=_slicedToArray(_e$calculateTextureWi3,2),l=_e$calculateTextureWi4[0],h=_e$calculateTextureWi4[1],c=z.computeStrides(u),_e$calculateTextureWi5=e.calculateTextureWidthAndHeight(u,4),_e$calculateTextureWi6=_slicedToArray(_e$calculateTextureWi5,2),d=_e$calculateTextureWi6[0],f=_e$calculateTextureWi6[1],p=n.length,y=r.length<3?"0.0":"_B(b)",g=Math.ceil(o[1]*a[2]*a[3]/4),_Nt4=Nt(i),m=_Nt4.activationFunction,w=_Nt4.applyActivation,b=q(e.session.backend.glContext.version),v="\n".concat(m,"\nfloat process(int indices[").concat(p,"]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ").concat(c[0]," + im2col[1] * ").concat(c[1]," + im2col[2] * ").concat(c[2],";\n  int kernelOffset = indices[1] * ").concat(s[1],";\n  float value = ").concat(y,";\n  for (int i = 0; i < ").concat(g,"; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ").concat(d,", ").concat(f,");\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ").concat(l,", ").concat(h,");\n    value += dot(").concat(b.texture2D,"(Im2Col, im2colCoords), ").concat(b.texture2D,"(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ").concat(w,"\n  return value;\n}");return _objectSpread(_objectSpread({},t),{},{output:{dims:n,type:r[0].type,textureType:0},shaderSource:v});},cf=function cf(e,t,r,n){var i=Sm(t.length>2,n);return _objectSpread(_objectSpread({},i),{},{get:function get(){return Am(e,i,t,r,n);}});};}),qr,Ri,Em,Pm,Dm,Lm,Mi,Fm,fo=L(function(){Ge(),fe(),rf(),lf(),pf(),Ir(),Ni(),co(),qr=function qr(e,t,r,n,i){var _ref7;var o=e[0],a=e.slice(2),s=a.length,u=t[0],l=t.slice(2).map(function(e,t){return e+(e-1)*(r[t]-1);}),h=a.map(function(e,t){return e+n[t]+n[t+s];}).map(function(e,t){return Math.floor((e-l[t]+i[t])/i[t]);});return(_ref7=[o,u]).concat.apply(_ref7,_toConsumableArray(h));},Ri=function Ri(e,t,r){return Fm(t,r),Em(e,t,r);},Em=function Em(e,t,r){var n=Lm(r,t),i=e.session.pack,o=1===n.kernelShape[0]&&1===n.kernelShape[1];return n.group>1?[e.run(tf(e,t,n),t)]:o&&i?[Pm(e,t,n)]:i&&4===t[0].dims.length&&1===t[0].dims[0]&&!o?[uf(e,t,n)]:[Dm(e,t,n)];},Pm=function Pm(e,t,r){var n=t[0].dims,i=t[1].dims,o=qr(n,i,r.dilations,r.pads,r.strides),a=e.reshapeUnpacked(t[0],[n[1],n[2]*n[3]]),s=e.reshapeUnpacked(t[1],[i[0],i[1]]),u=t.length>2?[s,a,t[2]]:[s,a],l=e.run(Ci(u,r),u);return e.reshapeUnpacked(l,o);},Dm=function Dm(e,t,r){var n=t[0].dims,i=t[1].dims,o=qr(n,i,r.dilations,r.pads,r.strides),a=e.run(ff(e,t[0],t[1],o,r),[t[0]]),s=3===t.length?[a,t[1],t[2]]:[a,t[1]];return e.run(cf(e,t,o,r),s);},Lm=function Lm(e,t){var r=e.kernelShape.slice();if(0===e.kernelShape.length)for(var _e110=2;_e110<t[1].dims.length;++_e110)r.push(t[1].dims[_e110]);var n=e.pads.slice();xr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.autoPad);var i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:n,cacheKey:e.cacheKey}),i;},Mi=function Mi(e){var t=e.attributes,r=jr(t),n=t.getString("auto_pad","NOTSET"),i=t.getInts("dilations",[1,1]),o=t.getInt("group",1),a=t.getInts("kernel_shape",[]),s=t.getInts("pads",[0,0,0,0]),u=t.getInts("strides",[1,1]);return te(_objectSpread({autoPad:n,dilations:i,group:o,kernelShape:a,pads:s,strides:u},r));},Fm=function Fm(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[1]*t.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");var r=e[0].dims.length-2;if(t.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(t.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(t.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw new Error("Conv input(bias) should be float tensor");};}),Cm,$m,Bm,df,km,Nm,Rm,Mm,Gm,Um,hf,zm,mf=L(function(){Ge(),ve(),ae(),Ir(),Cm=function Cm(e,t,r,n,i,o){return(e-1)*t+r+(n-1)*i+1-o;},$m=function $m(e,t,r,n,i){var o=Math.floor(e/2);"SAME_UPPER"===t?(r[n]=o,r[i]=e-o):"SAME_LOWER"===t&&(r[n]=e-o,r[i]=o);},Bm=function Bm(e,t,r,n,i,o,a,s){var u=e.length-2,l=0===s.length;for(var h=0;h<u;++h){var c=l?e[h+2]*o[h]:s[h],d=Cm(e[h+2],o[h],i[h],t[h],r[h],c);$m(d,n,i,h,h+u),l&&s.push(o[h]*(e[h+2]-1)+a[h]+(t[h]-1)*r[h]+1-i[h]-i[h+u]);}},df=function df(e,t,r){return zm(t,r),km(e,t,r);},km=function km(e,t,r){var n=Um(r,t);return[Gm(e,t,n)];},Nm=function Nm(e,t){return{name:"ConvTranspose",inputNames:e?["X","W","B"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:t};},Rm=function Rm(e,t,r,n){var i=t.length>2?"getB(output_channel)":"0.0",o=t[0].dims,a=t[1].dims,s=a[1],u=a[0]/n.group,l=[t[0].dims[0],t[1].dims[1]*n.group].concat(_toConsumableArray(n.outputShape)),h=q(e.session.backend.glContext.version),_Nt5=Nt(n),c=_Nt5.activationFunction,d=_Nt5.applyActivation,f="\n  const ivec2 strides = ivec2(".concat(n.strides[0],", ").concat(n.strides[1],");\n  const ivec2 pads = ivec2(").concat(n.pads[0],", ").concat(n.pads[1],");\n  ").concat(c,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ").concat(s,";\n    int wOutChannel = output_channel - group_id * ").concat(s,";\n\n    float value = ").concat(i,";\n    for (int inChannelOffset = 0; inChannelOffset < ").concat(u,"; inChannelOffset++) {\n      int input_channel = group_id * ").concat(u," + inChannelOffset;\n      for (int wWOff = 0; wWOff < ").concat(a[2],"; wWOff++) {\n        for (int wHOff = 0; wHOff < ").concat(a[3],"; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ").concat(n.dilations[0],", wHOff * ").concat(n.dilations[1],");\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ").concat(o[2]," &&\n            wLocIn.y >= 0 && wLocIn.y < ").concat(o[3],"\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ").concat(d,"\n    ").concat(h.output," = vec4(value, .0, .0, .0);\n  }\n");return _objectSpread(_objectSpread({},r),{},{output:{dims:l,type:t[0].type,textureType:0},shaderSource:f,hasMain:!0});},Mm=function Mm(e,t,r){var n=Nm(t.length>2,r.cacheKey);return _objectSpread(_objectSpread({},n),{},{get:function get(){return Rm(e,t,n,r);}});},Gm=function Gm(e,t,r){return e.run(Mm(e,t,r),t);},Um=function Um(e,t){var r=e.kernelShape.slice();if(0===e.kernelShape.length)for(var _e111=2;_e111<t[1].dims.length;++_e111)r.push(t[1].dims[_e111]);var n=e.pads.slice(),i=e.outputShape.slice(),o=t[0].dims;Bm(o,r,e.dilations,e.autoPad,n,e.strides,e.outputPadding,i);var a=Object.assign({},e);return Object.assign(a,{kernelShape:r,pads:n,outputShape:i,cacheKey:e.cacheKey}),a;},hf=function hf(e){var t=e.attributes,r=jr(t),n=t.getString("auto_pad","NOTSET"),i=t.getInts("dilations",[1,1]),o=t.getInt("group",1),a=t.getInts("kernel_shape",[]),s=t.getInts("output_padding",[0,0]),u=t.getInts("output_shape",[]),l=t.getInts("pads",[0,0,0,0]),h=t.getInts("strides",[1,1]);return te(_objectSpread({autoPad:n,dilations:i,group:o,kernelShape:a,outputPadding:s,outputShape:u,pads:l,strides:h},r));},zm=function zm(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length||4!==e[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims[1]!==e[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var r=e[1].dims[1]*t.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==r))throw new Error("invalid bias");var n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(t.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(t.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(t.outputPadding.length!==n)throw new Error("output_padding should be ".concat(n,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==t.outputShape.length&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==e[0].type||"float32"!==e[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===e.length&&"float32"!==e[2].type)throw new Error("ConvTranspose input(bias) should be float tensor");};}),bf,Sr,gf,Wm,yf,Vm,Hm,jm,ho=L(function(){Ge(),fe(),ae(),bf={name:"Transpose",inputNames:["A"],inputTypes:[0]},Sr=function Sr(e,t,r){return jm(t),[e.run(_objectSpread(_objectSpread({},bf),{},{cacheHint:r.cacheKey,get:function get(){return Wm(e,t[0],r.perm);}}),t)];},gf=function gf(e){return te({perm:e.attributes.getInts("perm",[])});},Wm=function Wm(e,t,r){var n=t.dims;r=yf(n,r);var i=Vm(n,r),o=n.length,a="\n      ".concat(Hm("perm",r,o),"\n      float process(int indices[").concat(o,"]) {\n        int a[").concat(o,"];\n        perm(a, indices);\n        return _A(a);\n      }");return _objectSpread(_objectSpread({},bf),{},{output:{dims:i,type:t.type,textureType:0},shaderSource:a});},yf=function yf(e,t){return t&&t.length!==e.length&&(t=_toConsumableArray(e.keys()).reverse()),t;},Vm=function Vm(e,t){return t=yf(e,t),z.sortBasedOnPerm(e,t);},Hm=function Hm(e,t,r){var n=[];n.push("void ".concat(e,"(out int a[").concat(r,"], int src[").concat(r,"]) {"));for(var _e112=0;_e112<r;++_e112)n.push("\ta[".concat(t[_e112],"]=src[").concat(_e112,"];"));return n.push("\t}"),n.join("\n");},jm=function jm(e){if(!e||1!==e.length)throw new Error("Transpose requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("input should be float tensor");};}),Tf,xf,qm,wf=L(function(){ho(),Tf=function Tf(e,t,r){qm(t);var n=r.blocksize,i=n*n,o="DCR"===r.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],a="DCR"===r.mode?[t[0].dims[0],n,n,t[0].dims[1]/i,t[0].dims[2],t[0].dims[3]]:[t[0].dims[0],t[0].dims[1]/i,n,n,t[0].dims[2],t[0].dims[3]],s=e.reshapeUnpacked(t[0],a),u={perm:o,cacheKey:"".concat(o)},_Sr=Sr(e,[s],u),_Sr2=_slicedToArray(_Sr,1),l=_Sr2[0],h=[t[0].dims[0],t[0].dims[1]/i,t[0].dims[2]*n,t[0].dims[3]*n];return[e.reshapeUnpacked(l,h)];},xf=function xf(e){var t=e.attributes.getInt("blocksize");if(t<1)throw new Error("blocksize must be >= 1, but got : ".concat(t," for DepthToSpace"));var r=e.attributes.getString("mode","DCR");if("DCR"!==r&&"CRD"!==r)throw new Error("unrecognized mode: ".concat(r," for DepthToSpace"));return{mode:r,blocksize:t};},qm=function qm(e){if(1!==e.length)throw new Error("DepthToSpace expect 1 inputs, but got ".concat(e.length));if("string"===e[0].type||4!==e[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor");};}),vf,_f,Ym,Of=L(function(){fe(),vf=function vf(e,t,r){Ym(t,r);var n=z.flattenShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],n)];},_f=function _f(e){return e.attributes.getInt("axis",1);},Ym=function Ym(e,t){if(!e||1!==e.length)throw new Error("Flatten requires 1 input.");var r=e[0].dims.length;if(0===r)throw new Error("scalar tensor is not supported.");if(t<-r||t>r)throw new Error("Invalid axis");if("string"===e[0].type)throw new Error("string tensor is not supported.");};}),rr,yn=L(function(){rr=["float32","float64","int32","int16","int8","uint16","uint32","uint8"];}),If,Sf,Xm,Km,Jm,Zm,Af=L(function(){Ge(),yn(),fe(),ae(),If=function If(e,t,r){return Zm(t,r.axis),[e.run(Jm(e,t,r),t)];},Sf=function Sf(e){return te({axis:e.attributes.getInt("axis",0)});},Xm={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Km=function Km(e,t,r,n){var i=r[0].dims.slice(),o=r[1].dims.slice(),a=new Array(i.length+o.length-1);n=z.normalizeAxis(n,i.length);var s=[];for(var _e113=0;_e113<a.length;_e113++)_e113<n?(a[_e113]=i[_e113],s.push("inputIdx[".concat(_e113,"] = outputIdx[").concat(_e113,"];"))):_e113<n+o.length?(a[_e113]=o[_e113-n],s.push("indexDataIdx[".concat(_e113-n,"] = outputIdx[").concat(_e113,"];"))):(a[_e113]=i[_e113-o.length+1],s.push("inputIdx[".concat(_e113-o.length+1,"] = outputIdx[").concat(_e113,"];")));var u="\n      float process(int outputIdx[".concat(a.length||1,"]) {\n        int inputIdx[").concat(i.length,"];\n        int indexDataIdx[").concat(o.length||1,"];\n        indexDataIdx[0] = 0;\n        ").concat(s.join("\n        "),"\n        int idx = int(_B(indexDataIdx));\n        inputIdx[").concat(n,"] = idx < 0 ? idx + ").concat(i[n]," : idx;\n        return _A(inputIdx);\n      }");return _objectSpread(_objectSpread({},t),{},{output:{dims:a,type:r[0].type,textureType:0},shaderSource:u});},Jm=function Jm(e,t,r){var n=_objectSpread(_objectSpread({},Xm),{},{cacheHint:r.cacheKey});return _objectSpread(_objectSpread({},n),{},{get:function get(){return Km(e,n,t,r.axis);}});},Zm=function Zm(e,t){if(!e||2!==e.length)throw new Error("Gather requires 2 inputs.");var r=e[0].dims.length;if(r<1)throw new Error("Invalid input shape.");if(t<-r||t>r-1)throw new Error("Invalid axis.");if(-1===rr.indexOf(e[0].type))throw new Error("Invaid input type.");if("int32"!==e[1].type&&"int16"!==e[1].type)throw new Error("Invaid input type.");};}),Gi,Ef,Pf,Df,Qm,eb,tb,Lf=L(function(){Ge(),fe(),ae(),Gi=function Gi(e,t,r){return tb(t,r),[e.run(Qm(t,r),t)];},Ef=function Ef(e,t){var r=0!==e.attributes.getInt("transA",0),n=0!==e.attributes.getInt("transB",0),i=e.attributes.getFloat("alpha",1),o=e.attributes.getFloat("beta",1);return te({transA:r,transB:n,alpha:i,beta:o,isOptionalC:t});},Pf=function Pf(e){return Ef(e,!1);},Df=function Df(e){return Ef(e,!0);},Qm=function Qm(e,t){var r={name:"Gemm",inputNames:3===e.length?["A","B","C"]:["A","B"],inputTypes:3===e.length?[0,0,0]:[0,0],key:t.cacheKey};return _objectSpread(_objectSpread({},r),{},{get:function get(){return eb(r,e,t);}});},eb=function eb(e,t,r){var n=t[0].dims.slice(),i=t[1].dims.slice(),_ro$getShapeOfGemmRes=ro.getShapeOfGemmResult(n,r.transA,i,r.transB,3===t.length?t[2].dims:void 0),_ro$getShapeOfGemmRes2=_slicedToArray(_ro$getShapeOfGemmRes,2),o=_ro$getShapeOfGemmRes2[0],a=_ro$getShapeOfGemmRes2[1],s=[o,a];if(!s)throw new Error("Can't use gemm on the given tensors");var u=n[n.length-1],l="";r.transA&&(u=n[0]),r.transA&&r.transB?l="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?l="value += _A_T(a) * _B(b);":!r.transA&&r.transB?l="value += _A(a) * _B_T(b);":!r.transA&&!r.transB&&(l="value += _A(a) * _B(b);");var h=s.length,c="\n      float process(int indices[".concat(h,"]) {\n          int a[").concat(h,"];\n          int b[").concat(h,"];\n          ").concat(3===t.length?"int c[".concat(t[2].dims.length,"];"):"","\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ").concat(3===t.length?"bcastIndices_C(indices, c);":"","\n\n          float value = 0.0;\n          for (int k=0; k<").concat(u,"; ++k) {\n              a[").concat(h-1,"] = k;\n              b[").concat(h-2,"] = k;\n              ").concat(l,"\n          }\n\n          value = value * alpha;\n          ").concat(3===t.length?"value += beta * _C(c);":"","\n          return value;\n      }");return _objectSpread(_objectSpread({},e),{},{output:{dims:s,type:t[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:c});},tb=function tb(e,t){if(!e)throw new Error("Input is missing");if(t.isOptionalC&&(e.length<2||e.length>3))throw new Error("Invaid input shape.");if(!t.isOptionalC&&3!==e.length)throw new Error("Gemm requires 3 inputs");if(3===e.length&&1!==e[2].dims.length&&2!==e[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==e[0].type&&"float64"!==e[0].type||"float32"!==e[1].type&&"float64"!==e[1].type||3===e.length&&"float32"!==e[2].type&&"float64"!==e[2].type)throw new Error("Invalid input type.");if(e[0].type!==e[1].type||3===e.length&&e[0].type!==e[2].type)throw new Error("Input types are mismatched");};}),Ff,Cf,rb,nb,ob,ib,ab,$f=L(function(){Ge(),ae(),Ff=function Ff(e,t,r){return ab(t),[e.run(ob(e,t,r),t)];},Cf=function Cf(e){var t=e.attributes.getFloat("scale"),r=e.attributes.getFloats("bias");return te({scale:t,bias:r});},rb={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},nb=function nb(e,t,r,n){var i=r[0].dims.slice(),o=i.length,a="\n      ".concat(ib(n.bias.length),"\n      float process(int indices[").concat(o,"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }");return _objectSpread(_objectSpread({},t),{},{output:{dims:i,type:r[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:n.bias.length,data:n.bias},{name:"scale",type:"float",data:n.scale}],shaderSource:a});},ob=function ob(e,t,r){var n=_objectSpread(_objectSpread({},rb),{},{cacheHint:r.cacheKey});return _objectSpread(_objectSpread({},n),{},{get:function get(){return nb(e,n,t,r);}});},ib=function ib(e){var t=["float getBias(float bias[".concat(e,"], int channel) {")];for(var r=0;r<e;++r)0===r?t.push("\tif (channel == ".concat(r,") { return bias[").concat(r,"]; }")):r===e-1?t.push("\telse { return bias[".concat(r,"]; }")):t.push("\telse if (channel == ".concat(r,") { return bias[").concat(r,"]; }"));return t.push("\t}"),t.join("\n");},ab=function ab(e){if(!e||1!==e.length)throw new Error("ImageScaler requires 1 input.");if(4!==e[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.");};}),kf,Nf,Bf,sb,ub,lb,fb,cb,pb,Rf=L(function(){ve(),ae(),kf=function kf(e,t,r){pb(t);var n=e.run(ub(t[0]),t);return[e.run(cb(e,t[0],r,n.dims),[t[0],n,t[1],t[2]])];},Nf=function Nf(e){return e.attributes.getFloat("epsilon",1e-5);},Bf={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},sb=function sb(e,t){var r=t.dims.slice(),n=r[1],i=r[2]*r[3],o=[r[0],n],a="\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<".concat(r[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(r[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(").concat(i,");\n        temp = 0.0;\n        for(int a2=0; a2<").concat(r[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(r[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(").concat(i,");\n\n        return v;\n      }");return _objectSpread(_objectSpread({},e),{},{output:{dims:o,type:t.type,textureType:4},shaderSource:a});},ub=function ub(e){return _objectSpread(_objectSpread({},Bf),{},{get:function get(){return sb(Bf,e);}});},lb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},fb=function fb(e,t,r,n,i){var o=q(e.session.backend.glContext.version),_e$calculateTextureWi7=e.calculateTextureWidthAndHeight(i,4),_e$calculateTextureWi8=_slicedToArray(_e$calculateTextureWi7,2),a=_e$calculateTextureWi8[0],s=_e$calculateTextureWi8[1],u=a/4,l=s,h="\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ".concat(u,", ").concat(l,");\n        return ").concat(o.texture2D,"(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }");return _objectSpread(_objectSpread({},t),{},{output:{dims:r.dims,type:r.type,textureType:0},variables:[{name:"epsilon",type:"float",data:n}],shaderSource:h});},cb=function cb(e,t,r,n){var i=_objectSpread(_objectSpread({},lb),{},{cacheHint:"".concat(r)});return _objectSpread(_objectSpread({},i),{},{get:function get(){return fb(e,i,t,r,n);}});},pb=function pb(e){if(!e||3!==e.length)throw new Error("InstanceNormalization requires 3 inputs.");var t=e[0],r=e[1],n=e[2];if(t.dims.length<3||1!==r.dims.length||1!==n.dims.length)throw new Error("Invalid input shape.");if(r.dims[0]!==t.dims[1]||n.dims[0]!==t.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==t.type&&"float64"!==t.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==n.type&&"float64"!==n.type)throw new Error("Invalid input type.");if(4!==e[0].dims.length)throw new Error("Only support 4-D input shape.");};});function db(e,t){var r=e[0].dims[1],n=e[0].dims.length,i=-Math.floor((t.size-1)/2),o=Math.ceil((t.size-1)/2),a="float(".concat(t.alpha,") / float(").concat(t.size,")"),s="\n    float process(int indices[".concat(n,"]) {\n        int c = indices[1];\n        float x = _X(indices);\n        float square_sum = 0.0;\n\n        for (int i = ").concat(i,"; i <= ").concat(o,"; i++) {\n          int idx = c + i;\n          if (c >= 0 && c < ").concat(r,") {\n            indices[1] = idx;\n            float j = _X(indices);\n            square_sum += j * j;\n          }\n        }\n        return x / pow(","float(".concat(t.bias,")")," + ").concat(a," * square_sum, ","float(".concat(t.beta,")"),");\n    }");return _objectSpread(_objectSpread({},Uf),{},{cacheHint:t.cacheKey,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:s});}function hb(e,t){return _objectSpread(_objectSpread({},Uf),{},{cacheHint:t.cacheKey,get:function get(){return db(e,t);}});}var Mf,Gf,Uf,mb,zf=L(function(){Ge(),ae(),Mf=function Mf(e,t,r){return mb(t),[e.run(hb(t,r),t)];},Gf=function Gf(e){var t=e.attributes.getFloat("alpha",1e-4),r=e.attributes.getFloat("beta",.75),n=e.attributes.getFloat("bias",1),i=e.attributes.getInt("size");return te({alpha:t,beta:r,bias:n,size:i});},Uf={name:"LRN",inputNames:["X"],inputTypes:[0]},mb=function mb(e){if(!e||1!==e.length)throw new Error("LRN requires 1 input.");if(4!==e[0].dims.length)throw new Error('currently only support LRN for input with "NCHW" format');if("float32"!==e[0].type)throw new Error("input should be float type");};}),bb,Ui,Wf,Vf,Hf,gb,yb,Tb,xb,wb,vb,_b,Ob,jf=L(function(){Ge(),fe(),ve(),ae(),bb={name:"Pad",inputNames:["A"],inputTypes:[0]},Ui=function Ui(e,t,r){return Tb(t),[e.run(_objectSpread(_objectSpread({},bb),{},{cacheHint:r.cacheKey,get:function get(){return yb(e,t[0],r);}}),t)];},Wf=function Wf(e){var t=e.attributes.getString("mode","constant"),r=e.attributes.getFloat("value",0),n=e.attributes.getInts("pads");return te({mode:t,value:r,pads:n});},Vf=function Vf(e,t,r){xb(t);var n=gb(e,t,r);return Ui(e,[t[0]],n);},Hf=function Hf(e){return e.attributes.getString("mode","constant");},gb=function gb(e,t,r){if(!e.session.isInitializer(t[1].dataId)||t.length>=3&&!e.session.isInitializer(t[2].dataId))throw new Error("dynamic pad attributes are not allowed");var n=Array.from(t[1].integerData),i=t.length>=3?t[2].floatData[0]:0;return te({mode:r,pads:n,value:i});},yb=function yb(e,t,r){var n=z.padShape(t.dims.slice(),r.pads),i=n.length,o="\n      ".concat(wb(e,t,r),"\n      float process(int[").concat(i,"] indices) {\n          return padA(indices);\n      }");return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:n,type:t.type,textureType:0},shaderSource:o};},Tb=function Tb(e){if(!e||1!==e.length)throw new Error("Pad requires 1 input");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.");},xb=function xb(e){if(!e||2!==e.length&&3!==e.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==e[1].type)throw new Error("Invalid input type.");if(e.length>=3&&"string"===e[2].type)throw new Error("Invalid input type.");},wb=function wb(e,t,r){var n=q(e.session.backend.glContext.version),_e$calculateTextureWi9=e.calculateTextureWidthAndHeight(t.dims,0),_e$calculateTextureWi10=_slicedToArray(_e$calculateTextureWi9,2),i=_e$calculateTextureWi10[0],o=_e$calculateTextureWi10[1],a=z.computeStrides(t.dims);switch(r.mode){case"constant":return vb(n,t.dims,a,i,o,r.pads,r.value);case"reflect":return _b(n,t.dims,a,i,o,r.pads);case"edge":return Ob(n,t.dims,a,i,o,r.pads);default:throw new Error("Invalid mode");}},vb=function vb(e,t,r,n,i,o,a){var s=t.length,u="";for(var _e114=s-1;_e114>=0;--_e114)u+="\n        k = m[".concat(_e114,"] - ").concat(o[_e114],";\n        if (k < 0)  return constant;\n        if (k >= ").concat(t[_e114],") return constant;\n        offset += k * ").concat(r[_e114],";\n        ");return"\n      float padA(int m[".concat(s,"]) {\n        const float constant = float(").concat(a,");\n        int offset = 0;\n        int k = 0;\n        ").concat(u,"\n        vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(i,");\n        float value = getColorAsFloat(").concat(e.texture2D,"(A, coords));\n        return value;\n      }\n      ");},_b=function _b(e,t,r,n,i,o){var a=t.length,s="";for(var _e115=a-1;_e115>=0;--_e115)s+="\n        k = m[".concat(_e115,"] - ").concat(o[_e115],";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ").concat(2*(t[_e115]-1),";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ").concat(t[_e115],") { k = _2n_1 - k; }\n        }\n        offset += k * ").concat(r[_e115],";\n        ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(i,");\n        float value = getColorAsFloat(").concat(e.texture2D,"(A, coords));\n        return value;\n      }\n      ");},Ob=function Ob(e,t,r,n,i,o){var a=t.length,s="";for(var _e116=a-1;_e116>=0;--_e116)s+="\n        k = m[".concat(_e116,"] - ").concat(o[_e116],";\n        if (k < 0)  k = 0;\n        if (k >= ").concat(t[_e116],") k = ").concat(t[_e116]-1,";\n        offset += k * ").concat(r[_e116],";\n      ");return"\n      float padA(int m[".concat(a,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(i,");\n        float value = getColorAsFloat(").concat(e.texture2D,"(A, coords));\n        return value;\n      }\n      ");};}),Yf,Xf,Kf,Jf,Zf,Qf,ec,tc,rc,Ib,qf,nc,bo,oc,mo,Sb,ic=L(function(){Ge(),fe(),ae(),Yf=function Yf(e,t,r){bo(t);var n={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[e.run(_objectSpread(_objectSpread({},n),{},{get:function get(){return Kf(t,n,!1,r);}}),t)];},Xf=function Xf(e){var t=e.attributes.getString("auto_pad","NOTSET"),r=e.attributes.getInt("ceil_mode",0),n=0!==e.attributes.getInt("count_include_pad",0),i=e.attributes.getInts("kernel_shape"),o=e.attributes.getInts("strides",[]),a=e.attributes.getInts("pads",[]);if(0!==r)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return te({autoPad:t,ceilMode:r,countIncludePad:n,kernelShape:i,strides:o,pads:a});},Kf=function Kf(e,t,r,n){var _rc=rc(e,n,r),_rc2=_slicedToArray(_rc,2),i=_rc2[0],o=_rc2[1],a=z.size(i.kernelShape),s="";i.countIncludePad?s+="value /= float(".concat(a,");"):s+="value /= float(".concat(a," - pad);");var u="\n        ".concat(oc(e[0].dims,i,"value += _X(x);",s,"0.0"),"\n      ");return _objectSpread(_objectSpread({},t),{},{output:{dims:o,type:e[0].type,textureType:0},shaderSource:u});},Jf=function Jf(e,t,r){bo(t);var n={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:"".concat(r.countIncludePad)};return[e.run(_objectSpread(_objectSpread({},n),{},{get:function get(){return Kf(t,n,!0,r);}}),t)];},Zf=function Zf(e){var t=0!==e.attributes.getInt("count_include_pad",0);return te({autoPad:"",ceilMode:0,countIncludePad:t,kernelShape:[],strides:[],pads:[]});},Qf=function Qf(e,t,r){bo(t);var n={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[e.run(_objectSpread(_objectSpread({},n),{},{get:function get(){return tc(t,n,!1,r);}}),t)];},ec=function ec(e){var t=e.attributes.getString("auto_pad","NOTSET"),r=e.attributes.getInt("ceil_mode",0),n=e.attributes.getInts("kernel_shape"),i=e.attributes.getInts("strides",[]),o=e.attributes.getInts("pads",[]),a=e.attributes.getInt("storage_order",0),s=e.attributes.getInts("dilations",[]);if(0!==a)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==r)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return te({autoPad:t,ceilMode:r,countIncludePad:!1,kernelShape:n,strides:i,pads:o,storageOrder:a,dilations:s});},tc=function tc(e,t,r,n){var _rc3=rc(e,n,r),_rc4=_slicedToArray(_rc3,2),i=_rc4[0],o=_rc4[1],a="\n      ".concat(oc(e[0].dims,i,"\n      value = max(_X(x), value);\n    ","","-1e5"),"\n    ");return _objectSpread(_objectSpread({},t),{},{output:{dims:o,type:e[0].type,textureType:0},shaderSource:a});},rc=function rc(e,t,r){var n=e[0].dims.slice(),i=Object.hasOwnProperty.call(t,"dilations"),o=t.kernelShape.slice(),a=t.strides.slice(),s=i?t.dilations.slice():[],u=t.pads.slice();xr.adjustPoolAttributes(r,n,o,a,s,u);var l=xr.computePoolOutputShape(r,n,a,s,o,u,t.autoPad),h=Object.assign({},t);return i?Object.assign(h,{kernelShape:o,strides:a,pads:u,dilations:s,cacheKey:t.cacheKey}):Object.assign(h,{kernelShape:o,strides:a,pads:u,cacheKey:t.cacheKey}),[h,l];},Ib={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},qf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},nc=function nc(e,t){return bo(t),[e.run(_objectSpread(_objectSpread({},qf),{},{get:function get(){return tc(t,qf,!0,Ib);}}),t)];},bo=function bo(e){if(!e||1!==e.length)throw new Error("Pool ops requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.");},oc=function oc(e,t,r,n,i){var o=e.length;if(t.kernelShape.length<=2){var _a9=t.kernelShape[t.kernelShape.length-1],s=t.strides[t.strides.length-1],u=t.pads[t.pads.length/2-1],l=t.pads[t.pads.length-1],h=e[o-1],c="",d="",f="";if(c=u+l!==0?"\n          for (int i = 0; i < ".concat(_a9,"; i++) {\n            x[").concat(o," - 1] = indices[").concat(o," - 1] * ").concat(s," - ").concat(u," + i;\n            if (x[").concat(o," - 1] < 0 || x[").concat(o," - 1] >= ").concat(h,") {\n              pad++;\n              continue;\n            }\n            ").concat(r,"\n          }"):"\n          for (int i = 0; i < ".concat(_a9,"; i++) {\n            x[").concat(o," - 1] = indices[").concat(o," - 1] * ").concat(s," - ").concat(u," + i;\n            ").concat(r,"\n          }"),2===t.kernelShape.length){var _r96=t.kernelShape[t.kernelShape.length-2],_n16=t.strides[t.strides.length-2],_i15=t.pads[t.pads.length/2-2],_s3=t.pads[t.pads.length-2],_u5=e[o-2];d=_i15+_s3!==0?"\n            for (int j = 0; j < ".concat(_r96,"; j++) {\n              x[").concat(o," - 2] = indices[").concat(o," - 2] * ").concat(_n16," - ").concat(_i15," + j;\n              if (x[").concat(o," - 2] < 0 || x[").concat(o," - 2] >= ").concat(_u5,") {\n                pad+= ").concat(_a9,";\n                continue;\n              }\n          "):"\n            for (int j = 0; j < ".concat(_r96,"; j++) {\n              x[").concat(o," - 2] = indices[").concat(o," - 2] * ").concat(_n16," - ").concat(_i15," + j;\n            "),f="\n          }\n        ";}return"\n        float process(int indices[".concat(o,"]) {\n          int x[").concat(o,"];\n          copyVec(indices, x);\n\n          float value = ").concat(i,";\n          int pad = 0;\n          ").concat(d,"\n          ").concat(c,"\n          ").concat(f,"\n          ").concat(n,"\n          return value;\n        }\n      ");}{var _a10=z.size(t.kernelShape),_s4=z.computeStrides(t.kernelShape),_u6=_s4.length,_l4=t.pads.length,_h2=Sb(_u6),_c2=mo(e,"inputDims"),_d2=mo(t.pads,"pads"),_f2=mo(_s4,"kernelStrides"),p=mo(t.strides,"strides"),y="";return y=t.pads.reduce(function(e,t){return e+t;})?"\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ".concat(r,"\n          }"):"\n          }\n          ".concat(r,"\n        "),"\n        ".concat(_h2,"\n        float process(int indices[").concat(o,"]) {\n          int x[").concat(o,"];\n          copyVec(indices, x);\n          int offset[").concat(_u6,"];\n          int pads[").concat(_l4,"];\n          int inputDims[").concat(o,"];\n          int kernelStrides[").concat(_u6,"];\n          int strides[").concat(_u6,"];\n          ").concat(_d2,"\n          ").concat(_c2,"\n          ").concat(p,"\n          ").concat(_f2,"\n\n          float value = ").concat(i,";\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ").concat(_a10,"; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ").concat(o," - ").concat(_u6,"; j < ").concat(o,"; j++) {\n              x[j] = indices[j] * strides[j - ").concat(o," + ").concat(_u6,"]\n                + offset[j - ").concat(o," + ").concat(_u6,"] - pads[j - 2];\n              ").concat(y,"\n          }\n          ").concat(n,"\n\n          return value;\n        }\n      ");}},mo=function mo(e,t){var r="";for(var n=0;n<e.length;n++)r+="\n      ".concat(t,"[").concat(n,"] = ").concat(e[n],";\n    ");return r;},Sb=function Sb(e){return"\n  void offsetToIndices(int offset, int[".concat(e,"] strides, out int[").concat(e,"] indices) {\n    if (").concat(e," == 0) {\n      return;\n    }\n    for (int i = 0; i < ").concat(e," - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[").concat(e," - 1] = offset;\n  }");};}),Ar,nr,Ab,Eb,ac,sc,uc,lc,fc,cc,pc,dc=L(function(){Ge(),yn(),fe(),ae(),Ar=function Ar(e,t,r,n,i){Eb(t);var o={name:n,inputNames:["A"],inputTypes:[0]};return[e.run(_objectSpread(_objectSpread({},o),{},{cacheHint:r.cacheKey,get:function get(){return Ab(e,t,r,n,i,o);}}),t)];},nr=function nr(e){var t=e.attributes.getInts("axes",[]),r=1===e.attributes.getInt("keepdims",1);return te({axes:t,keepDims:r});},Ab=function Ab(e,t,r,n,i,o){var a=[],s=t[0].dims.length||1,u=[],l=z.normalizeAxes(r.axes,t[0].dims.length),h=i(t,l),c=h[1];for(var _e117=0;_e117<t[0].dims.length;_e117++)l.indexOf(_e117)>=0||0===l.length?(r.keepDims&&a.push(1),c="\n          for(int j".concat(_e117," = 0; j").concat(_e117," < ").concat(t[0].dims[_e117],"; j").concat(_e117,"++) {\n            inputIdx[").concat(_e117,"] = j").concat(_e117,";\n            ").concat(c,"\n          }")):(u.push("inputIdx[".concat(_e117,"] = outputIdx[").concat(a.length,"];")),a.push(t[0].dims[_e117]));var d="\n      float process(int outputIdx[".concat(a.length||1,"]) {\n        float value;                 // final result\n        int inputIdx[").concat(s,"];      // addressing input data\n        ").concat(u.join("\n"),"\n        ").concat(h[0],"       // init ops for reduce max/min\n        ").concat(c,"\n        ").concat(h[2],"       // final computation for reduce mean\n        return value;\n      }");return _objectSpread(_objectSpread({},o),{},{output:{dims:a,type:t[0].type,textureType:0},shaderSource:d});},Eb=function Eb(e){if(!e||1!==e.length)throw new Error("Reduce op requires 1 input.");if(-1===rr.indexOf(e[0].type))throw new Error("Invalid input type.");},ac=function ac(e,t,r){return Ar(e,t,r,"ReduceSum",function(){return["value = 0.0;","value += _A(inputIdx);",""];});},sc=function sc(e,t,r){return Ar(e,t,r,"ReduceMean",function(e,t){var r=1;for(var n=0;n<e[0].dims.length;n++)(t.indexOf(n)>=0||0===t.length)&&(r*=e[0].dims[n]);return["value = 0.0;","value += _A(inputIdx);","value /= ".concat(r,".;")];});},uc=function uc(e,t,r){return Ar(e,t,r,"ReduceMax",function(e,t){var r=[];for(var n=0;n<e[0].dims.length;n++)(t.indexOf(n)>=0||0===t.length)&&r.push("inputIdx[".concat(n,"] = 0;"));return["".concat(r.join("\n"),"\nvalue = _A(inputIdx);"),"value = max(value, _A(inputIdx));",""];});},lc=function lc(e,t,r){return Ar(e,t,r,"ReduceMin",function(e,t){var r=[];for(var n=0;n<e[0].dims.length;n++)(t.indexOf(n)>=0||0===t.length)&&r.push("inputIdx[".concat(n,"] = 0;"));return["".concat(r.join("\n"),"\nvalue = _A(inputIdx);"),"value = min(value, _A(inputIdx));",""];});},fc=function fc(e,t,r){return Ar(e,t,r,"ReduceProd",function(){return["value = 1.0;","value *= _A(inputIdx);",""];});},cc=function cc(e,t,r){return Ar(e,t,r,"ReduceLogSum",function(){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"];});},pc=function pc(e,t,r){return Ar(e,t,r,"ReduceLogSumSquare",function(){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""];});};}),hc,mc=L(function(){fe(),hc=function hc(e,t){var r=z.calculateReshapedDims(t[0].dims,t[1].integerData);return e.session.pack?[e.reshapePacked(t[0],r)]:[e.reshapeUnpacked(t[0],r)];};}),bc,zi,gc,yc,Tn,Pb,Wi,go,Vi=L(function(){Ge(),ve(),ae(),bc={name:"Upsample",inputNames:["X"],inputTypes:[0]},zi=function zi(e,t,r){return Wi(t,r),[e.run(_objectSpread(_objectSpread({},bc),{},{cacheHint:r.cacheKey,get:function get(){return Pb(e,t,r);}}),t)];},gc=function gc(e){return Tn(e,7);},yc=function yc(e){return Tn(e,9);},Tn=function Tn(e,t){var r=t>=10,n=e.attributes.getString("mode","nearest");if("nearest"!==n&&"linear"!==n&&(t<11||"cubic"!==n))throw new Error("unrecognized mode: ".concat(n));var i=[];t<9&&(i=e.attributes.getFloats("scales"),go(i,n,r));var o=e.attributes.getFloat("extrapolation_value",0),a=t>10?e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(a))throw new Error("coordinate_transform_mode '".concat(a,"' is not supported"));var s="tf_crop_and_resize"===a,u=s,l="nearest"===n&&t>=11?e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(l))throw new Error("nearest_mode '".concat(l,"' is not supported"));var h=e.attributes.getFloat("cubic_coeff_a",-.75),c=0!==e.attributes.getInt("exclude_outside",0);if(c&&"cubic"!==n)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");var d=t<11||"nearest"===n&&"asymmetric"===a&&"floor"===l,f=0,p=0,y=0;return t>10?e.inputs.length>2?(f=1,p=2,y=3):(p=1,y=2):9===t&&(p=1),te({opset:t,isResize:r,mode:n,scales:i,extrapolationValue:o,coordinateTransformMode:a,useExtrapolation:u,needRoiInput:s,nearestMode:l,cubicCoefficientA:h,excludeOutside:c,useNearest2xOptimization:d,roiInputIdx:f,scalesInputIdx:p,sizesInputIdx:y});},Pb=function Pb(e,t,r){var n=q(e.session.backend.glContext.version),_e$calculateTextureWi11=e.calculateTextureWidthAndHeight(t[0].dims,0),_e$calculateTextureWi12=_slicedToArray(_e$calculateTextureWi11,2),i=_e$calculateTextureWi12[0],o=_e$calculateTextureWi12[1],a=t[0].dims.map(function(e,t){return Math.floor(e*r.scales[t]);}),_e$calculateTextureWi13=e.calculateTextureWidthAndHeight(a,0),_e$calculateTextureWi14=_slicedToArray(_e$calculateTextureWi13,2),s=_e$calculateTextureWi14[0],u=_e$calculateTextureWi14[1],l=a.length,h=new Array(l),c=new Array(l),d="\n      int output_pitches[".concat(l,"];\n      int input_pitches[").concat(l,"];\n      ");for(var _e118=l-1;_e118>=0;_e118--)h[_e118]=_e118===l-1?1:h[_e118+1]*a[_e118+1],c[_e118]=_e118===l-1?1:c[_e118+1]*t[0].dims[_e118+1],d+="\n        output_pitches[".concat(_e118,"] = ").concat(h[_e118],";\n        input_pitches[").concat(_e118,"] = ").concat(c[_e118],";\n        ");var f="\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ".concat(i,", ").concat(o,");\n        float value = getColorAsFloat(").concat(n.texture2D,"(X, coords));\n        return value;\n      }\n      "),p="nearest"===r.mode?"\n    ".concat(f,"\n    float process(int indices[").concat(l,"]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(s,", ").concat(u,");\n\n      ").concat(d,"\n\n      int d, m;\n      for (int dim = 0; dim < ").concat(l,"; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }"):4===l?"\n    ".concat(f,"\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(s,", ").concat(u,");\n\n      ").concat(d,"\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (").concat(t[0].dims[2]," - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }"):"\n    ".concat(f,"\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(s,", ").concat(u,");\n\n      ").concat(d,"\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (").concat(t[0].dims[0]," - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }");return _objectSpread(_objectSpread({},bc),{},{output:{dims:a,type:t[0].type,textureType:0},shaderSource:p,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(function(e){return Math.ceil(e);})}]});},Wi=function Wi(e,t){if(!e||t.opset<9&&1!==e.length||t.opset>=9&&t.opset<11&&2!==e.length||t.opset>=11&&e.length<2)throw new Error("invalid inputs.");if(t.scales.length>0&&e[0].dims.length!==t.scales.length)throw new Error("Invalid input shape.");if("string"===e[0].type)throw new Error("Invalid input tensor types.");},go=function go(e,t,r){if(r){var _iterator17=_createForOfIteratorHelper(e),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var _t72=_step17.value;if(_t72<=0)throw new Error("Scale value should be greater than 0.");}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}}else{var _iterator18=_createForOfIteratorHelper(e),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _t73=_step18.value;if(_t73<1)throw new Error("Scale value should be greater than or equal to 1.");}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}if(!("linear"!==t&&"cubic"!==t||2===e.length||4===e.length&&1===e[0]&&1===e[1]))throw new Error("'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ".concat(r?"Resize":"Upsample"," opeartor."));};}),Hi,ji,Tc,xc,Db,Lb,Fb,Cb,wc=L(function(){ve(),ae(),Bt(),Or(),Vi(),Hi={name:"Resize",inputNames:["A"],inputTypes:[2]},ji=function ji(e,t,r){return Wi(t,r),[e.run(_objectSpread(_objectSpread({},Hi),{},{cacheHint:r.cacheKey,get:function get(){return Db(e,t,r);}}),t)];},Tc=function Tc(e){return Tn(e,10);},xc=function xc(e){return Tn(e,11);},Db=function Db(e,t,r){var n=q(e.session.backend.glContext.version),_Lb=Lb(t,r),_Lb2=_slicedToArray(_Lb,2),i=_Lb2[0],o=_Lb2[1];if(i.every(function(e){return 1===e;})&&"tf_crop_and_resize"!==r.coordinateTransformMode)return _objectSpread(_objectSpread({},Hi),{},{output:{dims:o,type:t[0].type,textureType:2},hasMain:!0,shaderSource:"void main() {\n                    vec4 v = ".concat(n.texture2D,"(X, TexCoords);\n                    ").concat(n.output," = v;\n                }")});var a=o.length;if(a<2)throw new Error("output dimension should be at least 2, but got ".concat(a));var s=o[a-2],u=o[a-1],l=t[0].dims;if(a!==l.length)throw new Error("output dimension should match input ".concat(l.length,", but got ").concat(a));var h=l[a-2],c=l[a-1],d=i[a-2],f=i[a-1],p="";if("linear"!==r.mode)throw new Error("resize (packed) does not support mode: '".concat(r.mode,"'"));switch(r.coordinateTransformMode){case"asymmetric":p="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":p="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":p="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ".concat(u,".0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ").concat(s,".0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ").concat(u,".0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ").concat(s,".0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                ");break;case"align_corners":p="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(".concat(u,".0 - 1.0, ").concat(s,".0 - 1.0, ").concat(u,".0 - 1.0,\n                            ").concat(s,".0 - 1.0);\n                        vec4 original = vec4(").concat(c,".0 - 1.0, ").concat(h,".0 - 1.0, ").concat(c,".0 - 1.0,\n                            ").concat(h,".0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                ");break;default:throw new Error("resize (packed) does not support coordinateTransformMode:                                 '".concat(r.coordinateTransformMode,"'"));}var y=Je(a),g="\n            const vec2 inputWH = vec2(".concat(h,".0, ").concat(c,".0);\n            const vec4 scaleWHWH = vec4(float(").concat(d,"), float(").concat(f,"), float(").concat(d,"), float(").concat(f,"));\n            ").concat(kt(),"\n            ").concat(p,"\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ").concat(y," rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ").concat(s-1,";\n                bool hasNextCol = rc.z < ").concat(u-1,";\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ").concat(n.output," = vec4(newValue);\n            }\n        ");return _objectSpread(_objectSpread({},Hi),{},{output:{dims:o,type:t[0].type,textureType:2},hasMain:!0,shaderSource:g});},Lb=function Lb(e,t){var r,n=e[0].dims,i=t.scales;if(0===i.length){var _o10=e[t.scalesInputIdx];if(_o10&&0!==_o10.size){if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");i=Fb(_o10,t.mode,t.isResize);}else{var _o11=e[t.sizesInputIdx];if(!_o11||0===_o11.size)throw new Error("Either scales or sizes MUST be provided as input.");r=Array.from(_o11.integerData),i=Cb(r,n,t.mode,t.isResize);}}else if(e[t.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");var o=r||n.map(function(e,t){return Math.floor(e*i[t]);});return[i,o];},Fb=function Fb(e,t,r){var n=Array.from(e.floatData);return go(n,t,r),n;},Cb=function Cb(e,t,r,n){var i=t.length,o=new Array(i);for(var _r97=0,_n17=i;_r97<_n17;_r97++)if(0===t[_r97]){if(0!==e[_r97])throw new Error("Input dim is zero but required output dim is non-zero.");o[_r97]=1;}else o[_r97]=e[_r97]/t[_r97];return go(o,r,n),o;};}),vc,$b,_c=L(function(){_r(),vc=function vc(e,t){return $b(t),[new Ce([t[0].dims.length],"int32",void 0,void 0,new Int32Array(t[0].dims))];},$b=function $b(e){if(!e||1!==e.length)throw new Error("Shape requires 1 input.");};}),qi,Oc,Ic,Sc,Bb,Ac,kb,Nb,Ec=L(function(){Ge(),yn(),fe(),ae(),qi={name:"Slice",inputNames:["A"],inputTypes:[0]},Oc=function Oc(e,t,r){return Bb(t),[e.run(_objectSpread(_objectSpread({},qi),{},{cacheHint:r.cacheKey,get:function get(){return Sc(e,t[0],r);}}),t)];},Ic=function Ic(e){var t=e.attributes.getInts("starts"),r=e.attributes.getInts("ends"),n=e.attributes.getInts("axes",[]);return te({starts:t,ends:r,axes:n});},Sc=function Sc(e,t,r){var n=0===r.axes.length?t.dims.slice(0).map(function(e,t){return t;}):r.axes,i=z.normalizeAxes(n,t.dims.length),o=r.starts.map(function(e,r){return e>t.dims[i[r]]-1?t.dims[i[r]]:z.normalizeAxis(e,t.dims[i[r]]);}),a=r.ends.map(function(e,r){return e>t.dims[i[r]]-1?t.dims[i[r]]:z.normalizeAxis(e,t.dims[i[r]]);}),s=t.dims.slice(),u=[];for(var _e119=0;_e119<i.length;_e119++)s[i[_e119]]=a[_e119]-o[_e119],o[_e119]>0&&u.push("outputIdx[".concat(i[_e119],"] += ").concat(o[_e119],";"));var l="\n      float process(int outputIdx[".concat(s.length,"]) {\n        ").concat(u.join("\n      "),"\n        return _A(outputIdx);\n      }");return _objectSpread(_objectSpread({},qi),{},{output:{dims:s,type:t.type,textureType:0},shaderSource:l});},Bb=function Bb(e){if(!e||1!==e.length)throw new Error("Slice requires 1 input.");if(-1===rr.indexOf(e[0].type))throw new Error("Invalid input type.");},Ac=function Ac(e,t){Nb(t);var r=kb(e,t);return[e.run(_objectSpread(_objectSpread({},qi),{},{cacheHint:r.cacheKey,get:function get(){return Sc(e,t[0],r);}}),[t[0]])];},kb=function kb(e,t){if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(function(e){return 1!==e;}))throw new Error("currently non-1 steps is not supported for Slice");var r=Array.from(t[1].integerData),n=Array.from(t[2].integerData),i=t.length>=4?Array.from(t[3].integerData):[];return{starts:r,ends:n,axes:i,cacheKey:"".concat(i,";").concat(r,";").concat(n)};},Nb=function Nb(e){if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if("int32"!==e[1].type||1!==e[1].dims.length)throw new Error("Invalid input type.");if("int32"!==e[2].type||1!==e[2].dims.length)throw new Error("Invalid input type.");if(e.length>=4&&("int32"!==e[3].type||1!==e[3].dims.length))throw new Error("Invalid input type.");if(e.length>=5&&("int32"!==e[4].type||1!==e[4].dims.length))throw new Error("Invalid input type.");};}),Pc,Dc,Lc,Fc,Cc,$c,Bc,kc,Rb,Mb,Gb,Nc,Rc=L(function(){Ge(),fe(),ve(),ae(),ho(),Pc={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Dc={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Lc={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Fc=function Fc(e,t,r){Nc(t);var n=t[0].dims.slice(),i=z.normalizeAxis(r.axis,n.length),o=z.sizeToDimension(n,i),a=z.sizeFromDimension(n,i);return kc(e,t,r,o,a);},Cc=function Cc(e){return te({axis:e.attributes.getInt("axis",1)});},$c=function $c(e){return te({axis:e.attributes.getInt("axis",-1)});},Bc=function Bc(e,t,r){Nc(t);var n,i=t[0].dims.slice(),o=z.normalizeAxis(r.axis,i.length),a=i.length,s=o!==a-1,u=[],l=[],h=[];s&&(l=Array.from({length:a}).map(function(e,t){return t;}),l[o]=a-1,l[a-1]=o,l.map(function(e){return u.push(i[e]);}),n=te({perm:l}),h=Sr(e,t,n));var c=s?z.sizeToDimension(u,a-1):z.sizeToDimension(i,a-1),d=s?z.sizeFromDimension(u,a-1):z.sizeFromDimension(i,a-1),f=kc(e,s?h:t,r,c,d);return s?Sr(e,f,n):f;},kc=function kc(e,t,r,n,i){var o=Rb(e,t[0],n,i,[n]),a=e.run(_objectSpread(_objectSpread({},Pc),{},{cacheHint:r.cacheKey,get:function get(){return o;}}),t),s=Mb(e,t[0],n,i,o.output.dims,[n]),u=e.run(_objectSpread(_objectSpread({},Dc),{},{cacheHint:r.cacheKey,get:function get(){return s;}}),[t[0],a]),l=Gb(e,t[0],n,i,o.output.dims,s.output.dims);return[e.run(_objectSpread(_objectSpread({},Lc),{},{cacheHint:r.cacheKey,get:function get(){return l;}}),[t[0],a,u])];},Rb=function Rb(e,t,r,n,i){var _e$calculateTextureWi15=e.calculateTextureWidthAndHeight(t.dims,0),_e$calculateTextureWi16=_slicedToArray(_e$calculateTextureWi15,2),o=_e$calculateTextureWi16[0],a=_e$calculateTextureWi16[1],s=i.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw new Error("Dimensionality of the output should be 1");if(i[0]!==r)throw new Error("Shape of the output should be equal to logical row count");var u=q(e.session.backend.glContext.version),l="\n      float process(int[".concat(s,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(n,";\n\n        float max = getColorAsFloat(").concat(u.texture2D,"(A, offsetToCoords(logical_row_start_offset, ").concat(o,",\n        ").concat(a," )));\n        for(int i=1; i<").concat(n,"; ++i)\n        {\n          float current = getColorAsFloat(").concat(u.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(o,", ").concat(a,")));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }");return _objectSpread(_objectSpread({},Pc),{},{output:{dims:i,type:t.type,textureType:0},shaderSource:l});},Mb=function Mb(e,t,r,n,i,o){var _e$calculateTextureWi17=e.calculateTextureWidthAndHeight(t.dims,0),_e$calculateTextureWi18=_slicedToArray(_e$calculateTextureWi17,2),a=_e$calculateTextureWi18[0],s=_e$calculateTextureWi18[1],u=o.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==o.length)throw new Error("Dimensionality of the output should be 1");if(o[0]!==r)throw new Error("Shape of the output should be equal to logical row count");if(1!==i.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");var l="\n      float process(int[".concat(u,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(n,";\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<").concat(n,"; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(").concat(q(e.session.backend.glContext.version).texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(a,", ").concat(s,"))) - max);\n        }\n\n        return norm_factor;\n      }");return _objectSpread(_objectSpread({},Dc),{},{output:{dims:o,type:t.type,textureType:0},shaderSource:l});},Gb=function Gb(e,t,r,n,i,o){var _e$calculateTextureWi19=e.calculateTextureWidthAndHeight(t.dims,0),_e$calculateTextureWi20=_slicedToArray(_e$calculateTextureWi19,2),a=_e$calculateTextureWi20[0],s=_e$calculateTextureWi20[1],u=t.dims.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length||1!==o.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r||o[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");var l="\n      float process(int[".concat(u,"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ").concat(a,", ").concat(s,");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ").concat(n,";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }");return _objectSpread(_objectSpread({},Lc),{},{output:{dims:t.dims,type:t.type,textureType:0},shaderSource:l});},Nc=function Nc(e){if(!e||1!==e.length)throw new Error("Softmax requires 1 input.");if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type");};}),Mc,Gc,Uc,Ub,zb,Wb,zc=L(function(){Ge(),fe(),ae(),Mc={name:"Split",inputNames:["A"],inputTypes:[0]},Gc=function Gc(e,t,r){Wb(t);var n=z.normalizeAxis(r.axis,t[0].dims.length),i=Ub(e,t,n,r),o=[];var _loop2=function _loop2(_a11){o.push(e.run(_objectSpread(_objectSpread({},Mc),{},{cacheHint:"".concat(r.cacheKey,";").concat(_a11),get:function get(){return zb(e,t[0],r,n,_a11);}}),t));};for(var _a11=0;_a11<i;++_a11){_loop2(_a11);}return o;},Uc=function Uc(e){var t=e.attributes.getInt("axis",0),r=e.attributes.getInts("split",[]),n=e.outputs.length;return te({axis:t,split:r,numOutputs:n});},Ub=function Ub(e,t,r,n){var _pn$splitShape=pn.splitShape(t[0].dims,r,n.split,n.numOutputs),_pn$splitShape2=_slicedToArray(_pn$splitShape,2),i=_pn$splitShape2[1];return i.length;},zb=function zb(e,t,r,n,i){var _pn$splitShape3=pn.splitShape(t.dims,n,r.split,r.numOutputs),_pn$splitShape4=_slicedToArray(_pn$splitShape3,2),o=_pn$splitShape4[0],a=_pn$splitShape4[1],s=a[i],u=o[i],l="\n      float process(int indices[".concat(u.length,"]) {\n        indices[").concat(n,"] += ").concat(s,";\n        return _A(indices);\n      }\n    ");return _objectSpread(_objectSpread({},Mc),{},{cacheHint:"".concat(r.cacheKey,":").concat(i),output:{dims:u,type:t.type,textureType:0},shaderSource:l});},Wb=function Wb(e){if(!e||1!==e.length)throw new Error("Split requires one input.");if("int8"!==e[0].type&&"uint8"!==e[0].type&&"int16"!==e[0].type&&"uint16"!==e[0].type&&"int32"!==e[0].type&&"uint32"!==e[0].type&&"float32"!==e[0].type&&"float64"!==e[0].type&&"bool"!==e[0].type)throw new Error("Invalid input type.");};}),Yi,Wc,Vc,Vb,Hb,Hc=L(function(){fe(),Yi=function Yi(e,t,r){Vb(t);var n=z.squeezeShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],n)];},Wc=function Wc(e,t){return Hb(t),Yi(e,[t[0]],Array.from(t[1].integerData));},Vc=function Vc(e){return e.attributes.getInts("axes");},Vb=function Vb(e){if(!e||1!==e.length)throw new Error("Squeeze requires 1 input.");if("string"===e[0].type)throw new Error("invalid input tensor types.");},Hb=function Hb(e){if(!e||2!==e.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==e[1].type)throw new Error("Invalid input type.");};}),jc,jb,qb,qc=L(function(){ve(),ae(),jc=function jc(e,t){qb(t);var r={name:"Sum",inputNames:t.map(function(e,t){return"X".concat(t);}),inputTypes:new Array(t.length).fill(0)};return[e.run(_objectSpread(_objectSpread({},r),{},{get:function get(){return jb(e,t,r);}}),t)];},jb=function jb(e,t,r){var n=q(e.session.backend.glContext.version),i=t[0].dims.slice(),o="\n      void main() {\n        vec4 result = ".concat(t.map(function(e,t){return"".concat(n.texture2D,"(X").concat(t,",TexCoords)");}).join(" + "),";\n        ").concat(n.output," = result;\n      }\n    ");return _objectSpread(_objectSpread({},r),{},{output:{dims:i,type:t[0].type,textureType:0},hasMain:!0,shaderSource:o});},qb=function qb(e){if(!e||0===e.length)throw new Error("Sum requires inputs.");var t=e[0].dims.length;for(var r=1;r<e.length;r++){if(t!==e[r].dims.length)throw new Error("Input shapes are mismatched.");for(var n=0;n<t;n++)if(e[0].dims[n]!==e[r].dims[n])throw new Error("Input shapes are not matched.");}if("float32"!==e[0].type&&"float64"!==e[0].type)throw new Error("Invalid input type.");for(var _t74=1;_t74<e.length;_t74++)if(e[0].type!==e[_t74].type)throw new Error("Input types are not matched.");};}),Yc,Yb,Xb,Xc=L(function(){yn(),ae(),Yc=function Yc(e,t){Xb(t);var r={name:"Tile",inputNames:["A"],inputTypes:[0]};return[e.run(_objectSpread(_objectSpread({},r),{},{get:function get(){return Yb(e,t,r);}}),t)];},Yb=function Yb(e,t,r){var n=t[0].dims.slice(),i=new Array(n.length),o=[];for(var _e120=0;_e120<n.length;_e120++)i[_e120]=n[_e120]*t[1].numberData[_e120],o.push("inputIdx[".concat(_e120,"] = int(mod(float(outputIdx[").concat(_e120,"]), ").concat(n[_e120],".));"));var a=i.length,s="\n      float process(int outputIdx[".concat(a,"]) {\n        int inputIdx[").concat(a,"];\n        ").concat(o.join("\n"),"\n        return _A(inputIdx);\n      }\n    ");return _objectSpread(_objectSpread({},r),{},{output:{dims:i,type:t[0].type,textureType:0},shaderSource:s});},Xb=function Xb(e){if(!e||2!==e.length)throw new Error("Tile requires 2 input.");if(1!==e[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(e[1].dims[0]!==e[0].dims.length)throw new Error("Invalid input shape.");if(-1===rr.indexOf(e[0].type))throw new Error("Invalid input type.");if("int32"!==e[1].type&&"int16"!==e[1].type)throw new Error("Invalid repeat type.");};}),Xi,Kc,Jc,Kb,Jb,Zc=L(function(){fe(),Xi=function Xi(e,t,r){Kb(t);var n=z.unsqueezeShape(t[0].dims,r);return[e.reshapeUnpacked(t[0],n)];},Kc=function Kc(e,t){return Jb(t),Xi(e,[t[0]],Array.from(t[1].integerData));},Jc=function Jc(e){return e.attributes.getInts("axes");},Kb=function Kb(e){if(!e||1!==e.length)throw new Error("Unsqueeze requires 1 input.");if("string"===e[0].type)throw new Error("invalid input tensor types.");},Jb=function Jb(e){if(!e||2!==e.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==e[1].type)throw new Error("Invalid input type.");};}),Qc,ep=L(function(){ll(),vl(),Il(),Ll(),fo(),mf(),wf(),Of(),Af(),Lf(),$f(),Rf(),zf(),co(),jf(),ic(),dc(),mc(),wc(),_c(),Ec(),Rc(),zc(),Hc(),qc(),Xc(),ho(),Fi(),Zc(),Vi(),Qc=[["Abs","","6+",Fl],["Acos","","7+",Cl],["Add","","7+",fl],["And","","7+",cl],["Asin","","7+",$l],["Atan","","7+",Bl],["AveragePool","","7+",Yf,Xf],["BatchNormalization","","7+",sl,ul],["Cast","","6+",_l,Ol],["Ceil","","6+",Rl],["Clip","","6-10",Di,kl],["Clip","","11+",Nl],["Concat","","4+",El,Dl],["Conv","","1+",Ri,Mi],["ConvTranspose","","1+",df,hf],["Cos","","7+",Ml],["Div","","7+",pl],["Dropout","","7+",Li],["DepthToSpace","","1+",Tf,xf],["Equal","","7+",dl],["Elu","","6+",Gl,Ul],["Exp","","6+",zl],["Flatten","","1+",vf,_f],["Floor","","6+",Wl],["FusedConv","com.microsoft","1+",Ri,Mi],["Gather","","1+",If,Sf],["Gemm","","7-10",Gi,Pf],["Gemm","","11+",Gi,Df],["GlobalAveragePool","","1+",Jf,Zf],["GlobalMaxPool","","1+",nc],["Greater","","7+",hl],["Identity","","1+",Li],["ImageScaler","","1+",Ff,Cf],["InstanceNormalization","","6+",kf,Nf],["LeakyRelu","","6+",Vl,Hl],["Less","","7+",ml],["LRN","","1+",Mf,Gf],["Log","","6+",jl],["MatMul","","1+",af,sf],["MaxPool","","1+",Qf,ec],["Mul","","7+",bl],["Neg","","6+",ql],["Not","","1+",Yl],["Or","","7+",gl],["Pad","","2-10",Ui,Wf],["Pad","","11+",Vf,Hf],["Pow","","7+",yl],["PRelu","","7+",Tl],["ReduceLogSum","","1+",cc,nr],["ReduceMax","","1+",uc,nr],["ReduceMean","","1+",sc,nr],["ReduceMin","","1+",lc,nr],["ReduceProd","","1+",fc,nr],["ReduceSum","","1-12",ac,nr],["ReduceSumSquare","","1+",pc,nr],["Relu","","6+",Xl],["Reshape","","5+",hc],["Resize","","10",ji,Tc],["Resize","","11+",ji,xc],["Shape","","1+",vc],["Sigmoid","","6+",Kl],["Sin","","7+",Jl],["Slice","","10+",Ac],["Slice","","1-9",Oc,Ic],["Softmax","","1-12",Fc,Cc],["Softmax","","13+",Bc,$c],["Split","","2-12",Gc,Uc],["Sqrt","","6+",Zl],["Squeeze","","1-12",Yi,Vc],["Squeeze","","13+",Wc],["Sub","","7+",xl],["Sum","","6+",jc],["Tan","","7+",Ql],["Tanh","","6+",ef],["Tile","","6+",Yc],["Transpose","","1+",Sr,gf],["Upsample","","7-8",zi,gc],["Upsample","","9",zi,yc],["Unsqueeze","","1-12",Xi,Jc],["Unsqueeze","","13+",Kc],["Xor","","7+",wl]];});function rp(e){var t,r={};for(;null!==(t=tp.exec(e));){var _e121=t[3].split(",").map(function(e){var t=e.trim().split(" ");return t&&2===t.length?{type:t[0],name:t[1]}:null;}).filter(function(e){return null!==e;});r[t[2]]={params:_e121,body:t[4]};}for(var n in r){var i=Zb.replace("__FUNC__",n),o=new RegExp(i,"gm");var _loop3=function _loop3(){var i=t[1],o=t[2],a=t[3].split(","),s=i?"".concat(i," ").concat(o,";"):"",u=r[n].body,l="";r[n].params.forEach(function(e,t){e&&(l+="".concat(e.type," ").concat(e.name," = ").concat(a[t],";\n"));}),u="".concat(l,"\n ").concat(u),u=u.replace("return","".concat(o," = "));var h="\n      ".concat(s,"\n      {\n        ").concat(u,"\n      }\n      ");e=e.replace(t[0],h);};for(;null!==(t=o.exec(e));){_loop3();}}return e=e.replace(tp,"");}var tp,Zb,np=L(function(){tp=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Zb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;";});function Yr(e,t){var r=[],n=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:Qb(t,e).sort(),a=0;for(var _t75=0;_t75<e.length;++_t75){if(null!=o){if(o[a]===_t75&&1!==e[_t75])throw new Error("Can't squeeze axis ".concat(_t75," since its dim '").concat(e[_t75],"' is not 1"));(null==o[a]||o[a]>_t75)&&1===e[_t75]&&(r.push(e[_t75]),n.push(_t75)),o[a]<=_t75&&a++;}1!==e[_t75]&&(r.push(e[_t75]),n.push(_t75));}return{newShape:r,keptDims:n};}function Qb(e,t){var r=t.length;return zr((e=null==e?t.map(function(e,t){return t;}):[].concat(e)).every(function(e){return e>=-r&&e<r;}),function(){return"All values in axis param must be in range [-".concat(r,", ").concat(r,") but got axis ").concat(e);}),zr(e.every(eg),function(){return"All values in axis param must be integers but got axis ".concat(e);}),e.map(function(e){return e<0?r+e:e;});}function eg(e){return e%1==0;}function tg(e){if(0===e.length)return 1;var t=e[0];for(var r=1;r<e.length;r++)t*=e[r];return t;}function op(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)];}var yo,Ki=L(function(){dt(),fe(),yo=/*#__PURE__*/function(){function yo(e){_classCallCheck(this,yo);this.maxTextureSize=e;}_createClass(yo,[{key:"computeTextureWH",value:function computeTextureWH(e,t){var r=this.computeTexture(e,t);return t&&t.isPacked&&(r[0]/=2,r[1]/=2),t&&t.reverseWH?[r[1],r[0]]:r;}},{key:"computeTexture",value:function computeTexture(e,t){var r=t&&t.isPacked;if(0===e.length)return r?[2,2]:[1,1];var n=this.maxTextureSize;if(t&&void 0!==t.breakAxis){var _r98=t.breakAxis>=e.length?1:e.slice(t.breakAxis).reduce(function(e,t){return e*t;}),_i16=t.breakAxis<=0?1:e.slice(0,t.breakAxis).reduce(function(e,t){return e*t;});if(!(_r98>n||_i16>n))return[_r98,_i16];pe.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(e,", breakAxis:").concat(t.breakAxis));}var i=e.slice(0);r&&(n*=2,i=i.map(function(e,t){return t>=i.length-2?i[t]%2==0?i[t]:i[t]+1:i[t];}),1===i.length&&(i=[2,i[0]])),2!==i.length&&(i=Yr(i).newShape);var o=tg(i);return i.length<=1&&o<=n?[1,o]:2===i.length&&i[0]<=n&&i[1]<=n?i:3===i.length&&i[0]*i[1]<=n&&i[2]<=n?[i[0]*i[1],i[2]]:3===i.length&&i[0]<=n&&i[1]*i[2]<=n?[i[0],i[1]*i[2]]:4===i.length&&i[0]*i[1]*i[2]<=n&&i[3]<=n?[i[0]*i[1]*i[2],i[3]]:4===i.length&&i[0]<=n&&i[1]*i[2]*i[3]<=n?[i[0],i[1]*i[2]*i[3]]:r?op(o/4).map(function(e){return 2*e;}):op(o);}}]);return yo;}();}),To,ip=L(function(){fe(),qt(),ve(),Ki(),Bt(),To=/*#__PURE__*/function(_gt){_inherits(To,_gt);function To(e){_classCallCheck(this,To);return _callSuper(this,To,[e]);}_createClass(To,[{key:"getFunctions",value:function getFunctions(){return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet());}},{key:"getCustomTypes",value:function getCustomTypes(){return{};}},{key:"offsetToCoords",value:function offsetToCoords(){return{offsetToCoords:new G("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")};}},{key:"coordsToOffset",value:function coordsToOffset(){return{coordsToOffset:new G("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")};}},{key:"getOutputSamplingSnippet",value:function getOutputSamplingSnippet(){var e=this.context.outputTextureLayout;return e.isPacked?this.getPackedOutputSamplingSnippet(e):this.getUnpackedOutputSamplingSnippet(e);}},{key:"getPackedOutputSamplingSnippet",value:function getPackedOutputSamplingSnippet(e){var t=e.unpackedShape,r=[e.width,e.height],n={},i="getOutputCoords";switch(t.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputPacked1DCoords(t,r);break;case 2:n[i]=this.getOutputPacked2DCoords(t,r);break;case 3:n[i]=this.getOutputPacked3DCoords(t,r);break;default:n[i]=this.getOutputPackedNDCoords(t,r);}var o="\n      void setOutput(vec4 val) {\n        ".concat(q(this.context.glContext.version).output," = val;\n      }\n    ");return n.floatTextureSetRGBA=new G(o),n;}},{key:"getUnpackedOutputSamplingSnippet",value:function getUnpackedOutputSamplingSnippet(e){var t=e.unpackedShape,r=[e.width,e.height],n={},i="getOutputCoords";switch(t.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputUnpacked1DCoords(t,r);break;case 2:n[i]=this.getOutputUnpacked2DCoords(t,r);break;case 3:n[i]=this.getOutputUnpacked3DCoords(t,r);break;case 4:n[i]=this.getOutputUnpacked4DCoords(t,r);break;case 5:n[i]=this.getOutputUnpacked5DCoords(t,r);break;case 6:n[i]=this.getOutputUnpacked6DCoords(t,r);break;default:throw new Error("Unsupported output dimensionality: ".concat(t.length));}var o="\n        void setOutput(float val) {\n          ".concat(q(this.context.glContext.version).output," = vec4(val, 0, 0, 0);\n        }\n    ");return n.floatTextureSetR=new G(o),n;}},{key:"getOutputScalarCoords",value:function getOutputScalarCoords(){return new G("\n      int getOutputCoords() {\n        return 0;\n      }\n    ");}},{key:"getOutputPacked1DCoords",value:function getOutputPacked1DCoords(e,t){var r=t,n="";return 1===r[0]?(n="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ".concat(r[1],".0);\n          }\n        "),new G(n)):1===r[1]?(n="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ".concat(r[0],".0);\n          }\n        "),new G(n)):(n="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(".concat(r[0],", ").concat(r[1],"));\n          return 2 * (resTexRC.y * ").concat(r[0]," + resTexRC.x);\n        }\n      "),new G(n));}},{key:"getOutputPacked2DCoords",value:function getOutputPacked2DCoords(e,t){var r="";if(Tr.arraysEqual(e,t))return r="\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(".concat(t[0],", ").concat(t[1],"));\n        }\n      "),new G(r);var n=t,i=Math.ceil(e[1]/2);return r="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(n[0],", ").concat(n[1],"));\n\n          int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(i,") * 2;\n          int c = 2 * (index / ").concat(i,");\n\n          return ivec2(r, c);\n        }\n      "),new G(r);}},{key:"getOutputPacked3DCoords",value:function getOutputPacked3DCoords(e,t){var r=[t[0],t[1]],n=Math.ceil(e[2]/2),i=n*Math.ceil(e[1]/2);return new G("\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(r[0],", ").concat(r[1],"));\n          int index = resTexRC.y * ").concat(r[0]," + resTexRC.x;\n\n          int b = index / ").concat(i,";\n          index -= b * ").concat(i,";\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(n,") * 2;\n          int c = 2 * (index / ").concat(n,");\n\n          return ivec3(b, r, c);\n        }\n      "));}},{key:"getOutputPackedNDCoords",value:function getOutputPackedNDCoords(e,t){var r=[t[0],t[1]],n=Math.ceil(e[e.length-1]/2),i=n*Math.ceil(e[e.length-2]/2),o=i,a="",s="b, r, c";for(var _t76=2;_t76<e.length-1;_t76++)o*=e[e.length-_t76-1],a="\n      int b".concat(_t76," = index / ").concat(o,";\n      index -= b").concat(_t76," * ").concat(o,";\n    ")+a,s="b".concat(_t76,", ")+s;var u="\n      ivec".concat(e.length," getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(").concat(r[0],", ").concat(r[1],"));\n        int index = resTexRC.y * ").concat(r[0]," + resTexRC.x;\n\n        ").concat(a,"\n\n        int b = index / ").concat(i,";\n        index -= b * ").concat(i,";\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ").concat(n,") * 2;\n        int c = 2 * (index / ").concat(n,");\n\n        return ivec").concat(e.length,"(").concat(s,");\n      }\n    ");return new G(u);}},{key:"getOutputUnpacked1DCoords",value:function getOutputUnpacked1DCoords(e,t){var r="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          return resTexRC.y * ").concat(t[0]," + resTexRC.x;\n        }\n      ");return new G(r);}},{key:"getOutputUnpacked2DCoords",value:function getOutputUnpacked2DCoords(e,t){var r="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          int r = index / ").concat(e[1],";\n          int c = index - r * ").concat(e[1],";\n          return ivec2(r, c);\n        }\n      ");return new G(r);}},{key:"getOutputUnpacked3DCoords",value:function getOutputUnpacked3DCoords(e,t){var r="",n=e.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=e[n-1];for(var _t77=n-3;_t77>=0;--_t77)i[_t77]=i[_t77+1]*e[_t77+1];var o=["r","c","d"],a=i.map(function(e,t){return"".concat("int ".concat(o[t]," = index / ").concat(e),"; ",t===i.length-1?"int ".concat(o[t+1]," = index - ").concat(o[t]," * ").concat(e):"index -= ".concat(o[t]," * ").concat(e),";");}).join("");return r="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          ").concat(a,"\n          return ivec3(r, c, d);\n        }\n      "),new G(r);}},{key:"getOutputUnpacked4DCoords",value:function getOutputUnpacked4DCoords(e,t){var r="",n=e.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=e[n-1];for(var _t78=n-3;_t78>=0;--_t78)i[_t78]=i[_t78+1]*e[_t78+1];var o=["r","c","d","d2"],a=i.map(function(e,t){return"".concat("int ".concat(o[t]," = index / ").concat(e),"; ",t===i.length-1?"int ".concat(o[t+1]," = index - ").concat(o[t]," * ").concat(e):"index -= ".concat(o[t]," * ").concat(e),";");}).join("");return r="\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          ").concat(a,"\n          return ivec4(r, c, d, d2);\n        }\n      "),new G(r);}},{key:"getOutputUnpacked5DCoords",value:function getOutputUnpacked5DCoords(e,t){var r="",n=e.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=e[n-1];for(var _t79=n-3;_t79>=0;--_t79)i[_t79]=i[_t79+1]*e[_t79+1];var o=["r","c","d","d2","d3"],a=i.map(function(e,t){return"".concat("int ".concat(o[t]," = index / ").concat(e),"; ",t===i.length-1?"int ".concat(o[t+1]," = index - ").concat(o[t]," * ").concat(e):"index -= ".concat(o[t]," * ").concat(e),";");}).join("");return r="\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(t[0],", ").concat(t[1],"));\n          int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n          ").concat(a,"\n          return ivec5(r, c, d, d2, d3);\n        }\n      "),new G(r);}},{key:"getOutputUnpacked6DCoords",value:function getOutputUnpacked6DCoords(e,t){var r="",n=e.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=e[n-1];for(var _t80=n-3;_t80>=0;--_t80)i[_t80]=i[_t80+1]*e[_t80+1];var o=["r","c","d","d2","d3","d4"],a=i.map(function(e,t){return"".concat("int ".concat(o[t]," = index / ").concat(e),"; ",t===i.length-1?"int ".concat(o[t+1]," = index - ").concat(o[t]," * ").concat(e):"index -= ".concat(o[t]," * ").concat(e),";");}).join("");return r="\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n         int index = resTexRC.y * ").concat(t[0]," + resTexRC.x;\n         ").concat(a,"\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     "),new G(r);}},{key:"getCommonUtilFuncs",value:function getCommonUtilFuncs(){var e={},t="uvFromFlat";e[t]=new G("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),t="packedUVfrom1D",e[t]=new G("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="packedUVfrom2D",e[t]=new G("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="packedUVfrom3D",e[t]=new G("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t="sampleTexture";var r=q(this.context.glContext.version);return e[t]=new G("\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ".concat(r.texture2D,"(textureSampler, uv).r;\n        }")),e;}},{key:"getInputsSamplingSnippets",value:function getInputsSamplingSnippets(){var _this6=this;var e={},t=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach(function(r,n){var i=_this6.context.inputTextureLayouts[n],o=no(r);i.isPacked?e[o]=_this6.getPackedSamplerFromInput(o,r,i):e[o]=_this6.getUnpackedSamplerFromInput(o,r,i);var a=Hu(r);i.unpackedShape.length<=t.unpackedShape.length&&(i.isPacked?e[a]=_this6.getPackedSamplerAtOutputCoords(a,i,t,r):e[a]=_this6.getUnpackedSamplerAtOutputCoords(a,i,t,r));}),e;}},{key:"getPackedSamplerAtOutputCoords",value:function getPackedSamplerAtOutputCoords(e,t,r,n){var i,o=t.unpackedShape,a=r.unpackedShape,s=no(n),u=o.length,l=a.length,h=Ke.getBroadcastDims(o,a),c=Je(l),d=l-u,f=Dt();i=0===u?"":l<2&&h.length>=1?"coords = 0;":h.map(function(e){return"coords.".concat(f[e+d]," = 0;");}).join("\n");var p="";p=l<2&&u>0?"coords":o.map(function(e,t){return"coords.".concat(f[t+d]);}).join(", ");var y="return outputValue;",g=1===z.size(o),m=1===z.size(a);if(1!==u||g||m){if(g&&!m)y=1===l?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(h.length){var _e122=u-2,_t81=u-1;h.indexOf(_e122)>-1&&h.indexOf(_t81)>-1?y="return vec4(outputValue.x);":h.indexOf(_e122)>-1?y="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":h.indexOf(_t81)>-1&&(y="return vec4(outputValue.xx, outputValue.zz);");}}else y="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";var w="\n        int lastDim = coords.".concat(f[l-1],";\n        coords.").concat(f[l-1]," = coords.").concat(f[l-2],";\n        coords.").concat(f[l-2]," = lastDim;\n      ");return new G("\n      vec4 ".concat(e,"() {\n        ").concat(c," coords = getOutputCoords();\n        ").concat(w,"\n        ").concat(i,"\n        vec4 outputValue = ").concat(s,"(").concat(p,");\n        ").concat(y,"\n      }\n    "),["coordinates.getOutputCoords"]);}},{key:"getUnpackedSamplerAtOutputCoords",value:function getUnpackedSamplerAtOutputCoords(e,t,r,n){var i=[r.width,r.height],o=[t.width,t.height],a=t.unpackedShape.length,s=r.unpackedShape.length,u=t.unpackedShape,l=r.unpackedShape,h=no(n);if(a===s&&Tr.arraysEqual(o,i)){return new G("\n          float ".concat(e,"() {\n            return sampleTexture(").concat(n,", TexCoords);\n          }\n        "),["coordinates.sampleTexture"]);}var c,d=Je(s),f=Ke.getBroadcastDims(u,l),p=s-a,y=Dt();c=0===a?"":s<2&&f.length>=1?"coords = 0;":f.map(function(e){return"coords.".concat(y[e+p]," = 0;");}).join("\n");var g="";return g=s<2&&a>0?"coords":t.unpackedShape.map(function(e,t){return"coords.".concat(y[t+p]);}).join(", "),new G("\n        float ".concat(e,"() {\n          ").concat(d," coords = getOutputCoords();\n          ").concat(c,"\n          return ").concat(h,"(").concat(g,");\n        }\n      "),["coordinates.getOutputCoords"]);}},{key:"getPackedSamplerFromInput",value:function getPackedSamplerFromInput(e,t,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e,t);case 1:return this.getPackedSampler1D(e,t,r);case 2:return this.getPackedSampler2D(e,t,r);case 3:return this.getPackedSampler3D(e,t,r);default:return this.getPackedSamplerND(e,t,r);}}},{key:"getUnpackedSamplerFromInput",value:function getUnpackedSamplerFromInput(e,t,r){var n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(e,t,r);case 1:return this.getUnpackedSampler1D(e,t,r);case 2:return this.getUnpackedSampler2D(e,t,r);case 3:return this.getUnpackedSampler3D(e,t,r);case 4:return this.getUnpackedSampler4D(e,t,r);case 5:return this.getUnpackedSampler5D(e,t,r);case 6:return this.getUnpackedSampler6D(e,t,r);default:throw new Error("Unsupported dimension ".concat(n.length,"-D"));}}},{key:"getPackedSamplerScalar",value:function getPackedSamplerScalar(e,t){var r="\n          vec4 ".concat(e,"() {\n            return ").concat(q(this.context.glContext.version).texture2D,"(").concat(t,", halfCR);\n          }\n        ");return new G(r);}},{key:"getPackedSampler1D",value:function getPackedSampler1D(e,t,r){var n=[r.width,r.height],i=[n[1],n[0]],o=q(this.context.glContext.version),a="vec4 ".concat(e,"(int index) {\n      vec2 uv = packedUVfrom1D(\n      ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(t,", uv);\n    }");return new G(a,["coordinates.packedUVfrom1D"]);}},{key:"getPackedSampler2D",value:function getPackedSampler2D(e,t,r){var n=r.unpackedShape,i=[r.width,r.height],o=q(this.context.glContext.version),a=i[0],s=i[1];if(null!=i&&Tr.arraysEqual(n,i)){var _r99="vec4 ".concat(e,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(a,".0);\n        return ").concat(o.texture2D,"(").concat(t,", uv);\n      }");return new G(_r99);}var u=i,l=Math.ceil(n[1]/2),h="vec4 ".concat(e,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u[1],", ").concat(u[0],", ").concat(l,", row, col);\n      return ").concat(o.texture2D,"(").concat(t,", uv);\n    }");return new G(h,["coordinates.packedUVfrom2D"]);}},{key:"getPackedSampler3D",value:function getPackedSampler3D(e,t,r){var n=r.unpackedShape,i=[r.width,r.height],o=[i[0],i[1]],a=q(this.context.glContext.version);if(1===n[0]){var _i17=n.slice(1),_o12=[1,2],_a12=Wr(n,_i17),_s5=["b","row","col"],_u7=JSON.parse(JSON.stringify(r));_u7.unpackedShape=_a12;var _l5=this.getPackedSamplerFromInput(e,t,_u7),_h3="".concat(_l5.routineBody,"\n      vec4 ").concat(e,"(int b, int row, int col) {\n        return ").concat(e,"(").concat(Vr(_s5,_o12),");\n      } ");return new G(_h3,_l5.dependencies);}var s=o[0],u=o[1],l=Math.ceil(n[2]/2),h="vec4 ".concat(e,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(s,", ").concat(l*Math.ceil(n[1]/2),", ").concat(l,", b, row, col);\n      return ").concat(a.texture2D,"(").concat(t,", uv);}");return new G(h,["coordinates.packedUVfrom3D"]);}},{key:"getPackedSamplerND",value:function getPackedSamplerND(e,t,r){var n=r.unpackedShape,i=n.length,o=[r.width,r.height],a=q(this.context.glContext.version),s=[o[0],o[1]],u=s[1],l=s[0],h=Math.ceil(n[i-1]/2),c=h*Math.ceil(n[i-2]/2),d="int b, int row, int col",f="b * ".concat(c," + (row / 2) * ").concat(h," + (col / 2)");for(var _e123=2;_e123<i-1;_e123++)d="int b".concat(_e123,", ")+d,c*=n[i-_e123-1],f="b".concat(_e123," * ").concat(c," + ")+f;var p="vec4 ".concat(e,"(").concat(d,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(u,");\n      return ").concat(a.texture2D,"(").concat(t,", uv);\n    }");return new G(p);}},{key:"getUnpackedSamplerScalar",value:function getUnpackedSamplerScalar(e,t,r){var _ref8=[r.width,r.height],n=_ref8[0],i=_ref8[1];if(1===n&&1===i){return new G("\n          float ".concat(e,"() {\n            return sampleTexture(").concat(t,", halfCR);\n          }\n        "),["coordinates.sampleTexture"]);}return new G("\n        float ".concat(e,"() {\n          int offset_").concat(t," = coordsToOffset(TexCoords, ").concat(n,", ").concat(i,");\n          vec2 uv = uvFromFlat(").concat(n,", ").concat(i,", offset_").concat(t,");\n          return sampleTexture(").concat(t,", uv);\n        }\n      "),["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"]);}},{key:"getUnpackedSampler1D",value:function getUnpackedSampler1D(e,t,r){var n=r.width,i=r.height;if(1===i&&1===n){return new G("\n        float ".concat(e,"(int index) {\n          return sampleTexture(").concat(t,", halfCR);\n        }\n      "),["coordinates.sampleTexture"]);}if(1===i){return new G("\n          float ".concat(e,"(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ").concat(n,".0, 0.5);\n            return sampleTexture(").concat(t,", uv);\n          }\n        "),["coordinates.sampleTexture"]);}if(1===n){return new G("\n          float ".concat(e,"(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ").concat(i,".0);\n            return sampleTexture(").concat(t,", uv);\n          }\n        "),["coordinates.sampleTexture"]);}return new G("\n        float ".concat(e,"(int index) {\n          vec2 uv = uvFromFlat(").concat(n,", ").concat(i,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      "),["coordinates.uvFromFlat","coordinates.sampleTexture"]);}},{key:"getUnpackedSampler2D",value:function getUnpackedSampler2D(e,t,r){var n=r.unpackedShape,i=[r.height,r.width];if(null!=i&&Tr.arraysEqual(n,i)){return new G("\n          float ".concat(e,"(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(").concat(i[1],".0, ").concat(i[0],".0);\n            return sampleTexture(").concat(t,", uv);\n          }\n        "),["coordinates.sampleTexture"]);}var _Yr=Yr(n),o=_Yr.newShape,a=_Yr.keptDims,s=o;if(s.length<n.length){var _i18=Wr(n,s),_o13=JSON.parse(JSON.stringify(r));_o13.unpackedShape=_i18;var _u8=["col","row"],_l6="\n          ".concat(this.getUnpackedSamplerFromInput(e,t,_o13).routineBody,"\n          float ").concat(e,"(int row, int col) {\n            return ").concat(e,"(").concat(Vr(_u8,a),");\n          }\n        ");return new G(_l6,["coordinates.sampleTexture"]);}var u=i[1],l=i[0];if(1===l){var _r100="\n          float ".concat(e,"(int row, int col) {\n            int offset_").concat(t," = coordsToOffset(TexCoords, ").concat(u,", ").concat(l,");\n            float index = dot(vec3(row, col, offset_").concat(t,"), vec3(").concat(n[1],", 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ").concat(u,".0);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new G(_r100,["coordinates.sampleTexture","coordinates.coordsToOffset"]);}if(1===u){var _r101="\n          float ".concat(e,"(int row, int col) {\n            int offset_").concat(t," = coordsToOffset(TexCoords, ").concat(u,", ").concat(l,");\n            float index = dot(vec3(row, col, offset_").concat(t,"), vec3(").concat(n[1],", 1, 1));\n            vec2 uv = vec2((index + 0.5) / ").concat(l,".0, 0.5);\n            return sampleTexture(").concat(t,", uv);\n          }\n        ");return new G(_r101,["coordinates.sampleTexture","coordinates.coordsToOffset"]);}var h="\n        float ".concat(e,"(int row, int col) {\n          int index = col * ").concat(n[1]," + row;\n          vec2 uv = uvFromFlat(").concat(u,", ").concat(l,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      ");return new G(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"]);}},{key:"getUnpackedSampler3D",value:function getUnpackedSampler3D(e,t,r){var n=r.unpackedShape,i=n[1]*n[2],o=n[2],_Yr2=Yr(n),a=_Yr2.newShape,s=_Yr2.keptDims,u=a;if(u.length<n.length){var _i19=Wr(n,u),_o14=["batch","col","row"],_a13=JSON.parse(JSON.stringify(r));_a13.unpackedShape=_i19;var _l7=this.getUnpackedSamplerFromInput(e,t,_a13),_h4=s.reverse(),c="\n          ".concat(_l7.routineBody,"\n          float ").concat(e,"(int batch, int row, int col) {\n            return ").concat(e,"(").concat(Vr(_o14,_h4),");\n          }\n        ");return new G(c,_l7.dependencies);}var l=r.width,h=r.height;return new G("\n          float ".concat(e,"(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ").concat(i," + col * ").concat(o," + row;\n            vec2 uv = uvFromFlat(").concat(l,", ").concat(h,", index);\n            return sampleTexture(").concat(t,", uv);\n          }\n      "),["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"]);}},{key:"getUnpackedSampler4D",value:function getUnpackedSampler4D(e,t,r){var n=r.unpackedShape,i=n[3],o=n[2]*i,a=n[1]*o,s=r.width,u=r.height;return new G("\n        float ".concat(e,"(int row, int col, int depth, int depth2) {\n          int index = row * ").concat(a," + col * ").concat(o," +\n              depth2 * ").concat(i," + depth;\n          vec2 uv = uvFromFlat(").concat(s,", ").concat(u,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      "),["coordinates.uvFromFlat","coordinates.sampleTexture"]);}},{key:"getUnpackedSampler5D",value:function getUnpackedSampler5D(e,t,r){var n=r.unpackedShape,i=n[4],o=n[3]*i,a=n[2]*o,s=n[1]*a,_Yr3=Yr(n),u=_Yr3.newShape,l=_Yr3.keptDims;if(u.length<n.length){var _i20=Wr(n,u),_o15=["row","col","depth","depth2","depth3"],_a14=JSON.parse(JSON.stringify(r));_a14.unpackedShape=_i20;var _s6="\n          ".concat(this.getUnpackedSamplerFromInput(e,t,_a14).routineBody,"\n          float ").concat(e,"(int row, int col, int depth, int depth2, int depth3) {\n            return ").concat(e,"(").concat(Vr(_o15,l),");\n          }\n        ");return new G(_s6,["coordinates.sampleTexture","coordinates.uvFromFlat"]);}var h=r.width,c=r.height;return new G("\n        float ".concat(e,"(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ").concat(s," + col * ").concat(a," + depth * ").concat(o," +\n          depth3 * ").concat(i," + depth2;\n          vec2 uv = uvFromFlat(").concat(h,", ").concat(c,", index);\n          return sampleTexture(").concat(t,", uv);\n        }\n      "),["coordinates.sampleTexture","coordinates.uvFromFlat"]);}},{key:"getUnpackedSampler6D",value:function getUnpackedSampler6D(e,t,r){var n=r.unpackedShape,i=n[5],o=n[4]*i,a=n[3]*o,s=n[2]*a,u=n[1]*s,_Yr4=Yr(n),l=_Yr4.newShape,h=_Yr4.keptDims;if(l.length<n.length){var _i21=Wr(n,l),_o16=["row","col","depth","depth2","depth3","depth4"],_a15=JSON.parse(JSON.stringify(r));_a15.unpackedShape=_i21;var _s7="\n            ".concat(this.getUnpackedSamplerFromInput(e,t,_a15).routineBody,"\n            float ").concat(e,"(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ").concat(e,"(").concat(Vr(_o16,h),");\n            }\n          ");return new G(_s7,["coordinates.sampleTexture","coordinates.uvFromFlat"]);}var c=r.width,d=r.height;return new G("\n          float ".concat(e,"(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ").concat(u," + col * ").concat(s," + depth * ").concat(a," +\n            depth2 * ").concat(o," + depth3 * ").concat(i," + depth4;\n            vec2 uv = uvFromFlat(").concat(c,", ").concat(d,", index);\n            return sampleTexture(").concat(t,", uv);\n          }\n        "),["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"]);}},{key:"toVec",value:function toVec(){var e=this.context.outputTextureLayout,t=e.shape.length,r=e.strides,n=e.width,i=e.height,o=[];for(var _e124=0;_e124<t-1;++_e124)o.push("\n        c[".concat(_e124,"] = offset / ").concat(r[_e124],";")),o.push("\n        offset -= c[".concat(_e124,"] * ").concat(r[_e124],";"));o.push("\n        c[".concat(t-1,"] = offset;"));var a="\n      void toVec(vec2 texCoords, out int c[".concat(t,"]) {\n        int offset = coordsToOffset(texCoords, ").concat(n,", ").concat(i,");\n        ").concat(o.join(""),"\n      }\n      void toVec(int offset, out int c[").concat(t,"]) {\n        ").concat(o.join(""),"\n      }\n    ");return{toVec:new G(a,["coordinates.coordsToOffset"])};}},{key:"valueFrom",value:function valueFrom(){var _this7=this;var e={};return this.context.programInfo.inputNames.forEach(function(t,r){var n=_this7.context.inputTextureLayouts[r],i=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,o="_".concat(t);e[o]=new G(_this7.getValueFromSingle(t,i,n.width,n.height,!1),["shapeUtils.indicesToOffset".concat(o),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),o+="_T",e[o]=new G(_this7.getValueFromSingle(t,i,n.width,n.height,!0),["shapeUtils.indicesToOffset".concat(o),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]);}),e;}},{key:"getValueFromSingle",value:function getValueFromSingle(e,t,r,n,i){var o="_".concat(e);return i&&(o+="_T"),"\n        float ".concat(o,"(int m[").concat(t,"]) {\n          int offset = indicesToOffset").concat(o,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(n,");\n          float value = getColorAsFloat(").concat(q(this.context.glContext.version).texture2D,"(").concat(e,", coords));\n          return value;\n        }\n        ");}},{key:"getPackedValueFrom",value:function getPackedValueFrom(e,t,r,n,i){var o="_".concat(e,"_Pack");return i&&(o+="_T"),"\n        vec4 ".concat(o,"(int m[").concat(t,"]) {\n          int offset = indicesToOffset_").concat(e,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(n,");\n          return ").concat(q(this.context.glContext.version).texture2D,"(").concat(e,", coords);\n        }\n        ");}}]);return To;}(gt);}),xo,ap=L(function(){qt(),xo=/*#__PURE__*/function(_gt2){_inherits(e,_gt2);function e(_e125){_classCallCheck(this,e);return _callSuper(this,e,[_e125]);}_createClass(e,[{key:"getFunctions",value:function getFunctions(){return _objectSpread(_objectSpread({},this.encodeFloat32()),this.decodeFloat32());}},{key:"getCustomTypes",value:function getCustomTypes(){return{};}},{key:"encodeFloat32",value:function encodeFloat32(){return{encode:new G("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")};}},{key:"decodeFloat32",value:function decodeFloat32(){return{decode:new G("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")};}},{key:"encodeUint8",value:function encodeUint8(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new G("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ".concat(t,"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        "))};}},{key:"decodeUint8",value:function decodeUint8(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new G("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ".concat(t,"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        "))};}}],[{key:"isLittleEndian",value:function isLittleEndian(){var _e126=new ArrayBuffer(4),t=new Uint32Array(_e126),r=new Uint8Array(_e126);if(t[0]=3735928559,239===r[0])return!0;if(222===r[0])return!1;throw new Error("unknown endianness");}}]);return e;}(gt);}),wo,sp=L(function(){qt(),ve(),wo=/*#__PURE__*/function(_gt3){_inherits(wo,_gt3);function wo(e){_classCallCheck(this,wo);return _callSuper(this,wo,[e]);}_createClass(wo,[{key:"getFunctions",value:function getFunctions(){return _objectSpread(_objectSpread({},this.setFragColor()),this.getColorAsFloat());}},{key:"getCustomTypes",value:function getCustomTypes(){return{};}},{key:"setFragColor",value:function setFragColor(){var e=q(this.context.glContext.version);return{setFragColor:new G("\n        void setFragColor(float value) {\n            ".concat(e.output," = encode(value);\n        }\n        "),["encoding.encode"])};}},{key:"getColorAsFloat",value:function getColorAsFloat(){return{getColorAsFloat:new G("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])};}}]);return wo;}(gt);}),vo,up=L(function(){qt(),vo=/*#__PURE__*/function(_gt4){_inherits(e,_gt4);function e(_e127){_classCallCheck(this,e);return _callSuper(this,e,[_e127]);}_createClass(e,[{key:"getFunctions",value:function getFunctions(){return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices());}},{key:"getCustomTypes",value:function getCustomTypes(){return{};}},{key:"bcastIndex",value:function bcastIndex(){var _this8=this;var _e128=this.context.outputTextureLayout.shape.length,t={};return this.context.programInfo.inputNames.forEach(function(r,n){var i=_this8.context.inputTextureLayouts[n].unpackedShape;if(i.length<=_e128){var _n18=i.length,o=_e128-_n18,_a16="bcastIndices_".concat(r),s="";for(var _e138=0;_e138<_n18;++_e138)s+="\n          realIndices[".concat(_e138,"] = int( mod(float(bcastedIndices[").concat(o+_e138,"]), ").concat(i[_e138],".0) );\n          ");var u="\n        void ".concat(_a16," (int bcastedIndices[").concat(_e128,"], out int realIndices[").concat(_n18,"]) {\n          ").concat(s,"\n        }\n        ");t[_a16]=new G(u);}}),t;}},{key:"bcastMatmulIndex",value:function bcastMatmulIndex(){var _this9=this;var _e130=this.context.outputTextureLayout.shape.length,t={};return this.context.programInfo.inputNames.forEach(function(r,n){var i=_this9.context.inputTextureLayouts[n].shape;if(!(i.length<2||i.length>_e130)){var _n19=i.length,o=_e130-_n19,_a17="bcastMatmulIndices_".concat(r),s="";for(var _e139=0;_e139<_n19-2;++_e139)s+="\n          realIndices[".concat(_e139,"] = int( mod(float(bcastedIndices[").concat(o+_e139,"]), ").concat(i[_e139],".0) );\n          ");var u="\n        void ".concat(_a17,"(int bcastedIndices[").concat(_e130,"], out int realIndices[").concat(_n19,"]) {\n          ").concat(s,"\n          realIndices[").concat(_n19-1,"] = bcastedIndices[").concat(_e130-1,"];\n          realIndices[").concat(_n19-2,"] = bcastedIndices[").concat(_e130-2,"];\n        }\n        ");t[_a17]=new G(u);}}),t;}},{key:"indicesToOffset",value:function indicesToOffset(){var _this10=this;var t={};return this.context.programInfo.inputNames.forEach(function(r,n){var i=_this10.context.inputTextureLayouts[n].shape,o=_this10.context.inputTextureLayouts[n].strides,a=i.length,s="indicesToOffset_".concat(r);t[s]=new G(e.indexToOffsetSingle(s,a,o)),s="indicesToOffset_".concat(r,"_T"),t[s]=new G(e.indexToOffsetSingle(s,a,o.slice().reverse()));}),t;}},{key:"offsetToIndices",value:function offsetToIndices(){var _this11=this;var t={};return this.context.programInfo.inputNames.forEach(function(r,n){var i=_this11.context.inputTextureLayouts[n].shape,o=_this11.context.inputTextureLayouts[n].strides,a=i.length,s="offsetToIndices_".concat(r);t[s]=new G(e.offsetToIndicesSingle(s,a,o)),s="offsetToIndices_".concat(r,"_T"),t[s]=new G(e.offsetToIndicesSingle(s,a,o.slice().reverse()));}),t;}},{key:"incrementIndices",value:function incrementIndices(){var _this12=this;var _e136={};return this.context.programInfo.inputNames.forEach(function(t,r){var n=_this12.context.inputTextureLayouts[r].shape,i=n.length,o="incrementIndices_".concat(t),a="";for(var _e140=0;_e140<i;++_e140)a+="\n        shape[".concat(_e140,"] = ").concat(n[_e140],";");var s="\n        void ".concat(o,"(int axis, out int indices[").concat(i,"]) {\n          int shape[").concat(i,"];\n          ").concat(a,";\n          for(int i = ").concat(i," -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ");_e136[o]=new G(s);}),_e136;}}],[{key:"indexToOffsetSingle",value:function indexToOffsetSingle(_e132,t,r){var n="";for(var _e141=t-1;_e141>=0;--_e141)n+="\n        offset += indices[".concat(_e141,"] * ").concat(r[_e141],";\n        ");return"\n      int ".concat(_e132,"(int indices[").concat(t,"]) {\n        int offset = 0;\n        ").concat(n,"\n        return offset;\n      }\n      ");}},{key:"offsetToIndicesSingle",value:function offsetToIndicesSingle(_e134,t,r){var n=[];for(var _e142=0;_e142<t-1;++_e142)n.push("\n      indices[".concat(_e142,"] = offset / ").concat(r[_e142],";")),n.push("\n        offset -= indices[".concat(_e142,"] * ").concat(r[_e142],";"));return n.push("\n      indices[".concat(t-1,"] = offset;")),"\n      void ".concat(_e134,"(int offset, out int indices[").concat(t,"]) {\n        ").concat(n.join(""),"\n      }\n      ");}}]);return e;}(gt);}),_o,lp=L(function(){qt(),_o=/*#__PURE__*/function(_gt5){_inherits(_o,_gt5);function _o(e){_classCallCheck(this,_o);return _callSuper(this,_o,[e]);}_createClass(_o,[{key:"getCustomTypes",value:function getCustomTypes(){return{};}},{key:"getFunctions",value:function getFunctions(){return _objectSpread(_objectSpread(_objectSpread(_objectSpread({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem());}},{key:"binaryVecFunctions",value:function binaryVecFunctions(){var e=this.context.outputTextureLayout.shape.length,t={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(var n in t){var i="".concat(n,"Vec"),o="";for(var _r102=0;_r102<e;++_r102)o+="\n          dest[".concat(_r102,"] ").concat(t[n]," src[").concat(_r102,"];\n          ");var _a18="\n        void ".concat(i,"(int src[").concat(e,"], out int dest[").concat(e,"]) {\n          ").concat(o,"\n        }\n        ");r[i]=new G(_a18);}return r;}},{key:"copyVec",value:function copyVec(){var e=this.context.outputTextureLayout.shape.length,t="";for(var r=0;r<e;++r)t+="\n        dest[".concat(r,"] = src[").concat(r,"];\n        ");return{copyVec:new G("\n      void copyVec(int src[".concat(e,"], out int dest[").concat(e,"]) {\n        ").concat(t,"\n      }\n      "))};}},{key:"setVecItem",value:function setVecItem(){var e=this.context.outputTextureLayout.shape.length,t="\n        if(index < 0)\n            index =".concat(e," + index;\n        if (index == 0)\n            m[0] = value;\n        ");for(var r=1;r<e-1;++r)t+="\n        else if (index == ".concat(r,")\n            m[").concat(r,"] = value;\n            ");return t+="\n        else\n            m[".concat(e-1,"] = value;\n        "),{setVecItem:new G("\n      void setVecItem(out int m[".concat(e,"], int index, int value) {\n        ").concat(t,"\n      }\n        "))};}},{key:"getVecItem",value:function getVecItem(){var e=this.context.outputTextureLayout.shape.length,t="\n        if(index < 0)\n            index = ".concat(e," + index;\n        if (index == 0)\n            return m[0];\n      ");for(var r=1;r<e-1;++r)t+="\n        else if (index == ".concat(r,")\n            return m[").concat(r,"];\n      ");return t+="\n        else\n            return m[".concat(e-1,"];\n        "),{getVecItem:new G("\n      int getVecItem(int m[".concat(e,"], int index) {\n        ").concat(t,"\n      }\n    "))};}}]);return _o;}(gt);}),Ji,fp=L(function(){ip(),ap(),sp(),up(),lp(),Ji={encoding:xo,fragcolor:wo,vec:_o,shapeUtils:vo,coordinates:To};}),Oo,cp=L(function(){qt(),np(),fp(),ve(),Oo=/*#__PURE__*/function(){function Oo(e,t,r,n){var _this13=this;_classCallCheck(this,Oo);this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new so(e,t,r,n),Object.keys(Ji).forEach(function(e){var t=new Ji[e](_this13.context);_this13.libs[e]=t;});var i=this.glslLibRoutineDependencyGraph;for(var _e143 in this.libs){var _t82=this.libs[_e143].getFunctions();for(var _r103 in _t82){var _n20=void 0,o=_e143+"."+_r103;i[o]?(_n20=i[o],_n20.routineBody=_t82[_r103].routineBody):(_n20=new gn(o,_t82[_r103].routineBody),i[o]=_n20);var _a19=_t82[_r103].dependencies;if(_a19)for(var _e144=0;_e144<_a19.length;++_e144)if(i[_a19[_e144]])_n20.addDependency(i[_a19[_e144]]);else{var _t83=new gn(_a19[_e144]);i[_a19[_e144]]=_t83,_n20.addDependency(_t83);}}}}_createClass(Oo,[{key:"preprocess",value:function preprocess(){var e=this.context.programInfo,t=e.shaderSource;return this.context.programInfo.hasMain||(t="".concat(t,"\n      ").concat(Vu(this.context.glContext.version,this.context.outputTextureLayout.shape.length))),t=rp(t),"".concat(Wu(this.context.glContext.version),"\n    ").concat(this.getUniforms(e.inputNames,e.variables),"\n    ").concat(this.getImports(t),"\n    ").concat(t);}},{key:"getImports",value:function getImports(e){var t=this.selectGlslLibRoutinesToBeIncluded(e);if(0===t.length)return"";var r="";for(var _e145=0;_e145<t.length;++_e145){if(!t[_e145].routineBody)throw new Error("Missing body for the Glsl Library routine: ".concat(t[_e145].name));r+=t[_e145].routineBody+"\n";}return r;}},{key:"selectGlslLibRoutinesToBeIncluded",value:function selectGlslLibRoutinesToBeIncluded(e){var _this14=this;var t=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(function(r){var n=r.split(".")[1];-1!==e.indexOf(n)&&t.push(_this14.glslLibRoutineDependencyGraph[r]);}),uo.returnOrderedNodes(t);}},{key:"getUniforms",value:function getUniforms(e,t){var r=[];if(e){var _iterator19=_createForOfIteratorHelper(e),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var _t84=_step19.value;r.push("uniform sampler2D ".concat(_t84,";"));}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}if(t){var _iterator20=_createForOfIteratorHelper(t),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var _e146=_step20.value;r.push("uniform ".concat(_e146.type," ").concat(_e146.name).concat(_e146.arrayLength?"[".concat(_e146.arrayLength,"]"):"",";"));}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}return r.join("\n");}}]);return Oo;}();}),Io,pp=L(function(){It(),dt(),cp(),ve(),Io=/*#__PURE__*/function(){function Io(e,t,r){_classCallCheck(this,Io);this.profiler=e,this.glContext=t,this.textureLayoutStrategy=r,this.repo=new Map(),this.attributesBound=!1;}_createClass(Io,[{key:"getArtifact",value:function getArtifact(e){return this.repo.get(e);}},{key:"setArtifact",value:function setArtifact(e,t){this.repo.set(e,t);}},{key:"run",value:function run(e,t,r){var _e$programInfo$name,_this15=this;this.profiler.event("op","ProgramManager.run ".concat((_e$programInfo$name=e.programInfo.name)!==null&&_e$programInfo$name!==void 0?_e$programInfo$name:"unknown kernel"),function(){var n=_this15.glContext.gl,i=e.program;n.useProgram(i);try{var _e$programInfo$variab;_this15.bindOutput(r),_this15.attributesBound||_this15.bindAttributes(e.attribLocations),_this15.bindUniforms(e.uniformLocations,(_e$programInfo$variab=e.programInfo.variables)!==null&&_e$programInfo$variab!==void 0?_e$programInfo$variab:[],t);}catch(t){throw pe.error("ProgramManager",e.programInfo.shaderSource),t;}_this15.profiler.event("backend","GlContext.draw()",function(){_this15.glContext.draw();});},this.glContext);}},{key:"dispose",value:function dispose(){var _this16=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(function(e){return _this16.glContext.deleteProgram(e.program);});}},{key:"build",value:function build(e,t,r){var _this17=this;return this.profiler.event("backend","ProgramManager.build",function(){var n=new Oo(_this17.glContext,e,t,r),i=n.preprocess(),o=_this17.compile(i);return{programInfo:e,program:o,uniformLocations:_this17.getUniformLocations(o,n.context.programInfo.inputNames,n.context.programInfo.variables),attribLocations:_this17.getAttribLocations(o)};});}},{key:"compile",value:function compile(e){if(!this.vertexShader){pe.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var _e147=zu(this.glContext.version);this.vertexShader=this.glContext.compileShader(_e147,this.glContext.gl.VERTEX_SHADER);}ee.debug&&pe.verbose("ProrgramManager","FragShader:\n".concat(e,"\n"));var t=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,t);return this.glContext.deleteShader(t),r;}},{key:"bindOutput",value:function bindOutput(e){var t=e.width,r=e.height;pe.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h=".concat(t,"/").concat(r,", shape=").concat(e.shape,", type=").concat(e.tensor.type)),this.glContext.attachFramebuffer(e.texture,t,r);}},{key:"bindAttributes",value:function bindAttributes(e){var t=e.position,r=e.textureCoord;this.glContext.setVertexAttributes(t,r),this.attributesBound=!0;}},{key:"bindUniforms",value:function bindUniforms(e,t,r){var _this18=this;var n=this.glContext.gl,i=0;var _iterator21=_createForOfIteratorHelper(e),_step21;try{var _loop4=function _loop4(){var _t$find;var _step21$value=_step21.value,o=_step21$value.name,a=_step21$value.type,s=_step21$value.location,u=_step21$value.arrayLength;var e=(_t$find=t.find(function(e){return e.name===o;}))===null||_t$find===void 0?void 0:_t$find.data;if("sampler2D"!==a&&!e)throw new Error("variable '".concat(o,"' does not have data defined in program info"));switch(a){case"sampler2D":_this18.bindTexture(r[i],s,i),i++;break;case"float":u?n.uniform1fv(s,e):n.uniform1f(s,e);break;case"int":u?n.uniform1iv(s,e):n.uniform1i(s,e);break;default:throw new Error("Uniform not implemented: ".concat(a));}};for(_iterator21.s();!(_step21=_iterator21.n()).done;){_loop4();}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}}},{key:"bindTexture",value:function bindTexture(e,t,r){this.glContext.bindTextureToUniform(e.texture,r,t);}},{key:"getAttribLocations",value:function getAttribLocations(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")};}},{key:"getUniformLocations",value:function getUniformLocations(e,t,r){var n=[];if(t){var _iterator22=_createForOfIteratorHelper(t),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _r104=_step22.value;n.push({name:_r104,type:"sampler2D",location:this.getUniformLocation(e,_r104)});}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}}if(r){var _iterator23=_createForOfIteratorHelper(r),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var _t85=_step23.value;n.push(_objectSpread(_objectSpread({},_t85),{},{location:this.getUniformLocation(e,_t85.name)}));}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}}return n;}},{key:"getUniformLocation",value:function getUniformLocation(e,t){var r=this.glContext.gl.getUniformLocation(e,t);if(null===r)throw new Error("Uniform ".concat(t," not found."));return r;}},{key:"getAttribLocation",value:function getAttribLocation(e,t){return this.glContext.gl.getAttribLocation(e,t);}}]);return Io;}();}),So,dp=L(function(){dt(),mn(),So=/*#__PURE__*/function(){function So(e,t,r,n){_classCallCheck(this,So);this.glContext=e,this.layoutStrategy=t,this.profiler=r,this.config=n,this.pendingRead=new Map(),n.reuseTextures&&(this.inUseTextures=new Map(),this.idleTextures=new Map(),this.textureLookup=new Map());}_createClass(So,[{key:"createTextureFromLayout",value:function createTextureFromLayout(e,t,r,n){var i=this.toEncoderType(e),o=this.glContext.getEncoder(i,t.channels||1,n);if(t.isPacked&&1===n)throw new Error("not implemented");var a,s,u=t.width,l=t.height;if(this.config.reuseTextures){a="".concat(u,"x").concat(l,"_").concat(o.format,"_").concat(o.internalFormat,"_").concat(o.textureType),s=this.inUseTextures.get(a),s||(s=[],this.inUseTextures.set(a,s));var _t86=this.idleTextures.get(a);if(_t86&&_t86.length>0){var _i22=_t86.pop();return s.push(_i22),1===n&&this.glContext.updateTexture(_i22,u,l,o,this.toTextureData(e,r)),_i22;}}pe.verbose("TextureManager","Creating new texture of size ".concat(t.width,"x").concat(t.height));var h=this.glContext.allocateTexture(u,l,o,this.toTextureData(e,r));return this.config.reuseTextures&&(s.push(h),this.textureLookup.set(h,a)),h;}},{key:"readTexture",value:function readTexture(e,t,r){var _this19=this;return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",function(){var n=e.shape.reduce(function(e,t){return e*t;})*r,i=_this19.glContext.readTexture(e.texture,e.width,e.height,n,_this19.toEncoderType(t),r);return _this19.toTensorData(t,i);});}},{key:"readTextureAsync",value:function(){var _readTextureAsync2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(e,t,r){var _this20=this;var n,_e148;return _regeneratorRuntime().wrap(function _callee29$(_context29){while(1)switch(_context29.prev=_context29.next){case 0:n=e.tensor.dataId;if(!(r||(r=1),this.pendingRead.has(n))){_context29.next=4;break;}_e148=this.pendingRead.get(n);return _context29.abrupt("return",new Promise(function(t){return _e148===null||_e148===void 0?void 0:_e148.push(t);}));case 4:return _context29.abrupt("return",this.profiler.event("backend","TextureManager.readTextureAsync",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(){var i,o,a,s;return _regeneratorRuntime().wrap(function _callee28$(_context28){while(1)switch(_context28.prev=_context28.next){case 0:_this20.pendingRead.set(n,[]);i=e.shape.reduce(function(e,t){return e*t;})*r;_context28.next=4;return _this20.glContext.createAndWaitForFence();case 4:o=_this20.glContext.readTexture(e.texture,e.width,e.height,i,_this20.toEncoderType(t),r),a=_this20.toTensorData(t,o),s=_this20.pendingRead.get(n);return _context28.abrupt("return",(_this20.pendingRead["delete"](n),s!==null&&s!==void 0&&s.forEach(function(e){return e(a);}),a));case 6:case"end":return _context28.stop();}},_callee28);}))));case 5:case"end":return _context29.stop();}},_callee29,this);}));function readTextureAsync(_x34,_x35,_x36){return _readTextureAsync2.apply(this,arguments);}return readTextureAsync;}()},{key:"readUint8TextureAsFloat",value:function readUint8TextureAsFloat(e){var _this21=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",function(){var t=e.shape.reduce(function(e,t){return e*t;}),r=_this21.glContext.readTexture(e.texture,e.width,e.height,4*t,"byte",4);return new Float32Array(r.buffer,r.byteOffset,t);});}},{key:"releaseTexture",value:function releaseTexture(e,t){var r;if(this.config.reuseTextures&&(r=this.textureLookup.get(e.texture),r)){t&&this.textureLookup["delete"](r);var n=this.inUseTextures.get(r);if(n){var _t87=n.indexOf(e.texture);if(-1!==_t87){n.splice(_t87,1);var i=this.idleTextures.get(r);i||(i=[],this.idleTextures.set(r,i)),i.push(e.texture);}}}(!r||t)&&(pe.verbose("TextureManager","Deleting texture of size ".concat(e.width,"x").concat(e.height)),this.glContext.deleteTexture(e.texture));}},{key:"toTensorData",value:function toTensorData(e,t){switch(e){case"int16":return t instanceof Int16Array?t:Int16Array.from(t);case"int32":return t instanceof Int32Array?t:Int32Array.from(t);case"int8":return t instanceof Int8Array?t:Int8Array.from(t);case"uint16":return t instanceof Uint16Array?t:Uint16Array.from(t);case"uint32":return t instanceof Uint32Array?t:Uint32Array.from(t);case"uint8":case"bool":return t instanceof Uint8Array?t:Uint8Array.from(t);case"float32":return t instanceof Float32Array?t:Float32Array.from(t);case"float64":return t instanceof Float64Array?t:Float64Array.from(t);default:throw new Error("TensorData type ".concat(e," is not supported"));}}},{key:"toTextureData",value:function toTextureData(e,t){if(t)return t instanceof Float32Array?t:new Float32Array(t);}},{key:"toEncoderType",value:function toEncoderType(e){return"float";}},{key:"clearActiveTextures",value:function clearActiveTextures(){this.glContext.clearActiveTextures();}}]);return So;}();}),Ao,hp=L(function(){dt(),Es(),il(),ep(),pp(),Ki(),dp(),Ao=/*#__PURE__*/function(){function Ao(e,t){_classCallCheck(this,Ao);this.backend=e,this.context=t,this.layoutStrategy=new yo(e.glContext.maxTextureSize),this.programManager=new Io(this.context.profiler,e.glContext,this.layoutStrategy),this.textureManager=new So(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===e.textureCacheMode}),this.packedTextureDataCache=new Map(),this.unpackedTextureDataCache=new Map(),this.pack=e.pack,this.pack2unpackMap=new Map(),this.unpack2packMap=new Map();}_createClass(Ao,[{key:"createInferenceHandler",value:function createInferenceHandler(){return new ao(this);}},{key:"onGraphInitialized",value:function onGraphInitialized(e){var t=e.getValues().filter(function(e){return-1===e.from&&e.tensor;}).map(function(e){return e.tensor.dataId;});this.initializers=new Set(t);}},{key:"isInitializer",value:function isInitializer(e){return!!this.initializers&&this.initializers.has(e);}},{key:"addInitializer",value:function addInitializer(e){this.initializers.add(e);}},{key:"getTextureData",value:function getTextureData(e,t){return t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e);}},{key:"setTextureData",value:function setTextureData(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;pe.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(e,t):this.unpackedTextureDataCache.set(e,t);}},{key:"dispose",value:function dispose(){var _this22=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(function(e){return _this22.textureManager.releaseTexture(e,!0);}),this.packedTextureDataCache=new Map(),this.unpackedTextureDataCache.forEach(function(e){return _this22.textureManager.releaseTexture(e,!0);}),this.unpackedTextureDataCache=new Map();}},{key:"resolve",value:function resolve(e,t,r){var n=As(e,t,Qc);return{impl:n.opImpl,context:n.opInit?n.opInit(e,r):e};}}]);return Ao;}();});function rg(e){var t=0;for(;t<e.length&&e[t]();++t);return t-1;}var xn,mp=L(function(){It(),mn(),mn(),Bt(),xn=/*#__PURE__*/function(){function xn(e,t){_classCallCheck(this,xn);this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e,this.version=t,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters();}_createClass(xn,[{key:"allocateTexture",value:function allocateTexture(e,t,r,n){var i=this.gl,o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);var a=n?r.encode(n,e*t):null;return i.texImage2D(i.TEXTURE_2D,0,r.internalFormat,e,t,0,r.format,r.textureType,a),this.checkError(),o;}},{key:"updateTexture",value:function updateTexture(e,t,r,n,i){var o=this.gl;o.bindTexture(o.TEXTURE_2D,e);var a=n.encode(i,t*r);o.texSubImage2D(o.TEXTURE_2D,0,0,0,t,r,n.format,n.textureType,a),this.checkError();}},{key:"attachFramebuffer",value:function attachFramebuffer(e,t,r){var n=this.gl;n.bindTexture(n.TEXTURE_2D,e),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),this.checkError(),n.viewport(0,0,t,r),n.scissor(0,0,t,r);}},{key:"readTexture",value:function readTexture(e,t,r,n,i,o){var a=this.gl;o||(o=1),this.frameBufferBound||this.attachFramebuffer(e,t,r);var s=this.getEncoder(i,o),u=s.allocate(t*r);return a.bindTexture(a.TEXTURE_2D,e),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),a.readPixels(0,0,t,r,a.RGBA,s.textureType,u),this.checkError(),s.decode(u,n);}},{key:"isFramebufferReady",value:function isFramebufferReady(){return!0;}},{key:"getActiveTexture",value:function getActiveTexture(){var e=this.gl;return"TEXTURE"+(e.getParameter(this.gl.ACTIVE_TEXTURE)-e.TEXTURE0);}},{key:"getTextureBinding",value:function getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D);}},{key:"getFramebufferBinding",value:function getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING);}},{key:"setVertexAttributes",value:function setVertexAttributes(e,t){var r=this.gl;r.vertexAttribPointer(e,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(e),-1!==t&&(r.vertexAttribPointer(t,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(t)),this.checkError();}},{key:"createProgram",value:function createProgram(e,t){var r=this.gl,n=r.createProgram();return r.attachShader(n,e),r.attachShader(n,t),r.linkProgram(n),n;}},{key:"compileShader",value:function compileShader(e,t){var r=this.gl,n=r.createShader(t);if(!n)throw new Error("createShader() returned null with type ".concat(t));if(r.shaderSource(n,e),r.compileShader(n),!1===r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error("Failed to compile shader: ".concat(r.getShaderInfoLog(n),"\nShader source:\n").concat(e));return n;}},{key:"deleteShader",value:function deleteShader(e){this.gl.deleteShader(e);}},{key:"bindTextureToUniform",value:function bindTextureToUniform(e,t,r){var n=this.gl;n.activeTexture(n.TEXTURE0+t),this.checkError(),n.bindTexture(n.TEXTURE_2D,e),this.checkError(),n.uniform1i(r,t),this.checkError();}},{key:"draw",value:function draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError();}},{key:"checkError",value:function checkError(){if(ee.debug){var e=this.gl,t=e.getError(),r="";switch(t){case e.NO_ERROR:return;case e.INVALID_ENUM:r="INVALID_ENUM";break;case e.INVALID_VALUE:r="INVALID_VALUE";break;case e.INVALID_OPERATION:r="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r="Unknown WebGL Error: ".concat(t.toString(16));}throw new Error(r);}}},{key:"deleteTexture",value:function deleteTexture(e){this.gl.deleteTexture(e);}},{key:"deleteProgram",value:function deleteProgram(e){this.gl.deleteProgram(e);}},{key:"getEncoder",value:function getEncoder(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(2===this.version)return new oo(this.gl,t);switch(e){case"float":return 1===r||this.isRenderFloat32Supported?new hn(this.gl,t):new hn(this.gl,t,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new io(this.gl,t);default:throw new Error("Invalid dataType: ".concat(e));}}},{key:"clearActiveTextures",value:function clearActiveTextures(){var e=this.gl;for(var t=0;t<this.maxTextureImageUnits;++t)e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,null);}},{key:"dispose",value:function dispose(){if(this.disposed)return;var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0;}},{key:"createDefaultGeometry",value:function createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);}},{key:"createVertexbuffer",value:function createVertexbuffer(){var e=this.gl,t=e.createBuffer();if(!t)throw new Error("createBuffer() returned null");var r=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),this.checkError(),t;}},{key:"createFramebuffer",value:function createFramebuffer(){var e=this.gl.createFramebuffer();if(!e)throw new Error("createFramebuffer returned null");return e;}},{key:"queryVitalParameters",value:function queryVitalParameters(){var e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version;}},{key:"getExtensions",value:function getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"));}},{key:"checkFloatTextureAttachableToFrameBuffer",value:function checkFloatTextureAttachableToFrameBuffer(){var e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);var r=2===this.version?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,r,1,1,0,e.RGBA,e.FLOAT,null);var n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(n),i;}},{key:"checkRenderFloat32",value:function checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1;}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer;}},{key:"checkFloat32Download",value:function checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1;}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer;}},{key:"checkFloat32Blend",value:function checkFloat32Blend(){var e,t,r,n,i,o=this.gl;try{e=o.createTexture(),t=o.createFramebuffer(),o.bindTexture(o.TEXTURE_2D,e);var _a20=2===this.version?o.RGBA32F:o.RGBA;return o.texImage2D(o.TEXTURE_2D,0,_a20,1,1,0,o.RGBA,o.FLOAT,null),o.bindFramebuffer(o.FRAMEBUFFER,t),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),o.enable(o.BLEND),r=o.createShader(o.VERTEX_SHADER),!!(r&&(o.shaderSource(r,"void main(){}"),o.compileShader(r),n=o.createShader(o.FRAGMENT_SHADER),n)&&(o.shaderSource(n,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),o.compileShader(n),i=o.createProgram(),i))&&(o.attachShader(i,r),o.attachShader(i,n),o.linkProgram(i),o.useProgram(i),o.drawArrays(o.POINTS,0,1),o.getError()===o.NO_ERROR);}finally{o.disable(o.BLEND),i&&o.deleteProgram(i),r&&o.deleteShader(r),n&&o.deleteShader(n),t&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(t)),e&&(o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(e));}}},{key:"beginTimer",value:function beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){var e=this.gl,t=this.disjointTimerQueryWebgl2Extension,r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r;}throw new Error("WebGL1 profiling currently not supported.");}},{key:"endTimer",value:function endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{var e=this.gl,t=this.disjointTimerQueryWebgl2Extension;e.endQuery(t.TIME_ELAPSED_EXT);}}},{key:"isTimerResultAvailable",value:function isTimerResultAvailable(e){var t=!1,r=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{var n=this.gl,i=this.disjointTimerQueryWebgl2Extension;t=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE),r=n.getParameter(i.GPU_DISJOINT_EXT);}return t&&!r;}},{key:"getTimerResult",value:function getTimerResult(e){var t=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{var r=this.gl;t=r.getQueryParameter(e,r.QUERY_RESULT),r.deleteQuery(e);}return t/1e6;}},{key:"waitForQueryAndGetTime",value:function(){var _waitForQueryAndGetTime=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30(e){var _this23=this;return _regeneratorRuntime().wrap(function _callee30$(_context30){while(1)switch(_context30.prev=_context30.next){case 0:_context30.next=2;return vi(function(){return _this23.isTimerResultAvailable(e);});case 2:return _context30.abrupt("return",this.getTimerResult(e));case 3:case"end":return _context30.stop();}},_callee30,this);}));function waitForQueryAndGetTime(_x37){return _waitForQueryAndGetTime.apply(this,arguments);}return waitForQueryAndGetTime;}()},{key:"createAndWaitForFence",value:function(){var _createAndWaitForFence=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31(){var e;return _regeneratorRuntime().wrap(function _callee31$(_context31){while(1)switch(_context31.prev=_context31.next){case 0:e=this.createFence(this.gl);return _context31.abrupt("return",this.pollFence(e));case 2:case"end":return _context31.stop();}},_callee31,this);}));function createAndWaitForFence(){return _createAndWaitForFence.apply(this,arguments);}return createAndWaitForFence;}()},{key:"createFence",value:function createFence(e){var t,r=e,n=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),t=null===n?function(){return!0;}:function(){var e=r.clientWaitSync(n,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED;},{query:n,isFencePassed:t};}},{key:"pollFence",value:function(){var _pollFence=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32(e){var _this24=this;return _regeneratorRuntime().wrap(function _callee32$(_context32){while(1)switch(_context32.prev=_context32.next){case 0:return _context32.abrupt("return",new Promise(function(t){_this24.addItemToPoll(function(){return e.isFencePassed();},function(){return t();});}));case 1:case"end":return _context32.stop();}},_callee32);}));function pollFence(_x38){return _pollFence.apply(this,arguments);}return pollFence;}()},{key:"pollItems",value:function pollItems(){var e=rg(this.itemsToPoll.map(function(e){return e.isDoneFn;}));for(var t=0;t<=e;++t){var _e149=this.itemsToPoll[t].resolveFn;_e149();}this.itemsToPoll=this.itemsToPoll.slice(e+1);}},{key:"addItemToPoll",value:function(){var _addItemToPoll=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33(e,t){var _this25=this;return _regeneratorRuntime().wrap(function _callee33$(_context33){while(1)switch(_context33.prev=_context33.next){case 0:this.itemsToPoll.push({isDoneFn:e,resolveFn:t});_context33.t0=!(this.itemsToPoll.length>1);if(!_context33.t0){_context33.next=5;break;}_context33.next=5;return vi(function(){return _this25.pollItems(),0===_this25.itemsToPoll.length;});case 5:case"end":return _context33.stop();}},_callee33,this);}));function addItemToPoll(_x39,_x40){return _addItemToPoll.apply(this,arguments);}return addItemToPoll;}()}]);return xn;}();});function Zi(e){var t;if(e&&"webgl2"!==e||!("webgl2"in Xr)?(!e||"webgl"===e)&&"webgl"in Xr&&(t=Xr.webgl):t=Xr.webgl2,!t)try{t=bp(og(),e);}catch(_unused3){t=bp(ng(),e);}e=e||1===t.version?"webgl":"webgl2";var r=t.gl;return Xr[e]=t,r.isContextLost()?(delete Xr[e],Zi(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),t);}function bp(e,t){var r,n={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(r=e.getContext("webgl2",n),r))try{return new xn(r,2);}catch(e){pe.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: ".concat(e));}if((!t||"webgl"===t)&&(r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),r))try{return new xn(r,1);}catch(e){pe.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ".concat(e));}throw new Error("WebGL is not supported");}function ng(){if((typeof document==="undefined"?"undefined":_typeof(document))>"u")throw new TypeError("failed to create canvas: document is not supported");var e=document.createElement("canvas");return e.width=1,e.height=1,e;}function og(){if((typeof OffscreenCanvas==="undefined"?"undefined":_typeof(OffscreenCanvas))>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1);}var Xr,gp=L(function(){dt(),mp(),Xr={};}),Eo,yp=L(function(){It(),dt(),hp(),gp(),Eo=/*#__PURE__*/function(){function Eo(){_classCallCheck(this,Eo);}_createClass(Eo,[{key:"contextId",get:function get(){return ee.webgl.contextId;},set:function set(e){ee.webgl.contextId=e;}},{key:"matmulMaxBatchSize",get:function get(){return ee.webgl.matmulMaxBatchSize;},set:function set(e){ee.webgl.matmulMaxBatchSize=e;}},{key:"textureCacheMode",get:function get(){return ee.webgl.textureCacheMode;},set:function set(e){ee.webgl.textureCacheMode=e;}},{key:"pack",get:function get(){return ee.webgl.pack;},set:function set(e){ee.webgl.pack=e;}},{key:"async",get:function get(){return ee.webgl.async;},set:function set(e){ee.webgl.async=e;}},{key:"initialize",value:function initialize(){try{return this.glContext=Zi(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),pe.setWithEnv(ee),ee.webgl.context||Object.defineProperty(ee.webgl,"context",{value:this.glContext.gl}),pe.verbose("WebGLBackend","Created WebGLContext: ".concat(_typeof(this.glContext)," with matmulMaxBatchSize: ").concat(this.matmulMaxBatchSize,"; textureCacheMode: ").concat(this.textureCacheMode,"; pack: ").concat(this.pack,"; async: ").concat(this.async,".")),!0;}catch(e){return pe.warning("WebGLBackend","Unable to initialize WebGLBackend. ".concat(e)),!1;}}},{key:"createSessionHandler",value:function createSessionHandler(e){return new Ao(this,e);}},{key:"dispose",value:function dispose(){this.glContext.dispose();}}]);return Eo;}();});function Qi(_x41){return _Qi.apply(this,arguments);}function _Qi(){_Qi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee71(e){var t,_iterator43,_step43,_e219,_t116,r;return _regeneratorRuntime().wrap(function _callee71$(_context74){while(1)switch(_context74.prev=_context74.next){case 0:if(e){_context74.next=2;break;}return _context74.abrupt("return",Qi(["webgl"]));case 2:t="string"==typeof e?[e]:e;_iterator43=_createForOfIteratorHelper(t);_context74.prev=4;_iterator43.s();case 6:if((_step43=_iterator43.n()).done){_context74.next=18;break;}_e219=_step43.value;_t116=Tp.get(_e219);if(!_t116){_context74.next=11;break;}return _context74.abrupt("return",_t116);case 11:_context74.next=13;return ag(_e219);case 13:r=_context74.sent;if(!r){_context74.next=16;break;}return _context74.abrupt("return",r);case 16:_context74.next=6;break;case 18:_context74.next=23;break;case 20:_context74.prev=20;_context74.t0=_context74["catch"](4);_iterator43.e(_context74.t0);case 23:_context74.prev=23;_iterator43.f();return _context74.finish(23);case 26:throw new Error("no available backend to use");case 27:case"end":return _context74.stop();}},_callee71,null,[[4,20,23,26]]);}));return _Qi.apply(this,arguments);}function ag(_x42){return _ag.apply(this,arguments);}function _ag(){_ag=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee72(e){var t,r,n;return _regeneratorRuntime().wrap(function _callee72$(_context75){while(1)switch(_context75.prev=_context75.next){case 0:t=ig;if(!(_typeof(t[e])<"u"&&sg(t[e]))){_context75.next=10;break;}r=t[e],n=r.initialize();_context75.t0="object"==_typeof(n)&&"then"in n;if(!_context75.t0){_context75.next=8;break;}_context75.next=7;return n;case 7:n=_context75.sent;case 8:if(!n){_context75.next=10;break;}return _context75.abrupt("return",(Tp.set(e,r),r));case 10:case"end":return _context75.stop();}},_callee72);}));return _ag.apply(this,arguments);}function sg(e){var t=e;return"initialize"in t&&"function"==typeof t.initialize&&"createSessionHandler"in t&&"function"==typeof t.createSessionHandler&&"dispose"in t&&"function"==typeof t.dispose;}var Tp,ig,xp=L(function(){yp(),Tp=new Map(),ig={webgl:new Eo()};}),ea,Po,wp=L(function(){dt(),ea=/*#__PURE__*/_createClass(function ea(e,t){_classCallCheck(this,ea);this.op=e,this.node=t;}),Po=/*#__PURE__*/function(){function Po(e,t,r){_classCallCheck(this,Po);this.graph=e,this.profiler=r,this.initialize(t);}_createClass(Po,[{key:"initialize",value:function initialize(e){var _this26=this;this.profiler.event("session","ExecutionPlan.initialize",function(){var t=_this26.graph.getNodes();if(t.length!==e.length)throw new Error("The size of nodes and OPs do not match.");_this26._ops=e.map(function(e,r){return new ea(e,t[r]);}),_this26.reset(),_this26._starter=[],_this26._ops.forEach(function(e,t){var r=!0;var _iterator24=_createForOfIteratorHelper(e.node.inputs),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var _t88=_step24.value;if(!_this26._values[_t88]&&-1===_this26.graph.getInputIndices().indexOf(_t88)){r=!1;break;}}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}r&&_this26._starter.push(t);});});}},{key:"reset",value:function reset(){this._values=this.graph.getValues().map(function(e){return e.tensor;});}},{key:"execute",value:function(){var _execute=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36(e,t){var _this27=this;return _regeneratorRuntime().wrap(function _callee36$(_context37){while(1)switch(_context37.prev=_context37.next){case 0:return _context37.abrupt("return",this.profiler.event("session","ExecutionPlan.execute",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(){var r,n,i,o,a,s,_loop5,u,_e150,_t89,_r105;return _regeneratorRuntime().wrap(function _callee35$(_context36){while(1)switch(_context36.prev=_context36.next){case 0:_this27.reset();r=e.createInferenceHandler(),n=_this27.graph.getInputIndices();if(!(t.length!==n.length)){_context36.next=4;break;}throw new Error("number of input tensors don't match the number of inputs to the model: actual: ".concat(t.length," expected: ").concat(n.length));case 4:t.forEach(function(e,t){var r=n[t];_this27._values[r]=e;});i=_this27._starter.slice(0),o=_this27.graph.getValues(),a=_this27.graph.getNodes(),s=0;_loop5=/*#__PURE__*/_regeneratorRuntime().mark(function _loop5(){var e,t,n,u,l,h;return _regeneratorRuntime().wrap(function _loop5$(_context35){while(1)switch(_context35.prev=_context35.next){case 0:e=i[s++],t=_this27._ops[e],n=t.node.inputs.map(function(e){return _this27._values[e];});if(!(-1!==n.indexOf(void 0))){_context35.next=3;break;}throw new Error("unresolved input detected: op: ".concat(t.node));case 3:u=n;pe.verbose("ExecPlan","Runing op:".concat(t.node.name," (").concat(u.map(function(e,r){return"'".concat(t.node.inputs[r],"': ").concat(e.type,"[").concat(e.dims.join(","),"]");}).join(", "),")"));_context35.next=7;return _this27.profiler.event("node",t.node.name,/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(){return _regeneratorRuntime().wrap(function _callee34$(_context34){while(1)switch(_context34.prev=_context34.next){case 0:return _context34.abrupt("return",t.op.impl(r,u,t.op.context));case 1:case"end":return _context34.stop();}},_callee34);})));case 7:l=_context35.sent;if(!(l.length!==t.node.outputs.length)){_context35.next=10;break;}throw new Error("the size of output does not match model definition.");case 10:l.forEach(function(e,r){var n=t.node.outputs[r];if(_this27._values[n])throw new Error("output [".concat(n,"] already has value: op:").concat(t.node.name));_this27._values[n]=e;});h=new Set();l.forEach(function(e,r){var n=t.node.outputs[r];var _iterator25=_createForOfIteratorHelper(o[n].to),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _e151=_step25.value;var _t90=a[_e151],_r106=!0;var _iterator26=_createForOfIteratorHelper(_t90.inputs),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _e152=_step26.value;if(!_this27._values[_e152]){_r106=!1;break;}}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}_r106&&h.add(_e151);}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}}),i.push.apply(i,_toConsumableArray(h));case 13:case"end":return _context35.stop();}},_loop5);});case 7:if(!(s<i.length)){_context36.next=11;break;}return _context36.delegateYield(_loop5(),"t0",9);case 9:_context36.next=7;break;case 11:u=[];_e150=0;case 13:if(!(_e150<_this27.graph.getOutputIndices().length)){_context36.next=27;break;}_t89=_this27.graph.getOutputIndices()[_e150],_r105=_this27._values[_t89];if(!(void 0===_r105)){_context36.next=17;break;}throw new Error("required output [".concat(_t89,"] does not have value"));case 17:if(!(0===_t89)){_context36.next=22;break;}_context36.next=20;return _r105.getData();case 20:_context36.next=23;break;case 22:_r105.data;case 23:u.push(_r105);case 24:_e150++;_context36.next=13;break;case 27:return _context36.abrupt("return",(pe.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),u));case 28:case"end":return _context36.stop();}},_callee35);}))));case 1:case"end":return _context37.stop();}},_callee36,this);}));function execute(_x43,_x44){return _execute.apply(this,arguments);}return execute;}()}]);return Po;}();}),oe,xt,wn,vp=L(function(){un(),oe=Nr(Ur()),_r(),fe(),xt=H.experimental.fbs,wn=/*#__PURE__*/function(){function e(t){_classCallCheck(this,e);if(this._attributes=new Map(),null!=t){var _iterator27=_createForOfIteratorHelper(t),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var r=_step27.value;r instanceof oe.onnx.AttributeProto?this._attributes.set(r.name,[e.getValue(r),e.getType(r)]):r instanceof xt.Attribute&&this._attributes.set(r.name(),[e.getValue(r),e.getType(r)]);}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}if(this._attributes.size<t.length)throw new Error("duplicated attribute names");}}_createClass(e,[{key:"set",value:function set(_e153,t,r){this._attributes.set(_e153,[r,t]);}},{key:"delete",value:function _delete(_e154){this._attributes["delete"](_e154);}},{key:"getFloat",value:function getFloat(_e155,t){return this.get(_e155,"float",t);}},{key:"getInt",value:function getInt(_e156,t){return this.get(_e156,"int",t);}},{key:"getString",value:function getString(_e157,t){return this.get(_e157,"string",t);}},{key:"getTensor",value:function getTensor(_e158,t){return this.get(_e158,"tensor",t);}},{key:"getFloats",value:function getFloats(_e159,t){return this.get(_e159,"floats",t);}},{key:"getInts",value:function getInts(_e160,t){return this.get(_e160,"ints",t);}},{key:"getStrings",value:function getStrings(_e161,t){return this.get(_e161,"strings",t);}},{key:"getTensors",value:function getTensors(_e162,t){return this.get(_e162,"tensors",t);}},{key:"get",value:function get(_e163,t,r){var n=this._attributes.get(_e163);if(void 0===n){if(void 0!==r)return r;throw new Error("required attribute not found: ".concat(_e163));}if(n[1]!==t)throw new Error("type mismatch: expected ".concat(t," but got ").concat(n[1]));return n[0];}}],[{key:"getType",value:function getType(_e164){var t=_e164 instanceof oe.onnx.AttributeProto?_e164.type:_e164.type();switch(t){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: ".concat(oe.onnx.AttributeProto.AttributeType[t]));}}},{key:"getValue",value:function getValue(_e165){var t=_e165 instanceof oe.onnx.AttributeProto?_e165.type:_e165.type();if(t===oe.onnx.AttributeProto.AttributeType.GRAPH||t===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var r=this.getValueNoCheck(_e165);if(t===oe.onnx.AttributeProto.AttributeType.INT&&ot.isLong(r))return ot.longToNumber(r);if(t===oe.onnx.AttributeProto.AttributeType.INTS){var _e166=r,_t91=new Array(_e166.length);for(var _r107=0;_r107<_e166.length;_r107++){var n=_e166[_r107];_t91[_r107]=ot.longToNumber(n);}return _t91;}if(t===oe.onnx.AttributeProto.AttributeType.TENSOR)return _e165 instanceof oe.onnx.AttributeProto?Ce.fromProto(r):Ce.fromOrtTensor(r);if(t===oe.onnx.AttributeProto.AttributeType.TENSORS){if(_e165 instanceof oe.onnx.AttributeProto)return r.map(function(_e167){return Ce.fromProto(_e167);});if(_e165 instanceof xt.Attribute)return r.map(function(_e168){return Ce.fromOrtTensor(_e168);});}return t===oe.onnx.AttributeProto.AttributeType.STRING&&_e165 instanceof oe.onnx.AttributeProto?dn(r):t===oe.onnx.AttributeProto.AttributeType.STRINGS&&_e165 instanceof oe.onnx.AttributeProto?r.map(dn):r;}},{key:"getValueNoCheck",value:function getValueNoCheck(_e169){return _e169 instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(_e169):this.getValueNoCheckFromOrtFormat(_e169);}},{key:"getValueNoCheckFromOnnxFormat",value:function getValueNoCheckFromOnnxFormat(_e170){switch(_e170.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return _e170.f;case oe.onnx.AttributeProto.AttributeType.INT:return _e170.i;case oe.onnx.AttributeProto.AttributeType.STRING:return _e170.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return _e170.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return _e170.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return _e170.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return _e170.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return _e170.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return _e170.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return _e170.graphs;default:throw new Error("unsupported attribute type: ".concat(oe.onnx.AttributeProto.AttributeType[_e170.type]));}}},{key:"getValueNoCheckFromOrtFormat",value:function getValueNoCheckFromOrtFormat(_e171){switch(_e171.type()){case xt.AttributeType.FLOAT:return _e171.f();case xt.AttributeType.INT:return _e171.i();case xt.AttributeType.STRING:return _e171.s();case xt.AttributeType.TENSOR:return _e171.t();case xt.AttributeType.GRAPH:return _e171.g();case xt.AttributeType.FLOATS:return _e171.floatsArray();case xt.AttributeType.INTS:{var t=[];for(var r=0;r<_e171.intsLength();r++)t.push(_e171.ints(r));return t;}case xt.AttributeType.STRINGS:{var _t92=[];for(var _r108=0;_r108<_e171.stringsLength();_r108++)_t92.push(_e171.strings(_r108));return _t92;}case xt.AttributeType.TENSORS:{var _t93=[];for(var _r109=0;_r109<_e171.tensorsLength();_r109++)_t93.push(_e171.tensors(_r109));return _t93;}default:throw new Error("unsupported attribute type: ".concat(xt.AttributeType[_e171.type()]));}}}]);return e;}();}),ra,Do,na,Rt,Lo,ta,_p=L(function(){vp(),un(),ra=Nr(Ur()),_r(),fe(),Do=H.experimental.fbs,na={from:function from(e,t){return new ta(e,t);}},Rt=/*#__PURE__*/function(){function Rt(e){_classCallCheck(this,Rt);this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=Ve.tensorValueTypeFromProto(e.type.tensorType));}_createClass(Rt,[{key:"from",get:function get(){return this._from;}},{key:"to",get:function get(){return this._to;}}]);return Rt;}(),Lo=/*#__PURE__*/_createClass(function Lo(e,t){_classCallCheck(this,Lo);e instanceof ra.onnx.NodeProto?(this.name=e.name,this.opType=e.opType,this.attributes=new wn(e.attribute)):e instanceof Do.Node&&(this.name=t!==null&&t!==void 0?t:e.name(),this.opType=e.opType(),this.attributes=new wn(Ve.tensorAttributesFromORTFormat(e))),this.inputs=[],this.outputs=[],this.executeNode=!0;}),ta=/*#__PURE__*/function(){function ta(e,t){_classCallCheck(this,ta);if(!e)throw new TypeError("graph is empty");this.buildGraph(e),this.transformGraph(t),this.checkIsAcyclic();}_createClass(ta,[{key:"getInputIndices",value:function getInputIndices(){return this._allInputIndices;}},{key:"getInputNames",value:function getInputNames(){return this._allInputNames;}},{key:"getOutputIndices",value:function getOutputIndices(){return this._allOutputIndices;}},{key:"getOutputNames",value:function getOutputNames(){return this._allOutputNames;}},{key:"getValues",value:function getValues(){return this._allData;}},{key:"getNodes",value:function getNodes(){return this._nodes;}},{key:"buildGraph",value:function buildGraph(e){if(e instanceof ra.onnx.GraphProto)this.buildGraphFromOnnxFormat(e);else{if(!(e instanceof Do.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(e);}}},{key:"buildGraphFromOnnxFormat",value:function buildGraphFromOnnxFormat(e){var t=new Map();this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var r=new Map();if(!e.input)throw new Error("missing information in graph: input");var n=[];var _iterator28=_createForOfIteratorHelper(e.input),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var _r112=_step28.value;if(t.has(_r112.name))throw new Error("duplicated input name: ".concat(_r112.name));var _e175=this._allData.push(new Rt(_r112))-1;t.set(_r112.name,_e175),n.push(_r112.name);}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}if(!e.initializer)throw new Error("missing information in graph: initializer");var _iterator29=_createForOfIteratorHelper(e.initializer),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _r113=_step29.value;var _e176=t.get(_r113.name);if(void 0===_e176){var _n23=new Rt();_n23.type={shape:{dims:Ve.tensorDimsFromProto(_r113.dims)},tensorType:Ve.tensorDataTypeFromProto(_r113.dataType)},_e176=this._allData.push(_n23)-1,t.set(_r113.name,_e176);}this._allData[_e176]._from=-1,this._allData[_e176].tensor=Ce.fromProto(_r113);}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}for(var _e172=0;_e172<this._allData.length;_e172++)this._allData[_e172].tensor||(this._allInputIndices.push(_e172),this._allInputNames.push(n[_e172]));if(!e.output)throw new Error("missing information in graph: output");var _iterator30=_createForOfIteratorHelper(e.output),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _r114=_step30.value;if(t.has(_r114.name))throw new Error("duplicated output name: ".concat(_r114.name));var _e177=this._allData.push(new Rt(_r114))-1;t.set(_r114.name,_e177),this._allOutputIndices.push(_e177),this._allOutputNames.push(_r114.name);}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}if(!e.node)throw new Error("missing information in graph: node");var _iterator31=_createForOfIteratorHelper(e.node),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var _t94=_step31.value;if(!_t94.name)for(var _e178=0;;_e178++){var _n24="unnamed_".concat(_t94.opType,"_").concat(_e178);if(!r.has(_n24)){_t94.name=_n24;break;}}if(r.has(_t94.name))throw new Error("duplicated node name: ".concat(_t94.name));var _e179=this._nodes.push(new Lo(_t94))-1;r.set(_t94.name,_e179);}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}for(var _r110=0;_r110<this._nodes.length;_r110++){var _n21=this._nodes[_r110],i=e.node[_r110];if(!i.output)throw new Error("missing output for node: ".concat(i.name));var _iterator32=_createForOfIteratorHelper(i.output),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var _e173=_step32.value;var o=t.get(_e173);if(_typeof(o)>"u"&&(o=this._allData.push(new Rt())-1,t.set(_e173,o)),_n21.outputs.push(o),void 0!==this._allData[o]._from)throw new Error("multiple nodes output to one data value: ".concat(o));if(this._allData[o]._from=_r110,"Constant"===i.opType){if(!i.attribute||1!==i.attribute.length||!i.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!i.output||1!==i.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");_n21.outputs.pop(),_n21.executeNode=!1,this._allData[o]._from=-1,this._allData[o].tensor=Ce.fromProto(i.attribute[0].t);}}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}}for(var _r111=0;_r111<this._nodes.length;_r111++){var _n22=this._nodes[_r111],_i23=e.node[_r111];if(!_i23.input)throw new Error("missing input for node: ".concat(_i23.name));var _iterator33=_createForOfIteratorHelper(_i23.input),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var _e174=_step33.value;var _o17=t.get(_e174);if(_typeof(_o17)>"u"){if(""===_e174&&(3===_i23.input.length||4===_i23.input.length)&&"Resize"===_i23.opType)continue;throw new Error("unrecognized input '".concat(_e174,"' for node: ").concat(_i23.name));}_n22.inputs.push(_o17),this._allData[_o17]._to.push(_r111);}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}}return!0;}},{key:"buildGraphFromOrtFormat",value:function buildGraphFromOrtFormat(e){var t=new Map();this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var r=new Map(),n=[];for(var _r115=0;_r115<e.inputsLength();_r115++){var i=e.inputs(_r115);if(t.has(i))throw new Error("duplicated input name: ".concat(i));for(var _r116=0;_r116<e.nodeArgsLength();_r116++){var _e$nodeArgs;if(((_e$nodeArgs=e.nodeArgs(_r116))===null||_e$nodeArgs===void 0?void 0:_e$nodeArgs.name())===i){var _e$nodeArgs2;var o=new Rt();if(((_e$nodeArgs2=e.nodeArgs(_r116))===null||_e$nodeArgs2===void 0||(_e$nodeArgs2=_e$nodeArgs2.type())===null||_e$nodeArgs2===void 0?void 0:_e$nodeArgs2.valueType())!==Do.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");var _a21=e.nodeArgs(_r116).type().value(new Do.TensorTypeAndShape()),s=Ve.tensorDataTypeFromProto(_a21.elemType()),u=_a21.shape(),l=[];for(var _e180=0;_e180<u.dimLength();_e180++)l.push(ot.longToNumber(u.dim(_e180).value().dimValue()));o.type={shape:{dims:l},tensorType:s};var h=this._allData.push(o)-1;t.set(i,h),n.push(i);}}}for(var _r117=0;_r117<e.initializersLength();_r117++){var _n25=e.initializers(_r117),_i24=t.get(_n25.name());if(void 0===_i24){var _e181=new Rt(),_r118=Ve.tensorDimsFromORTFormat(_n25),_o18=Ve.tensorDataTypeFromProto(_n25.dataType());_e181.type={shape:{dims:_r118},tensorType:_o18},_i24=this._allData.push(_e181)-1,t.set(_n25.name(),_i24);}this._allData[_i24]._from=-1,this._allData[_i24].tensor=Ce.fromOrtTensor(_n25);}for(var _e182=0;_e182<this._allData.length;_e182++)this._allData[_e182].tensor||(this._allInputIndices.push(_e182),this._allInputNames.push(n[_e182]));for(var _r119=0;_r119<e.outputsLength();_r119++){var _n26=e.outputs(_r119);if(t.has(_n26))throw new Error("duplicated output name: ".concat(_n26));var _i25=this._allData.push(new Rt())-1;t.set(_n26,_i25),this._allOutputIndices.push(_i25),this._allOutputNames.push(_n26);}if(!e.nodes)throw new Error("missing information in graph: node");for(var _t95=0;_t95<e.nodesLength();_t95++){var _n27=e.nodes(_t95),_i26=_n27.name();if(!_i26)for(var _e183=0;_i26="unnamed_".concat(_n27.opType(),"_").concat(_e183),r.has(_i26);_e183++);if(r.has(_i26))throw new Error("duplicated node name: ".concat(_i26));var _o19=this._nodes.push(new Lo(_n27,_i26))-1;r.set(_i26,_o19);}for(var _r120=0;_r120<this._nodes.length;_r120++){var _n28=this._nodes[_r120],_i27=e.nodes(_r120);if(null==_i27)throw new Error("No node exists at index ".concat(_r120));if(0===(_i27===null||_i27===void 0?void 0:_i27.outputsLength()))throw new Error("missing output for node: ".concat(_i27.name));for(var _e184=0;_e184<(_i27===null||_i27===void 0?void 0:_i27.outputsLength());_e184++){var _o20=_i27===null||_i27===void 0?void 0:_i27.outputs(_e184),_a22=t.get(_o20);if(_typeof(_a22)>"u"&&(_a22=this._allData.push(new Rt())-1,t.set(_o20,_a22)),_n28.outputs.push(_a22),void 0!==this._allData[_a22]._from)throw new Error("multiple nodes output to one data value: ".concat(_a22));if(this._allData[_a22]._from=_r120,"Constant"===_i27.opType()){if(1!==_i27.attributesLength()||!_i27.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==_i27.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");_n28.outputs.pop(),_n28.executeNode=!1,this._allData[_a22]._from=-1,this._allData[_a22].tensor=Ce.fromOrtTensor(_i27.attributes(0).t());}}}for(var _r121=0;_r121<this._nodes.length;_r121++){var _n29=this._nodes[_r121],_i28=e.nodes(_r121);if(0===_i28.inputsLength())throw new Error("missing input for node: ".concat(_i28.name));for(var _e185=0;_e185<_i28.inputsLength();_e185++){var _o21=_i28.inputs(_e185),_a23=t.get(_o21);if(_typeof(_a23)>"u")throw new Error("unrecognized input '".concat(_o21,"' for node: ").concat(_i28.name()));_n29.inputs.push(_a23),this._allData[_a23]._to.push(_r121);}}}},{key:"checkIsAcyclic",value:function checkIsAcyclic(){var _this28=this;var e=new Set();this._allInputIndices.forEach(function(t){_this28._allData[t]._to.forEach(function(t){e.add(t);});});var t=Array.from(e),r=new Array(this._nodes.length).fill("white");var _loop6=function _loop6(){var e=t.pop();"gray"===r[e]?r[e]="black":(t.push(e),r[e]="gray",_this28._nodes[e].outputs.forEach(function(n){var i=_this28._allData[n];if(_typeof(i.tensor)<"u")throw new Error("node outputs should not be initialized");if(i._from!==e)throw new Error("from property of the Value object doesn't match index of Node being processed");i._to.forEach(function(e){if("gray"===r[e])throw new Error("model graph is cyclic");"white"===r[e]&&t.push(e);});}));};for(;t.length>0;){_loop6();}}},{key:"transformGraph",value:function transformGraph(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e&&e.transformGraph(this),this.finalizeGraph();}},{key:"finalizeGraph",value:function finalizeGraph(){var _this29=this;var e=0,t=new Array(this._nodes.length,0),r=0;for(var _e186=0;_e186<this._nodes.length;_e186++)t[_e186]=r,this._nodes[_e186].executeNode?(r!==_e186&&(this._nodes[r]=this._nodes[_e186]),r++):this._nodes[_e186].outputs.forEach(function(e){_this29._allData[e]._from=-2;});this._nodes.splice(r,this._nodes.length-r);for(var _e187=0;_e187<this._allData.length;_e187++){var _r122=this._allData[_e187];void 0!==_r122._from&&-1!==_r122._from&&-2!==_r122._from&&(_r122._from=t[_r122._from]);for(var _e188=0;_e188<_r122._to.length;_e188++){if(!(_r122._to[_e188]>=0))throw new Error("Trying to update a removed node");_r122._to[_e188]=t[_r122._to[_e188]];}}e=0;var _loop7=function _loop7(_t97){if(-2!==_this29._allData[_t97].from||-1!==_this29._allOutputIndices.indexOf(_t97+e)){if(e>0){var _r123=-1;void 0!==_this29._allData[_t97].from&&-1!==_this29._allData[_t97].from?(_r123=_this29._nodes[_this29._allData[_t97].from].outputs.indexOf(_t97+e),-1!==_r123&&(_this29._nodes[_this29._allData[_t97].from].outputs[_r123]=_t97)):(_r123=_this29._allInputIndices.indexOf(_t97+e),-1!==_r123&&(_this29._allInputIndices[_r123]=_t97)),_this29._allData[_t97].to.forEach(function(n){_r123=_this29._nodes[n].inputs.indexOf(_t97+e),-1!==_r123&&(_this29._nodes[n].inputs[_r123]=_t97);}),0===_this29._allData[_t97].to.length&&(_r123=_this29._allOutputIndices.indexOf(_t97+e),-1!==_r123&&(_this29._allOutputIndices[_r123]=_t97));}}else e++,_this29._allData.splice(_t97,1),_t97--;_t96=_t97;};for(var _t96=0;_t96<this._allData.length;_t96++){_loop7(_t96);}}},{key:"deleteNode",value:function deleteNode(e){var t=this._nodes[e];if(t.outputs.length>1)for(var _e189=1;_e189<t.outputs.length;_e189++)if(this._allData[t.outputs[_e189]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");t.executeNode=!1;var r=t.inputs[0],n=t.outputs[0],i=this._allData[n].to;for(var _r124=0;_r124<t.inputs.length;_r124++){var _n30=this._allData[t.inputs[_r124]].to.indexOf(e);if(-1===_n30)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[t.inputs[_r124]].to.splice(_n30,1);}this._allData[n]._to=[];var o=this._allOutputIndices.indexOf(n);if(-1!==o&&(this._allOutputIndices[o]=r),i&&i.length>0){var _iterator34=_createForOfIteratorHelper(i),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var _e190=_step34.value;var _t98=this._nodes[_e190].inputs.indexOf(n);if(-1===_t98)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[_e190].inputs[_t98]=r,this._allData[r].to.push(_e190);}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}}}},{key:"removeAllDropoutNodes",value:function removeAllDropoutNodes(){var e=0;var _iterator35=_createForOfIteratorHelper(this._nodes),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var t=_step35.value;if("Dropout"===t.opType){if(1!==t.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==t.outputs.length&&2!==t.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===t.outputs.length&&0!==this._allData[t.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(e);}e++;}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}}},{key:"removeAllIdentityNodes",value:function removeAllIdentityNodes(){var e=0;var _iterator36=_createForOfIteratorHelper(this._nodes),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var t=_step36.value;"Identity"===t.opType&&this.deleteNode(e),e++;}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}}},{key:"isActivation",value:function isActivation(e){switch(e.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1;}}},{key:"fuseConvActivationNodes",value:function fuseConvActivationNodes(){var _iterator37=_createForOfIteratorHelper(this._nodes),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var e=_step37.value;if("Conv"===e.opType){var t=this._allData[e.outputs[0]]._to;if(1===t.length&&this.isActivation(this._nodes[t[0]])){var r=this._nodes[t[0]];if("Clip"===r.opType)if(1===r.inputs.length)try{e.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")]);}catch(_unused4){e.attributes.set("activation_params","floats",[wr,vr]);}else{if(!(r.inputs.length>=3&&void 0!==this._allData[r.inputs[1]].tensor&&void 0!==this._allData[r.inputs[2]].tensor))continue;e.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]]);}e.attributes.set("activation","string",r.opType),this.deleteNode(t[0]);}}}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}}}]);return ta;}();}),Op,ug,Fo,Ip=L(function(){Jn(),_p(),un(),Op=Nr(Ur()),fe(),ug=H.experimental.fbs,Fo=/*#__PURE__*/function(){function Fo(){_classCallCheck(this,Fo);}_createClass(Fo,[{key:"load",value:function load(e,t,r){if(!r)try{return void this.loadFromOnnxFormat(e,t);}catch(e){if(void 0!==r)throw e;}this.loadFromOrtFormat(e,t);}},{key:"loadFromOnnxFormat",value:function loadFromOnnxFormat(e,t){var r=Op.onnx.ModelProto.decode(e);if(ot.longToNumber(r.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(function(e){return{domain:e.domain,version:ot.longToNumber(e.version)};}),this._graph=na.from(r.graph,t);}},{key:"loadFromOrtFormat",value:function loadFromOrtFormat(e,t){var r=new O.ByteBuffer(e),n=ug.InferenceSession.getRootAsInferenceSession(r).model();if(ot.longToNumber(n.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(var _e191=0;_e191<n.opsetImportLength();_e191++){var _t99=n.opsetImport(_e191);this._opsets.push({domain:_t99===null||_t99===void 0?void 0:_t99.domain(),version:ot.longToNumber(_t99.version())});}this._graph=na.from(n.graph(),t);}},{key:"graph",get:function get(){return this._graph;}},{key:"opsets",get:function get(){return this._opsets;}}]);return Fo;}();}),Co,Sp=L(function(){xp(),wp(),dt(),Ip(),Co=/*#__PURE__*/function(){function Co(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Co);this._initialized=!1,this.backendHint=e.backendHint,this.profiler=Xn.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]};}_createClass(Co,[{key:"inputNames",get:function get(){return this._model.graph.getInputNames();}},{key:"outputNames",get:function get(){return this._model.graph.getOutputNames();}},{key:"startProfiling",value:function startProfiling(){this.profiler.start();}},{key:"endProfiling",value:function endProfiling(){this.profiler.stop();}},{key:"loadModel",value:function(){var _loadModel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38(e,t,r){var _this30=this;return _regeneratorRuntime().wrap(function _callee38$(_context39){while(1)switch(_context39.prev=_context39.next){case 0:_context39.next=2;return this.profiler.event("session","Session.loadModel",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(){var n,_t100,_r125,_r126,_n31;return _regeneratorRuntime().wrap(function _callee37$(_context38){while(1)switch(_context38.prev=_context38.next){case 0:_context38.next=2;return Qi(_this30.backendHint);case 2:n=_context38.sent;if(!(_this30.sessionHandler=n.createSessionHandler(_this30.context),_this30._model=new Fo(),"string"==typeof e)){_context38.next=20;break;}_t100=e.endsWith(".ort");if(!(_typeof(process)<"u"&&process.versions&&process.versions.node)){_context38.next=12;break;}_context38.next=8;return(void 0)(e);case 8:_r125=_context38.sent;_this30.initialize(_r125,_t100);_context38.next=18;break;case 12:_context38.next=14;return fetch(e);case 14:_context38.next=16;return _context38.sent.arrayBuffer();case 16:_r126=_context38.sent;_this30.initialize(new Uint8Array(_r126),_t100);case 18:_context38.next=21;break;case 20:if(ArrayBuffer.isView(e))_this30.initialize(e);else{_n31=new Uint8Array(e,t||0,r||e.byteLength);_this30.initialize(_n31);}case 21:case"end":return _context38.stop();}},_callee37);})));case 2:case"end":return _context39.stop();}},_callee38,this);}));function loadModel(_x45,_x46,_x47){return _loadModel.apply(this,arguments);}return loadModel;}()},{key:"initialize",value:function initialize(e,t){var _this31=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",function(){var r=_this31.sessionHandler.transformGraph?_this31.sessionHandler:void 0;_this31._model.load(e,r,t),_this31.sessionHandler.onGraphInitialized&&_this31.sessionHandler.onGraphInitialized(_this31._model.graph),_this31.initializeOps(_this31._model.graph),_this31._executionPlan=new Po(_this31._model.graph,_this31._ops,_this31.profiler);}),this._initialized=!0;}},{key:"run",value:function(){var _run2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40(e){var _this32=this;return _regeneratorRuntime().wrap(function _callee40$(_context41){while(1)switch(_context41.prev=_context41.next){case 0:if(this._initialized){_context41.next=2;break;}throw new Error("session not initialized yet");case 2:return _context41.abrupt("return",this.profiler.event("session","Session.run",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39(){var t,r;return _regeneratorRuntime().wrap(function _callee39$(_context40){while(1)switch(_context40.prev=_context40.next){case 0:t=_this32.normalizeAndValidateInputs(e);_context40.next=3;return _this32._executionPlan.execute(_this32.sessionHandler,t);case 3:r=_context40.sent;return _context40.abrupt("return",_this32.createOutput(r));case 5:case"end":return _context40.stop();}},_callee39);}))));case 3:case"end":return _context41.stop();}},_callee40,this);}));function run(_x48){return _run2.apply(this,arguments);}return run;}()},{key:"normalizeAndValidateInputs",value:function normalizeAndValidateInputs(e){var t=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==t.length)throw new Error("incorrect input array length: expected ".concat(t.length," but got ").concat(e.length));}else{if(e.size!==t.length)throw new Error("incorrect input map size: expected ".concat(t.length," but got ").concat(e.size));var r=new Array(e.size),n=0;for(var i=0;i<t.length;++i){var o=e.get(t[i]);if(!o)throw new Error("missing input tensor for: '".concat(name,"'"));r[n++]=o;}e=r;}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,e,!1);else{var _t101=this._model.graph.getInputIndices(),_r127=this._model.graph.getValues(),_n32=new Array(_t101.length);for(var _i29=0;_i29<_t101.length;++_i29){var _o22=_r127[_t101[_i29]];_n32[_i29]=_o22.type.shape.dims,this.context.graphInputTypes.push(_o22.type.tensorType),this.context.graphInputDims.push(e[_i29].dims);}this.validateInputTensorDims(_n32,e,!0);}return this.validateInputTensorTypes(this.context.graphInputTypes,e),e;}},{key:"validateInputTensorTypes",value:function validateInputTensorTypes(e,t){for(var r=0;r<t.length;r++){var n=e[r],i=t[r].type;if(n!==i)throw new Error("input tensor[".concat(r,"] check failed: expected type '").concat(n,"' but got ").concat(i));}}},{key:"validateInputTensorDims",value:function validateInputTensorDims(e,t,r){for(var n=0;n<t.length;n++){var i=e[n],o=t[n].dims;if(!this.compareTensorDims(i,o,r))throw new Error("input tensor[".concat(n,"] check failed: expected shape '[").concat(i.join(","),"]' but got [").concat(o.join(","),"]"));}}},{key:"compareTensorDims",value:function compareTensorDims(e,t,r){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n]&&(!r||0!==e[n]))return!1;return!0;}},{key:"createOutput",value:function createOutput(e){var t=this._model.graph.getOutputNames();if(e.length!==t.length)throw new Error("expected number of outputs do not match number of generated outputs");var r=new Map();for(var n=0;n<t.length;++n)r.set(t[n],e[n]);return r;}},{key:"initializeOps",value:function initializeOps(e){var t=e.getNodes();this._ops=new Array(t.length);for(var r=0;r<t.length;r++)this._ops[r]=this.sessionHandler.resolve(t[r],this._model.opsets,e);}}]);return Co;}();}),$o,Ap=L(function(){It(),_r(),$o=/*#__PURE__*/function(){function $o(e){_classCallCheck(this,$o);this.session=e,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames;}_createClass($o,[{key:"dispose",value:function(){var _dispose=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(){return _regeneratorRuntime().wrap(function _callee41$(_context42){while(1)switch(_context42.prev=_context42.next){case 0:case"end":return _context42.stop();}},_callee41);}));function dispose(){return _dispose.apply(this,arguments);}return dispose;}()},{key:"run",value:function(){var _run3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42(e,t,r){var n,_t102,_r128,i,o;return _regeneratorRuntime().wrap(function _callee42$(_context43){while(1)switch(_context43.prev=_context43.next){case 0:n=new Map();for(_t102 in e)if(Object.hasOwnProperty.call(e,_t102)){_r128=e[_t102];n.set(_t102,new Ce(_r128.dims,_r128.type,void 0,void 0,_r128.data));}_context43.next=4;return this.session.run(n);case 4:i=_context43.sent;o={};return _context43.abrupt("return",(i.forEach(function(e,t){o[t]=new Re(e.type,e.data,e.dims);}),o));case 7:case"end":return _context43.stop();}},_callee42,this);}));function run(_x49,_x50,_x51){return _run3.apply(this,arguments);}return run;}()},{key:"configure",value:function(){var _configure2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee43(e){return _regeneratorRuntime().wrap(function _callee43$(_context44){while(1)switch(_context44.prev=_context44.next){case 0:return _context44.abrupt("return","");case 1:case"end":return _context44.stop();}},_callee43);}));function configure(_x52){return _configure2.apply(this,arguments);}return configure;}()},{key:"auth",value:function(){var _auth2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee44(e){return _regeneratorRuntime().wrap(function _callee44$(_context45){while(1)switch(_context45.prev=_context45.next){case 0:return _context45.abrupt("return","");case 1:case"end":return _context45.stop();}},_callee44);}));function auth(_x53){return _auth2.apply(this,arguments);}return auth;}()},{key:"startProfiling",value:function startProfiling(){this.session.startProfiling();}},{key:"endProfiling",value:function endProfiling(){this.session.endProfiling();}}]);return $o;}();}),Ep={};kr(Ep,{onnxjsBackend:function onnxjsBackend(){return fg;}});var oa,fg,Pp=L(function(){Sp(),Ap(),fg=new(oa=/*#__PURE__*/function(){function oa(){_classCallCheck(this,oa);}_createClass(oa,[{key:"init",value:function(){var _init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee45(){return _regeneratorRuntime().wrap(function _callee45$(_context46){while(1)switch(_context46.prev=_context46.next){case 0:case"end":return _context46.stop();}},_callee45);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:"createInferenceSessionHandler",value:function(){var _createInferenceSessionHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee46(e,t){var r;return _regeneratorRuntime().wrap(function _callee46$(_context47){while(1)switch(_context47.prev=_context47.next){case 0:r=new Co(t);_context47.next=3;return r.loadModel(e);case 3:return _context47.abrupt("return",new $o(r));case 4:case"end":return _context47.stop();}},_callee46);}));function createInferenceSessionHandler(_x54,_x55){return _createInferenceSessionHandler.apply(this,arguments);}return createInferenceSessionHandler;}()}]);return oa;}())();}),ia={};kr(ia,{createReadStream:function createReadStream(){return Dp;},readFile:function readFile(){return cg;},readFileSync:function readFileSync(){return pg;}});var cg,pg,Dp,aa=L(function(){cg=void 0,pg=void 0,Dp=void 0;}),sa={};kr(sa,{join:function join(){return dg;}});var dg,ua=L(function(){dg=void 0;}),Cp=ye(function(e,t){var r=function(){var e=(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript?document.currentScript.src:void 0;return(typeof __filename==="undefined"?"undefined":_typeof(__filename))<"u"&&(e=e||__filename),function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r,n,i=t;i.ready=new Promise(function(e,t){r=e,n=t;});var o,a,s,u=Object.assign({},i),l="./this.program",h="object"==(typeof window==="undefined"?"undefined":_typeof(window)),c="function"==typeof importScripts,d="object"==_typeof(process)&&"object"==_typeof(process.versions)&&"string"==typeof process.versions.node,f="";if(d){var p=(aa(),fr(ia)),y=(ua(),fr(sa));f=c?y.dirname(f)+"/":__dirname+"/",o=function o(e,t){return e=D(e)?new URL(e):y.normalize(e),p.readFileSync(e,t?void 0:"utf8");},s=function s(e){return(e=o(e,!0)).buffer||(e=new Uint8Array(e)),e;},a=function a(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!0;e=D(e)?new URL(e):y.normalize(e),p.readFile(e,n?void 0:"utf8",function(e,i){e?r(e):t(n?i.buffer:i);});},!i.thisProgram&&1<process.argv.length&&(l=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),i.inspect=function(){return"[Emscripten Module object]";};}else(h||c)&&(c?f=self.location.href:(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript&&(f=document.currentScript.src),e&&(f=e),f=0!==f.indexOf("blob:")?f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=function o(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.send(null),t.responseText;},c&&(s=function s(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response);}),a=function a(e,t,r){var n=new XMLHttpRequest();n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r();},n.onerror=r,n.send(null);});var g=console.log.bind(console),m=console.error.bind(console);Object.assign(i,u),u=null,"object"!=(typeof WebAssembly==="undefined"?"undefined":_typeof(WebAssembly))&&$("no native wasm support detected");var w,b,_v2,x,_,I,A=!1;function S(){var e=w.buffer;i.HEAP8=b=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=_v2=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=x=new Int32Array(e),i.HEAPU32=_=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=I=new Float64Array(e);}var T=[],C=[],E=[],O=0,k=null,P=null;function $(e){throw m(e="Aborted("+e+")"),A=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e;}var R,B=function B(e){return e.startsWith("data:application/octet-stream;base64,");},D=function D(e){return e.startsWith("file://");};if(!B(R="ort-wasm.wasm")){var M=R;R=i.locateFile?i.locateFile(M,f):f+M;}function L(e){if(s)return s(e);throw"both async and sync fetching of the wasm failed";}function F(e,t,r){return function(e){if(h||c){if("function"==typeof fetch&&!D(e))return fetch(e,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer();})["catch"](function(){return L(e);});if(a)return new Promise(function(t,r){a(e,function(e){return t(new Uint8Array(e));},r);});}return Promise.resolve().then(function(){return L(e);});}(e).then(function(e){return WebAssembly.instantiate(e,t);}).then(function(e){return e;}).then(r,function(e){m("failed to asynchronously prepare wasm: ".concat(e)),$(e);});}var N,U={882112:function _(e,t,r,n){if(_typeof(i)>"u"||!i.Ga)return 1;if((e=H(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=i.Ga.get(e)))return 2;if((t>>>=0)+(r>>>=0)>e.byteLength)return 3;try{return _v2.set(e.subarray(t,t+r),n>>>0>>>0),0;}catch(_unused5){return 4;}}};function j(e){this.Da=e-24,this.Fa=function(e){_[this.Da+4>>>2>>>0]=e;},this.Ea=function(e){_[this.Da+8>>>2>>>0]=e;},this.La=function(e,t){this.Ma(),this.Fa(e),this.Ea(t);},this.Ma=function(){_[this.Da+16>>>2>>>0]=0;};}var G,z=(typeof TextDecoder==="undefined"?"undefined":_typeof(TextDecoder))<"u"?new TextDecoder("utf8"):void 0,V=function V(e,t,r){var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&z)return z.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&e[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i));}}else n+=String.fromCharCode(i);}return n;},H=function H(e,t){return(e>>>=0)?V(_v2,e,t):"";},W=function W(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3;}return t;},Y=function Y(e,t,r,n){if(!(0<n))return 0;var i=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o);if(127>=a){if(r>=n)break;t[r++>>>0]=a;}else{if(2047>=a){if(r+1>=n)break;t[r++>>>0]=192|a>>6;}else{if(65535>=a){if(r+2>=n)break;t[r++>>>0]=224|a>>12;}else{if(r+3>=n)break;t[r++>>>0]=240|a>>18,t[r++>>>0]=128|a>>12&63;}t[r++>>>0]=128|a>>6&63;}t[r++>>>0]=128|63&a;}}return t[r>>>0]=0,r-i;},K=function K(e){return e%4==0&&(e%100!=0||e%400==0);},X=[0,31,60,91,121,152,182,213,244,274,305,335],Z=[0,31,59,90,120,151,181,212,243,273,304,334],q=function q(e){var t=W(e)+1,r=pe(t);return r&&Y(e,_v2,r,t),r;},J=[],Q={},ee=function ee(){if(!G){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==(typeof navigator==="undefined"?"undefined":_typeof(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(e in Q)void 0===Q[e]?delete t[e]:t[e]=Q[e];var r=[];for(e in t)r.push("".concat(e,"=").concat(t[e]));G=r;}return G;},te=[null,[],[]],_re=function re(e){return(_re=function(){if("object"==(typeof crypto==="undefined"?"undefined":_typeof(crypto))&&"function"==typeof crypto.getRandomValues)return function(e){return crypto.getRandomValues(e);};if(d)try{var e=Ka("crypto");if(e.randomFillSync)return function(t){return e.randomFillSync(t);};var t=e.randomBytes;return function(e){return e.set(t(e.byteLength)),e;};}catch(_unused6){}$("initRandomDevice");}())(e);},ne=[31,29,31,30,31,30,31,31,30,31,30,31],ie=[31,28,31,30,31,30,31,31,30,31,30,31];function oe(e,t,r,n){function i(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e;}function o(e,t){return i(e,t,"0");}function a(e,t){function r(e){return 0>e?-1:0<e?1:0;}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n;}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30);}}function u(e){var t=e.ya;for(e=new Date(new Date(e.za+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(K(e.getFullYear())?ne:ie)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break;}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=a(t,e)?0>=a(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1;}e>>>=0,t>>>=0,r>>>=0;var l=_[(n>>>=0)+40>>>2>>>0];for(var h in n={Ja:x[n>>>2>>>0],Ia:x[n+4>>>2>>>0],Aa:x[n+8>>>2>>>0],Ca:x[n+12>>>2>>>0],Ba:x[n+16>>>2>>>0],za:x[n+20>>>2>>>0],xa:x[n+24>>>2>>>0],ya:x[n+28>>>2>>>0],Na:x[n+32>>>2>>>0],Ha:x[n+36>>>2>>>0],Ka:l?H(l):""},r=H(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(h,"g"),l[h]);var c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(h in l={"%a":function a(e){return c[e.xa].substring(0,3);},"%A":function A(e){return c[e.xa];},"%b":function b(e){return d[e.Ba].substring(0,3);},"%B":function B(e){return d[e.Ba];},"%C":function C(e){return o((e.za+1900)/100|0,2);},"%d":function d(e){return o(e.Ca,2);},"%e":function e(_e192){return i(_e192.Ca,2," ");},"%g":function g(e){return u(e).toString().substring(2);},"%G":function G(e){return u(e);},"%H":function H(e){return o(e.Aa,2);},"%I":function I(e){return 0==(e=e.Aa)?e=12:12<e&&(e-=12),o(e,2);},"%j":function j(e){for(var t=0,r=0;r<=e.Ba-1;t+=(K(e.za+1900)?ne:ie)[r++]);return o(e.Ca+t,3);},"%m":function m(e){return o(e.Ba+1,2);},"%M":function M(e){return o(e.Ia,2);},"%n":function n(){return"\n";},"%p":function p(e){return 0<=e.Aa&&12>e.Aa?"AM":"PM";},"%S":function S(e){return o(e.Ja,2);},"%t":function t(){return"\t";},"%u":function u(e){return e.xa||7;},"%U":function U(e){return o(Math.floor((e.ya+7-e.xa)/7),2);},"%V":function V(e){var t=Math.floor((e.ya+7-(e.xa+6)%7)/7);if(2>=(e.xa+371-e.ya-2)%7&&t++,t)53==t&&(4==(r=(e.xa+371-e.ya)%7)||3==r&&K(e.za)||(t=1));else{t=52;var r=(e.xa+7-e.ya-1)%7;(4==r||5==r&&K(e.za%400-1))&&t++;}return o(t,2);},"%w":function w(e){return e.xa;},"%W":function W(e){return o(Math.floor((e.ya+7-(e.xa+6)%7)/7),2);},"%y":function y(e){return(e.za+1900).toString().substring(2);},"%Y":function Y(e){return e.za+1900;},"%z":function z(e){return(0<=(e=e.Ha)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4);},"%Z":function Z(e){return e.Ka;},"%%":function _(){return"%";}},r=r.replace(/%%/g,"\0\0"),l)r.includes(h)&&(r=r.replace(new RegExp(h,"g"),l[h](n)));return h=function(e){var t=Array(W(e)+1);return Y(e,t,0,t.length),t;}(r=r.replace(/\0\0/g,"%")),h.length>t?0:(b.set(h,e>>>0),h.length-1);}var ae,se,ue=[],le=[],he=function he(e,t){if(!se){se=new WeakMap();var r=ae.length;if(se)for(var n=0;n<0+r;n++){var i=n,o=ue[i];o||(i>=ue.length&&(ue.length=i+1),ue[i]=o=ae.get(i)),(i=o)&&se.set(i,n);}}if(r=se.get(e)||0)return r;if(le.length)r=le.pop();else{try{ae.grow(1);}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e;}r=ae.length-1;}try{n=r,ae.set(n,e),ue[n]=ae.get(n);}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},o={parameters:[],results:"v"==t[0]?[]:[i[t[0]]]};for(var a=1;a<t.length;++a)o.parameters.push(i[t[a]]);t=new n(o,e);}else{for(n=[1],i=t.slice(0,1),t=t.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96),128>(a=t.length)?n.push(a):n.push(a%128|128,a>>7),a=0;a<t.length;++a)n.push(o[t[a]]);"v"==i?n.push(0):n.push(1,o[i]),t=[0,97,115,109,1,0,0,0,1],128>(i=n.length)?t.push(i):t.push(i%128|128,i>>7),t.push.apply(t,n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f;}n=r,ae.set(n,t),ue[n]=ae.get(n);}return se.set(e,r),r;},ce={a:function a(e,t,r){throw new j(e>>>=0).La(t>>>0,r>>>0),e;},e:function e(){return 0;},L:function L(){},A:function A(){},C:function C(){},u:function u(){return 0;},J:function J(){},E:function E(){},I:function I(){},k:function k(){},B:function B(){},y:function y(){},K:function K(){},z:function z(){},l:function l(){return 1;},o:function o(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),x[r>>>2>>>0]=e.getUTCSeconds(),x[r+4>>>2>>>0]=e.getUTCMinutes(),x[r+8>>>2>>>0]=e.getUTCHours(),x[r+12>>>2>>>0]=e.getUTCDate(),x[r+16>>>2>>>0]=e.getUTCMonth(),x[r+20>>>2>>>0]=e.getUTCFullYear()-1900,x[r+24>>>2>>>0]=e.getUTCDay(),x[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0;},p:function p(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),x[r>>>2>>>0]=e.getSeconds(),x[r+4>>>2>>>0]=e.getMinutes(),x[r+8>>>2>>>0]=e.getHours(),x[r+12>>>2>>>0]=e.getDate(),x[r+16>>>2>>>0]=e.getMonth(),x[r+20>>>2>>>0]=e.getFullYear()-1900,x[r+24>>>2>>>0]=e.getDay(),x[r+28>>>2>>>0]=(K(e.getFullYear())?X:Z)[e.getMonth()]+e.getDate()-1|0,x[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();x[r+32>>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t));},q:function q(e){e>>>=0;var t=new Date(x[e+20>>>2>>>0]+1900,x[e+16>>>2>>>0],x[e+12>>>2>>>0],x[e+8>>>2>>>0],x[e+4>>>2>>>0],x[e>>>2>>>0],0),r=x[e+32>>>2>>>0],n=t.getTimezoneOffset(),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),a=Math.min(o,i);return 0>r?x[e+32>>>2>>>0]=+(i!=o&&a==n):0<r!=(a==n)&&(i=Math.max(o,i),t.setTime(t.getTime()+6e4*((0<r?a:i)-n))),x[e+24>>>2>>>0]=t.getDay(),x[e+28>>>2>>>0]=(K(t.getFullYear())?X:Z)[t.getMonth()]+t.getDate()-1|0,x[e>>>2>>>0]=t.getSeconds(),x[e+4>>>2>>>0]=t.getMinutes(),x[e+8>>>2>>>0]=t.getHours(),x[e+12>>>2>>>0]=t.getDate(),x[e+16>>>2>>>0]=t.getMonth(),x[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(x[_fe()>>>2>>>0]=61,e=-1):e/=1e3,_ge((N=e,1<=+Math.abs(N)?0<N?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)),e>>>0;},m:function m(){return-52;},n:function n(){},w:function w(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT";}r>>>=0;var i=new Date().getFullYear(),o=new Date(i,0,1),a=new Date(i,6,1);i=o.getTimezoneOffset();var s=a.getTimezoneOffset();_[e>>>0>>>2>>>0]=60*Math.max(i,s),x[t>>>0>>>2>>>0]=+(i!=s),e=n(o),t=n(a),e=q(e),t=q(t),s<i?(_[r>>>2>>>0]=e,_[r+4>>>2>>>0]=t):(_[r>>>2>>>0]=t,_[r+4>>>2>>>0]=e);},d:function d(){$("");},D:function D(e,t,r){e>>>=0,t>>>=0,r>>>=0,J.length=0;for(var n;n=_v2[t++>>>0];){var i=105!=n;r+=(i&=112!=n)&&r%8?4:0,J.push(112==n?_[r>>>2>>>0]:105==n?x[r>>>2>>>0]:I[r>>>3>>>0]),r+=i?8:4;}return U[e].apply(null,J);},g:function g(){return Date.now();},x:function x(){return 4294901760;},b:function b(){return performance.now();},H:function H(e,t,r){return t>>>=0,_v2.copyWithin(e>>>0>>>0,t>>>0,t+(r>>>0)>>>0);},v:function v(e){e>>>=0;var t=_v2.length;if(4294901760<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var i=Math;n=Math.max(e,n);e:{i=(i.min.call(i,4294901760,n+(65536-n%65536)%65536)-w.buffer.byteLength+65535)/65536;try{w.grow(i),S();var o=1;break e;}catch(_unused7){}o=void 0;}if(o)return!0;}return!1;},F:function F(e,t){e>>>=0,t>>>=0;var r=0;return ee().forEach(function(n,i){var o=t+r;for(i=_[e+4*i>>>2>>>0]=o,o=0;o<n.length;++o)b[i++>>>0>>>0]=n.charCodeAt(o);b[i>>>0>>>0]=0,r+=n.length+1;}),0;},G:function G(e,t){e>>>=0,t>>>=0;var r=ee();_[e>>>2>>>0]=r.length;var n=0;return r.forEach(function(e){return n+=e.length+1;}),_[t>>>2>>>0]=n,0;},f:function f(){return 52;},j:function j(){return 52;},r:function r(){return 70;},i:function i(e,t,r,n){t>>>=0,r>>>=0,n>>>=0;for(var i=0,o=0;o<r;o++){var a=_[t>>>2>>>0],s=_[t+4>>>2>>>0];t+=8;for(var u=0;u<s;u++){var l=_v2[a+u>>>0],h=te[e];0===l||10===l?((1===e?g:m)(V(h,0)),h.length=0):h.push(l);}i+=s;}return _[n>>>2>>>0]=i,0;},s:function s(e,t){return e>>>=0,_re(_v2.subarray(e>>>0,e+(t>>>0)>>>0)),0;},t:oe,c:function c(e,t,r,n){return oe(e>>>0,t>>>0,r>>>0,n>>>0);},h:function h(e,t,r,n){var i=ae.length;e=new Uint8Array(_v2.slice(e+t,e+r));try{var o,a=new WebAssembly.Module(e),s=new WebAssembly.Instance(a,{env:{memory:w}});for(o in s.exports)he(s.exports[o]);return i<ae.length?i:n;}catch(e){return console.log(e),n;}}},de=function(){function e(e){return de=e.exports,de=function(){var e=de;e=Object.assign({},e);var t=function t(e){return function(){return e()>>>0;};},r=function r(e){return function(t){return e(t)>>>0;};};return e.pa=t(e.pa),e.qa=r(e.qa),e.ua=t(e.ua),e.wa=r(e.wa),e;}(),w=de.M,S(),ae=de.sa,C.unshift(de.N),0==--O&&(null!==k&&(clearInterval(k),k=null),P&&(e=P,P=null,e())),de;}var t={a:ce};if(O++,i.instantiateWasm)try{return i.instantiateWasm(t,e);}catch(e){m("Module.instantiateWasm callback failed with error: ".concat(e)),n(e);}return function(e,t){var r=R;return"function"!=typeof WebAssembly.instantiateStreaming||B(r)||D(r)||d||"function"!=typeof fetch?F(r,e,t):fetch(r,{credentials:"same-origin"}).then(function(n){return WebAssembly.instantiateStreaming(n,e).then(t,function(n){return m("wasm streaming compile failed: ".concat(n)),m("falling back to ArrayBuffer instantiation"),F(r,e,t);});});}(t,function(t){e(t.instance);})["catch"](n),{};}();i._OrtInit=function(e,t){return(i._OrtInit=de.O)(e,t);},i._OrtGetLastError=function(e,t){return(i._OrtGetLastError=de.P)(e,t);},i._OrtCreateSessionOptions=function(e,t,r,n,o,a,s,u,l,h){return(i._OrtCreateSessionOptions=de.Q)(e,t,r,n,o,a,s,u,l,h);},i._OrtAppendExecutionProvider=function(e,t){return(i._OrtAppendExecutionProvider=de.R)(e,t);},i._OrtAddFreeDimensionOverride=function(e,t,r){return(i._OrtAddFreeDimensionOverride=de.S)(e,t,r);},i._OrtAddSessionConfigEntry=function(e,t,r){return(i._OrtAddSessionConfigEntry=de.T)(e,t,r);},i._OrtReleaseSessionOptions=function(e){return(i._OrtReleaseSessionOptions=de.U)(e);},i._OrtCreateSession=function(e,t,r){return(i._OrtCreateSession=de.V)(e,t,r);},i._OrtReleaseSession=function(e){return(i._OrtReleaseSession=de.W)(e);},i._OrtGetInputOutputCount=function(e,t,r){return(i._OrtGetInputOutputCount=de.X)(e,t,r);},i._OrtGetInputName=function(e,t){return(i._OrtGetInputName=de.Y)(e,t);},i._OrtGetOutputName=function(e,t){return(i._OrtGetOutputName=de.Z)(e,t);},i._OrtFree=function(e){return(i._OrtFree=de._)(e);},i._OrtCreateTensor=function(e,t,r,n,o,a){return(i._OrtCreateTensor=de.$)(e,t,r,n,o,a);},i._OrtGetTensorData=function(e,t,r,n,o){return(i._OrtGetTensorData=de.aa)(e,t,r,n,o);},i._OrtReleaseTensor=function(e){return(i._OrtReleaseTensor=de.ba)(e);},i._OrtCreateRunOptions=function(e,t,r,n){return(i._OrtCreateRunOptions=de.ca)(e,t,r,n);},i._OrtAddRunConfigEntry=function(e,t,r){return(i._OrtAddRunConfigEntry=de.da)(e,t,r);},i._OrtReleaseRunOptions=function(e){return(i._OrtReleaseRunOptions=de.ea)(e);},i._OrtCreateBinding=function(e){return(i._OrtCreateBinding=de.fa)(e);},i._OrtBindInput=function(e,t,r){return(i._OrtBindInput=de.ga)(e,t,r);},i._OrtBindOutput=function(e,t,r,n){return(i._OrtBindOutput=de.ha)(e,t,r,n);},i._OrtClearBoundOutputs=function(e){return(i._OrtClearBoundOutputs=de.ia)(e);},i._OrtReleaseBinding=function(e){return(i._OrtReleaseBinding=de.ja)(e);},i._OrtRunWithBinding=function(e,t,r,n,o){return(i._OrtRunWithBinding=de.ka)(e,t,r,n,o);},i._OrtRun=function(e,t,r,n,o,a,s,u){return(i._OrtRun=de.la)(e,t,r,n,o,a,s,u);},i._OrtEndProfiling=function(e){return(i._OrtEndProfiling=de.ma)(e);},i._OrtConfigure=function(e,t){return(i._OrtConfigure=de.na)(e,t);},i._OrtAuth=function(e,t){return(i._OrtAuth=de.oa)(e,t);};var _fe=function fe(){return(_fe=de.pa)();},pe=i._malloc=function(e){return(pe=i._malloc=de.qa)(e);};i._free=function(e){return(i._free=de.ra)(e);};var ye,_ge=function ge(e){return(_ge=de.ta)(e);},_me=function me(){return(_me=de.ua)();},_we=function we(e){return(_we=de.va)(e);},_be=function be(e){return(_be=de.wa)(e);};function ve(){if(!(0<O)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;){var e=i.preRun.shift();T.unshift(e);}for(;0<T.length;)T.shift()(i);if(!(0<O||ye||(ye=!0,i.calledRun=!0,A))){for(;0<C.length;)C.shift()(i);for(r(i);0<E.length;)E.shift()(i);}}}return i.___start_em_js=882613,i.___stop_em_js=883225,i.stackAlloc=_be,i.stackSave=_me,i.stackRestore=_we,i.addFunction=he,i.UTF8ToString=H,i.stringToUTF8=function(e,t,r){return Y(e,_v2,t,r);},i.lengthBytesUTF8=W,P=function e(){ye||ve(),ye||(P=e);},ve(),t.ready;};}();"object"==_typeof(e)&&"object"==_typeof(t)?t.exports=r:"function"==typeof define&&define.amd&&define([],function(){return r;});}),$p=ye(function(){}),Bp=ye(function(){}),kp={};kr(kp,{cpus:function cpus(){return hg;}});var hg,Np=L(function(){hg=void 0;}),Gp=ye(function(e,t){var r=function(){var e=(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript?document.currentScript.src:void 0;return(typeof __filename==="undefined"?"undefined":_typeof(__filename))<"u"&&(e=e||__filename),function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};function r(){return E.buffer!=P.buffer&&L(),P;}function n(){return E.buffer!=P.buffer&&L(),$;}function i(){return E.buffer!=P.buffer&&L(),R;}function o(){return E.buffer!=P.buffer&&L(),B;}function a(){return E.buffer!=P.buffer&&L(),D;}var s,u,l=t;l.ready=new Promise(function(e,t){s=e,u=t;});var h,c,d,f=Object.assign({},l),p="./this.program",y=function y(e,t){throw t;},g="object"==(typeof window==="undefined"?"undefined":_typeof(window)),m="function"==typeof importScripts,w="object"==_typeof(process)&&"object"==_typeof(process.versions)&&"string"==typeof process.versions.node,b=l.ENVIRONMENT_IS_PTHREAD||!1,v="";function x(e){return l.locateFile?l.locateFile(e,v):v+e;}if(w){var _=(aa(),fr(ia)),I=(ua(),fr(sa));var _e193;v=m?I.dirname(v)+"/":__dirname+"/",h=function h(e,t){return e=X(e)?new URL(e):I.normalize(e),_.readFileSync(e,t?void 0:"utf8");},d=function d(e){return(e=h(e,!0)).buffer||(e=new Uint8Array(e)),e;},c=function c(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!0;e=X(e)?new URL(e):I.normalize(e),_.readFile(e,n?void 0:"utf8",function(e,i){e?r(e):t(n?i.buffer:i);});},!l.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),y=function y(e,t){throw process.exitCode=e,t;},l.inspect=function(){return"[Emscripten Module object]";};try{_e193=$p();}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e;}global.Worker=_e193.Worker;}else(g||m)&&(m?v=self.location.href:(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript&&(v=document.currentScript.src),_typeof(e)<"u"&&e&&(v=e),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(h=function h(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.send(null),t.responseText;},m&&(d=function d(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response);}),c=function c(e,t,r){var n=new XMLHttpRequest();n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r();},n.onerror=r,n.send(null);}));w&&(typeof performance==="undefined"?"undefined":_typeof(performance))>"u"&&(global.performance=Bp().performance);var A=console.log.bind(console),S=console.error.bind(console);w&&(A=function A(){for(var _len=arguments.length,e=new Array(_len),_key=0;_key<_len;_key++){e[_key]=arguments[_key];}return _.writeSync(1,e.join(" ")+"\n");},S=function S(){for(var _len2=arguments.length,e=new Array(_len2),_key2=0;_key2<_len2;_key2++){e[_key2]=arguments[_key2];}return _.writeSync(2,e.join(" ")+"\n");});var T=A,C=S;Object.assign(l,f),f=null,"object"!=(typeof WebAssembly==="undefined"?"undefined":_typeof(WebAssembly))&&W("no native wasm support detected");var E,O,k,P,$,R,B,D,M=!1;function L(){var e=E.buffer;l.HEAP8=P=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAPU8=$=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAP32=R=new Int32Array(e),l.HEAPU32=B=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=D=new Float64Array(e);}var F=16777216;if(b)E=l.wasmMemory;else if(l.wasmMemory)E=l.wasmMemory;else if(!((E=new WebAssembly.Memory({initial:F/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw C("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&C("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");L(),F=E.buffer.byteLength;var N=[],U=[],j=[],G=0,z=null,V=null;function H(){if(0==--G&&(null!==z&&(clearInterval(z),z=null),V)){var e=V;V=null,e();}}function W(e){throw C(e="Aborted("+e+")"),M=!0,k=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),u(e),e;}var Y,K=function K(e){return e.startsWith("data:application/octet-stream;base64,");},X=function X(e){return e.startsWith("file://");};function Z(e){if(d)return d(e);throw"both async and sync fetching of the wasm failed";}function q(e,t,r){return function(e){if(g||m){if("function"==typeof fetch&&!X(e))return fetch(e,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer();})["catch"](function(){return Z(e);});if(c)return new Promise(function(t,r){c(e,function(e){return t(new Uint8Array(e));},r);});}return Promise.resolve().then(function(){return Z(e);});}(e).then(function(e){return WebAssembly.instantiate(e,t);}).then(function(e){return e;}).then(r,function(e){C("failed to asynchronously prepare wasm: ".concat(e)),W(e);});}K(Y="ort-wasm-threaded.wasm")||(Y=x(Y));var J,Q={886500:function _(e,t,r,i){if(_typeof(l)>"u"||!l.hb)return 1;if((e=ae(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=l.hb.get(e)))return 2;if(i>>>=0,(t>>>=0)+(r>>>=0)>e.byteLength)return 3;try{return n().set(e.subarray(t,t+r),i>>>0),0;}catch(_unused8){return 4;}}};function ee(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e;}var te=function te(e){e.terminate(),e.onmessage=function(){};},re=function re(e){0==fe.Ta.length&&(de(),fe.bb(fe.Ta[0]));var t=fe.Ta.pop();if(!t)return 6;fe.Ua.push(t),fe.Qa[e.Sa]=t,t.Sa=e.Sa;var r={cmd:"run",start_routine:e.ob,arg:e.lb,pthread_ptr:e.Sa};return w&&t.unref(),t.postMessage(r,e.ub),0;},ne=0,ie=(typeof TextDecoder==="undefined"?"undefined":_typeof(TextDecoder))<"u"?new TextDecoder("utf8"):void 0,oe=function oe(e,t,r){var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&ie)return ie.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&e[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i));}}else n+=String.fromCharCode(i);}return n;},ae=function ae(e,t){return(e>>>=0)?oe(n(),e,t):"";},se=function se(e){var t=_St();return e=e(),_Tt(t),e;};function ue(e,t){var r=arguments.length-2,n=arguments;return se(function(){for(var i=_Ct(8*r),o=i>>>3,s=0;s<r;s++){var u=n[2+s];a()[o+s>>>0]=u;}return _bt(e,r,i,t);});}function le(e){var _l$onExit;if(b)return ue(0,1,e);k=e,0<ne||(fe.pb(),(_l$onExit=l.onExit)!==null&&_l$onExit!==void 0&&_l$onExit.call(l,e),M=!0),y(e,new ee(e));}var he=function he(e){if(k=e,b)throw ye(e),"unwind";le(e);};function ce(){for(var e=l.numThreads;e--;)de();N.unshift(function(){G++,function(e){b?e():Promise.all(fe.Ta.map(fe.bb)).then(e);}(function(){return H();});});}function de(){var e=x("ort-wasm-threaded.worker.js");e=new Worker(e),fe.Ta.push(e);}var fe={Ta:[],Ua:[],gb:[],Qa:{},$a:function $a(){b?(fe.receiveObjectTransfer=fe.nb,fe.threadInitTLS=fe.fb,fe.setExitStatus=fe.eb):ce();},eb:function eb(e){return k=e;},xb:["$terminateWorker"],pb:function pb(){var _iterator38=_createForOfIteratorHelper(fe.Ua),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var e=_step38.value;te(e);}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}var _iterator39=_createForOfIteratorHelper(fe.Ta),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){e=_step39.value;te(e);}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}fe.Ta=[],fe.Ua=[],fe.Qa=[];},cb:function cb(e){var t=e.Sa;delete fe.Qa[t],fe.Ta.push(e),fe.Ua.splice(fe.Ua.indexOf(e),1),e.Sa=0,_vt(t);},nb:function nb(){},fb:function fb(){fe.gb.forEach(function(e){return e();});},bb:function bb(t){return new Promise(function(r){t.onmessage=function(e){var n=(e=e.data).cmd;if(e.targetThread&&e.targetThread!=yt()){var i=fe.Qa[e.targetThread];i?i.postMessage(e,e.transferList):C("Internal error! Worker sent a message \"".concat(n,"\" to target pthread ").concat(e.targetThread,", but that thread no longer exists!"));}else"checkMailbox"===n?Ne():"spawnThread"===n?re(e):"cleanupThread"===n?fe.cb(fe.Qa[e.thread]):"killThread"===n?(e=e.thread,n=fe.Qa[e],delete fe.Qa[e],te(n),_vt(e),fe.Ua.splice(fe.Ua.indexOf(n),1),n.Sa=0):"cancelThread"===n?fe.Qa[e.thread].postMessage({cmd:"cancel"}):"loaded"===n?(t.loaded=!0,w&&!t.Sa&&t.unref(),r(t)):"alert"===n?alert("Thread ".concat(e.threadId,": ").concat(e.text)):"setimmediate"===e.target?t.postMessage(e):"callHandler"===n?l[e.handler].apply(l,_toConsumableArray(e.args)):n&&C("worker sent an unknown command ".concat(n));},t.onerror=function(e){throw C("worker sent an error! ".concat(e.filename,":").concat(e.lineno,": ").concat(e.message)),e;},w&&(t.on("message",function(e){return t.onmessage({data:e});}),t.on("error",function(e){return t.onerror(e);}));var n,i=[];for(var _i30=0,_arr=["onExit"];_i30<_arr.length;_i30++){n=_arr[_i30];l.hasOwnProperty(n)&&i.push(n);}t.postMessage({cmd:"load",handlers:i,urlOrBlob:l.mainScriptUrlOrBlob||e,wasmMemory:E,wasmModule:O});});}};l.PThread=fe;var pe=function pe(e){for(;0<e.length;)e.shift()(l);};function ye(e){if(b)return ue(1,0,e);he(e);}l.establishStackSpace=function(){var e=yt(),t=o()[e+52>>>2>>>0];e=o()[e+56>>>2>>>0],_At(t,t-e),_Tt(t);};var ge,me=[],we=function we(e){var t=me[e];return t||(e>=me.length&&(me.length=e+1),me[e]=t=ge.get(e)),t;};function be(e){this.Za=e-24,this.kb=function(e){o()[this.Za+4>>>2>>>0]=e;},this.jb=function(e){o()[this.Za+8>>>2>>>0]=e;},this.$a=function(e,t){this.ib(),this.kb(e),this.jb(t);},this.ib=function(){o()[this.Za+16>>>2>>>0]=0;};}l.invokeEntryPoint=function(e,t){e=we(e)(t),0<ne?fe.eb(e):xt(e);};function ve(e,t,r,n){return b?ue(2,1,e,t,r,n):xe(e,t,r,n);}function xe(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,(typeof SharedArrayBuffer==="undefined"?"undefined":_typeof(SharedArrayBuffer))>"u")return C("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var i=[];return b&&0===i.length?ve(e,t,r,n):(e={ob:r,Sa:e,lb:n,ub:i},b?(e.wb="spawnThread",postMessage(e,i),0):re(e));}function _e(e,t,r){return b?ue(3,1,e,t,r):0;}function Ie(e,t){if(b)return ue(4,1,e,t);}var Ae=function Ae(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3;}return t;},Se=function Se(e,t,r,n){if(!(0<n))return 0;var i=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o);if(127>=a){if(r>=n)break;t[r++>>>0]=a;}else{if(2047>=a){if(r+1>=n)break;t[r++>>>0]=192|a>>6;}else{if(65535>=a){if(r+2>=n)break;t[r++>>>0]=224|a>>12;}else{if(r+3>=n)break;t[r++>>>0]=240|a>>18,t[r++>>>0]=128|a>>12&63;}t[r++>>>0]=128|a>>6&63;}t[r++>>>0]=128|63&a;}}return t[r>>>0]=0,r-i;},Te=function Te(e,t,r){return Se(e,n(),t,r);};function Ce(e,t){if(b)return ue(5,1,e,t);}function Ee(e,t,r){if(b)return ue(6,1,e,t,r);}function Oe(e,t,r){return b?ue(7,1,e,t,r):0;}function ke(e,t){if(b)return ue(8,1,e,t);}function Pe(e,t,r){if(b)return ue(9,1,e,t,r);}function $e(e,t,r,n){if(b)return ue(10,1,e,t,r,n);}function Re(e,t,r,n){if(b)return ue(11,1,e,t,r,n);}function Be(e,t,r,n){if(b)return ue(12,1,e,t,r,n);}function De(e){if(b)return ue(13,1,e);}function Me(e,t){if(b)return ue(14,1,e,t);}function Le(e,t,r){if(b)return ue(15,1,e,t,r);}function Fe(e){e>>>=0,"function"==typeof Atomics.vb&&(Atomics.vb(i(),e>>>2,e).value.then(Ne),e+=128,Atomics.store(i(),e>>>2,1));}l.__emscripten_thread_mailbox_await=Fe;var Ne=function Ne(){var e=yt();if(e&&(Fe(e),e=_t104,!M))try{if(e(),!(0<ne))try{b?xt(k):he(k);}catch(e){e instanceof ee||"unwind"==e||y(1,e);}}catch(e){e instanceof ee||"unwind"==e||y(1,e);}};l.checkMailbox=Ne;var Ue=[],je=function je(e){return e%4==0&&(e%100!=0||e%400==0);},Ge=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334];function Ve(e,t,r,n,i,o,a,s){return b?ue(16,1,e,t,r,n,i,o,a,s):-52;}function He(e,t,r,n,i,o,a){if(b)return ue(17,1,e,t,r,n,i,o,a);}var We,Ye=function Ye(e){var t=Ae(e)+1,r=gt(t);return r&&Te(e,r,t),r;},Ke=[],Xe={},Ze=function Ze(){if(!We){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==(typeof navigator==="undefined"?"undefined":_typeof(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(e in Xe)void 0===Xe[e]?delete t[e]:t[e]=Xe[e];var r=[];for(e in t)r.push("".concat(e,"=").concat(t[e]));We=r;}return We;};function qe(e,t){if(b)return ue(18,1,e,t);e>>>=0,t>>>=0;var n=0;return Ze().forEach(function(i,a){var s=t+n;for(a=o()[e+4*a>>>2>>>0]=s,s=0;s<i.length;++s)r()[a++>>>0>>>0]=i.charCodeAt(s);r()[a>>>0>>>0]=0,n+=i.length+1;}),0;}function Je(e,t){if(b)return ue(19,1,e,t);e>>>=0,t>>>=0;var r=Ze();o()[e>>>2>>>0]=r.length;var n=0;return r.forEach(function(e){return n+=e.length+1;}),o()[t>>>2>>>0]=n,0;}function Qe(e){return b?ue(20,1,e):52;}function et(e,t,r,n){return b?ue(21,1,e,t,r,n):52;}function tt(e,t,r,n,i){return b?ue(22,1,e,t,r,n,i):70;}var rt=[null,[],[]];function nt(e,t,r,i){if(b)return ue(23,1,e,t,r,i);t>>>=0,r>>>=0,i>>>=0;for(var a=0,s=0;s<r;s++){var u=o()[t>>>2>>>0],l=o()[t+4>>>2>>>0];t+=8;for(var h=0;h<l;h++){var c=n()[u+h>>>0],d=rt[e];0===c||10===c?((1===e?T:C)(oe(d,0)),d.length=0):d.push(c);}a+=l;}return o()[i>>>2>>>0]=a,0;}var _it=function it(e){return(_it=function(){if("object"==(typeof crypto==="undefined"?"undefined":_typeof(crypto))&&"function"==typeof crypto.getRandomValues)return function(e){return e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e;};if(w)try{var e=Ka("crypto");if(e.randomFillSync)return function(t){return e.randomFillSync(t);};var t=e.randomBytes;return function(e){return e.set(t(e.byteLength)),e;};}catch(_unused9){}W("initRandomDevice");}())(e);},ot=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function st(e,t,n,a){function s(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e;}function u(e,t){return s(e,t,"0");}function l(e,t){function r(e){return 0>e?-1:0<e?1:0;}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n;}function h(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30);}}function c(e){var t=e.Va;for(e=new Date(new Date(e.Wa+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(je(e.getFullYear())?ot:at)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break;}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));}return r=new Date(e.getFullYear()+1,0,4),t=h(new Date(e.getFullYear(),0,4)),r=h(r),0>=l(t,e)?0>=l(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1;}e>>>=0,t>>>=0,n>>>=0,a>>>=0;var d=o()[a+40>>>2>>>0];for(var f in a={sb:i()[a>>>2>>>0],rb:i()[a+4>>>2>>>0],Xa:i()[a+8>>>2>>>0],ab:i()[a+12>>>2>>>0],Ya:i()[a+16>>>2>>>0],Wa:i()[a+20>>>2>>>0],Ra:i()[a+24>>>2>>>0],Va:i()[a+28>>>2>>>0],yb:i()[a+32>>>2>>>0],qb:i()[a+36>>>2>>>0],tb:d?ae(d):""},n=ae(n),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(f,"g"),d[f]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),y="January February March April May June July August September October November December".split(" ");for(f in d={"%a":function a(e){return p[e.Ra].substring(0,3);},"%A":function A(e){return p[e.Ra];},"%b":function b(e){return y[e.Ya].substring(0,3);},"%B":function B(e){return y[e.Ya];},"%C":function C(e){return u((e.Wa+1900)/100|0,2);},"%d":function d(e){return u(e.ab,2);},"%e":function e(_e194){return s(_e194.ab,2," ");},"%g":function g(e){return c(e).toString().substring(2);},"%G":function G(e){return c(e);},"%H":function H(e){return u(e.Xa,2);},"%I":function I(e){return 0==(e=e.Xa)?e=12:12<e&&(e-=12),u(e,2);},"%j":function j(e){for(var t=0,r=0;r<=e.Ya-1;t+=(je(e.Wa+1900)?ot:at)[r++]);return u(e.ab+t,3);},"%m":function m(e){return u(e.Ya+1,2);},"%M":function M(e){return u(e.rb,2);},"%n":function n(){return"\n";},"%p":function p(e){return 0<=e.Xa&&12>e.Xa?"AM":"PM";},"%S":function S(e){return u(e.sb,2);},"%t":function t(){return"\t";},"%u":function u(e){return e.Ra||7;},"%U":function U(e){return u(Math.floor((e.Va+7-e.Ra)/7),2);},"%V":function V(e){var t=Math.floor((e.Va+7-(e.Ra+6)%7)/7);if(2>=(e.Ra+371-e.Va-2)%7&&t++,t)53==t&&(4==(r=(e.Ra+371-e.Va)%7)||3==r&&je(e.Wa)||(t=1));else{t=52;var r=(e.Ra+7-e.Va-1)%7;(4==r||5==r&&je(e.Wa%400-1))&&t++;}return u(t,2);},"%w":function w(e){return e.Ra;},"%W":function W(e){return u(Math.floor((e.Va+7-(e.Ra+6)%7)/7),2);},"%y":function y(e){return(e.Wa+1900).toString().substring(2);},"%Y":function Y(e){return e.Wa+1900;},"%z":function z(e){return(0<=(e=e.qb)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4);},"%Z":function Z(e){return e.tb;},"%%":function _(){return"%";}},n=n.replace(/%%/g,"\0\0"),d)n.includes(f)&&(n=n.replace(new RegExp(f,"g"),d[f](a)));return f=function(e){var t=Array(Ae(e)+1);return Se(e,t,0,t.length),t;}(n=n.replace(/\0\0/g,"%")),f.length>t?0:(function(e,t){r().set(e,t>>>0);}(f,e),f.length-1);}var ut,lt=[],ht=function ht(e,t){if(!ut){ut=new WeakMap();var r=ge.length;if(ut)for(var n=0;n<0+r;n++){var i=we(n);i&&ut.set(i,n);}}if(r=ut.get(e)||0)return r;if(lt.length)r=lt.pop();else{try{ge.grow(1);}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e;}r=ge.length-1;}try{n=r,ge.set(n,e),me[n]=ge.get(n);}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var o={parameters:[],results:"v"==t[0]?[]:[i[t[0]]]},a=1;a<t.length;++a)o.parameters.push(i[t[a]]);t=new n(o,e);}else{for(n=[1],i=t.slice(0,1),t=t.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96),128>(a=t.length)?n.push(a):n.push(a%128|128,a>>7),a=0;a<t.length;++a)n.push(o[t[a]]);"v"==i?n.push(0):n.push(1,o[i]),t=[0,97,115,109,1,0,0,0,1],128>(i=n.length)?t.push(i):t.push(i%128|128,i>>7),t.push.apply(t,n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f;}n=r,ge.set(n,t),me[n]=ge.get(n);}return ut.set(e,r),r;};fe.$a();var ct=[le,ye,ve,_e,Ie,Ce,Ee,Oe,ke,Pe,$e,Re,Be,De,Me,Le,Ve,He,qe,Je,Qe,et,tt,nt],dt={b:function b(e,t,r){throw new be(e>>>=0).$a(t>>>0,r>>>0),e;},O:function O(e){mt(e>>>0,!m,1,!g,131072,!1),fe.fb();},m:function m(e){e>>>=0,b?postMessage({cmd:"cleanupThread",thread:e}):fe.cb(fe.Qa[e]);},J:xe,h:_e,U:Ie,F:Ce,H:Ee,y:Oe,S:ke,L:Pe,R:$e,o:Re,G:Be,D:De,T:Me,E:Le,p:function p(){return 1;},B:function B(e,t){(e>>>=0)==t>>>0?setTimeout(function(){return Ne();}):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=fe.Qa[e])&&e.postMessage({cmd:"checkMailbox"});},K:function K(e,t,r,n){t>>>=0,Ue.length=r,n=n>>>0>>>3;for(var i=0;i<r;i++)Ue[i]=a()[n+i>>>0];return e=0>e?Q[-e-1]:ct[e],fe.mb=t,t=e.apply(null,Ue),fe.mb=0,t;},M:Fe,W:function W(e){w&&fe.Qa[e>>>0].ref();},s:function s(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),i()[r>>>2>>>0]=e.getUTCSeconds(),i()[r+4>>>2>>>0]=e.getUTCMinutes(),i()[r+8>>>2>>>0]=e.getUTCHours(),i()[r+12>>>2>>>0]=e.getUTCDate(),i()[r+16>>>2>>>0]=e.getUTCMonth(),i()[r+20>>>2>>>0]=e.getUTCFullYear()-1900,i()[r+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,i()[r+28>>>2>>>0]=e;},t:function t(e,_t103,r){e=_t103+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*_t103:NaN,r>>>=0,e=new Date(1e3*e),i()[r>>>2>>>0]=e.getSeconds(),i()[r+4>>>2>>>0]=e.getMinutes(),i()[r+8>>>2>>>0]=e.getHours(),i()[r+12>>>2>>>0]=e.getDate(),i()[r+16>>>2>>>0]=e.getMonth(),i()[r+20>>>2>>>0]=e.getFullYear()-1900,i()[r+24>>>2>>>0]=e.getDay(),_t103=(je(e.getFullYear())?Ge:ze)[e.getMonth()]+e.getDate()-1|0,i()[r+28>>>2>>>0]=_t103,i()[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),_t103=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(_t103!=n&&e.getTimezoneOffset()==Math.min(n,_t103)),i()[r+32>>>2>>>0]=e;},u:function u(e){e>>>=0;var t=new Date(i()[e+20>>>2>>>0]+1900,i()[e+16>>>2>>>0],i()[e+12>>>2>>>0],i()[e+8>>>2>>>0],i()[e+4>>>2>>>0],i()[e>>>2>>>0],0),r=i()[e+32>>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(a,o);return 0>r?i()[e+32>>>2>>>0]=+(o!=a&&s==n):0<r!=(s==n)&&(o=Math.max(a,o),t.setTime(t.getTime()+6e4*((0<r?s:o)-n))),i()[e+24>>>2>>>0]=t.getDay(),r=(je(t.getFullYear())?Ge:ze)[t.getMonth()]+t.getDate()-1|0,i()[e+28>>>2>>>0]=r,i()[e>>>2>>>0]=t.getSeconds(),i()[e+4>>>2>>>0]=t.getMinutes(),i()[e+8>>>2>>>0]=t.getHours(),i()[e+12>>>2>>>0]=t.getDate(),i()[e+16>>>2>>>0]=t.getMonth(),i()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(i()[_pt()>>>2>>>0]=61,e=-1):e/=1e3,_It((J=e,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)),e>>>0;},q:Ve,r:He,A:function A(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT";}e>>>=0,t>>>=0,r>>>=0;var a=new Date().getFullYear(),s=new Date(a,0,1),u=new Date(a,6,1);a=s.getTimezoneOffset();var l=u.getTimezoneOffset(),h=Math.max(a,l);o()[e>>>2>>>0]=60*h,i()[t>>>2>>>0]=+(a!=l),e=n(s),t=n(u),e=Ye(e),t=Ye(t),l<a?(o()[r>>>2>>>0]=e,o()[r+4>>>2>>>0]=t):(o()[r>>>2>>>0]=t,o()[r+4>>>2>>>0]=e);},c:function c(){W("");},N:function N(e,t,r){e>>>=0,t>>>=0,r>>>=0,Ke.length=0;for(var s;s=n()[t++>>>0];){var u=105!=s;r+=(u&=112!=s)&&r%8?4:0,Ke.push(112==s?o()[r>>>2>>>0]:105==s?i()[r>>>2>>>0]:a()[r>>>3>>>0]),r+=u?8:4;}return Q[e].apply(null,Ke);},n:function n(){},i:function i(){return Date.now();},V:function V(){throw ne+=1,"unwind";},C:function C(){return 4294901760;},e:function e(){return performance.timeOrigin+performance.now();},f:function f(){return w?(Np(),fr(kp)).cpus().length:navigator.hardwareConcurrency;},z:function z(e){e>>>=0;var t=n().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var o=Math;i=Math.max(e,i);e:{o=(o.min.call(o,4294901760,i+(65536-i%65536)%65536)-E.buffer.byteLength+65535)/65536;try{E.grow(o),L();var a=1;break e;}catch(_unused10){}a=void 0;}if(a)return!0;}return!1;},P:qe,Q:Je,I:he,g:Qe,l:et,v:tt,k:nt,w:function w(e,t){return e>>>=0,t>>>=0,_it(n().subarray(e>>>0,e+t>>>0)),0;},a:E||l.wasmMemory,x:st,d:function d(e,t,r,n){return st(e>>>0,t>>>0,r>>>0,n>>>0);},j:function j(e,t,r,i){var o=ge.length;e=new Uint8Array(n().slice(e+t,e+r));try{var a,s=new WebAssembly.Module(e),u=new WebAssembly.Instance(s,{env:{memory:E}});for(a in u.exports)ht(u.exports[a]);return o<ge.length?o:i;}catch(e){return console.log(e),i;}}},ft=function(){function e(e,t){return ft=e.exports,ft=function(){var e=ft;e=Object.assign({},e);var t=function t(e){return function(){return e()>>>0;};},r=function r(e){return function(t){return e(t)>>>0;};};return e.za=t(e.za),e.Aa=t(e.Aa),e.Ba=r(e.Ba),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Na=t(e.Na),e.Pa=r(e.Pa),e;}(),fe.gb.push(ft.Da),ge=ft.Ea,U.unshift(ft.X),O=t,H(),ft;}var t={a:dt};if(G++,l.instantiateWasm)try{return l.instantiateWasm(t,e);}catch(e){C("Module.instantiateWasm callback failed with error: ".concat(e)),u(e);}return function(e,t){var r=Y;return"function"!=typeof WebAssembly.instantiateStreaming||K(r)||X(r)||w||"function"!=typeof fetch?q(r,e,t):fetch(r,{credentials:"same-origin"}).then(function(n){return WebAssembly.instantiateStreaming(n,e).then(t,function(n){return C("wasm streaming compile failed: ".concat(n)),C("falling back to ArrayBuffer instantiation"),q(r,e,t);});});}(t,function(t){e(t.instance,t.module);})["catch"](u),{};}();l._OrtInit=function(e,t){return(l._OrtInit=ft.Y)(e,t);},l._OrtGetLastError=function(e,t){return(l._OrtGetLastError=ft.Z)(e,t);},l._OrtCreateSessionOptions=function(e,t,r,n,i,o,a,s,u,h){return(l._OrtCreateSessionOptions=ft._)(e,t,r,n,i,o,a,s,u,h);},l._OrtAppendExecutionProvider=function(e,t){return(l._OrtAppendExecutionProvider=ft.$)(e,t);},l._OrtAddFreeDimensionOverride=function(e,t,r){return(l._OrtAddFreeDimensionOverride=ft.aa)(e,t,r);},l._OrtAddSessionConfigEntry=function(e,t,r){return(l._OrtAddSessionConfigEntry=ft.ba)(e,t,r);},l._OrtReleaseSessionOptions=function(e){return(l._OrtReleaseSessionOptions=ft.ca)(e);},l._OrtCreateSession=function(e,t,r){return(l._OrtCreateSession=ft.da)(e,t,r);},l._OrtReleaseSession=function(e){return(l._OrtReleaseSession=ft.ea)(e);},l._OrtGetInputOutputCount=function(e,t,r){return(l._OrtGetInputOutputCount=ft.fa)(e,t,r);},l._OrtGetInputName=function(e,t){return(l._OrtGetInputName=ft.ga)(e,t);},l._OrtGetOutputName=function(e,t){return(l._OrtGetOutputName=ft.ha)(e,t);},l._OrtFree=function(e){return(l._OrtFree=ft.ia)(e);},l._OrtCreateTensor=function(e,t,r,n,i,o){return(l._OrtCreateTensor=ft.ja)(e,t,r,n,i,o);},l._OrtGetTensorData=function(e,t,r,n,i){return(l._OrtGetTensorData=ft.ka)(e,t,r,n,i);},l._OrtReleaseTensor=function(e){return(l._OrtReleaseTensor=ft.la)(e);},l._OrtCreateRunOptions=function(e,t,r,n){return(l._OrtCreateRunOptions=ft.ma)(e,t,r,n);},l._OrtAddRunConfigEntry=function(e,t,r){return(l._OrtAddRunConfigEntry=ft.na)(e,t,r);},l._OrtReleaseRunOptions=function(e){return(l._OrtReleaseRunOptions=ft.oa)(e);},l._OrtCreateBinding=function(e){return(l._OrtCreateBinding=ft.pa)(e);},l._OrtBindInput=function(e,t,r){return(l._OrtBindInput=ft.qa)(e,t,r);},l._OrtBindOutput=function(e,t,r,n){return(l._OrtBindOutput=ft.ra)(e,t,r,n);},l._OrtClearBoundOutputs=function(e){return(l._OrtClearBoundOutputs=ft.sa)(e);},l._OrtReleaseBinding=function(e){return(l._OrtReleaseBinding=ft.ta)(e);},l._OrtRunWithBinding=function(e,t,r,n,i){return(l._OrtRunWithBinding=ft.ua)(e,t,r,n,i);},l._OrtRun=function(e,t,r,n,i,o,a,s){return(l._OrtRun=ft.va)(e,t,r,n,i,o,a,s);},l._OrtEndProfiling=function(e){return(l._OrtEndProfiling=ft.wa)(e);},l._OrtConfigure=function(e,t){return(l._OrtConfigure=ft.xa)(e,t);},l._OrtAuth=function(e,t){return(l._OrtAuth=ft.ya)(e,t);};var _pt=function pt(){return(_pt=ft.za)();},yt=l._pthread_self=function(){return(yt=l._pthread_self=ft.Aa)();},gt=l._malloc=function(e){return(gt=l._malloc=ft.Ba)(e);};l._free=function(e){return(l._free=ft.Ca)(e);},l.__emscripten_tls_init=function(){return(l.__emscripten_tls_init=ft.Da)();};var mt=l.__emscripten_thread_init=function(e,t,r,n,i,o){return(mt=l.__emscripten_thread_init=ft.Fa)(e,t,r,n,i,o);};l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=ft.Ga)();};var wt,_bt=function bt(e,t,r,n){return(_bt=ft.Ha)(e,t,r,n);},_vt=function vt(e){return(_vt=ft.Ia)(e);},xt=l.__emscripten_thread_exit=function(e){return(xt=l.__emscripten_thread_exit=ft.Ja)(e);},_t104=function _t(){return(_t104=ft.Ka)();},_It=function It(e){return(_It=ft.La)(e);},_At=function At(e,t){return(_At=ft.Ma)(e,t);},_St=function St(){return(_St=ft.Na)();},_Tt=function Tt(e){return(_Tt=ft.Oa)(e);},_Ct=function Ct(e){return(_Ct=ft.Pa)(e);};function Et(){if(!(0<G))if(b)s(l),b||pe(U),startWorker(l);else{if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)N.unshift(l.preRun.shift());pe(N),0<G||wt||(wt=!0,l.calledRun=!0,M||(b||pe(U),s(l),b||pe(j)));}}return l.___start_em_js=887001,l.___stop_em_js=887613,l.wasmMemory=E,l.stackAlloc=_Ct,l.stackSave=_St,l.stackRestore=_Tt,l.keepRuntimeAlive=function(){return 0<ne;},l.addFunction=ht,l.UTF8ToString=ae,l.stringToUTF8=Te,l.lengthBytesUTF8=Ae,l.ExitStatus=ee,l.PThread=fe,V=function e(){wt||Et(),wt||(V=e);},Et(),t.ready;};}();"object"==_typeof(e)&&"object"==_typeof(t)?t.exports=r:"function"==typeof define&&define.amd&&define([],function(){return r;});}),Up=ye(function(e,t){t.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n';}),Wp,bg,ca,pa,Bo,zp,gg,yg,Tg,Vp,Oe,Kr=L(function(){Wp=Cp(),bg=Gp(),pa=!1,Bo=!1,zp=!1,gg=function gg(e){if(1===e)return!1;if((typeof SharedArrayBuffer==="undefined"?"undefined":_typeof(SharedArrayBuffer))>"u")return(typeof self==="undefined"?"undefined":_typeof(self))<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;_typeof(process)<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return(typeof MessageChannel==="undefined"?"undefined":_typeof(MessageChannel))<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));}catch(_unused11){return!1;}},yg=function yg(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]));}catch(_unused12){return!1;}},Tg=function Tg(e,t){return e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm";},Vp=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee47(e){var t,r,n,i,o,a,s,u,l,h,c;return _regeneratorRuntime().wrap(function _callee47$(_context48){while(1)switch(_context48.prev=_context48.next){case 0:if(!pa){_context48.next=2;break;}return _context48.abrupt("return",Promise.resolve());case 2:if(!Bo){_context48.next=4;break;}throw new Error("multiple calls to 'initializeWebAssembly()' detected.");case 4:if(!zp){_context48.next=6;break;}throw new Error("previous call to 'initializeWebAssembly()' failed.");case 6:Bo=!0;t=e.initTimeout,r=e.numThreads,n=e.simd,i=gg(r),o=n&&yg(),a=e.wasmPaths,s="string"==typeof a?a:void 0,u=Tg(o,i),l="object"==_typeof(a)?a[u]:void 0,h=!1,c=[];t>0&&c.push(new Promise(function(e){setTimeout(function(){h=!0,e();},t);}));c.push(new Promise(function(e,t){var n=i?bg:Wp,o={locateFile:function locateFile(e,t){return i&&e.endsWith(".worker.js")&&(typeof Blob==="undefined"?"undefined":_typeof(Blob))<"u"?URL.createObjectURL(new Blob([Up()],{type:"text/javascript"})):e.endsWith(".wasm")?l||(s!==null&&s!==void 0?s:t)+u:t+e;}};if(i)if(o.numThreads=r,(typeof Blob==="undefined"?"undefined":_typeof(Blob))>"u")o.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{var _e195="var ortWasmThreaded=".concat(n.toString(),";");o.mainScriptUrlOrBlob=new Blob([_e195],{type:"text/javascript"});}n(o).then(function(t){Bo=!1,pa=!0,ca=t,e();},function(e){Bo=!1,zp=!0,t(e);});}));_context48.next=12;return Promise.race(c);case 12:if(!h){_context48.next=14;break;}throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(t,"ms"));case 14:case"end":return _context48.stop();}},_callee47);}));return function Vp(_x56){return _ref14.apply(this,arguments);};}(),Oe=function Oe(){if(pa&&ca)return ca;throw new Error("WebAssembly is not initialized yet.");};}),Fe,_vn,Se,ko=L(function(){Kr(),Fe=function Fe(e,t){var r=Oe(),n=r.lengthBytesUTF8(e)+1,i=r._malloc(n);return r.stringToUTF8(e,i,n),t.push(i),i;},_vn=function vn(e,t,r,n){if("object"==_typeof(e)&&null!==e){if(r.has(e))throw new Error("Circular reference in options");r.add(e);}Object.entries(e).forEach(function(_ref15){var _ref16=_slicedToArray(_ref15,2),e=_ref16[0],i=_ref16[1];var o=t?t+e:e;if("object"==_typeof(i))_vn(i,o+".",r,n);else if("string"==typeof i||"number"==typeof i)n(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can't handle extra config type: "+_typeof(i));n(o,i?"1":"0");}});},Se=function Se(e){var t=Oe(),r=t.stackSave();try{var _r129=t.stackAlloc(8);t._OrtGetLastError(_r129,_r129+4);var n=t.HEAP32[_r129/4],i=t.HEAPU32[_r129/4+1],o=i?t.UTF8ToString(i):"";throw new Error("".concat(e," ERROR_CODE: ").concat(n,", ERROR_MESSAGE: ").concat(o));}finally{t.stackRestore(r);}};}),Hp,jp=L(function(){Kr(),ko(),Hp=function Hp(e){var t=Oe(),r=0,n=[],i=e||{};try{if(void 0===(e===null||e===void 0?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(e.logSeverityLevel));if(void 0===(e===null||e===void 0?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(e.logVerbosityLevel));void 0===(e===null||e===void 0?void 0:e.terminate)&&(i.terminate=!1);var o=0;return void 0!==(e===null||e===void 0?void 0:e.tag)&&(o=Fe(e.tag,n)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,o),0===r&&Se("Can't create run options."),void 0!==(e===null||e===void 0?void 0:e.extra)&&_vn(e.extra,"",new WeakSet(),function(e,i){var o=Fe(e,n),a=Fe(i,n);0!==t._OrtAddRunConfigEntry(r,o,a)&&Se("Can't set a run config entry: ".concat(e," - ").concat(i,"."));}),[r,n];}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),n.forEach(function(e){return t._free(e);}),e;}};}),xg,wg,vg,_g,qp,Yp=L(function(){Kr(),ko(),xg=function xg(e){switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(e));}},wg=function wg(e){switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(e));}},vg=function vg(e){e.extra||(e.extra={}),e.extra.session||(e.extra.session={});var t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(function(e){return"webgpu"===("string"==typeof e?e:e.name);})&&(e.enableMemPattern=!1);},_g=function _g(e,t,r){var _iterator40=_createForOfIteratorHelper(t),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var n=_step40.value;var _t105="string"==typeof n?n:n.name;switch(_t105){case"webnn":if(_t105="WEBNN","string"!=typeof n){var _t106=n;if(_t106!==null&&_t106!==void 0&&_t106.deviceType){var _n33=Fe("deviceType",r),_i31=Fe(_t106.deviceType,r);0!==Oe()._OrtAddSessionConfigEntry(e,_n33,_i31)&&Se("Can't set a session config entry: 'deviceType' - ".concat(_t106.deviceType,"."));}if(_t106!==null&&_t106!==void 0&&_t106.numThreads){var _n34=_t106.numThreads;("number"!=typeof _n34||!Number.isInteger(_n34)||_n34<0)&&(_n34=0);var _i32=Fe("numThreads",r),o=Fe(_n34.toString(),r);0!==Oe()._OrtAddSessionConfigEntry(e,_i32,o)&&Se("Can't set a session config entry: 'numThreads' - ".concat(_t106.numThreads,"."));}if(_t106!==null&&_t106!==void 0&&_t106.powerPreference){var _n35=Fe("powerPreference",r),_i33=Fe(_t106.powerPreference,r);0!==Oe()._OrtAddSessionConfigEntry(e,_n35,_i33)&&Se("Can't set a session config entry: 'powerPreference' - ".concat(_t106.powerPreference,"."));}}break;case"webgpu":if(_t105="JS","string"!=typeof n){var _t107=n;if(_t107!==null&&_t107!==void 0&&_t107.preferredLayout){if("NCHW"!==_t107.preferredLayout&&"NHWC"!==_t107.preferredLayout)throw new Error("preferredLayout must be either 'NCHW' or 'NHWC': ".concat(_t107.preferredLayout));var _n36=Fe("preferredLayout",r),_i34=Fe(_t107.preferredLayout,r);0!==Oe()._OrtAddSessionConfigEntry(e,_n36,_i34)&&Se("Can't set a session config entry: 'preferredLayout' - ".concat(_t107.preferredLayout,"."));}}break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(_t105));}var i=Fe(_t105,r);0!==Oe()._OrtAppendExecutionProvider(e,i)&&Se("Can't append execution provider: ".concat(_t105,"."));}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}},qp=function qp(e){var t=Oe(),r=0,n=[],i=e||{};vg(i);try{var _i$graphOptimizationL,_i$executionMode,_i$logSeverityLevel,_i$logVerbosityLevel;var _e196=xg((_i$graphOptimizationL=i.graphOptimizationLevel)!==null&&_i$graphOptimizationL!==void 0?_i$graphOptimizationL:"all"),o=wg((_i$executionMode=i.executionMode)!==null&&_i$executionMode!==void 0?_i$executionMode:"sequential"),_a24="string"==typeof i.logId?Fe(i.logId,n):0,s=(_i$logSeverityLevel=i.logSeverityLevel)!==null&&_i$logSeverityLevel!==void 0?_i$logSeverityLevel:2;if(!Number.isInteger(s)||s<0||s>4)throw new Error("log serverity level is not valid: ".concat(s));var u=(_i$logVerbosityLevel=i.logVerbosityLevel)!==null&&_i$logVerbosityLevel!==void 0?_i$logVerbosityLevel:0;if(!Number.isInteger(u)||u<0||u>4)throw new Error("log verbosity level is not valid: ".concat(u));var l="string"==typeof i.optimizedModelFilePath?Fe(i.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(_e196,!!i.enableCpuMemArena,!!i.enableMemPattern,o,!!i.enableProfiling,0,_a24,s,u,l),0===r&&Se("Can't create session options."),i.executionProviders&&_g(r,i.executionProviders,n),i.freeDimensionOverrides)for(var _i35=0,_Object$entries=Object.entries(i.freeDimensionOverrides);_i35<_Object$entries.length;_i35++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i35],2),_e197=_Object$entries$_i[0],_o23=_Object$entries$_i[1];if("string"!=typeof _e197)throw new Error("free dimension override name must be a string: ".concat(_e197));if("number"!=typeof _o23||!Number.isInteger(_o23)||_o23<0)throw new Error("free dimension override value must be a non-negative integer: ".concat(_o23));var _i36=Fe(_e197,n);0!==t._OrtAddFreeDimensionOverride(r,_i36,_o23)&&Se("Can't set a free dimension override: ".concat(_e197," - ").concat(_o23,"."));}return void 0!==i.extra&&_vn(i.extra,"",new WeakSet(),function(e,i){var o=Fe(e,n),a=Fe(i,n);0!==t._OrtAddSessionConfigEntry(r,o,a)&&Se("Can't set a session config entry: ".concat(e," - ").concat(i,"."));}),[r,n];}catch(e){throw 0!==r&&t._OrtReleaseSessionOptions(r),n.forEach(function(e){return t._free(e);}),e;}};}),da,Xp,ha,Kp,Jp,No,Zp,ma=L(function(){da=function da(e){switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(e));}},Xp=function Xp(e){switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(e));}},ha=function ha(e){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e];},Kp=function Kp(e){switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(e));}},Jp=function Jp(e){switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(e));}},No=function No(e){return"float32"===e||"int32"===e||"int64"===e||"bool"===e||"float16"===e||"uint32"===e;},Zp=function Zp(e){switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error("unsupported data location: ".concat(e));}};}),_n,ba=L(function(){_n=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee48(e){var t,r,n,_r130,i,_e198,o,_yield$i$read,_e199,_t108,_n37,_t109,_r131,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,_e200;return _regeneratorRuntime().wrap(function _callee48$(_context49){while(1)switch(_context49.prev=_context49.next){case 0:if(!("string"!=typeof e)){_context49.next=11;break;}if(!(e instanceof Blob)){_context49.next=9;break;}_context49.t1=Uint8Array;_context49.next=5;return e.arrayBuffer();case 5:_context49.t2=_context49.sent;_context49.t0=new _context49.t1(_context49.t2);_context49.next=10;break;case 9:_context49.t0=e instanceof Uint8Array?e:new Uint8Array(e);case 10:return _context49.abrupt("return",_context49.t0);case 11:if(_typeof(process)<"u"&&process.versions&&process.versions.node){_context49.next=50;break;}_context49.next=14;return fetch(e);case 14:t=_context49.sent;if(t.ok){_context49.next=17;break;}throw new Error("failed to load external data file: ".concat(e));case 17:r=t.headers.get("Content-Length"),n=r?parseInt(r,10):0;if(!(n<1073741824)){_context49.next=24;break;}_context49.t3=Uint8Array;_context49.next=22;return t.arrayBuffer();case 22:_context49.t4=_context49.sent;return _context49.abrupt("return",new _context49.t3(_context49.t4));case 24:if(t.body){_context49.next=26;break;}throw new Error("failed to load external data file: ".concat(e,", no response body."));case 26:i=t.body.getReader();_context49.prev=27;_r130=new ArrayBuffer(n);_context49.next=37;break;case 31:_context49.prev=31;_context49.t5=_context49["catch"](27);if(_context49.t5 instanceof RangeError){_context49.next=35;break;}throw _context49.t5;case 35:_e198=Math.ceil(n/65536);_r130=new WebAssembly.Memory({initial:_e198,maximum:_e198}).buffer;case 37:o=0;case 38:_context49.next=40;return i.read();case 40:_yield$i$read=_context49.sent;_e199=_yield$i$read.done;_t108=_yield$i$read.value;if(!_e199){_context49.next=45;break;}return _context49.abrupt("break",49);case 45:_n37=_t108.byteLength;new Uint8Array(_r130,o,_n37).set(_t108),o+=_n37;case 47:_context49.next=38;break;case 49:return _context49.abrupt("return",new Uint8Array(_r130,0,n));case 50:_context49.prev=50;_context49.t6=Uint8Array;_context49.next=54;return(void 0)(e);case 54:_context49.t7=_context49.sent;return _context49.abrupt("return",new _context49.t6(_context49.t7));case 58:_context49.prev=58;_context49.t8=_context49["catch"](50);if(!("ERR_FS_FILE_TOO_LARGE"===_context49.t8.code)){_context49.next=91;break;}_t109=(void 0)(e),_r131=[];_iteratorAbruptCompletion=false;_didIteratorError=false;_context49.prev=64;_iterator=_asyncIterator(_t109);case 66:_context49.next=68;return _iterator.next();case 68:if(!(_iteratorAbruptCompletion=!(_step=_context49.sent).done)){_context49.next=74;break;}_e200=_step.value;_r131.push(_e200);case 71:_iteratorAbruptCompletion=false;_context49.next=66;break;case 74:_context49.next=80;break;case 76:_context49.prev=76;_context49.t9=_context49["catch"](64);_didIteratorError=true;_iteratorError=_context49.t9;case 80:_context49.prev=80;_context49.prev=81;if(!(_iteratorAbruptCompletion&&_iterator["return"]!=null)){_context49.next=85;break;}_context49.next=85;return _iterator["return"]();case 85:_context49.prev=85;if(!_didIteratorError){_context49.next=88;break;}throw _iteratorError;case 88:return _context49.finish(85);case 89:return _context49.finish(80);case 90:return _context49.abrupt("return",new Uint8Array(Buffer.concat(_r131)));case 91:throw _context49.t8;case 92:case"end":return _context49.stop();}},_callee48,null,[[27,31],[50,58],[64,76,80,90],[81,,85,89]]);}));return function _n(_x57){return _ref17.apply(this,arguments);};}();}),Og,ed,td,On,Ig,ga,rd,nd,Qp,od,id,ad,sd,ud,ld=L(function(){jp(),Yp(),ma(),Kr(),ko(),ba(),Og=function Og(e,t){0!==Oe()._OrtInit(e,t)&&Se("Can't initialize onnxruntime.");},ed=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee49(e){return _regeneratorRuntime().wrap(function _callee49$(_context50){while(1)switch(_context50.prev=_context50.next){case 0:Og(e.wasm.numThreads,Jp(e.logLevel));case 1:case"end":return _context50.stop();}},_callee49);}));return function ed(_x58){return _ref18.apply(this,arguments);};}(),td=/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee50(e,t){return _regeneratorRuntime().wrap(function _callee50$(_context51){while(1)switch(_context51.prev=_context51.next){case 0:case"end":return _context51.stop();}},_callee50);}));return function td(_x59,_x60){return _ref19.apply(this,arguments);};}(),On=new Map(),Ig=function Ig(e){var t=Oe(),r=t.stackSave();try{var _r132=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,_r132,_r132+4)&&Se("Can't get session input/output count."),[t.HEAP32[_r132/4],t.HEAP32[_r132/4+1]];}finally{t.stackRestore(r);}},ga=function ga(e){var t=Oe(),r=t._malloc(e.byteLength);if(0===r)throw new Error("Can't create a session. failed to allocate a buffer of size ".concat(e.byteLength,"."));return t.HEAPU8.set(e,r),[r,e.byteLength];},rd=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee51(e,t){var _e201,_e202,_ref21,_ga,_ga2;var r,n,i,o,a,s,u,l,_qp,_qp2,_e203,_iterator41,_step41,_loop8,_Ig,_Ig2,_e204,h,c,d,_t110,_e205,_e206,_t111,_r133,f,_i$unmountExternalDat;return _regeneratorRuntime().wrap(function _callee51$(_context53){while(1)switch(_context53.prev=_context53.next){case 0:i=Oe();Array.isArray(e)?(_e201=e,_e202=_slicedToArray(_e201,2),r=_e202[0],n=_e202[1],_e201):e.buffer===i.HEAPU8.buffer?(_ref21=[e.byteOffset,e.byteLength],r=_ref21[0],n=_ref21[1],_ref21):(_ga=ga(e),_ga2=_slicedToArray(_ga,2),r=_ga2[0],n=_ga2[1],_ga);o=0,a=0,s=[],u=[],l=[];_context53.prev=3;if(!((_qp=qp(t),_qp2=_slicedToArray(_qp,2),a=_qp2[0],s=_qp2[1]),t!==null&&t!==void 0&&t.externalData&&i.mountExternalData)){_context53.next=24;break;}_e203=[];_iterator41=_createForOfIteratorHelper(t.externalData);_context53.prev=7;_loop8=/*#__PURE__*/_regeneratorRuntime().mark(function _loop8(){var r,t;return _regeneratorRuntime().wrap(function _loop8$(_context52){while(1)switch(_context52.prev=_context52.next){case 0:r=_step41.value;t="string"==typeof r?r:r.path;_e203.push(_n("string"==typeof r?r:r.data).then(function(e){i.mountExternalData(t,e);}));case 3:case"end":return _context52.stop();}},_loop8);});_iterator41.s();case 10:if((_step41=_iterator41.n()).done){_context53.next=14;break;}return _context53.delegateYield(_loop8(),"t0",12);case 12:_context53.next=10;break;case 14:_context53.next=19;break;case 16:_context53.prev=16;_context53.t1=_context53["catch"](7);_iterator41.e(_context53.t1);case 19:_context53.prev=19;_iterator41.f();return _context53.finish(19);case 22:_context53.next=24;return Promise.all(_e203);case 24:o=i._OrtCreateSession(r,n,a),0===o&&Se("Can't create a session.");_Ig=Ig(o),_Ig2=_slicedToArray(_Ig,2),_e204=_Ig2[0],h=_Ig2[1],c=[],d=[];for(_t110=0;_t110<_e204;_t110++){_e205=i._OrtGetInputName(o,_t110);0===_e205&&Se("Can't get an input name."),u.push(_e205),c.push(i.UTF8ToString(_e205));}for(_e206=0;_e206<h;_e206++){_t111=i._OrtGetOutputName(o,_e206);0===_t111&&Se("Can't get an output name."),l.push(_t111);_r133=i.UTF8ToString(_t111);d.push(_r133);}f=null;return _context53.abrupt("return",(On.set(o,[o,u,l,f]),[o,c,d]));case 32:_context53.prev=32;_context53.t2=_context53["catch"](3);throw u.forEach(function(e){return i._OrtFree(e);}),l.forEach(function(e){return i._OrtFree(e);}),0!==o&&i._OrtReleaseSession(o),_context53.t2;case 35:_context53.prev=35;i._free(r),0!==a&&i._OrtReleaseSessionOptions(a),s.forEach(function(e){return i._free(e);}),(_i$unmountExternalDat=i.unmountExternalData)===null||_i$unmountExternalDat===void 0?void 0:_i$unmountExternalDat.call(i);return _context53.finish(35);case 38:case"end":return _context53.stop();}},_callee51,null,[[3,32,35,38],[7,16,19,22]]);}));return function rd(_x61,_x62){return _ref20.apply(this,arguments);};}(),nd=function nd(e){var _t$jsepUnregisterBuff;var t=Oe(),r=On.get(e);if(!r)throw new Error("cannot release session. invalid session id: ".concat(e));var _r134=_slicedToArray(r,4),n=_r134[0],i=_r134[1],o=_r134[2],a=_r134[3];a&&t._OrtReleaseBinding(a.handle),(_t$jsepUnregisterBuff=t.jsepUnregisterBuffers)!==null&&_t$jsepUnregisterBuff!==void 0&&_t$jsepUnregisterBuff.call(t,e),i.forEach(function(e){return t._OrtFree(e);}),o.forEach(function(e){return t._OrtFree(e);}),t._OrtReleaseSession(n),On["delete"](e);},Qp=function Qp(e,t,r,n,i){if(!e)return void t.push(0);var o,a,s=Oe(),u=e[0],l=e[1],h=e[3];if("string"===u&&"gpu-buffer"===h)throw new Error("String tensor is not supported on GPU.");if("gpu-buffer"===h){var _t112=e[2].gpuBuffer,_r135=ha(da(u));a=l.reduce(function(e,t){return e*t;},1)*_r135,o=s.jsepRegisterBuffer(n,i,_t112,a);}else{var _t113=e[2];if(Array.isArray(_t113)){a=4*_t113.length,o=s._malloc(a),r.push(o);var _e207=o/4;for(var _n38=0;_n38<_t113.length;_n38++){if("string"!=typeof _t113[_n38])throw new TypeError("tensor data at index ".concat(_n38," is not a string"));s.HEAPU32[_e207++]=Fe(_t113[_n38],r);}}else a=_t113.byteLength,o=s._malloc(a),r.push(o),s.HEAPU8.set(new Uint8Array(_t113.buffer,_t113.byteOffset,a),o);}var c=s.stackSave(),d=s.stackAlloc(4*l.length);try{var _e208=d/4;l.forEach(function(t){return s.HEAP32[_e208++]=t;});var _r136=s._OrtCreateTensor(da(u),o,a,d,l.length,Zp(h));0===_r136&&Se("Can't create tensor for input/output. session=".concat(n,", index=").concat(i,".")),t.push(_r136);}finally{s.stackRestore(c);}},od=function od(e){var t=new TextEncoder().encode(e),r=Oe(),n=r._malloc(t.byteLength);r.HEAPU8.set(t,n);var i=r._OrtConfigure(n,t.byteLength);if(0===i)throw new Error("Can't get an configure key");var o=r.UTF8ToString(i);return r._OrtFree(i),o;},id=function id(e){var t=new TextEncoder().encode(e),r=Oe(),n=r._malloc(t.byteLength);r.HEAPU8.set(t,n);var i=r._OrtAuth(n,t.byteLength);if(0===i)throw new Error("Can't get an auth result");var o=r.UTF8ToString(i);return r._OrtFree(i),o;},ad=/*#__PURE__*/function(){var _ref22=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee52(e,t,r,n,i,o){var a,s,_s8,u,l,h,c,d,f,p,y,g,m,w,b,v,x,_,I,_Hp,_Hp2,_n39,_t114,_s9,_b2,A,S,T,_e209,_e210,C,_loop9,_e211;return _regeneratorRuntime().wrap(function _callee52$(_context55){while(1)switch(_context55.prev=_context55.next){case 0:a=Oe(),s=On.get(e);if(s){_context55.next=3;break;}throw new Error("cannot run inference. invalid session id: ".concat(e));case 3:_s8=_slicedToArray(s,4),u=_s8[0],l=_s8[1],h=_s8[2],c=_s8[3],d=t.length,f=n.length,p=0,y=[],g=[],m=[],w=[],b=a.stackSave(),v=a.stackAlloc(4*d),x=a.stackAlloc(4*d),_=a.stackAlloc(4*f),I=a.stackAlloc(4*f);_context55.prev=4;_Hp=Hp(o);_Hp2=_slicedToArray(_Hp,2);p=_Hp2[0];y=_Hp2[1];for(_n39=0;_n39<d;_n39++)Qp(r[_n39],g,w,e,t[_n39]);for(_t114=0;_t114<f;_t114++)Qp(i[_t114],m,w,e,d+n[_t114]);_b2=v/4,A=x/4,S=_/4,T=I/4;for(_e209=0;_e209<d;_e209++)a.HEAPU32[_b2++]=g[_e209],a.HEAPU32[A++]=l[t[_e209]];for(_e210=0;_e210<f;_e210++)a.HEAPU32[S++]=m[_e210],a.HEAPU32[T++]=h[n[_e210]];_context55.next=16;return a._OrtRun(u,x,v,d,I,f,_,p);case 16:_s9=_context55.sent;0!==_s9&&Se("failed to call OrtRun().");C=[];_loop9=/*#__PURE__*/_regeneratorRuntime().mark(function _loop9(){var t,r,o,s,u,l,_i37,_o24,_h5,_d3,_f3,_e212,_p2,_y2,_e213,_t115,_r137,_n40,_i38,_e214,_n41,_e215;return _regeneratorRuntime().wrap(function _loop9$(_context54){while(1)switch(_context54.prev=_context54.next){case 0:t=a.HEAPU32[_/4+_e211];if(!(t===m[_e211])){_context54.next=4;break;}C.push(i[_e211]);return _context54.abrupt("return",1);case 4:o=a.stackSave(),s=a.stackAlloc(16),u=!1,l=0;_context54.prev=5;0!==a._OrtGetTensorData(t,s,s+4,s+8,s+12)&&Se("Can't access output tensor data on index ".concat(_e211,"."));_i37=s/4,_o24=a.HEAPU32[_i37++];l=a.HEAPU32[_i37++];_h5=a.HEAPU32[_i37++],_d3=a.HEAPU32[_i37++],_f3=[];for(_e212=0;_e212<_d3;_e212++)_f3.push(a.HEAPU32[_h5/4+_e212]);a._OrtFree(_h5);_p2=_f3.reduce(function(e,t){return e*t;},1);r=Xp(_o24);_y2=c===null||c===void 0?void 0:c.outputPreferredLocations[n[_e211]];if(!("string"===r)){_context54.next=23;break;}if(!("gpu-buffer"===_y2)){_context54.next=18;break;}throw new Error("String tensor is not supported on GPU.");case 18:_e213=[],_t115=l/4;for(_r137=0;_r137<_p2;_r137++){_n40=a.HEAPU32[_t115++],_i38=_r137===_p2-1?void 0:a.HEAPU32[_t115]-_n40;_e213.push(a.UTF8ToString(_n40,_i38));}C.push([r,_f3,_e213,"cpu"]);_context54.next=32;break;case 23:if(!("gpu-buffer"===_y2&&_p2>0)){_context54.next=30;break;}_e214=a.jsepGetBuffer(l),_n41=ha(_o24);if(!(void 0===_n41||!No(r))){_context54.next=27;break;}throw new Error("Unsupported data type: ".concat(r));case 27:u=!0,C.push([r,_f3,{gpuBuffer:_e214,download:a.jsepCreateDownloader(_e214,_p2*_n41,r),dispose:function dispose(){a._OrtReleaseTensor(t);}},"gpu-buffer"]);_context54.next=32;break;case 30:_e215=new(Kp(r))(_p2);new Uint8Array(_e215.buffer,_e215.byteOffset,_e215.byteLength).set(a.HEAPU8.subarray(l,l+_e215.byteLength)),C.push([r,_f3,_e215,"cpu"]);case 32:_context54.prev=32;a.stackRestore(o),"string"===r&&l&&a._free(l),u||a._OrtReleaseTensor(t);return _context54.finish(32);case 35:case"end":return _context54.stop();}},_loop9,null,[[5,,32,35]]);});_e211=0;case 21:if(!(_e211<f)){_context55.next=28;break;}return _context55.delegateYield(_loop9(),"t0",23);case 23:if(!_context55.t0){_context55.next=25;break;}return _context55.abrupt("continue",25);case 25:_e211++;_context55.next=21;break;case 28:return _context55.abrupt("return",(c&&a._OrtClearBoundOutputs(c.handle),C));case 29:_context55.prev=29;a.stackRestore(b),g.forEach(function(e){return a._OrtReleaseTensor(e);}),m.forEach(function(e){return a._OrtReleaseTensor(e);}),w.forEach(function(e){return a._free(e);}),0!==p&&a._OrtReleaseRunOptions(p),y.forEach(function(e){return a._free(e);});return _context55.finish(29);case 32:case"end":return _context55.stop();}},_callee52,null,[[4,,29,32]]);}));return function ad(_x63,_x64,_x65,_x66,_x67,_x68){return _ref22.apply(this,arguments);};}(),sd=function sd(e){var t=Oe(),r=On.get(e);if(!r)throw new Error("invalid session id");var n=r[0],i=t._OrtEndProfiling(n);0===i&&Se("Can't get an profile file name."),t._OrtFree(i);},ud=function ud(e){var t=[];var _iterator42=_createForOfIteratorHelper(e),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var r=_step42.value;var _e216=r[2];!Array.isArray(_e216)&&"buffer"in _e216&&t.push(_e216.buffer);}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}return t;};}),fd=ye(function(e,t){t.exports='/*!\n * ONNX Runtime Web v1.17.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var xt=Object.defineProperty;var an=Object.getOwnPropertyDescriptor;var on=Object.getOwnPropertyNames;var sn=Object.prototype.hasOwnProperty;var yr=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(d,o)=>(typeof require<"u"?require:d)[o]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error(\'Dynamic require of "\'+i+\'" is not supported\')});var Ct=(i,d)=>()=>(i&&(d=i(i=0)),d);var st=(i,d)=>()=>(d||i((d={exports:{}}).exports,d),d.exports),Dt=(i,d)=>{for(var o in d)xt(i,o,{get:d[o],enumerable:!0})},un=(i,d,o,g)=>{if(d&&typeof d=="object"||typeof d=="function")for(let l of on(d))!sn.call(i,l)&&l!==o&&xt(i,l,{get:()=>d[l],enumerable:!(g=an(d,l))||g.enumerable});return i};var it=i=>un(xt({},"__esModule",{value:!0}),i);var Ft={};Dt(Ft,{createReadStream:()=>wr,readFile:()=>fn,readFileSync:()=>ln});var fn,ln,wr,Ut=Ct(()=>{fn=void 0,ln=void 0,wr=void 0});var Rt={};Dt(Rt,{join:()=>cn});var cn,Lt=Ct(()=>{cn=void 0});var vr=st((Or,Pt)=>{"use strict";var br=(()=>{var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(d={}){var o=d,g,l;o.ready=new Promise((r,a)=>{g=r,l=a});var b=Object.assign({},o),y="./this.program",f=typeof window=="object",M=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",P="",W,U,R;if(D){var N=(Ut(),it(Ft)),I=(Lt(),it(Rt));P=M?I.dirname(P)+"/":__dirname+"/",W=(r,a)=>(r=be(r)?new URL(r):I.normalize(r),N.readFileSync(r,a?void 0:"utf8")),R=r=>(r=W(r,!0),r.buffer||(r=new Uint8Array(r)),r),U=(r,a,s,c=!0)=>{r=be(r)?new URL(r):I.normalize(r),N.readFile(r,c?void 0:"utf8",(O,_)=>{O?s(O):a(c?_.buffer:_)})},!o.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),o.inspect=()=>"[Emscripten Module object]"}else(f||M)&&(M?P=self.location.href:typeof document<"u"&&document.currentScript&&(P=document.currentScript.src),i&&(P=i),P.indexOf("blob:")!==0?P=P.substr(0,P.replace(/[?#].*/,"").lastIndexOf("/")+1):P="",W=r=>{var a=new XMLHttpRequest;return a.open("GET",r,!1),a.send(null),a.responseText},M&&(R=r=>{var a=new XMLHttpRequest;return a.open("GET",r,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)}),U=(r,a,s)=>{var c=new XMLHttpRequest;c.open("GET",r,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?a(c.response):s()},c.onerror=s,c.send(null)});var E=console.log.bind(console),F=console.error.bind(console);Object.assign(o,b),b=null,typeof WebAssembly!="object"&&le("no native wasm support detected");var k,we=!1,ue,ee,S,G,fe;function We(){var r=k.buffer;o.HEAP8=ue=new Int8Array(r),o.HEAP16=new Int16Array(r),o.HEAPU8=ee=new Uint8Array(r),o.HEAPU16=new Uint16Array(r),o.HEAP32=S=new Int32Array(r),o.HEAPU32=G=new Uint32Array(r),o.HEAPF32=new Float32Array(r),o.HEAPF64=fe=new Float64Array(r)}var He=[],te=[],V=[],de=0,L=null,re=null;function le(r){throw r="Aborted("+r+")",F(r),we=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),l(r),r}var he=r=>r.startsWith("data:application/octet-stream;base64,"),be=r=>r.startsWith("file://"),Q;if(Q="ort-wasm.wasm",!he(Q)){var ce=Q;Q=o.locateFile?o.locateFile(ce,P):P+ce}function Ee(r){if(R)return R(r);throw"both async and sync fetching of the wasm failed"}function Ce(r){if(f||M){if(typeof fetch=="function"&&!be(r))return fetch(r,{credentials:"same-origin"}).then(a=>{if(!a.ok)throw"failed to load wasm binary file at \'"+r+"\'";return a.arrayBuffer()}).catch(()=>Ee(r));if(U)return new Promise((a,s)=>{U(r,c=>a(new Uint8Array(c)),s)})}return Promise.resolve().then(()=>Ee(r))}function De(r,a,s){return Ce(r).then(c=>WebAssembly.instantiate(c,a)).then(c=>c).then(s,c=>{F(`failed to asynchronously prepare wasm: ${c}`),le(c)})}function Pe(r,a){var s=Q;return typeof WebAssembly.instantiateStreaming!="function"||he(s)||be(s)||D||typeof fetch!="function"?De(s,r,a):fetch(s,{credentials:"same-origin"}).then(c=>WebAssembly.instantiateStreaming(c,r).then(a,function(O){return F(`wasm streaming compile failed: ${O}`),F("falling back to ArrayBuffer instantiation"),De(s,r,a)}))}var Me,pe={882112:(r,a,s,c)=>{if(typeof o>"u"||!o.Ga)return 1;if(r=Oe(r>>>0),r.startsWith("./")&&(r=r.substring(2)),r=o.Ga.get(r),!r)return 2;if(a>>>=0,s>>>=0,a+s>r.byteLength)return 3;try{return ee.set(r.subarray(a,a+s),c>>>0>>>0),0}catch{return 4}}};function Se(r){this.Da=r-24,this.Fa=function(a){G[this.Da+4>>>2>>>0]=a},this.Ea=function(a){G[this.Da+8>>>2>>>0]=a},this.La=function(a,s){this.Ma(),this.Fa(a),this.Ea(s)},this.Ma=function(){G[this.Da+16>>>2>>>0]=0}}var Ae=0,ne=0,Z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Fe=(r,a,s)=>{a>>>=0;var c=a+s;for(s=a;r[s]&&!(s>=c);)++s;if(16<s-a&&r.buffer&&Z)return Z.decode(r.subarray(a,s));for(c="";a<s;){var O=r[a++];if(O&128){var _=r[a++]&63;if((O&224)==192)c+=String.fromCharCode((O&31)<<6|_);else{var A=r[a++]&63;O=(O&240)==224?(O&15)<<12|_<<6|A:(O&7)<<18|_<<12|A<<6|r[a++]&63,65536>O?c+=String.fromCharCode(O):(O-=65536,c+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else c+=String.fromCharCode(O)}return c},Oe=(r,a)=>(r>>>=0)?Fe(ee,r,a):"",Te=r=>{for(var a=0,s=0;s<r.length;++s){var c=r.charCodeAt(s);127>=c?a++:2047>=c?a+=2:55296<=c&&57343>=c?(a+=4,++s):a+=3}return a},ze=(r,a,s,c)=>{if(s>>>=0,!(0<c))return 0;var O=s;c=s+c-1;for(var _=0;_<r.length;++_){var A=r.charCodeAt(_);if(55296<=A&&57343>=A){var $=r.charCodeAt(++_);A=65536+((A&1023)<<10)|$&1023}if(127>=A){if(s>=c)break;a[s++>>>0]=A}else{if(2047>=A){if(s+1>=c)break;a[s++>>>0]=192|A>>6}else{if(65535>=A){if(s+2>=c)break;a[s++>>>0]=224|A>>12}else{if(s+3>=c)break;a[s++>>>0]=240|A>>18,a[s++>>>0]=128|A>>12&63}a[s++>>>0]=128|A>>6&63}a[s++>>>0]=128|A&63}}return a[s>>>0]=0,s-O},Ie=r=>r%4===0&&(r%100!==0||r%400===0),Ze=[0,31,60,91,121,152,182,213,244,274,305,335],lt=[0,31,59,90,120,151,181,212,243,273,304,334],Ue=r=>{var a=Te(r)+1,s=me(a);return s&&ze(r,ee,s,a),s},Ye=[],Be={},Ge=()=>{if(!Ve){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},a;for(a in Be)Be[a]===void 0?delete r[a]:r[a]=Be[a];var s=[];for(a in r)s.push(`${a}=${r[a]}`);Ve=s}return Ve},Ve,Ne=[null,[],[]],ct=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return s=>crypto.getRandomValues(s);if(D)try{var r=yr("crypto");if(r.randomFillSync)return s=>r.randomFillSync(s);var a=r.randomBytes;return s=>(s.set(a(s.byteLength)),s)}catch{}le("initRandomDevice")},Ke=r=>(Ke=ct())(r),ke=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function z(r){var a=Array(Te(r)+1);return ze(r,a,0,a.length),a}function et(r,a,s,c){function O(p,H,Y){for(p=typeof p=="number"?p.toString():p||"";p.length<H;)p=Y[0]+p;return p}function _(p,H){return O(p,H,"0")}function A(p,H){function Y(Je){return 0>Je?-1:0<Je?1:0}var ve;return(ve=Y(p.getFullYear()-H.getFullYear()))===0&&(ve=Y(p.getMonth()-H.getMonth()))===0&&(ve=Y(p.getDate()-H.getDate())),ve}function $(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function oe(p){var H=p.ya;for(p=new Date(new Date(p.za+1900,0,1).getTime());0<H;){var Y=p.getMonth(),ve=(Ie(p.getFullYear())?ke:dt)[Y];if(H>ve-p.getDate())H-=ve-p.getDate()+1,p.setDate(1),11>Y?p.setMonth(Y+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+H);break}}return Y=new Date(p.getFullYear()+1,0,4),H=$(new Date(p.getFullYear(),0,4)),Y=$(Y),0>=A(H,p)?0>=A(Y,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}r>>>=0,a>>>=0,s>>>=0,c>>>=0;var se=G[c+40>>>2>>>0];c={Ja:S[c>>>2>>>0],Ia:S[c+4>>>2>>>0],Aa:S[c+8>>>2>>>0],Ca:S[c+12>>>2>>>0],Ba:S[c+16>>>2>>>0],za:S[c+20>>>2>>>0],xa:S[c+24>>>2>>>0],ya:S[c+28>>>2>>>0],Na:S[c+32>>>2>>>0],Ha:S[c+36>>>2>>>0],Ka:se?Oe(se):""},s=Oe(s),se={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ie in se)s=s.replace(new RegExp(ie,"g"),se[ie]);var at="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ot="January February March April May June July August September October November December".split(" ");se={"%a":p=>at[p.xa].substring(0,3),"%A":p=>at[p.xa],"%b":p=>ot[p.Ba].substring(0,3),"%B":p=>ot[p.Ba],"%C":p=>_((p.za+1900)/100|0,2),"%d":p=>_(p.Ca,2),"%e":p=>O(p.Ca,2," "),"%g":p=>oe(p).toString().substring(2),"%G":p=>oe(p),"%H":p=>_(p.Aa,2),"%I":p=>(p=p.Aa,p==0?p=12:12<p&&(p-=12),_(p,2)),"%j":p=>{for(var H=0,Y=0;Y<=p.Ba-1;H+=(Ie(p.za+1900)?ke:dt)[Y++]);return _(p.Ca+H,3)},"%m":p=>_(p.Ba+1,2),"%M":p=>_(p.Ia,2),"%n":()=>`\n`,"%p":p=>0<=p.Aa&&12>p.Aa?"AM":"PM","%S":p=>_(p.Ja,2),"%t":()=>"\t","%u":p=>p.xa||7,"%U":p=>_(Math.floor((p.ya+7-p.xa)/7),2),"%V":p=>{var H=Math.floor((p.ya+7-(p.xa+6)%7)/7);if(2>=(p.xa+371-p.ya-2)%7&&H++,H)H==53&&(Y=(p.xa+371-p.ya)%7,Y==4||Y==3&&Ie(p.za)||(H=1));else{H=52;var Y=(p.xa+7-p.ya-1)%7;(Y==4||Y==5&&Ie(p.za%400-1))&&H++}return _(H,2)},"%w":p=>p.xa,"%W":p=>_(Math.floor((p.ya+7-(p.xa+6)%7)/7),2),"%y":p=>(p.za+1900).toString().substring(2),"%Y":p=>p.za+1900,"%z":p=>{p=p.Ha;var H=0<=p;return p=Math.abs(p)/60,(H?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.Ka,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(ie in se)s.includes(ie)&&(s=s.replace(new RegExp(ie,"g"),se[ie](c)));return s=s.replace(/\\0\\0/g,"%"),ie=z(s),ie.length>a?0:(ue.set(ie,r>>>0),ie.length-1)}var xe=[],ye,Re,pt=[],x=(r,a)=>{if(!Re){Re=new WeakMap;var s=ye.length;if(Re)for(var c=0;c<0+s;c++){var O=c,_=xe[O];_||(O>=xe.length&&(xe.length=O+1),xe[O]=_=ye.get(O)),(O=_)&&Re.set(O,c)}}if(s=Re.get(r)||0)return s;if(pt.length)s=pt.pop();else{try{ye.grow(1)}catch($){throw $ instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":$}s=ye.length-1}try{c=s,ye.set(c,r),xe[c]=ye.get(c)}catch($){if(!($ instanceof TypeError))throw $;if(typeof WebAssembly.Function=="function"){c=WebAssembly.Function,O={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},_={parameters:[],results:a[0]=="v"?[]:[O[a[0]]]};for(var A=1;A<a.length;++A)_.parameters.push(O[a[A]]);a=new c(_,r)}else{for(c=[1],O=a.slice(0,1),a=a.slice(1),_={i:127,p:127,j:126,f:125,d:124,e:111},c.push(96),A=a.length,128>A?c.push(A):c.push(A%128|128,A>>7),A=0;A<a.length;++A)c.push(_[a[A]]);O=="v"?c.push(0):c.push(1,_[O]),a=[0,97,115,109,1,0,0,0,1],O=c.length,128>O?a.push(O):a.push(O%128|128,O>>7),a.push.apply(a,c),a.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),a=new WebAssembly.Module(new Uint8Array(a)),a=new WebAssembly.Instance(a,{e:{f:r}}).exports.f}c=s,ye.set(c,a),xe[c]=ye.get(c)}return Re.set(r,s),s},qe={a:function(r,a,s){throw r>>>=0,new Se(r).La(a>>>0,s>>>0),Ae=r,ne++,Ae},e:function(){return 0},L:function(){},A:function(){},C:function(){},u:function(){return 0},J:function(){},E:function(){},I:function(){},k:function(){},B:function(){},y:function(){},K:function(){},z:function(){},l:()=>1,o:function(r,a,s){r=a+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*a:NaN,s>>>=0,r=new Date(1e3*r),S[s>>>2>>>0]=r.getUTCSeconds(),S[s+4>>>2>>>0]=r.getUTCMinutes(),S[s+8>>>2>>>0]=r.getUTCHours(),S[s+12>>>2>>>0]=r.getUTCDate(),S[s+16>>>2>>>0]=r.getUTCMonth(),S[s+20>>>2>>>0]=r.getUTCFullYear()-1900,S[s+24>>>2>>>0]=r.getUTCDay(),S[s+28>>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(r,a,s){r=a+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*a:NaN,s>>>=0,r=new Date(1e3*r),S[s>>>2>>>0]=r.getSeconds(),S[s+4>>>2>>>0]=r.getMinutes(),S[s+8>>>2>>>0]=r.getHours(),S[s+12>>>2>>>0]=r.getDate(),S[s+16>>>2>>>0]=r.getMonth(),S[s+20>>>2>>>0]=r.getFullYear()-1900,S[s+24>>>2>>>0]=r.getDay(),S[s+28>>>2>>>0]=(Ie(r.getFullYear())?Ze:lt)[r.getMonth()]+r.getDate()-1|0,S[s+36>>>2>>>0]=-(60*r.getTimezoneOffset()),a=new Date(r.getFullYear(),6,1).getTimezoneOffset();var c=new Date(r.getFullYear(),0,1).getTimezoneOffset();S[s+32>>>2>>>0]=(a!=c&&r.getTimezoneOffset()==Math.min(c,a))|0},q:function(r){r>>>=0;var a=new Date(S[r+20>>>2>>>0]+1900,S[r+16>>>2>>>0],S[r+12>>>2>>>0],S[r+8>>>2>>>0],S[r+4>>>2>>>0],S[r>>>2>>>0],0),s=S[r+32>>>2>>>0],c=a.getTimezoneOffset(),O=new Date(a.getFullYear(),6,1).getTimezoneOffset(),_=new Date(a.getFullYear(),0,1).getTimezoneOffset(),A=Math.min(_,O);return 0>s?S[r+32>>>2>>>0]=+(O!=_&&A==c):0<s!=(A==c)&&(O=Math.max(_,O),a.setTime(a.getTime()+6e4*((0<s?A:O)-c))),S[r+24>>>2>>>0]=a.getDay(),S[r+28>>>2>>>0]=(Ie(a.getFullYear())?Ze:lt)[a.getMonth()]+a.getDate()-1|0,S[r>>>2>>>0]=a.getSeconds(),S[r+4>>>2>>>0]=a.getMinutes(),S[r+8>>>2>>>0]=a.getHours(),S[r+12>>>2>>>0]=a.getDate(),S[r+16>>>2>>>0]=a.getMonth(),S[r+20>>>2>>>0]=a.getYear(),r=a.getTime(),isNaN(r)?(S[Le()>>>2>>>0]=61,r=-1):r/=1e3,tt((Me=r,1<=+Math.abs(Me)?0<Me?+Math.floor(Me/4294967296)>>>0:~~+Math.ceil((Me-+(~~Me>>>0))/4294967296)>>>0:0)),r>>>0},m:function(){return-52},n:function(){},w:function(r,a,s){function c(oe){return(oe=oe.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?oe[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),_=new Date(O,0,1),A=new Date(O,6,1);O=_.getTimezoneOffset();var $=A.getTimezoneOffset();G[r>>>0>>>2>>>0]=60*Math.max(O,$),S[a>>>0>>>2>>>0]=+(O!=$),r=c(_),a=c(A),r=Ue(r),a=Ue(a),$<O?(G[s>>>2>>>0]=r,G[s+4>>>2>>>0]=a):(G[s>>>2>>>0]=a,G[s+4>>>2>>>0]=r)},d:()=>{le("")},D:function(r,a,s){r>>>=0,a>>>=0,s>>>=0,Ye.length=0;for(var c;c=ee[a++>>>0];){var O=c!=105;O&=c!=112,s+=O&&s%8?4:0,Ye.push(c==112?G[s>>>2>>>0]:c==105?S[s>>>2>>>0]:fe[s>>>3>>>0]),s+=O?8:4}return pe[r].apply(null,Ye)},g:()=>Date.now(),x:function(){return 4294901760},b:()=>performance.now(),H:function(r,a,s){return a>>>=0,ee.copyWithin(r>>>0>>>0,a>>>0,a+(s>>>0)>>>0)},v:function(r){r>>>=0;var a=ee.length;if(4294901760<r)return!1;for(var s=1;4>=s;s*=2){var c=a*(1+.2/s);c=Math.min(c,r+100663296);var O=Math;c=Math.max(r,c);e:{O=(O.min.call(O,4294901760,c+(65536-c%65536)%65536)-k.buffer.byteLength+65535)/65536;try{k.grow(O),We();var _=1;break e}catch{}_=void 0}if(_)return!0}return!1},F:function(r,a){r>>>=0,a>>>=0;var s=0;return Ge().forEach((c,O)=>{var _=a+s;for(O=G[r+4*O>>>2>>>0]=_,_=0;_<c.length;++_)ue[O++>>>0>>>0]=c.charCodeAt(_);ue[O>>>0>>>0]=0,s+=c.length+1}),0},G:function(r,a){r>>>=0,a>>>=0;var s=Ge();G[r>>>2>>>0]=s.length;var c=0;return s.forEach(O=>c+=O.length+1),G[a>>>2>>>0]=c,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(r,a,s,c){a>>>=0,s>>>=0,c>>>=0;for(var O=0,_=0;_<s;_++){var A=G[a>>>2>>>0],$=G[a+4>>>2>>>0];a+=8;for(var oe=0;oe<$;oe++){var se=ee[A+oe>>>0],ie=Ne[r];se===0||se===10?((r===1?E:F)(Fe(ie,0)),ie.length=0):ie.push(se)}O+=$}return G[c>>>2>>>0]=O,0},s:function(r,a){return r>>>=0,Ke(ee.subarray(r>>>0,r+(a>>>0)>>>0)),0},t:et,c:function(r,a,s,c){return et(r>>>0,a>>>0,s>>>0,c>>>0)},h:function(r,a,s,c){let O=ye.length;r=new Uint8Array(ee.slice(r+a,r+s));try{var _=new WebAssembly.Module(r),A=new WebAssembly.Instance(_,{env:{memory:k}}),$;for($ in A.exports)x(A.exports[$]);return O<ye.length?O:c}catch(oe){return console.log(oe),c}}},C=function(){function r(s){return C=s.exports,C=ht(),k=C.M,We(),ye=C.sa,te.unshift(C.N),de--,de==0&&(L!==null&&(clearInterval(L),L=null),re&&(s=re,re=null,s())),C}var a={a:qe};if(de++,o.instantiateWasm)try{return o.instantiateWasm(a,r)}catch(s){F(`Module.instantiateWasm callback failed with error: ${s}`),l(s)}return Pe(a,function(s){r(s.instance)}).catch(l),{}}();o._OrtInit=(r,a)=>(o._OrtInit=C.O)(r,a),o._OrtGetLastError=(r,a)=>(o._OrtGetLastError=C.P)(r,a),o._OrtCreateSessionOptions=(r,a,s,c,O,_,A,$,oe,se)=>(o._OrtCreateSessionOptions=C.Q)(r,a,s,c,O,_,A,$,oe,se),o._OrtAppendExecutionProvider=(r,a)=>(o._OrtAppendExecutionProvider=C.R)(r,a),o._OrtAddFreeDimensionOverride=(r,a,s)=>(o._OrtAddFreeDimensionOverride=C.S)(r,a,s),o._OrtAddSessionConfigEntry=(r,a,s)=>(o._OrtAddSessionConfigEntry=C.T)(r,a,s),o._OrtReleaseSessionOptions=r=>(o._OrtReleaseSessionOptions=C.U)(r),o._OrtCreateSession=(r,a,s)=>(o._OrtCreateSession=C.V)(r,a,s),o._OrtReleaseSession=r=>(o._OrtReleaseSession=C.W)(r),o._OrtGetInputOutputCount=(r,a,s)=>(o._OrtGetInputOutputCount=C.X)(r,a,s),o._OrtGetInputName=(r,a)=>(o._OrtGetInputName=C.Y)(r,a),o._OrtGetOutputName=(r,a)=>(o._OrtGetOutputName=C.Z)(r,a),o._OrtFree=r=>(o._OrtFree=C._)(r),o._OrtCreateTensor=(r,a,s,c,O,_)=>(o._OrtCreateTensor=C.$)(r,a,s,c,O,_),o._OrtGetTensorData=(r,a,s,c,O)=>(o._OrtGetTensorData=C.aa)(r,a,s,c,O),o._OrtReleaseTensor=r=>(o._OrtReleaseTensor=C.ba)(r),o._OrtCreateRunOptions=(r,a,s,c)=>(o._OrtCreateRunOptions=C.ca)(r,a,s,c),o._OrtAddRunConfigEntry=(r,a,s)=>(o._OrtAddRunConfigEntry=C.da)(r,a,s),o._OrtReleaseRunOptions=r=>(o._OrtReleaseRunOptions=C.ea)(r),o._OrtCreateBinding=r=>(o._OrtCreateBinding=C.fa)(r),o._OrtBindInput=(r,a,s)=>(o._OrtBindInput=C.ga)(r,a,s),o._OrtBindOutput=(r,a,s,c)=>(o._OrtBindOutput=C.ha)(r,a,s,c),o._OrtClearBoundOutputs=r=>(o._OrtClearBoundOutputs=C.ia)(r),o._OrtReleaseBinding=r=>(o._OrtReleaseBinding=C.ja)(r),o._OrtRunWithBinding=(r,a,s,c,O)=>(o._OrtRunWithBinding=C.ka)(r,a,s,c,O),o._OrtRun=(r,a,s,c,O,_,A,$)=>(o._OrtRun=C.la)(r,a,s,c,O,_,A,$),o._OrtEndProfiling=r=>(o._OrtEndProfiling=C.ma)(r),o._OrtConfigure=(r,a)=>(o._OrtConfigure=C.na)(r,a),o._OrtAuth=(r,a)=>(o._OrtAuth=C.oa)(r,a);var Le=()=>(Le=C.pa)(),me=o._malloc=r=>(me=o._malloc=C.qa)(r);o._free=r=>(o._free=C.ra)(r);var tt=r=>(tt=C.ta)(r),mt=()=>(mt=C.ua)(),rt=r=>(rt=C.va)(r),gt=r=>(gt=C.wa)(r);o.___start_em_js=882613,o.___stop_em_js=883225;function ht(){var r=C;r=Object.assign({},r);var a=c=>()=>c()>>>0,s=c=>O=>c(O)>>>0;return r.pa=a(r.pa),r.qa=s(r.qa),r.ua=a(r.ua),r.wa=s(r.wa),r}o.stackAlloc=gt,o.stackSave=mt,o.stackRestore=rt,o.addFunction=x,o.UTF8ToString=Oe,o.stringToUTF8=(r,a,s)=>ze(r,ee,a,s),o.lengthBytesUTF8=Te;var $e;re=function r(){$e||nt(),$e||(re=r)};function nt(){if(!(0<de)){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;){var r=o.preRun.shift();He.unshift(r)}for(;0<He.length;)He.shift()(o);if(!(0<de||$e||($e=!0,o.calledRun=!0,we))){for(;0<te.length;)te.shift()(o);for(g(o);0<V.length;)V.shift()(o)}}}return nt(),d.ready}})();typeof Or=="object"&&typeof Pt=="object"?Pt.exports=br:typeof define=="function"&&define.amd&&define([],()=>br)});var _r=st(()=>{});var Er=st(()=>{});var Sr={};Dt(Sr,{cpus:()=>dn});var dn,Ar=Ct(()=>{dn=void 0});var xr=st((Mr,It)=>{"use strict";var Tr=(()=>{var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(d={}){function o(){return V.buffer!=le.buffer&&Ee(),le}function g(){return V.buffer!=le.buffer&&Ee(),he}function l(){return V.buffer!=le.buffer&&Ee(),be}function b(){return V.buffer!=le.buffer&&Ee(),Q}function y(){return V.buffer!=le.buffer&&Ee(),ce}var f=d,M,D;f.ready=new Promise((e,t)=>{M=e,D=t});var P=Object.assign({},f),W="./this.program",U=(e,t)=>{throw t},R=typeof window=="object",N=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E=f.ENVIRONMENT_IS_PTHREAD||!1,F="";function k(e){return f.locateFile?f.locateFile(e,F):F+e}var we,ue,ee;if(I){var S=(Ut(),it(Ft)),G=(Lt(),it(Rt));F=N?G.dirname(F)+"/":__dirname+"/",we=(t,n)=>(t=Oe(t)?new URL(t):G.normalize(t),S.readFileSync(t,n?void 0:"utf8")),ee=t=>(t=we(t,!0),t.buffer||(t=new Uint8Array(t)),t),ue=(t,n,u,h=!0)=>{t=Oe(t)?new URL(t):G.normalize(t),S.readFile(t,h?void 0:"utf8",(w,v)=>{w?u(w):n(h?v.buffer:v)})},!f.thisProgram&&1<process.argv.length&&(W=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),U=(t,n)=>{throw process.exitCode=t,n},f.inspect=()=>"[Emscripten Module object]";let e;try{e=_r()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(R||N)&&(N?F=self.location.href:typeof document<"u"&&document.currentScript&&(F=document.currentScript.src),typeof i<"u"&&i&&(F=i),F.indexOf("blob:")!==0?F=F.substr(0,F.replace(/[?#].*/,"").lastIndexOf("/")+1):F="",I||(we=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},N&&(ee=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ue=(e,t,n)=>{var u=new XMLHttpRequest;u.open("GET",e,!0),u.responseType="arraybuffer",u.onload=()=>{u.status==200||u.status==0&&u.response?t(u.response):n()},u.onerror=n,u.send(null)}));I&&typeof performance>"u"&&(global.performance=Er().performance);var fe=console.log.bind(console),We=console.error.bind(console);I&&(fe=(...e)=>S.writeSync(1,e.join(" ")+`\n`),We=(...e)=>S.writeSync(2,e.join(" ")+`\n`));var He=fe,te=We;Object.assign(f,P),P=null,typeof WebAssembly!="object"&&Z("no native wasm support detected");var V,de,L=!1,re,le,he,be,Q,ce;function Ee(){var e=V.buffer;f.HEAP8=le=new Int8Array(e),f.HEAP16=new Int16Array(e),f.HEAPU8=he=new Uint8Array(e),f.HEAPU16=new Uint16Array(e),f.HEAP32=be=new Int32Array(e),f.HEAPU32=Q=new Uint32Array(e),f.HEAPF32=new Float32Array(e),f.HEAPF64=ce=new Float64Array(e)}var Ce=16777216;if(E)V=f.wasmMemory;else if(f.wasmMemory)V=f.wasmMemory;else if(V=new WebAssembly.Memory({initial:Ce/65536,maximum:65536,shared:!0}),!(V.buffer instanceof SharedArrayBuffer))throw te("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),I&&te("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ee(),Ce=V.buffer.byteLength;var De=[],Pe=[],Me=[],pe=0,Se=null,Ae=null;function ne(){if(pe--,pe==0&&(Se!==null&&(clearInterval(Se),Se=null),Ae)){var e=Ae;Ae=null,e()}}function Z(e){throw e="Aborted("+e+")",te(e),L=!0,re=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),D(e),e}var Fe=e=>e.startsWith("data:application/octet-stream;base64,"),Oe=e=>e.startsWith("file://"),Te;Te="ort-wasm-threaded.wasm",Fe(Te)||(Te=k(Te));function ze(e){if(ee)return ee(e);throw"both async and sync fetching of the wasm failed"}function Ie(e){if(R||N){if(typeof fetch=="function"&&!Oe(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>ze(e));if(ue)return new Promise((t,n)=>{ue(e,u=>t(new Uint8Array(u)),n)})}return Promise.resolve().then(()=>ze(e))}function Ze(e,t,n){return Ie(e).then(u=>WebAssembly.instantiate(u,t)).then(u=>u).then(n,u=>{te(`failed to asynchronously prepare wasm: ${u}`),Z(u)})}function lt(e,t){var n=Te;return typeof WebAssembly.instantiateStreaming!="function"||Fe(n)||Oe(n)||I||typeof fetch!="function"?Ze(n,e,t):fetch(n,{credentials:"same-origin"}).then(u=>WebAssembly.instantiateStreaming(u,e).then(t,function(h){return te(`wasm streaming compile failed: ${h}`),te("falling back to ArrayBuffer instantiation"),Ze(n,e,t)}))}var Ue,Ye={886500:(e,t,n,u)=>{if(typeof f>"u"||!f.hb)return 1;if(e=ke(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=f.hb.get(e),!e)return 2;if(t>>>=0,n>>>=0,u>>>=0,t+n>e.byteLength)return 3;try{return g().set(e.subarray(t,t+n),u>>>0),0}catch{return 4}}};function Be(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var Ge=e=>{e.terminate(),e.onmessage=()=>{}},Ve=e=>{x.Ta.length==0&&(Re(),x.bb(x.Ta[0]));var t=x.Ta.pop();if(!t)return 6;x.Ua.push(t),x.Qa[e.Sa]=t,t.Sa=e.Sa;var n={cmd:"run",start_routine:e.ob,arg:e.lb,pthread_ptr:e.Sa};return I&&t.unref(),t.postMessage(n,e.ub),0},Ne=0,ct=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ke=(e,t,n)=>{t>>>=0;var u=t+n;for(n=t;e[n]&&!(n>=u);)++n;if(16<n-t&&e.buffer&&ct)return ct.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(u="";t<n;){var h=e[t++];if(h&128){var w=e[t++]&63;if((h&224)==192)u+=String.fromCharCode((h&31)<<6|w);else{var v=e[t++]&63;h=(h&240)==224?(h&15)<<12|w<<6|v:(h&7)<<18|w<<12|v<<6|e[t++]&63,65536>h?u+=String.fromCharCode(h):(h-=65536,u+=String.fromCharCode(55296|h>>10,56320|h&1023))}}else u+=String.fromCharCode(h)}return u},ke=(e,t)=>(e>>>=0)?Ke(g(),e,t):"",dt=e=>{var t=Tt();return e=e(),wt(t),e};function z(e,t){var n=arguments.length-2,u=arguments;return dt(()=>{for(var h=Mt(8*n),w=h>>>3,v=0;v<n;v++){var B=u[2+v];y()[w+v>>>0]=B}return fr(e,n,h,t)})}function et(e){if(E)return z(0,1,e);re=e,0<Ne||(x.pb(),f.onExit?.(e),L=!0),U(e,new Be(e))}var xe=e=>{if(re=e,E)throw C(e),"unwind";et(e)};function ye(){for(var e=f.numThreads;e--;)Re();De.unshift(()=>{pe++,pt(()=>ne())})}function Re(){var e=k("ort-wasm-threaded.worker.js");e=new Worker(e),x.Ta.push(e)}function pt(e){E?e():Promise.all(x.Ta.map(x.bb)).then(e)}var x={Ta:[],Ua:[],gb:[],Qa:{},$a(){E?(x.receiveObjectTransfer=x.nb,x.threadInitTLS=x.fb,x.setExitStatus=x.eb):ye()},eb:e=>re=e,xb:["$terminateWorker"],pb:()=>{for(var e of x.Ua)Ge(e);for(e of x.Ta)Ge(e);x.Ta=[],x.Ua=[],x.Qa=[]},cb:e=>{var t=e.Sa;delete x.Qa[t],x.Ta.push(e),x.Ua.splice(x.Ua.indexOf(e),1),e.Sa=0,St(t)},nb(){},fb(){x.gb.forEach(e=>e())},bb:e=>new Promise(t=>{e.onmessage=w=>{w=w.data;var v=w.cmd;if(w.targetThread&&w.targetThread!=yt()){var B=x.Qa[w.targetThread];B?B.postMessage(w,w.transferList):te(`Internal error! Worker sent a message "${v}" to target pthread ${w.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?ve():v==="spawnThread"?Ve(w):v==="cleanupThread"?x.cb(x.Qa[w.thread]):v==="killThread"?(w=w.thread,v=x.Qa[w],delete x.Qa[w],Ge(v),St(w),x.Ua.splice(x.Ua.indexOf(v),1),v.Sa=0):v==="cancelThread"?x.Qa[w.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,I&&!e.Sa&&e.unref(),t(e)):v==="alert"?alert(`Thread ${w.threadId}: ${w.text}`):w.target==="setimmediate"?e.postMessage(w):v==="callHandler"?f[w.handler](...w.args):v&&te(`worker sent an unknown command ${v}`)},e.onerror=w=>{throw te(`worker sent an error! ${w.filename}:${w.lineno}: ${w.message}`),w},I&&(e.on("message",w=>e.onmessage({data:w})),e.on("error",w=>e.onerror(w)));var n=[],u=["onExit"],h;for(h of u)f.hasOwnProperty(h)&&n.push(h);e.postMessage({cmd:"load",handlers:n,urlOrBlob:f.mainScriptUrlOrBlob||i,wasmMemory:V,wasmModule:de})})};f.PThread=x;var qe=e=>{for(;0<e.length;)e.shift()(f)};f.establishStackSpace=()=>{var e=yt(),t=b()[e+52>>>2>>>0];e=b()[e+56>>>2>>>0],dr(t,t-e),wt(t)};function C(e){if(E)return z(1,0,e);xe(e)}var Le=[],me,tt=e=>{var t=Le[e];return t||(e>=Le.length&&(Le.length=e+1),Le[e]=t=me.get(e)),t};f.invokeEntryPoint=(e,t)=>{e=tt(e)(t),0<Ne?x.eb(e):At(e)};function mt(e){this.Za=e-24,this.kb=function(t){b()[this.Za+4>>>2>>>0]=t},this.jb=function(t){b()[this.Za+8>>>2>>>0]=t},this.$a=function(t,n){this.ib(),this.kb(t),this.jb(n)},this.ib=function(){b()[this.Za+16>>>2>>>0]=0}}var rt=0,gt=0;function ht(e,t,n,u){return E?z(2,1,e,t,n,u):$e(e,t,n,u)}function $e(e,t,n,u){if(e>>>=0,t>>>=0,n>>>=0,u>>>=0,typeof SharedArrayBuffer>"u")return te("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var h=[];return E&&h.length===0?ht(e,t,n,u):(e={ob:n,Sa:e,lb:u,ub:h},E?(e.wb="spawnThread",postMessage(e,h),0):Ve(e))}function nt(e,t,n){return E?z(3,1,e,t,n):0}function r(e,t){if(E)return z(4,1,e,t)}var a=e=>{for(var t=0,n=0;n<e.length;++n){var u=e.charCodeAt(n);127>=u?t++:2047>=u?t+=2:55296<=u&&57343>=u?(t+=4,++n):t+=3}return t},s=(e,t,n,u)=>{if(n>>>=0,!(0<u))return 0;var h=n;u=n+u-1;for(var w=0;w<e.length;++w){var v=e.charCodeAt(w);if(55296<=v&&57343>=v){var B=e.charCodeAt(++w);v=65536+((v&1023)<<10)|B&1023}if(127>=v){if(n>=u)break;t[n++>>>0]=v}else{if(2047>=v){if(n+1>=u)break;t[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=u)break;t[n++>>>0]=224|v>>12}else{if(n+3>=u)break;t[n++>>>0]=240|v>>18,t[n++>>>0]=128|v>>12&63}t[n++>>>0]=128|v>>6&63}t[n++>>>0]=128|v&63}}return t[n>>>0]=0,n-h},c=(e,t,n)=>s(e,g(),t,n);function O(e,t){if(E)return z(5,1,e,t)}function _(e,t,n){if(E)return z(6,1,e,t,n)}function A(e,t,n){return E?z(7,1,e,t,n):0}function $(e,t){if(E)return z(8,1,e,t)}function oe(e,t,n){if(E)return z(9,1,e,t,n)}function se(e,t,n,u){if(E)return z(10,1,e,t,n,u)}function ie(e,t,n,u){if(E)return z(11,1,e,t,n,u)}function at(e,t,n,u){if(E)return z(12,1,e,t,n,u)}function ot(e){if(E)return z(13,1,e)}function p(e,t){if(E)return z(14,1,e,t)}function H(e,t,n){if(E)return z(15,1,e,t,n)}function Y(e){e>>>=0,typeof Atomics.vb=="function"&&(Atomics.vb(l(),e>>>2,e).value.then(ve),e+=128,Atomics.store(l(),e>>>2,1))}f.__emscripten_thread_mailbox_await=Y;var ve=()=>{var e=yt();if(e&&(Y(e),e=lr,!L))try{if(e(),!(0<Ne))try{E?At(re):xe(re)}catch(t){t instanceof Be||t=="unwind"||U(1,t)}}catch(t){t instanceof Be||t=="unwind"||U(1,t)}};f.checkMailbox=ve;var Je=[],Xe=e=>e%4===0&&(e%100!==0||e%400===0),$t=[0,31,60,91,121,152,182,213,244,274,305,335],jt=[0,31,59,90,120,151,181,212,243,273,304,334];function zt(e,t,n,u,h,w,v,B){return E?z(16,1,e,t,n,u,h,w,v,B):-52}function Yt(e,t,n,u,h,w,v){if(E)return z(17,1,e,t,n,u,h,w,v)}var Gt=e=>{var t=a(e)+1,n=ir(t);return n&&c(e,n,t),n},vt=[],_t={},Vt=()=>{if(!Et){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},t;for(t in _t)_t[t]===void 0?delete e[t]:e[t]=_t[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);Et=n}return Et},Et;function qt(e,t){if(E)return z(18,1,e,t);e>>>=0,t>>>=0;var n=0;return Vt().forEach((u,h)=>{var w=t+n;for(h=b()[e+4*h>>>2>>>0]=w,w=0;w<u.length;++w)o()[h++>>>0>>>0]=u.charCodeAt(w);o()[h>>>0>>>0]=0,n+=u.length+1}),0}function Jt(e,t){if(E)return z(19,1,e,t);e>>>=0,t>>>=0;var n=Vt();b()[e>>>2>>>0]=n.length;var u=0;return n.forEach(h=>u+=h.length+1),b()[t>>>2>>>0]=u,0}function Xt(e){return E?z(20,1,e):52}function Qt(e,t,n,u){return E?z(21,1,e,t,n,u):52}function Zt(e,t,n,u,h){return E?z(22,1,e,t,n,u,h):70}var Qr=[null,[],[]];function Kt(e,t,n,u){if(E)return z(23,1,e,t,n,u);t>>>=0,n>>>=0,u>>>=0;for(var h=0,w=0;w<n;w++){var v=b()[t>>>2>>>0],B=b()[t+4>>>2>>>0];t+=8;for(var _e=0;_e<B;_e++){var ae=g()[v+_e>>>0],ge=Qr[e];ae===0||ae===10?((e===1?He:te)(Ke(ge,0)),ge.length=0):ge.push(ae)}h+=B}return b()[u>>>2>>>0]=h,0}var Zr=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return n=>(n.set(crypto.getRandomValues(new Uint8Array(n.byteLength))),n);if(I)try{var e=yr("crypto");if(e.randomFillSync)return n=>e.randomFillSync(n);var t=e.randomBytes;return n=>(n.set(t(n.byteLength)),n)}catch{}Z("initRandomDevice")},er=e=>(er=Zr())(e),tr=[31,29,31,30,31,30,31,31,30,31,30,31],rr=[31,28,31,30,31,30,31,31,30,31,30,31];function Kr(e){var t=Array(a(e)+1);return s(e,t,0,t.length),t}var en=(e,t)=>{o().set(e,t>>>0)};function nr(e,t,n,u){function h(m,j,J){for(m=typeof m=="number"?m.toString():m||"";m.length<j;)m=J[0]+m;return m}function w(m,j){return h(m,j,"0")}function v(m,j){function J(hr){return 0>hr?-1:0<hr?1:0}var je;return(je=J(m.getFullYear()-j.getFullYear()))===0&&(je=J(m.getMonth()-j.getMonth()))===0&&(je=J(m.getDate()-j.getDate())),je}function B(m){switch(m.getDay()){case 0:return new Date(m.getFullYear()-1,11,29);case 1:return m;case 2:return new Date(m.getFullYear(),0,3);case 3:return new Date(m.getFullYear(),0,2);case 4:return new Date(m.getFullYear(),0,1);case 5:return new Date(m.getFullYear()-1,11,31);case 6:return new Date(m.getFullYear()-1,11,30)}}function _e(m){var j=m.Va;for(m=new Date(new Date(m.Wa+1900,0,1).getTime());0<j;){var J=m.getMonth(),je=(Xe(m.getFullYear())?tr:rr)[J];if(j>je-m.getDate())j-=je-m.getDate()+1,m.setDate(1),11>J?m.setMonth(J+1):(m.setMonth(0),m.setFullYear(m.getFullYear()+1));else{m.setDate(m.getDate()+j);break}}return J=new Date(m.getFullYear()+1,0,4),j=B(new Date(m.getFullYear(),0,4)),J=B(J),0>=v(j,m)?0>=v(J,m)?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,u>>>=0;var ae=b()[u+40>>>2>>>0];u={sb:l()[u>>>2>>>0],rb:l()[u+4>>>2>>>0],Xa:l()[u+8>>>2>>>0],ab:l()[u+12>>>2>>>0],Ya:l()[u+16>>>2>>>0],Wa:l()[u+20>>>2>>>0],Ra:l()[u+24>>>2>>>0],Va:l()[u+28>>>2>>>0],yb:l()[u+32>>>2>>>0],qb:l()[u+36>>>2>>>0],tb:ae?ke(ae):""},n=ke(n),ae={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ge in ae)n=n.replace(new RegExp(ge,"g"),ae[ge]);var mr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),gr="January February March April May June July August September October November December".split(" ");ae={"%a":m=>mr[m.Ra].substring(0,3),"%A":m=>mr[m.Ra],"%b":m=>gr[m.Ya].substring(0,3),"%B":m=>gr[m.Ya],"%C":m=>w((m.Wa+1900)/100|0,2),"%d":m=>w(m.ab,2),"%e":m=>h(m.ab,2," "),"%g":m=>_e(m).toString().substring(2),"%G":m=>_e(m),"%H":m=>w(m.Xa,2),"%I":m=>(m=m.Xa,m==0?m=12:12<m&&(m-=12),w(m,2)),"%j":m=>{for(var j=0,J=0;J<=m.Ya-1;j+=(Xe(m.Wa+1900)?tr:rr)[J++]);return w(m.ab+j,3)},"%m":m=>w(m.Ya+1,2),"%M":m=>w(m.rb,2),"%n":()=>`\n`,"%p":m=>0<=m.Xa&&12>m.Xa?"AM":"PM","%S":m=>w(m.sb,2),"%t":()=>"\t","%u":m=>m.Ra||7,"%U":m=>w(Math.floor((m.Va+7-m.Ra)/7),2),"%V":m=>{var j=Math.floor((m.Va+7-(m.Ra+6)%7)/7);if(2>=(m.Ra+371-m.Va-2)%7&&j++,j)j==53&&(J=(m.Ra+371-m.Va)%7,J==4||J==3&&Xe(m.Wa)||(j=1));else{j=52;var J=(m.Ra+7-m.Va-1)%7;(J==4||J==5&&Xe(m.Wa%400-1))&&j++}return w(j,2)},"%w":m=>m.Ra,"%W":m=>w(Math.floor((m.Va+7-(m.Ra+6)%7)/7),2),"%y":m=>(m.Wa+1900).toString().substring(2),"%Y":m=>m.Wa+1900,"%z":m=>{m=m.qb;var j=0<=m;return m=Math.abs(m)/60,(j?"+":"-")+("0000"+(m/60*100+m%60)).slice(-4)},"%Z":m=>m.tb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(ge in ae)n.includes(ge)&&(n=n.replace(new RegExp(ge,"g"),ae[ge](u)));return n=n.replace(/\\0\\0/g,"%"),ge=Kr(n),ge.length>t?0:(en(ge,e),ge.length-1)}var Qe,ar=[],or=(e,t)=>{if(!Qe){Qe=new WeakMap;var n=me.length;if(Qe)for(var u=0;u<0+n;u++){var h=tt(u);h&&Qe.set(h,u)}}if(n=Qe.get(e)||0)return n;if(ar.length)n=ar.pop();else{try{me.grow(1)}catch(B){throw B instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":B}n=me.length-1}try{u=n,me.set(u,e),Le[u]=me.get(u)}catch(B){if(!(B instanceof TypeError))throw B;if(typeof WebAssembly.Function=="function"){u=WebAssembly.Function,h={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var w={parameters:[],results:t[0]=="v"?[]:[h[t[0]]]},v=1;v<t.length;++v)w.parameters.push(h[t[v]]);t=new u(w,e)}else{for(u=[1],h=t.slice(0,1),t=t.slice(1),w={i:127,p:127,j:126,f:125,d:124,e:111},u.push(96),v=t.length,128>v?u.push(v):u.push(v%128|128,v>>7),v=0;v<t.length;++v)u.push(w[t[v]]);h=="v"?u.push(0):u.push(1,w[h]),t=[0,97,115,109,1,0,0,0,1],h=u.length,128>h?t.push(h):t.push(h%128|128,h>>7),t.push.apply(t,u),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}u=n,me.set(u,t),Le[u]=me.get(u)}return Qe.set(e,n),n};x.$a();var tn=[et,C,ht,nt,r,O,_,A,$,oe,se,ie,at,ot,p,H,zt,Yt,qt,Jt,Xt,Qt,Zt,Kt],rn={b:function(e,t,n){throw e>>>=0,new mt(e).$a(t>>>0,n>>>0),rt=e,gt++,rt},O:function(e){ur(e>>>0,!N,1,!R,131072,!1),x.fb()},m:function(e){e>>>=0,E?postMessage({cmd:"cleanupThread",thread:e}):x.cb(x.Qa[e])},J:$e,h:nt,U:r,F:O,H:_,y:A,S:$,L:oe,R:se,o:ie,G:at,D:ot,T:p,E:H,p:()=>1,B:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>ve()):E?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=x.Qa[e])&&e.postMessage({cmd:"checkMailbox"})},K:function(e,t,n,u){t>>>=0,Je.length=n,u=u>>>0>>>3;for(var h=0;h<n;h++)Je[h]=y()[u+h>>>0];return e=0>e?Ye[-e-1]:tn[e],x.mb=t,t=e.apply(null,Je),x.mb=0,t},M:Y,W:function(e){I&&x.Qa[e>>>0].ref()},s:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getUTCSeconds(),l()[n+4>>>2>>>0]=e.getUTCMinutes(),l()[n+8>>>2>>>0]=e.getUTCHours(),l()[n+12>>>2>>>0]=e.getUTCDate(),l()[n+16>>>2>>>0]=e.getUTCMonth(),l()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,l()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,l()[n+28>>>2>>>0]=e},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getSeconds(),l()[n+4>>>2>>>0]=e.getMinutes(),l()[n+8>>>2>>>0]=e.getHours(),l()[n+12>>>2>>>0]=e.getDate(),l()[n+16>>>2>>>0]=e.getMonth(),l()[n+20>>>2>>>0]=e.getFullYear()-1900,l()[n+24>>>2>>>0]=e.getDay(),t=(Xe(e.getFullYear())?$t:jt)[e.getMonth()]+e.getDate()-1|0,l()[n+28>>>2>>>0]=t,l()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var u=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=u&&e.getTimezoneOffset()==Math.min(u,t))|0,l()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(l()[e+20>>>2>>>0]+1900,l()[e+16>>>2>>>0],l()[e+12>>>2>>>0],l()[e+8>>>2>>>0],l()[e+4>>>2>>>0],l()[e>>>2>>>0],0),n=l()[e+32>>>2>>>0],u=t.getTimezoneOffset(),h=new Date(t.getFullYear(),6,1).getTimezoneOffset(),w=new Date(t.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(w,h);return 0>n?l()[e+32>>>2>>>0]=+(h!=w&&v==u):0<n!=(v==u)&&(h=Math.max(w,h),t.setTime(t.getTime()+6e4*((0<n?v:h)-u))),l()[e+24>>>2>>>0]=t.getDay(),n=(Xe(t.getFullYear())?$t:jt)[t.getMonth()]+t.getDate()-1|0,l()[e+28>>>2>>>0]=n,l()[e>>>2>>>0]=t.getSeconds(),l()[e+4>>>2>>>0]=t.getMinutes(),l()[e+8>>>2>>>0]=t.getHours(),l()[e+12>>>2>>>0]=t.getDate(),l()[e+16>>>2>>>0]=t.getMonth(),l()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(l()[sr()>>>2>>>0]=61,e=-1):e/=1e3,cr((Ue=e,1<=+Math.abs(Ue)?0<Ue?+Math.floor(Ue/4294967296)>>>0:~~+Math.ceil((Ue-+(~~Ue>>>0))/4294967296)>>>0:0)),e>>>0},q:zt,r:Yt,A:function(e,t,n){function u(ae){return(ae=ae.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ae[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var h=new Date().getFullYear(),w=new Date(h,0,1),v=new Date(h,6,1);h=w.getTimezoneOffset();var B=v.getTimezoneOffset(),_e=Math.max(h,B);b()[e>>>2>>>0]=60*_e,l()[t>>>2>>>0]=+(h!=B),e=u(w),t=u(v),e=Gt(e),t=Gt(t),B<h?(b()[n>>>2>>>0]=e,b()[n+4>>>2>>>0]=t):(b()[n>>>2>>>0]=t,b()[n+4>>>2>>>0]=e)},c:()=>{Z("")},N:function(e,t,n){e>>>=0,t>>>=0,n>>>=0,vt.length=0;for(var u;u=g()[t++>>>0];){var h=u!=105;h&=u!=112,n+=h&&n%8?4:0,vt.push(u==112?b()[n>>>2>>>0]:u==105?l()[n>>>2>>>0]:y()[n>>>3>>>0]),n+=h?8:4}return Ye[e].apply(null,vt)},n:()=>{},i:()=>Date.now(),V:()=>{throw Ne+=1,"unwind"},C:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>I?(Ar(),it(Sr)).cpus().length:navigator.hardwareConcurrency,z:function(e){e>>>=0;var t=g().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var u=t*(1+.2/n);u=Math.min(u,e+100663296);var h=Math;u=Math.max(e,u);e:{h=(h.min.call(h,4294901760,u+(65536-u%65536)%65536)-V.buffer.byteLength+65535)/65536;try{V.grow(h),Ee();var w=1;break e}catch{}w=void 0}if(w)return!0}return!1},P:qt,Q:Jt,I:xe,g:Xt,l:Qt,v:Zt,k:Kt,w:function(e,t){return e>>>=0,t>>>=0,er(g().subarray(e>>>0,e+t>>>0)),0},a:V||f.wasmMemory,x:nr,d:function(e,t,n,u){return nr(e>>>0,t>>>0,n>>>0,u>>>0)},j:function(e,t,n,u){let h=me.length;e=new Uint8Array(g().slice(e+t,e+n));try{var w=new WebAssembly.Module(e),v=new WebAssembly.Instance(w,{env:{memory:V}}),B;for(B in v.exports)or(v.exports[B]);return h<me.length?h:u}catch(_e){return console.log(_e),u}}},T=function(){function e(n,u){return T=n.exports,T=nn(),x.gb.push(T.Da),me=T.Ea,Pe.unshift(T.X),de=u,ne(),T}var t={a:rn};if(pe++,f.instantiateWasm)try{return f.instantiateWasm(t,e)}catch(n){te(`Module.instantiateWasm callback failed with error: ${n}`),D(n)}return lt(t,function(n){e(n.instance,n.module)}).catch(D),{}}();f._OrtInit=(e,t)=>(f._OrtInit=T.Y)(e,t),f._OrtGetLastError=(e,t)=>(f._OrtGetLastError=T.Z)(e,t),f._OrtCreateSessionOptions=(e,t,n,u,h,w,v,B,_e,ae)=>(f._OrtCreateSessionOptions=T._)(e,t,n,u,h,w,v,B,_e,ae),f._OrtAppendExecutionProvider=(e,t)=>(f._OrtAppendExecutionProvider=T.$)(e,t),f._OrtAddFreeDimensionOverride=(e,t,n)=>(f._OrtAddFreeDimensionOverride=T.aa)(e,t,n),f._OrtAddSessionConfigEntry=(e,t,n)=>(f._OrtAddSessionConfigEntry=T.ba)(e,t,n),f._OrtReleaseSessionOptions=e=>(f._OrtReleaseSessionOptions=T.ca)(e),f._OrtCreateSession=(e,t,n)=>(f._OrtCreateSession=T.da)(e,t,n),f._OrtReleaseSession=e=>(f._OrtReleaseSession=T.ea)(e),f._OrtGetInputOutputCount=(e,t,n)=>(f._OrtGetInputOutputCount=T.fa)(e,t,n),f._OrtGetInputName=(e,t)=>(f._OrtGetInputName=T.ga)(e,t),f._OrtGetOutputName=(e,t)=>(f._OrtGetOutputName=T.ha)(e,t),f._OrtFree=e=>(f._OrtFree=T.ia)(e),f._OrtCreateTensor=(e,t,n,u,h,w)=>(f._OrtCreateTensor=T.ja)(e,t,n,u,h,w),f._OrtGetTensorData=(e,t,n,u,h)=>(f._OrtGetTensorData=T.ka)(e,t,n,u,h),f._OrtReleaseTensor=e=>(f._OrtReleaseTensor=T.la)(e),f._OrtCreateRunOptions=(e,t,n,u)=>(f._OrtCreateRunOptions=T.ma)(e,t,n,u),f._OrtAddRunConfigEntry=(e,t,n)=>(f._OrtAddRunConfigEntry=T.na)(e,t,n),f._OrtReleaseRunOptions=e=>(f._OrtReleaseRunOptions=T.oa)(e),f._OrtCreateBinding=e=>(f._OrtCreateBinding=T.pa)(e),f._OrtBindInput=(e,t,n)=>(f._OrtBindInput=T.qa)(e,t,n),f._OrtBindOutput=(e,t,n,u)=>(f._OrtBindOutput=T.ra)(e,t,n,u),f._OrtClearBoundOutputs=e=>(f._OrtClearBoundOutputs=T.sa)(e),f._OrtReleaseBinding=e=>(f._OrtReleaseBinding=T.ta)(e),f._OrtRunWithBinding=(e,t,n,u,h)=>(f._OrtRunWithBinding=T.ua)(e,t,n,u,h),f._OrtRun=(e,t,n,u,h,w,v,B)=>(f._OrtRun=T.va)(e,t,n,u,h,w,v,B),f._OrtEndProfiling=e=>(f._OrtEndProfiling=T.wa)(e),f._OrtConfigure=(e,t)=>(f._OrtConfigure=T.xa)(e,t),f._OrtAuth=(e,t)=>(f._OrtAuth=T.ya)(e,t);var sr=()=>(sr=T.za)(),yt=f._pthread_self=()=>(yt=f._pthread_self=T.Aa)(),ir=f._malloc=e=>(ir=f._malloc=T.Ba)(e);f._free=e=>(f._free=T.Ca)(e),f.__emscripten_tls_init=()=>(f.__emscripten_tls_init=T.Da)();var ur=f.__emscripten_thread_init=(e,t,n,u,h,w)=>(ur=f.__emscripten_thread_init=T.Fa)(e,t,n,u,h,w);f.__emscripten_thread_crashed=()=>(f.__emscripten_thread_crashed=T.Ga)();var fr=(e,t,n,u)=>(fr=T.Ha)(e,t,n,u),St=e=>(St=T.Ia)(e),At=f.__emscripten_thread_exit=e=>(At=f.__emscripten_thread_exit=T.Ja)(e),lr=()=>(lr=T.Ka)(),cr=e=>(cr=T.La)(e),dr=(e,t)=>(dr=T.Ma)(e,t),Tt=()=>(Tt=T.Na)(),wt=e=>(wt=T.Oa)(e),Mt=e=>(Mt=T.Pa)(e);f.___start_em_js=887001,f.___stop_em_js=887613;function nn(){var e=T;e=Object.assign({},e);var t=u=>()=>u()>>>0,n=u=>h=>u(h)>>>0;return e.za=t(e.za),e.Aa=t(e.Aa),e.Ba=n(e.Ba),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Na=t(e.Na),e.Pa=n(e.Pa),e}f.wasmMemory=V,f.stackAlloc=Mt,f.stackSave=Tt,f.stackRestore=wt,f.keepRuntimeAlive=()=>0<Ne,f.addFunction=or,f.UTF8ToString=ke,f.stringToUTF8=c,f.lengthBytesUTF8=a,f.ExitStatus=Be,f.PThread=x;var bt;Ae=function e(){bt||pr(),bt||(Ae=e)};function pr(){if(!(0<pe))if(E)M(f),E||qe(Pe),startWorker(f);else{if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)De.unshift(f.preRun.shift());qe(De),0<pe||bt||(bt=!0,f.calledRun=!0,L||(E||qe(Pe),M(f),E||qe(Me)))}}return pr(),d.ready}})();typeof Mr=="object"&&typeof It=="object"?It.exports=Tr:typeof define=="function"&&define.amd&&define([],()=>Tr)});var Cr=st((Cn,pn)=>{pn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Fr;Fr=vr();var mn=xr(),Bt,Wt=!1,Ot=!1,Dr=!1,gn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},hn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},yn=(i,d)=>i?d?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ur=async i=>{if(Wt)return Promise.resolve();if(Ot)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Dr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");Ot=!0;let d=i.initTimeout,o=i.numThreads,g=i.simd,l=gn(o),b=g&&hn(),y=i.wasmPaths,f=typeof y=="string"?y:void 0,M=yn(b,l),D=typeof y=="object"?y[M]:void 0,P=!1,W=[];if(d>0&&W.push(new Promise(U=>{setTimeout(()=>{P=!0,U()},d)})),W.push(new Promise((U,R)=>{let N=l?mn:Fr,I={locateFile:(E,F)=>l&&E.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Cr()],{type:"text/javascript"})):E.endsWith(".wasm")?D||(f??F)+M:F+E};if(l)if(I.numThreads=o,typeof Blob>"u")I.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let E=`var ortWasmThreaded=${N.toString()};`;I.mainScriptUrlOrBlob=new Blob([E],{type:"text/javascript"})}N(I).then(E=>{Ot=!1,Wt=!0,Bt=E,U()},E=>{Ot=!1,Dr=!0,R(E)})})),await Promise.race(W),P)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},q=()=>{if(Wt&&Bt)return Bt;throw new Error("WebAssembly is not initialized yet.")};var K=(i,d)=>{let o=q(),g=o.lengthBytesUTF8(i)+1,l=o._malloc(g);return o.stringToUTF8(i,l,g),d.push(l),l},ut=(i,d,o,g)=>{if(typeof i=="object"&&i!==null){if(o.has(i))throw new Error("Circular reference in options");o.add(i)}Object.entries(i).forEach(([l,b])=>{let y=d?d+l:l;if(typeof b=="object")ut(b,y+".",o,g);else if(typeof b=="string"||typeof b=="number")g(y,b.toString());else if(typeof b=="boolean")g(y,b?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof b}`)})},X=i=>{let d=q(),o=d.stackSave();try{let g=d.stackAlloc(8);d._OrtGetLastError(g,g+4);let l=d.HEAP32[g/4],b=d.HEAPU32[g/4+1],y=b?d.UTF8ToString(b):"";throw new Error(`${i} ERROR_CODE: ${l}, ERROR_MESSAGE: ${y}`)}finally{d.stackRestore(o)}};var Rr=i=>{let d=q(),o=0,g=[],l=i||{};try{if(i?.logSeverityLevel===void 0)l.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)l.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(l.terminate=!1);let b=0;return i?.tag!==void 0&&(b=K(i.tag,g)),o=d._OrtCreateRunOptions(l.logSeverityLevel,l.logVerbosityLevel,!!l.terminate,b),o===0&&X("Can\'t create run options."),i?.extra!==void 0&&ut(i.extra,"",new WeakSet,(y,f)=>{let M=K(y,g),D=K(f,g);d._OrtAddRunConfigEntry(o,M,D)!==0&&X(`Can\'t set a run config entry: ${y} - ${f}.`)}),[o,g]}catch(b){throw o!==0&&d._OrtReleaseRunOptions(o),g.forEach(y=>d._free(y)),b}};var wn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},bn=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},On=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let d=i.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(o=>(typeof o=="string"?o:o.name)==="webgpu")&&(i.enableMemPattern=!1)},vn=(i,d,o)=>{for(let g of d){let l=typeof g=="string"?g:g.name;switch(l){case"webnn":if(l="WEBNN",typeof g!="string"){let y=g;if(y?.deviceType){let f=K("deviceType",o),M=K(y.deviceType,o);q()._OrtAddSessionConfigEntry(i,f,M)!==0&&X(`Can\'t set a session config entry: \'deviceType\' - ${y.deviceType}.`)}if(y?.numThreads){let f=y.numThreads;(typeof f!="number"||!Number.isInteger(f)||f<0)&&(f=0);let M=K("numThreads",o),D=K(f.toString(),o);q()._OrtAddSessionConfigEntry(i,M,D)!==0&&X(`Can\'t set a session config entry: \'numThreads\' - ${y.numThreads}.`)}if(y?.powerPreference){let f=K("powerPreference",o),M=K(y.powerPreference,o);q()._OrtAddSessionConfigEntry(i,f,M)!==0&&X(`Can\'t set a session config entry: \'powerPreference\' - ${y.powerPreference}.`)}}break;case"webgpu":if(l="JS",typeof g!="string"){let y=g;if(y?.preferredLayout){if(y.preferredLayout!=="NCHW"&&y.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${y.preferredLayout}`);let f=K("preferredLayout",o),M=K(y.preferredLayout,o);q()._OrtAddSessionConfigEntry(i,f,M)!==0&&X(`Can\'t set a session config entry: \'preferredLayout\' - ${y.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${l}`)}let b=K(l,o);q()._OrtAppendExecutionProvider(i,b)!==0&&X(`Can\'t append execution provider: ${l}.`)}},Lr=i=>{let d=q(),o=0,g=[],l=i||{};On(l);try{let b=wn(l.graphOptimizationLevel??"all"),y=bn(l.executionMode??"sequential"),f=typeof l.logId=="string"?K(l.logId,g):0,M=l.logSeverityLevel??2;if(!Number.isInteger(M)||M<0||M>4)throw new Error(`log serverity level is not valid: ${M}`);let D=l.logVerbosityLevel??0;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log verbosity level is not valid: ${D}`);let P=typeof l.optimizedModelFilePath=="string"?K(l.optimizedModelFilePath,g):0;if(o=d._OrtCreateSessionOptions(b,!!l.enableCpuMemArena,!!l.enableMemPattern,y,!!l.enableProfiling,0,f,M,D,P),o===0&&X("Can\'t create session options."),l.executionProviders&&vn(o,l.executionProviders,g),l.freeDimensionOverrides)for(let[W,U]of Object.entries(l.freeDimensionOverrides)){if(typeof W!="string")throw new Error(`free dimension override name must be a string: ${W}`);if(typeof U!="number"||!Number.isInteger(U)||U<0)throw new Error(`free dimension override value must be a non-negative integer: ${U}`);let R=K(W,g);d._OrtAddFreeDimensionOverride(o,R,U)!==0&&X(`Can\'t set a free dimension override: ${W} - ${U}.`)}return l.extra!==void 0&&ut(l.extra,"",new WeakSet,(W,U)=>{let R=K(W,g),N=K(U,g);d._OrtAddSessionConfigEntry(o,R,N)!==0&&X(`Can\'t set a session config entry: ${W} - ${U}.`)}),[o,g]}catch(b){throw o!==0&&d._OrtReleaseSessionOptions(o),g.forEach(y=>d._free(y)),b}};var Ht=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Pr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Nt=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Ir=i=>{switch(i){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Br=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Wr=i=>i==="float32"||i==="int32"||i==="int64"||i==="bool"||i==="float16"||i==="uint32",Hr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var Nr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let o=(void 0)(i),g=[];for await(let l of o)g.push(l);return new Uint8Array(Buffer.concat(g))}throw d}else{let d=await fetch(i);if(!d.ok)throw new Error(`failed to load external data file: ${i}`);let o=d.headers.get("Content-Length"),g=o?parseInt(o,10):0;if(g<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let l=d.body.getReader(),b;try{b=new ArrayBuffer(g)}catch(f){if(f instanceof RangeError){let M=Math.ceil(g/65536);b=new WebAssembly.Memory({initial:M,maximum:M}).buffer}else throw f}let y=0;for(;;){let{done:f,value:M}=await l.read();if(f)break;let D=M.byteLength;new Uint8Array(b,y,D).set(M),y+=D}return new Uint8Array(b,0,g)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var _n=(i,d)=>{q()._OrtInit(i,d)!==0&&X("Can\'t initialize onnxruntime.")},$r=async i=>{_n(i.wasm.numThreads,Br(i.logLevel))},jr=async(i,d)=>{},ft=new Map,En=i=>{let d=q(),o=d.stackSave();try{let g=d.stackAlloc(8);return d._OrtGetInputOutputCount(i,g,g+4)!==0&&X("Can\'t get session input/output count."),[d.HEAP32[g/4],d.HEAP32[g/4+1]]}finally{d.stackRestore(o)}},kt=i=>{let d=q(),o=d._malloc(i.byteLength);if(o===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return d.HEAPU8.set(i,o),[o,i.byteLength]},zr=async(i,d)=>{let o,g,l=q();Array.isArray(i)?[o,g]=i:i.buffer===l.HEAPU8.buffer?[o,g]=[i.byteOffset,i.byteLength]:[o,g]=kt(i);let b=0,y=0,f=0,M=[],D=[],P=[];try{if([y,M]=Lr(d),d?.externalData&&l.mountExternalData){let F=[];for(let k of d.externalData){let we=typeof k=="string"?k:k.path;F.push(Nr(typeof k=="string"?k:k.data).then(ue=>{l.mountExternalData(we,ue)}))}await Promise.all(F)}b=l._OrtCreateSession(o,g,y),b===0&&X("Can\'t create a session.");let[W,U]=En(b),R=[],N=[],I=[];for(let F=0;F<W;F++){let k=l._OrtGetInputName(b,F);k===0&&X("Can\'t get an input name."),D.push(k),R.push(l.UTF8ToString(k))}for(let F=0;F<U;F++){let k=l._OrtGetOutputName(b,F);k===0&&X("Can\'t get an output name."),P.push(k);let we=l.UTF8ToString(k);N.push(we)}let E=null;return ft.set(b,[b,D,P,E]),[b,R,N]}catch(W){throw D.forEach(U=>l._OrtFree(U)),P.forEach(U=>l._OrtFree(U)),f!==0&&l._OrtReleaseBinding(f),b!==0&&l._OrtReleaseSession(b),W}finally{l._free(o),y!==0&&l._OrtReleaseSessionOptions(y),M.forEach(W=>l._free(W)),l.unmountExternalData?.()}},Yr=i=>{let d=q(),o=ft.get(i);if(!o)throw new Error(`cannot release session. invalid session id: ${i}`);let[g,l,b,y]=o;y&&d._OrtReleaseBinding(y.handle),d.jsepUnregisterBuffers?.(i),l.forEach(f=>d._OrtFree(f)),b.forEach(f=>d._OrtFree(f)),d._OrtReleaseSession(g),ft.delete(i)},kr=(i,d,o,g,l)=>{if(!i){d.push(0);return}let b=q(),y=i[0],f=i[1],M=i[3],D,P;if(y==="string"&&M==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(M==="gpu-buffer"){let R=i[2].gpuBuffer,N=Nt(Ht(y));P=f.reduce((I,E)=>I*E,1)*N,D=b.jsepRegisterBuffer(g,l,R,P)}else{let R=i[2];if(Array.isArray(R)){P=4*R.length,D=b._malloc(P),o.push(D);let N=D/4;for(let I=0;I<R.length;I++){if(typeof R[I]!="string")throw new TypeError(`tensor data at index ${I} is not a string`);b.HEAPU32[N++]=K(R[I],o)}}else P=R.byteLength,D=b._malloc(P),o.push(D),b.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,P),D)}let W=b.stackSave(),U=b.stackAlloc(4*f.length);try{let R=U/4;f.forEach(I=>b.HEAP32[R++]=I);let N=b._OrtCreateTensor(Ht(y),D,P,U,f.length,Hr(M));N===0&&X(`Can\'t create tensor for input/output. session=${g}, index=${l}.`),d.push(N)}finally{b.stackRestore(W)}},Gr=i=>{let o=new TextEncoder().encode(i),g=q(),l=g._malloc(o.byteLength);g.HEAPU8.set(o,l);let b=g._OrtConfigure(l,o.byteLength);if(b===0)throw new Error("Can\'t get an configure key");let y=g.UTF8ToString(b);return g._OrtFree(b),y},Vr=i=>{let o=new TextEncoder().encode(i),g=q(),l=g._malloc(o.byteLength);g.HEAPU8.set(o,l);let b=g._OrtAuth(l,o.byteLength);if(b===0)throw new Error("Can\'t get an auth result");let y=g.UTF8ToString(b);return g._OrtFree(b),y},qr=async(i,d,o,g,l,b)=>{let y=q(),f=ft.get(i);if(!f)throw new Error(`cannot run inference. invalid session id: ${i}`);let[M,D,P,W]=f,U=d.length,R=g.length,N=0,I=[],E=[],F=[],k=[],we=y.stackSave(),ue=y.stackAlloc(U*4),ee=y.stackAlloc(U*4),S=y.stackAlloc(R*4),G=y.stackAlloc(R*4);try{[N,I]=Rr(b);for(let L=0;L<U;L++)kr(o[L],E,k,i,d[L]);for(let L=0;L<R;L++)kr(l[L],F,k,i,U+g[L]);let fe=ue/4,We=ee/4,He=S/4,te=G/4;for(let L=0;L<U;L++)y.HEAPU32[fe++]=E[L],y.HEAPU32[We++]=D[d[L]];for(let L=0;L<R;L++)y.HEAPU32[He++]=F[L],y.HEAPU32[te++]=P[g[L]];let V;V=await y._OrtRun(M,ee,ue,U,G,R,S,N),V!==0&&X("failed to call OrtRun().");let de=[];for(let L=0;L<R;L++){let re=y.HEAPU32[S/4+L];if(re===F[L]){de.push(l[L]);continue}let le=y.stackSave(),he=y.stackAlloc(4*4),be=!1,Q,ce=0;try{y._OrtGetTensorData(re,he,he+4,he+8,he+12)!==0&&X(`Can\'t access output tensor data on index ${L}.`);let Ce=he/4,De=y.HEAPU32[Ce++];ce=y.HEAPU32[Ce++];let Pe=y.HEAPU32[Ce++],Me=y.HEAPU32[Ce++],pe=[];for(let ne=0;ne<Me;ne++)pe.push(y.HEAPU32[Pe/4+ne]);y._OrtFree(Pe);let Se=pe.reduce((ne,Z)=>ne*Z,1);Q=Pr(De);let Ae=W?.outputPreferredLocations[g[L]];if(Q==="string"){if(Ae==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let ne=[],Z=ce/4;for(let Fe=0;Fe<Se;Fe++){let Oe=y.HEAPU32[Z++],Te=Fe===Se-1?void 0:y.HEAPU32[Z]-Oe;ne.push(y.UTF8ToString(Oe,Te))}de.push([Q,pe,ne,"cpu"])}else if(Ae==="gpu-buffer"&&Se>0){let ne=y.jsepGetBuffer(ce),Z=Nt(De);if(Z===void 0||!Wr(Q))throw new Error(`Unsupported data type: ${Q}`);be=!0,de.push([Q,pe,{gpuBuffer:ne,download:y.jsepCreateDownloader(ne,Se*Z,Q),dispose:()=>{y._OrtReleaseTensor(re)}},"gpu-buffer"])}else{let ne=Ir(Q),Z=new ne(Se);new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength).set(y.HEAPU8.subarray(ce,ce+Z.byteLength)),de.push([Q,pe,Z,"cpu"])}}finally{y.stackRestore(le),Q==="string"&&ce&&y._free(ce),be||y._OrtReleaseTensor(re)}}return W&&y._OrtClearBoundOutputs(W.handle),de}finally{y.stackRestore(we),E.forEach(fe=>y._OrtReleaseTensor(fe)),F.forEach(fe=>y._OrtReleaseTensor(fe)),k.forEach(fe=>y._free(fe)),N!==0&&y._OrtReleaseRunOptions(N),I.forEach(fe=>y._free(fe))}},Jr=i=>{let d=q(),o=ft.get(i);if(!o)throw new Error("invalid session id");let g=o[0],l=d._OrtEndProfiling(g);l===0&&X("Can\'t get an profile file name."),d._OrtFree(l)},Xr=i=>{let d=[];for(let o of i){let g=o[2];!Array.isArray(g)&&"buffer"in g&&d.push(g.buffer)}return d};self.onmessage=i=>{let{type:d,in:o}=i.data;try{switch(d){case"init-wasm":Ur(o.wasm).then(()=>{$r(o).then(()=>{postMessage({type:d})},g=>{postMessage({type:d,err:g})})},g=>{postMessage({type:d,err:g})});break;case"init-ep":{let{epName:g,env:l}=o;jr(l,g).then(()=>{postMessage({type:d})},b=>{postMessage({type:d,err:b})});break}case"copy-from":{let{buffer:g}=o,l=kt(g);postMessage({type:d,out:l});break}case"create":{let{model:g,options:l}=o;zr(g,l).then(b=>{postMessage({type:d,out:b})},b=>{postMessage({type:d,err:b})});break}case"release":Yr(o),postMessage({type:d});break;case"run":{let{sessionId:g,inputIndices:l,inputs:b,outputIndices:y,options:f}=o;qr(g,l,b,y,new Array(y.length).fill(null),f).then(M=>{M.some(D=>D[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:M},Xr(M))},M=>{postMessage({type:d,err:M})});break}case"configure":try{let g=Gr(i.data.in);postMessage({type:"configure",out:g})}catch(g){postMessage({type:"configure",err:g})}break;case"auth":try{let g=Vr(i.data.in);postMessage({type:"auth",out:g})}catch(g){postMessage({type:"auth",err:g})}break;case"end-profiling":Jr(o),postMessage({type:d});break;default:}}catch(g){postMessage({type:d,err:g})}};})();\n';}),Yt,it,In,Mo,Go,ya,Ta,or,ir,Eg,Ro,cd,pd,dd,hd,md,bd,gd,yd,Td,xa=L(function(){var _document;It(),ld(),Kr(),Yt=function Yt(){return!!ee.wasm.proxy&&(typeof document==="undefined"?"undefined":_typeof(document))<"u";},In=!1,Mo=!1,Go=!1,Ta=new Map(),or=function or(e,t){var r=Ta.get(e);r?r.push(t):Ta.set(e,[t]);},ir=function ir(){if(In||!Mo||Go||!it)throw new Error("worker not ready");},Eg=function Eg(e){switch(e.data.type){case"init-wasm":In=!1,e.data.err?(Go=!0,ya[1](e.data.err)):(Mo=!0,ya[0]());break;case"init-ep":case"copy-from":case"create":case"configure":case"auth":case"release":case"run":case"end-profiling":{var t=Ta.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break;}}},Ro=(typeof document==="undefined"?"undefined":_typeof(document))<"u"?(_document=document)===null||_document===void 0||(_document=_document.currentScript)===null||_document===void 0?void 0:_document.src:void 0,cd=/*#__PURE__*/function(){var _ref23=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee53(){return _regeneratorRuntime().wrap(function _callee53$(_context56){while(1)switch(_context56.prev=_context56.next){case 0:if(Mo){_context56.next=21;break;}if(!In){_context56.next=3;break;}throw new Error("multiple calls to 'initWasm()' detected.");case 3:if(!Go){_context56.next=5;break;}throw new Error("previous call to 'initWasm()' failed.");case 5:if(!(In=!0,Yt())){_context56.next=7;break;}return _context56.abrupt("return",(void 0===ee.wasm.wasmPaths&&Ro&&0!==Ro.indexOf("blob:")&&(ee.wasm.wasmPaths=Ro.substr(0,+Ro.lastIndexOf("/")+1)),new Promise(function(e,t){var _it2;(_it2=it)===null||_it2===void 0||_it2.terminate();var r=URL.createObjectURL(new Blob([fd()],{type:"text/javascript"}));(it=new Worker(r,{name:"ort-wasm-proxy-worker"})).onerror=function(e){return t(e);},it.onmessage=Eg,URL.revokeObjectURL(r),ya=[e,t];var n={type:"init-wasm","in":ee};it.postMessage(n);})));case 7:_context56.prev=7;_context56.next=10;return Vp(ee.wasm);case 10:_context56.next=12;return ed(ee);case 12:Mo=!0;_context56.next=18;break;case 15:_context56.prev=15;_context56.t0=_context56["catch"](7);throw Go=!0,_context56.t0;case 18:_context56.prev=18;In=!1;return _context56.finish(18);case 21:case"end":return _context56.stop();}},_callee53,null,[[7,15,18,21]]);}));return function cd(){return _ref23.apply(this,arguments);};}(),pd=/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee54(e){return _regeneratorRuntime().wrap(function _callee54$(_context57){while(1)switch(_context57.prev=_context57.next){case 0:if(!Yt()){_context57.next=2;break;}return _context57.abrupt("return",(ir(),new Promise(function(t,r){or("init-ep",[t,r]);var n={type:"init-ep","in":{epName:e,env:ee}};it.postMessage(n);})));case 2:_context57.next=4;return td(ee,e);case 4:case"end":return _context57.stop();}},_callee54);}));return function pd(_x69){return _ref24.apply(this,arguments);};}(),dd=/*#__PURE__*/function(){var _ref25=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee55(e){return _regeneratorRuntime().wrap(function _callee55$(_context58){while(1)switch(_context58.prev=_context58.next){case 0:return _context58.abrupt("return",Yt()?(ir(),new Promise(function(t,r){or("copy-from",[t,r]);var n={type:"copy-from","in":{buffer:e}};it.postMessage(n,[e.buffer]);})):ga(e));case 1:case"end":return _context58.stop();}},_callee55);}));return function dd(_x70){return _ref25.apply(this,arguments);};}(),hd=/*#__PURE__*/function(){var _ref26=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee56(e,t){return _regeneratorRuntime().wrap(function _callee56$(_context59){while(1)switch(_context59.prev=_context59.next){case 0:if(!Yt()){_context59.next=4;break;}if(!(t!==null&&t!==void 0&&t.preferredOutputLocation)){_context59.next=3;break;}throw new Error('session option "preferredOutputLocation" is not supported for proxy.');case 3:return _context59.abrupt("return",(ir(),new Promise(function(r,n){or("create",[r,n]);var i={type:"create","in":{model:e,options:t}},o=[];e instanceof Uint8Array&&o.push(e.buffer),it.postMessage(i,o);})));case 4:return _context59.abrupt("return",rd(e,t));case 5:case"end":return _context59.stop();}},_callee56);}));return function hd(_x71,_x72){return _ref26.apply(this,arguments);};}(),md=/*#__PURE__*/function(){var _ref27=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee57(e){return _regeneratorRuntime().wrap(function _callee57$(_context60){while(1)switch(_context60.prev=_context60.next){case 0:if(!Yt()){_context60.next=2;break;}return _context60.abrupt("return",(ir(),new Promise(function(t,r){or("release",[t,r]);var n={type:"release","in":e};it.postMessage(n);})));case 2:nd(e);case 3:case"end":return _context60.stop();}},_callee57);}));return function md(_x73){return _ref27.apply(this,arguments);};}(),bd=/*#__PURE__*/function(){var _ref28=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee58(e){return _regeneratorRuntime().wrap(function _callee58$(_context61){while(1)switch(_context61.prev=_context61.next){case 0:return _context61.abrupt("return",Yt()?(ir(),new Promise(function(t,r){or("configure",[t,r]);var n={type:"configure","in":e};it.postMessage(n);})):od(e));case 1:case"end":return _context61.stop();}},_callee58);}));return function bd(_x74){return _ref28.apply(this,arguments);};}(),gd=/*#__PURE__*/function(){var _ref29=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee59(e){return _regeneratorRuntime().wrap(function _callee59$(_context62){while(1)switch(_context62.prev=_context62.next){case 0:return _context62.abrupt("return",Yt()?(ir(),new Promise(function(t,r){or("auth",[t,r]);var n={type:"auth","in":e};it.postMessage(n);})):id(e));case 1:case"end":return _context62.stop();}},_callee59);}));return function gd(_x75){return _ref29.apply(this,arguments);};}(),yd=/*#__PURE__*/function(){var _ref30=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee60(e,t,r,n,i,o){return _regeneratorRuntime().wrap(function _callee60$(_context63){while(1)switch(_context63.prev=_context63.next){case 0:if(!Yt()){_context63.next=6;break;}if(!r.some(function(e){return"cpu"!==e[3];})){_context63.next=3;break;}throw new Error("input tensor on GPU is not supported for proxy.");case 3:if(!i.some(function(e){return e;})){_context63.next=5;break;}throw new Error("pre-allocated output tensor is not supported for proxy.");case 5:return _context63.abrupt("return",(ir(),new Promise(function(i,a){or("run",[i,a]);var s=r,u={type:"run","in":{sessionId:e,inputIndices:t,inputs:s,outputIndices:n,options:o}};it.postMessage(u,ud(s));})));case 6:return _context63.abrupt("return",ad(e,t,r,n,i,o));case 7:case"end":return _context63.stop();}},_callee60);}));return function yd(_x76,_x77,_x78,_x79,_x80,_x81){return _ref30.apply(this,arguments);};}(),Td=/*#__PURE__*/function(){var _ref31=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee61(e){return _regeneratorRuntime().wrap(function _callee61$(_context64){while(1)switch(_context64.prev=_context64.next){case 0:if(!Yt()){_context64.next=2;break;}return _context64.abrupt("return",(ir(),new Promise(function(t,r){or("end-profiling",[t,r]);var n={type:"end-profiling","in":e};it.postMessage(n);})));case 2:sd(e);case 3:case"end":return _context64.stop();}},_callee61);}));return function Td(_x82){return _ref31.apply(this,arguments);};}();}),xd,Pg,Uo,wd=L(function(){It(),xa(),ma(),ba(),xd=function xd(e,t){switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error("invalid data location: ".concat(e.location," for ").concat(t()));}},Pg=function Pg(e){switch(e[3]){case"cpu":return new Re(e[0],e[2],e[1]);case"gpu-buffer":{var t=e[0];if(!No(t))throw new Error("not supported data type: ".concat(t," for deserializing GPU tensor"));var _e$=e[2],r=_e$.gpuBuffer,n=_e$.download,i=_e$.dispose;return Re.fromGpuBuffer(r,{dataType:t,dims:e[1],download:n,dispose:i});}default:throw new Error("invalid data location: ".concat(e[3]));}},Uo=/*#__PURE__*/function(){function Uo(){_classCallCheck(this,Uo);}_createClass(Uo,[{key:"fetchModelAndCopyToWasmMemory",value:function(){var _fetchModelAndCopyToWasmMemory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee62(e){return _regeneratorRuntime().wrap(function _callee62$(_context65){while(1)switch(_context65.prev=_context65.next){case 0:_context65.t0=dd;_context65.next=3;return _n(e);case 3:_context65.t1=_context65.sent;return _context65.abrupt("return",(0,_context65.t0)(_context65.t1));case 5:case"end":return _context65.stop();}},_callee62);}));function fetchModelAndCopyToWasmMemory(_x83){return _fetchModelAndCopyToWasmMemory.apply(this,arguments);}return fetchModelAndCopyToWasmMemory;}()},{key:"loadModel",value:function(){var _loadModel2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee63(e,t){var _yield$hd,_yield$hd2;var r;return _regeneratorRuntime().wrap(function _callee63$(_context66){while(1)switch(_context66.prev=_context66.next){case 0:hr();if(!("string"==typeof e)){_context66.next=14;break;}if(!(_typeof(process)<"u"&&process.versions&&process.versions.node)){_context66.next=8;break;}_context66.next=5;return _n(e);case 5:_context66.t1=_context66.sent;_context66.next=11;break;case 8:_context66.next=10;return this.fetchModelAndCopyToWasmMemory(e);case 10:_context66.t1=_context66.sent;case 11:_context66.t0=_context66.t1;_context66.next=15;break;case 14:_context66.t0=e;case 15:r=_context66.t0;_context66.next=18;return hd(r,t);case 18:_yield$hd=_context66.sent;_yield$hd2=_slicedToArray(_yield$hd,3);this.sessionId=_yield$hd2[0];this.inputNames=_yield$hd2[1];this.outputNames=_yield$hd2[2];mr();case 24:case"end":return _context66.stop();}},_callee63,this);}));function loadModel(_x84,_x85){return _loadModel2.apply(this,arguments);}return loadModel;}()},{key:"dispose",value:function(){var _dispose2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee64(){return _regeneratorRuntime().wrap(function _callee64$(_context67){while(1)switch(_context67.prev=_context67.next){case 0:return _context67.abrupt("return",md(this.sessionId));case 1:case"end":return _context67.stop();}},_callee64,this);}));function dispose(){return _dispose2.apply(this,arguments);}return dispose;}()},{key:"configure",value:function(){var _configure3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee65(e){return _regeneratorRuntime().wrap(function _callee65$(_context68){while(1)switch(_context68.prev=_context68.next){case 0:return _context68.abrupt("return",bd(e));case 1:case"end":return _context68.stop();}},_callee65);}));function configure(_x86){return _configure3.apply(this,arguments);}return configure;}()},{key:"auth",value:function(){var _auth3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee66(e){return _regeneratorRuntime().wrap(function _callee66$(_context69){while(1)switch(_context69.prev=_context69.next){case 0:return _context69.abrupt("return",gd(e));case 1:case"end":return _context69.stop();}},_callee66);}));function auth(_x87){return _auth3.apply(this,arguments);}return auth;}()},{key:"run",value:function(){var _run4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee67(e,t,r){var _this33=this;var n,i,o,a,s,u,l,h,_e217,_o$_e;return _regeneratorRuntime().wrap(function _callee67$(_context70){while(1)switch(_context70.prev=_context70.next){case 0:hr();n=[],i=[];Object.entries(e).forEach(function(e){var t=e[0],r=e[1],o=_this33.inputNames.indexOf(t);if(-1===o)throw new Error("invalid input '".concat(t,"'"));n.push(r),i.push(o);});o=[],a=[];Object.entries(t).forEach(function(e){var t=e[0],r=e[1],n=_this33.outputNames.indexOf(t);if(-1===n)throw new Error("invalid output '".concat(t,"'"));o.push(r),a.push(n);});s=n.map(function(e,t){return xd(e,function(){return"input \"".concat(_this33.inputNames[i[t]],"\"");});});u=o.map(function(e,t){return e?xd(e,function(){return"output \"".concat(_this33.outputNames[a[t]],"\"");}):null;});_context70.next=9;return yd(this.sessionId,i,s,a,u,r);case 9:l=_context70.sent;h={};for(_e217=0;_e217<l.length;_e217++){h[this.outputNames[a[_e217]]]=(_o$_e=o[_e217])!==null&&_o$_e!==void 0?_o$_e:Pg(l[_e217]);}return _context70.abrupt("return",(mr(),h));case 13:case"end":return _context70.stop();}},_callee67,this);}));function run(_x88,_x89,_x90){return _run4.apply(this,arguments);}return run;}()},{key:"startProfiling",value:function startProfiling(){}},{key:"endProfiling",value:function endProfiling(){Td(this.sessionId);}}]);return Uo;}();}),Dg,zo,vd=L(function(){It(),xa(),wd(),Dg=function Dg(){if(("number"!=typeof ee.wasm.initTimeout||ee.wasm.initTimeout<0)&&(ee.wasm.initTimeout=0),"boolean"!=typeof ee.wasm.simd&&(ee.wasm.simd=!0),"boolean"!=typeof ee.wasm.proxy&&(ee.wasm.proxy=!1),"boolean"!=typeof ee.wasm.trace&&(ee.wasm.trace=!1),"number"!=typeof ee.wasm.numThreads||!Number.isInteger(ee.wasm.numThreads)||ee.wasm.numThreads<=0){((typeof self==="undefined"?"undefined":_typeof(self))<"u"&&!self.crossOriginIsolated||_typeof(process)<"u"&&process.versions&&process.versions.node)&&(ee.wasm.numThreads=1);var e=(typeof navigator==="undefined"?"undefined":_typeof(navigator))>"u"?(void 0)().length:navigator.hardwareConcurrency;ee.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2));}},zo=/*#__PURE__*/function(){function zo(){_classCallCheck(this,zo);}_createClass(zo,[{key:"init",value:function(){var _init2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee68(e){return _regeneratorRuntime().wrap(function _callee68$(_context71){while(1)switch(_context71.prev=_context71.next){case 0:Dg();_context71.next=3;return cd();case 3:_context71.next=5;return pd(e);case 5:case"end":return _context71.stop();}},_callee68);}));function init(_x91){return _init2.apply(this,arguments);}return init;}()},{key:"createInferenceSessionHandler",value:function(){var _createInferenceSessionHandler2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee69(e,t){var r;return _regeneratorRuntime().wrap(function _callee69$(_context72){while(1)switch(_context72.prev=_context72.next){case 0:r=new Uo();_context72.next=3;return r.loadModel(e,t);case 3:return _context72.abrupt("return",Promise.resolve(r));case 4:case"end":return _context72.stop();}},_callee69);}));function createInferenceSessionHandler(_x92,_x93){return _createInferenceSessionHandler2.apply(this,arguments);}return createInferenceSessionHandler;}()}]);return zo;}();}),_d={};kr(_d,{wasmBackend:function wasmBackend(){return Lg;}});var Lg,Od=L(function(){vd(),Lg=new zo();});It(),It(),It();var Os="1.17.0",QO=Qo;{var e=(Pp(),fr(Ep)).onnxjsBackend;pr("webgl",e,-10);}{var _e218=(Od(),fr(_d)).wasmBackend;pr("cpu",_e218,10),pr("wasm",_e218,10),pr("webnn",_e218,9);}Object.defineProperty(ee.versions,"web",{value:Os,enumerable:!0});}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports;}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"];}:function(){return e;};return __webpack_require__.d(t,{a:t}),t;},__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]});},__webpack_require__.g=function(){if("object"==(typeof globalThis==="undefined"?"undefined":_typeof(globalThis)))return globalThis;try{return this||new Function("return this")();}catch(e){if("object"==(typeof window==="undefined"?"undefined":_typeof(window)))return window;}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0});},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e;},__webpack_require__.b=document.baseURI||self.location.href;var __webpack_exports__={};(function(_ye$default){__webpack_require__.d(__webpack_exports__,{O:function O(){return uk;}});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{BaseTextureCache:function BaseTextureCache(){return Rt;},BoundingBox:function BoundingBox(){return kt;},CanvasRenderTarget:function CanvasRenderTarget(){return Mt;},DATA_URI:function DATA_URI(){return mt;},EventEmitter:function EventEmitter(){return me;},ProgramCache:function ProgramCache(){return Pt;},TextureCache:function TextureCache(){return $t;},clearTextureCache:function clearTextureCache(){return Dt;},correctBlendMode:function correctBlendMode(){return ft;},createIndicesForQuads:function createIndicesForQuads(){return wt;},decomposeDataUri:function decomposeDataUri(){return jt;},deprecation:function deprecation(){return xe;},destroyTextureCache:function destroyTextureCache(){return Bt;},detectVideoAlphaMode:function detectVideoAlphaMode(){return Ee;},determineCrossOrigin:function determineCrossOrigin(){return Gt;},earcut:function earcut(){return we;},getBufferType:function getBufferType(){return bt;},getCanvasBoundingBox:function getCanvasBoundingBox(){return Nt;},getResolutionOfUrl:function getResolutionOfUrl(){return zt;},hex2rgb:function hex2rgb(){return ut;},hex2string:function hex2string(){return lt;},interleaveTypedArrays:function interleaveTypedArrays(){return xt;},isMobile:function isMobile(){return ge;},isPow2:function isPow2(){return It;},isWebGLSupported:function isWebGLSupported(){return Pe;},log2:function log2(){return At;},nextPow2:function nextPow2(){return _t;},path:function path(){return Se;},premultiplyBlendMode:function premultiplyBlendMode(){return dt;},premultiplyRgba:function premultiplyRgba(){return pt;},premultiplyTint:function premultiplyTint(){return yt;},premultiplyTintToRgba:function premultiplyTintToRgba(){return gt;},removeItems:function removeItems(){return St;},rgb2hex:function rgb2hex(){return ct;},sayHello:function sayHello(){return ke;},sign:function sign(){return Tt;},skipHello:function skipHello(){return Oe;},string2hex:function string2hex(){return ht;},trimCanvas:function trimCanvas(){return Ut;},uid:function uid(){return Et;},url:function url(){return _e;}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{ALPHA_MODES:function ALPHA_MODES(){return z;},AbstractMultiResource:function AbstractMultiResource(){return Yi;},AccessibilityManager:function AccessibilityManager(){return Go;},AlphaFilter:function AlphaFilter(){return wo;},AnimatedSprite:function AnimatedSprite(){return Zu;},Application:function Application(){return Vo;},ArrayResource:function ArrayResource(){return Ki;},Assets:function Assets(){return ka;},AssetsClass:function AssetsClass(){return Oa;},Attribute:function Attribute(){return hr;},BLEND_MODES:function BLEND_MODES(){return B;},BUFFER_BITS:function BUFFER_BITS(){return R;},BUFFER_TYPE:function BUFFER_TYPE(){return Z;},BackgroundSystem:function BackgroundSystem(){return pn;},BaseImageResource:function BaseImageResource(){return vn;},BasePrepare:function BasePrepare(){return Vu;},BaseRenderTexture:function BaseRenderTexture(){return bn;},BaseTexture:function BaseTexture(){return ar;},BatchDrawCall:function BatchDrawCall(){return sr;},BatchGeometry:function BatchGeometry(){return gr;},BatchRenderer:function BatchRenderer(){return cn;},BatchShaderGenerator:function BatchShaderGenerator(){return sn;},BatchSystem:function BatchSystem(){return yn;},BatchTextureArray:function BatchTextureArray(){return un;},BitmapFont:function BitmapFont(){return ml;},BitmapFontData:function BitmapFontData(){return sl;},BitmapText:function BitmapText(){return _l;},BlobResource:function BlobResource(){return Za;},BlurFilter:function BlurFilter(){return _o;},BlurFilterPass:function BlurFilterPass(){return xo;},Bounds:function Bounds(){return oo;},BrowserAdapter:function BrowserAdapter(){return q;},Buffer:function Buffer(){return lr;},BufferResource:function BufferResource(){return nr;},BufferSystem:function BufferSystem(){return zi;},CLEAR_MODES:function CLEAR_MODES(){return V;},COLOR_MASK_BITS:function COLOR_MASK_BITS(){return K;},Cache:function Cache(){return Zo;},CanvasResource:function CanvasResource(){return Xi;},Circle:function Circle(){return Ar;},Color:function Color(){return st;},ColorMatrixFilter:function ColorMatrixFilter(){return Io;},CompressedTextureResource:function CompressedTextureResource(){return qa;},Container:function Container(){return co;},ContextSystem:function ContextSystem(){return mn;},CountLimiter:function CountLimiter(){return Du;},CubeResource:function CubeResource(){return qi;},DEG_TO_RAD:function DEG_TO_RAD(){return br;},DRAW_MODES:function DRAW_MODES(){return D;},DisplacementFilter:function DisplacementFilter(){return Ao;},DisplayObject:function DisplayObject(){return ao;},ENV:function ENV(){return P;},Ellipse:function Ellipse(){return Sr;},EventBoundary:function EventBoundary(){return Do;},EventSystem:function EventSystem(){return Fo;},ExtensionType:function ExtensionType(){return Vt;},Extract:function Extract(){return Ps;},FORMATS:function FORMATS(){return M;},FORMATS_TO_COMPONENTS:function FORMATS_TO_COMPONENTS(){return _s;},FXAAFilter:function FXAAFilter(){return So;},FederatedDisplayObject:function FederatedDisplayObject(){return Uo;},FederatedEvent:function FederatedEvent(){return Oo;},FederatedMouseEvent:function FederatedMouseEvent(){return ko;},FederatedPointerEvent:function FederatedPointerEvent(){return Po;},FederatedWheelEvent:function FederatedWheelEvent(){return $o;},FillStyle:function FillStyle(){return tu;},Filter:function Filter(){return fn;},FilterState:function FilterState(){return kn;},FilterSystem:function FilterSystem(){return Rn;},Framebuffer:function Framebuffer(){return wn;},FramebufferSystem:function FramebufferSystem(){return Mn;},GC_MODES:function GC_MODES(){return H;},GLFramebuffer:function GLFramebuffer(){return Bn;},GLProgram:function GLProgram(){return oi;},GLTexture:function GLTexture(){return Ei;},GRAPHICS_CURVES:function GRAPHICS_CURVES(){return Us;},GenerateTextureSystem:function GenerateTextureSystem(){return ei;},Geometry:function Geometry(){return yr;},GeometrySystem:function GeometrySystem(){return Fn;},Graphics:function Graphics(){return ou;},GraphicsData:function GraphicsData(){return Zs;},GraphicsGeometry:function GraphicsGeometry(){return eu;},HTMLText:function HTMLText(){return El;},HTMLTextStyle:function HTMLTextStyle(){return Tl;},IGLUniformData:function IGLUniformData(){return ii;},INSTALLED:function INSTALLED(){return Qt;},INTERNAL_FORMATS:function INTERNAL_FORMATS(){return Va;},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:function INTERNAL_FORMAT_TO_BYTES_PER_PIXEL(){return Ha;},ImageBitmapResource:function ImageBitmapResource(){return Ji;},ImageResource:function ImageResource(){return xn;},LINE_CAP:function LINE_CAP(){return Fs;},LINE_JOIN:function LINE_JOIN(){return Ls;},LineStyle:function LineStyle(){return ru;},LoaderParserPriority:function LoaderParserPriority(){return Qo;},MASK_TYPES:function MASK_TYPES(){return Y;},MIPMAP_MODES:function MIPMAP_MODES(){return G;},MSAA_QUALITY:function MSAA_QUALITY(){return X;},MaskData:function MaskData(){return Gn;},MaskSystem:function MaskSystem(){return zn;},Matrix:function Matrix(){return Er;},Mesh:function Mesh(){return cu;},MeshBatchUvs:function MeshBatchUvs(){return su;},MeshGeometry:function MeshGeometry(){return du;},MeshMaterial:function MeshMaterial(){return fu;},MultisampleSystem:function MultisampleSystem(){return ji;},NineSlicePlane:function NineSlicePlane(){return mu;},NoiseFilter:function NoiseFilter(){return To;},ObjectRenderer:function ObjectRenderer(){return ln;},ObjectRendererSystem:function ObjectRendererSystem(){return Vi;},ObservablePoint:function ObservablePoint(){return Lr;},PI_2:function PI_2(){return mr;},PRECISION:function PRECISION(){return W;},ParticleContainer:function ParticleContainer(){return vu;},ParticleRenderer:function ParticleRenderer(){return _u;},PlaneGeometry:function PlaneGeometry(){return pu;},PluginSystem:function PluginSystem(){return Zn;},Point:function Point(){return xr;},Polygon:function Polygon(){return Tr;},Prepare:function Prepare(){return Ku;},Program:function Program(){return rn;},ProjectionSystem:function ProjectionSystem(){return qn;},Quad:function Quad(){return En;},QuadUv:function QuadUv(){return On;},RAD_TO_DEG:function RAD_TO_DEG(){return wr;},RENDERER_TYPE:function RENDERER_TYPE(){return $;},Rectangle:function Rectangle(){return Ir;},RenderTexture:function RenderTexture(){return Tn;},RenderTexturePool:function RenderTexturePool(){return Cn;},RenderTextureSystem:function RenderTextureSystem(){return ni;},Renderer:function Renderer(){return Wi;},ResizePlugin:function ResizePlugin(){return Ho;},Resource:function Resource(){return rr;},RopeGeometry:function RopeGeometry(){return yu;},RoundedRectangle:function RoundedRectangle(){return Cr;},Runner:function Runner(){return tr;},SAMPLER_TYPES:function SAMPLER_TYPES(){return N;},SCALE_MODES:function SCALE_MODES(){return U;},SHAPES:function SHAPES(){return vr;},SVGResource:function SVGResource(){return eo;},ScissorSystem:function ScissorSystem(){return Kn;},Shader:function Shader(){return an;},ShaderSystem:function ShaderSystem(){return xi;},SimpleMesh:function SimpleMesh(){return wu;},SimplePlane:function SimplePlane(){return gu;},SimpleRope:function SimpleRope(){return bu;},Sprite:function Sprite(){return yo;},SpriteMaskFilter:function SpriteMaskFilter(){return jn;},Spritesheet:function Spritesheet(){return nl;},StartupSystem:function StartupSystem(){return _i;},State:function State(){return Jt;},StateSystem:function StateSystem(){return Ai;},StencilSystem:function StencilSystem(){return Xn;},SystemManager:function SystemManager(){return Si;},TARGETS:function TARGETS(){return L;},TEXT_GRADIENT:function TEXT_GRADIENT(){return Iu;},TYPES:function TYPES(){return F;},TYPES_TO_BYTES_PER_COMPONENT:function TYPES_TO_BYTES_PER_COMPONENT(){return xs;},TYPES_TO_BYTES_PER_PIXEL:function TYPES_TO_BYTES_PER_PIXEL(){return Is;},TemporaryDisplayObject:function TemporaryDisplayObject(){return so;},Text:function Text(){return Bu;},TextFormat:function TextFormat(){return ul;},TextMetrics:function TextMetrics(){return Tu;},TextStyle:function TextStyle(){return Ou;},Texture:function Texture(){return Sn;},TextureGCSystem:function TextureGCSystem(){return Ci;},TextureMatrix:function TextureMatrix(){return Un;},TextureSystem:function TextureSystem(){return Oi;},TextureUvs:function TextureUvs(){return _n;},Ticker:function Ticker(){return Di;},TickerPlugin:function TickerPlugin(){return Mi;},TilingSprite:function TilingSprite(){return Ju;},TilingSpriteRenderer:function TilingSpriteRenderer(){return tl;},TimeLimiter:function TimeLimiter(){return Xu;},Transform:function Transform(){return Nr;},TransformFeedback:function TransformFeedback(){return no;},TransformFeedbackSystem:function TransformFeedbackSystem(){return ki;},UPDATE_PRIORITY:function UPDATE_PRIORITY(){return $i;},UniformGroup:function UniformGroup(){return on;},VERSION:function VERSION(){return io;},VideoResource:function VideoResource(){return ro;},ViewSystem:function ViewSystem(){return Pi;},ViewableBuffer:function ViewableBuffer(){return Kt;},WRAP_MODES:function WRAP_MODES(){return j;},XMLFormat:function XMLFormat(){return ll;},XMLStringFormat:function XMLStringFormat(){return hl;},accessibleTarget:function accessibleTarget(){return jo;},autoDetectFormat:function autoDetectFormat(){return dl;},autoDetectRenderer:function autoDetectRenderer(){return Fi;},autoDetectResource:function autoDetectResource(){return er;},cacheTextureArray:function cacheTextureArray(){return Pa;},checkDataUrl:function checkDataUrl(){return ea;},checkExtension:function checkExtension(){return Ko;},checkMaxIfStatementsInShader:function checkMaxIfStatementsInShader(){return qt;},convertToList:function convertToList(){return Xo;},copySearchParams:function copySearchParams(){return za;},createStringVariations:function createStringVariations(){return Ca;},createTexture:function createTexture(){return ma;},createUBOElements:function createUBOElements(){return pi;},curves:function curves(){return Ns;},defaultFilterVertex:function defaultFilterVertex(){return Ui;},defaultVertex:function defaultVertex(){return Ni;},detectAvif:function detectAvif(){return Ra;},detectCompressedTextures:function detectCompressedTextures(){return Xa;},detectDefaults:function detectDefaults(){return Ma;},detectMp4:function detectMp4(){return Ua;},detectOgv:function detectOgv(){return ja;},detectWebm:function detectWebm(){return Na;},detectWebp:function detectWebp(){return Ba;},extensions:function extensions(){return Yt;},filters:function filters(){return Co;},generateProgram:function generateProgram(){return hi;},generateUniformBufferSync:function generateUniformBufferSync(){return gi;},getFontFamilyName:function getFontFamilyName(){return sa;},getTestContext:function getTestContext(){return Wr;},getUBOData:function getUBOData(){return yi;},graphicsUtils:function graphicsUtils(){return au;},groupD8:function groupD8(){return Mr;},isMobile:function isMobile(){return ge;},isSingleItem:function isSingleItem(){return qo;},loadBitmapFont:function loadBitmapFont(){return Al;},loadDDS:function loadDDS(){return Ts;},loadImageBitmap:function loadImageBitmap(){return va;},loadJson:function loadJson(){return ta;},loadKTX:function loadKTX(){return Cs;},loadSVG:function loadSVG(){return _a;},loadTextures:function loadTextures(){return xa;},loadTxt:function loadTxt(){return ra;},loadVideo:function loadVideo(){return Sa;},loadWebFont:function loadWebFont(){return la;},parseDDS:function parseDDS(){return gs;},parseKTX:function parseKTX(){return As;},resolveCompressedTextureUrl:function resolveCompressedTextureUrl(){return Es;},resolveTextureUrl:function resolveTextureUrl(){return Ga;},settings:function settings(){return J;},spritesheetAsset:function spritesheetAsset(){return al;},uniformParsers:function uniformParsers(){return Ur;},unsafeEvalSupported:function unsafeEvalSupported(){return wi;},utils:function utils(){return e;}});var r=__webpack_require__(1140),n=__webpack_require__(9328);function i(e){return i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},i(e);}function o(){o=function o(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value;},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{c({},"");}catch(e){c=function c(e,t,r){return e[t]=r;};}function d(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),s=new $(n||[]);return a(o,"_invoke",{value:E(e,r,s)}),o;}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=d;var p="suspendedStart",y="suspendedYield",g="executing",m="completed",w={};function b(){}function v(){}function x(){}var _={};c(_,u,function(){return this;});var I=Object.getPrototypeOf,A=I&&I(I(R([])));A&&A!==r&&n.call(A,u)&&(_=A);var S=x.prototype=b.prototype=Object.create(_);function T(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e);});});}function C(e,t){function r(o,a,s,u){var l=f(e[o],e,a);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==i(c)&&n.call(c,"__await")?t.resolve(c.__await).then(function(e){r("next",e,s,u);},function(e){r("throw",e,s,u);}):t.resolve(c).then(function(e){h.value=e,s(h);},function(e){return r("throw",e,s,u);});}u(l.arg);}var o;a(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function E(t,r,n){var i=p;return function(o,a){if(i===g)throw new Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===w)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=m,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var l=f(t,r,n);if("normal"===l.type){if(i=n.done?m:y,l.arg===w)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=m,n.method="throw",n.arg=l.arg);}};}function O(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var o=f(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,w;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,w):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w);}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0);}function R(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r;};return a.next=a;}}throw new TypeError(i(t)+" is not iterable");}return v.prototype=x,a(S,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:v,configurable:!0}),v.displayName=c(x,h,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c(e,h,"GeneratorFunction")),e.prototype=Object.create(S),e;},t.awrap=function(e){return{__await:e};},T(C.prototype),c(C.prototype,l,function(){return this;}),t.AsyncIterator=C,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new C(d(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},T(S),c(S,h,"Generator"),c(S,u,function(){return this;}),c(S,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=R,$.prototype={constructor:$,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),w;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),w;}},t;}function a(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n);}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==i(t)?t:String(t);}function l(e,t,r){return t=c(t),function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e);}(e,h()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r));}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(h=function h(){return!!e;})();}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},c(e);}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},f(e,t);}var p,y,g,m=function m(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r;},w=function w(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e);},b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),e=l(this,t),p.set(d(e),void 0),y.set(d(e),2),g.set(d(e),0),e.width=0,e.height=0,e;}var r,n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t);}(t,e),r=t,n=[{key:"setSkipCount",value:function value(e){m(this,y,e,"f");}},{key:"set",value:function value(e){var t=this;e instanceof MediaStream?m(this,p,e.getVideoTracks()[0],"f"):m(this,p,e,"f"),null!=w(this,p,"f").getSettings().width&&(this.width=w(this,p,"f").getSettings().width),null!=w(this,p,"f").getSettings().height&&(this.height=w(this,p,"f").getSettings().height),w(this,p,"f").onended&&(w(this,p,"f").onended=function(){return t.emit("ended",t);});}},{key:"stop",value:function value(){w(this,p,"f")&&w(this,p,"f").stop();}},{key:"update",value:function value(e,t){var r;if(w(this,p,"f")&&(m(this,g,(r=w(this,g,"f"),++r),"f"),!(w(this,g,"f")%w(this,y,"f")))){var n=!1;if(!e&&!t){var i=w(this,p,"f").getSettings();i.width,i.height;}this.width!=e&&(n=!0,this.width=e),this.height!=t&&(n=!0,this.height=t),n&&this.emit("update",this);}}},{key:"getSettings",value:function value(e){return w(this,p,"f"),e||(e={width:this.width,height:this.height,aspectRatio:this.width/this.height}),Object.assign(w(this,p,"f").getSettings(),e);}},{key:"getConstraints",value:function value(e){return w(this,p,"f"),e||(e={width:this.width,height:this.height}),Object.assign(w(this,p,"f").getConstraints(),e);}},{key:"getCapabilities",value:function value(e){return w(this,p,"f"),Object.assign(w(this,p,"f").getCapabilities(),e);}},{key:"applyConstraints",value:(u=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,u,"next",e);}function u(e){a(o,n,i,s,u,"throw",e);}s(void 0);});};}(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w(this,p,"f")){e.next=2;break;}return e.abrupt("return");case 2:w(this,p,"f").applyConstraints(t);case 3:case"end":return e.stop();}},e,this);})),function(e){return u.apply(this,arguments);})}],n&&s(r.prototype,n),i&&s(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(n);function v(e){return v="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},v(e);}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n);}}function I(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;}function A(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==v(t)?t:String(t);}p=new WeakMap(),y=new WeakMap(),g=new WeakMap();var S=function(){function e(){x(this,e),this.frame_count=30,this.frames=[1];}return I(e,[{key:"start",value:function value(){this.t0=performance.now();}},{key:"finish",value:function value(){var e=performance.now()-this.t0;this.frames.push(e),this.frames.length>this.frame_count&&this.frames.shift();}},{key:"getFrameFps",value:function value(){var e=this.frames.reduce(function(e,t){return e+t;},0);return 0==e||isNaN(e)?1:Math.round(1e3/(e/this.frame_count));}},{key:"getFrameDuration",value:function value(){return Math.round(1e6/this.getFrameFps());}},{key:"getFrameTime",value:function value(){return Math.round(this.frames.reduce(function(e,t){return e+t;},0)/this.frame_count);}}]),e;}(),T=function(){function e(){x(this,e),this.pattern="Output FPS: {{output_fps}}\nFrame Draw Time: {{frame_time}}ms\nInference Time: {{inference_time}}ms",this.stats=new Map();}return I(e,[{key:"updateStats",value:function value(e,t){return this.stats.set(e,t),!0;}},{key:"getText",value:function value(){var e=this.pattern;return this.stats.forEach(function(t,r){e=e.replaceAll("{{"+r+"}}",t.toString());}),e;}}]),e;}();function C(e){return C="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},C(e);}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n);}}function O(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==C(t)?t:String(t);}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.video=null,this.stream=null,this.videoTrack=null,this.audioTrack=null,this.transformFrame=null,this.updateVideoTrack=null,this.toCanvas=null,this.lastFrameTime=0,this.fpsLimit=30,this.timestamp=0,this.isRunning=!1,this.isPaused=!1,this.sdkOptions=t,this.outputCanvas=document.createElement("canvas"),this.outputCanvas.width=this.sdkOptions.width,this.outputCanvas.height=this.sdkOptions.height,this.bufferCanvas=document.createElement("canvas"),this.bufferCanvas.width=this.sdkOptions.width,this.bufferCanvas.height=this.sdkOptions.height,this.frameTimer=new S(),this.frameTime=0,this.fps=0,this.enableFps=!1,this.frame_count=0,this.videoTrackWrapper=new b(),this.videoTrackWrapper.on("update",this.onTrackUpdate,this);}var t,r,n;return t=e,r=[{key:"onTrackUpdate",value:function value(){this.sdkOptions.setSize(this.videoTrackWrapper.width,this.videoTrackWrapper.height),"function"==typeof this.changeInputResolutionFuncition&&this.changeInputResolutionFuncition();}},{key:"clearBuffers",value:function value(){}},{key:"onChangeInputResolution",value:function value(e){var t="function"==typeof e;this.changeInputResolutionFuncition=t?e:void 0;}},{key:"onFrameDraw",value:function value(e){var t="function"==typeof e;this.frameDrawFunction=t?e:void 0;}},{key:"setOutputResolution",value:function value(e,t){this.sdkOptions.setCustomSize(e,t);}},{key:"clearOutputResolution",value:function value(){this.sdkOptions.customSize=!1,this.sdkOptions.setSize(this.videoTrackWrapper.width,this.videoTrackWrapper.height);}},{key:"useEffectProcessor",value:function value(e){this.effectProcessor=e;}},{key:"pause",value:function value(){this.isPaused=!0;}},{key:"unpause",value:function value(){this.isPaused=!1;}},{key:"setRenderer",value:function value(e){this.renderer=e;}},{key:"destroy",value:function value(){this.videoTrackWrapper.off("update",this.onTrackUpdate,this);}},{key:"setFpsLimit",value:function value(e){var t;this.fpsLimit=e,null===(t=this.getInputVideoTrack())||void 0===t||t.applyConstraints({frameRate:this.fpsLimit});}},{key:"useStream",value:function value(e){this.stream=e,this.useVideoTrack(this.stream.getVideoTracks()[0]);}},{key:"useVideoTrack",value:function value(e){this.videoTrack=e,this.videoTrackWrapper.set(this.videoTrack);}},{key:"getInputStream",value:function value(){return this.stream?this.stream:null;}},{key:"getInputVideoTrack",value:function value(){return this.videoTrack?this.videoTrack:null;}},{key:"showFps",value:function value(){this.enableFps=!0;}},{key:"hideFps",value:function value(){this.enableFps=!1,this.renderer.hideStatistics();}},{key:"drawFps",value:function value(){this.enableFps&&this.frame_count%30==0&&(this.renderer.updateStatistics("output_fps",this.frameTimer.getFrameFps()),this.renderer.drawStatistics());}},{key:"process",value:function value(){this.transformFrame&&this.transformFrame();}},{key:"clearTransformCallback",value:function value(){this.transformFrame=null;}},{key:"transformCallback",value:function value(e){this.transformFrame=e;}},{key:"renderToCanvas",value:function value(e){this.toCanvas=e;}},{key:"getCanvas",value:function value(){return this.outputCanvas;}},{key:"getStream",value:function value(){return this.stream;}}],r&&E(t.prototype,r),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}(),P=function(e){return e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e;}(P||{}),$=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e;}($||{}),R=function(e){return e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e;}(R||{}),B=function(e){return e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e;}(B||{}),D=function(e){return e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e;}(D||{}),M=function(e){return e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e;}(M||{}),L=function(e){return e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e;}(L||{}),F=function(e){return e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e;}(F||{}),N=function(e){return e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e;}(N||{}),U=function(e){return e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e;}(U||{}),j=function(e){return e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e;}(j||{}),G=function(e){return e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e;}(G||{}),z=function(e){return e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e;}(z||{}),V=function(e){return e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e;}(V||{}),H=function(e){return e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e;}(H||{}),W=function(e){return e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e;}(W||{}),Y=function(e){return e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e;}(Y||{}),K=function(e){return e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e;}(K||{}),X=function(e){return e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e;}(X||{}),Z=function(e){return e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e;}(Z||{});var q={createCanvas:function createCanvas(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r;},getCanvasRenderingContext2D:function getCanvasRenderingContext2D(){return CanvasRenderingContext2D;},getWebGLRenderingContext:function getWebGLRenderingContext(){return WebGLRenderingContext;},getNavigator:function getNavigator(){return navigator;},getBaseUrl:function getBaseUrl(){var _document$baseURI;return(_document$baseURI=document.baseURI)!==null&&_document$baseURI!==void 0?_document$baseURI:window.location.href;},getFontFaceSet:function getFontFaceSet(){return document.fonts;},fetch:function(_fetch){function fetch(_x94,_x95){return _fetch.apply(this,arguments);}fetch.toString=function(){return _fetch.toString();};return fetch;}(function(e,t){return fetch(e,t);}),parseXML:function parseXML(e){return new DOMParser().parseFromString(e,"text/xml");}},J={ADAPTER:q,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Q=/iPhone/i,ee=/iPod/i,te=/iPad/i,re=/\biOS-universal(?:.+)Mac\b/i,ne=/\bAndroid(?:.+)Mobile\b/i,ie=/Android/i,oe=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ae=/Silk/i,se=/Windows Phone/i,ue=/\bWindows(?:.+)ARM\b/i,le=/BlackBerry/i,he=/BB10/i,ce=/Opera Mini/i,de=/\b(CriOS|Chrome)(?:.+)Mobile/i,fe=/Mobile(?:.+)Firefox\b/i,pe=function pe(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream;};function ye(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=t.userAgent,n=r.split("[FBAN");void 0!==n[1]&&(r=n[0]),void 0!==(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(e){return function(t){return t.test(e);};}(r),o={apple:{phone:i(Q)&&!i(se),ipod:i(ee),tablet:!i(Q)&&(i(te)||pe(t))&&!i(se),universal:i(re),device:(i(Q)||i(ee)||i(te)||i(re)||pe(t))&&!i(se)},amazon:{phone:i(oe),tablet:!i(oe)&&i(ae),device:i(oe)||i(ae)},android:{phone:!i(se)&&i(oe)||!i(se)&&i(ne),tablet:!i(se)&&!i(oe)&&!i(ne)&&(i(ae)||i(ie)),device:!i(se)&&(i(oe)||i(ae)||i(ne)||i(ie))||i(/\bokhttp\b/i)},windows:{phone:i(se),tablet:i(ue),device:i(se)||i(ue)},other:{blackberry:i(le),blackberry10:i(he),opera:i(ce),firefox:i(fe),chrome:i(de),device:i(le)||i(he)||i(ce)||i(fe)||i(de)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o;}var ge=((_ye$default=ye["default"])!==null&&_ye$default!==void 0?_ye$default:ye)(globalThis.navigator);J.RETINA_PREFIX=/@([0-9\.]+)x/,J.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var me=__webpack_require__(4912),we=__webpack_require__(1948),be=__webpack_require__(4776);var ve={};function xe(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3;if(ve[t])return;var n=new Error().stack;_typeof(n)>"u"?console.warn("PixiJS Deprecation Warning: ","".concat(t,"\nDeprecated since v").concat(e)):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6","".concat(t,"\nDeprecated since v").concat(e)),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ","".concat(t,"\nDeprecated since v").concat(e)),console.warn(n))),ve[t]=!0;}var _e={get parse(){return xe("7.3.0","utils.url.parse is deprecated, use native URL API instead."),be.K0;},get format(){return xe("7.3.0","utils.url.format is deprecated, use native URL API instead."),be.E9;},get resolve(){return xe("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),be.WI;}};function Ie(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received ".concat(JSON.stringify(e)));}function Ae(e){return e.split("?")[0].split("#")[0];}var Se={toPosix:function toPosix(e){return t="\\",r="/",e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r);var t,r;},isUrl:function isUrl(e){return /^https?:/.test(this.toPosix(e));},isDataUrl:function isDataUrl(e){return /^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e);},isBlobUrl:function isBlobUrl(e){return e.startsWith("blob:");},hasProtocol:function hasProtocol(e){return /^[^/:]+:/.test(this.toPosix(e));},getProtocol:function getProtocol(e){Ie(e),e=this.toPosix(e);var t=/^file:\/\/\//.exec(e);if(t)return t[0];var r=/^[^/:]+:\/{0,2}/.exec(e);return r?r[0]:"";},toAbsolute:function toAbsolute(e,t,r){if(Ie(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;var n=Ae(this.toPosix(t!==null&&t!==void 0?t:J.ADAPTER.getBaseUrl())),i=Ae(this.toPosix(r!==null&&r!==void 0?r:this.rootname(n)));return(e=this.toPosix(e)).startsWith("/")?Se.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e);},normalize:function normalize(e){if(Ie(e),0===e.length)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;var t="";var r=(e=this.toPosix(e)).startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));var n=e.endsWith("/");return e=function(e,t){var r="",n=0,i=-1,o=0,a=-1;for(var _s10=0;_s10<=e.length;++_s10){if(_s10<e.length)a=e.charCodeAt(_s10);else{if(47===a)break;a=47;}if(47===a){if(i!==_s10-1&&1!==o)if(i!==_s10-1&&2===o){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var _e220=r.lastIndexOf("/");if(_e220!==r.length-1){-1===_e220?(r="",n=0):(r=r.slice(0,_e220),n=r.length-1-r.lastIndexOf("/")),i=_s10,o=0;continue;}}else if(2===r.length||1===r.length){r="",n=0,i=_s10,o=0;continue;}t&&(r.length>0?r+="/..":r="..",n=2);}else r.length>0?r+="/".concat(e.slice(i+1,_s10)):r=e.slice(i+1,_s10),n=_s10-i-1;i=_s10,o=0;}else 46===a&&-1!==o?++o:o=-1;}return r;}(e,!1),e.length>0&&n&&(e+="/"),r?"/".concat(e):t+e;},isAbsolute:function isAbsolute(e){return Ie(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/");},join:function join(){if(0===arguments.length)return".";var t;for(var _r138=0;_r138<arguments.length;++_r138){var _n42=_r138<0||arguments.length<=_r138?undefined:arguments[_r138];if(Ie(_n42),_n42.length>0)if(void 0===t)t=_n42;else{var _ref32;var _i39=(_ref32=_r138-1<0||arguments.length<=_r138-1?undefined:arguments[_r138-1])!==null&&_ref32!==void 0?_ref32:"";this.joinExtensions.includes(this.extname(_i39).toLowerCase())?t+="/../".concat(_n42):t+="/".concat(_n42);}}return void 0===t?".":this.normalize(t);},dirname:function dirname(e){if(Ie(e),0===e.length)return".";var t=(e=this.toPosix(e)).charCodeAt(0);var r=47===t;var n=-1,i=!0;var o=this.getProtocol(e),a=e;for(var _r139=(e=e.slice(o.length)).length-1;_r139>=1;--_r139)if(t=e.charCodeAt(_r139),47===t){if(!i){n=_r139;break;}}else i=!1;return-1===n?r?"/":this.isUrl(a)?o+e:o:r&&1===n?"//":o+e.slice(0,n);},rootname:function rootname(e){Ie(e);var t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){var _r140=e.indexOf("/",t.length);t=-1!==_r140?e.slice(0,_r140):e,t.endsWith("/")||(t+="/");}return t;},basename:function basename(e,t){Ie(e),t&&Ie(t),e=Ae(this.toPosix(e));var r,n=0,i=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var _a25=t.length-1,_s11=-1;for(r=e.length-1;r>=0;--r){var _u9=e.charCodeAt(r);if(47===_u9){if(!o){n=r+1;break;}}else-1===_s11&&(o=!1,_s11=r+1),_a25>=0&&(_u9===t.charCodeAt(_a25)?-1==--_a25&&(i=r):(_a25=-1,i=_s11));}return n===i?i=_s11:-1===i&&(i=e.length),e.slice(n,i);}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!o){n=r+1;break;}}else-1===i&&(o=!1,i=r+1);return-1===i?"":e.slice(n,i);},extname:function extname(e){Ie(e);var t=-1,r=0,n=-1,i=!0,o=0;for(var _a26=(e=Ae(this.toPosix(e))).length-1;_a26>=0;--_a26){var _s12=e.charCodeAt(_a26);if(47!==_s12)-1===n&&(i=!1,n=_a26+1),46===_s12?-1===t?t=_a26:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){r=_a26+1;break;}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n);},parse:function parse(e){Ie(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r=(e=Ae(this.toPosix(e))).charCodeAt(0);var n=this.isAbsolute(e);var i;t.root=this.rootname(e),i=n||this.hasProtocol(e)?1:0;var o=-1,a=0,s=-1,u=!0,l=e.length-1,h=0;for(;l>=i;--l)if(r=e.charCodeAt(l),47!==r)-1===s&&(u=!1,s=l+1),46===r?-1===o?o=l:1!==h&&(h=1):-1!==o&&(h=-1);else if(!u){a=l+1;break;}return-1===o||-1===s||0===h||1===h&&o===s-1&&o===a+1?-1!==s&&(t.base=t.name=0===a&&n?e.slice(1,s):e.slice(a,s)):(0===a&&n?(t.name=e.slice(1,o),t.base=e.slice(1,s)):(t.name=e.slice(a,o),t.base=e.slice(a,s)),t.ext=e.slice(o,s)),t.dir=this.dirname(e),t;},sep:"/",delimiter:":",joinExtensions:[".html"]};var Te,Ce;function Ee(){return _Ee.apply(this,arguments);}function _Ee(){_Ee=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee186(){var _Te;return _regeneratorRuntime().wrap(function _callee186$(_context191){while(1)switch(_context191.prev=_context191.next){case 0:return _context191.abrupt("return",((_Te=Te)!==null&&_Te!==void 0?_Te:Te=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee185(){var _e$getExtension;var e,t,r,n,i;return _regeneratorRuntime().wrap(function _callee185$(_context190){while(1)switch(_context190.prev=_context190.next){case 0:e=document.createElement("canvas").getContext("webgl");if(e){_context190.next=3;break;}return _context190.abrupt("return",z.UNPACK);case 3:_context190.next=5;return new Promise(function(e){var t=document.createElement("video");t.onloadeddata=function(){return e(t);},t.onerror=function(){return e(null);},t.autoplay=!1,t.crossOrigin="anonymous",t.preload="auto",t.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",t.load();});case 5:t=_context190.sent;if(t){_context190.next=8;break;}return _context190.abrupt("return",z.UNPACK);case 8:r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);i=new Uint8Array(4);return _context190.abrupt("return",(e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteFramebuffer(n),e.deleteTexture(r),(_e$getExtension=e.getExtension("WEBGL_lose_context"))!==null&&_e$getExtension!==void 0&&_e$getExtension.loseContext(),i[0]<=i[3]?z.PMA:z.UNPACK));case 14:case"end":return _context190.stop();}},_callee185);}))(),Te));case 1:case"end":return _context191.stop();}},_callee186);}));return _Ee.apply(this,arguments);}function Oe(){xe("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello");}function ke(){xe("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option');}function Pe(){return _typeof(Ce)>"u"&&(Ce=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:J.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{var _r142;if(!J.ADAPTER.getWebGLRenderingContext())return!1;var _t117=J.ADAPTER.createCanvas();var _r141=_t117.getContext("webgl",e)||_t117.getContext("experimental-webgl",e);var _n43=!!((_r142=_r141)!==null&&_r142!==void 0&&(_r142=_r142.getContextAttributes())!==null&&_r142!==void 0&&_r142.stencil);if(_r141){var _e221=_r141.getExtension("WEBGL_lose_context");_e221&&_e221.loseContext();}return _r141=null,_n43;}catch(_unused13){return!1;}}()),Ce;}var $e={grad:.9,turn:360,rad:360/(2*Math.PI)},Re=function Re(e){return"string"==typeof e?e.length>0:"number"==typeof e;},Be=function Be(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r+0;},De=function De(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e>t?e:t;},Me=function Me(e){return(e=isFinite(e)?e%360:0)>0?e:e+360;},Le=function Le(e){return{r:De(e.r,0,255),g:De(e.g,0,255),b:De(e.b,0,255),a:De(e.a)};},Fe=function Fe(e){return{r:Be(e.r),g:Be(e.g),b:Be(e.b),a:Be(e.a,3)};},Ne=/^#([0-9a-f]{3,8})$/i,Ue=function Ue(e){var t=e.toString(16);return t.length<2?"0"+t:t;},je=function je(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=Math.max(t,r,n),a=o-Math.min(t,r,n),s=a?o===t?(r-n)/a:o===r?2+(n-t)/a:4+(t-r)/a:0;return{h:60*(s<0?s+6:s),s:o?a/o*100:0,v:o/255*100,a:i};},Ge=function Ge(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var o=Math.floor(t),a=n*(1-r),s=n*(1-(t-o)*r),u=n*(1-(1-t+o)*r),l=o%6;return{r:255*[n,s,a,a,u,n][l],g:255*[u,n,n,s,a,a][l],b:255*[a,a,u,n,n,s][l],a:i};},ze=function ze(e){return{h:Me(e.h),s:De(e.s,0,100),l:De(e.l,0,100),a:De(e.a)};},Ve=function Ve(e){return{h:Be(e.h),s:Be(e.s),l:Be(e.l),a:Be(e.a,3)};},He=function He(e){return Ge((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n;},We=function We(e){return{h:(t=je(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i;},Ye=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ke=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ze=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qe={string:[[function(e){var t=Ne.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Be(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Be(parseInt(e.substr(6,2),16)/255,2):1}:null:null;},"hex"],[function(e){var t=Xe.exec(e)||Ze.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Le({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null;},"rgb"],[function(e){var t=Ye.exec(e)||Ke.exec(e);if(!t)return null;var r,n,i=ze({h:(r=t[1],n=t[2],void 0===n&&(n="deg"),Number(r)*($e[n]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return He(i);},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=void 0===i?1:i;return Re(t)&&Re(r)&&Re(n)?Le({r:Number(t),g:Number(r),b:Number(n),a:Number(o)}):null;},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,o=void 0===i?1:i;if(!Re(t)||!Re(r)||!Re(n))return null;var a=ze({h:Number(t),s:Number(r),l:Number(n),a:Number(o)});return He(a);},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,o=void 0===i?1:i;if(!Re(t)||!Re(r)||!Re(n))return null;var a=function(e){return{h:Me(e.h),s:De(e.s,0,100),v:De(e.v,0,100),a:De(e.a)};}({h:Number(t),s:Number(r),v:Number(n),a:Number(o)});return Ge(a);},"hsv"]]},Je=function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]];}return[null,void 0];},Qe=function Qe(e){return"string"==typeof e?Je(e.trim(),qe.string):"object"==_typeof(e)&&null!==e?Je(e,qe.object):[null,void 0];},et=function et(e,t){var r=We(e);return{h:r.h,s:De(r.s+100*t,0,100),l:r.l,a:r.a};},tt=function tt(e){return(299*e.r+587*e.g+114*e.b)/1e3/255;},rt=function rt(e,t){var r=We(e);return{h:r.h,s:r.s,l:De(r.l+100*t,0,100),a:r.a};},nt=function(){function e(e){this.parsed=Qe(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1};}return e.prototype.isValid=function(){return null!==this.parsed;},e.prototype.brightness=function(){return Be(tt(this.rgba),2);},e.prototype.isDark=function(){return tt(this.rgba)<.5;},e.prototype.isLight=function(){return tt(this.rgba)>=.5;},e.prototype.toHex=function(){return t=(e=Fe(this.rgba)).r,r=e.g,n=e.b,o=(i=e.a)<1?Ue(Be(255*i)):"","#"+Ue(t)+Ue(r)+Ue(n)+o;var e,t,r,n,i,o;},e.prototype.toRgb=function(){return Fe(this.rgba);},e.prototype.toRgbString=function(){return t=(e=Fe(this.rgba)).r,r=e.g,n=e.b,(i=e.a)<1?"rgba("+t+", "+r+", "+n+", "+i+")":"rgb("+t+", "+r+", "+n+")";var e,t,r,n,i;},e.prototype.toHsl=function(){return Ve(We(this.rgba));},e.prototype.toHslString=function(){return t=(e=Ve(We(this.rgba))).h,r=e.s,n=e.l,(i=e.a)<1?"hsla("+t+", "+r+"%, "+n+"%, "+i+")":"hsl("+t+", "+r+"%, "+n+"%)";var e,t,r,n,i;},e.prototype.toHsv=function(){return e=je(this.rgba),{h:Be(e.h),s:Be(e.s),v:Be(e.v),a:Be(e.a,3)};var e;},e.prototype.invert=function(){return it({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e;},e.prototype.saturate=function(e){return void 0===e&&(e=.1),it(et(this.rgba,e));},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),it(et(this.rgba,-e));},e.prototype.grayscale=function(){return it(et(this.rgba,-1));},e.prototype.lighten=function(e){return void 0===e&&(e=.1),it(rt(this.rgba,e));},e.prototype.darken=function(e){return void 0===e&&(e=.1),it(rt(this.rgba,-e));},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e);},e.prototype.alpha=function(e){return"number"==typeof e?it({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Be(this.rgba.a,3);var t;},e.prototype.hue=function(e){var t=We(this.rgba);return"number"==typeof e?it({h:e,s:t.s,l:t.l,a:t.a}):Be(t.h);},e.prototype.isEqual=function(e){return this.toHex()===it(e).toHex();},e;}(),it=function it(e){return e instanceof nt?e:new nt(e);},ot=[];!function(e){e.forEach(function(e){ot.indexOf(e)<0&&(e(nt,qe),ot.push(e));});}([function(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var o={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,a,s=n[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var u=this.toRgb(),l=1/0,h="black";if(!o.length)for(var c in r)o[c]=new e(r[c]).toRgb();for(var d in r){var f=(i=u,a=o[d],Math.pow(i.r-a.r,2)+Math.pow(i.g-a.g,2)+Math.pow(i.b-a.b,2));f<l&&(l=f,h=d);}return h;}},t.string.push([function(t){var n=t.toLowerCase(),i="transparent"===n?"#0000":r[n];return i?new e(i).toRgb():null;},"name"]);}]);var at=/*#__PURE__*/function(){function e(){var _e222=arguments.length>0&&arguments[0]!==undefined?arguments[0]:16777215;_classCallCheck(this,e);this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_e222;}_createClass(e,[{key:"red",get:function get(){return this._components[0];}},{key:"green",get:function get(){return this._components[1];}},{key:"blue",get:function get(){return this._components[2];}},{key:"alpha",get:function get(){return this._components[3];}},{key:"setValue",value:function setValue(_e223){return this.value=_e223,this;}},{key:"value",get:function get(){return this._value;},set:function set(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t));}}},{key:"cloneSource",value:function cloneSource(_e224){return"string"==typeof _e224||"number"==typeof _e224||_e224 instanceof Number||null===_e224?_e224:Array.isArray(_e224)||ArrayBuffer.isView(_e224)?_e224.slice(0):"object"==_typeof(_e224)&&null!==_e224?_objectSpread({},_e224):_e224;}},{key:"isSourceEqual",value:function isSourceEqual(_e225,t){var r=_typeof(_e225);if(r!==_typeof(t))return!1;if("number"===r||"string"===r||_e225 instanceof Number)return _e225===t;if(Array.isArray(_e225)&&Array.isArray(t)||ArrayBuffer.isView(_e225)&&ArrayBuffer.isView(t))return _e225.length===t.length&&_e225.every(function(_e226,r){return _e226===t[r];});if(null!==_e225&&null!==t){var _r143=Object.keys(_e225),_n44=Object.keys(t);return _r143.length===_n44.length&&_r143.every(function(r){return _e225[r]===t[r];});}return _e225===t;}},{key:"toRgba",value:function toRgba(){var _this$_components=_slicedToArray(this._components,4),_e227=_this$_components[0],t=_this$_components[1],r=_this$_components[2],n=_this$_components[3];return{r:_e227,g:t,b:r,a:n};}},{key:"toRgb",value:function toRgb(){var _this$_components2=_slicedToArray(this._components,3),_e228=_this$_components2[0],t=_this$_components2[1],r=_this$_components2[2];return{r:_e228,g:t,b:r};}},{key:"toRgbaString",value:function toRgbaString(){var _this$toUint8RgbArray=this.toUint8RgbArray(),_this$toUint8RgbArray2=_slicedToArray(_this$toUint8RgbArray,3),_e229=_this$toUint8RgbArray2[0],t=_this$toUint8RgbArray2[1],r=_this$toUint8RgbArray2[2];return"rgba(".concat(_e229,",").concat(t,",").concat(r,",").concat(this.alpha,")");}},{key:"toUint8RgbArray",value:function toUint8RgbArray(_e230){var _e242;var _this$_components3=_slicedToArray(this._components,3),t=_this$_components3[0],r=_this$_components3[1],n=_this$_components3[2];return(_e230=(_e242=_e230)!==null&&_e242!==void 0?_e242:[])[0]=Math.round(255*t),_e230[1]=Math.round(255*r),_e230[2]=Math.round(255*n),_e230;}},{key:"toRgbArray",value:function toRgbArray(_e231){var _e243;_e231=(_e243=_e231)!==null&&_e243!==void 0?_e243:[];var _this$_components4=_slicedToArray(this._components,3),t=_this$_components4[0],r=_this$_components4[1],n=_this$_components4[2];return _e231[0]=t,_e231[1]=r,_e231[2]=n,_e231;}},{key:"toNumber",value:function toNumber(){return this._int;}},{key:"toLittleEndianNumber",value:function toLittleEndianNumber(){var _e232=this._int;return(_e232>>16)+(65280&_e232)+((255&_e232)<<16);}},{key:"multiply",value:function multiply(t){var _e$temp$setValue$_com=_slicedToArray(e.temp.setValue(t)._components,4),r=_e$temp$setValue$_com[0],n=_e$temp$setValue$_com[1],i=_e$temp$setValue$_com[2],o=_e$temp$setValue$_com[3];return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=o,this.refreshInt(),this._value=null,this;}},{key:"premultiply",value:function premultiply(_e233){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;return t&&(this._components[0]*=_e233,this._components[1]*=_e233,this._components[2]*=_e233),this._components[3]=_e233,this.refreshInt(),this._value=null,this;}},{key:"toPremultiplied",value:function toPremultiplied(_e234){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;if(1===_e234)return(255<<24)+this._int;if(0===_e234)return t?0:this._int;var r=this._int>>16&255,n=this._int>>8&255,i=255&this._int;return t&&(r=r*_e234+.5|0,n=n*_e234+.5|0,i=i*_e234+.5|0),(255*_e234<<24)+(r<<16)+(n<<8)+i;}},{key:"toHex",value:function toHex(){var _e235=this._int.toString(16);return"#".concat("000000".substring(0,6-_e235.length)+_e235);}},{key:"toHexa",value:function toHexa(){var _e236=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-_e236.length)+_e236;}},{key:"setAlpha",value:function setAlpha(_e237){return this._components[3]=this._clamp(_e237),this;}},{key:"round",value:function round(_e238){var _this$_components5=_slicedToArray(this._components,3),t=_this$_components5[0],r=_this$_components5[1],n=_this$_components5[2];return this._components[0]=Math.round(t*_e238)/_e238,this._components[1]=Math.round(r*_e238)/_e238,this._components[2]=Math.round(n*_e238)/_e238,this.refreshInt(),this._value=null,this;}},{key:"toArray",value:function toArray(_e239){var _e244;_e239=(_e244=_e239)!==null&&_e244!==void 0?_e244:[];var _this$_components6=_slicedToArray(this._components,4),t=_this$_components6[0],r=_this$_components6[1],n=_this$_components6[2],i=_this$_components6[3];return _e239[0]=t,_e239[1]=r,_e239[2]=n,_e239[3]=i,_e239;}},{key:"normalize",value:function normalize(t){var _t118,_t119,_t119$,_t120,_t121,_t121$;var r,n,i,o;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215){r=(t>>16&255)/255,n=(t>>8&255)/255,i=(255&t)/255,o=1;}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),(_t118=t,_t119=_slicedToArray(_t118,4),r=_t119[0],n=_t119[1],i=_t119[2],_t119$=_t119[3],o=_t119$===void 0?1:_t119$);else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),(_t120=t,_t121=_slicedToArray(_t120,4),r=_t121[0],n=_t121[1],i=_t121[2],_t121$=_t121[3],o=_t121$===void 0?255:_t121$),r/=255,n/=255,i/=255,o/=255;else if("string"==typeof t||"object"==_typeof(t)){var _a27$rgba;if("string"==typeof t){var _r144=e.HEX_PATTERN.exec(t);_r144&&(t="#".concat(_r144[2]));}var _a27=it(t);_a27.isValid()&&((_a27$rgba=_a27.rgba,r=_a27$rgba.r,n=_a27$rgba.g,i=_a27$rgba.b,o=_a27$rgba.a),r/=255,n/=255,i/=255);}if(void 0===r)throw new Error("Unable to convert color ".concat(t));this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=o,this.refreshInt();}},{key:"refreshInt",value:function refreshInt(){this._clamp(this._components);var _this$_components7=_slicedToArray(this._components,3),_e240=_this$_components7[0],t=_this$_components7[1],r=_this$_components7[2];this._int=(255*_e240<<16)+(255*t<<8)+(255*r|0);}},{key:"_clamp",value:function _clamp(_e241){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return"number"==typeof _e241?Math.min(Math.max(_e241,t),r):(_e241.forEach(function(n,i){_e241[i]=Math.min(Math.max(n,t),r);}),_e241);}}]);return e;}();at.shared=new at(),at.temp=new at(),at.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var st=at;function ut(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return xe("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),st.shared.setValue(e).toRgbArray(t);}function lt(e){return xe("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),st.shared.setValue(e).toHex();}function ht(e){return xe("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),st.shared.setValue(e).toNumber();}function ct(e){return xe("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),st.shared.setValue(e).toNumber();}var dt=function(){var e=[],t=[];for(var _r145=0;_r145<32;_r145++)e[_r145]=_r145,t[_r145]=_r145;e[B.NORMAL_NPM]=B.NORMAL,e[B.ADD_NPM]=B.ADD,e[B.SCREEN_NPM]=B.SCREEN,t[B.NORMAL]=B.NORMAL_NPM,t[B.ADD]=B.ADD_NPM,t[B.SCREEN]=B.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r;}();function ft(e,t){return dt[t?1:0][e];}function pt(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!0;return xe("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),st.shared.setValue(e).premultiply(t,n).toArray(r!==null&&r!==void 0?r:new Float32Array(4));}function yt(e,t){return xe("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),st.shared.setValue(e).toPremultiplied(t);}function gt(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!0;return xe("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),st.shared.setValue(e).premultiply(t,n).toArray(r!==null&&r!==void 0?r:new Float32Array(4));}var mt=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function wt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=6*e;if((t=t||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got ".concat(t.length," and expected ").concat(r));for(var _e245=0,_n45=0;_e245<r;_e245+=6,_n45+=4)t[_e245+0]=_n45+0,t[_e245+1]=_n45+1,t[_e245+2]=_n45+2,t[_e245+3]=_n45+0,t[_e245+4]=_n45+2,t[_e245+5]=_n45+3;return t;}function bt(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array";}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null;}var vt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function xt(e,t){var r=0,n=0;var i={};for(var _i40=0;_i40<e.length;_i40++)n+=t[_i40],r+=e[_i40].length;var o=new ArrayBuffer(4*r);var a=null,s=0;for(var _r146=0;_r146<e.length;_r146++){var _u10=t[_r146],_l8=e[_r146],_h6=bt(_l8);i[_h6]||(i[_h6]=new vt[_h6](o)),a=i[_h6];for(var _e246=0;_e246<_l8.length;_e246++){a[(_e246/_u10|0)*n+s+_e246%_u10]=_l8[_e246];}s+=_u10;}return new Float32Array(o);}function _t(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1;}function It(e){return!(e&e-1||!e);}function At(e){var t=(e>65535?1:0)<<4,r=((e>>>=t)>255?1:0)<<3;return t|=r,r=((e>>>=r)>15?1:0)<<2,t|=r,r=((e>>>=r)>3?1:0)<<1,t|=r,t|(e>>>=r)>>1;}function St(e,t,r){var n=e.length;var i;if(t>=n||0===r)return;var o=n-(r=t+r>n?n-t:r);for(i=t;i<o;++i)e[i]=e[i+r];e.length=o;}function Tt(e){return 0===e?0:e<0?-1:1;}var Ct=0;function Et(){return++Ct;}var Ot=/*#__PURE__*/function(){function Ot(e,t,r,n){_classCallCheck(this,Ot);this.left=e,this.top=t,this.right=r,this.bottom=n;}_createClass(Ot,[{key:"width",get:function get(){return this.right-this.left;}},{key:"height",get:function get(){return this.bottom-this.top;}},{key:"isEmpty",value:function isEmpty(){return this.left===this.right||this.top===this.bottom;}}]);return Ot;}();Ot.EMPTY=new Ot(0,0,0,0);var kt=Ot;var Pt={},$t=Object.create(null),Rt=Object.create(null);function Bt(){var e;for(e in $t)$t[e].destroy();for(e in Rt)Rt[e].destroy();}function Dt(){var e;for(e in $t)delete $t[e];for(e in Rt)delete Rt[e];}var Mt=/*#__PURE__*/function(){function Mt(e,t,r){_classCallCheck(this,Mt);this._canvas=J.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||J.RESOLUTION,this.resize(e,t);}_createClass(Mt,[{key:"clear",value:function clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height);}},{key:"resize",value:function resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution);}},{key:"destroy",value:function destroy(){this._context=null,this._canvas=null;}},{key:"width",get:function get(){return this._checkDestroyed(),this._canvas.width;},set:function set(e){this._checkDestroyed(),this._canvas.width=Math.round(e);}},{key:"height",get:function get(){return this._checkDestroyed(),this._canvas.height;},set:function set(e){this._checkDestroyed(),this._canvas.height=Math.round(e);}},{key:"canvas",get:function get(){return this._checkDestroyed(),this._canvas;}},{key:"context",get:function get(){return this._checkDestroyed(),this._context;}},{key:"_checkDestroyed",value:function _checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed");}}]);return Mt;}();function Lt(e,t,r){for(var _n46=0,_i41=4*r*t;_n46<t;++_n46,_i41+=4)if(0!==e[_i41+3])return!1;return!0;}function Ft(e,t,r,n,i){var o=4*t;for(var _t122=n,_a28=n*o+4*r;_t122<=i;++_t122,_a28+=o)if(0!==e[_a28+3])return!1;return!0;}function Nt(e){var t=e.width,r=e.height,n=e.getContext("2d",{willReadFrequently:!0});if(null===n)throw new TypeError("Failed to get canvas 2D context");var i=n.getImageData(0,0,t,r).data;var o=0,a=0,s=t-1,u=r-1;for(;a<r&&Lt(i,t,a);)++a;if(a===r)return kt.EMPTY;for(;Lt(i,t,u);)--u;for(;Ft(i,t,o,a,u);)++o;for(;Ft(i,t,s,a,u);)--s;return++s,++u,new kt(o,a,s,u);}function Ut(e){var t=Nt(e),r=t.width,n=t.height;var i=null;if(!t.isEmpty()){var _o25=e.getContext("2d");if(null===_o25)throw new TypeError("Failed to get canvas 2D context");i=_o25.getImageData(t.left,t.top,r,n);}return{width:r,height:n,data:i};}function jt(e){var t=mt.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]};}function Gt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:globalThis.location;if(e.startsWith("data:"))return"";t=t||globalThis.location;var r=new URL(e,document.baseURI);return r.hostname!==t.hostname||r.port!==t.port||r.protocol!==t.protocol?"anonymous":"";}function zt(e){var _J$RETINA_PREFIX;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=(_J$RETINA_PREFIX=J.RETINA_PREFIX)===null||_J$RETINA_PREFIX===void 0?void 0:_J$RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t;}var Vt=function(e){return e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e;}(Vt||{});var Ht=function Ht(e){if("function"==typeof e||"object"==_typeof(e)&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e=_objectSpread(_objectSpread({},"object"!=_typeof(e.extension)?{type:e.extension}:e.extension),{},{ref:e});}if("object"!=_typeof(e))throw new Error("Invalid extension type");return"string"==typeof(e=_objectSpread({},e)).type&&(e.type=[e.type]),e;},Wt=function Wt(e,t){var _Ht$priority;return(_Ht$priority=Ht(e).priority)!==null&&_Ht$priority!==void 0?_Ht$priority:t;},Yt={_addHandlers:{},_removeHandlers:{},_queue:{},remove:function remove(){var _this34=this;for(var _len3=arguments.length,e=new Array(_len3),_key3=0;_key3<_len3;_key3++){e[_key3]=arguments[_key3];}return e.map(Ht).forEach(function(e){e.type.forEach(function(t){var _this34$_removeHandle,_this34$_removeHandle2;return(_this34$_removeHandle=(_this34$_removeHandle2=_this34._removeHandlers)[t])===null||_this34$_removeHandle===void 0?void 0:_this34$_removeHandle.call(_this34$_removeHandle2,e);});}),this;},add:function add(){var _this35=this;for(var _len4=arguments.length,e=new Array(_len4),_key4=0;_key4<_len4;_key4++){e[_key4]=arguments[_key4];}return e.map(Ht).forEach(function(e){e.type.forEach(function(t){var _r$t,_n$t;var r=_this35._addHandlers,n=_this35._queue;r[t]?(_r$t=r[t])===null||_r$t===void 0?void 0:_r$t.call(r,e):(n[t]=n[t]||[],(_n$t=n[t])===null||_n$t===void 0?void 0:_n$t.push(e));});}),this;},handle:function handle(e,t,r){var _o$e;var n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error("Extension type ".concat(e," already has a handler"));n[e]=t,i[e]=r;var o=this._queue;return o[e]&&((_o$e=o[e])!==null&&_o$e!==void 0&&_o$e.forEach(function(e){return t(e);}),delete o[e]),this;},handleByMap:function handleByMap(e,t){return this.handle(e,function(e){e.name&&(t[e.name]=e.ref);},function(e){e.name&&delete t[e.name];});},handleByList:function handleByList(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;return this.handle(e,function(e){t.includes(e.ref)||(t.push(e.ref),t.sort(function(e,t){return Wt(t,r)-Wt(e,r);}));},function(e){var r=t.indexOf(e.ref);-1!==r&&t.splice(r,1);});}};var Kt=/*#__PURE__*/function(){function Kt(e){_classCallCheck(this,Kt);"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData);}_createClass(Kt,[{key:"int8View",get:function get(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View;}},{key:"uint8View",get:function get(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View;}},{key:"int16View",get:function get(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View;}},{key:"uint16View",get:function get(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View;}},{key:"int32View",get:function get(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View;}},{key:"view",value:function view(e){return this["".concat(e,"View")];}},{key:"destroy",value:function destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null;}}],[{key:"sizeOf",value:function sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error("".concat(e," isn't a valid view type"));}}}]);return Kt;}();var Xt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Zt(e){var t="";for(var _r147=0;_r147<e;++_r147)_r147>0&&(t+="\nelse "),_r147<e-1&&(t+="if(test == ".concat(_r147,".0){}"));return t;}function qt(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");var r=t.createShader(t.FRAGMENT_SHADER);for(;;){var _n47=Xt.replace(/%forloop%/gi,Zt(e));if(t.shaderSource(r,_n47),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0;}return e;}var Jt=/*#__PURE__*/function(){function Jt(){_classCallCheck(this,Jt);this.data=0,this.blendMode=B.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0;}_createClass(Jt,[{key:"blend",get:function get(){return!!(1&this.data);},set:function set(e){!!(1&this.data)!==e&&(this.data^=1);}},{key:"offsets",get:function get(){return!!(2&this.data);},set:function set(e){!!(2&this.data)!==e&&(this.data^=2);}},{key:"culling",get:function get(){return!!(4&this.data);},set:function set(e){!!(4&this.data)!==e&&(this.data^=4);}},{key:"depthTest",get:function get(){return!!(8&this.data);},set:function set(e){!!(8&this.data)!==e&&(this.data^=8);}},{key:"depthMask",get:function get(){return!!(32&this.data);},set:function set(e){!!(32&this.data)!==e&&(this.data^=32);}},{key:"clockwiseFrontFace",get:function get(){return!!(16&this.data);},set:function set(e){!!(16&this.data)!==e&&(this.data^=16);}},{key:"blendMode",get:function get(){return this._blendMode;},set:function set(e){this.blend=e!==B.NONE,this._blendMode=e;}},{key:"polygonOffset",get:function get(){return this._polygonOffset;},set:function set(e){this.offsets=!!e,this._polygonOffset=e;}}],[{key:"for2d",value:function for2d(){var e=new Jt();return e.depthTest=!1,e.blend=!0,e;}}]);return Jt;}();Jt.prototype.toString=function(){return"[@pixi/core:State blendMode=".concat(this.blendMode," clockwiseFrontFace=").concat(this.clockwiseFrontFace," culling=").concat(this.culling," depthMask=").concat(this.depthMask," polygonOffset=").concat(this.polygonOffset,"]");};var Qt=[];function er(e,t){if(!e)return null;var r="";if("string"==typeof e){var _t123=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);_t123&&(r=_t123[1].toLowerCase());}for(var _n48=Qt.length-1;_n48>=0;--_n48){var _i42=Qt[_n48];if(_i42.test&&_i42.test(e,r))return new _i42(e,t);}throw new Error("Unrecognized source type to auto-detect Resource");}var tr=/*#__PURE__*/function(){function tr(e){_classCallCheck(this,tr);this.items=[],this._name=e,this._aliasCount=0;}_createClass(tr,[{key:"emit",value:function emit(e,t,r,n,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this.name,l=this.items;this._aliasCount++;for(var _h7=0,_c3=l.length;_h7<_c3;_h7++)l[_h7][u](e,t,r,n,i,o,a,s);return l===this.items&&this._aliasCount--,this;}},{key:"ensureNonAliasedItems",value:function ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0));}},{key:"add",value:function add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this;}},{key:"remove",value:function remove(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this;}},{key:"contains",value:function contains(e){return this.items.includes(e);}},{key:"removeAll",value:function removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this;}},{key:"destroy",value:function destroy(){this.removeAll(),this.items.length=0,this._name="";}},{key:"empty",get:function get(){return 0===this.items.length;}},{key:"name",get:function get(){return this._name;}}]);return tr;}();Object.defineProperties(tr.prototype,{dispatch:{value:tr.prototype.emit},run:{value:tr.prototype.emit}});var rr=/*#__PURE__*/function(){function rr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,rr);this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new tr("setRealSize"),this.onUpdate=new tr("update"),this.onError=new tr("onError");}_createClass(rr,[{key:"bind",value:function bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height);}},{key:"unbind",value:function unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e);}},{key:"resize",value:function resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t));}},{key:"valid",get:function get(){return!!this._width&&!!this._height;}},{key:"update",value:function update(){this.destroyed||this.onUpdate.emit();}},{key:"load",value:function load(){return Promise.resolve(this);}},{key:"width",get:function get(){return this._width;}},{key:"height",get:function get(){return this._height;}},{key:"style",value:function style(e,t,r){return!1;}},{key:"dispose",value:function dispose(){}},{key:"destroy",value:function destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null);}}],[{key:"test",value:function test(e,t){return!1;}}]);return rr;}();var nr=/*#__PURE__*/function(_rr){_inherits(nr,_rr);function nr(e,t){var _t$unpackAlignment;var _this36;_classCallCheck(this,nr);var _ref33=t||{},r=_ref33.width,n=_ref33.height;if(!r||!n)throw new Error("BufferResource width or height invalid");_this36=_callSuper(this,nr,[r,n]),_this36.data=e,_this36.unpackAlignment=(_t$unpackAlignment=t.unpackAlignment)!==null&&_t$unpackAlignment!==void 0?_t$unpackAlignment:4;return _this36;}_createClass(nr,[{key:"upload",value:function upload(e,t,r){var n=e.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===z.UNPACK);var i=t.realWidth,o=t.realHeight;return r.width===i&&r.height===o?n.texSubImage2D(t.target,0,0,0,i,o,t.format,r.type,this.data):(r.width=i,r.height=o,n.texImage2D(t.target,0,r.internalFormat,i,o,0,t.format,r.type,this.data)),!0;}},{key:"dispose",value:function dispose(){this.data=null;}}],[{key:"test",value:function test(e){return null===e||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array;}}]);return nr;}(rr);var ir={scaleMode:U.NEAREST,alphaMode:z.NPM},or=/*#__PURE__*/function(_me2){_inherits(e,_me2);function e(){var _this37;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,e);_this37=_callSuper(this,e),r=Object.assign({},e.defaultOptions,r);var _r148=r,n=_r148.alphaMode,i=_r148.mipmap,o=_r148.anisotropicLevel,a=_r148.scaleMode,s=_r148.width,u=_r148.height,l=_r148.wrapMode,h=_r148.format,c=_r148.type,d=_r148.target,f=_r148.resolution,p=_r148.resourceOptions;t&&!(t instanceof rr)&&((t=er(t,p)).internal=!0),_this37.resolution=f||J.RESOLUTION,_this37.width=Math.round((s||0)*_this37.resolution)/_this37.resolution,_this37.height=Math.round((u||0)*_this37.resolution)/_this37.resolution,_this37._mipmap=i,_this37.anisotropicLevel=o,_this37._wrapMode=l,_this37._scaleMode=a,_this37.format=h,_this37.type=c,_this37.target=d,_this37.alphaMode=n,_this37.uid=Et(),_this37.touched=0,_this37.isPowerOfTwo=!1,_this37._refreshPOT(),_this37._glTextures={},_this37.dirtyId=0,_this37.dirtyStyleId=0,_this37.cacheId=null,_this37.valid=s>0&&u>0,_this37.textureCacheIds=[],_this37.destroyed=!1,_this37.resource=null,_this37._batchEnabled=0,_this37._batchLocation=0,_this37.parentTextureArray=null,_this37.setResource(t);return _this37;}_createClass(e,[{key:"realWidth",get:function get(){return Math.round(this.width*this.resolution);}},{key:"realHeight",get:function get(){return Math.round(this.height*this.resolution);}},{key:"mipmap",get:function get(){return this._mipmap;},set:function set(_e247){this._mipmap!==_e247&&(this._mipmap=_e247,this.dirtyStyleId++);}},{key:"scaleMode",get:function get(){return this._scaleMode;},set:function set(_e248){this._scaleMode!==_e248&&(this._scaleMode=_e248,this.dirtyStyleId++);}},{key:"wrapMode",get:function get(){return this._wrapMode;},set:function set(_e249){this._wrapMode!==_e249&&(this._wrapMode=_e249,this.dirtyStyleId++);}},{key:"setStyle",value:function setStyle(_e250,t){var r;return void 0!==_e250&&_e250!==this.scaleMode&&(this.scaleMode=_e250,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this;}},{key:"setSize",value:function setSize(_e251,t,r){return r=r||this.resolution,this.setRealSize(_e251*r,t*r,r);}},{key:"setRealSize",value:function setRealSize(_e252,t,r){return this.resolution=r||this.resolution,this.width=Math.round(_e252)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this;}},{key:"_refreshPOT",value:function _refreshPOT(){this.isPowerOfTwo=It(this.realWidth)&&It(this.realHeight);}},{key:"setResolution",value:function setResolution(_e253){var t=this.resolution;return t===_e253||(this.resolution=_e253,this.valid&&(this.width=Math.round(this.width*t)/_e253,this.height=Math.round(this.height*t)/_e253,this.emit("update",this)),this._refreshPOT()),this;}},{key:"setResource",value:function setResource(_e254){if(this.resource===_e254)return this;if(this.resource)throw new Error("Resource can be set only once");return _e254.bind(this),this.resource=_e254,this;}},{key:"update",value:function update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this));}},{key:"onError",value:function onError(_e255){this.emit("error",this,_e255);}},{key:"destroy",value:function destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Rt[this.cacheId],delete $t[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners();}},{key:"dispose",value:function dispose(){this.emit("dispose",this);}},{key:"castToBaseTexture",value:function castToBaseTexture(){return this;}}],[{key:"from",value:function from(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:J.STRICT_TEXTURE_CACHE;var i="string"==typeof t;var o=null;if(i)o=t;else{if(!t._pixiId){var _e256=(r===null||r===void 0?void 0:r.pixiIdPrefix)||"pixiid";t._pixiId="".concat(_e256,"_").concat(Et());}o=t._pixiId;}var a=Rt[o];if(i&&n&&!a)throw new Error("The cacheId \"".concat(o,"\" does not exist in BaseTextureCache."));return a||(a=new e(t,r),a.cacheId=o,e.addToCache(a,o)),a;}},{key:"fromBuffer",value:function fromBuffer(t,r,n,i){t=t||new Float32Array(r*n*4);var o=new nr(t,_objectSpread({width:r,height:n},i===null||i===void 0?void 0:i.resourceOptions));var a,s;return t instanceof Float32Array?(a=M.RGBA,s=F.FLOAT):t instanceof Int32Array?(a=M.RGBA_INTEGER,s=F.INT):t instanceof Uint32Array?(a=M.RGBA_INTEGER,s=F.UNSIGNED_INT):t instanceof Int16Array?(a=M.RGBA_INTEGER,s=F.SHORT):t instanceof Uint16Array?(a=M.RGBA_INTEGER,s=F.UNSIGNED_SHORT):t instanceof Int8Array?(a=M.RGBA,s=F.BYTE):(a=M.RGBA,s=F.UNSIGNED_BYTE),o.internal=!0,new e(o,Object.assign({},ir,{type:s,format:a},i));}},{key:"addToCache",value:function addToCache(_e257,t){t&&(_e257.textureCacheIds.includes(t)||_e257.textureCacheIds.push(t),Rt[t]&&Rt[t]!==_e257&&console.warn("BaseTexture added to the cache with an id [".concat(t,"] that already had an entry")),Rt[t]=_e257);}},{key:"removeFromCache",value:function removeFromCache(_e258){if("string"==typeof _e258){var _t124=Rt[_e258];if(_t124){var _r149=_t124.textureCacheIds.indexOf(_e258);return _r149>-1&&_t124.textureCacheIds.splice(_r149,1),delete Rt[_e258],_t124;}}else if(_e258!==null&&_e258!==void 0&&_e258.textureCacheIds){for(var _t125=0;_t125<_e258.textureCacheIds.length;++_t125)delete Rt[_e258.textureCacheIds[_t125]];return _e258.textureCacheIds.length=0,_e258;}return null;}}]);return e;}(me);or.defaultOptions={mipmap:G.POW2,anisotropicLevel:0,scaleMode:U.LINEAR,wrapMode:j.CLAMP,alphaMode:z.UNPACK,target:L.TEXTURE_2D,format:M.RGBA,type:F.UNSIGNED_BYTE},or._globalBatch=0;var ar=or;var sr=/*#__PURE__*/_createClass(function sr(){_classCallCheck(this,sr);this.texArray=null,this.blend=0,this.type=D.TRIANGLES,this.start=0,this.size=0,this.data=null;});var ur=0;var lr=/*#__PURE__*/function(){function lr(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;_classCallCheck(this,lr);this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this["static"]=t,this.id=ur++,this.disposeRunner=new tr("disposeBuffer");}_createClass(lr,[{key:"update",value:function update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++;}},{key:"dispose",value:function dispose(){this.disposeRunner.emit(this,!1);}},{key:"destroy",value:function destroy(){this.dispose(),this.data=null;}},{key:"index",get:function get(){return this.type===Z.ELEMENT_ARRAY_BUFFER;},set:function set(e){this.type=e?Z.ELEMENT_ARRAY_BUFFER:Z.ARRAY_BUFFER;}}],[{key:"from",value:function from(e){return e instanceof Array&&(e=new Float32Array(e)),new lr(e);}}]);return lr;}();var hr=/*#__PURE__*/function(){function hr(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:F.FLOAT;var i=arguments.length>4?arguments[4]:undefined;var o=arguments.length>5?arguments[5]:undefined;var a=arguments.length>6?arguments[6]:undefined;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:1;_classCallCheck(this,hr);this.buffer=e,this.size=t,this.normalized=r,this.type=n,this.stride=i,this.start=o,this.instance=a,this.divisor=s;}_createClass(hr,[{key:"destroy",value:function destroy(){this.buffer=null;}}],[{key:"from",value:function from(e,t,r,n,i){return new hr(e,t,r,n,i);}}]);return hr;}();var cr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var dr={5126:4,5123:2,5121:1};var fr=0;var pr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};var yr=/*#__PURE__*/function(){function yr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,yr);this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=fr++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new tr("disposeGeometry"),this.refCount=0;}_createClass(yr,[{key:"addAttribute",value:function addAttribute(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;var i=arguments.length>4?arguments[4]:undefined;var o=arguments.length>5?arguments[5]:undefined;var a=arguments.length>6?arguments[6]:undefined;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:!1;if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof lr||(t instanceof Array&&(t=new Float32Array(t)),t=new lr(t));var u=e.split("|");if(u.length>1){for(var _e259=0;_e259<u.length;_e259++)this.addAttribute(u[_e259],t,r,n,i);return this;}var l=this.buffers.indexOf(t);return-1===l&&(this.buffers.push(t),l=this.buffers.length-1),this.attributes[e]=new hr(l,r,n,i,o,a,s),this.instanced=this.instanced||s,this;}},{key:"getAttribute",value:function getAttribute(e){return this.attributes[e];}},{key:"getBuffer",value:function getBuffer(e){return this.buffers[this.getAttribute(e).buffer];}},{key:"addIndex",value:function addIndex(e){return e instanceof lr||(e instanceof Array&&(e=new Uint16Array(e)),e=new lr(e)),e.type=Z.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this;}},{key:"getIndex",value:function getIndex(){return this.indexBuffer;}},{key:"interleave",value:function interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e=[],t=[],r=new lr();var n;for(n in this.attributes){var _r150=this.attributes[n],_i43=this.buffers[_r150.buffer];e.push(_i43.data),t.push(_r150.size*dr[_r150.type]/4),_r150.buffer=0;}for(r.data=function(e,t){var r=0,n=0;var i={};for(var _i44=0;_i44<e.length;_i44++)n+=t[_i44],r+=e[_i44].length;var o=new ArrayBuffer(4*r);var a=null,s=0;for(var _r151=0;_r151<e.length;_r151++){var _u11=t[_r151],_l9=e[_r151],_h8=bt(_l9);i[_h8]||(i[_h8]=new cr[_h8](o)),a=i[_h8];for(var _e260=0;_e260<_l9.length;_e260++)a[(_e260/_u11|0)*n+s+_e260%_u11]=_l9[_e260];s+=_u11;}return new Float32Array(o);}(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this;}},{key:"getSize",value:function getSize(){for(var _e261 in this.attributes){var _t126=this.attributes[_e261];return this.buffers[_t126.buffer].data.length/(_t126.stride/4||_t126.size);}return 0;}},{key:"dispose",value:function dispose(){this.disposeRunner.emit(this,!1);}},{key:"destroy",value:function destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null;}},{key:"clone",value:function clone(){var e=new yr();for(var _t127=0;_t127<this.buffers.length;_t127++)e.buffers[_t127]=new lr(this.buffers[_t127].data.slice(0));for(var _t128 in this.attributes){var _r152=this.attributes[_t128];e.attributes[_t128]=new hr(_r152.buffer,_r152.size,_r152.normalized,_r152.type,_r152.stride,_r152.start,_r152.instance);}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Z.ELEMENT_ARRAY_BUFFER),e;}}],[{key:"merge",value:function merge(e){var t=new yr(),r=[],n=[],i=[];var o;for(var _t129=0;_t129<e.length;_t129++){o=e[_t129];for(var _e262=0;_e262<o.buffers.length;_e262++)n[_e262]=n[_e262]||0,n[_e262]+=o.buffers[_e262].data.length,i[_e262]=0;}for(var _e263=0;_e263<o.buffers.length;_e263++)r[_e263]=new pr[bt(o.buffers[_e263].data)](n[_e263]),t.buffers[_e263]=new lr(r[_e263]);for(var _t130=0;_t130<e.length;_t130++){o=e[_t130];for(var _e264=0;_e264<o.buffers.length;_e264++)r[_e264].set(o.buffers[_e264].data,i[_e264]),i[_e264]+=o.buffers[_e264].data.length;}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Z.ELEMENT_ARRAY_BUFFER;var _r153=0,_n49=0,_i45=0,_a29=0;for(var _e265=0;_e265<o.buffers.length;_e265++)if(o.buffers[_e265]!==o.indexBuffer){_a29=_e265;break;}for(var _e266 in o.attributes){var _t131=o.attributes[_e266];(0|_t131.buffer)===_a29&&(_n49+=_t131.size*dr[_t131.type]/4);}for(var _o26=0;_o26<e.length;_o26++){var _s13=e[_o26].indexBuffer.data;for(var _e267=0;_e267<_s13.length;_e267++)t.indexBuffer.data[_e267+_i45]+=_r153;_r153+=e[_o26].buffers[_a29].data.length/_n49,_i45+=_s13.length;}}return t;}}]);return yr;}();var gr=/*#__PURE__*/function(_yr){_inherits(gr,_yr);function gr(){var _this38;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;_classCallCheck(this,gr);_this38=_callSuper(this,gr),_this38._buffer=new lr(null,e,!1),_this38._indexBuffer=new lr(null,e,!0),_this38.addAttribute("aVertexPosition",_this38._buffer,2,!1,F.FLOAT).addAttribute("aTextureCoord",_this38._buffer,2,!1,F.FLOAT).addAttribute("aColor",_this38._buffer,4,!0,F.UNSIGNED_BYTE).addAttribute("aTextureId",_this38._buffer,1,!0,F.FLOAT).addIndex(_this38._indexBuffer);return _this38;}return _createClass(gr);}(yr);var mr=2*Math.PI,wr=180/Math.PI,br=Math.PI/180;var vr=function(e){return e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e;}(vr||{});var xr=/*#__PURE__*/function(){function xr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,xr);this.x=0,this.y=0,this.x=e,this.y=t;}_createClass(xr,[{key:"clone",value:function clone(){return new xr(this.x,this.y);}},{key:"copyFrom",value:function copyFrom(e){return this.set(e.x,e.y),this;}},{key:"copyTo",value:function copyTo(e){return e.set(this.x,this.y),e;}},{key:"equals",value:function equals(e){return e.x===this.x&&e.y===this.y;}},{key:"set",value:function set(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e;return this.x=e,this.y=t,this;}}]);return xr;}();xr.prototype.toString=function(){return"[@pixi/math:Point x=".concat(this.x," y=").concat(this.y,"]");};var _r=[new xr(),new xr(),new xr(),new xr()];var Ir=/*#__PURE__*/function(){function Ir(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,Ir);this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=vr.RECT;}_createClass(Ir,[{key:"left",get:function get(){return this.x;}},{key:"right",get:function get(){return this.x+this.width;}},{key:"top",get:function get(){return this.y;}},{key:"bottom",get:function get(){return this.y+this.height;}},{key:"clone",value:function clone(){return new Ir(this.x,this.y,this.width,this.height);}},{key:"copyFrom",value:function copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this;}},{key:"copyTo",value:function copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e;}},{key:"contains",value:function contains(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height;}},{key:"intersects",value:function intersects(e,t){if(!t){var _t132=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=_t132)return!1;var _r154=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>_r154;}var r=this.left,n=this.right,i=this.top,o=this.bottom;if(n<=r||o<=i)return!1;var a=_r[0].set(e.left,e.top),s=_r[1].set(e.left,e.bottom),u=_r[2].set(e.right,e.top),l=_r[3].set(e.right,e.bottom);if(u.x<=a.x||s.y<=a.y)return!1;var h=Math.sign(t.a*t.d-t.b*t.c);if(0===h||(t.apply(a,a),t.apply(s,s),t.apply(u,u),t.apply(l,l),Math.max(a.x,s.x,u.x,l.x)<=r||Math.min(a.x,s.x,u.x,l.x)>=n||Math.max(a.y,s.y,u.y,l.y)<=i||Math.min(a.y,s.y,u.y,l.y)>=o))return!1;var c=h*(s.y-a.y),d=h*(a.x-s.x),f=c*r+d*i,p=c*n+d*i,y=c*r+d*o,g=c*n+d*o;if(Math.max(f,p,y,g)<=c*a.x+d*a.y||Math.min(f,p,y,g)>=c*l.x+d*l.y)return!1;var m=h*(a.y-u.y),w=h*(u.x-a.x),b=m*r+w*i,v=m*n+w*i,x=m*r+w*o,_=m*n+w*o;return!(Math.max(b,v,x,_)<=m*a.x+w*a.y||Math.min(b,v,x,_)>=m*l.x+w*l.y);}},{key:"pad",value:function pad(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e;return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this;}},{key:"fit",value:function fit(e){var t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(i-n,0),this;}},{key:"ceil",value:function ceil(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:.001;var r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this;}},{key:"enlarge",value:function enlarge(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=i-n,this;}}],[{key:"EMPTY",get:function get(){return new Ir(0,0,0,0);}}]);return Ir;}();Ir.prototype.toString=function(){return"[@pixi/math:Rectangle x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]");};var Ar=/*#__PURE__*/function(){function Ar(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,Ar);this.x=e,this.y=t,this.radius=r,this.type=vr.CIRC;}_createClass(Ar,[{key:"clone",value:function clone(){return new Ar(this.x,this.y,this.radius);}},{key:"contains",value:function contains(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius;var n=this.x-e,i=this.y-t;return n*=n,i*=i,n+i<=r;}},{key:"getBounds",value:function getBounds(){return new Ir(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius);}}]);return Ar;}();Ar.prototype.toString=function(){return"[@pixi/math:Circle x=".concat(this.x," y=").concat(this.y," radius=").concat(this.radius,"]");};var Sr=/*#__PURE__*/function(){function Sr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,Sr);this.x=e,this.y=t,this.width=r,this.height=n,this.type=vr.ELIP;}_createClass(Sr,[{key:"clone",value:function clone(){return new Sr(this.x,this.y,this.width,this.height);}},{key:"contains",value:function contains(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,r+n<=1;}},{key:"getBounds",value:function getBounds(){return new Ir(this.x-this.width,this.y-this.height,this.width,this.height);}}]);return Sr;}();Sr.prototype.toString=function(){return"[@pixi/math:Ellipse x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]");};var Tr=/*#__PURE__*/function(){function Tr(){_classCallCheck(this,Tr);for(var _len5=arguments.length,e=new Array(_len5),_key5=0;_key5<_len5;_key5++){e[_key5]=arguments[_key5];}var t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){var _e268=[];for(var _r155=0,_n50=t.length;_r155<_n50;_r155++)_e268.push(t[_r155].x,t[_r155].y);t=_e268;}this.points=t,this.type=vr.POLY,this.closeStroke=!0;}_createClass(Tr,[{key:"clone",value:function clone(){var e=this.points.slice(),t=new Tr(e);return t.closeStroke=this.closeStroke,t;}},{key:"contains",value:function contains(e,t){var r=!1;var n=this.points.length/2;for(var _i46=0,_o27=n-1;_i46<n;_o27=_i46++){var _n51=this.points[2*_i46],_a30=this.points[2*_i46+1],_s14=this.points[2*_o27],_u12=this.points[2*_o27+1];_a30>t!=_u12>t&&e<(t-_a30)/(_u12-_a30)*(_s14-_n51)+_n51&&(r=!r);}return r;}}]);return Tr;}();Tr.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke=".concat(this.closeStroke,"points=").concat(this.points.reduce(function(e,t){return"".concat(e,", ").concat(t);},""),"]");};var Cr=/*#__PURE__*/function(){function Cr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:20;_classCallCheck(this,Cr);this.x=e,this.y=t,this.width=r,this.height=n,this.radius=i,this.type=vr.RREC;}_createClass(Cr,[{key:"clone",value:function clone(){return new Cr(this.x,this.y,this.width,this.height,this.radius);}},{key:"contains",value:function contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var _r156=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+_r156&&t<=this.y+this.height-_r156||e>=this.x+_r156&&e<=this.x+this.width-_r156)return!0;var _n52=e-(this.x+_r156),_i47=t-(this.y+_r156);var _o28=_r156*_r156;if(_n52*_n52+_i47*_i47<=_o28||(_n52=e-(this.x+this.width-_r156),_n52*_n52+_i47*_i47<=_o28)||(_i47=t-(this.y+this.height-_r156),_n52*_n52+_i47*_i47<=_o28)||(_n52=e-(this.x+_r156),_n52*_n52+_i47*_i47<=_o28))return!0;}return!1;}}]);return Cr;}();Cr.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x=".concat(this.x," y=").concat(this.y,"width=").concat(this.width," height=").concat(this.height," radius=").concat(this.radius,"]");};var Er=/*#__PURE__*/function(){function Er(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;_classCallCheck(this,Er);this.array=null,this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o;}_createClass(Er,[{key:"fromArray",value:function fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5];}},{key:"set",value:function set(e,t,r,n,i,o){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o,this;}},{key:"toArray",value:function toArray(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r;}},{key:"apply",value:function apply(e,t){t=t||new xr();var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t;}},{key:"applyInverse",value:function applyInverse(e,t){t=t||new xr();var r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t;}},{key:"translate",value:function translate(e,t){return this.tx+=e,this.ty+=t,this;}},{key:"scale",value:function scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this;}},{key:"rotate",value:function rotate(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,o=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this;}},{key:"append",value:function append(e){var t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this;}},{key:"setTransform",value:function setTransform(e,t,r,n,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this;}},{key:"prepend",value:function prepend(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var _t133=this.a,_r157=this.c;this.a=_t133*e.a+this.b*e.c,this.b=_t133*e.b+this.b*e.d,this.c=_r157*e.a+this.d*e.c,this.d=_r157*e.b+this.d*e.d;}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this;}},{key:"decompose",value:function decompose(e){var t=this.a,r=this.b,n=this.c,i=this.d,o=e.pivot,a=-Math.atan2(-n,i),s=Math.atan2(r,t),u=Math.abs(a+s);return u<1e-5||Math.abs(mr-u)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=s),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx+(o.x*t+o.y*n),e.position.y=this.ty+(o.x*r+o.y*i),e;}},{key:"invert",value:function invert(){var e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,o=e*n-t*r;return this.a=n/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(e*this.ty-t*i)/o,this;}},{key:"identity",value:function identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this;}},{key:"clone",value:function clone(){var e=new Er();return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e;}},{key:"copyTo",value:function copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e;}},{key:"copyFrom",value:function copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this;}}],[{key:"IDENTITY",get:function get(){return new Er();}},{key:"TEMP_MATRIX",get:function get(){return new Er();}}]);return Er;}();Er.prototype.toString=function(){return"[@pixi/math:Matrix a=".concat(this.a," b=").concat(this.b," c=").concat(this.c," d=").concat(this.d," tx=").concat(this.tx," ty=").concat(this.ty,"]");};var Or=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],kr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Pr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$r=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Rr=[],Br=[],Dr=Math.sign;!function(){for(var _e269=0;_e269<16;_e269++){var _t134=[];Rr.push(_t134);for(var _r158=0;_r158<16;_r158++){var _n53=Dr(Or[_e269]*Or[_r158]+Pr[_e269]*kr[_r158]),_i48=Dr(kr[_e269]*Or[_r158]+$r[_e269]*kr[_r158]),_o29=Dr(Or[_e269]*Pr[_r158]+Pr[_e269]*$r[_r158]),_a31=Dr(kr[_e269]*Pr[_r158]+$r[_e269]*$r[_r158]);for(var _e270=0;_e270<16;_e270++)if(Or[_e270]===_n53&&kr[_e270]===_i48&&Pr[_e270]===_o29&&$r[_e270]===_a31){_t134.push(_e270);break;}}}for(var _e271=0;_e271<16;_e271++){var _t135=new Er();_t135.set(Or[_e271],kr[_e271],Pr[_e271],$r[_e271],0,0),Br.push(_t135);}}();var Mr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function uX(e){return Or[e];},uY:function uY(e){return kr[e];},vX:function vX(e){return Pr[e];},vY:function vY(e){return $r[e];},inv:function inv(e){return 8&e?15&e:7&-e;},add:function add(e,t){return Rr[e][t];},sub:function sub(e,t){return Rr[e][Mr.inv(t)];},rotate180:function rotate180(e){return 4^e;},isVertical:function isVertical(e){return 2==(3&e);},byDirection:function byDirection(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?Mr.S:Mr.N:2*Math.abs(t)<=Math.abs(e)?e>0?Mr.E:Mr.W:t>0?e>0?Mr.SE:Mr.SW:e>0?Mr.NE:Mr.NW;},matrixAppendRotationInv:function matrixAppendRotationInv(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var i=Br[Mr.inv(t)];i.tx=r,i.ty=n,e.append(i);}};var Lr=/*#__PURE__*/function(){function Lr(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,Lr);this._x=r,this._y=n,this.cb=e,this.scope=t;}_createClass(Lr,[{key:"clone",value:function clone(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.cb;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.scope;return new Lr(e,t,this._x,this._y);}},{key:"set",value:function set(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e;return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this;}},{key:"copyFrom",value:function copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this;}},{key:"copyTo",value:function copyTo(e){return e.set(this._x,this._y),e;}},{key:"equals",value:function equals(e){return e.x===this._x&&e.y===this._y;}},{key:"x",get:function get(){return this._x;},set:function set(e){this._x!==e&&(this._x=e,this.cb.call(this.scope));}},{key:"y",get:function get(){return this._y;},set:function set(e){this._y!==e&&(this._y=e,this.cb.call(this.scope));}}]);return Lr;}();Lr.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=".concat(this.x," y=").concat(this.y," scope=").concat(this.scope,"]");};var Fr=/*#__PURE__*/function(){function Fr(){_classCallCheck(this,Fr);this.worldTransform=new Er(),this.localTransform=new Er(),this.position=new Lr(this.onChange,this,0,0),this.scale=new Lr(this.onChange,this,1,1),this.pivot=new Lr(this.onChange,this,0,0),this.skew=new Lr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0;}_createClass(Fr,[{key:"onChange",value:function onChange(){this._localID++;}},{key:"updateSkew",value:function updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++;}},{key:"updateLocalTransform",value:function updateLocalTransform(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1);}},{key:"updateTransform",value:function updateTransform(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var _r159=e.worldTransform,_n54=this.worldTransform;_n54.a=t.a*_r159.a+t.b*_r159.c,_n54.b=t.a*_r159.b+t.b*_r159.d,_n54.c=t.c*_r159.a+t.d*_r159.c,_n54.d=t.c*_r159.b+t.d*_r159.d,_n54.tx=t.tx*_r159.a+t.ty*_r159.c+_r159.tx,_n54.ty=t.tx*_r159.b+t.ty*_r159.d+_r159.ty,this._parentID=e._worldID,this._worldID++;}}},{key:"setFromMatrix",value:function setFromMatrix(e){e.decompose(this),this._localID++;}},{key:"rotation",get:function get(){return this._rotation;},set:function set(e){this._rotation!==e&&(this._rotation=e,this.updateSkew());}}]);return Fr;}();Fr.IDENTITY=new Fr();var Nr=Fr;Nr.prototype.toString=function(){return"[@pixi/math:Transform position=(".concat(this.position.x,", ").concat(this.position.y,") rotation=").concat(this.rotation," scale=(").concat(this.scale.x,", ").concat(this.scale.y,") skew=(").concat(this.skew.x,", ").concat(this.skew.y,") ]");};var Ur=[{test:function test(e){return"float"===e.type&&1===e.size&&!e.isArray;},code:function code(e){return"\n            if(uv[\"".concat(e,"\"] !== ud[\"").concat(e,"\"].value)\n            {\n                ud[\"").concat(e,"\"].value = uv[\"").concat(e,"\"]\n                gl.uniform1f(ud[\"").concat(e,"\"].location, uv[\"").concat(e,"\"])\n            }\n            ");}},{test:function test(e,t){return!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=t&&void 0===t.castToBaseTexture);},code:function code(e){return"t = syncData.textureCount++;\n\n            renderer.texture.bind(uv[\"".concat(e,"\"], t);\n\n            if(ud[\"").concat(e,"\"].value !== t)\n            {\n                ud[\"").concat(e,"\"].value = t;\n                gl.uniform1i(ud[\"").concat(e,"\"].location, t);\n; // eslint-disable-line max-len\n            }");}},{test:function test(e,t){return"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a;},code:function code(e){return"\n            gl.uniformMatrix3fv(ud[\"".concat(e,"\"].location, false, uv[\"").concat(e,"\"].toArray(true));\n            ");},codeUbo:function codeUbo(e){return"\n                var ".concat(e,"_matrix = uv.").concat(e,".toArray(true);\n\n                data[offset] = ").concat(e,"_matrix[0];\n                data[offset+1] = ").concat(e,"_matrix[1];\n                data[offset+2] = ").concat(e,"_matrix[2];\n        \n                data[offset + 4] = ").concat(e,"_matrix[3];\n                data[offset + 5] = ").concat(e,"_matrix[4];\n                data[offset + 6] = ").concat(e,"_matrix[5];\n        \n                data[offset + 8] = ").concat(e,"_matrix[6];\n                data[offset + 9] = ").concat(e,"_matrix[7];\n                data[offset + 10] = ").concat(e,"_matrix[8];\n            ");}},{test:function test(e,t){return"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x;},code:function code(e){return"\n                cv = ud[\"".concat(e,"\"].value;\n                v = uv[\"").concat(e,"\"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud[\"").concat(e,"\"].location, v.x, v.y);\n                }");},codeUbo:function codeUbo(e){return"\n                v = uv.".concat(e,";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            ");}},{test:function test(e){return"vec2"===e.type&&1===e.size&&!e.isArray;},code:function code(e){return"\n                cv = ud[\"".concat(e,"\"].value;\n                v = uv[\"").concat(e,"\"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud[\"").concat(e,"\"].location, v[0], v[1]);\n                }\n            ");}},{test:function test(e,t){return"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width;},code:function code(e){return"\n                cv = ud[\"".concat(e,"\"].value;\n                v = uv[\"").concat(e,"\"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud[\"").concat(e,"\"].location, v.x, v.y, v.width, v.height)\n                }");},codeUbo:function codeUbo(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                ");}},{test:function test(e,t){return"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red;},code:function code(e){return"\n                cv = ud[\"".concat(e,"\"].value;\n                v = uv[\"").concat(e,"\"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud[\"").concat(e,"\"].location, v.red, v.green, v.blue, v.alpha)\n                }");},codeUbo:function codeUbo(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                ");}},{test:function test(e,t){return"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red;},code:function code(e){return"\n                cv = ud[\"".concat(e,"\"].value;\n                v = uv[\"").concat(e,"\"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud[\"").concat(e,"\"].location, v.red, v.green, v.blue)\n                }");},codeUbo:function codeUbo(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                ");}},{test:function test(e){return"vec4"===e.type&&1===e.size&&!e.isArray;},code:function code(e){return"\n                cv = ud[\"".concat(e,"\"].value;\n                v = uv[\"").concat(e,"\"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud[\"").concat(e,"\"].location, v[0], v[1], v[2], v[3])\n                }");}}],jr={"float":"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }","int":"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Gr={"float":"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)","int":"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var zr={};var Vr,Hr=zr;function Wr(){var _Hr;if(Hr===zr||(_Hr=Hr)!==null&&_Hr!==void 0&&_Hr.isContextLost()){var _e272=J.ADAPTER.createCanvas();var _t136;J.PREFER_ENV>=P.WEBGL2&&(_t136=_e272.getContext("webgl2",{})),_t136||(_t136=_e272.getContext("webgl",{})||_e272.getContext("experimental-webgl",{}),_t136?_t136.getExtension("WEBGL_draw_buffers"):_t136=null),Hr=_t136;}return Hr;}var Yr={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Kr(e){return Yr[e];}var Xr=null;var Zr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function qr(e,t){if(!Xr){var _t137=Object.keys(Zr);Xr={};for(var _r160=0;_r160<_t137.length;++_r160){var _n55=_t137[_r160];Xr[e[_n55]]=Zr[_n55];}}return Xr[t];}function Jr(e,t,r){if("precision"!==e.substring(0,9)){var _n56=t;return t===W.HIGH&&r!==W.HIGH&&(_n56=W.MEDIUM),"precision ".concat(_n56," float;\n").concat(e);}return r!==W.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e;}var Qr=0;var en={},tn=/*#__PURE__*/function(){function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"pixi-shader";var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};_classCallCheck(this,e);this.extra={},this.id=Qr++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),en[n]?(en[n]++,n+="-".concat(en[n])):en[n]=1,this.vertexSrc="#define SHADER_NAME ".concat(n,"\n").concat(this.vertexSrc),this.fragmentSrc="#define SHADER_NAME ".concat(n,"\n").concat(this.fragmentSrc),this.vertexSrc=Jr(this.vertexSrc,e.defaultVertexPrecision,W.HIGH),this.fragmentSrc=Jr(this.fragmentSrc,e.defaultFragmentPrecision,function(){if(!Vr){Vr=W.MEDIUM;var _e273=Wr();if(_e273&&_e273.getShaderPrecisionFormat){var _t138=_e273.getShaderPrecisionFormat(_e273.FRAGMENT_SHADER,_e273.HIGH_FLOAT);_t138&&(Vr=_t138.precision?W.HIGH:W.MEDIUM);}}return Vr;}())),this.glPrograms={},this.syncUniforms=null;}_createClass(e,null,[{key:"defaultVertexSrc",get:function get(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";}},{key:"defaultFragmentSrc",get:function get(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}";}},{key:"from",value:function from(t,r,n){var i=t+r;var o=Pt[i];return o||(Pt[i]=o=new e(t,r,n)),o;}}]);return e;}();tn.defaultVertexPrecision=W.HIGH,tn.defaultFragmentPrecision=ge.apple.device?W.HIGH:W.MEDIUM;var rn=tn,nn=0;var on=/*#__PURE__*/function(){function on(e,t,r){_classCallCheck(this,on);this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=nn++,this["static"]=!!t,this.ubo=!!r,e instanceof lr?(this.buffer=e,this.buffer.type=Z.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new lr(new Float32Array(1)),this.buffer.type=Z.UNIFORM_BUFFER,this.autoManage=!0));}_createClass(on,[{key:"update",value:function update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update();}},{key:"add",value:function add(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new on(t,r);}}],[{key:"from",value:function from(e,t,r){return new on(e,t,r);}},{key:"uboFrom",value:function uboFrom(e,t){return new on(e,t!==null&&t!==void 0?t:!0,!0);}}]);return on;}();var an=/*#__PURE__*/function(){function an(e,t){_classCallCheck(this,an);this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof on?t:new on(t):new on({}),this.disposeRunner=new tr("disposeShader");}_createClass(an,[{key:"checkUniformExists",value:function checkUniformExists(e,t){if(t.uniforms[e])return!0;for(var _r161 in t.uniforms){var _n57=t.uniforms[_r161];if(!0===_n57.group&&this.checkUniformExists(e,_n57))return!0;}return!1;}},{key:"destroy",value:function destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy();}},{key:"uniforms",get:function get(){return this.uniformGroup.uniforms;}}],[{key:"from",value:function from(e,t,r){var n=rn.from(e,t);return new an(n,r);}}]);return an;}();var sn=/*#__PURE__*/function(){function sn(e,t){_classCallCheck(this,sn);if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".');}_createClass(sn,[{key:"generateShader",value:function generateShader(e){if(!this.programCache[e]){var _t139=new Int32Array(e);for(var _r162=0;_r162<e;_r162++)_t139[_r162]=_r162;this.defaultGroupCache[e]=on.from({uSamplers:_t139},!0);var _r163=this.fragTemplate;_r163=_r163.replace(/%count%/gi,"".concat(e)),_r163=_r163.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new rn(this.vertexSrc,_r163);}var t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Er(),"default":this.defaultGroupCache[e]};return new an(this.programCache[e],t);}},{key:"generateSampleSrc",value:function generateSampleSrc(e){var t="";t+="\n",t+="\n";for(var _r164=0;_r164<e;_r164++)_r164>0&&(t+="\nelse "),_r164<e-1&&(t+="if(vTextureId < ".concat(_r164,".5)")),t+="\n{",t+="\n\tcolor = texture2D(uSamplers[".concat(_r164,"], vTextureCoord);"),t+="\n}";return t+="\n",t+="\n",t;}}]);return sn;}();var un=/*#__PURE__*/function(){function un(){_classCallCheck(this,un);this.elements=[],this.ids=[],this.count=0;}_createClass(un,[{key:"clear",value:function clear(){for(var _e274=0;_e274<this.count;_e274++)this.elements[_e274]=null;this.count=0;}}]);return un;}();var ln=/*#__PURE__*/function(){function ln(e){_classCallCheck(this,ln);this.renderer=e;}_createClass(ln,[{key:"flush",value:function flush(){}},{key:"destroy",value:function destroy(){this.renderer=null;}},{key:"start",value:function start(){}},{key:"stop",value:function stop(){this.flush();}},{key:"render",value:function render(e){}}]);return ln;}();var hn=/*#__PURE__*/function(_ln){_inherits(e,_ln);function e(t){var _this39;_classCallCheck(this,e);_this39=_callSuper(this,e,[t]),_this39.setShaderGenerator(),_this39.geometryClass=gr,_this39.vertexSize=6,_this39.state=Jt.for2d(),_this39.size=4*e.defaultBatchSize,_this39._vertexCount=0,_this39._indexCount=0,_this39._bufferedElements=[],_this39._bufferedTextures=[],_this39._bufferSize=0,_this39._shader=null,_this39._packedGeometries=[],_this39._packedGeometryPoolSize=2,_this39._flushId=0,_this39._aBuffers={},_this39._iBuffers={},_this39.maxTextures=1,_this39.renderer.on("prerender",_this39.onPrerender,_assertThisInitialized(_this39)),t.runners.contextChange.add(_assertThisInitialized(_this39)),_this39._dcIndex=0,_this39._aIndex=0,_this39._iIndex=0,_this39._attributeBuffer=null,_this39._indexBuffer=null,_this39._tempBoundTextures=[];return _this39;}_createClass(e,[{key:"MAX_TEXTURES",get:function get(){return xe("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures;}},{key:"setShaderGenerator",value:function setShaderGenerator(){var _ref34=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref34$vertex=_ref34.vertex,t=_ref34$vertex===void 0?e.defaultVertexSrc:_ref34$vertex,_ref34$fragment=_ref34.fragment,r=_ref34$fragment===void 0?e.defaultFragmentTemplate:_ref34$fragment;this.shaderGenerator=new sn(t,r);}},{key:"contextChange",value:function contextChange(){var t=this.renderer.gl;J.PREFER_ENV===P.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),e.defaultMaxTextures),this.maxTextures=qt(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(var _e291=0;_e291<this._packedGeometryPoolSize;_e291++)this._packedGeometries[_e291]=new this.geometryClass();this.initFlushBuffers();}},{key:"initFlushBuffers",value:function initFlushBuffers(){var t=e._drawCallPool,r=e._textureArrayPool,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new sr());for(;r.length<i;)r.push(new un());for(var _e292=0;_e292<this.maxTextures;_e292++)this._tempBoundTextures[_e292]=null;}},{key:"onPrerender",value:function onPrerender(){this._flushId=0;}},{key:"render",value:function render(_e279){_e279._texture.valid&&(this._vertexCount+_e279.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_e279.vertexData.length/2,this._indexCount+=_e279.indices.length,this._bufferedTextures[this._bufferSize]=_e279._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_e279);}},{key:"buildTexturesAndDrawCalls",value:function buildTexturesAndDrawCalls(){var t=this._bufferedTextures,r=this.maxTextures,n=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count;var s=++ar._globalBatch,u=0,l=n[0],h=0;i.copyBoundTextures(o,r);for(var _e293=0;_e293<this._bufferSize;++_e293){var _c4=t[_e293];t[_e293]=null,_c4._batchEnabled!==s&&(l.count>=r&&(i.boundArray(l,o,s,r),this.buildDrawCalls(l,h,_e293),h=_e293,l=n[++u],++s),_c4._batchEnabled=s,_c4.touched=a,l.elements[l.count++]=_c4);}l.count>0&&(i.boundArray(l,o,s,r),this.buildDrawCalls(l,h,this._bufferSize),++u,++s);for(var _e294=0;_e294<o.length;_e294++)o[_e294]=null;ar._globalBatch=s;}},{key:"buildDrawCalls",value:function buildDrawCalls(t,r,n){var i=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,s=this.vertexSize,u=e._drawCallPool;var l=this._dcIndex,h=this._aIndex,c=this._iIndex,d=u[l];d.start=this._iIndex,d.texArray=t;for(var _e295=r;_e295<n;++_e295){var _n58=i[_e295],_f4=_n58._texture.baseTexture,_p3=dt[_f4.alphaMode?1:0][_n58.blendMode];i[_e295]=null,r<_e295&&d.blend!==_p3&&(d.size=c-d.start,r=_e295,d=u[++l],d.texArray=t,d.start=c),this.packInterleavedGeometry(_n58,o,a,h,c),h+=_n58.vertexData.length/2*s,c+=_n58.indices.length,d.blend=_p3;}r<n&&(d.size=c-d.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=c;}},{key:"bindAndClearTexArray",value:function bindAndClearTexArray(_e283){var t=this.renderer.texture;for(var _r165=0;_r165<_e283.count;_r165++)t.bind(_e283.elements[_r165],_e283.ids[_r165]),_e283.elements[_r165]=null;_e283.count=0;}},{key:"updateGeometry",value:function updateGeometry(){var t=this._packedGeometries,r=this._attributeBuffer,n=this._indexBuffer;e.canUploadSameBuffer?(t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass()),t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++);}},{key:"drawBatches",value:function drawBatches(){var t=this._dcIndex,_this$renderer=this.renderer,r=_this$renderer.gl,n=_this$renderer.state,i=e._drawCallPool;var o=null;for(var _e296=0;_e296<t;_e296++){var _i$_e=i[_e296],_t140=_i$_e.texArray,_a32=_i$_e.type,_s15=_i$_e.size,_u13=_i$_e.start,_l10=_i$_e.blend;o!==_t140&&(o=_t140,this.bindAndClearTexArray(_t140)),this.state.blendMode=_l10,n.set(this.state),r.drawElements(_a32,_s15,r.UNSIGNED_SHORT,2*_u13);}}},{key:"flush",value:function flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0);}},{key:"start",value:function start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId]);}},{key:"stop",value:function stop(){this.flush();}},{key:"destroy",value:function destroy(){for(var _e297=0;_e297<this._packedGeometryPoolSize;_e297++)this._packedGeometries[_e297]&&this._packedGeometries[_e297].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),_get(_getPrototypeOf(e.prototype),"destroy",this).call(this);}},{key:"getAttributeBuffer",value:function getAttributeBuffer(_e286){var t=_t(Math.ceil(_e286/8)),r=At(t),n=8*t;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Kt(n*this.vertexSize*4)),i;}},{key:"getIndexBuffer",value:function getIndexBuffer(_e287){var t=_t(Math.ceil(_e287/12)),r=At(t),n=12*t;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i;}},{key:"packInterleavedGeometry",value:function packInterleavedGeometry(_e288,t,r,n,i){var o=t.uint32View,a=t.float32View,s=n/this.vertexSize,u=_e288.uvs,l=_e288.indices,h=_e288.vertexData,c=_e288._texture.baseTexture._batchLocation,d=Math.min(_e288.worldAlpha,1),f=st.shared.setValue(_e288._tintRGB).toPremultiplied(d,_e288._texture.baseTexture.alphaMode>0);for(var _e298=0;_e298<h.length;_e298+=2)a[n++]=h[_e298],a[n++]=h[_e298+1],a[n++]=u[_e298],a[n++]=u[_e298+1],o[n++]=f,a[n++]=c;for(var _e299=0;_e299<l.length;_e299++)r[i++]=s+l[_e299];}}],[{key:"defaultMaxTextures",get:function get(){var _this$_defaultMaxText;return this._defaultMaxTextures=(_this$_defaultMaxText=this._defaultMaxTextures)!==null&&_this$_defaultMaxText!==void 0?_this$_defaultMaxText:function(e){var t=!0;var r=J.ADAPTER.getNavigator();if(ge.tablet||ge.phone){if(ge.apple.device){var _e300=r.userAgent.match(/OS (\d+)_(\d+)?/);_e300&&parseInt(_e300[1],10)<11&&(t=!1);}if(ge.android.device){var _e301=r.userAgent.match(/Android\s([0-9.]*)/);_e301&&parseInt(_e301[1],10)<7&&(t=!1);}}return t?e:4;}(32),this._defaultMaxTextures;},set:function set(_e275){this._defaultMaxTextures=_e275;}},{key:"canUploadSameBuffer",get:function get(){var _this$_canUploadSameB;return this._canUploadSameBuffer=(_this$_canUploadSameB=this._canUploadSameBuffer)!==null&&_this$_canUploadSameB!==void 0?_this$_canUploadSameB:!ge.apple.device,this._canUploadSameBuffer;},set:function set(_e276){this._canUploadSameBuffer=_e276;}},{key:"defaultVertexSrc",get:function get(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n";}},{key:"defaultFragmentTemplate",get:function get(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";}}]);return e;}(ln);hn.defaultBatchSize=4096,hn.extension={name:"batch",type:Vt.RendererPlugin},hn._drawCallPool=[],hn._textureArrayPool=[];var cn=hn;Yt.add(cn);var dn=/*#__PURE__*/function(_an){_inherits(e,_an);function e(t,r,n){var _this40;_classCallCheck(this,e);_this40=_callSuper(this,e,[rn.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc),n]),_this40.padding=0,_this40.resolution=e.defaultResolution,_this40.multisample=e.defaultMultisample,_this40.enabled=!0,_this40.autoFit=!0,_this40.state=new Jt();return _this40;}_createClass(e,[{key:"apply",value:function apply(_e302,t,r,n,i){_e302.applyFilter(this,t,r,n);}},{key:"blendMode",get:function get(){return this.state.blendMode;},set:function set(_e303){this.state.blendMode=_e303;}},{key:"resolution",get:function get(){return this._resolution;},set:function set(_e304){this._resolution=_e304;}}],[{key:"defaultVertexSrc",get:function get(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";}},{key:"defaultFragmentSrc",get:function get(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n";}}]);return e;}(an);dn.defaultResolution=1,dn.defaultMultisample=X.NONE;var fn=dn;var pn=/*#__PURE__*/function(){function pn(){_classCallCheck(this,pn);this.clearBeforeRender=!0,this._backgroundColor=new st(0),this.alpha=1;}_createClass(pn,[{key:"init",value:function init(e){this.clearBeforeRender=e.clearBeforeRender;var t=e.backgroundColor,r=e.background,n=e.backgroundAlpha,i=r!==null&&r!==void 0?r:t;void 0!==i&&(this.color=i),this.alpha=n;}},{key:"color",get:function get(){return this._backgroundColor.value;},set:function set(e){this._backgroundColor.setValue(e);}},{key:"alpha",get:function get(){return this._backgroundColor.alpha;},set:function set(e){this._backgroundColor.setAlpha(e);}},{key:"backgroundColor",get:function get(){return this._backgroundColor;}},{key:"destroy",value:function destroy(){}}]);return pn;}();pn.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},pn.extension={type:[Vt.RendererSystem,Vt.CanvasRendererSystem],name:"background"},Yt.add(pn);var yn=/*#__PURE__*/function(){function yn(e){_classCallCheck(this,yn);this.renderer=e,this.emptyRenderer=new ln(e),this.currentRenderer=this.emptyRenderer;}_createClass(yn,[{key:"setObjectRenderer",value:function setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start());}},{key:"flush",value:function flush(){this.setObjectRenderer(this.emptyRenderer);}},{key:"reset",value:function reset(){this.setObjectRenderer(this.emptyRenderer);}},{key:"copyBoundTextures",value:function copyBoundTextures(e,t){var r=this.renderer.texture.boundTextures;for(var _n59=t-1;_n59>=0;--_n59)e[_n59]=r[_n59]||null,e[_n59]&&(e[_n59]._batchLocation=_n59);}},{key:"boundArray",value:function boundArray(e,t,r,n){var i=e.elements,o=e.ids,a=e.count;var s=0;for(var _e305=0;_e305<a;_e305++){var _a33=i[_e305],_u14=_a33._batchLocation;if(_u14>=0&&_u14<n&&t[_u14]===_a33)o[_e305]=_u14;else for(;s<n;){var _n60=t[s];if(!_n60||_n60._batchEnabled!==r||_n60._batchLocation!==s){o[_e305]=s,_a33._batchLocation=s,t[s]=_a33;break;}s++;}}}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return yn;}();yn.extension={type:Vt.RendererSystem,name:"batch"},Yt.add(yn);var gn=0;var mn=/*#__PURE__*/function(){function mn(e){_classCallCheck(this,mn);this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this);}_createClass(mn,[{key:"isLost",get:function get(){return!this.gl||this.gl.isContextLost();}},{key:"contextChange",value:function contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=gn++;}},{key:"init",value:function init(e){if(e.context)this.initFromContext(e.context);else{var _t141=this.renderer.background.alpha<1,_r166=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:_t141,premultipliedAlpha:_r166,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference});}}},{key:"initFromContext",value:function initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=gn++,this.renderer.runners.contextChange.emit(e);var t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1));}},{key:"initFromOptions",value:function initFromOptions(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t);}},{key:"createContext",value:function createContext(e,t){var r;if(J.PREFER_ENV>=P.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl;}},{key:"getExtensions",value:function getExtensions(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")});}},{key:"handleContextLost",value:function handleContextLost(e){var _this41=this;e.preventDefault(),setTimeout(function(){_this41.gl.isContextLost()&&_this41.extensions.loseContext&&_this41.extensions.loseContext.restoreContext();},0);}},{key:"handleContextRestored",value:function handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl);}},{key:"destroy",value:function destroy(){var e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext();}},{key:"postrender",value:function postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush();}},{key:"validateContext",value:function validateContext(e){var t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly");}}]);return mn;}();mn.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},mn.extension={type:Vt.RendererSystem,name:"context"},Yt.add(mn);var wn=/*#__PURE__*/function(){function wn(e,t){_classCallCheck(this,wn);if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new tr("disposeFramebuffer"),this.multisample=X.NONE;}_createClass(wn,[{key:"colorTexture",get:function get(){return this.colorTextures[0];}},{key:"addColorTexture",value:function addColorTexture(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1?arguments[1]:undefined;return this.colorTextures[e]=t||new ar(null,{scaleMode:U.NEAREST,resolution:1,mipmap:G.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this;}},{key:"addDepthTexture",value:function addDepthTexture(e){return this.depthTexture=e||new ar(null,{scaleMode:U.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:G.OFF,format:M.DEPTH_COMPONENT,type:F.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this;}},{key:"enableDepth",value:function enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this;}},{key:"enableStencil",value:function enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this;}},{key:"resize",value:function resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var _r167=0;_r167<this.colorTextures.length;_r167++){var _n61=this.colorTextures[_r167],_i49=_n61.resolution;_n61.setSize(e/_i49,t/_i49);}if(this.depthTexture){var _r168=this.depthTexture.resolution;this.depthTexture.setSize(e/_r168,t/_r168);}}}},{key:"dispose",value:function dispose(){this.disposeRunner.emit(this,!1);}},{key:"destroyDepthTexture",value:function destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat);}}]);return wn;}();var bn=/*#__PURE__*/function(_ar){_inherits(bn,_ar);function bn(){var _e$width,_e$height,_e$multisample;var _this42;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,bn);if("number"==typeof e){e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]};}e.width=(_e$width=e.width)!==null&&_e$width!==void 0?_e$width:100,e.height=(_e$height=e.height)!==null&&_e$height!==void 0?_e$height:100,(_e$multisample=e.multisample)!==null&&_e$multisample!==void 0?_e$multisample:e.multisample=X.NONE,_this42=_callSuper(this,bn,[null,e]),_this42.mipmap=G.OFF,_this42.valid=!0,_this42._clear=new st([0,0,0,0]),_this42.framebuffer=new wn(_this42.realWidth,_this42.realHeight).addColorTexture(0,_assertThisInitialized(_this42)),_this42.framebuffer.multisample=e.multisample,_this42.maskStack=[],_this42.filterStack=[{}];return _this42;}_createClass(bn,[{key:"clearColor",get:function get(){return this._clear.value;},set:function set(e){this._clear.setValue(e);}},{key:"clear",get:function get(){return this._clear;}},{key:"multisample",get:function get(){return this.framebuffer.multisample;},set:function set(e){this.framebuffer.multisample=e;}},{key:"resize",value:function resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height);}},{key:"dispose",value:function dispose(){this.framebuffer.dispose(),_get(_getPrototypeOf(bn.prototype),"dispose",this).call(this);}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(bn.prototype),"destroy",this).call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null;}}]);return bn;}(ar);var vn=/*#__PURE__*/function(_rr2){_inherits(vn,_rr2);function vn(e){var _this43;_classCallCheck(this,vn);var t=e;_this43=_callSuper(this,vn,[t.naturalWidth||t.videoWidth||t.displayWidth||t.width,t.naturalHeight||t.videoHeight||t.displayHeight||t.height]),_this43.source=e,_this43.noSubImage=!1;return _this43;}_createClass(vn,[{key:"upload",value:function upload(e,t,r,n){var i=e.gl,o=t.realWidth,a=t.realHeight;if(n=n||this.source,(typeof HTMLImageElement==="undefined"?"undefined":_typeof(HTMLImageElement))<"u"&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1;}else if((typeof HTMLVideoElement==="undefined"?"undefined":_typeof(HTMLVideoElement))<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===z.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||r.width!==o||r.height!==a?(r.width=o,r.height=a,i.texImage2D(t.target,0,r.internalFormat,t.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,r.type,n),!0;}},{key:"update",value:function update(){if(this.destroyed)return;var e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),_get(_getPrototypeOf(vn.prototype),"update",this).call(this);}},{key:"dispose",value:function dispose(){this.source=null;}}],[{key:"crossOrigin",value:function crossOrigin(e,t,r){void 0!==r||t.startsWith("data:")?!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous"):e.crossOrigin=Gt(t);}}]);return vn;}(rr);var xn=/*#__PURE__*/function(_vn2){_inherits(xn,_vn2);function xn(e,t){var _t$createBitmap;var _this44;_classCallCheck(this,xn);if(t=t||{},"string"==typeof e){var _r169=new Image();vn.crossOrigin(_r169,e,t.crossorigin),_r169.src=e,e=_r169;}_this44=_callSuper(this,xn,[e]),!e.complete&&_this44._width&&_this44._height&&(_this44._width=0,_this44._height=0),_this44.url=e.src,_this44._process=null,_this44.preserveBitmap=!1,_this44.createBitmap=((_t$createBitmap=t.createBitmap)!==null&&_t$createBitmap!==void 0?_t$createBitmap:J.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,_this44.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,_this44.bitmap=null,_this44._load=null,!1!==t.autoLoad&&_this44.load();return _this44;}_createClass(xn,[{key:"load",value:function load(e){var _this45=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(function(e,t){var r=_this45.source;_this45.url=r.src;var n=function n(){_this45.destroyed||(r.onload=null,r.onerror=null,_this45.update(),_this45._load=null,_this45.createBitmap?e(_this45.process()):e(_this45));};r.complete&&r.src?n():(r.onload=n,r.onerror=function(e){t(e),_this45.onError.emit(e);});})),this._load;}},{key:"process",value:function process(){var _this46=this;var e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var t=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(function(e){return e.blob();}).then(function(r){return t(r,0,0,e.width,e.height,{premultiplyAlpha:null===_this46.alphaMode||_this46.alphaMode===z.UNPACK?"premultiply":"none"});}).then(function(e){return _this46.destroyed?Promise.reject():(_this46.bitmap=e,_this46.update(),_this46._process=null,Promise.resolve(_this46));}),this._process;}},{key:"upload",value:function upload(e,t,r){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return _get(_getPrototypeOf(xn.prototype),"upload",this).call(this,e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(_get(_getPrototypeOf(xn.prototype),"upload",this).call(this,e,t,r,this.bitmap),!this.preserveBitmap){var _e306=!0;var _n62=t._glTextures;for(var _i50 in _n62){var _o30=_n62[_i50];if(_o30!==r&&_o30.dirtyId!==t.dirtyId){_e306=!1;break;}}_e306&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null);}return!0;}},{key:"dispose",value:function dispose(){this.source.onload=null,this.source.onerror=null,_get(_getPrototypeOf(xn.prototype),"dispose",this).call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null;}}],[{key:"test",value:function test(e){return(typeof HTMLImageElement==="undefined"?"undefined":_typeof(HTMLImageElement))<"u"&&("string"==typeof e||e instanceof HTMLImageElement);}}]);return xn;}(vn);var _n=/*#__PURE__*/function(){function _n(){_classCallCheck(this,_n);this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8);}_createClass(_n,[{key:"set",value:function set(e,t,r){var n=t.width,i=t.height;if(r){var _t142=e.width/2/n,_o31=e.height/2/i,_a34=e.x/n+_t142,_s16=e.y/i+_o31;r=Mr.add(r,Mr.NW),this.x0=_a34+_t142*Mr.uX(r),this.y0=_s16+_o31*Mr.uY(r),r=Mr.add(r,2),this.x1=_a34+_t142*Mr.uX(r),this.y1=_s16+_o31*Mr.uY(r),r=Mr.add(r,2),this.x2=_a34+_t142*Mr.uX(r),this.y2=_s16+_o31*Mr.uY(r),r=Mr.add(r,2),this.x3=_a34+_t142*Mr.uX(r),this.y3=_s16+_o31*Mr.uY(r);}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3;}}]);return _n;}();_n.prototype.toString=function(){return"[@pixi/core:TextureUvs x0=".concat(this.x0," y0=").concat(this.y0," x1=").concat(this.x1," y1=").concat(this.y1," x2=").concat(this.x2," y2=").concat(this.y2," x3=").concat(this.x3," y3=").concat(this.y3,"]");};var In=new _n();function An(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){};}var Sn=/*#__PURE__*/function(_me3){_inherits(Sn,_me3);function Sn(e,t,r,n,i,o,a){var _this47;_classCallCheck(this,Sn);if(_this47=_callSuper(this,Sn),_this47.noFrame=!1,t||(_this47.noFrame=!0,t=new Ir(0,0,1,1)),e instanceof Sn&&(e=e.baseTexture),_this47.baseTexture=e,_this47._frame=t,_this47.trim=n,_this47.valid=!1,_this47.destroyed=!1,_this47._uvs=In,_this47.uvMatrix=null,_this47.orig=r||t,_this47._rotate=Number(i||0),!0===i)_this47._rotate=2;else if(_this47._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");_this47.defaultAnchor=o?new xr(o.x,o.y):new xr(0,0),_this47.defaultBorders=a,_this47._updateID=0,_this47.textureCacheIds=[],e.valid?_this47.noFrame?e.valid&&_this47.onBaseTextureUpdated(e):_this47.frame=t:e.once("loaded",_this47.onBaseTextureUpdated,_assertThisInitialized(_this47)),_this47.noFrame&&e.on("update",_this47.onBaseTextureUpdated,_assertThisInitialized(_this47));return _possibleConstructorReturn(_this47);}_createClass(Sn,[{key:"update",value:function update(){this.baseTexture.resource&&this.baseTexture.resource.update();}},{key:"onBaseTextureUpdated",value:function onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs();}else this.frame=this._frame;this.emit("update",this);}},{key:"destroy",value:function destroy(e){if(this.baseTexture){if(e){var _e307=this.baseTexture.resource;_e307!==null&&_e307!==void 0&&_e307.url&&$t[_e307.url]&&Sn.removeFromCache(_e307.url),this.baseTexture.destroy();}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null;}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Sn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners();}},{key:"clone",value:function clone(){var _this$trim;var e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new Sn(this.baseTexture,!this.noFrame&&e,t,(_this$trim=this.trim)===null||_this$trim===void 0?void 0:_this$trim.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r;}},{key:"updateUvs",value:function updateUvs(){this._uvs===In&&(this._uvs=new _n()),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++;}},{key:"resolution",get:function get(){return this.baseTexture.resolution;}},{key:"frame",get:function get(){return this._frame;},set:function set(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,n=e.width,i=e.height,o=t+n>this.baseTexture.width,a=r+i>this.baseTexture.height;if(o||a){var _e308=o&&a?"and":"or",_s17="X: ".concat(t," + ").concat(n," = ").concat(t+n," > ").concat(this.baseTexture.width),_u15="Y: ".concat(r," + ").concat(i," = ").concat(r+i," > ").concat(this.baseTexture.height);throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: ".concat(_s17," ").concat(_e308," ").concat(_u15));}this.valid=n&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs();}},{key:"rotate",get:function get(){return this._rotate;},set:function set(e){this._rotate=e,this.valid&&this.updateUvs();}},{key:"width",get:function get(){return this.orig.width;}},{key:"height",get:function get(){return this.orig.height;}},{key:"castToBaseTexture",value:function castToBaseTexture(){return this.baseTexture;}}],[{key:"from",value:function from(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:J.STRICT_TEXTURE_CACHE;var n="string"==typeof e;var i=null;if(n)i=e;else if(e instanceof ar){if(!e.cacheId){var _r170=(t===null||t===void 0?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId="".concat(_r170,"-").concat(Et()),ar.addToCache(e,e.cacheId);}i=e.cacheId;}else{if(!e._pixiId){var _r171=(t===null||t===void 0?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId="".concat(_r171,"_").concat(Et());}i=e._pixiId;}var o=$t[i];if(n&&r&&!o)throw new Error("The cacheId \"".concat(i,"\" does not exist in TextureCache."));return o||e instanceof ar?!o&&e instanceof ar&&(o=new Sn(e),Sn.addToCache(o,i)):(t.resolution||(t.resolution=zt(e)),o=new Sn(new ar(e,t)),o.baseTexture.cacheId=i,ar.addToCache(o.baseTexture,i),Sn.addToCache(o,i)),o;}},{key:"fromURL",value:function fromURL(e,t){var r=Object.assign({autoLoad:!1},t===null||t===void 0?void 0:t.resourceOptions),n=Sn.from(e,Object.assign({resourceOptions:r},t),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then(function(){return Promise.resolve(n);});}},{key:"fromBuffer",value:function fromBuffer(e,t,r,n){return new Sn(ar.fromBuffer(e,t,r,n));}},{key:"fromLoader",value:function fromLoader(e,t,r,n){var i=new ar(e,Object.assign({scaleMode:ar.defaultOptions.scaleMode,resolution:zt(t)},n)),o=i.resource;o instanceof xn&&(o.url=t);var a=new Sn(i);return r||(r=t),ar.addToCache(a.baseTexture,r),Sn.addToCache(a,r),r!==t&&(ar.addToCache(a.baseTexture,t),Sn.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(function(e){a.baseTexture.once("loaded",function(){return e(a);});});}},{key:"addToCache",value:function addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),$t[t]&&$t[t]!==e&&console.warn("Texture added to the cache with an id [".concat(t,"] that already had an entry")),$t[t]=e);}},{key:"removeFromCache",value:function removeFromCache(e){if("string"==typeof e){var _t143=$t[e];if(_t143){var _r172=_t143.textureCacheIds.indexOf(e);return _r172>-1&&_t143.textureCacheIds.splice(_r172,1),delete $t[e],_t143;}}else if(e!==null&&e!==void 0&&e.textureCacheIds){for(var _t144=0;_t144<e.textureCacheIds.length;++_t144)$t[e.textureCacheIds[_t144]]===e&&delete $t[e.textureCacheIds[_t144]];return e.textureCacheIds.length=0,e;}return null;}},{key:"EMPTY",get:function get(){return Sn._EMPTY||(Sn._EMPTY=new Sn(new ar()),An(Sn._EMPTY),An(Sn._EMPTY.baseTexture)),Sn._EMPTY;}},{key:"WHITE",get:function get(){if(!Sn._WHITE){var _e309=J.ADAPTER.createCanvas(16,16),_t145=_e309.getContext("2d");_e309.width=16,_e309.height=16,_t145.fillStyle="white",_t145.fillRect(0,0,16,16),Sn._WHITE=new Sn(ar.from(_e309)),An(Sn._WHITE),An(Sn._WHITE.baseTexture);}return Sn._WHITE;}}]);return Sn;}(me);var Tn=/*#__PURE__*/function(_Sn){_inherits(Tn,_Sn);function Tn(e,t){var _this48;_classCallCheck(this,Tn);_this48=_callSuper(this,Tn,[e,t]),_this48.valid=!0,_this48.filterFrame=null,_this48.filterPoolKey=null,_this48.updateUvs();return _this48;}_createClass(Tn,[{key:"framebuffer",get:function get(){return this.baseTexture.framebuffer;}},{key:"multisample",get:function get(){return this.framebuffer.multisample;},set:function set(e){this.framebuffer.multisample=e;}},{key:"resize",value:function resize(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!0;var n=this.baseTexture.resolution,i=Math.round(e*n)/n,o=Math.round(t*n)/n;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(i,o),this.updateUvs();}},{key:"setResolution",value:function setResolution(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1));}}],[{key:"create",value:function create(e){return new Tn(new bn(e));}}]);return Tn;}(Sn);var Cn=/*#__PURE__*/function(){function Cn(e){_classCallCheck(this,Cn);this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0;}_createClass(Cn,[{key:"createTexture",value:function createTexture(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:X.NONE;var n=new bn(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new Tn(n);}},{key:"getOptimalTexture",value:function getOptimalTexture(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:X.NONE;var i;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=n>1?-n:-1:(i=((65535&(e=_t(e)))<<16|65535&(t=_t(t)))>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(e,t,n)),o.filterPoolKey=i,o.setResolution(r),o;}},{key:"getFilterTexture",value:function getFilterTexture(e,t,r){var n=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||X.NONE);return n.filterFrame=e.filterFrame,n;}},{key:"returnTexture",value:function returnTexture(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e);}},{key:"returnFilterTexture",value:function returnFilterTexture(e){this.returnTexture(e);}},{key:"clear",value:function clear(e){if(e=!1!==e)for(var _e310 in this.texturePool){var _t146=this.texturePool[_e310];if(_t146)for(var _e311=0;_e311<_t146.length;_e311++)_t146[_e311].destroy(!0);}this.texturePool={};}},{key:"setScreenSize",value:function setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(var _e312 in this.texturePool){if(!(Number(_e312)<0))continue;var _t147=this.texturePool[_e312];if(_t147)for(var _e313=0;_e313<_t147.length;_e313++)_t147[_e313].destroy(!0);this.texturePool[_e312]=[];}this._pixelsWidth=e.width,this._pixelsHeight=e.height;}}}]);return Cn;}();Cn.SCREEN_KEY=-1;var En=/*#__PURE__*/function(_yr2){_inherits(En,_yr2);function En(){var _this49;_classCallCheck(this,En);_this49=_callSuper(this,En),_this49.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]);return _this49;}return _createClass(En);}(yr);var On=/*#__PURE__*/function(_yr3){_inherits(On,_yr3);function On(){var _this50;_classCallCheck(this,On);_this50=_callSuper(this,On),_this50.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),_this50.uvs=new Float32Array([0,0,1,0,1,1,0,1]),_this50.vertexBuffer=new lr(_this50.vertices),_this50.uvBuffer=new lr(_this50.uvs),_this50.addAttribute("aVertexPosition",_this50.vertexBuffer).addAttribute("aTextureCoord",_this50.uvBuffer).addIndex([0,1,2,0,2,3]);return _this50;}_createClass(On,[{key:"map",value:function map(e,t){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this.invalidate(),this;}},{key:"invalidate",value:function invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this;}}]);return On;}(yr);var kn=/*#__PURE__*/function(){function kn(){_classCallCheck(this,kn);this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=X.NONE,this.sourceFrame=new Ir(),this.destinationFrame=new Ir(),this.bindingSourceFrame=new Ir(),this.bindingDestinationFrame=new Ir(),this.filters=[],this.transform=null;}_createClass(kn,[{key:"clear",value:function clear(){this.target=null,this.filters=null,this.renderTexture=null;}}]);return kn;}();var Pn=[new xr(),new xr(),new xr(),new xr()],$n=new Er();var Rn=/*#__PURE__*/function(){function Rn(e){_classCallCheck(this,Rn);this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Cn(),this.statePool=[],this.quad=new En(),this.quadUv=new On(),this.tempRect=new Ir(),this.activeState={},this.globalUniforms=new on({outputFrame:new Ir(),inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1;}_createClass(Rn,[{key:"init",value:function init(){this.texturePool.setScreenSize(this.renderer.view);}},{key:"push",value:function push(e,t){var _t$0$multisample,_t$0$legacy;var r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new kn(),o=r.renderTexture;var a,s;if(o.current){var _e314=o.current;a=_e314.resolution,s=_e314.multisample;}else a=r.resolution,s=r.multisample;var u=t[0].resolution||a,l=(_t$0$multisample=t[0].multisample)!==null&&_t$0$multisample!==void 0?_t$0$multisample:s,h=t[0].padding,c=t[0].autoFit,d=(_t$0$legacy=t[0].legacy)!==null&&_t$0$legacy!==void 0?_t$0$legacy:!0;for(var _e315=1;_e315<t.length;_e315++){var _r173$multisample,_r173$legacy;var _r173=t[_e315];u=Math.min(u,_r173.resolution||a),l=Math.min(l,(_r173$multisample=_r173.multisample)!==null&&_r173$multisample!==void 0?_r173$multisample:s),h=this.useMaxPadding?Math.max(h,_r173.padding):h+_r173.padding,c=c&&_r173.autoFit,d=d||((_r173$legacy=_r173.legacy)!==null&&_r173$legacy!==void 0?_r173$legacy:!0);}1===n.length&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(i),i.resolution=u,i.multisample=l,i.legacy=d,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(h);var f=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB($n.copyFrom(r.projection.transform).invert(),f),c?(i.sourceFrame.fit(f),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(f)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,u,l),i.filters=t,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;var p=this.tempRect;p.x=0,p.y=0,p.width=i.sourceFrame.width,p.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,p),r.framebuffer.clear(0,0,0,0);}},{key:"pop",value:function pop(){var e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;var n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;var i=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*t.resolution),o[1]=Math.round(i[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*i[2]-.5*o[2],a[3]=t.sourceFrame.height*i[3]-.5*o[3],t.legacy){var _e316=n.filterArea;_e316[0]=t.destinationFrame.width,_e316[1]=t.destinationFrame.height,_e316[2]=t.sourceFrame.x,_e316[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp;}this.globalUniforms.update();var s=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,s.renderTexture,V.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var _e317=t.renderTexture,_n63=this.getOptimalFilterTexture(_e317.width,_e317.height,t.resolution);_n63.filterFrame=_e317.filterFrame;var _i51=0;for(_i51=0;_i51<r.length-1;++_i51){1===_i51&&t.multisample>1&&(_n63=this.getOptimalFilterTexture(_e317.width,_e317.height,t.resolution),_n63.filterFrame=_e317.filterFrame),r[_i51].apply(this,_e317,_n63,V.CLEAR,t);var _o32=_e317;_e317=_n63,_n63=_o32;}r[_i51].apply(this,_e317,s.renderTexture,V.BLEND,t),_i51>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(_e317),this.returnFilterTexture(_n63);}t.clear(),this.statePool.push(t);}},{key:"bindAndClear",value:function bindAndClear(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:V.CLEAR;var _this$renderer2=this.renderer,r=_this$renderer2.renderTexture,n=_this$renderer2.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!==null&&e!==void 0&&e.filterFrame){var _t148=this.tempRect;_t148.x=0,_t148.y=0,_t148.width=e.filterFrame.width,_t148.height=e.filterFrame.height,r.bind(e,e.filterFrame,_t148);}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var i=1&n.stateId||this.forceClear;(t===V.CLEAR||t===V.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0);}},{key:"applyFilter",value:function applyFilter(e,t,r,n){var i=this.renderer;i.state.set(e.state),this.bindAndClear(r,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(D.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(D.TRIANGLE_STRIP));}},{key:"calculateSpriteMatrix",value:function calculateSpriteMatrix(e,t){var _this$activeState=this.activeState,r=_this$activeState.sourceFrame,n=_this$activeState.destinationFrame,i=t._texture.orig,o=e.set(n.width,0,0,n.height,r.x,r.y),a=t.worldTransform.copyTo(Er.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/i.width,1/i.height),o.translate(t.anchor.x,t.anchor.y),o;}},{key:"destroy",value:function destroy(){this.renderer=null,this.texturePool.clear(!1);}},{key:"getOptimalFilterTexture",value:function getOptimalFilterTexture(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:X.NONE;return this.texturePool.getOptimalTexture(e,t,r,n);}},{key:"getFilterTexture",value:function getFilterTexture(e,t,r){if("number"==typeof e){var _r174=e;e=t,t=_r174;}e=e||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||X.NONE);return n.filterFrame=e.filterFrame,n;}},{key:"returnFilterTexture",value:function returnFilterTexture(e){this.texturePool.returnTexture(e);}},{key:"emptyPool",value:function emptyPool(){this.texturePool.clear(!0);}},{key:"resize",value:function resize(){this.texturePool.setScreenSize(this.renderer.view);}},{key:"transformAABB",value:function transformAABB(e,t){var r=Pn[0],n=Pn[1],i=Pn[2],o=Pn[3];r.set(t.left,t.top),n.set(t.left,t.bottom),i.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(r,r),e.apply(n,n),e.apply(i,i),e.apply(o,o);var a=Math.min(r.x,n.x,i.x,o.x),s=Math.min(r.y,n.y,i.y,o.y),u=Math.max(r.x,n.x,i.x,o.x),l=Math.max(r.y,n.y,i.y,o.y);t.x=a,t.y=s,t.width=u-a,t.height=l-s;}},{key:"roundFrame",value:function roundFrame(e,t,r,n,i){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(i){var _i52=i,_e318=_i52.a,_t149=_i52.b,_r175=_i52.c,_n64=_i52.d;if((Math.abs(_t149)>1e-4||Math.abs(_r175)>1e-4)&&(Math.abs(_e318)>1e-4||Math.abs(_n64)>1e-4))return;}(i=i?$n.copyFrom(i):$n.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e);}}}]);return Rn;}();Rn.extension={type:Vt.RendererSystem,name:"filter"},Yt.add(Rn);var Bn=/*#__PURE__*/_createClass(function Bn(e){_classCallCheck(this,Bn);this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=X.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0;});var Dn=new Ir();var Mn=/*#__PURE__*/function(){function Mn(e){_classCallCheck(this,Mn);this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new wn(10,10),this.msaaSamples=null;}_createClass(Mn,[{key:"contextChange",value:function contextChange(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ir(),this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var _t150=this.renderer.context.extensions.drawBuffers,_r176=this.renderer.context.extensions.depthTexture;J.PREFER_ENV===P.WEBGL_LEGACY&&(_t150=null,_r176=null),_t150?e.drawBuffers=function(e){return _t150.drawBuffersWEBGL(e);}:(this.hasMRT=!1,e.drawBuffers=function(){}),_r176||(this.writeDepthTexture=!1);}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES);}},{key:"bind",value:function bind(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=this.gl;if(e){var _i53=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,_i53.framebuffer)),_i53.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,_i53.mipLevel=r),_i53.dirtyId!==e.dirtyId&&(_i53.dirtyId=e.dirtyId,_i53.dirtyFormat!==e.dirtyFormat?(_i53.dirtyFormat=e.dirtyFormat,_i53.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):_i53.dirtySize!==e.dirtySize&&(_i53.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var _t151=0;_t151<e.colorTextures.length;_t151++){var _r177=e.colorTextures[_t151];this.renderer.texture.unbind(_r177.parentTextureArray||_r177);}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var _e319=t.width>>r,_n65=t.height>>r,_i54=_e319/t.width;this.setViewport(t.x*_i54,t.y*_i54,_e319,_n65);}else{var _t152=e.width>>r,_n66=e.height>>r;this.setViewport(0,0,_t152,_n66);}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height);}},{key:"setViewport",value:function setViewport(e,t,r,n){var i=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),(i.width!==r||i.height!==n||i.x!==e||i.y!==t)&&(i.x=e,i.y=t,i.width=r,i.height=n,this.gl.viewport(e,t,r,n));}},{key:"size",get:function get(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height};}},{key:"clear",value:function clear(e,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:R.COLOR|R.DEPTH;var o=this.gl;o.clearColor(e,t,r,n),o.clear(i);}},{key:"initFramebuffer",value:function initFramebuffer(e){var t=this.gl,r=new Bn(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r;}},{key:"resizeFramebuffer",value:function resizeFramebuffer(e){var t=this.gl,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){var _n67;t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),_n67=1===this.renderer.context.webGLVersion?t.DEPTH_STENCIL:e.depth&&e.stencil?t.DEPTH24_STENCIL8:e.depth?t.DEPTH_COMPONENT24:t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,_n67,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,_n67,e.width,e.height);}var n=e.colorTextures;var i=n.length;t.drawBuffers||(i=Math.min(i,1));for(var _o33=0;_o33<i;_o33++){var _i55=n[_o33],_a35=_i55.parentTextureArray||_i55;this.renderer.texture.bind(_a35,0),0===_o33&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,_a35._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height));}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0);}},{key:"updateFramebuffer",value:function updateFramebuffer(e,t){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;var o=i.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));var a=[];for(var _s18=0;_s18<o;_s18++){var _o34=i[_s18],_u16=_o34.parentTextureArray||_o34;this.renderer.texture.bind(_u16,0),0===_s18&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,_u16._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+_s18,_o34.target,_u16._glTextures[this.CONTEXT_UID].texture,t),a.push(r.COLOR_ATTACHMENT0+_s18));}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){var _n68=e.depthTexture;this.renderer.texture.bind(_n68,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,_n68._glTextures[this.CONTEXT_UID].texture,t);}if(!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture)n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null);else{var _t153,_i56;n.stencil=n.stencil||r.createRenderbuffer(),1===this.renderer.context.webGLVersion?(_t153=r.DEPTH_STENCIL_ATTACHMENT,_i56=r.DEPTH_STENCIL):e.depth&&e.stencil?(_t153=r.DEPTH_STENCIL_ATTACHMENT,_i56=r.DEPTH24_STENCIL8):e.depth?(_t153=r.DEPTH_ATTACHMENT,_i56=r.DEPTH_COMPONENT24):(_t153=r.STENCIL_ATTACHMENT,_i56=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,_i56,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,_i56,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,_t153,r.RENDERBUFFER,n.stencil);}}},{key:"canMultisampleFramebuffer",value:function canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture;}},{key:"detectSamples",value:function detectSamples(e){var t=this.msaaSamples;var r=X.NONE;if(e<=1||null===t)return r;for(var _n69=0;_n69<t.length;_n69++)if(t[_n69]<=e){r=t[_n69];break;}return 1===r&&(r=X.NONE),r;}},{key:"blit",value:function blit(e,t,r){var n=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2!==i.context.webGLVersion||!n)return;var s=n.glFramebuffers[a];if(!s)return;if(!e){if(!s.msaaBuffer)return;var _t154=n.colorTextures[0];if(!_t154)return;s.blitFramebuffer||(s.blitFramebuffer=new wn(n.width,n.height),s.blitFramebuffer.addColorTexture(0,_t154)),(e=s.blitFramebuffer).colorTextures[0]!==_t154&&(e.colorTextures[0]=_t154,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++);}t||((t=Dn).width=n.width,t.height=n.height),r||(r=t);var u=t.width===r.width&&t.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer);}},{key:"disposeFramebuffer",value:function disposeFramebuffer(e,t){var r=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t);}},{key:"disposeAll",value:function disposeAll(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var _r178=0;_r178<t.length;_r178++)this.disposeFramebuffer(t[_r178],e);}},{key:"forceStencil",value:function forceStencil(){var e=this.current;if(!e)return;var t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;var r=e.width,n=e.height,i=this.gl,o=t.stencil=i.createRenderbuffer();var a,s;i.bindRenderbuffer(i.RENDERBUFFER,o),1===this.renderer.context.webGLVersion?(a=i.DEPTH_STENCIL_ATTACHMENT,s=i.DEPTH_STENCIL):e.depth?(a=i.DEPTH_STENCIL_ATTACHMENT,s=i.DEPTH24_STENCIL8):(a=i.STENCIL_ATTACHMENT,s=i.STENCIL_INDEX8),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,s,r,n):i.renderbufferStorage(i.RENDERBUFFER,s,r,n),i.framebufferRenderbuffer(i.FRAMEBUFFER,a,i.RENDERBUFFER,o);}},{key:"reset",value:function reset(){this.current=this.unknownFramebuffer,this.viewport=new Ir();}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return Mn;}();Mn.extension={type:Vt.RendererSystem,name:"framebuffer"},Yt.add(Mn);var Ln={5126:4,5123:2,5121:1};var Fn=/*#__PURE__*/function(){function Fn(e){_classCallCheck(this,Fn);this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={};}_createClass(Fn,[{key:"contextChange",value:function contextChange(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var _t155=this.renderer.context.extensions.vertexArrayObject;J.PREFER_ENV===P.WEBGL_LEGACY&&(_t155=null),_t155?(e.createVertexArray=function(){return _t155.createVertexArrayOES();},e.bindVertexArray=function(e){return _t155.bindVertexArrayOES(e);},e.deleteVertexArray=function(e){return _t155.deleteVertexArrayOES(e);}):(this.hasVao=!1,e.createVertexArray=function(){return null;},e.bindVertexArray=function(){return null;},e.deleteVertexArray=function(){return null;});}if(2!==t.webGLVersion){var _t156=e.getExtension("ANGLE_instanced_arrays");_t156?(e.vertexAttribDivisor=function(e,r){return _t156.vertexAttribDivisorANGLE(e,r);},e.drawElementsInstanced=function(e,r,n,i,o){return _t156.drawElementsInstancedANGLE(e,r,n,i,o);},e.drawArraysInstanced=function(e,r,n,i){return _t156.drawArraysInstancedANGLE(e,r,n,i);}):this.hasInstance=!1;}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex;}},{key:"bind",value:function bind(e,t){t=t||this.renderer.shader.shader;var r=this.gl;var n=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);var o=n[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers();}},{key:"reset",value:function reset(){this.unbind();}},{key:"updateBuffers",value:function updateBuffers(){var e=this._activeGeometry,t=this.renderer.buffer;for(var _r179=0;_r179<e.buffers.length;_r179++){var _n70=e.buffers[_r179];t.update(_n70);}}},{key:"checkCompatibility",value:function checkCompatibility(e,t){var r=e.attributes,n=t.attributeData;for(var _e320 in n)if(!r[_e320])throw new Error("shader and geometry incompatible, geometry missing the \"".concat(_e320,"\" attribute"));}},{key:"getSignature",value:function getSignature(e,t){var r=e.attributes,n=t.attributeData,i=["g",e.id];for(var _e321 in r)n[_e321]&&i.push(_e321,n[_e321].location);return i.join("-");}},{key:"initGeometryVao",value:function initGeometryVao(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!0;var n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);var s=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];var l=u[s];if(l)return u[a.id]=l,l;var h=e.buffers,c=e.attributes,d={},f={};for(var _e322 in h)d[_e322]=0,f[_e322]=0;for(var _e323 in c)!c[_e323].size&&a.attributeData[_e323]?c[_e323].size=a.attributeData[_e323].size:c[_e323].size||console.warn("PIXI Geometry attribute '".concat(_e323,"' size cannot be determined (likely the bound shader does not have the attribute)")),d[c[_e323].buffer]+=c[_e323].size*Ln[c[_e323].type];for(var _e324 in c){var _t157=c[_e324],_r180=_t157.size;void 0===_t157.stride&&(d[_t157.buffer]===_r180*Ln[_t157.type]?_t157.stride=0:_t157.stride=d[_t157.buffer]),void 0===_t157.start&&(_t157.start=f[_t157.buffer],f[_t157.buffer]+=_r180*Ln[_t157.type]);}l=n.createVertexArray(),n.bindVertexArray(l);for(var _e325=0;_e325<h.length;_e325++){var _t158=h[_e325];o.bind(_t158),r&&_t158._glBuffers[i].refCount++;}return this.activateVao(e,a),u[a.id]=l,u[s]=l,n.bindVertexArray(null),o.unbind(Z.ARRAY_BUFFER),l;}},{key:"disposeGeometry",value:function disposeGeometry(e,t){var _this$renderer3;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=e.buffers,o=(_this$renderer3=this.renderer)===null||_this$renderer3===void 0?void 0:_this$renderer3.buffer;if(e.disposeRunner.remove(this),r){if(o)for(var _e326=0;_e326<i.length;_e326++){var _r181=i[_e326]._glBuffers[this.CONTEXT_UID];_r181&&(_r181.refCount--,0===_r181.refCount&&!t&&o.dispose(i[_e326],t));}if(!t)for(var _e327 in r)if("g"===_e327[0]){var _t159=r[_e327];this._activeVao===_t159&&this.unbind(),n.deleteVertexArray(_t159);}delete e.glVertexArrayObjects[this.CONTEXT_UID];}}},{key:"disposeAll",value:function disposeAll(e){var t=Object.keys(this.managedGeometries);for(var _r182=0;_r182<t.length;_r182++)this.disposeGeometry(this.managedGeometries[t[_r182]],e);}},{key:"activateVao",value:function activateVao(e,t){var r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);var s=null;for(var _e328 in a){var _u17=a[_e328],_l11=o[_u17.buffer],_h9=_l11._glBuffers[n];if(t.attributeData[_e328]){s!==_h9&&(i.bind(_l11),s=_h9);var _n71=t.attributeData[_e328].location;if(r.enableVertexAttribArray(_n71),r.vertexAttribPointer(_n71,_u17.size,_u17.type||r.FLOAT,_u17.normalized,_u17.stride,_u17.start),_u17.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(_n71,_u17.divisor);}}}}},{key:"draw",value:function draw(e,t,r,n){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var _a36=o.indexBuffer.data.BYTES_PER_ELEMENT,_s19=2===_a36?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===_a36||4===_a36&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,t||o.indexBuffer.data.length,_s19,(r||0)*_a36,n||1):i.drawElements(e,t||o.indexBuffer.data.length,_s19,(r||0)*_a36):console.warn("unsupported index buffer type: uint32");}else o.instanced?i.drawArraysInstanced(e,r,t||o.getSize(),n||1):i.drawArrays(e,r,t||o.getSize());return this;}},{key:"unbind",value:function unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null;}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return Fn;}();Fn.extension={type:Vt.RendererSystem,name:"geometry"},Yt.add(Fn);var Nn=new Er();var Un=/*#__PURE__*/function(){function Un(e,t){_classCallCheck(this,Un);this._texture=e,this.mapCoord=new Er(),this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=_typeof(t)>"u"?.5:t,this.isSimple=!1;}_createClass(Un,[{key:"texture",get:function get(){return this._texture;},set:function set(e){this._texture=e,this._textureID=-1;}},{key:"multiplyUvs",value:function multiplyUvs(e,t){void 0===t&&(t=e);var r=this.mapCoord;for(var _n72=0;_n72<e.length;_n72+=2){var _i57=e[_n72],_o35=e[_n72+1];t[_n72]=_i57*r.a+_o35*r.c+r.tx,t[_n72+1]=_i57*r.b+_o35*r.d+r.ty;}return t;}},{key:"update",value:function update(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,i=t.trim;i&&(Nn.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Nn));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+s+u)/o.width,a[1]=(t._frame.y+s+u)/o.height,a[2]=(t._frame.x+t._frame.width-s+u)/o.width,a[3]=(t._frame.y+t._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0;}}]);return Un;}();var jn=/*#__PURE__*/function(_fn){_inherits(jn,_fn);function jn(e,t,r){var _this51;_classCallCheck(this,jn);var n=null;"string"!=typeof e&&void 0===t&&void 0===r&&(n=e,e=void 0,t=void 0,r=void 0),_this51=_callSuper(this,jn,[e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r]),_this51.maskSprite=n,_this51.maskMatrix=new Er();return _this51;}_createClass(jn,[{key:"maskSprite",get:function get(){return this._maskSprite;},set:function set(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1);}},{key:"apply",value:function apply(e,t,r,n){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Un(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,r,n));}}]);return jn;}(fn);var Gn=/*#__PURE__*/function(){function Gn(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_classCallCheck(this,Gn);this.type=Y.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=fn.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null;}_createClass(Gn,[{key:"filter",get:function get(){return this._filters?this._filters[0]:null;},set:function set(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null;}},{key:"reset",value:function reset(){this.pooled&&(this.maskObject=null,this.type=Y.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null;}},{key:"copyCountersOrReset",value:function copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null);}}]);return Gn;}();var zn=/*#__PURE__*/function(){function zn(e){_classCallCheck(this,zn);this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0;}_createClass(zn,[{key:"setMaskStack",value:function setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e);}},{key:"push",value:function push(e,t){var r=t;if(!r.isMaskData){var _e329=this.maskDataPool.pop()||new Gn();_e329.pooled=!0,_e329.maskObject=t,r=_e329;}var n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Y.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Y.SCISSOR:this.renderer.scissor.push(r);break;case Y.STENCIL:this.renderer.stencil.push(r);break;case Y.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Y.COLOR:this.pushColorMask(r);}r.type===Y.SPRITE&&this.maskStack.push(r);}},{key:"pop",value:function pop(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case Y.SCISSOR:this.renderer.scissor.pop(t);break;case Y.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Y.SPRITE:this.popSpriteMask(t);break;case Y.COLOR:this.popColorMask(t);}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var _e330=this.maskStack[this.maskStack.length-1];_e330.type===Y.SPRITE&&_e330._filters&&(_e330._filters[0].maskSprite=_e330.maskObject);}}}},{key:"detect",value:function detect(e){var t=e.maskObject;t?t.isSprite?e.type=Y.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Y.SCISSOR:e.type=Y.STENCIL:e.type=Y.COLOR;}},{key:"pushSpriteMask",value:function pushSpriteMask(e){var t=e.maskObject,r=e._target;var n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new jn()])),n[0].resolution=e.resolution,n[0].multisample=e.multisample,n[0].maskSprite=t;var i=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,n),r.filterArea=i,e._filters||this.alphaMaskIndex++;}},{key:"popSpriteMask",value:function popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null);}},{key:"pushColorMask",value:function pushColorMask(e){var t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r));}},{key:"popColorMask",value:function popColorMask(e){var t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r));}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return zn;}();zn.extension={type:Vt.RendererSystem,name:"mask"},Yt.add(zn);var Vn=/*#__PURE__*/function(){function Vn(e){_classCallCheck(this,Vn);this.renderer=e,this.maskStack=[],this.glConst=0;}_createClass(Vn,[{key:"getStackLength",value:function getStackLength(){return this.maskStack.length;}},{key:"setMaskStack",value:function setMaskStack(e){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=e;var n=this.getStackLength();n!==r&&(0===n?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()));}},{key:"_useCurrent",value:function _useCurrent(){}},{key:"destroy",value:function destroy(){this.renderer=null,this.maskStack=null;}}]);return Vn;}();var Hn=new Er(),Wn=[],Yn=/*#__PURE__*/function(_Vn){_inherits(e,_Vn);function e(_e331){var _this52;_classCallCheck(this,e);_this52=_callSuper(this,e,[_e331]),_this52.glConst=J.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST;return _this52;}_createClass(e,[{key:"getStackLength",value:function getStackLength(){var _e332=this.maskStack[this.maskStack.length-1];return _e332?_e332._scissorCounter:0;}},{key:"calcScissorRect",value:function calcScissorRect(_e333){var _Wn$pop;if(_e333._scissorRectLocal)return;var t=_e333._scissorRect,r=_e333.maskObject,n=this.renderer,i=n.renderTexture,o=r.getBounds(!0,(_Wn$pop=Wn.pop())!==null&&_Wn$pop!==void 0?_Wn$pop:new Ir());this.roundFrameToPixels(o,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&o.fit(t),_e333._scissorRectLocal=o;}},{key:"testScissor",value:function testScissor(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var n=t._scissorRectLocal;return n.width>0&&n.height>0;}},{key:"roundFrameToPixels",value:function roundFrameToPixels(t,r,n,i,o){e.isMatrixRotated(o)||((o=o?Hn.copyFrom(o):Hn.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r));}},{key:"push",value:function push(_e335){_e335._scissorRectLocal||this.calcScissorRect(_e335);var t=this.renderer.gl;_e335._scissorRect||t.enable(t.SCISSOR_TEST),_e335._scissorCounter++,_e335._scissorRect=_e335._scissorRectLocal,this._useCurrent();}},{key:"pop",value:function pop(_e336){var t=this.renderer.gl;_e336&&Wn.push(_e336._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST);}},{key:"_useCurrent",value:function _useCurrent(){var _e337=this.maskStack[this.maskStack.length-1]._scissorRect;var t;t=this.renderer.renderTexture.current?_e337.y:this.renderer.height-_e337.height-_e337.y,this.renderer.gl.scissor(_e337.x,t,_e337.width,_e337.height);}}],[{key:"isMatrixRotated",value:function isMatrixRotated(_e334){if(!_e334)return!1;var t=_e334.a,r=_e334.b,n=_e334.c,i=_e334.d;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4);}}]);return e;}(Vn);Yn.extension={type:Vt.RendererSystem,name:"scissor"};var Kn=Yn;Yt.add(Kn);var Xn=/*#__PURE__*/function(_Vn2){_inherits(Xn,_Vn2);function Xn(e){var _this53;_classCallCheck(this,Xn);_this53=_callSuper(this,Xn,[e]),_this53.glConst=J.ADAPTER.getWebGLRenderingContext().STENCIL_TEST;return _this53;}_createClass(Xn,[{key:"getStackLength",value:function getStackLength(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0;}},{key:"push",value:function push(e){var t=e.maskObject,r=this.renderer.gl,n=e._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;var i=e._colorMask;0!==i&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,r.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent();}},{key:"pop",value:function pop(e){var t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{var _r183=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,_n73=_r183?_r183._colorMask:15;0!==_n73&&(_r183._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==_n73&&(_r183._colorMask=_n73,t.colorMask(0!=(1&_n73),0!=(2&_n73),0!=(4&_n73),0!=(8&_n73))),this._useCurrent();}}},{key:"_useCurrent",value:function _useCurrent(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP);}}]);return Xn;}(Vn);Xn.extension={type:Vt.RendererSystem,name:"stencil"},Yt.add(Xn);var Zn=/*#__PURE__*/function(){function Zn(e){_classCallCheck(this,Zn);this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:function get(){return xe("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract;}},prepare:{enumerable:!1,get:function get(){return xe("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare;}},interaction:{enumerable:!1,get:function get(){return xe("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events;}}});}_createClass(Zn,[{key:"init",value:function init(){var e=this.rendererPlugins;for(var _t160 in e)this.plugins[_t160]=new e[_t160](this.renderer);}},{key:"destroy",value:function destroy(){for(var _e338 in this.plugins)this.plugins[_e338].destroy(),this.plugins[_e338]=null;}}]);return Zn;}();Zn.extension={type:[Vt.RendererSystem,Vt.CanvasRendererSystem],name:"_plugin"},Yt.add(Zn);var qn=/*#__PURE__*/function(){function qn(e){_classCallCheck(this,qn);this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Er(),this.transform=null;}_createClass(qn,[{key:"update",value:function update(e,t,r,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals);}},{key:"calculateProjection",value:function calculateProjection(e,t,r,n){var i=this.projectionMatrix,o=n?-1:1;i.identity(),i.a=1/t.width*2,i.d=o*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-o-t.y*i.d;}},{key:"setTransform",value:function setTransform(e){}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return qn;}();qn.extension={type:Vt.RendererSystem,name:"projection"},Yt.add(qn);var Jn=new Nr(),Qn=new Ir();var ei=/*#__PURE__*/function(){function ei(e){_classCallCheck(this,ei);this.renderer=e,this._tempMatrix=new Er();}_createClass(ei,[{key:"generateTexture",value:function generateTexture(e,t){var _n$multisample;var _ref35=t||{},r=_ref35.region,n=_objectWithoutProperties(_ref35,_excluded),i=(r===null||r===void 0?void 0:r.copyTo(Qn))||e.getLocalBounds(Qn,!0),o=n.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/o),i.height=Math.max(i.height,1/o),n.width=i.width,n.height=i.height,n.resolution=o,(_n$multisample=n.multisample)!==null&&_n$multisample!==void 0?_n$multisample:n.multisample=this.renderer.multisample;var a=Tn.create(n);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;var s=e.transform;return e.transform=Jn,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=s,a;}},{key:"destroy",value:function destroy(){}}]);return ei;}();ei.extension={type:[Vt.RendererSystem,Vt.CanvasRendererSystem],name:"textureGenerator"},Yt.add(ei);var ti=new Ir(),ri=new Ir();var ni=/*#__PURE__*/function(){function ni(e){_classCallCheck(this,ni);this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ir(),this.destinationFrame=new Ir(),this.viewportFrame=new Ir();}_createClass(ni,[{key:"contextChange",value:function contextChange(){var _this$renderer4;var e=(_this$renderer4=this.renderer)===null||_this$renderer4===void 0?void 0:_this$renderer4.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha);}},{key:"bind",value:function bind(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;var r=arguments.length>2?arguments[2]:undefined;var n=this.renderer;var i,o,a;this.current=e,e?(i=e.baseTexture,a=i.resolution,t||(ti.width=e.frame.width,ti.height=e.frame.height,t=ti),r||(ri.x=e.frame.x,ri.y=e.frame.y,ri.width=t.width,ri.height=t.height,r=ri),o=i.framebuffer):(a=n.resolution,t||(ti.width=n._view.screen.width,ti.height=n._view.screen.height,t=ti),r||((r=ti).width=t.width,r.height=t.height));var s=this.viewportFrame;s.x=r.x*a,s.y=r.y*a,s.width=r.width*a,s.height=r.height*a,e||(s.y=n.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(o,s),this.renderer.projection.update(r,t,a,!o),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r);}},{key:"clear",value:function clear(e,t){var r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=st.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);var i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=i.width!==o.width||i.height!==o.height;if(a){var _this$viewportFrame=this.viewportFrame,_e339=_this$viewportFrame.x,_t161=_this$viewportFrame.y,_r184=_this$viewportFrame.width,_n74=_this$viewportFrame.height;_e339=Math.round(_e339),_t161=Math.round(_t161),_r184=Math.round(_r184),_n74=Math.round(_n74),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(_e339,_t161,_r184,_n74);}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,t),a&&this.renderer.scissor.pop();}},{key:"resize",value:function resize(){this.bind(null);}},{key:"reset",value:function reset(){this.bind(null);}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return ni;}();ni.extension={type:Vt.RendererSystem,name:"renderTexture"},Yt.add(ni);var ii=/*#__PURE__*/_createClass(function ii(){_classCallCheck(this,ii);});var oi=/*#__PURE__*/function(){function oi(e,t){_classCallCheck(this,oi);this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={};}_createClass(oi,[{key:"destroy",value:function destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null;}}]);return oi;}();function ai(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n;}function si(e){var t=new Array(e);for(var _e340=0;_e340<t.length;_e340++)t[_e340]=!1;return t;}function ui(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return si(2*t);case"bvec3":return si(3*t);case"bvec4":return si(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);}return null;}function li(e,t){var _console;var r=e.getShaderSource(t).split("\n").map(function(e,t){return"".concat(t,": ").concat(e);}),n=e.getShaderInfoLog(t),i=n.split("\n"),o={},a=i.map(function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"));}).filter(function(e){return!(!e||o[e])&&(o[e]=!0,!0);}),s=[""];a.forEach(function(e){r[e-1]="%c".concat(r[e-1],"%c"),s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px");});var u=r.join("\n");s[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),(_console=console).warn.apply(_console,s),console.groupEnd();}function hi(e,t){var _t$extra;var r=ai(e,e.VERTEX_SHADER,t.vertexSrc),n=ai(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);var o=(_t$extra=t.extra)===null||_t$extra===void 0?void 0:_t$extra.transformFeedbackVaryings;if(o&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,o.names,"separate"===o.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||function(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||li(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||li(e,n),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)));}(e,i,r,n),t.attributeData=function(e,t){var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(var _i58=0;_i58<n;_i58++){var _n75=t.getActiveAttrib(e,_i58);if(_n75.name.startsWith("gl_"))continue;var _o36=qr(t,_n75.type),_a37={type:_o36,name:_n75.name,size:Kr(_o36),location:t.getAttribLocation(e,_n75.name)};r[_n75.name]=_a37;}return r;}(i,e),t.uniformData=function(e,t){var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var _i59=0;_i59<n;_i59++){var _n76=t.getActiveUniform(e,_i59),_o37=_n76.name.replace(/\[.*?\]$/,""),_a38=!!_n76.name.match(/\[.*?\]$/),_s20=qr(t,_n76.type);r[_o37]={name:_o37,index:_i59,type:_s20,size:_n76.size,isArray:_a38,value:ui(_s20,_n76.size)};}return r;}(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var _r185=Object.keys(t.attributeData);_r185.sort(function(e,t){return e>t?1:-1;});for(var _n77=0;_n77<_r185.length;_n77++)t.attributeData[_r185[_n77]].location=_n77,e.bindAttribLocation(i,_n77,_r185[_n77]);e.linkProgram(i);}e.deleteShader(r),e.deleteShader(n);var a={};for(var _r186 in t.uniformData){var _n78=t.uniformData[_r186];a[_r186]={location:e.getUniformLocation(i,_r186),value:ui(_n78.type,_n78.size)};}return new oi(i,a);}function ci(e,t,r,n,i){r.buffer.update(i);}var di={"float":"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},fi={"float":4,vec2:8,vec3:12,vec4:16,"int":4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function pi(e){var t=e.map(function(e){return{data:e,offset:0,dataLen:0,dirty:0};});var r=0,n=0,i=0;for(var _e341=0;_e341<t.length;_e341++){var _o38=t[_e341];if(r=fi[_o38.data.type],_o38.data.size>1&&(r=Math.max(r,16)*_o38.data.size),_o38.dataLen=r,n%r!=0&&n<16){var _e342=n%r%16;n+=_e342,i+=_e342;}n+r>16?(i=16*Math.ceil(i/16),_o38.offset=i,i+=r,n=r):(_o38.offset=i,n+=r,i+=r);}return i=16*Math.ceil(i/16),{uboElements:t,size:i};}function yi(e,t){var r=[];for(var _n79 in e)t[_n79]&&r.push(t[_n79]);return r.sort(function(e,t){return e.index-t.index;}),r;}function gi(e,t){if(!e.autoManage)return{size:0,syncFunc:ci};var r=yi(e.uniforms,t),_pi=pi(r),n=_pi.uboElements,i=_pi.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(var _t162=0;_t162<n.length;_t162++){var _r187=n[_t162],_i60=e.uniforms[_r187.data.name],_a39=_r187.data.name;var _s21=!1;for(var _e343=0;_e343<Ur.length;_e343++){var _t163=Ur[_e343];if(_t163.codeUbo&&_t163.test(_r187.data,_i60)){o.push("offset = ".concat(_r187.offset/4,";"),Ur[_e343].codeUbo(_r187.data.name,_i60)),_s21=!0;break;}}if(!_s21)if(_r187.data.size>1){var _e344=Kr(_r187.data.type),_t164=Math.max(fi[_r187.data.type]/16,1),_n80=_e344/_t164,_i61=(4-_n80%4)%4;o.push("\n                cv = ud.".concat(_a39,".value;\n                v = uv.").concat(_a39,";\n                offset = ").concat(_r187.offset/4,";\n\n                t = 0;\n\n                for(var i=0; i < ").concat(_r187.data.size*_t164,"; i++)\n                {\n                    for(var j = 0; j < ").concat(_n80,"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ").concat(_i61,";\n                }\n\n                "));}else{var _e345=di[_r187.data.type];o.push("\n                cv = ud.".concat(_a39,".value;\n                v = uv.").concat(_a39,";\n                offset = ").concat(_r187.offset/4,";\n                ").concat(_e345,";\n                "));}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))};}var mi;function wi(){if("boolean"==typeof mi)return mi;try{mi=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b");}catch(_unused14){mi=!1;}return mi;}var bi=0;var vi={textureCount:0,uboCount:0};var xi=/*#__PURE__*/function(){function xi(e){_classCallCheck(this,xi);this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=bi++;}_createClass(xi,[{key:"systemCheck",value:function systemCheck(){if(!wi())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.");}},{key:"contextChange",value:function contextChange(e){this.gl=e,this.reset();}},{key:"bind",value:function bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),t||(vi.textureCount=0,vi.uboCount=0,this.syncUniformGroup(e.uniformGroup,vi)),n;}},{key:"setUniforms",value:function setUniforms(e){var t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer);}},{key:"syncUniformGroup",value:function syncUniformGroup(e,t){var r=this.getGlProgram();(!e["static"]||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t));}},{key:"syncUniforms",value:function syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r);}},{key:"createSyncGroups",value:function createSyncGroups(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var _n81 in e.uniforms){var _i62=t[_n81];if(!_i62){var _e$uniforms$_n;!0===((_e$uniforms$_n=e.uniforms[_n81])===null||_e$uniforms$_n===void 0?void 0:_e$uniforms$_n.group)&&(e.uniforms[_n81].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv.".concat(_n81,", '").concat(_n81,"');\n                    ")):r.push("\n                        renderer.shader.syncUniformGroup(uv.".concat(_n81,", syncData);\n                    ")));continue;}var _o39=e.uniforms[_n81];var _a40=!1;for(var _e346=0;_e346<Ur.length;_e346++)if(Ur[_e346].test(_i62,_o39)){r.push(Ur[_e346].code(_n81,_o39)),_a40=!0;break;}if(!_a40){var _e347=(1!==_i62.size||_i62.isArray?Gr:jr)[_i62.type].replace("location","ud[\"".concat(_n81,"\"].location"));r.push("\n            cu = ud[\"".concat(_n81,"\"];\n            cv = cu.value;\n            v = uv[\"").concat(_n81,"\"];\n            ").concat(_e347,";"));}}return new Function("ud","uv","renderer","syncData",r.join("\n"));}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id];}},{key:"syncUniformBufferGroup",value:function syncUniformBufferGroup(e,t){var r=this.getGlProgram();if(!e["static"]||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;var _n82=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),_n82(r.uniformData,e.uniforms,this.renderer,vi,e.buffer);}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t]);}},{key:"createSyncBufferGroup",value:function createSyncBufferGroup(e,t,r){var n=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var i=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo");var a=this._uboCache[o];if(a||(a=this._uboCache[o]=gi(e,this.shader.program.uniformData)),e.autoManage){var _t165=new Float32Array(a.size/4);e.buffer.update(_t165);}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id];}},{key:"getSignature",value:function getSignature(e,t,r){var n=e.uniforms,i=["".concat(r,"-")];for(var _e348 in n)i.push(_e348),t[_e348]&&i.push(t[_e348].type);return i.join("-");}},{key:"getGlProgram",value:function getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null;}},{key:"generateProgram",value:function generateProgram(e){var t=this.gl,r=e.program,n=hi(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n;}},{key:"reset",value:function reset(){this.program=null,this.shader=null;}},{key:"disposeShader",value:function disposeShader(e){this.shader===e&&(this.shader=null);}},{key:"destroy",value:function destroy(){this.renderer=null,this.destroyed=!0;}}]);return xi;}();xi.extension={type:Vt.RendererSystem,name:"shader"},Yt.add(xi);var _i=/*#__PURE__*/function(){function _i(e){_classCallCheck(this,_i);this.renderer=e;}_createClass(_i,[{key:"run",value:function run(e){var t=this.renderer;t.runners.init.emit(t.options),e.hello&&console.log("PixiJS 7.4.0 - ".concat(t.rendererLogId," - https://pixijs.com")),t.resize(t.screen.width,t.screen.height);}},{key:"destroy",value:function destroy(){}}]);return _i;}();_i.defaultOptions={hello:!1},_i.extension={type:[Vt.RendererSystem,Vt.CanvasRendererSystem],name:"startup"},Yt.add(_i);var Ii=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=B.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Jt(),this.defaultState.blend=!0;}_createClass(e,[{key:"contextChange",value:function contextChange(_e349){this.gl=_e349,this.blendModes=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return t[B.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.ADD]=[e.ONE,e.ONE],t[B.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.NONE]=[0,0],t[B.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[B.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[B.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[B.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[B.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[B.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[B.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[B.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[B.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[B.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[B.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t;}(_e349),this.set(this.defaultState),this.reset();}},{key:"set",value:function set(_e350){if(_e350=_e350||this.defaultState,this.stateId!==_e350.data){var _t166=this.stateId^_e350.data,_r188=0;for(;_t166;)1&_t166&&this.map[_r188].call(this,!!(_e350.data&1<<_r188)),_t166>>=1,_r188++;this.stateId=_e350.data;}for(var _t167=0;_t167<this.checks.length;_t167++)this.checks[_t167](this,_e350);}},{key:"forceState",value:function forceState(_e351){_e351=_e351||this.defaultState;for(var _t168=0;_t168<this.map.length;_t168++)this.map[_t168].call(this,!!(_e351.data&1<<_t168));for(var _t169=0;_t169<this.checks.length;_t169++)this.checks[_t169](this,_e351);this.stateId=_e351.data;}},{key:"setBlend",value:function setBlend(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND);}},{key:"setOffset",value:function setOffset(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL);}},{key:"setDepthTest",value:function setDepthTest(_e352){this.gl[_e352?"enable":"disable"](this.gl.DEPTH_TEST);}},{key:"setDepthMask",value:function setDepthMask(_e353){this.gl.depthMask(_e353);}},{key:"setCullFace",value:function setCullFace(_e354){this.gl[_e354?"enable":"disable"](this.gl.CULL_FACE);}},{key:"setFrontFace",value:function setFrontFace(_e355){this.gl.frontFace(this.gl[_e355?"CW":"CCW"]);}},{key:"setBlendMode",value:function setBlendMode(_e356){if(_e356===this.blendMode)return;this.blendMode=_e356;var t=this.blendModes[_e356],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD));}},{key:"setPolygonOffset",value:function setPolygonOffset(_e357,t){this.gl.polygonOffset(_e357,t);}},{key:"reset",value:function reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0);}},{key:"updateCheck",value:function updateCheck(_e358,t){var r=this.checks.indexOf(_e358);t&&-1===r?this.checks.push(_e358):!t&&-1!==r&&this.checks.splice(r,1);}},{key:"destroy",value:function destroy(){this.gl=null;}}],[{key:"checkBlendMode",value:function checkBlendMode(_e359,t){_e359.setBlendMode(t.blendMode);}},{key:"checkPolygonOffset",value:function checkPolygonOffset(_e360,t){_e360.setPolygonOffset(1,t.polygonOffset);}}]);return e;}();Ii.extension={type:Vt.RendererSystem,name:"state"};var Ai=Ii;Yt.add(Ai);var Si=/*#__PURE__*/function(_me4){_inherits(Si,_me4);function Si(){var _this54;_classCallCheck(this,Si);_this54=_callSuper(this,Si,arguments),_this54.runners={},_this54._systemsHash={};return _this54;}_createClass(Si,[{key:"setup",value:function setup(e){var _e$priority;this.addRunners.apply(this,_toConsumableArray(e.runners));var t=((_e$priority=e.priority)!==null&&_e$priority!==void 0?_e$priority:[]).filter(function(t){return e.systems[t];}),r=[].concat(_toConsumableArray(t),_toConsumableArray(Object.keys(e.systems).filter(function(e){return!t.includes(e);})));var _iterator44=_createForOfIteratorHelper(r),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var _t170=_step44.value;this.addSystem(e.systems[_t170],_t170);}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}}},{key:"addRunners",value:function addRunners(){var _this55=this;for(var _len6=arguments.length,e=new Array(_len6),_key6=0;_key6<_len6;_key6++){e[_key6]=arguments[_key6];}e.forEach(function(e){_this55.runners[e]=new tr(e);});}},{key:"addSystem",value:function addSystem(e,t){var r=new e(this);if(this[t])throw new Error("Whoops! The name \"".concat(t,"\" is already in use"));this[t]=r,this._systemsHash[t]=r;for(var _e361 in this.runners)this.runners[_e361].add(r);return this;}},{key:"emitWithCustomOptions",value:function emitWithCustomOptions(e,t){var _this56=this;var r=Object.keys(this._systemsHash);e.items.forEach(function(n){var i=r.find(function(e){return _this56._systemsHash[e]===n;});n[e.name](t[i]);});}},{key:"destroy",value:function destroy(){Object.values(this.runners).forEach(function(e){e.destroy();}),this._systemsHash={};}}]);return Si;}(me);var Ti=/*#__PURE__*/function(){function e(t){_classCallCheck(this,e);this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode;}_createClass(e,[{key:"postrender",value:function postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==H.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())));}},{key:"run",value:function run(){var _e362=this.renderer.texture,t=_e362.managedTextures;var r=!1;for(var _n83=0;_n83<t.length;_n83++){var _i63=t[_n83];_i63.resource&&this.count-_i63.touched>this.maxIdle&&(_e362.destroyTexture(_i63,!0),t[_n83]=null,r=!0);}if(r){var _e363=0;for(var _r189=0;_r189<t.length;_r189++)null!==t[_r189]&&(t[_e363++]=t[_r189]);t.length=_e363;}}},{key:"unload",value:function unload(_e364){var t=this.renderer.texture,r=_e364._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(var _t171=_e364.children.length-1;_t171>=0;_t171--)this.unload(_e364.children[_t171]);}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return e;}();Ti.defaultMode=H.AUTO,Ti.defaultMaxIdle=3600,Ti.defaultCheckCountMax=600,Ti.extension={type:Vt.RendererSystem,name:"textureGC"};var Ci=Ti;Yt.add(Ci);var Ei=/*#__PURE__*/_createClass(function Ei(e){_classCallCheck(this,Ei);this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=F.UNSIGNED_BYTE,this.internalFormat=M.RGBA,this.samplerType=0;});var Oi=/*#__PURE__*/function(){function Oi(e){_classCallCheck(this,Oi);this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ar(),this.hasIntegerTextures=!1;}_createClass(Oi,[{key:"contextChange",value:function contextChange(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e,_F$UNSIGNED_BYTE,_ref36){var t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?(_ref36={},_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref36,F.UNSIGNED_BYTE,(_F$UNSIGNED_BYTE={},_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_F$UNSIGNED_BYTE,M.RGBA,e.RGBA8),M.RGB,e.RGB8),M.RG,e.RG8),M.RED,e.R8),M.RGBA_INTEGER,e.RGBA8UI),M.RGB_INTEGER,e.RGB8UI),M.RG_INTEGER,e.RG8UI),M.RED_INTEGER,e.R8UI),M.ALPHA,e.ALPHA),M.LUMINANCE,e.LUMINANCE),_defineProperty(_F$UNSIGNED_BYTE,M.LUMINANCE_ALPHA,e.LUMINANCE_ALPHA))),F.BYTE,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA,e.RGBA8_SNORM),M.RGB,e.RGB8_SNORM),M.RG,e.RG8_SNORM),M.RED,e.R8_SNORM),M.RGBA_INTEGER,e.RGBA8I),M.RGB_INTEGER,e.RGB8I),M.RG_INTEGER,e.RG8I),M.RED_INTEGER,e.R8I)),F.UNSIGNED_SHORT,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA_INTEGER,e.RGBA16UI),M.RGB_INTEGER,e.RGB16UI),M.RG_INTEGER,e.RG16UI),M.RED_INTEGER,e.R16UI),M.DEPTH_COMPONENT,e.DEPTH_COMPONENT16)),F.SHORT,_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA_INTEGER,e.RGBA16I),M.RGB_INTEGER,e.RGB16I),M.RG_INTEGER,e.RG16I),M.RED_INTEGER,e.R16I)),F.UNSIGNED_INT,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA_INTEGER,e.RGBA32UI),M.RGB_INTEGER,e.RGB32UI),M.RG_INTEGER,e.RG32UI),M.RED_INTEGER,e.R32UI),M.DEPTH_COMPONENT,e.DEPTH_COMPONENT24)),F.INT,_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA_INTEGER,e.RGBA32I),M.RGB_INTEGER,e.RGB32I),M.RG_INTEGER,e.RG32I),M.RED_INTEGER,e.R32I)),F.FLOAT,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA,e.RGBA32F),M.RGB,e.RGB32F),M.RG,e.RG32F),M.RED,e.R32F),M.DEPTH_COMPONENT,e.DEPTH_COMPONENT32F)),F.HALF_FLOAT,_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA,e.RGBA16F),M.RGB,e.RGB16F),M.RG,e.RG16F),M.RED,e.R16F)),F.UNSIGNED_SHORT_5_6_5,_defineProperty({},M.RGB,e.RGB565)),F.UNSIGNED_SHORT_4_4_4_4,_defineProperty({},M.RGBA,e.RGBA4)),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref36,F.UNSIGNED_SHORT_5_5_5_1,_defineProperty({},M.RGBA,e.RGB5_A1)),F.UNSIGNED_INT_2_10_10_10_REV,_defineProperty(_defineProperty({},M.RGBA,e.RGB10_A2),M.RGBA_INTEGER,e.RGB10_A2UI)),F.UNSIGNED_INT_10F_11F_11F_REV,_defineProperty({},M.RGB,e.R11F_G11F_B10F)),F.UNSIGNED_INT_5_9_9_9_REV,_defineProperty({},M.RGB,e.RGB9_E5)),F.UNSIGNED_INT_24_8,_defineProperty({},M.DEPTH_STENCIL,e.DEPTH24_STENCIL8)),F.FLOAT_32_UNSIGNED_INT_24_8_REV,_defineProperty({},M.DEPTH_STENCIL,e.DEPTH32F_STENCIL8))):_defineProperty(_defineProperty(_defineProperty(_defineProperty({},F.UNSIGNED_BYTE,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA,e.RGBA),M.RGB,e.RGB),M.ALPHA,e.ALPHA),M.LUMINANCE,e.LUMINANCE),M.LUMINANCE_ALPHA,e.LUMINANCE_ALPHA)),F.UNSIGNED_SHORT_5_6_5,_defineProperty({},M.RGB,e.RGB)),F.UNSIGNED_SHORT_4_4_4_4,_defineProperty({},M.RGBA,e.RGBA)),F.UNSIGNED_SHORT_5_5_5_1,_defineProperty({},M.RGBA,e.RGBA)),t;}(e),this.samplerTypes=function(e,_ref38){var t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?(_ref38={},_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref38,e.RGB,N.FLOAT),e.RGBA,N.FLOAT),e.ALPHA,N.FLOAT),e.LUMINANCE,N.FLOAT),e.LUMINANCE_ALPHA,N.FLOAT),e.R8,N.FLOAT),e.R8_SNORM,N.FLOAT),e.RG8,N.FLOAT),e.RG8_SNORM,N.FLOAT),e.RGB8,N.FLOAT),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref38,e.RGB8_SNORM,N.FLOAT),e.RGB565,N.FLOAT),e.RGBA4,N.FLOAT),e.RGB5_A1,N.FLOAT),e.RGBA8,N.FLOAT),e.RGBA8_SNORM,N.FLOAT),e.RGB10_A2,N.FLOAT),e.RGB10_A2UI,N.FLOAT),e.SRGB8,N.FLOAT),e.SRGB8_ALPHA8,N.FLOAT),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref38,e.R16F,N.FLOAT),e.RG16F,N.FLOAT),e.RGB16F,N.FLOAT),e.RGBA16F,N.FLOAT),e.R32F,N.FLOAT),e.RG32F,N.FLOAT),e.RGB32F,N.FLOAT),e.RGBA32F,N.FLOAT),e.R11F_G11F_B10F,N.FLOAT),e.RGB9_E5,N.FLOAT),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref38,e.R8I,N.INT),e.R8UI,N.UINT),e.R16I,N.INT),e.R16UI,N.UINT),e.R32I,N.INT),e.R32UI,N.UINT),e.RG8I,N.INT),e.RG8UI,N.UINT),e.RG16I,N.INT),e.RG16UI,N.UINT),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref38,e.RG32I,N.INT),e.RG32UI,N.UINT),e.RGB8I,N.INT),e.RGB8UI,N.UINT),e.RGB16I,N.INT),e.RGB16UI,N.UINT),e.RGB32I,N.INT),e.RGB32UI,N.UINT),e.RGBA8I,N.INT),e.RGBA8UI,N.UINT),_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref38,e.RGBA16I,N.INT),e.RGBA16UI,N.UINT),e.RGBA32I,N.INT),e.RGBA32UI,N.UINT),e.DEPTH_COMPONENT16,N.FLOAT),e.DEPTH_COMPONENT24,N.FLOAT),e.DEPTH_COMPONENT32F,N.FLOAT),e.DEPTH_STENCIL,N.FLOAT),e.DEPTH24_STENCIL8,N.FLOAT),e.DEPTH32F_STENCIL8,N.FLOAT)):_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},e.RGB,N.FLOAT),e.RGBA,N.FLOAT),e.ALPHA,N.FLOAT),e.LUMINANCE,N.FLOAT),e.LUMINANCE_ALPHA,N.FLOAT),e.DEPTH_STENCIL,N.FLOAT),t;}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var _e365=0;_e365<t;_e365++)this.boundTextures[_e365]=null;this.emptyTextures={};var r=new Ei(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ei(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var _t172=0;_t172<6;_t172++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+_t172,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var _e366=0;_e366<this.boundTextures.length;_e366++)this.bind(null,_e366);}},{key:"bind",value:function bind(e){var _e367,_e368;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=this.gl;if(e=(_e367=e)===null||_e367===void 0?void 0:_e367.castToBaseTexture(),(_e368=e)!==null&&_e368!==void 0&&_e368.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var _n84=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,_n84.texture)),_n84.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):_n84.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e;}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null;}},{key:"reset",value:function reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var _e369=0;_e369<this.boundTextures.length;_e369++)this.boundTextures[_e369]=this.unknownTexture;}},{key:"unbind",value:function unbind(e){var t=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var _e370=0;_e370<r.length;_e370++)r[_e370]===this.unknownTexture&&this.bind(null,_e370);}for(var _n85=0;_n85<r.length;_n85++)r[_n85]===e&&(this.currentLocation!==_n85&&(t.activeTexture(t.TEXTURE0+_n85),this.currentLocation=_n85),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[_n85]=null);}},{key:"ensureSamplerType",value:function ensureSamplerType(e){var t=this.boundTextures,r=this.hasIntegerTextures,n=this.CONTEXT_UID;if(r)for(var _r190=e-1;_r190>=0;--_r190){var _e371=t[_r190];_e371&&_e371._glTextures[n].samplerType!==N.FLOAT&&this.renderer.texture.unbind(_e371);}}},{key:"initTexture",value:function initTexture(e){var t=new Ei(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t;}},{key:"initTextureType",value:function initTextureType(e,t){var _this$internalFormats,_this$internalFormats2,_this$samplerTypes$t$;t.internalFormat=(_this$internalFormats=(_this$internalFormats2=this.internalFormats[e.type])===null||_this$internalFormats2===void 0?void 0:_this$internalFormats2[e.format])!==null&&_this$internalFormats!==void 0?_this$internalFormats:e.format,t.samplerType=(_this$samplerTypes$t$=this.samplerTypes[t.internalFormat])!==null&&_this$samplerTypes$t$!==void 0?_this$samplerTypes$t$:N.FLOAT,2===this.webGLVersion&&e.type===F.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type;}},{key:"updateTexture",value:function updateTexture(e){var _e$resource;var t=e._glTextures[this.CONTEXT_UID];if(!t)return;var r=this.renderer;if(this.initTextureType(e,t),(_e$resource=e.resource)!==null&&_e$resource!==void 0&&_e$resource.upload(r,e,t))t.samplerType!==N.FLOAT&&(this.hasIntegerTextures=!0);else{var _n86=e.realWidth,_i64=e.realHeight,_o40=r.gl;(t.width!==_n86||t.height!==_i64||t.dirtyId<0)&&(t.width=_n86,t.height=_i64,_o40.texImage2D(e.target,0,t.internalFormat,_n86,_i64,0,e.format,t.type,null));}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId;}},{key:"destroyTexture",value:function destroyTexture(e,t){var r=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var _t173=this.managedTextures.indexOf(e);-1!==_t173&&St(this.managedTextures,_t173,1);}}},{key:"updateTextureStyle",value:function updateTextureStyle(e){var _e$resource2;var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==G.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=j.CLAMP,(_e$resource2=e.resource)!==null&&_e$resource2!==void 0&&_e$resource2.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId);}},{key:"setStyle",value:function setStyle(e,t){var r=this.gl;if(t.mipmap&&e.mipmap!==G.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===U.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var _t174=this.renderer.context.extensions.anisotropicFiltering;if(_t174&&e.anisotropicLevel>0&&e.scaleMode===U.LINEAR){var _n87=Math.min(e.anisotropicLevel,r.getParameter(_t174.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,_t174.TEXTURE_MAX_ANISOTROPY_EXT,_n87);}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===U.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===U.LINEAR?r.LINEAR:r.NEAREST);}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return Oi;}();Oi.extension={type:Vt.RendererSystem,name:"texture"},Yt.add(Oi);var ki=/*#__PURE__*/function(){function ki(e){_classCallCheck(this,ki);this.renderer=e;}_createClass(ki,[{key:"contextChange",value:function contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID;}},{key:"bind",value:function bind(e){var t=this.gl,r=this.CONTEXT_UID,n=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n);}},{key:"unbind",value:function unbind(){var e=this.gl;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null);}},{key:"beginTransformFeedback",value:function beginTransformFeedback(e,t){var r=this.gl,n=this.renderer;t&&n.shader.bind(t),r.beginTransformFeedback(e);}},{key:"endTransformFeedback",value:function endTransformFeedback(){var e=this.gl;e.endTransformFeedback();}},{key:"createGLTransformFeedback",value:function createGLTransformFeedback(e){var t=this.gl,r=this.renderer,n=this.CONTEXT_UID,i=t.createTransformFeedback();e._glTransformFeedbacks[n]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(var _i65=0;_i65<e.buffers.length;_i65++){var _o41=e.buffers[_i65];_o41&&(r.buffer.update(_o41),_o41._glBuffers[n].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,_i65,_o41._glBuffers[n].buffer||null));}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i;}},{key:"disposeTransformFeedback",value:function disposeTransformFeedback(e,t){var r=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);var i=this.renderer.buffer;if(i)for(var _r191=0;_r191<e.buffers.length;_r191++){var _n88=e.buffers[_r191];if(!_n88)continue;var _o42=_n88._glBuffers[this.CONTEXT_UID];_o42&&(_o42.refCount--,0===_o42.refCount&&!t&&i.dispose(_n88,t));}r&&(t||n.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID]);}},{key:"destroy",value:function destroy(){this.renderer=null;}}]);return ki;}();ki.extension={type:Vt.RendererSystem,name:"transformFeedback"},Yt.add(ki);var Pi=/*#__PURE__*/function(){function Pi(e){_classCallCheck(this,Pi);this.renderer=e;}_createClass(Pi,[{key:"init",value:function init(e){this.screen=new Ir(0,0,e.width,e.height),this.element=e.view||J.ADAPTER.createCanvas(),this.resolution=e.resolution||J.RESOLUTION,this.autoDensity=!!e.autoDensity;}},{key:"resizeView",value:function resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);var r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width="".concat(r,"px"),this.element.style.height="".concat(n,"px")),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height);}},{key:"destroy",value:function destroy(e){var _this$element$parentN;e&&(_this$element$parentN=this.element.parentNode)!==null&&_this$element$parentN!==void 0&&_this$element$parentN.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null;}}]);return Pi;}();Pi.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Pi.extension={type:[Vt.RendererSystem,Vt.CanvasRendererSystem],name:"_view"},Yt.add(Pi),J.PREFER_ENV=P.WEBGL2,J.STRICT_TEXTURE_CACHE=!1,J.RENDER_OPTIONS=_objectSpread(_objectSpread(_objectSpread(_objectSpread({},mn.defaultOptions),pn.defaultOptions),Pi.defaultOptions),_i.defaultOptions),Object.defineProperties(J,{WRAP_MODE:{get:function get(){return ar.defaultOptions.wrapMode;},set:function set(e){xe("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ar.defaultOptions.wrapMode=e;}},SCALE_MODE:{get:function get(){return ar.defaultOptions.scaleMode;},set:function set(e){xe("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ar.defaultOptions.scaleMode=e;}},MIPMAP_TEXTURES:{get:function get(){return ar.defaultOptions.mipmap;},set:function set(e){xe("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ar.defaultOptions.mipmap=e;}},ANISOTROPIC_LEVEL:{get:function get(){return ar.defaultOptions.anisotropicLevel;},set:function set(e){xe("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ar.defaultOptions.anisotropicLevel=e;}},FILTER_RESOLUTION:{get:function get(){return xe("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),fn.defaultResolution;},set:function set(e){fn.defaultResolution=e;}},FILTER_MULTISAMPLE:{get:function get(){return xe("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),fn.defaultMultisample;},set:function set(e){fn.defaultMultisample=e;}},SPRITE_MAX_TEXTURES:{get:function get(){return cn.defaultMaxTextures;},set:function set(e){xe("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),cn.defaultMaxTextures=e;}},SPRITE_BATCH_SIZE:{get:function get(){return cn.defaultBatchSize;},set:function set(e){xe("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),cn.defaultBatchSize=e;}},CAN_UPLOAD_SAME_BUFFER:{get:function get(){return cn.canUploadSameBuffer;},set:function set(e){xe("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),cn.canUploadSameBuffer=e;}},GC_MODE:{get:function get(){return Ci.defaultMode;},set:function set(e){xe("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ci.defaultMode=e;}},GC_MAX_IDLE:{get:function get(){return Ci.defaultMaxIdle;},set:function set(e){xe("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ci.defaultMaxIdle=e;}},GC_MAX_CHECK_COUNT:{get:function get(){return Ci.defaultCheckCountMax;},set:function set(e){xe("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ci.defaultCheckCountMax=e;}},PRECISION_VERTEX:{get:function get(){return rn.defaultVertexPrecision;},set:function set(e){xe("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),rn.defaultVertexPrecision=e;}},PRECISION_FRAGMENT:{get:function get(){return rn.defaultFragmentPrecision;},set:function set(e){xe("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),rn.defaultFragmentPrecision=e;}}});var $i=function(e){return e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e;}($i||{});var Ri=/*#__PURE__*/function(){function Ri(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;_classCallCheck(this,Ri);this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=n;}_createClass(Ri,[{key:"match",value:function match(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.fn===e&&this.context===t;}},{key:"emit",value:function emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t;}},{key:"connect",value:function connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this;}},{key:"destroy",value:function destroy(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t;}}]);return Ri;}();var Bi=/*#__PURE__*/function(){function e(){var _this57=this;_classCallCheck(this,e);this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ri(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=function(_e372){_this57._requestId=null,_this57.started&&(_this57.update(_e372),_this57.started&&null===_this57._requestId&&_this57._head.next&&(_this57._requestId=requestAnimationFrame(_this57._tick)));};}_createClass(e,[{key:"_requestIfNeeded",value:function _requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick));}},{key:"_cancelIfNeeded",value:function _cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null);}},{key:"_startIfPossible",value:function _startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start();}},{key:"add",value:function add(_e373,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:$i.NORMAL;return this._addListener(new Ri(_e373,t,r));}},{key:"addOnce",value:function addOnce(_e374,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:$i.NORMAL;return this._addListener(new Ri(_e374,t,r,!0));}},{key:"_addListener",value:function _addListener(_e375){var t=this._head.next,r=this._head;if(t){for(;t;){if(_e375.priority>t.priority){_e375.connect(r);break;}r=t,t=t.next;}_e375.previous||_e375.connect(r);}else _e375.connect(r);return this._startIfPossible(),this;}},{key:"remove",value:function remove(_e376,t){var r=this._head.next;for(;r;)r=r.match(_e376,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this;}},{key:"count",get:function get(){if(!this._head)return 0;var _e377=0,t=this._head;for(;t=t.next;)_e377++;return _e377;}},{key:"start",value:function start(){this.started||(this.started=!0,this._requestIfNeeded());}},{key:"stop",value:function stop(){this.started&&(this.started=!1,this._cancelIfNeeded());}},{key:"destroy",value:function destroy(){if(!this._protected){this.stop();var _e378=this._head.next;for(;_e378;)_e378=_e378.destroy(!0);this._head.destroy(),this._head=null;}}},{key:"update",value:function update(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:performance.now();var r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var _e379=t-this._lastFrame|0;if(_e379<this._minElapsedMS)return;this._lastFrame=t-_e379%this._minElapsedMS;}this.deltaMS=r,this.deltaTime=this.deltaMS*e.targetFPMS;var _n89=this._head;var _i66=_n89.next;for(;_i66;)_i66=_i66.emit(this.deltaTime);_n89.next||this._cancelIfNeeded();}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t;}},{key:"FPS",get:function get(){return 1e3/this.elapsedMS;}},{key:"minFPS",get:function get(){return 1e3/this._maxElapsedMS;},set:function set(t){var r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,e.targetFPMS);this._maxElapsedMS=1/n;}},{key:"maxFPS",get:function get(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0;},set:function set(_e380){if(0===_e380)this._minElapsedMS=0;else{var _t175=Math.max(this.minFPS,_e380);this._minElapsedMS=1/(_t175/1e3);}}}],[{key:"shared",get:function get(){if(!e._shared){var _t176=e._shared=new e();_t176.autoStart=!0,_t176._protected=!0;}return e._shared;}},{key:"system",get:function get(){if(!e._system){var _t177=e._system=new e();_t177.autoStart=!0,_t177._protected=!0;}return e._system;}}]);return e;}();Bi.targetFPMS=.06;var Di=Bi;Object.defineProperties(J,{TARGET_FPMS:{get:function get(){return Di.targetFPMS;},set:function set(e){xe("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Di.targetFPMS=e;}}});var Mi=/*#__PURE__*/function(){function Mi(){_classCallCheck(this,Mi);}_createClass(Mi,null,[{key:"init",value:function init(e){var _this58=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,$i.LOW);},get:function get(){return this._ticker;}}),this.stop=function(){_this58._ticker.stop();},this.start=function(){_this58._ticker.start();},this._ticker=null,this.ticker=e.sharedTicker?Di.shared:new Di(),e.autoStart&&this.start();}},{key:"destroy",value:function destroy(){if(this._ticker){var _e381=this._ticker;this.ticker=null,_e381.destroy();}}}]);return Mi;}();Mi.extension=Vt.Application,Yt.add(Mi);var Li=[];function Fi(e){var _iterator45=_createForOfIteratorHelper(Li),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var _t178=_step45.value;if(_t178.test(e))return new _t178(e);}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}throw new Error("Unable to auto-detect a suitable renderer.");}Yt.handleByList(Vt.Renderer,Li);var Ni="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Ui="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";var ji=/*#__PURE__*/function(){function ji(e){_classCallCheck(this,ji);this.renderer=e;}_createClass(ji,[{key:"contextChange",value:function contextChange(e){var t;if(1===this.renderer.context.webGLVersion){var _r192=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,_r192);}else{var _r193=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,_r193);}t>=X.HIGH?this.multisample=X.HIGH:t>=X.MEDIUM?this.multisample=X.MEDIUM:t>=X.LOW?this.multisample=X.LOW:this.multisample=X.NONE;}},{key:"destroy",value:function destroy(){}}]);return ji;}();ji.extension={type:Vt.RendererSystem,name:"_multisample"},Yt.add(ji);var Gi=/*#__PURE__*/_createClass(function Gi(e){_classCallCheck(this,Gi);this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0;});var zi=/*#__PURE__*/function(){function zi(e){_classCallCheck(this,zi);this.renderer=e,this.managedBuffers={},this.boundBufferBases={};}_createClass(zi,[{key:"destroy",value:function destroy(){this.renderer=null;}},{key:"contextChange",value:function contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID;}},{key:"bind",value:function bind(e){var t=this.gl,r=this.CONTEXT_UID,n=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,n.buffer);}},{key:"unbind",value:function unbind(e){var t=this.gl;t.bindBuffer(e,null);}},{key:"bindBufferBase",value:function bindBufferBase(e,t){var r=this.gl,n=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var _i67=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,_i67.buffer);}}},{key:"bindBufferRange",value:function bindBufferRange(e,t,r){var n=this.gl,i=this.CONTEXT_UID;r=r||0;var o=e._glBuffers[i]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,o.buffer,256*r,256);}},{key:"update",value:function update(e){var t=this.gl,r=this.CONTEXT_UID,n=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,t.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var _r194=e["static"]?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,_r194);}}},{key:"dispose",value:function dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),r&&(t||n.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID]);}},{key:"disposeAll",value:function disposeAll(e){var t=Object.keys(this.managedBuffers);for(var _r195=0;_r195<t.length;_r195++)this.dispose(this.managedBuffers[t[_r195]],e);}},{key:"createGLBuffer",value:function createGLBuffer(e){var t=this.CONTEXT_UID,r=this.gl;return e._glBuffers[t]=new Gi(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t];}}]);return zi;}();zi.extension={type:Vt.RendererSystem,name:"buffer"},Yt.add(zi);var Vi=/*#__PURE__*/function(){function Vi(e){_classCallCheck(this,Vi);this.renderer=e;}_createClass(Vi,[{key:"render",value:function render(e,t){var r=this.renderer;var n,i,o,a;if(t&&(n=t.renderTexture,i=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){var _i68;if(n||(this.lastObjectRendered=e),!a){var _t179=e.enableTempParent();e.updateTransform(),e.disableTempParent(_t179);}r.renderTexture.bind(n),r.batch.currentRenderer.start(),((_i68=i)!==null&&_i68!==void 0?_i68:r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),n&&(t.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender");}}},{key:"destroy",value:function destroy(){this.renderer=null,this.lastObjectRendered=null;}}]);return Vi;}();Vi.extension={type:Vt.RendererSystem,name:"objectRenderer"},Yt.add(Vi);var Hi=/*#__PURE__*/function(_Si){_inherits(e,_Si);function e(t){var _this59;_classCallCheck(this,e);_this59=_callSuper(this,e),_this59.type=$.WEBGL,t=Object.assign({},J.RENDER_OPTIONS,t),_this59.gl=null,_this59.CONTEXT_UID=0,_this59.globalUniforms=new on({projectionMatrix:new Er()},!0);var r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:e.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};_this59.setup(r),"useContextAlpha"in t&&(xe("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),_this59._plugin.rendererPlugins=e.__plugins,_this59.options=t,_this59.startup.run(_this59.options);return _this59;}_createClass(e,[{key:"render",value:function render(_e383,t){this.objectRenderer.render(_e383,t);}},{key:"resize",value:function resize(_e384,t){this._view.resizeView(_e384,t);}},{key:"reset",value:function reset(){return this.runners.reset.emit(),this;}},{key:"clear",value:function clear(){this.renderTexture.bind(),this.renderTexture.clear();}},{key:"destroy",value:function destroy(){var _e385=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_e385}),_get(_getPrototypeOf(e.prototype),"destroy",this).call(this);}},{key:"plugins",get:function get(){return this._plugin.plugins;}},{key:"multisample",get:function get(){return this._multisample.multisample;}},{key:"width",get:function get(){return this._view.element.width;}},{key:"height",get:function get(){return this._view.element.height;}},{key:"resolution",get:function get(){return this._view.resolution;},set:function set(_e386){this._view.resolution=_e386,this.runners.resolutionChange.emit(_e386);}},{key:"autoDensity",get:function get(){return this._view.autoDensity;}},{key:"view",get:function get(){return this._view.element;}},{key:"screen",get:function get(){return this._view.screen;}},{key:"lastObjectRendered",get:function get(){return this.objectRenderer.lastObjectRendered;}},{key:"renderingToScreen",get:function get(){return this.objectRenderer.renderingToScreen;}},{key:"rendererLogId",get:function get(){return"WebGL ".concat(this.context.webGLVersion);}},{key:"clearBeforeRender",get:function get(){return xe("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender;}},{key:"useContextAlpha",get:function get(){return xe("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha;}},{key:"preserveDrawingBuffer",get:function get(){return xe("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer;}},{key:"backgroundColor",get:function get(){return xe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color;},set:function set(_e387){xe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_e387;}},{key:"backgroundAlpha",get:function get(){return xe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha;},set:function set(_e388){xe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_e388;}},{key:"powerPreference",get:function get(){return xe("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference;}},{key:"generateTexture",value:function generateTexture(_e389,t){return this.textureGenerator.generateTexture(_e389,t);}}],[{key:"test",value:function test(_e382){return!(_e382!==null&&_e382!==void 0&&_e382.forceCanvas)&&Pe();}}]);return e;}(Si);Hi.extension={type:Vt.Renderer,priority:1},Hi.__plugins={},Hi.__systems={};var Wi=Hi;Yt.handleByMap(Vt.RendererPlugin,Wi.__plugins),Yt.handleByMap(Vt.RendererSystem,Wi.__systems),Yt.add(Wi);var Yi=/*#__PURE__*/function(_rr3){_inherits(Yi,_rr3);function Yi(e,t){var _this60;_classCallCheck(this,Yi);var _ref40=t||{},r=_ref40.width,n=_ref40.height;_this60=_callSuper(this,Yi,[r,n]),_this60.items=[],_this60.itemDirtyIds=[];for(var _t180=0;_t180<e;_t180++){var _e390=new ar();_this60.items.push(_e390),_this60.itemDirtyIds.push(-2);}_this60.length=e,_this60._load=null,_this60.baseTexture=null;return _this60;}_createClass(Yi,[{key:"initFromArray",value:function initFromArray(e,t){for(var _r196=0;_r196<this.length;_r196++)e[_r196]&&(e[_r196].castToBaseTexture?this.addBaseTextureAt(e[_r196].castToBaseTexture(),_r196):e[_r196]instanceof rr?this.addResourceAt(e[_r196],_r196):this.addResourceAt(er(e[_r196],t),_r196));}},{key:"dispose",value:function dispose(){for(var _e391=0,_t181=this.length;_e391<_t181;_e391++)this.items[_e391].destroy();this.items=null,this.itemDirtyIds=null,this._load=null;}},{key:"addResourceAt",value:function addResourceAt(e,t){if(!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this;}},{key:"bind",value:function bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");_get(_getPrototypeOf(Yi.prototype),"bind",this).call(this,e);for(var _t182=0;_t182<this.length;_t182++)this.items[_t182].parentTextureArray=e,this.items[_t182].on("update",e.update,e);}},{key:"unbind",value:function unbind(e){_get(_getPrototypeOf(Yi.prototype),"unbind",this).call(this,e);for(var _t183=0;_t183<this.length;_t183++)this.items[_t183].parentTextureArray=null,this.items[_t183].off("update",e.update,e);}},{key:"load",value:function load(){var _this61=this;if(this._load)return this._load;var e=this.items.map(function(e){return e.resource;}).filter(function(e){return e;}).map(function(e){return e.load();});return this._load=Promise.all(e).then(function(){var _this61$items$=_this61.items[0],e=_this61$items$.realWidth,t=_this61$items$.realHeight;return _this61.resize(e,t),_this61.update(),Promise.resolve(_this61);}),this._load;}}]);return Yi;}(rr);var Ki=/*#__PURE__*/function(_Yi){_inherits(Ki,_Yi);function Ki(e,t){var _this62;_classCallCheck(this,Ki);var _ref41=t||{},r=_ref41.width,n=_ref41.height;var i,o;Array.isArray(e)?(i=e,o=e.length):o=e,_this62=_callSuper(this,Ki,[o,{width:r,height:n}]),i&&_this62.initFromArray(i,t);return _this62;}_createClass(Ki,[{key:"addBaseTextureAt",value:function addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this;}},{key:"bind",value:function bind(e){_get(_getPrototypeOf(Ki.prototype),"bind",this).call(this,e),e.target=L.TEXTURE_2D_ARRAY;}},{key:"upload",value:function upload(e,t,r){var n=this.length,i=this.itemDirtyIds,o=this.items,a=e.gl;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,t.format,r.type,null);for(var _e392=0;_e392<n;_e392++){var _n90=o[_e392];i[_e392]<_n90.dirtyId&&(i[_e392]=_n90.dirtyId,_n90.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,_e392,_n90.resource.width,_n90.resource.height,1,t.format,r.type,_n90.resource.source));}return!0;}}]);return Ki;}(Yi);var Xi=/*#__PURE__*/function(_vn3){_inherits(Xi,_vn3);function Xi(e){_classCallCheck(this,Xi);return _callSuper(this,Xi,[e]);}_createClass(Xi,null,[{key:"test",value:function test(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement;}}]);return Xi;}(vn);var Zi=/*#__PURE__*/function(_Yi2){_inherits(e,_Yi2);function e(t,r){var _this63;_classCallCheck(this,e);var _ref42=r||{},n=_ref42.width,i=_ref42.height,o=_ref42.autoLoad,a=_ref42.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got ".concat(t.length,", expected 6"));_this63=_callSuper(this,e,[6,{width:n,height:i}]);for(var _t184=0;_t184<e.SIDES;_t184++)_this63.items[_t184].target=L.TEXTURE_CUBE_MAP_POSITIVE_X+_t184;_this63.linkBaseTexture=!1!==a,t&&_this63.initFromArray(t,r),!1!==o&&_this63.load();return _this63;}_createClass(e,[{key:"bind",value:function bind(_e393){_get(_getPrototypeOf(e.prototype),"bind",this).call(this,_e393),_e393.target=L.TEXTURE_CUBE_MAP;}},{key:"addBaseTextureAt",value:function addBaseTextureAt(_e394,t,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));if(!this.linkBaseTexture||_e394.parentTextureArray||Object.keys(_e394._glTextures).length>0){if(!_e394.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(_e394.resource,t);}else _e394.target=L.TEXTURE_CUBE_MAP_POSITIVE_X+t,_e394.parentTextureArray=this.baseTexture,this.items[t]=_e394;return _e394.valid&&!this.valid&&this.resize(_e394.realWidth,_e394.realHeight),this.items[t]=_e394,this;}},{key:"upload",value:function upload(t,r,n){var i=this.itemDirtyIds;for(var _o43=0;_o43<e.SIDES;_o43++){var _e395=this.items[_o43];(i[_o43]<_e395.dirtyId||n.dirtyId<r.dirtyId)&&(_e395.valid&&_e395.resource?(_e395.resource.upload(t,_e395,n),i[_o43]=_e395.dirtyId):i[_o43]<-1&&(t.gl.texImage2D(_e395.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[_o43]=-1));}return!0;}}],[{key:"test",value:function test(t){return Array.isArray(t)&&t.length===e.SIDES;}}]);return e;}(Yi);Zi.SIDES=6;var qi=Zi;var Ji=/*#__PURE__*/function(_vn4){_inherits(Ji,_vn4);function Ji(e,t){var _t$crossOrigin,_t$ownsImageBitmap;var _this64;_classCallCheck(this,Ji);var r,n,i;t=t||{},"string"==typeof e?(r=Ji.EMPTY,n=e,i=!0):(r=e,n=null,i=!1),_this64=_callSuper(this,Ji,[r]),_this64.url=n,_this64.crossOrigin=(_t$crossOrigin=t.crossOrigin)!==null&&_t$crossOrigin!==void 0?_t$crossOrigin:!0,_this64.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,_this64.ownsImageBitmap=(_t$ownsImageBitmap=t.ownsImageBitmap)!==null&&_t$ownsImageBitmap!==void 0?_t$ownsImageBitmap:i,_this64._load=null,!1!==t.autoLoad&&_this64.load();return _this64;}_createClass(Ji,[{key:"load",value:function load(){var _this65=this;return this._load||(this._load=new Promise(/*#__PURE__*/function(){var _ref43=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee73(e,t){var _t185,_r197,_n91;return _regeneratorRuntime().wrap(function _callee73$(_context76){while(1)switch(_context76.prev=_context76.next){case 0:if(!(null!==_this65.url)){_context76.next=27;break;}_context76.prev=1;_context76.next=4;return J.ADAPTER.fetch(_this65.url,{mode:_this65.crossOrigin?"cors":"no-cors"});case 4:_t185=_context76.sent;if(!_this65.destroyed){_context76.next=7;break;}return _context76.abrupt("return");case 7:_context76.next=9;return _t185.blob();case 9:_r197=_context76.sent;if(!_this65.destroyed){_context76.next=12;break;}return _context76.abrupt("return");case 12:_context76.next=14;return createImageBitmap(_r197,{premultiplyAlpha:null===_this65.alphaMode||_this65.alphaMode===z.UNPACK?"premultiply":"none"});case 14:_n91=_context76.sent;if(!_this65.destroyed){_context76.next=17;break;}return _context76.abrupt("return",void _n91.close());case 17:_this65.source=_n91,_this65.update(),e(_this65);_context76.next=25;break;case 20:_context76.prev=20;_context76.t0=_context76["catch"](1);if(!_this65.destroyed){_context76.next=24;break;}return _context76.abrupt("return");case 24:t(_context76.t0),_this65.onError.emit(_context76.t0);case 25:_context76.next=28;break;case 27:e(_this65);case 28:case"end":return _context76.stop();}},_callee73,null,[[1,20]]);}));return function(_x96,_x97){return _ref43.apply(this,arguments);};}())),this._load;}},{key:"upload",value:function upload(e,t,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),_get(_getPrototypeOf(Ji.prototype),"upload",this).call(this,e,t,r)):(this.load(),!1);}},{key:"dispose",value:function dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),_get(_getPrototypeOf(Ji.prototype),"dispose",this).call(this),this._load=null;}}],[{key:"test",value:function test(e){return!!globalThis.createImageBitmap&&(typeof ImageBitmap==="undefined"?"undefined":_typeof(ImageBitmap))<"u"&&("string"==typeof e||e instanceof ImageBitmap);}},{key:"EMPTY",get:function get(){var _Ji$_EMPTY;return Ji._EMPTY=(_Ji$_EMPTY=Ji._EMPTY)!==null&&_Ji$_EMPTY!==void 0?_Ji$_EMPTY:J.ADAPTER.createCanvas(0,0),Ji._EMPTY;}}]);return Ji;}(vn);var Qi=/*#__PURE__*/function(_vn5){_inherits(e,_vn5);function e(_e396,t){var _this66;_classCallCheck(this,e);t=t||{},_this66=_callSuper(this,e,[J.ADAPTER.createCanvas()]),_this66._width=0,_this66._height=0,_this66.svg=_e396,_this66.scale=t.scale||1,_this66._overrideWidth=t.width,_this66._overrideHeight=t.height,_this66._resolve=null,_this66._crossorigin=t.crossorigin,_this66._load=null,!1!==t.autoLoad&&_this66.load();return _this66;}_createClass(e,[{key:"load",value:function load(){var _this67=this;return this._load||(this._load=new Promise(function(t){if(_this67._resolve=function(){_this67.update(),t(_this67);},e.SVG_XML.test(_this67.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");_this67.svg="data:image/svg+xml;base64,".concat(btoa(unescape(encodeURIComponent(_this67.svg))));}_this67._loadSvg();})),this._load;}},{key:"_loadSvg",value:function _loadSvg(){var _this68=this;var _e397=new Image();vn.crossOrigin(_e397,this.svg,this._crossorigin),_e397.src=this.svg,_e397.onerror=function(t){_this68._resolve&&(_e397.onerror=null,_this68.onError.emit(t));},_e397.onload=function(){if(!_this68._resolve)return;var t=_e397.width,r=_e397.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=t*_this68.scale,i=r*_this68.scale;(_this68._overrideWidth||_this68._overrideHeight)&&(n=_this68._overrideWidth||_this68._overrideHeight/r*t,i=_this68._overrideHeight||_this68._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);var o=_this68.source;o.width=n,o.height=i,o._pixiId="canvas_".concat(Et()),o.getContext("2d").drawImage(_e397,0,0,t,r,0,0,n,i),_this68._resolve(),_this68._resolve=null;};}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(e.prototype),"dispose",this).call(this),this._resolve=null,this._crossorigin=null;}}],[{key:"getSize",value:function getSize(t){var r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n;}},{key:"test",value:function test(t,r){return"svg"===r||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t);}}]);return e;}(vn);Qi.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Qi.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var eo=Qi;var to=/*#__PURE__*/function(_vn6){_inherits(e,_vn6);function e(t,r){var _this69;_classCallCheck(this,e);if(r=r||{},!(t instanceof HTMLVideoElement)){var _n92=document.createElement("video");!1!==r.autoLoad&&_n92.setAttribute("preload","auto"),!1!==r.playsinline&&(_n92.setAttribute("webkit-playsinline",""),_n92.setAttribute("playsinline","")),!0===r.muted&&(_n92.setAttribute("muted",""),_n92.muted=!0),!0===r.loop&&_n92.setAttribute("loop",""),!1!==r.autoPlay&&_n92.setAttribute("autoplay",""),"string"==typeof t&&(t=[t]);var _i69=t[0].src||t[0];vn.crossOrigin(_n92,_i69,r.crossorigin);for(var _r198=0;_r198<t.length;++_r198){var _i70=document.createElement("source");var _t$_r=t[_r198],_o44=_t$_r.src,_a41=_t$_r.mime;if(_o44=_o44||t[_r198],_o44.startsWith("data:"))_a41=_o44.slice(5,_o44.indexOf(";"));else if(!_o44.startsWith("blob:")){var _t186=_o44.split("?").shift().toLowerCase(),_r199=_t186.slice(_t186.lastIndexOf(".")+1);_a41=_a41||e.MIME_TYPES[_r199]||"video/".concat(_r199);}_i70.src=_o44,_a41&&(_i70.type=_a41),_n92.appendChild(_i70);}t=_n92;}_this69=_callSuper(this,e,[t]),_this69.noSubImage=!0,_this69._autoUpdate=!0,_this69._isConnectedToTicker=!1,_this69._updateFPS=r.updateFPS||0,_this69._msToNextUpdate=0,_this69.autoPlay=!1!==r.autoPlay,_this69._videoFrameRequestCallback=_this69._videoFrameRequestCallback.bind(_assertThisInitialized(_this69)),_this69._videoFrameRequestCallbackHandle=null,_this69._load=null,_this69._resolve=null,_this69._reject=null,_this69._onCanPlay=_this69._onCanPlay.bind(_assertThisInitialized(_this69)),_this69._onError=_this69._onError.bind(_assertThisInitialized(_this69)),_this69._onPlayStart=_this69._onPlayStart.bind(_assertThisInitialized(_this69)),_this69._onPlayStop=_this69._onPlayStop.bind(_assertThisInitialized(_this69)),_this69._onSeeked=_this69._onSeeked.bind(_assertThisInitialized(_this69)),!1!==r.autoLoad&&_this69.load();return _this69;}_createClass(e,[{key:"update",value:function update(){var _e398=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!this.destroyed){if(this._updateFPS){var _e399=Di.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-_e399);}(!this._updateFPS||this._msToNextUpdate<=0)&&(_get(_getPrototypeOf(e.prototype),"update",this).call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0);}}},{key:"_videoFrameRequestCallback",value:function _videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback);}},{key:"load",value:function load(){var _this70=this;if(this._load)return this._load;var _e400=this.source;return(_e400.readyState===_e400.HAVE_ENOUGH_DATA||_e400.readyState===_e400.HAVE_FUTURE_DATA)&&_e400.width&&_e400.height&&(_e400.complete=!0),_e400.addEventListener("play",this._onPlayStart),_e400.addEventListener("pause",this._onPlayStop),_e400.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_e400.addEventListener("canplay",this._onCanPlay),_e400.addEventListener("canplaythrough",this._onCanPlay),_e400.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t,r){_this70.valid?t(_this70):(_this70._resolve=t,_this70._reject=r,_e400.load());}),this._load;}},{key:"_onError",value:function _onError(_e401){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_e401),this._reject&&(this._reject(_e401),this._reject=null,this._resolve=null);}},{key:"_isSourcePlaying",value:function _isSourcePlaying(){var _e402=this.source;return!_e402.paused&&!_e402.ended;}},{key:"_isSourceReady",value:function _isSourceReady(){return this.source.readyState>2;}},{key:"_onPlayStart",value:function _onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate();}},{key:"_onPlayStop",value:function _onPlayStop(){this._configureAutoUpdate();}},{key:"_onSeeked",value:function _onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0);}},{key:"_onCanPlay",value:function _onCanPlay(){var _e403=this.source;_e403.removeEventListener("canplay",this._onCanPlay),_e403.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_e403.play();}},{key:"dispose",value:function dispose(){this._configureAutoUpdate();var _e404=this.source;_e404&&(_e404.removeEventListener("play",this._onPlayStart),_e404.removeEventListener("pause",this._onPlayStop),_e404.removeEventListener("seeked",this._onSeeked),_e404.removeEventListener("canplay",this._onCanPlay),_e404.removeEventListener("canplaythrough",this._onCanPlay),_e404.removeEventListener("error",this._onError,!0),_e404.pause(),_e404.src="",_e404.load()),_get(_getPrototypeOf(e.prototype),"dispose",this).call(this);}},{key:"autoUpdate",get:function get(){return this._autoUpdate;},set:function set(_e405){_e405!==this._autoUpdate&&(this._autoUpdate=_e405,this._configureAutoUpdate());}},{key:"updateFPS",get:function get(){return this._updateFPS;},set:function set(_e406){_e406!==this._updateFPS&&(this._updateFPS=_e406,this._configureAutoUpdate());}},{key:"_configureAutoUpdate",value:function _configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Di.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Di.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Di.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0));}}],[{key:"test",value:function test(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.includes(r);}}]);return e;}(vn);to.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],to.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var ro=to;Qt.push(Ji,xn,Xi,ro,/*#__PURE__*/function(_vn7){_inherits(_class2,_vn7);function _class2(e){_classCallCheck(this,_class2);return _callSuper(this,_class2,[e]);}_createClass(_class2,null,[{key:"test",value:function test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame;}}]);return _class2;}(vn),eo,nr,qi,Ki);var no=/*#__PURE__*/function(){function no(){_classCallCheck(this,no);this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new tr("disposeTransformFeedback");}_createClass(no,[{key:"bindBuffer",value:function bindBuffer(e,t){this.buffers[e]=t;}},{key:"destroy",value:function destroy(){this.disposeRunner.emit(this,!1);}}]);return no;}();var io="7.4.0";var oo=/*#__PURE__*/function(){function oo(){_classCallCheck(this,oo);this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1;}_createClass(oo,[{key:"isEmpty",value:function isEmpty(){return this.minX>this.maxX||this.minY>this.maxY;}},{key:"clear",value:function clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0;}},{key:"getRectangle",value:function getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ir.EMPTY:((e=e||new Ir(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e);}},{key:"addPoint",value:function addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y);}},{key:"addPointMatrix",value:function addPointMatrix(e,t){var r=e.a,n=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=r*t.x+i*t.y+a,l=n*t.x+o*t.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l);}},{key:"addQuad",value:function addQuad(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[2],a=e[3],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[4],a=e[5],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[6],a=e[7],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i;}},{key:"addFrame",value:function addFrame(e,t,r,n,i){this.addFrameMatrix(e.worldTransform,t,r,n,i);}},{key:"addFrameMatrix",value:function addFrameMatrix(e,t,r,n,i){var o=e.a,a=e.b,s=e.c,u=e.d,l=e.tx,h=e.ty;var c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,y=o*t+s*r+l,g=a*t+u*r+h;c=y<c?y:c,d=g<d?g:d,f=y>f?y:f,p=g>p?g:p,y=o*n+s*r+l,g=a*n+u*r+h,c=y<c?y:c,d=g<d?g:d,f=y>f?y:f,p=g>p?g:p,y=o*t+s*i+l,g=a*t+u*i+h,c=y<c?y:c,d=g<d?g:d,f=y>f?y:f,p=g>p?g:p,y=o*n+s*i+l,g=a*n+u*i+h,c=y<c?y:c,d=g<d?g:d,f=y>f?y:f,p=g>p?g:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p;}},{key:"addVertexData",value:function addVertexData(e,t,r){var n=this.minX,i=this.minY,o=this.maxX,a=this.maxY;for(var _s22=t;_s22<r;_s22+=2){var _t187=e[_s22],_r200=e[_s22+1];n=_t187<n?_t187:n,i=_r200<i?_r200:i,o=_t187>o?_t187:o,a=_r200>a?_r200:a;}this.minX=n,this.minY=i,this.maxX=o,this.maxY=a;}},{key:"addVertices",value:function addVertices(e,t,r,n){this.addVerticesMatrix(e.worldTransform,t,r,n);}},{key:"addVerticesMatrix",value:function addVerticesMatrix(e,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:i;var a=e.a,s=e.b,u=e.c,l=e.d,h=e.tx,c=e.ty;var d=this.minX,f=this.minY,p=this.maxX,y=this.maxY;for(var _e407=r;_e407<n;_e407+=2){var _r201=t[_e407],_n93=t[_e407+1],_g2=a*_r201+u*_n93+h,_m2=l*_n93+s*_r201+c;d=Math.min(d,_g2-i),p=Math.max(p,_g2+i),f=Math.min(f,_m2-o),y=Math.max(y,_m2+o);}this.minX=d,this.minY=f,this.maxX=p,this.maxY=y;}},{key:"addBounds",value:function addBounds(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i;}},{key:"addBoundsMask",value:function addBoundsMask(e,t){var r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=o){var _e408=this.minX,_t188=this.minY,_a42=this.maxX,_s23=this.maxY;this.minX=r<_e408?r:_e408,this.minY=n<_t188?n:_t188,this.maxX=i>_a42?i:_a42,this.maxY=o>_s23?o:_s23;}}},{key:"addBoundsMatrix",value:function addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY);}},{key:"addBoundsArea",value:function addBoundsArea(e,t){var r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=o){var _e409=this.minX,_t189=this.minY,_a43=this.maxX,_s24=this.maxY;this.minX=r<_e409?r:_e409,this.minY=n<_t189?n:_t189,this.maxX=i>_a43?i:_a43,this.maxY=o>_s24?o:_s24;}}},{key:"pad",value:function pad(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e;this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t);}},{key:"addFramePad",value:function addFramePad(e,t,r,n,i,o){e-=i,t-=o,r+=i,n+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n;}}]);return oo;}();var ao=/*#__PURE__*/function(_me5){_inherits(ao,_me5);function ao(){var _this71;_classCallCheck(this,ao);_this71=_callSuper(this,ao),_this71.tempDisplayObjectParent=null,_this71.transform=new Nr(),_this71.alpha=1,_this71.visible=!0,_this71.renderable=!0,_this71.cullable=!1,_this71.cullArea=null,_this71.parent=null,_this71.worldAlpha=1,_this71._lastSortedIndex=0,_this71._zIndex=0,_this71.filterArea=null,_this71.filters=null,_this71._enabledFilters=null,_this71._bounds=new oo(),_this71._localBounds=null,_this71._boundsID=0,_this71._boundsRect=null,_this71._localBoundsRect=null,_this71._mask=null,_this71._maskRefCount=0,_this71._destroyed=!1,_this71.isSprite=!1,_this71.isMask=!1;return _this71;}_createClass(ao,[{key:"destroyed",get:function get(){return this._destroyed;}},{key:"_recursivePostUpdateTransform",value:function _recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform);}},{key:"updateTransform",value:function updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;}},{key:"getBounds",value:function getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Ir()),t=this._boundsRect),this._bounds.getRectangle(t);}},{key:"getLocalBounds",value:function getLocalBounds(e){var _r$worldAlpha;e||(this._localBoundsRect||(this._localBoundsRect=new Ir()),e=this._localBoundsRect),this._localBounds||(this._localBounds=new oo());var t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(_r$worldAlpha=r===null||r===void 0?void 0:r.worldAlpha)!==null&&_r$worldAlpha!==void 0?_r$worldAlpha:1,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=n,this._bounds.updateID+=this._boundsID-i,o;}},{key:"toGlobal",value:function toGlobal(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t);}},{key:"toLocal",value:function toLocal(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r);}},{key:"setParent",value:function setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e;}},{key:"removeFromParent",value:function removeFromParent(){var _this$parent;(_this$parent=this.parent)===null||_this$parent===void 0||_this$parent.removeChild(this);}},{key:"setTransform",value:function setTransform(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this;}},{key:"destroy",value:function destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners();}},{key:"_tempDisplayObjectParent",get:function get(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new so()),this.tempDisplayObjectParent;}},{key:"enableTempParent",value:function enableTempParent(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e;}},{key:"disableTempParent",value:function disableTempParent(e){this.parent=e;}},{key:"x",get:function get(){return this.position.x;},set:function set(e){this.transform.position.x=e;}},{key:"y",get:function get(){return this.position.y;},set:function set(e){this.transform.position.y=e;}},{key:"worldTransform",get:function get(){return this.transform.worldTransform;}},{key:"localTransform",get:function get(){return this.transform.localTransform;}},{key:"position",get:function get(){return this.transform.position;},set:function set(e){this.transform.position.copyFrom(e);}},{key:"scale",get:function get(){return this.transform.scale;},set:function set(e){this.transform.scale.copyFrom(e);}},{key:"pivot",get:function get(){return this.transform.pivot;},set:function set(e){this.transform.pivot.copyFrom(e);}},{key:"skew",get:function get(){return this.transform.skew;},set:function set(e){this.transform.skew.copyFrom(e);}},{key:"rotation",get:function get(){return this.transform.rotation;},set:function set(e){this.transform.rotation=e;}},{key:"angle",get:function get(){return this.transform.rotation*wr;},set:function set(e){this.transform.rotation=e*br;}},{key:"zIndex",get:function get(){return this._zIndex;},set:function set(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0));}},{key:"worldVisible",get:function get(){var e=this;do{if(!e.visible)return!1;e=e.parent;}while(e);return!0;}},{key:"mask",get:function get(){return this._mask;},set:function set(e){if(this._mask!==e){if(this._mask){var _e410=this._mask.isMaskData?this._mask.maskObject:this._mask;_e410&&(_e410._maskRefCount--,0===_e410._maskRefCount&&(_e410.renderable=!0,_e410.isMask=!1));}if(this._mask=e,this._mask){var _e411=this._mask.isMaskData?this._mask.maskObject:this._mask;_e411&&(0===_e411._maskRefCount&&(_e411.renderable=!1,_e411.isMask=!0),_e411._maskRefCount++);}}}}],[{key:"mixin",value:function mixin(e){var t=Object.keys(e);for(var _r202=0;_r202<t.length;++_r202){var _n94=t[_r202];Object.defineProperty(ao.prototype,_n94,Object.getOwnPropertyDescriptor(e,_n94));}}}]);return ao;}(me);var so=/*#__PURE__*/function(_ao){_inherits(so,_ao);function so(){var _this72;_classCallCheck(this,so);_this72=_callSuper(this,so,arguments),_this72.sortDirty=null;return _this72;}return _createClass(so);}(ao);ao.prototype.displayObjectUpdateTransform=ao.prototype.updateTransform;var uo=new Er();function lo(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex;}var ho=/*#__PURE__*/function(_ao2){_inherits(e,_ao2);function e(){var _this73;_classCallCheck(this,e);_this73=_callSuper(this,e),_this73.children=[],_this73.sortableChildren=e.defaultSortableChildren,_this73.sortDirty=!1;return _this73;}_createClass(e,[{key:"onChildrenChange",value:function onChildrenChange(_e412){}},{key:"addChild",value:function addChild(){if(arguments.length>1)for(var _t190=0;_t190<arguments.length;_t190++)this.addChild(_t190<0||arguments.length<=_t190?undefined:arguments[_t190]);else{var _t191=arguments.length<=0?undefined:arguments[0];_t191.parent&&_t191.parent.removeChild(_t191),_t191.parent=this,this.sortDirty=!0,_t191.transform._parentID=-1,this.children.push(_t191),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",_t191,this,this.children.length-1),_t191.emit("added",this);}return arguments.length<=0?undefined:arguments[0];}},{key:"addChildAt",value:function addChildAt(_e414,t){if(t<0||t>this.children.length)throw new Error("".concat(_e414,"addChildAt: The index ").concat(t," supplied is out of bounds ").concat(this.children.length));return _e414.parent&&_e414.parent.removeChild(_e414),_e414.parent=this,this.sortDirty=!0,_e414.transform._parentID=-1,this.children.splice(t,0,_e414),this._boundsID++,this.onChildrenChange(t),_e414.emit("added",this),this.emit("childAdded",_e414,this,t),_e414;}},{key:"swapChildren",value:function swapChildren(_e415,t){if(_e415===t)return;var r=this.getChildIndex(_e415),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=_e415,this.onChildrenChange(r<n?r:n);}},{key:"getChildIndex",value:function getChildIndex(_e416){var t=this.children.indexOf(_e416);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t;}},{key:"setChildIndex",value:function setChildIndex(_e417,t){if(t<0||t>=this.children.length)throw new Error("The index ".concat(t," supplied is out of bounds ").concat(this.children.length));var r=this.getChildIndex(_e417);St(this.children,r,1),this.children.splice(t,0,_e417),this.onChildrenChange(t);}},{key:"getChildAt",value:function getChildAt(_e418){if(_e418<0||_e418>=this.children.length)throw new Error("getChildAt: Index (".concat(_e418,") does not exist."));return this.children[_e418];}},{key:"removeChild",value:function removeChild(){if(arguments.length>1)for(var _t192=0;_t192<arguments.length;_t192++)this.removeChild(_t192<0||arguments.length<=_t192?undefined:arguments[_t192]);else{var _t193=arguments.length<=0?undefined:arguments[0],_r203=this.children.indexOf(_t193);if(-1===_r203)return null;_t193.parent=null,_t193.transform._parentID=-1,St(this.children,_r203,1),this._boundsID++,this.onChildrenChange(_r203),_t193.emit("removed",this),this.emit("childRemoved",_t193,this,_r203);}return arguments.length<=0?undefined:arguments[0];}},{key:"removeChildAt",value:function removeChildAt(_e420){var t=this.getChildAt(_e420);return t.parent=null,t.transform._parentID=-1,St(this.children,_e420,1),this._boundsID++,this.onChildrenChange(_e420),t.emit("removed",this),this.emit("childRemoved",t,this,_e420),t;}},{key:"removeChildren",value:function removeChildren(){var _e421=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.children.length;var r=_e421,n=t-r;var i;if(n>0&&n<=t){i=this.children.splice(r,n);for(var _e438=0;_e438<i.length;++_e438)i[_e438].parent=null,i[_e438].transform&&(i[_e438].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_e421);for(var _e439=0;_e439<i.length;++_e439)i[_e439].emit("removed",this),this.emit("childRemoved",i[_e439],this,_e439);return i;}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");}},{key:"sortChildren",value:function sortChildren(){var _e424=!1;for(var _t194=0,_r204=this.children.length;_t194<_r204;++_t194){var _r205=this.children[_t194];_r205._lastSortedIndex=_t194,!_e424&&0!==_r205.zIndex&&(_e424=!0);}_e424&&this.children.length>1&&this.children.sort(lo),this.sortDirty=!1;}},{key:"updateTransform",value:function updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var _e440=0,_t195=this.children.length;_e440<_t195;++_e440){var _t196=this.children[_e440];_t196.visible&&_t196.updateTransform();}}},{key:"calculateBounds",value:function calculateBounds(){this._bounds.clear(),this._calculateBounds();for(var _e441=0;_e441<this.children.length;_e441++){var _t197=this.children[_e441];if(_t197.visible&&_t197.renderable)if(_t197.calculateBounds(),_t197._mask){var _e427=_t197._mask.isMaskData?_t197._mask.maskObject:_t197._mask;_e427?(_e427.calculateBounds(),this._bounds.addBoundsMask(_t197._bounds,_e427._bounds)):this._bounds.addBounds(_t197._bounds);}else _t197.filterArea?this._bounds.addBoundsArea(_t197._bounds,_t197.filterArea):this._bounds.addBounds(_t197._bounds);}this._bounds.updateID=this._boundsID;}},{key:"getLocalBounds",value:function getLocalBounds(_e428){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var r=_get(_getPrototypeOf(e.prototype),"getLocalBounds",this).call(this,_e428);if(!t)for(var _e442=0,_t198=this.children.length;_e442<_t198;++_e442){var _t199=this.children[_e442];_t199.visible&&_t199.updateTransform();}return r;}},{key:"_calculateBounds",value:function _calculateBounds(){}},{key:"_renderWithCulling",value:function _renderWithCulling(t){var r=t.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;var n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0));var o=t.projection.transform;if(o&&(i?(i=uo.copyFrom(i),i.prepend(o)):i=o),n&&r.intersects(n,i))this._render(t);else if(this.cullArea)return;for(var _e443=0,_r206=this.children.length;_e443<_r206;++_e443){var _r207=this.children[_e443],_n95=_r207.cullable;_r207.cullable=_n95||!this.cullArea,_r207.render(t),_r207.cullable=_n95;}}},{key:"render",value:function render(_e431){var _this$filters;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||(_this$filters=this.filters)!==null&&_this$filters!==void 0&&_this$filters.length)this.renderAdvanced(_e431);else if(this.cullable)this._renderWithCulling(_e431);else{this._render(_e431);for(var _t200=0,_r208=this.children.length;_t200<_r208;++_t200)this.children[_t200].render(_e431);}}},{key:"renderAdvanced",value:function renderAdvanced(_e432){var _this$_enabledFilters,_this$_enabledFilters2,_this$_enabledFilters3;var t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var _e444=0;_e444<t.length;_e444++)t[_e444].enabled&&this._enabledFilters.push(t[_e444]);}var n=t&&((_this$_enabledFilters=this._enabledFilters)===null||_this$_enabledFilters===void 0?void 0:_this$_enabledFilters.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Y.NONE));if(n&&_e432.batch.flush(),t&&(_this$_enabledFilters2=this._enabledFilters)!==null&&_this$_enabledFilters2!==void 0&&_this$_enabledFilters2.length&&_e432.filter.push(this,this._enabledFilters),r&&_e432.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_e432);else{this._render(_e432);for(var _t201=0,_r209=this.children.length;_t201<_r209;++_t201)this.children[_t201].render(_e432);}n&&_e432.batch.flush(),r&&_e432.mask.pop(this),t&&((_this$_enabledFilters3=this._enabledFilters)===null||_this$_enabledFilters3===void 0?void 0:_this$_enabledFilters3.length)&&_e432.filter.pop();}},{key:"_render",value:function _render(_e434){}},{key:"destroy",value:function destroy(_e435){_get(_getPrototypeOf(e.prototype),"destroy",this).call(this),this.sortDirty=!1;var t="boolean"==typeof _e435?_e435:_e435===null||_e435===void 0?void 0:_e435.children,r=this.removeChildren(0,this.children.length);if(t)for(var _t202=0;_t202<r.length;++_t202)r[_t202].destroy(_e435);}},{key:"width",get:function get(){return this.scale.x*this.getLocalBounds().width;},set:function set(_e436){var t=this.getLocalBounds().width;this.scale.x=0!==t?_e436/t:1,this._width=_e436;}},{key:"height",get:function get(){return this.scale.y*this.getLocalBounds().height;},set:function set(_e437){var t=this.getLocalBounds().height;this.scale.y=0!==t?_e437/t:1,this._height=_e437;}}]);return e;}(ao);ho.defaultSortableChildren=!1;var co=ho;co.prototype.containerUpdateTransform=co.prototype.updateTransform,Object.defineProperties(J,{SORTABLE_CHILDREN:{get:function get(){return co.defaultSortableChildren;},set:function set(e){xe("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),co.defaultSortableChildren=e;}}});var fo=new xr(),po=new Uint16Array([0,1,2,0,2,3]);var yo=/*#__PURE__*/function(_co){_inherits(yo,_co);function yo(e){var _this74;_classCallCheck(this,yo);_this74=_callSuper(this,yo),_this74._anchor=new Lr(_this74._onAnchorUpdate,_assertThisInitialized(_this74),e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),_this74._texture=null,_this74._width=0,_this74._height=0,_this74._tintColor=new st(16777215),_this74._tintRGB=null,_this74.tint=16777215,_this74.blendMode=B.NORMAL,_this74._cachedTint=16777215,_this74.uvs=null,_this74.texture=e||Sn.EMPTY,_this74.vertexData=new Float32Array(8),_this74.vertexTrimmedData=null,_this74._transformID=-1,_this74._textureID=-1,_this74._transformTrimmedID=-1,_this74._textureTrimmedID=-1,_this74.indices=po,_this74.pluginName="batch",_this74.isSprite=!0,_this74._roundPixels=J.ROUND_PIXELS;return _this74;}_createClass(yo,[{key:"_onTextureUpdate",value:function _onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Tt(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Tt(this.scale.y)*this._height/this._texture.orig.height);}},{key:"_onAnchorUpdate",value:function _onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1;}},{key:"calculateVertices",value:function calculateVertices(){var e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=this.vertexData,l=e.trim,h=e.orig,c=this._anchor;var d=0,f=0,p=0,y=0;if(l?(f=l.x-c._x*h.width,d=f+l.width,y=l.y-c._y*h.height,p=y+l.height):(f=-c._x*h.width,d=f+h.width,y=-c._y*h.height,p=y+h.height),u[0]=r*f+i*y+a,u[1]=o*y+n*f+s,u[2]=r*d+i*y+a,u[3]=o*y+n*d+s,u[4]=r*d+i*p+a,u[5]=o*p+n*d+s,u[6]=r*f+i*p+a,u[7]=o*p+n*f+s,this._roundPixels){var _e445=J.RESOLUTION;for(var _t203=0;_t203<u.length;++_t203)u[_t203]=Math.round(u[_t203]*_e445)/_e445;}}},{key:"calculateTrimmedVertices",value:function calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,r=e.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;if(t[0]=o*c+s*f+l,t[1]=u*f+a*c+h,t[2]=o*d+s*f+l,t[3]=u*f+a*d+h,t[4]=o*d+s*p+l,t[5]=u*p+a*d+h,t[6]=o*c+s*p+l,t[7]=u*p+a*c+h,this._roundPixels){var _e446=J.RESOLUTION;for(var _r210=0;_r210<t.length;++_r210)t[_r210]=Math.round(t[_r210]*_e446)/_e446;}}},{key:"_render",value:function _render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this);}},{key:"_calculateBounds",value:function _calculateBounds(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData));}},{key:"getLocalBounds",value:function getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new oo()),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ir()),e=this._localBoundsRect),this._localBounds.getRectangle(e)):_get(_getPrototypeOf(yo.prototype),"getLocalBounds",this).call(this,e);}},{key:"containsPoint",value:function containsPoint(e){this.worldTransform.applyInverse(e,fo);var t=this._texture.orig.width,r=this._texture.orig.height,n=-t*this.anchor.x;var i=0;return fo.x>=n&&fo.x<n+t&&(i=-r*this.anchor.y,fo.y>=i&&fo.y<i+r);}},{key:"destroy",value:function destroy(e){if(_get(_getPrototypeOf(yo.prototype),"destroy",this).call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e===null||e===void 0?void 0:e.texture){var _t204="boolean"==typeof e?e:e===null||e===void 0?void 0:e.baseTexture;this._texture.destroy(!!_t204);}this._texture=null;}},{key:"roundPixels",get:function get(){return this._roundPixels;},set:function set(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e;}},{key:"width",get:function get(){return Math.abs(this.scale.x)*this._texture.orig.width;},set:function set(e){var t=Tt(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e;}},{key:"height",get:function get(){return Math.abs(this.scale.y)*this._texture.orig.height;},set:function set(e){var t=Tt(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e;}},{key:"anchor",get:function get(){return this._anchor;},set:function set(e){this._anchor.copyFrom(e);}},{key:"tint",get:function get(){return this._tintColor.value;},set:function set(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber();}},{key:"tintValue",get:function get(){return this._tintColor.toNumber();}},{key:"texture",get:function get(){return this._texture;},set:function set(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Sn.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)));}}],[{key:"from",value:function from(e,t){var r=e instanceof Sn?e:Sn.from(e,t);return new yo(r);}}]);return yo;}(co);var go=new Er();ao.prototype._cacheAsBitmap=!1,ao.prototype._cacheData=null,ao.prototype._cacheAsBitmapResolution=null,ao.prototype._cacheAsBitmapMultisample=null;var mo=/*#__PURE__*/_createClass(function mo(){_classCallCheck(this,mo);this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null;});Object.defineProperties(ao.prototype,{cacheAsBitmapResolution:{get:function get(){return this._cacheAsBitmapResolution;},set:function set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0));}},cacheAsBitmapMultisample:{get:function get(){return this._cacheAsBitmapMultisample;},set:function set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0));}},cacheAsBitmap:{get:function get(){return this._cacheAsBitmap;},set:function set(e){if(this._cacheAsBitmap===e)return;var t;this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new mo()),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea);}}}),ao.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e));},ao.prototype._initCachedDisplayObject=function(e){var _this$_cacheData,_this$filters2,_this$cacheAsBitmapMu;if((_this$_cacheData=this._cacheData)!==null&&_this$_cacheData!==void 0&&_this$_cacheData.sprite)return;var t=this.alpha;this.alpha=1,e.batch.flush();var r=this.getLocalBounds(new Ir(),!0);if((_this$filters2=this.filters)!==null&&_this$filters2!==void 0&&_this$filters2.length){var _e447=this.filters[0].padding;r.pad(_e447);}var n=this.cacheAsBitmapResolution||e.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);var i=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),a=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,u=Tn.create({width:r.width,height:r.height,resolution:n,multisample:(_this$cacheAsBitmapMu=this.cacheAsBitmapMultisample)!==null&&_this$cacheAsBitmapMu!==void 0?_this$cacheAsBitmapMu:e.multisample}),l="cacheAsBitmap_".concat(Et());this._cacheData.textureCacheId=l,ar.addToCache(u.baseTexture,l),Sn.addToCache(u,l);var h=this.transform.localTransform.copyTo(go).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:u,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=s,e.renderTexture.bind(i,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;var c=new yo(u);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-r.x/r.width,c.anchor.y=-r.y/r.height,c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c);},ao.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e));},ao.prototype._initCachedDisplayObjectCanvas=function(e){var _this$_cacheData2;if((_this$_cacheData2=this._cacheData)!==null&&_this$_cacheData2!==void 0&&_this$_cacheData2.sprite)return;var t=this.getLocalBounds(new Ir(),!0),r=this.alpha;this.alpha=1;var n=e.canvasContext.activeContext,i=e._projTransform,o=this.cacheAsBitmapResolution||e.resolution;t.ceil(o),t.width=Math.max(t.width,1/o),t.height=Math.max(t.height,1/o);var a=Tn.create({width:t.width,height:t.height,resolution:o}),s="cacheAsBitmap_".concat(Et());this._cacheData.textureCacheId=s,ar.addToCache(a.baseTexture,s),Sn.addToCache(a,s);var u=go;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=t.x,u.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:a,clear:!0,transform:u,skipUpdateTransform:!1}),e.canvasContext.activeContext=n,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var l=new yo(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=r,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l);},ao.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID;},ao.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null);},ao.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ar.removeFromCache(this._cacheData.textureCacheId),Sn.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null;},ao.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e);},ao.prototype.name=null,co.prototype.getChildByName=function(e,t){for(var _t205=0,_r211=this.children.length;_t205<_r211;_t205++)if(this.children[_t205].name===e)return this.children[_t205];if(t)for(var _t206=0,_r212=this.children.length;_t206<_r212;_t206++){var _r213=this.children[_t206];if(!_r213.getChildByName)continue;var _n96=_r213.getChildByName(e,!0);if(_n96)return _n96;}return null;},ao.prototype.getGlobalPosition=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new xr();var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e;};var wo=/*#__PURE__*/function(_fn2){_inherits(wo,_fn2);function wo(){var _this75;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;_classCallCheck(this,wo);_this75=_callSuper(this,wo,[Ni,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}]),_this75.alpha=e;return _this75;}_createClass(wo,[{key:"alpha",get:function get(){return this.uniforms.uAlpha;},set:function set(e){this.uniforms.uAlpha=e;}}]);return wo;}(fn);var bo={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},vo=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var xo=/*#__PURE__*/function(_fn3){_inherits(xo,_fn3);function xo(e){var _this76;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:8;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:fn.defaultResolution;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:5;_classCallCheck(this,xo);var o=function(e,t){var r=Math.ceil(e/2);var n,i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var _t207=0;_t207<e;_t207++){var _e448=n.replace("%index%",_t207.toString());_e448=_e448.replace("%sampleIndex%",_t207-(r-1)+".0"),o+=_e448,o+="\n";}return i=i.replace("%blur%",o),i=i.replace("%size%",e.toString()),i;}(i,e),a=function(e){var t=bo[e],r=t.length;var n,i=vo,o="";for(var _i71=0;_i71<e;_i71++){var _a44="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",_i71.toString());n=_i71,_i71>=r&&(n=e-_i71-1),_a44=_a44.replace("%value%",t[n].toString()),o+=_a44,o+="\n";}return i=i.replace("%blur%",o),i=i.replace("%size%",e.toString()),i;}(i);_this76=_callSuper(this,xo,[o,a]),_this76.horizontal=e,_this76.resolution=n,_this76._quality=0,_this76.quality=r,_this76.blur=t;return _this76;}_createClass(xo,[{key:"apply",value:function apply(e,t,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{var _i72=e.getFilterTexture(),_o45=e.renderer;var _a45=t,_s25=_i72;this.state.blend=!1,e.applyFilter(this,_a45,_s25,V.CLEAR);for(var _t208=1;_t208<this.passes-1;_t208++){e.bindAndClear(_a45,V.BLIT),this.uniforms.uSampler=_s25;var _t209=_s25;_s25=_a45,_a45=_t209,_o45.shader.bind(this),_o45.geometry.draw(5);}this.state.blend=!0,e.applyFilter(this,_s25,r,n),e.returnFilterTexture(_i72);}}},{key:"blur",get:function get(){return this.strength;},set:function set(e){this.padding=1+2*Math.abs(e),this.strength=e;}},{key:"quality",get:function get(){return this._quality;},set:function set(e){this._quality=e,this.passes=e;}}]);return xo;}(fn);var _o=/*#__PURE__*/function(_fn4){_inherits(_o,_fn4);function _o(){var _this77;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:8;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:fn.defaultResolution;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5;_classCallCheck(this,_o);_this77=_callSuper(this,_o),_this77._repeatEdgePixels=!1,_this77.blurXFilter=new xo(!0,e,t,r,n),_this77.blurYFilter=new xo(!1,e,t,r,n),_this77.resolution=r,_this77.quality=t,_this77.blur=e,_this77.repeatEdgePixels=!1;return _this77;}_createClass(_o,[{key:"apply",value:function apply(e,t,r,n){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var _i73=e.getFilterTexture();this.blurXFilter.apply(e,t,_i73,V.CLEAR),this.blurYFilter.apply(e,_i73,r,n),e.returnFilterTexture(_i73);}else o?this.blurYFilter.apply(e,t,r,n):this.blurXFilter.apply(e,t,r,n);}},{key:"updatePadding",value:function updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength));}},{key:"blur",get:function get(){return this.blurXFilter.blur;},set:function set(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding();}},{key:"quality",get:function get(){return this.blurXFilter.quality;},set:function set(e){this.blurXFilter.quality=this.blurYFilter.quality=e;}},{key:"blurX",get:function get(){return this.blurXFilter.blur;},set:function set(e){this.blurXFilter.blur=e,this.updatePadding();}},{key:"blurY",get:function get(){return this.blurYFilter.blur;},set:function set(e){this.blurYFilter.blur=e,this.updatePadding();}},{key:"blendMode",get:function get(){return this.blurYFilter.blendMode;},set:function set(e){this.blurYFilter.blendMode=e;}},{key:"repeatEdgePixels",get:function get(){return this._repeatEdgePixels;},set:function set(e){this._repeatEdgePixels=e,this.updatePadding();}}]);return _o;}(fn);var Io=/*#__PURE__*/function(_fn5){_inherits(Io,_fn5);function Io(){var _this78;_classCallCheck(this,Io);var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};_this78=_callSuper(this,Io,[Ui,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e]),_this78.alpha=1;return _this78;}_createClass(Io,[{key:"_loadMatrix",value:function _loadMatrix(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r;}},{key:"_multiply",value:function _multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e;}},{key:"_colorMatrix",value:function _colorMatrix(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t;}},{key:"brightness",value:function brightness(e,t){var r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t);}},{key:"tint",value:function tint(e,t){var _st$shared$setValue$t=st.shared.setValue(e).toArray(),_st$shared$setValue$t2=_slicedToArray(_st$shared$setValue$t,3),r=_st$shared$setValue$t2[0],n=_st$shared$setValue$t2[1],i=_st$shared$setValue$t2[2],o=[r,0,0,0,0,0,n,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(o,t);}},{key:"greyscale",value:function greyscale(e,t){var r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t);}},{key:"blackAndWhite",value:function blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e);}},{key:"hue",value:function hue(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),n=Math.sin(e),i=1/3,o=(0,Math.sqrt)(i),a=[r+(1-r)*i,i*(1-r)-o*n,i*(1-r)+o*n,0,0,i*(1-r)+o*n,r+i*(1-r),i*(1-r)-o*n,0,0,i*(1-r)-o*n,i*(1-r)+o*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(a,t);}},{key:"contrast",value:function contrast(e,t){var r=(e||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t);}},{key:"saturate",value:function saturate(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1?arguments[1]:undefined;var r=2*e/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t);}},{key:"desaturate",value:function desaturate(){this.saturate(-1);}},{key:"negative",value:function negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e);}},{key:"sepia",value:function sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e);}},{key:"technicolor",value:function technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e);}},{key:"polaroid",value:function polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e);}},{key:"toBGR",value:function toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e);}},{key:"kodachrome",value:function kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e);}},{key:"browni",value:function browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e);}},{key:"vintage",value:function vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e);}},{key:"colorTone",value:function colorTone(e,t,r,n,i){e=e||.2,t=t||.15,r=r||16770432,n=n||3375104;var o=st.shared,_o$setValue$toArray=o.setValue(r).toArray(),_o$setValue$toArray2=_slicedToArray(_o$setValue$toArray,3),a=_o$setValue$toArray2[0],s=_o$setValue$toArray2[1],u=_o$setValue$toArray2[2],_o$setValue$toArray3=o.setValue(n).toArray(),_o$setValue$toArray4=_slicedToArray(_o$setValue$toArray3,3),l=_o$setValue$toArray4[0],h=_o$setValue$toArray4[1],c=_o$setValue$toArray4[2],d=[.3,.59,.11,0,0,a,s,u,e,0,l,h,c,t,0,a-l,s-h,u-c,0,0];this._loadMatrix(d,i);}},{key:"night",value:function night(e,t){var r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t);}},{key:"predator",value:function predator(e,t){var r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t);}},{key:"lsd",value:function lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e);}},{key:"reset",value:function reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1);}},{key:"matrix",get:function get(){return this.uniforms.m;},set:function set(e){this.uniforms.m=e;}},{key:"alpha",get:function get(){return this.uniforms.uAlpha;},set:function set(e){this.uniforms.uAlpha=e;}}]);return Io;}(fn);Io.prototype.grayscale=Io.prototype.greyscale;var Ao=/*#__PURE__*/function(_fn6){_inherits(Ao,_fn6);function Ao(e,t){var _this79;_classCallCheck(this,Ao);var r=new Er();e.renderable=!1,_this79=_callSuper(this,Ao,["attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}]),_this79.maskSprite=e,_this79.maskMatrix=r,null==t&&(t=20),_this79.scale=new xr(t,t);return _this79;}_createClass(Ao,[{key:"apply",value:function apply(e,t,r,n){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),e.applyFilter(this,t,r,n);}},{key:"map",get:function get(){return this.uniforms.mapSampler;},set:function set(e){this.uniforms.mapSampler=e;}}]);return Ao;}(fn);var So=/*#__PURE__*/function(_fn7){_inherits(So,_fn7);function So(){_classCallCheck(this,So);return _callSuper(this,So,["\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n']);}return _createClass(So);}(fn);var To=/*#__PURE__*/function(_fn8){_inherits(To,_fn8);function To(){var _this80;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.5;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Math.random();_classCallCheck(this,To);_this80=_callSuper(this,To,[Ui,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}]),_this80.noise=e,_this80.seed=t;return _this80;}_createClass(To,[{key:"noise",get:function get(){return this.uniforms.uNoise;},set:function set(e){this.uniforms.uNoise=e;}},{key:"seed",get:function get(){return this.uniforms.uSeed;},set:function set(e){this.uniforms.uSeed=e;}}]);return To;}(fn);var Co={AlphaFilter:wo,BlurFilter:_o,BlurFilterPass:xo,ColorMatrixFilter:Io,DisplacementFilter:Ao,FXAAFilter:So,NoiseFilter:To};Object.entries(Co).forEach(function(_ref44){var _ref45=_slicedToArray(_ref44,2),e=_ref45[0],t=_ref45[1];Object.defineProperty(Co,e,{get:function get(){return xe("7.1.0","filters.".concat(e," has moved to ").concat(e)),t;}});});var Eo=new(/*#__PURE__*/function(){function _class3(){_classCallCheck(this,_class3);this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0;}_createClass(_class3,[{key:"init",value:function init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0;}},{key:"pauseUpdate",get:function get(){return this._pauseUpdate;},set:function set(e){this._pauseUpdate=e;}},{key:"addTickerListener",value:function addTickerListener(){this.tickerAdded||!this.domElement||(Di.system.add(this.tickerUpdate,this,$i.INTERACTION),this.tickerAdded=!0);}},{key:"removeTickerListener",value:function removeTickerListener(){this.tickerAdded&&(Di.system.remove(this.tickerUpdate,this),this.tickerAdded=!1);}},{key:"pointerMoved",value:function pointerMoved(){this._didMove=!0;}},{key:"update",value:function update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);var e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}));}},{key:"tickerUpdate",value:function tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update());}}]);return _class3;}())();var Oo=/*#__PURE__*/function(){function Oo(e){_classCallCheck(this,Oo);this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Oo.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new xr(),this.page=new xr(),this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e;}_createClass(Oo,[{key:"layerX",get:function get(){return this.layer.x;}},{key:"layerY",get:function get(){return this.layer.y;}},{key:"pageX",get:function get(){return this.page.x;}},{key:"pageY",get:function get(){return this.page.y;}},{key:"data",get:function get(){return this;}},{key:"composedPath",value:function composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path;}},{key:"initEvent",value:function initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.");}},{key:"initUIEvent",value:function initUIEvent(e,t,r,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.");}},{key:"preventDefault",value:function preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0;}},{key:"stopImmediatePropagation",value:function stopImmediatePropagation(){this.propagationImmediatelyStopped=!0;}},{key:"stopPropagation",value:function stopPropagation(){this.propagationStopped=!0;}}]);return Oo;}();var ko=/*#__PURE__*/function(_Oo){_inherits(ko,_Oo);function ko(){var _this81;_classCallCheck(this,ko);_this81=_callSuper(this,ko,arguments),_this81.client=new xr(),_this81.movement=new xr(),_this81.offset=new xr(),_this81.global=new xr(),_this81.screen=new xr();return _this81;}_createClass(ko,[{key:"clientX",get:function get(){return this.client.x;}},{key:"clientY",get:function get(){return this.client.y;}},{key:"x",get:function get(){return this.clientX;}},{key:"y",get:function get(){return this.clientY;}},{key:"movementX",get:function get(){return this.movement.x;}},{key:"movementY",get:function get(){return this.movement.y;}},{key:"offsetX",get:function get(){return this.offset.x;}},{key:"offsetY",get:function get(){return this.offset.y;}},{key:"globalX",get:function get(){return this.global.x;}},{key:"globalY",get:function get(){return this.global.y;}},{key:"screenX",get:function get(){return this.screen.x;}},{key:"screenY",get:function get(){return this.screen.y;}},{key:"getLocalPosition",value:function getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t);}},{key:"getModifierState",value:function getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e);}},{key:"initMouseEvent",value:function initMouseEvent(e,t,r,n,i,o,a,s,u,l,h,c,d,f,p){throw new Error("Method not implemented.");}}]);return ko;}(Oo);var Po=/*#__PURE__*/function(_ko){_inherits(Po,_ko);function Po(){var _this82;_classCallCheck(this,Po);_this82=_callSuper(this,Po,arguments),_this82.width=0,_this82.height=0,_this82.isPrimary=!1;return _this82;}_createClass(Po,[{key:"getCoalescedEvents",value:function getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[];}},{key:"getPredictedEvents",value:function getPredictedEvents(){throw new Error("getPredictedEvents is not supported!");}}]);return Po;}(ko);var $o=/*#__PURE__*/function(_ko2){_inherits($o,_ko2);function $o(){var _this83;_classCallCheck(this,$o);_this83=_callSuper(this,$o,arguments),_this83.DOM_DELTA_PIXEL=0,_this83.DOM_DELTA_LINE=1,_this83.DOM_DELTA_PAGE=2;return _this83;}return _createClass($o);}(ko);$o.DOM_DELTA_PIXEL=0,$o.DOM_DELTA_LINE=1,$o.DOM_DELTA_PAGE=2;var Ro=new xr(),Bo=new xr();var Do=/*#__PURE__*/function(){function Do(e){_classCallCheck(this,Do);this.dispatch=new me(),this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map(),this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel);}_createClass(Do,[{key:"addEventMapping",value:function addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(function(e,t){return e.priority-t.priority;});}},{key:"dispatchEvent",value:function dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e);}},{key:"mapEvent",value:function mapEvent(e){if(!this.rootTarget)return;var t=this.mappingTable[e.type];if(t)for(var _r214=0,_n97=t.length;_r214<_n97;_r214++)t[_r214].fn(e);else console.warn("[EventBoundary]: Event mapping not defined for ".concat(e.type));}},{key:"hitTest",value:function hitTest(e,t){Eo.pauseUpdate=!0;var r=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,Ro.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0];}},{key:"propagate",value:function propagate(e,t){if(!e.target)return;var r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var _n98=0,_i74=r.length-1;_n98<_i74;_n98++)if(e.currentTarget=r[_n98],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(var _n99=r.length-2;_n99>=0;_n99--)if(e.currentTarget=r[_n99],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;}}},{key:"all",value:function all(e,t){var _this84=this;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this._allInteractiveElements;if(0===r.length)return;e.eventPhase=e.BUBBLING_PHASE;var n=Array.isArray(t)?t:[t];var _loop10=function _loop10(_t210){n.forEach(function(n){e.currentTarget=r[_t210],_this84.notifyTarget(e,n);});};for(var _t210=r.length-1;_t210>=0;_t210--){_loop10(_t210);}}},{key:"propagationPath",value:function propagationPath(e){var t=[e];for(var _r215=0;_r215<2048&&e!==this.rootTarget;_r215++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent;}return t.reverse(),t;}},{key:"hitTestMoveRecursive",value:function hitTestMoveRecursive(e,t,r,n,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:!1;var a=!1;if(this._interactivePrune(e))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(Eo.pauseUpdate=!1),e.interactiveChildren&&e.children){var _s26=e.children;for(var _u18=_s26.length-1;_u18>=0;_u18--){var _l12=_s26[_u18],_h10=this.hitTestMoveRecursive(_l12,this._isInteractive(t)?t:_l12.eventMode,r,n,i,o||i(e,r));if(_h10){if(_h10.length>0&&!_h10[_h10.length-1].parent)continue;var _t211=e.isInteractive();(_h10.length>0||_t211)&&(_t211&&this._allInteractiveElements.push(e),_h10.push(e)),0===this._hitElements.length&&(this._hitElements=_h10),a=!0;}}}var s=this._isInteractive(t),u=e.isInteractive();return s&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:s&&!i(e,r)&&n(e,r)?u?[e]:[]:null;}},{key:"hitTestRecursive",value:function hitTestRecursive(e,t,r,n,i){if(this._interactivePrune(e)||i(e,r))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(Eo.pauseUpdate=!1),e.interactiveChildren&&e.children){var _o46=e.children;for(var _a46=_o46.length-1;_a46>=0;_a46--){var _s27=_o46[_a46],_u19=this.hitTestRecursive(_s27,this._isInteractive(t)?t:_s27.eventMode,r,n,i);if(_u19){if(_u19.length>0&&!_u19[_u19.length-1].parent)continue;var _t212=e.isInteractive();return(_u19.length>0||_t212)&&_u19.push(e),_u19;}}}var o=this._isInteractive(t),a=e.isInteractive();return o&&n(e,r)?a?[e]:[]:null;}},{key:"_isInteractive",value:function _isInteractive(e){return"static"===e||"dynamic"===e;}},{key:"_interactivePrune",value:function _interactivePrune(e){return!(e&&!e.isMask&&e.visible&&e.renderable&&"none"!==e.eventMode&&("passive"!==e.eventMode||e.interactiveChildren)&&!e.isMask);}},{key:"hitPruneFn",value:function hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Bo),!e.hitArea.contains(Bo.x,Bo.y)))return!0;if(e._mask){var _r216$containsPoint;var _r216=e._mask.isMaskData?e._mask.maskObject:e._mask;if(_r216&&!((_r216$containsPoint=_r216.containsPoint)!==null&&_r216$containsPoint!==void 0&&_r216$containsPoint.call(_r216,t)))return!0;}return!1;}},{key:"hitTestFn",value:function hitTestFn(e,t){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(t));}},{key:"notifyTarget",value:function notifyTarget(e,t){var _t213,_e$currentTarget$r,_e$currentTarget;var r="on".concat(t=(_t213=t)!==null&&_t213!==void 0?_t213:e.type);(_e$currentTarget$r=(_e$currentTarget=e.currentTarget)[r])===null||_e$currentTarget$r===void 0||_e$currentTarget$r.call(_e$currentTarget,e);var n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t);}},{key:"mapPointerDown",value:function mapPointerDown(e){if(!(e instanceof Po))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");var t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var _e449=2===t.button;this.dispatchEvent(t,_e449?"rightdown":"mousedown");}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t);}},{key:"mapPointerMove",value:function mapPointerMove(e){var _n$overTargets,_this$enableGlobalMov,_t$target;if(!(e instanceof Po))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;var t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;var r="mouse"===t.pointerType||"pen"===t.pointerType,n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.overTargets);if(((_n$overTargets=n.overTargets)===null||_n$overTargets===void 0?void 0:_n$overTargets.length)>0&&i!==t.target){var _n100="mousemove"===e.type?"mouseout":"pointerout",_o47=this.createPointerEvent(e,_n100,i);if(this.dispatchEvent(_o47,"pointerout"),r&&this.dispatchEvent(_o47,"mouseout"),!t.composedPath().includes(i)){var _n101=this.createPointerEvent(e,"pointerleave",i);for(_n101.eventPhase=_n101.AT_TARGET;_n101.target&&!t.composedPath().includes(_n101.target);)_n101.currentTarget=_n101.target,this.notifyTarget(_n101),r&&this.notifyTarget(_n101,"mouseleave"),_n101.target=_n101.target.parent;this.freeEvent(_n101);}this.freeEvent(_o47);}if(i!==t.target){var _n102="mousemove"===e.type?"mouseover":"pointerover",_o48=this.clonePointerEvent(t,_n102);this.dispatchEvent(_o48,"pointerover"),r&&this.dispatchEvent(_o48,"mouseover");var _a47=i===null||i===void 0?void 0:i.parent;for(;_a47&&_a47!==this.rootTarget.parent&&_a47!==t.target;)_a47=_a47.parent;if(!_a47||_a47===this.rootTarget.parent){var _e450=this.clonePointerEvent(t,"pointerenter");for(_e450.eventPhase=_e450.AT_TARGET;_e450.target&&_e450.target!==i&&_e450.target!==this.rootTarget.parent;)_e450.currentTarget=_e450.target,this.notifyTarget(_e450),r&&this.notifyTarget(_e450,"mouseenter"),_e450.target=_e450.target.parent;this.freeEvent(_e450);}this.freeEvent(_o48);}var o=[],a=(_this$enableGlobalMov=this.enableGlobalMoveEvents)!==null&&_this$enableGlobalMov!==void 0?_this$enableGlobalMov:!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),"touch"===t.pointerType&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(_t$target=t.target)===null||_t$target===void 0?void 0:_t$target.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=t.composedPath(),this.freeEvent(t);}},{key:"mapPointerOver",value:function mapPointerOver(e){var _r$target;if(!(e instanceof Po))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");var t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),n="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=(_r$target=r.target)===null||_r$target===void 0?void 0:_r$target.cursor);var i=this.clonePointerEvent(r,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(i);}},{key:"mapPointerOut",value:function mapPointerOut(e){if(!(e instanceof Po))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");var t=this.trackingData(e.pointerId);if(t.overTargets){var _r217="mouse"===e.pointerType||"pen"===e.pointerType,_n103=this.findMountedTarget(t.overTargets),_i75=this.createPointerEvent(e,"pointerout",_n103);this.dispatchEvent(_i75),_r217&&this.dispatchEvent(_i75,"mouseout");var _o49=this.createPointerEvent(e,"pointerleave",_n103);for(_o49.eventPhase=_o49.AT_TARGET;_o49.target&&_o49.target!==this.rootTarget.parent;)_o49.currentTarget=_o49.target,this.notifyTarget(_o49),_r217&&this.notifyTarget(_o49,"mouseleave"),_o49.target=_o49.target.parent;t.overTargets=null,this.freeEvent(_i75),this.freeEvent(_o49);}this.cursor=null;}},{key:"mapPointerUp",value:function mapPointerUp(e){if(!(e instanceof Po))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");var t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){var _e451=2===r.button;this.dispatchEvent(r,_e451?"rightup":"mouseup");}var n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[e.button]);var o=i;if(i&&!r.composedPath().includes(i)){var _t214=i;for(;_t214&&!r.composedPath().includes(_t214);){if(r.currentTarget=_t214,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){var _e452=2===r.button;this.notifyTarget(r,_e452?"rightupoutside":"mouseupoutside");}_t214=_t214.parent;}delete n.pressTargetsByButton[e.button],o=_t214;}if(o){var _i76=this.clonePointerEvent(r,"click");_i76.target=o,_i76.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:_i76.target,timeStamp:t});var _a48=n.clicksByButton[e.button];if(_a48.target===_i76.target&&t-_a48.timeStamp<200?++_a48.clickCount:_a48.clickCount=1,_a48.target=_i76.target,_a48.timeStamp=t,_i76.detail=_a48.clickCount,"mouse"===_i76.pointerType){var _e453=2===_i76.button;this.dispatchEvent(_i76,_e453?"rightclick":"click");}else"touch"===_i76.pointerType&&this.dispatchEvent(_i76,"tap");this.dispatchEvent(_i76,"pointertap"),this.freeEvent(_i76);}this.freeEvent(r);}},{key:"mapPointerUpOutside",value:function mapPointerUpOutside(e){if(!(e instanceof Po))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");var t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(r){var _i77=r;for(;_i77;)n.currentTarget=_i77,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):("mouse"===n.pointerType||"pen"===n.pointerType)&&this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),_i77=_i77.parent;delete t.pressTargetsByButton[e.button];}this.freeEvent(n);}},{key:"mapWheel",value:function mapWheel(e){if(!(e instanceof $o))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");var t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t);}},{key:"findMountedTarget",value:function findMountedTarget(e){if(!e)return null;var t=e[0];for(var _r218=1;_r218<e.length&&e[_r218].parent===t;_r218++)t=e[_r218];return t;}},{key:"createPointerEvent",value:function createPointerEvent(e,t,r){var _ref46;var n=this.allocateEvent(Po);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=(_ref46=r!==null&&r!==void 0?r:this.hitTest(n.global.x,n.global.y))!==null&&_ref46!==void 0?_ref46:this._hitElements[0],"string"==typeof t&&(n.type=t),n;}},{key:"createWheelEvent",value:function createWheelEvent(e){var t=this.allocateEvent($o);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t;}},{key:"clonePointerEvent",value:function clonePointerEvent(e,t){var r=this.allocateEvent(Po);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t!==null&&t!==void 0?t:r.type,r;}},{key:"copyWheelData",value:function copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;}},{key:"copyPointerData",value:function copyPointerData(e,t){e instanceof Po&&t instanceof Po&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist);}},{key:"copyMouseData",value:function copyMouseData(e,t){e instanceof ko&&t instanceof ko&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global));}},{key:"copyData",value:function copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page);}},{key:"trackingData",value:function trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e];}},{key:"allocateEvent",value:function allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t;}},{key:"freeEvent",value:function freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e);}},{key:"notifyListeners",value:function notifyListeners(e,t){var r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(var _n104=0,_i78=r.length;_n104<_i78&&!e.propagationImmediatelyStopped;_n104++)r[_n104].once&&e.currentTarget.removeListener(t,r[_n104].fn,void 0,!0),r[_n104].fn.call(r[_n104].context,e);}}]);return Do;}();var Mo={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Lo=/*#__PURE__*/function(){function e(t){var _this85=this;_classCallCheck(this,e);this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Do(null),Eo.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Po(null),this.rootWheelEvent=new $o(null),this.cursorStyles={"default":"inherit",pointer:"pointer"},this.features=new Proxy(_objectSpread({},e.defaultEventFeatures),{set:function set(_e454,t,r){return"globalMove"===t&&(_this85.rootBoundary.enableGlobalMoveEvents=r),_e454[t]=r,!0;}}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this);}_createClass(e,[{key:"init",value:function init(t){var _t$eventMode,_t$eventFeatures;var _this$renderer5=this.renderer,r=_this$renderer5.view,n=_this$renderer5.resolution;this.setTargetElement(r),this.resolution=n,e._defaultEventMode=(_t$eventMode=t.eventMode)!==null&&_t$eventMode!==void 0?_t$eventMode:"auto",Object.assign(this.features,(_t$eventFeatures=t.eventFeatures)!==null&&_t$eventFeatures!==void 0?_t$eventFeatures:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove;}},{key:"resolutionChange",value:function resolutionChange(_e455){this.resolution=_e455;}},{key:"destroy",value:function destroy(){this.setTargetElement(null),this.renderer=null;}},{key:"setCursor",value:function setCursor(_e456){_e456=_e456||"default";var t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===_e456)return;this.currentCursor=_e456;var r=this.cursorStyles[_e456];if(r)switch(_typeof(r)){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(_e456);break;case"object":t&&Object.assign(this.domElement.style,r);}else t&&"string"==typeof _e456&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_e456)&&(this.domElement.style.cursor=_e456);}},{key:"pointer",get:function get(){return this.rootPointerEvent;}},{key:"onPointerDown",value:function onPointerDown(_e457){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;var t=this.normalizeToPointerData(_e457);this.autoPreventDefault&&t[0].isNormalized&&(_e457.cancelable||!("cancelable"in _e457))&&_e457.preventDefault();for(var _e474=0,_r219=t.length;_e474<_r219;_e474++){var _r220=t[_e474],_n105=this.bootstrapEvent(this.rootPointerEvent,_r220);this.rootBoundary.mapEvent(_n105);}this.setCursor(this.rootBoundary.cursor);}},{key:"onPointerMove",value:function onPointerMove(_e459){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Eo.pointerMoved();var t=this.normalizeToPointerData(_e459);for(var _e475=0,_r221=t.length;_e475<_r221;_e475++){var _r222=this.bootstrapEvent(this.rootPointerEvent,t[_e475]);this.rootBoundary.mapEvent(_r222);}this.setCursor(this.rootBoundary.cursor);}},{key:"onPointerUp",value:function onPointerUp(_e461){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;var t=_e461.target;_e461.composedPath&&_e461.composedPath().length>0&&(t=_e461.composedPath()[0]);var r=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(_e461);for(var _e476=0,_t215=n.length;_e476<_t215;_e476++){var _t216=this.bootstrapEvent(this.rootPointerEvent,n[_e476]);_t216.type+=r,this.rootBoundary.mapEvent(_t216);}this.setCursor(this.rootBoundary.cursor);}},{key:"onPointerOverOut",value:function onPointerOverOut(_e463){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;var t=this.normalizeToPointerData(_e463);for(var _e477=0,_r223=t.length;_e477<_r223;_e477++){var _r224=this.bootstrapEvent(this.rootPointerEvent,t[_e477]);this.rootBoundary.mapEvent(_r224);}this.setCursor(this.rootBoundary.cursor);}},{key:"onWheel",value:function onWheel(_e465){if(!this.features.wheel)return;var t=this.normalizeWheelEvent(_e465);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t);}},{key:"setTargetElement",value:function setTargetElement(_e466){this.removeEvents(),this.domElement=_e466,Eo.domElement=_e466,this.addEvents();}},{key:"addEvents",value:function addEvents(){if(this.eventsAdded||!this.domElement)return;Eo.addTickerListener();var _e467=this.domElement.style;_e467&&(globalThis.navigator.msPointerEnabled?(_e467.msContentZooming="none",_e467.msTouchAction="none"):this.supportsPointerEvents&&(_e467.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0;}},{key:"removeEvents",value:function removeEvents(){if(!this.eventsAdded||!this.domElement)return;Eo.removeTickerListener();var _e468=this.domElement.style;globalThis.navigator.msPointerEnabled?(_e468.msContentZooming="",_e468.msTouchAction=""):this.supportsPointerEvents&&(_e468.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1;}},{key:"mapPositionToPoint",value:function mapPositionToPoint(_e469,t,r){var n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},i=1/this.resolution;_e469.x=(t-n.left)*(this.domElement.width/n.width)*i,_e469.y=(r-n.top)*(this.domElement.height/n.height)*i;}},{key:"normalizeToPointerData",value:function normalizeToPointerData(_e470){var t=[];if(this.supportsTouchEvents&&_e470 instanceof TouchEvent)for(var _r225=0,_n106=_e470.changedTouches.length;_r225<_n106;_r225++){var _n107=_e470.changedTouches[_r225];_typeof(_n107.button)>"u"&&(_n107.button=0),_typeof(_n107.buttons)>"u"&&(_n107.buttons=1),_typeof(_n107.isPrimary)>"u"&&(_n107.isPrimary=1===_e470.touches.length&&"touchstart"===_e470.type),_typeof(_n107.width)>"u"&&(_n107.width=_n107.radiusX||1),_typeof(_n107.height)>"u"&&(_n107.height=_n107.radiusY||1),_typeof(_n107.tiltX)>"u"&&(_n107.tiltX=0),_typeof(_n107.tiltY)>"u"&&(_n107.tiltY=0),_typeof(_n107.pointerType)>"u"&&(_n107.pointerType="touch"),_typeof(_n107.pointerId)>"u"&&(_n107.pointerId=_n107.identifier||0),_typeof(_n107.pressure)>"u"&&(_n107.pressure=_n107.force||.5),_typeof(_n107.twist)>"u"&&(_n107.twist=0),_typeof(_n107.tangentialPressure)>"u"&&(_n107.tangentialPressure=0),_typeof(_n107.layerX)>"u"&&(_n107.layerX=_n107.offsetX=_n107.clientX),_typeof(_n107.layerY)>"u"&&(_n107.layerY=_n107.offsetY=_n107.clientY),_n107.isNormalized=!0,_n107.type=_e470.type,t.push(_n107);}else if(globalThis.MouseEvent&&(!(_e470 instanceof MouseEvent)||this.supportsPointerEvents&&_e470 instanceof globalThis.PointerEvent))t.push(_e470);else{var _r226=_e470;_typeof(_r226.isPrimary)>"u"&&(_r226.isPrimary=!0),_typeof(_r226.width)>"u"&&(_r226.width=1),_typeof(_r226.height)>"u"&&(_r226.height=1),_typeof(_r226.tiltX)>"u"&&(_r226.tiltX=0),_typeof(_r226.tiltY)>"u"&&(_r226.tiltY=0),_typeof(_r226.pointerType)>"u"&&(_r226.pointerType="mouse"),_typeof(_r226.pointerId)>"u"&&(_r226.pointerId=1),_typeof(_r226.pressure)>"u"&&(_r226.pressure=.5),_typeof(_r226.twist)>"u"&&(_r226.twist=0),_typeof(_r226.tangentialPressure)>"u"&&(_r226.tangentialPressure=0),_r226.isNormalized=!0,t.push(_r226);}return t;}},{key:"normalizeWheelEvent",value:function normalizeWheelEvent(_e471){var t=this.rootWheelEvent;return this.transferMouseData(t,_e471),t.deltaX=_e471.deltaX,t.deltaY=_e471.deltaY,t.deltaZ=_e471.deltaZ,t.deltaMode=_e471.deltaMode,this.mapPositionToPoint(t.screen,_e471.clientX,_e471.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=_e471,t.type=_e471.type,t;}},{key:"bootstrapEvent",value:function bootstrapEvent(_e472,t){return _e472.originalEvent=null,_e472.nativeEvent=t,_e472.pointerId=t.pointerId,_e472.width=t.width,_e472.height=t.height,_e472.isPrimary=t.isPrimary,_e472.pointerType=t.pointerType,_e472.pressure=t.pressure,_e472.tangentialPressure=t.tangentialPressure,_e472.tiltX=t.tiltX,_e472.tiltY=t.tiltY,_e472.twist=t.twist,this.transferMouseData(_e472,t),this.mapPositionToPoint(_e472.screen,t.clientX,t.clientY),_e472.global.copyFrom(_e472.screen),_e472.offset.copyFrom(_e472.screen),_e472.isTrusted=t.isTrusted,"pointerleave"===_e472.type&&(_e472.type="pointerout"),_e472.type.startsWith("mouse")&&(_e472.type=_e472.type.replace("mouse","pointer")),_e472.type.startsWith("touch")&&(_e472.type=Mo[_e472.type]||_e472.type),_e472;}},{key:"transferMouseData",value:function transferMouseData(_e473,t){_e473.isTrusted=t.isTrusted,_e473.srcElement=t.srcElement,_e473.timeStamp=performance.now(),_e473.type=t.type,_e473.altKey=t.altKey,_e473.button=t.button,_e473.buttons=t.buttons,_e473.client.x=t.clientX,_e473.client.y=t.clientY,_e473.ctrlKey=t.ctrlKey,_e473.metaKey=t.metaKey,_e473.movement.x=t.movementX,_e473.movement.y=t.movementY,_e473.page.x=t.pageX,_e473.page.y=t.pageY,_e473.relatedTarget=null,_e473.shiftKey=t.shiftKey;}}],[{key:"defaultEventMode",get:function get(){return this._defaultEventMode;}}]);return e;}();Lo.extension={name:"events",type:[Vt.RendererSystem,Vt.CanvasRendererSystem]},Lo.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var Fo=Lo;function No(e){return"dynamic"===e||"static"===e;}Yt.add(Fo);var Uo={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var _this$_internalIntera;return(_this$_internalIntera=this._internalInteractive)!==null&&_this$_internalIntera!==void 0?_this$_internalIntera:No(Fo.defaultEventMode);},set interactive(e){xe("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto";},_internalEventMode:void 0,get eventMode(){var _this$_internalEventM;return(_this$_internalEventM=this._internalEventMode)!==null&&_this$_internalEventM!==void 0?_this$_internalEventM:Fo.defaultEventMode;},set eventMode(e){this._internalInteractive=No(e),this._internalEventMode=e;},isInteractive:function isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode;},interactiveChildren:!0,hitArea:null,addEventListener:function addEventListener(e,t,r){var n="boolean"==typeof r&&r||"object"==_typeof(r)&&r.capture,i="object"==_typeof(r)?r.signal:void 0,o="object"==_typeof(r)&&!0===r.once,a="function"==typeof t?void 0:t;e=n?"".concat(e,"capture"):e;var s="function"==typeof t?t:t.handleEvent,u=this;i&&i.addEventListener("abort",function(){u.off(e,s,a);}),o?u.once(e,s,a):u.on(e,s,a);},removeEventListener:function removeEventListener(e,t,r){var n="function"==typeof t?void 0:t;e="boolean"==typeof r&&r||"object"==_typeof(r)&&r.capture?"".concat(e,"capture"):e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,n);},dispatchEvent:function dispatchEvent(e){if(!(e instanceof Oo))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented;}};ao.mixin(Uo);var jo={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ao.mixin(jo);var Go=/*#__PURE__*/function(){function Go(e){_classCallCheck(this,Go);this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ge.tablet||ge.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1);}_createClass(Go,[{key:"isActive",get:function get(){return this._isActive;}},{key:"isMobileAccessibility",get:function get(){return this._isMobileAccessibility;}},{key:"createTouchHook",value:function createTouchHook(){var _this86=this;var e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){_this86._isMobileAccessibility=!0,_this86.activate(),_this86.destroyTouchHook();}),document.body.appendChild(e),this._hookDiv=e;}},{key:"destroyTouchHook",value:function destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null);}},{key:"activate",value:function activate(){var _this$renderer$view$p;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(_this$renderer$view$p=this.renderer.view.parentNode)===null||_this$renderer$view$p===void 0?void 0:_this$renderer$view$p.appendChild(this.div));}},{key:"deactivate",value:function deactivate(){var _this$div$parentNode;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(_this$div$parentNode=this.div.parentNode)===null||_this$div$parentNode===void 0?void 0:_this$div$parentNode.removeChild(this.div));}},{key:"updateAccessibleObjects",value:function updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var _e478=0;_e478<t.length;_e478++)this.updateAccessibleObjects(t[_e478]);}},{key:"update",value:function update(){var e=performance.now();if(ge.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);var _this$renderer$view$g=this.renderer.view.getBoundingClientRect(),t=_this$renderer$view$g.x,r=_this$renderer$view$g.y,n=_this$renderer$view$g.width,i=_this$renderer$view$g.height,_this$renderer6=this.renderer,o=_this$renderer6.width,a=_this$renderer6.height,s=_this$renderer6.resolution,u=n/o*s,l=i/a*s;var h=this.div;h.style.left="".concat(t,"px"),h.style.top="".concat(r,"px"),h.style.width="".concat(o,"px"),h.style.height="".concat(a,"px");for(var _e479=0;_e479<this.children.length;_e479++){var _t217=this.children[_e479];if(_t217.renderId!==this.renderId)_t217._accessibleActive=!1,St(this.children,_e479,1),this.div.removeChild(_t217._accessibleDiv),this.pool.push(_t217._accessibleDiv),_t217._accessibleDiv=null,_e479--;else{h=_t217._accessibleDiv;var _e480=_t217.hitArea;var _r227=_t217.worldTransform;_t217.hitArea?(h.style.left=(_r227.tx+_e480.x*_r227.a)*u+"px",h.style.top=(_r227.ty+_e480.y*_r227.d)*l+"px",h.style.width=_e480.width*_r227.a*u+"px",h.style.height=_e480.height*_r227.d*l+"px"):(_e480=_t217.getBounds(),this.capHitArea(_e480),h.style.left=_e480.x*u+"px",h.style.top=_e480.y*l+"px",h.style.width=_e480.width*u+"px",h.style.height=_e480.height*l+"px",h.title!==_t217.accessibleTitle&&null!==_t217.accessibleTitle&&(h.title=_t217.accessibleTitle),h.getAttribute("aria-label")!==_t217.accessibleHint&&null!==_t217.accessibleHint&&h.setAttribute("aria-label",_t217.accessibleHint)),(_t217.accessibleTitle!==h.title||_t217.tabIndex!==h.tabIndex)&&(h.title=_t217.accessibleTitle,h.tabIndex=_t217.tabIndex,this.debug&&this.updateDebugHTML(h));}}this.renderId++;}},{key:"updateDebugHTML",value:function updateDebugHTML(e){e.innerHTML="type: ".concat(e.type,"</br> title : ").concat(e.title,"</br> tabIndex: ").concat(e.tabIndex);}},{key:"capHitArea",value:function capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var _this$renderer7=this.renderer,t=_this$renderer7.width,r=_this$renderer7.height;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y);}},{key:"addChild",value:function addChild(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject ".concat(e.tabIndex)),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex;}},{key:"_dispatchEvent",value:function _dispatchEvent(e,t){var r=e.target.displayObject,n=this.renderer.events.rootBoundary,i=Object.assign(new Oo(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,t.forEach(function(e){return n.dispatchEvent(i,e);});}},{key:"_onClick",value:function _onClick(e){this._dispatchEvent(e,["click","pointertap","tap"]);}},{key:"_onFocus",value:function _onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"]);}},{key:"_onFocusOut",value:function _onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"]);}},{key:"_onKeyDown",value:function _onKeyDown(e){9===e.keyCode&&this.activate();}},{key:"_onMouseMove",value:function _onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate();}},{key:"destroy",value:function destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null;}}]);return Go;}();Go.extension={name:"accessibility",type:[Vt.RendererPlugin,Vt.CanvasRendererPlugin]},Yt.add(Go);var zo=/*#__PURE__*/function(){function e(t){var _this87=this;_classCallCheck(this,e);this.stage=new co(),t=Object.assign({forceCanvas:!1},t),this.renderer=Fi(t),e._plugins.forEach(function(_e481){_e481.init.call(_this87,t);});}_createClass(e,[{key:"render",value:function render(){this.renderer.render(this.stage);}},{key:"view",get:function get(){var _this$renderer8;return(_this$renderer8=this.renderer)===null||_this$renderer8===void 0?void 0:_this$renderer8.view;}},{key:"screen",get:function get(){var _this$renderer9;return(_this$renderer9=this.renderer)===null||_this$renderer9===void 0?void 0:_this$renderer9.screen;}},{key:"destroy",value:function destroy(t,r){var _this88=this;var n=e._plugins.slice(0);n.reverse(),n.forEach(function(_e482){_e482.destroy.call(_this88);}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null;}}]);return e;}();zo._plugins=[];var Vo=zo;Yt.handleByList(Vt.Application,Vo._plugins);var Ho=/*#__PURE__*/function(){function Ho(){_classCallCheck(this,Ho);}_createClass(Ho,null,[{key:"init",value:function init(e){var _this89=this;Object.defineProperty(this,"resizeTo",{set:function set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize());},get:function get(){return this._resizeTo;}}),this.queueResize=function(){_this89._resizeTo&&(_this89.cancelResize(),_this89._resizeId=requestAnimationFrame(function(){return _this89.resize();}));},this.cancelResize=function(){_this89._resizeId&&(cancelAnimationFrame(_this89._resizeId),_this89._resizeId=null);},this.resize=function(){if(!_this89._resizeTo)return;var e,t;if(_this89.cancelResize(),_this89._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{var _this89$_resizeTo=_this89._resizeTo,_r228=_this89$_resizeTo.clientWidth,_n108=_this89$_resizeTo.clientHeight;e=_r228,t=_n108;}_this89.renderer.resize(e,t),_this89.render();},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null;}},{key:"destroy",value:function destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null;}}]);return Ho;}();Ho.extension=Vt.Application,Yt.add(Ho);var Wo={loader:Vt.LoadParser,resolver:Vt.ResolveParser,cache:Vt.CacheParser,detection:Vt.DetectionParser};Yt.handle(Vt.Asset,function(e){var t=e.ref;Object.entries(Wo).filter(function(_ref47){var _ref48=_slicedToArray(_ref47,1),e=_ref48[0];return!!t[e];}).forEach(function(_ref49){var _t$e$extension;var _ref50=_slicedToArray(_ref49,2),e=_ref50[0],r=_ref50[1];return Yt.add(Object.assign(t[e],{extension:(_t$e$extension=t[e].extension)!==null&&_t$e$extension!==void 0?_t$e$extension:r}));});},function(e){var t=e.ref;Object.keys(Wo).filter(function(e){return!!t[e];}).forEach(function(e){return Yt.remove(t[e]);});});var Yo=/*#__PURE__*/function(){function Yo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;_classCallCheck(this,Yo);this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t;}_createClass(Yo,[{key:"add",value:function add(e){var _this90=this;e.forEach(function(e){_this90._assetList.push(e);}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next();}},{key:"_next",value:function(){var _next2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee74(){var _e483,_t218,_r229;return _regeneratorRuntime().wrap(function _callee74$(_context77){while(1)switch(_context77.prev=_context77.next){case 0:if(!(this._assetList.length&&this._isActive)){_context77.next=8;break;}this._isLoading=!0;_e483=[],_t218=Math.min(this._assetList.length,this._maxConcurrent);for(_r229=0;_r229<_t218;_r229++)_e483.push(this._assetList.pop());_context77.next=6;return this._loader.load(_e483);case 6:this._isLoading=!1;this._next();case 8:case"end":return _context77.stop();}},_callee74,this);}));function _next(){return _next2.apply(this,arguments);}return _next;}()},{key:"active",get:function get(){return this._isActive;},set:function set(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next());}}]);return Yo;}();function Ko(e,t){var r=e.split("?")[0],n=Se.extname(r).toLowerCase();return Array.isArray(t)?t.includes(n):n===t;}var Xo=function Xo(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;return Array.isArray(e)||(e=[e]),t?e.map(function(e){return"string"==typeof e||r?t(e):e;}):e;};var Zo=new(/*#__PURE__*/function(){function _class4(){_classCallCheck(this,_class4);this._parsers=[],this._cache=new Map(),this._cacheMap=new Map();}_createClass(_class4,[{key:"reset",value:function reset(){this._cacheMap.clear(),this._cache.clear();}},{key:"has",value:function has(e){return this._cache.has(e);}},{key:"get",value:function get(e){var t=this._cache.get(e);return t||console.warn("[Assets] Asset id ".concat(e," was not found in the Cache")),t;}},{key:"set",value:function set(e,t){var _this91=this;var r=Xo(e);var n;for(var _e484=0;_e484<this.parsers.length;_e484++){var _i79=this.parsers[_e484];if(_i79.test(t)){n=_i79.getCacheableAssets(r,t);break;}}n||(n={},r.forEach(function(e){n[e]=t;}));var i=Object.keys(n),o={cacheKeys:i,keys:r};if(r.forEach(function(e){_this91._cacheMap.set(e,o);}),i.forEach(function(e){_this91._cache.has(e)&&_this91._cache.get(e)!==t&&console.warn("[Cache] already has key:",e),_this91._cache.set(e,n[e]);}),t instanceof Sn){var _e485=t;r.forEach(function(t){_e485.baseTexture!==Sn.EMPTY.baseTexture&&ar.addToCache(_e485.baseTexture,t),Sn.addToCache(_e485,t);});}}},{key:"remove",value:function remove(e){var _this92=this;if(!this._cacheMap.has(e))return void console.warn("[Assets] Asset id ".concat(e," was not found in the Cache"));var t=this._cacheMap.get(e);t.cacheKeys.forEach(function(e){_this92._cache["delete"](e);}),t.keys.forEach(function(e){_this92._cacheMap["delete"](e);});}},{key:"parsers",get:function get(){return this._parsers;}}]);return _class4;}())(),qo=function qo(e){return!Array.isArray(e);};var Jo=/*#__PURE__*/function(){function Jo(){var _this93=this;_classCallCheck(this,Jo);this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:function set(e,t,r){return _this93._parsersValidated=!1,e[t]=r,!0;}}),this.promiseCache={};}_createClass(Jo,[{key:"reset",value:function reset(){this._parsersValidated=!1,this.promiseCache={};}},{key:"_getLoadPromiseAndParser",value:function _getLoadPromiseAndParser(e,t){var _this94=this;var r={promise:null,parser:null};return r.promise=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee75(){var n,i,_r230,_n109$test,_n109,_e486,_i80$testParse,_i80;return _regeneratorRuntime().wrap(function _callee75$(_context78){while(1)switch(_context78.prev=_context78.next){case 0:n=null,i=null;if(!(t.loadParser&&(i=_this94._parserHash[t.loadParser],i||console.warn("[Assets] specified load parser \"".concat(t.loadParser,"\" not found while loading ").concat(e))),!i)){_context78.next=13;break;}_r230=0;case 3:if(!(_r230<_this94.parsers.length)){_context78.next=11;break;}_n109=_this94.parsers[_r230];if(!(_n109.load&&(_n109$test=_n109.test)!==null&&_n109$test!==void 0&&_n109$test.call(_n109,e,t,_this94))){_context78.next=8;break;}i=_n109;return _context78.abrupt("break",11);case 8:_r230++;_context78.next=3;break;case 11:if(i){_context78.next=13;break;}return _context78.abrupt("return",(console.warn("[Assets] ".concat(e," could not be loaded as we don't know how to parse it, ensure the correct parser has been added")),null));case 13:_context78.next=15;return i.load(e,t,_this94);case 15:n=_context78.sent;r.parser=i;_e486=0;case 18:if(!(_e486<_this94.parsers.length)){_context78.next=37;break;}_i80=_this94.parsers[_e486];_context78.t0=_i80.parse&&_i80.parse;if(!_context78.t0){_context78.next=25;break;}_context78.next=24;return(_i80$testParse=_i80.testParse)===null||_i80$testParse===void 0?void 0:_i80$testParse.call(_i80,n,t,_this94);case 24:_context78.t0=_context78.sent;case 25:_context78.t1=_context78.t0;if(!_context78.t1){_context78.next=34;break;}_context78.next=29;return _i80.parse(n,t,_this94);case 29:_context78.t2=_context78.sent;if(_context78.t2){_context78.next=32;break;}_context78.t2=n;case 32:n=_context78.t2;r.parser=_i80;case 34:_e486++;_context78.next=18;break;case 37:return _context78.abrupt("return",n);case 38:case"end":return _context78.stop();}},_callee75);}))(),r;}},{key:"load",value:function(){var _load=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee77(e,t){var _this95=this;var r,n,i,o,a,s;return _regeneratorRuntime().wrap(function _callee77$(_context80){while(1)switch(_context80.prev=_context80.next){case 0:this._parsersValidated||this._validateParsers();r=0;n={},i=qo(e),o=Xo(e,function(e){return{alias:[e],src:e};}),a=o.length,s=o.map(/*#__PURE__*/function(){var _ref52=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee76(e){var i;return _regeneratorRuntime().wrap(function _callee76$(_context79){while(1)switch(_context79.prev=_context79.next){case 0:i=Se.toAbsolute(e.src);if(n[e.src]){_context79.next=13;break;}_context79.prev=2;_this95.promiseCache[i]||(_this95.promiseCache[i]=_this95._getLoadPromiseAndParser(i,e));_context79.next=6;return _this95.promiseCache[i].promise;case 6:n[e.src]=_context79.sent;t&&t(++r/a);_context79.next=13;break;case 10:_context79.prev=10;_context79.t0=_context79["catch"](2);throw delete _this95.promiseCache[i],delete n[e.src],new Error("[Loader.load] Failed to load ".concat(i,".\n").concat(_context79.t0));case 13:case"end":return _context79.stop();}},_callee76,null,[[2,10]]);}));return function(_x100){return _ref52.apply(this,arguments);};}());_context80.next=5;return Promise.all(s);case 5:return _context80.abrupt("return",i?n[o[0].src]:n);case 6:case"end":return _context80.stop();}},_callee77,this);}));function load(_x98,_x99){return _load.apply(this,arguments);}return load;}()},{key:"unload",value:function(){var _unload=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee79(e){var _this96=this;var t;return _regeneratorRuntime().wrap(function _callee79$(_context82){while(1)switch(_context82.prev=_context82.next){case 0:t=Xo(e,function(e){return{alias:[e],src:e};}).map(/*#__PURE__*/function(){var _ref53=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee78(e){var t,r,_r$parser,_r$parser$unload,_n110;return _regeneratorRuntime().wrap(function _callee78$(_context81){while(1)switch(_context81.prev=_context81.next){case 0:t=Se.toAbsolute(e.src),r=_this96.promiseCache[t];if(!r){_context81.next=6;break;}_context81.next=4;return r.promise;case 4:_n110=_context81.sent;delete _this96.promiseCache[t],(_r$parser=r.parser)===null||_r$parser===void 0||(_r$parser$unload=_r$parser.unload)===null||_r$parser$unload===void 0?void 0:_r$parser$unload.call(_r$parser,_n110,e,_this96);case 6:case"end":return _context81.stop();}},_callee78);}));return function(_x102){return _ref53.apply(this,arguments);};}());_context82.next=3;return Promise.all(t);case 3:case"end":return _context82.stop();}},_callee79);}));function unload(_x101){return _unload.apply(this,arguments);}return unload;}()},{key:"_validateParsers",value:function _validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(function(e){return e.name;}).reduce(function(e,t){return e[t.name]&&console.warn("[Assets] loadParser name conflict \"".concat(t.name,"\"")),_objectSpread(_objectSpread({},e),{},_defineProperty({},t.name,t));},{});}}]);return Jo;}();var Qo=function(e){return e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e;}(Qo||{});function ea(e,t){if(Array.isArray(t)){var _iterator46=_createForOfIteratorHelper(t),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var _r231=_step46.value;if(e.startsWith("data:".concat(_r231)))return!0;}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}return!1;}return e.startsWith("data:".concat(t));}var ta={extension:{type:Vt.LoadParser,priority:Qo.Low},name:"loadJson",test:function test(e){return ea(e,"application/json")||Ko(e,".json");},load:function(){var _load2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee80(e){return _regeneratorRuntime().wrap(function _callee80$(_context83){while(1)switch(_context83.prev=_context83.next){case 0:_context83.next=2;return J.ADAPTER.fetch(e);case 2:_context83.next=4;return _context83.sent.json();case 4:return _context83.abrupt("return",_context83.sent);case 5:case"end":return _context83.stop();}},_callee80);}));function load(_x103){return _load2.apply(this,arguments);}return load;}()};Yt.add(ta);var ra={name:"loadTxt",extension:{type:Vt.LoadParser,priority:Qo.Low},test:function test(e){return ea(e,"text/plain")||Ko(e,".txt");},load:function(){var _load3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee81(e){return _regeneratorRuntime().wrap(function _callee81$(_context84){while(1)switch(_context84.prev=_context84.next){case 0:_context84.next=2;return J.ADAPTER.fetch(e);case 2:_context84.next=4;return _context84.sent.text();case 4:return _context84.abrupt("return",_context84.sent);case 5:case"end":return _context84.stop();}},_callee81);}));function load(_x104){return _load3.apply(this,arguments);}return load;}()};Yt.add(ra);var na=["normal","bold","100","200","300","400","500","600","700","800","900"],ia=[".ttf",".otf",".woff",".woff2"],oa=["font/ttf","font/otf","font/woff","font/woff2"],aa=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function sa(e){var t=Se.extname(e),r=Se.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1);});var n=r.length>0;var _iterator47=_createForOfIteratorHelper(r),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var _e487=_step47.value;if(!_e487.match(aa)){n=!1;break;}}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}var i=r.join(" ");return n||(i="\"".concat(i.replace(/[\\"]/g,"\\$&"),"\"")),i;}var ua=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;var la={extension:{type:Vt.LoadParser,priority:Qo.Low},name:"loadWebFont",test:function test(e){return ea(e,oa)||Ko(e,ia);},load:function load(e,t){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee82(){var r,_t$data$family,_t$data,_t$data$weights$filte,_t$data2,_t$data3,_i81,_o50,_a49,_s28,_t219,_u20,_l13,n;return _regeneratorRuntime().wrap(function _callee82$(_context85){while(1)switch(_context85.prev=_context85.next){case 0:r=J.ADAPTER.getFontFaceSet();if(!r){_context85.next=14;break;}_i81=[],_o50=(_t$data$family=(_t$data=t.data)===null||_t$data===void 0?void 0:_t$data.family)!==null&&_t$data$family!==void 0?_t$data$family:sa(e),_a49=(_t$data$weights$filte=(_t$data2=t.data)===null||_t$data2===void 0||(_t$data2=_t$data2.weights)===null||_t$data2===void 0?void 0:_t$data2.filter(function(e){return na.includes(e);}))!==null&&_t$data$weights$filte!==void 0?_t$data$weights$filte:["normal"],_s28=(_t$data3=t.data)!==null&&_t$data3!==void 0?_t$data3:{};_t219=0;case 4:if(!(_t219<_a49.length)){_context85.next=13;break;}_u20=_a49[_t219],_l13=new FontFace(_o50,"url(".concat((n=e,ua.test(n)?n:encodeURI(n)),")"),_objectSpread(_objectSpread({},_s28),{},{weight:_u20}));_context85.next=8;return _l13.load();case 8:r.add(_l13);_i81.push(_l13);case 10:_t219++;_context85.next=4;break;case 13:return _context85.abrupt("return",1===_i81.length?_i81[0]:_i81);case 14:return _context85.abrupt("return",(console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null));case 15:case"end":return _context85.stop();}},_callee82);}))();},unload:function unload(e){(Array.isArray(e)?e:[e]).forEach(function(e){return J.ADAPTER.getFontFaceSet()["delete"](e);});}};Yt.add(la);var ha=null;var ca=/*#__PURE__*/function(_Worker){_inherits(ca,_Worker);function ca(){var _this97;_classCallCheck(this,ca);ha||(ha=URL.createObjectURL(new Blob(['(function() {\n  "use strict";\n  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n  async function checkImageBitmap() {\n    try {\n      if (typeof createImageBitmap != "function")\n        return !1;\n      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);\n      return imageBitmap.width === 1 && imageBitmap.height === 1;\n    } catch {\n      return !1;\n    }\n  }\n  checkImageBitmap().then((result) => {\n    self.postMessage(result);\n  });\n})();\n'],{type:"application/javascript"}))),_this97=_callSuper(this,ca,[ha]);return _this97;}return _createClass(ca);}(/*#__PURE__*/_wrapNativeSuper(Worker));ca.revokeObjectURL=function(){ha&&(URL.revokeObjectURL(ha),ha=null);};var da=null;var fa=/*#__PURE__*/function(_Worker2){_inherits(fa,_Worker2);function fa(){var _this98;_classCallCheck(this,fa);da||(da=URL.createObjectURL(new Blob(['(function() {\n  "use strict";\n  async function loadImageBitmap(url) {\n    const response = await fetch(url);\n    if (!response.ok)\n      throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n    const imageBlob = await response.blob();\n    return await createImageBitmap(imageBlob);\n  }\n  self.onmessage = async (event) => {\n    try {\n      const imageBitmap = await loadImageBitmap(event.data.data[0]);\n      self.postMessage({\n        data: imageBitmap,\n        uuid: event.data.uuid,\n        id: event.data.id\n      }, [imageBitmap]);\n    } catch (e) {\n      self.postMessage({\n        error: e,\n        uuid: event.data.uuid,\n        id: event.data.id\n      });\n    }\n  };\n})();\n'],{type:"application/javascript"}))),_this98=_callSuper(this,fa,[da]);return _this98;}return _createClass(fa);}(/*#__PURE__*/_wrapNativeSuper(Worker));fa.revokeObjectURL=function(){da&&(URL.revokeObjectURL(da),da=null);};var pa,ya=0;var ga=new(/*#__PURE__*/function(){function _class5(){_classCallCheck(this,_class5);this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={};}_createClass(_class5,[{key:"isImageBitmapSupported",value:function isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(function(e){var t=new ca();t.addEventListener("message",function(r){t.terminate(),ca.revokeObjectURL(),e(r.data);});})),this._isImageBitmapSupported;}},{key:"loadImageBitmap",value:function loadImageBitmap(e){return this._run("loadImageBitmap",[e]);}},{key:"_initWorkers",value:function(){var _initWorkers2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee83(){return _regeneratorRuntime().wrap(function _callee83$(_context86){while(1)switch(_context86.prev=_context86.next){case 0:this._initialized||(this._initialized=!0);case 1:case"end":return _context86.stop();}},_callee83,this);}));function _initWorkers(){return _initWorkers2.apply(this,arguments);}return _initWorkers;}()},{key:"getWorker",value:function getWorker(){var _this99=this;void 0===pa&&(pa=navigator.hardwareConcurrency||4);var e=this.workerPool.pop();return!e&&this._createdWorkers<pa&&(this._createdWorkers++,e=new fa(),e.addEventListener("message",function(e){_this99.complete(e.data),_this99.returnWorker(e.target),_this99.next();})),e;}},{key:"returnWorker",value:function returnWorker(e){this.workerPool.push(e);}},{key:"complete",value:function complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null;}},{key:"_run",value:function(){var _run5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee84(e,t){var _this100=this;var r;return _regeneratorRuntime().wrap(function _callee84$(_context87){while(1)switch(_context87.prev=_context87.next){case 0:_context87.next=2;return this._initWorkers();case 2:r=new Promise(function(r,n){_this100.queue.push({id:e,arguments:t,resolve:r,reject:n});});return _context87.abrupt("return",(this.next(),r));case 4:case"end":return _context87.stop();}},_callee84,this);}));function _run(_x105,_x106){return _run5.apply(this,arguments);}return _run;}()},{key:"next",value:function next(){if(!this.queue.length)return;var e=this.getWorker();if(!e)return;var t=this.queue.pop(),r=t.id;this.resolveHash[ya]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:ya++,id:r});}}]);return _class5;}())();function ma(e,t,r){e.resource.internal=!0;var n=new Sn(e),i=function i(){delete t.promiseCache[r],Zo.has(r)&&Zo.remove(r);};return n.baseTexture.once("destroyed",function(){r in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i());}),n.once("destroyed",function(){e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i());}),n;}var wa=[".jpeg",".jpg",".png",".webp",".avif"],ba=["image/jpeg","image/png","image/webp","image/avif"];function va(_x107){return _va.apply(this,arguments);}function _va(){_va=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee187(e){var t,r;return _regeneratorRuntime().wrap(function _callee187$(_context192){while(1)switch(_context192.prev=_context192.next){case 0:_context192.next=2;return J.ADAPTER.fetch(e);case 2:t=_context192.sent;if(t.ok){_context192.next=5;break;}throw new Error("[loadImageBitmap] Failed to fetch ".concat(e,": ").concat(t.status," ").concat(t.statusText));case 5:_context192.next=7;return t.blob();case 7:r=_context192.sent;_context192.next=10;return createImageBitmap(r);case 10:return _context192.abrupt("return",_context192.sent);case 11:case"end":return _context192.stop();}},_callee187);}));return _va.apply(this,arguments);}var xa={name:"loadTextures",extension:{type:Vt.LoadParser,priority:Qo.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:function test(e){return ea(e,ba)||Ko(e,wa);},load:function load(e,t,r){var _this101=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee85(){var _o$resolution,_o$resourceOptions;var n,i,o,a;return _regeneratorRuntime().wrap(function _callee85$(_context88){while(1)switch(_context88.prev=_context88.next){case 0:n=globalThis.createImageBitmap&&_this101.config.preferCreateImageBitmap;if(!n){_context88.next=19;break;}_context88.t1=_this101.config.preferWorkers;if(!_context88.t1){_context88.next=7;break;}_context88.next=6;return ga.isImageBitmapSupported();case 6:_context88.t1=_context88.sent;case 7:if(!_context88.t1){_context88.next=13;break;}_context88.next=10;return ga.loadImageBitmap(e);case 10:_context88.t2=_context88.sent;_context88.next=16;break;case 13:_context88.next=15;return va(e);case 15:_context88.t2=_context88.sent;case 16:_context88.t0=_context88.t2;_context88.next=22;break;case 19:_context88.next=21;return new Promise(function(t,r){var n=new Image();n.crossOrigin=_this101.config.crossOrigin,n.src=e,n.complete?t(n):(n.onload=function(){return t(n);},n.onerror=function(e){return r(e);});});case 21:_context88.t0=_context88.sent;case 22:i=_context88.t0;o=_objectSpread({},t.data);(_o$resolution=o.resolution)!==null&&_o$resolution!==void 0?_o$resolution:o.resolution=zt(e),n&&void 0===((_o$resourceOptions=o.resourceOptions)===null||_o$resourceOptions===void 0?void 0:_o$resourceOptions.ownsImageBitmap)&&(o.resourceOptions=_objectSpread({},o.resourceOptions),o.resourceOptions.ownsImageBitmap=!0);a=new ar(i,o);return _context88.abrupt("return",(a.resource.src=e,ma(a,r,e)));case 27:case"end":return _context88.stop();}},_callee85);}))();},unload:function unload(e){e.destroy(!0);}};Yt.add(xa);var _a={extension:{type:Vt.LoadParser,priority:Qo.High},name:"loadSVG",test:function test(e){return ea(e,"image/svg+xml")||Ko(e,".svg");},testParse:function(){var _testParse=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee86(e){return _regeneratorRuntime().wrap(function _callee86$(_context89){while(1)switch(_context89.prev=_context89.next){case 0:return _context89.abrupt("return",eo.test(e));case 1:case"end":return _context89.stop();}},_callee86);}));function testParse(_x108){return _testParse.apply(this,arguments);}return testParse;}(),parse:function parse(e,t,r){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee87(){var _t$data4;var n,i;return _regeneratorRuntime().wrap(function _callee87$(_context90){while(1)switch(_context90.prev=_context90.next){case 0:n=new eo(e,t===null||t===void 0||(_t$data4=t.data)===null||_t$data4===void 0?void 0:_t$data4.resourceOptions);_context90.next=3;return n.load();case 3:i=new ar(n,_objectSpread({resolution:zt(e)},t===null||t===void 0?void 0:t.data));return _context90.abrupt("return",(i.resource.src=t.src,ma(i,r,t.src)));case 5:case"end":return _context90.stop();}},_callee87);}))();},load:function(){var _load4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee88(e,t){return _regeneratorRuntime().wrap(function _callee88$(_context91){while(1)switch(_context91.prev=_context91.next){case 0:_context91.next=2;return J.ADAPTER.fetch(e);case 2:return _context91.abrupt("return",_context91.sent.text());case 3:case"end":return _context91.stop();}},_callee88);}));function load(_x109,_x110){return _load4.apply(this,arguments);}return load;}(),unload:xa.unload};Yt.add(_a);var Ia=[".mp4",".m4v",".webm",".ogv"],Aa=["video/mp4","video/webm","video/ogg"],Sa={name:"loadVideo",extension:{type:Vt.LoadParser,priority:Qo.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test:function test(e){return ea(e,Aa)||Ko(e,Ia);},load:function load(e,t,r){var _this102=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee89(){var n,i,o,_t$data5,_i82,_a50,_s29;return _regeneratorRuntime().wrap(function _callee89$(_context92){while(1)switch(_context92.prev=_context92.next){case 0:_context92.next=2;return J.ADAPTER.fetch(e);case 2:_context92.next=4;return _context92.sent.blob();case 4:i=_context92.sent;o=URL.createObjectURL(i);_context92.prev=6;_i82=_objectSpread(_objectSpread({autoPlay:_this102.config.defaultAutoPlay,updateFPS:_this102.config.defaultUpdateFPS,loop:_this102.config.defaultLoop,muted:_this102.config.defaultMuted,playsinline:_this102.config.defaultPlaysinline},t===null||t===void 0||(_t$data5=t.data)===null||_t$data5===void 0?void 0:_t$data5.resourceOptions),{},{autoLoad:!0}),_a50=new ro(o,_i82);_context92.next=10;return _a50.load();case 10:_context92.t0=ar;_context92.t1=_a50;_context92.t2=_objectSpread;_context92.next=15;return Ee();case 15:_context92.t3=_context92.sent;_context92.t4=zt(e);_context92.t5={alphaMode:_context92.t3,resolution:_context92.t4};_context92.t6=t===null||t===void 0?void 0:t.data;_context92.t7=(0,_context92.t2)(_context92.t5,_context92.t6);_s29=new _context92.t0(_context92.t1,_context92.t7);_s29.resource.src=e,n=ma(_s29,r,e),n.baseTexture.once("destroyed",function(){URL.revokeObjectURL(o);});_context92.next=27;break;case 24:_context92.prev=24;_context92.t8=_context92["catch"](6);throw URL.revokeObjectURL(o),_context92.t8;case 27:return _context92.abrupt("return",n);case 28:case"end":return _context92.stop();}},_callee89,null,[[6,24]]);}))();},unload:function unload(e){e.destroy(!0);}};function Ta(e,t,r,n,i){var o=t[r];for(var _a51=0;_a51<o.length;_a51++){var _s30=o[_a51];r<t.length-1?Ta(e.replace(n[r],_s30),t,r+1,n,i):i.push(e.replace(n[r],_s30));}}function Ca(e){var t=e.match(/\{(.*?)\}/g),r=[];if(t){var n=[];t.forEach(function(e){var t=e.substring(1,e.length-1).split(",");n.push(t);}),Ta(e,n,0,t,r);}else r.push(e);return r;}Yt.add(Sa);var Ea=/*#__PURE__*/function(){function Ea(){var _this103=this;_classCallCheck(this,Ea);this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:function createBundleAssetId(e,t){return"".concat(e).concat(_this103._bundleIdConnector).concat(t);},extractAssetIdFromBundle:function extractAssetIdFromBundle(e,t){return t.replace("".concat(e).concat(_this103._bundleIdConnector),"");}},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={};}_createClass(Ea,[{key:"setBundleIdentifier",value:function setBundleIdentifier(e){var _e$connector,_e$createBundleAssetI,_e$extractAssetIdFrom;if(this._bundleIdConnector=(_e$connector=e.connector)!==null&&_e$connector!==void 0?_e$connector:this._bundleIdConnector,this._createBundleAssetId=(_e$createBundleAssetI=e.createBundleAssetId)!==null&&_e$createBundleAssetI!==void 0?_e$createBundleAssetI:this._createBundleAssetId,this._extractAssetIdFromBundle=(_e$extractAssetIdFrom=e.extractAssetIdFromBundle)!==null&&_e$extractAssetIdFrom!==void 0?_e$extractAssetIdFrom:this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly");}},{key:"prefer",value:function prefer(){var _this104=this;for(var _len7=arguments.length,e=new Array(_len7),_key7=0;_key7<_len7;_key7++){e[_key7]=arguments[_key7];}e.forEach(function(e){_this104._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params));}),this._resolverHash={};}},{key:"basePath",get:function get(){return this._basePath;},set:function set(e){this._basePath=e;}},{key:"rootPath",get:function get(){return this._rootPath;},set:function set(e){this._rootPath=e;}},{key:"parsers",get:function get(){return this._parsers;}},{key:"reset",value:function reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null;}},{key:"setDefaultSearchParams",value:function setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{var _t220=e;this._defaultSearchParams=Object.keys(_t220).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(_t220[e]));}).join("&");}}},{key:"getAlias",value:function getAlias(e){var t=e.alias,r=e.name,n=e.src,i=e.srcs;return Xo(t||r||n||i,function(e){var _e$src2;return"string"==typeof e?e:Array.isArray(e)?e.map(function(e){var _ref54,_e$src;return(_ref54=(_e$src=e===null||e===void 0?void 0:e.src)!==null&&_e$src!==void 0?_e$src:e===null||e===void 0?void 0:e.srcs)!==null&&_ref54!==void 0?_ref54:e;}):e!==null&&e!==void 0&&e.src||e!==null&&e!==void 0&&e.srcs?(_e$src2=e.src)!==null&&_e$src2!==void 0?_e$src2:e.srcs:e;},!0);}},{key:"addManifest",value:function addManifest(e){var _this105=this;this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(function(e){_this105.addBundle(e.name,e.assets);});}},{key:"addBundle",value:function addBundle(e,t){var _this106=this;var r=[];Array.isArray(t)?t.forEach(function(t){var _t$src,_t$alias;var n=(_t$src=t.src)!==null&&_t$src!==void 0?_t$src:t.srcs,i=(_t$alias=t.alias)!==null&&_t$alias!==void 0?_t$alias:t.name;var o;if("string"==typeof i){var _t221=_this106._createBundleAssetId(e,i);r.push(_t221),o=[i,_t221];}else{var _t222=i.map(function(t){return _this106._createBundleAssetId(e,t);});r.push.apply(r,_toConsumableArray(_t222)),o=[].concat(_toConsumableArray(i),_toConsumableArray(_t222));}_this106.add(_objectSpread(_objectSpread({},t),{},{alias:o,src:n}));}):Object.keys(t).forEach(function(n){var i=[n,_this106._createBundleAssetId(e,n)];if("string"==typeof t[n])_this106.add({alias:i,src:t[n]});else if(Array.isArray(t[n]))_this106.add({alias:i,src:t[n]});else{var _e488$src;var _e488=t[n],_r232=(_e488$src=_e488.src)!==null&&_e488$src!==void 0?_e488$src:_e488.srcs;_this106.add(_objectSpread(_objectSpread({},_e488),{},{alias:i,src:Array.isArray(_r232)?_r232:[_r232]}));}r.push.apply(r,i);}),this._bundles[e]=r;}},{key:"add",value:function add(e,t,r,n,i){var _this107=this;var o=[];var a;"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]?(xe("7.2.0","Assets.add now uses an object instead of individual parameters.\nPlease use Assets.add({ alias, src, data, format, loadParser }) instead."),o.push({alias:e,src:t,data:r,format:n,loadParser:i})):Array.isArray(e)?o.push.apply(o,_toConsumableArray(e)):o.push(e),a=function a(e){_this107.hasKey(e)&&console.warn("[Resolver] already has key: ".concat(e," overwriting"));},Xo(o).forEach(function(e){var t=e.src,r=e.srcs;var n=e.data,i=e.format,o=e.loadParser;var s=Xo(t||r).map(function(e){return"string"==typeof e?Ca(e):Array.isArray(e)?e:[e];}),u=_this107.getAlias(e);Array.isArray(u)?u.forEach(a):a(u);var l=[];s.forEach(function(e){e.forEach(function(e){var _e$data,_e$format,_e$loadParser;var t={};if("object"!=_typeof(e)){t.src=e;for(var _r233=0;_r233<_this107._parsers.length;_r233++){var _n111=_this107._parsers[_r233];if(_n111.test(e)){t=_n111.parse(e);break;}}}else n=(_e$data=e.data)!==null&&_e$data!==void 0?_e$data:n,i=(_e$format=e.format)!==null&&_e$format!==void 0?_e$format:i,o=(_e$loadParser=e.loadParser)!==null&&_e$loadParser!==void 0?_e$loadParser:o,t=_objectSpread(_objectSpread({},t),e);if(!u)throw new Error("[Resolver] alias is undefined for this asset: ".concat(t.src));t=_this107.buildResolvedAsset(t,{aliases:u,data:n,format:i,loadParser:o}),l.push(t);});}),u.forEach(function(e){_this107._assetMap[e]=l;});});}},{key:"resolveBundle",value:function resolveBundle(e){var _this108=this;var t=qo(e);e=Xo(e);var r={};return e.forEach(function(e){var t=_this108._bundles[e];if(t){var n=_this108.resolve(t),i={};for(var _t223 in n){var _r234=n[_t223];i[_this108._extractAssetIdFromBundle(e,_t223)]=_r234;}r[e]=i;}}),t?r[e[0]]:r;}},{key:"resolveUrl",value:function resolveUrl(e){var t=this.resolve(e);if("string"!=typeof e){var _e489={};for(var _r235 in t)_e489[_r235]=t[_r235].src;return _e489;}return t.src;}},{key:"resolve",value:function resolve(e){var _this109=this;var t=qo(e);e=Xo(e);var r={};return e.forEach(function(e){if(!_this109._resolverHash[e])if(_this109._assetMap[e]){var _t224$;var _t224=_this109._assetMap[e];var _r236=_t224[0],n=_this109._getPreferredOrder(_t224);n!==null&&n!==void 0&&n.priority.forEach(function(e){n.params[e].forEach(function(r){var n=_t224.filter(function(t){return!!t[e]&&t[e]===r;});n.length&&(_t224=n);});}),_this109._resolverHash[e]=(_t224$=_t224[0])!==null&&_t224$!==void 0?_t224$:_r236;}else _this109._resolverHash[e]=_this109.buildResolvedAsset({alias:[e],src:e},{});r[e]=_this109._resolverHash[e];}),t?r[e[0]]:r;}},{key:"hasKey",value:function hasKey(e){return!!this._assetMap[e];}},{key:"hasBundle",value:function hasBundle(e){return!!this._bundles[e];}},{key:"_getPreferredOrder",value:function _getPreferredOrder(e){var _this110=this;var _loop11=function _loop11(){var t=e[0],r=_this110._preferredOrder.find(function(e){return e.params.format.includes(t.format);});if(r)return{v:r};},_ret;for(var _t225=0;_t225<e.length;_t225++){_ret=_loop11();if(_ret)return _ret.v;}return this._preferredOrder[0];}},{key:"_appendDefaultSearchParams",value:function _appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;return"".concat(e).concat(/\?/.test(e)?"&":"?").concat(this._defaultSearchParams);}},{key:"buildResolvedAsset",value:function buildResolvedAsset(e,t){var _ref55;var r=t.aliases,n=t.data,i=t.loadParser,o=t.format;return(this._basePath||this._rootPath)&&(e.src=Se.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=(_ref55=r!==null&&r!==void 0?r:e.alias)!==null&&_ref55!==void 0?_ref55:[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=_objectSpread(_objectSpread({},n||{}),e.data),e.loadParser=i!==null&&i!==void 0?i:e.loadParser,e.format=o!==null&&o!==void 0?o:Se.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e;}}]);return Ea;}();var Oa=/*#__PURE__*/function(){function Oa(){_classCallCheck(this,Oa);this._detections=[],this._initialized=!1,this.resolver=new Ea(),this.loader=new Jo(),this.cache=Zo,this._backgroundLoader=new Yo(this.loader),this._backgroundLoader.active=!0,this.reset();}_createClass(Oa,[{key:"init",value:function(){var _init3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee90(){var _e$texturePreference$,_e$texturePreference,_e$texturePreference2;var e,_t226,t,r,n,_args93=arguments;return _regeneratorRuntime().wrap(function _callee90$(_context93){while(1)switch(_context93.prev=_context93.next){case 0:e=_args93.length>0&&_args93[0]!==undefined?_args93[0]:{};if(!this._initialized){_context93.next=3;break;}return _context93.abrupt("return",void console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?"));case 3:if(!(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest)){_context93.next=11;break;}_t226=e.manifest;_context93.t0="string"==typeof _t226;if(!_context93.t0){_context93.next=10;break;}_context93.next=9;return this.load(_t226);case 9:_t226=_context93.sent;case 10:this.resolver.addManifest(_t226);case 11:t=(_e$texturePreference$=(_e$texturePreference=e.texturePreference)===null||_e$texturePreference===void 0?void 0:_e$texturePreference.resolution)!==null&&_e$texturePreference$!==void 0?_e$texturePreference$:1;r="number"==typeof t?[t]:t;_context93.next=15;return this._detectFormats({preferredFormats:(_e$texturePreference2=e.texturePreference)===null||_e$texturePreference2===void 0?void 0:_e$texturePreference2.format,skipDetections:e.skipDetections,detections:this._detections});case 15:n=_context93.sent;this.resolver.prefer({params:{format:n,resolution:r}}),e.preferences&&this.setPreferences(e.preferences);case 17:case"end":return _context93.stop();}},_callee90,this);}));function init(){return _init3.apply(this,arguments);}return init;}()},{key:"add",value:function add(e,t,r,n,i){this.resolver.add(e,t,r,n,i);}},{key:"load",value:function(){var _load5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee91(e,t){var _this111=this;var r,n,i,o;return _regeneratorRuntime().wrap(function _callee91$(_context94){while(1)switch(_context94.prev=_context94.next){case 0:_context94.t0=this._initialized;if(_context94.t0){_context94.next=4;break;}_context94.next=4;return this.init();case 4:r=qo(e);n=Xo(e).map(function(e){if("string"!=typeof e){var _t227=_this111.resolver.getAlias(e);return _t227.some(function(e){return!_this111.resolver.hasKey(e);})&&_this111.add(e),Array.isArray(_t227)?_t227[0]:_t227;}return _this111.resolver.hasKey(e)||_this111.add({alias:e,src:e}),e;});i=this.resolver.resolve(n);_context94.next=9;return this._mapLoadToResolve(i,t);case 9:o=_context94.sent;return _context94.abrupt("return",r?o[n[0]]:o);case 11:case"end":return _context94.stop();}},_callee91,this);}));function load(_x111,_x112){return _load5.apply(this,arguments);}return load;}()},{key:"addBundle",value:function addBundle(e,t){this.resolver.addBundle(e,t);}},{key:"loadBundle",value:function(){var _loadBundle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee92(e,t){var _this112=this;var r,n,i,o,a,s,u,l;return _regeneratorRuntime().wrap(function _callee92$(_context95){while(1)switch(_context95.prev=_context95.next){case 0:_context95.t0=this._initialized;if(_context95.t0){_context95.next=4;break;}_context95.next=4;return this.init();case 4:r=!1;"string"==typeof e&&(r=!0,e=[e]);n=this.resolver.resolveBundle(e),i={},o=Object.keys(n);a=0,s=0;u=function u(){t===null||t===void 0||t(++a/s);},l=o.map(function(e){var t=n[e];return s+=Object.keys(t).length,_this112._mapLoadToResolve(t,u).then(function(t){i[e]=t;});});_context95.next=11;return Promise.all(l);case 11:return _context95.abrupt("return",r?i[e[0]]:i);case 12:case"end":return _context95.stop();}},_callee92,this);}));function loadBundle(_x113,_x114){return _loadBundle.apply(this,arguments);}return loadBundle;}()},{key:"backgroundLoad",value:function(){var _backgroundLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee93(e){var t;return _regeneratorRuntime().wrap(function _callee93$(_context96){while(1)switch(_context96.prev=_context96.next){case 0:_context96.t0=this._initialized;if(_context96.t0){_context96.next=4;break;}_context96.next=4;return this.init();case 4:"string"==typeof e&&(e=[e]);t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t));case 7:case"end":return _context96.stop();}},_callee93,this);}));function backgroundLoad(_x115){return _backgroundLoad.apply(this,arguments);}return backgroundLoad;}()},{key:"backgroundLoadBundle",value:function(){var _backgroundLoadBundle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee94(e){var _this113=this;var t;return _regeneratorRuntime().wrap(function _callee94$(_context97){while(1)switch(_context97.prev=_context97.next){case 0:_context97.t0=this._initialized;if(_context97.t0){_context97.next=4;break;}_context97.next=4;return this.init();case 4:"string"==typeof e&&(e=[e]);t=this.resolver.resolveBundle(e);Object.values(t).forEach(function(e){_this113._backgroundLoader.add(Object.values(e));});case 7:case"end":return _context97.stop();}},_callee94,this);}));function backgroundLoadBundle(_x116){return _backgroundLoadBundle.apply(this,arguments);}return backgroundLoadBundle;}()},{key:"reset",value:function reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1;}},{key:"get",value:function get(e){if("string"==typeof e)return Zo.get(e);var t={};for(var _r237=0;_r237<e.length;_r237++)t[_r237]=Zo.get(e[_r237]);return t;}},{key:"_mapLoadToResolve",value:function(){var _mapLoadToResolve2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee95(e,t){var r,n,i,o;return _regeneratorRuntime().wrap(function _callee95$(_context98){while(1)switch(_context98.prev=_context98.next){case 0:r=Object.values(e),n=Object.keys(e);this._backgroundLoader.active=!1;_context98.next=4;return this.loader.load(r,t);case 4:i=_context98.sent;this._backgroundLoader.active=!0;o={};return _context98.abrupt("return",(r.forEach(function(e,t){var r=i[e.src],a=[e.src];e.alias&&a.push.apply(a,_toConsumableArray(e.alias)),o[n[t]]=r,Zo.set(a,r);}),o));case 8:case"end":return _context98.stop();}},_callee95,this);}));function _mapLoadToResolve(_x117,_x118){return _mapLoadToResolve2.apply(this,arguments);}return _mapLoadToResolve;}()},{key:"unload",value:function(){var _unload2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee96(e){var t,r;return _regeneratorRuntime().wrap(function _callee96$(_context99){while(1)switch(_context99.prev=_context99.next){case 0:_context99.t0=this._initialized;if(_context99.t0){_context99.next=4;break;}_context99.next=4;return this.init();case 4:t=Xo(e).map(function(e){return"string"!=typeof e?e.src:e;}),r=this.resolver.resolve(t);_context99.next=7;return this._unloadFromResolved(r);case 7:case"end":return _context99.stop();}},_callee96,this);}));function unload(_x119){return _unload2.apply(this,arguments);}return unload;}()},{key:"unloadBundle",value:function(){var _unloadBundle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee97(e){var _this114=this;var t,r;return _regeneratorRuntime().wrap(function _callee97$(_context100){while(1)switch(_context100.prev=_context100.next){case 0:_context100.t0=this._initialized;if(_context100.t0){_context100.next=4;break;}_context100.next=4;return this.init();case 4:e=Xo(e);t=this.resolver.resolveBundle(e),r=Object.keys(t).map(function(e){return _this114._unloadFromResolved(t[e]);});_context100.next=8;return Promise.all(r);case 8:case"end":return _context100.stop();}},_callee97,this);}));function unloadBundle(_x120){return _unloadBundle.apply(this,arguments);}return unloadBundle;}()},{key:"_unloadFromResolved",value:function(){var _unloadFromResolved2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee98(e){var t;return _regeneratorRuntime().wrap(function _callee98$(_context101){while(1)switch(_context101.prev=_context101.next){case 0:t=Object.values(e);t.forEach(function(e){Zo.remove(e.src);});_context101.next=4;return this.loader.unload(t);case 4:case"end":return _context101.stop();}},_callee98,this);}));function _unloadFromResolved(_x121){return _unloadFromResolved2.apply(this,arguments);}return _unloadFromResolved;}()},{key:"_detectFormats",value:function(){var _detectFormats2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee99(e){var t,_iterator48,_step48,_r238;return _regeneratorRuntime().wrap(function _callee99$(_context102){while(1)switch(_context102.prev=_context102.next){case 0:t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);_iterator48=_createForOfIteratorHelper(e.detections);_context102.prev=3;_iterator48.s();case 5:if((_step48=_iterator48.n()).done){_context102.next=25;break;}_r238=_step48.value;_context102.t0=e.skipDetections;if(_context102.t0){_context102.next=12;break;}_context102.next=11;return _r238.test();case 11:_context102.t0=_context102.sent;case 12:if(!_context102.t0){_context102.next=18;break;}_context102.next=15;return _r238.add(t);case 15:t=_context102.sent;_context102.next=23;break;case 18:_context102.t1=e.skipDetections;if(_context102.t1){_context102.next=23;break;}_context102.next=22;return _r238.remove(t);case 22:t=_context102.sent;case 23:_context102.next=5;break;case 25:_context102.next=30;break;case 27:_context102.prev=27;_context102.t2=_context102["catch"](3);_iterator48.e(_context102.t2);case 30:_context102.prev=30;_iterator48.f();return _context102.finish(30);case 33:return _context102.abrupt("return",(t=t.filter(function(e,r){return t.indexOf(e)===r;}),t));case 34:case"end":return _context102.stop();}},_callee99,null,[[3,27,30,33]]);}));function _detectFormats(_x122){return _detectFormats2.apply(this,arguments);}return _detectFormats;}()},{key:"detections",get:function get(){return this._detections;}},{key:"preferWorkers",get:function get(){return xa.config.preferWorkers;},set:function set(e){xe("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e});}},{key:"setPreferences",value:function setPreferences(e){this.loader.parsers.forEach(function(t){t.config&&Object.keys(t.config).filter(function(t){return t in e;}).forEach(function(r){t.config[r]=e[r];});});}}]);return Oa;}();var ka=new Oa();Yt.handleByList(Vt.LoadParser,ka.loader.parsers).handleByList(Vt.ResolveParser,ka.resolver.parsers).handleByList(Vt.CacheParser,ka.cache.parsers).handleByList(Vt.DetectionParser,ka.detections);var Pa={extension:Vt.CacheParser,test:function test(e){return Array.isArray(e)&&e.every(function(e){return e instanceof Sn;});},getCacheableAssets:function getCacheableAssets(e,t){var r={};return e.forEach(function(e){t.forEach(function(t,n){r[e+(0===n?"":n+1)]=t;});}),r;}};function $a(_x123){return _$a.apply(this,arguments);}function _$a(){_$a=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee188(e){var _t397;return _regeneratorRuntime().wrap(function _callee188$(_context193){while(1)switch(_context193.prev=_context193.next){case 0:if(!("Image"in globalThis)){_context193.next=2;break;}return _context193.abrupt("return",new Promise(function(t){var r=new Image();r.onload=function(){t(!0);},r.onerror=function(){t(!1);},r.src=e;}));case 2:if(!("createImageBitmap"in globalThis&&"fetch"in globalThis)){_context193.next=17;break;}_context193.prev=3;_context193.next=6;return fetch(e);case 6:_context193.next=8;return _context193.sent.blob();case 8:_t397=_context193.sent;_context193.next=11;return createImageBitmap(_t397);case 11:_context193.next=16;break;case 13:_context193.prev=13;_context193.t0=_context193["catch"](3);return _context193.abrupt("return",!1);case 16:return _context193.abrupt("return",!0);case 17:return _context193.abrupt("return",!1);case 18:case"end":return _context193.stop();}},_callee188,null,[[3,13]]);}));return _$a.apply(this,arguments);}Yt.add(Pa);var Ra={extension:{type:Vt.DetectionParser,priority:1},test:function(){var _test=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee100(){return _regeneratorRuntime().wrap(function _callee100$(_context103){while(1)switch(_context103.prev=_context103.next){case 0:return _context103.abrupt("return",$a("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="));case 1:case"end":return _context103.stop();}},_callee100);}));function test(){return _test.apply(this,arguments);}return test;}(),add:function(){var _add=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee101(e){return _regeneratorRuntime().wrap(function _callee101$(_context104){while(1)switch(_context104.prev=_context104.next){case 0:return _context104.abrupt("return",[].concat(_toConsumableArray(e),["avif"]));case 1:case"end":return _context104.stop();}},_callee101);}));function add(_x124){return _add.apply(this,arguments);}return add;}(),remove:function(){var _remove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee102(e){return _regeneratorRuntime().wrap(function _callee102$(_context105){while(1)switch(_context105.prev=_context105.next){case 0:return _context105.abrupt("return",e.filter(function(e){return"avif"!==e;}));case 1:case"end":return _context105.stop();}},_callee102);}));function remove(_x125){return _remove.apply(this,arguments);}return remove;}()};Yt.add(Ra);var Ba={extension:{type:Vt.DetectionParser,priority:0},test:function(){var _test2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee103(){return _regeneratorRuntime().wrap(function _callee103$(_context106){while(1)switch(_context106.prev=_context106.next){case 0:return _context106.abrupt("return",$a("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="));case 1:case"end":return _context106.stop();}},_callee103);}));function test(){return _test2.apply(this,arguments);}return test;}(),add:function(){var _add2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee104(e){return _regeneratorRuntime().wrap(function _callee104$(_context107){while(1)switch(_context107.prev=_context107.next){case 0:return _context107.abrupt("return",[].concat(_toConsumableArray(e),["webp"]));case 1:case"end":return _context107.stop();}},_callee104);}));function add(_x126){return _add2.apply(this,arguments);}return add;}(),remove:function(){var _remove2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee105(e){return _regeneratorRuntime().wrap(function _callee105$(_context108){while(1)switch(_context108.prev=_context108.next){case 0:return _context108.abrupt("return",e.filter(function(e){return"webp"!==e;}));case 1:case"end":return _context108.stop();}},_callee105);}));function remove(_x127){return _remove2.apply(this,arguments);}return remove;}()};Yt.add(Ba);var Da=["png","jpg","jpeg"],Ma={extension:{type:Vt.DetectionParser,priority:-1},test:function test(){return Promise.resolve(!0);},add:function(){var _add3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee106(e){return _regeneratorRuntime().wrap(function _callee106$(_context109){while(1)switch(_context109.prev=_context109.next){case 0:return _context109.abrupt("return",[].concat(_toConsumableArray(e),Da));case 1:case"end":return _context109.stop();}},_callee106);}));function add(_x128){return _add3.apply(this,arguments);}return add;}(),remove:function(){var _remove3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee107(e){return _regeneratorRuntime().wrap(function _callee107$(_context110){while(1)switch(_context110.prev=_context110.next){case 0:return _context110.abrupt("return",e.filter(function(e){return!Da.includes(e);}));case 1:case"end":return _context110.stop();}},_callee107);}));function remove(_x129){return _remove3.apply(this,arguments);}return remove;}()};Yt.add(Ma);var La="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Fa(e){return!La&&""!==document.createElement("video").canPlayType(e);}var Na={extension:{type:Vt.DetectionParser,priority:0},test:function(){var _test3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee108(){return _regeneratorRuntime().wrap(function _callee108$(_context111){while(1)switch(_context111.prev=_context111.next){case 0:return _context111.abrupt("return",Fa("video/webm"));case 1:case"end":return _context111.stop();}},_callee108);}));function test(){return _test3.apply(this,arguments);}return test;}(),add:function(){var _add4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee109(e){return _regeneratorRuntime().wrap(function _callee109$(_context112){while(1)switch(_context112.prev=_context112.next){case 0:return _context112.abrupt("return",[].concat(_toConsumableArray(e),["webm"]));case 1:case"end":return _context112.stop();}},_callee109);}));function add(_x130){return _add4.apply(this,arguments);}return add;}(),remove:function(){var _remove4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee110(e){return _regeneratorRuntime().wrap(function _callee110$(_context113){while(1)switch(_context113.prev=_context113.next){case 0:return _context113.abrupt("return",e.filter(function(e){return"webm"!==e;}));case 1:case"end":return _context113.stop();}},_callee110);}));function remove(_x131){return _remove4.apply(this,arguments);}return remove;}()};Yt.add(Na);var Ua={extension:{type:Vt.DetectionParser,priority:0},test:function(){var _test4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee111(){return _regeneratorRuntime().wrap(function _callee111$(_context114){while(1)switch(_context114.prev=_context114.next){case 0:return _context114.abrupt("return",Fa("video/mp4"));case 1:case"end":return _context114.stop();}},_callee111);}));function test(){return _test4.apply(this,arguments);}return test;}(),add:function(){var _add5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee112(e){return _regeneratorRuntime().wrap(function _callee112$(_context115){while(1)switch(_context115.prev=_context115.next){case 0:return _context115.abrupt("return",[].concat(_toConsumableArray(e),["mp4","m4v"]));case 1:case"end":return _context115.stop();}},_callee112);}));function add(_x132){return _add5.apply(this,arguments);}return add;}(),remove:function(){var _remove5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee113(e){return _regeneratorRuntime().wrap(function _callee113$(_context116){while(1)switch(_context116.prev=_context116.next){case 0:return _context116.abrupt("return",e.filter(function(e){return"mp4"!==e&&"m4v"!==e;}));case 1:case"end":return _context116.stop();}},_callee113);}));function remove(_x133){return _remove5.apply(this,arguments);}return remove;}()};Yt.add(Ua);var ja={extension:{type:Vt.DetectionParser,priority:0},test:function(){var _test5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee114(){return _regeneratorRuntime().wrap(function _callee114$(_context117){while(1)switch(_context117.prev=_context117.next){case 0:return _context117.abrupt("return",Fa("video/ogg"));case 1:case"end":return _context117.stop();}},_callee114);}));function test(){return _test5.apply(this,arguments);}return test;}(),add:function(){var _add6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee115(e){return _regeneratorRuntime().wrap(function _callee115$(_context118){while(1)switch(_context118.prev=_context118.next){case 0:return _context118.abrupt("return",[].concat(_toConsumableArray(e),["ogv"]));case 1:case"end":return _context118.stop();}},_callee115);}));function add(_x134){return _add6.apply(this,arguments);}return add;}(),remove:function(){var _remove6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee116(e){return _regeneratorRuntime().wrap(function _callee116$(_context119){while(1)switch(_context119.prev=_context119.next){case 0:return _context119.abrupt("return",e.filter(function(e){return"ogv"!==e;}));case 1:case"end":return _context119.stop();}},_callee116);}));function remove(_x135){return _remove6.apply(this,arguments);}return remove;}()};Yt.add(ja);var Ga={extension:Vt.ResolveParser,test:xa.test,parse:function parse(e){var _J$RETINA_PREFIX$exec,_J$RETINA_PREFIX$exec2;return{resolution:parseFloat((_J$RETINA_PREFIX$exec=(_J$RETINA_PREFIX$exec2=J.RETINA_PREFIX.exec(e))===null||_J$RETINA_PREFIX$exec2===void 0?void 0:_J$RETINA_PREFIX$exec2[1])!==null&&_J$RETINA_PREFIX$exec!==void 0?_J$RETINA_PREFIX$exec:"1"),format:Se.extname(e).slice(1),src:e};}};Yt.add(Ga);var za=function za(e,t){var r=t.split("?")[1];return r&&(e+="?".concat(r)),e;};var Va=function(e){return e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e;}(Va||{});var Ha={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};var Wa,Ya;function Ka(){Ya={s3tc:Wa.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Wa.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Wa.getExtension("WEBGL_compressed_texture_etc"),etc1:Wa.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Wa.getExtension("WEBGL_compressed_texture_pvrtc")||Wa.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Wa.getExtension("WEBGL_compressed_texture_atc"),astc:Wa.getExtension("WEBGL_compressed_texture_astc"),bptc:Wa.getExtension("EXT_texture_compression_bptc")};}var Xa={extension:{type:Vt.DetectionParser,priority:2},test:function(){var _test6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee117(){var e;return _regeneratorRuntime().wrap(function _callee117$(_context120){while(1)switch(_context120.prev=_context120.next){case 0:e=J.ADAPTER.createCanvas().getContext("webgl");return _context120.abrupt("return",e?(Wa=e,!0):(console.warn("WebGL not available for compressed textures."),!1));case 2:case"end":return _context120.stop();}},_callee117);}));function test(){return _test6.apply(this,arguments);}return test;}(),add:function(){var _add7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee118(e){var t,_e490;return _regeneratorRuntime().wrap(function _callee118$(_context121){while(1)switch(_context121.prev=_context121.next){case 0:Ya||Ka();t=[];for(_e490 in Ya)Ya[_e490]&&t.push(_e490);return _context121.abrupt("return",[].concat(t,_toConsumableArray(e)));case 4:case"end":return _context121.stop();}},_callee118);}));function add(_x136){return _add7.apply(this,arguments);}return add;}(),remove:function(){var _remove7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee119(e){return _regeneratorRuntime().wrap(function _callee119$(_context122){while(1)switch(_context122.prev=_context122.next){case 0:return _context122.abrupt("return",(Ya||Ka(),e.filter(function(e){return!(e in Ya);})));case 1:case"end":return _context122.stop();}},_callee119);}));function remove(_x137){return _remove7.apply(this,arguments);}return remove;}()};Yt.add(Xa);var Za=/*#__PURE__*/function(_nr){_inherits(Za,_nr);function Za(e){var _this115;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{width:1,height:1,autoLoad:!0};_classCallCheck(this,Za);var r,n;"string"==typeof e?(r=e,n=new Uint8Array()):(r=null,n=e),_this115=_callSuper(this,Za,[n,t]),_this115.origin=r,_this115.buffer=n?new Kt(n):null,_this115._load=null,_this115.loaded=!1,null!==_this115.origin&&!1!==t.autoLoad&&_this115.load(),null===_this115.origin&&_this115.buffer&&(_this115._load=Promise.resolve(_assertThisInitialized(_this115)),_this115.loaded=!0,_this115.onBlobLoaded(_this115.buffer.rawBinaryData));return _this115;}_createClass(Za,[{key:"onBlobLoaded",value:function onBlobLoaded(e){}},{key:"load",value:function load(){var _this116=this;return this._load||(this._load=fetch(this.origin).then(function(e){return e.blob();}).then(function(e){return e.arrayBuffer();}).then(function(e){return _this116.data=new Uint32Array(e),_this116.buffer=new Kt(e),_this116.loaded=!0,_this116.onBlobLoaded(e),_this116.update(),_this116;})),this._load;}}]);return Za;}(nr);var qa=/*#__PURE__*/function(_Za){_inherits(qa,_Za);function qa(e,t){var _this117;_classCallCheck(this,qa);_this117=_callSuper(this,qa,[e,t]),_this117.format=t.format,_this117.levels=t.levels||1,_this117._width=t.width,_this117._height=t.height,_this117._extension=qa._formatToExtension(_this117.format),(t.levelBuffers||_this117.buffer)&&(_this117._levelBuffers=t.levelBuffers||qa._createLevelBuffers(e instanceof Uint8Array?e:_this117.buffer.uint8View,_this117.format,_this117.levels,4,4,_this117.width,_this117.height));return _this117;}_createClass(qa,[{key:"upload",value:function upload(e,t,r){var n=e.gl;if(!e.context.extensions[this._extension])throw new Error("".concat(this._extension," textures are not supported on the current machine"));if(!this._levelBuffers)return!1;n.pixelStorei(n.UNPACK_ALIGNMENT,4);for(var _e491=0,_t228=this.levels;_e491<_t228;_e491++){var _this$_levelBuffers$_=this._levelBuffers[_e491],_t229=_this$_levelBuffers$_.levelID,_r239=_this$_levelBuffers$_.levelWidth,i=_this$_levelBuffers$_.levelHeight,_o51=_this$_levelBuffers$_.levelBuffer;n.compressedTexImage2D(n.TEXTURE_2D,_t229,this.format,_r239,i,0,_o51);}return!0;}},{key:"onBlobLoaded",value:function onBlobLoaded(){this._levelBuffers=qa._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height);}}],[{key:"_formatToExtension",value:function _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(36196===e)return"etc1";if(35986===e||35987===e||34798===e)return"atc";if(e>=36492&&e<=36495)return"bptc";if(37808===e)return"astc";throw new Error("Invalid (compressed) texture format given: ".concat(e));}},{key:"_createLevelBuffers",value:function _createLevelBuffers(e,t,r,n,i,o,a){var s=new Array(r);var u=e.byteOffset,l=o,h=a,c=l+n-1&~(n-1),d=h+i-1&~(i-1),f=c*d*Ha[t];for(var _o52=0;_o52<r;_o52++)s[_o52]={levelID:_o52,levelWidth:r>1?l:c,levelHeight:r>1?h:d,levelBuffer:new Uint8Array(e.buffer,u,f)},u+=f,l=l>>1||1,h=h>>1||1,c=l+n-1&~(n-1),d=h+i-1&~(i-1),f=c*d*Ha[t];return s;}}]);return qa;}(Za);var Ja=4,Qa=124,es=32,ts=20,rs=542327876,ns={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},is={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},os={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},as=1,ss=2,us=4,ls=64,hs=512,cs=131072,ds=808540228,fs=4,ps={827611204:Va.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:Va.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:Va.COMPRESSED_RGBA_S3TC_DXT5_EXT},ys={70:Va.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Va.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Va.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Va.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Va.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Va.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Va.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Va.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Va.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Va.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Va.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Va.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Va.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function gs(e){var t=new Uint32Array(e);if(t[0]!==rs)throw new Error("Invalid DDS file magic word");var r=new Uint32Array(e,0,Qa/Uint32Array.BYTES_PER_ELEMENT),n=r[ns.HEIGHT],i=r[ns.WIDTH],o=r[ns.MIPMAP_COUNT],a=new Uint32Array(e,ns.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,es/Uint32Array.BYTES_PER_ELEMENT),s=a[as];if(s&us){var _r240=a[is.FOURCC];if(_r240!==ds){var _t230=ps[_r240],_a52=new Uint8Array(e,Ja+Qa);return[new qa(_a52,{format:_t230,width:i,height:n,levels:o})];}var _s31=Ja+Qa,_u21=new Uint32Array(t.buffer,_s31,ts/Uint32Array.BYTES_PER_ELEMENT),_l14=_u21[os.DXGI_FORMAT],_h11=_u21[os.RESOURCE_DIMENSION],_c5=_u21[os.MISC_FLAG],_d4=_u21[os.ARRAY_SIZE],_f5=ys[_l14];if(void 0===_f5)throw new Error("DDSParser cannot parse texture data with DXGI format ".concat(_l14));if(_c5===fs)throw new Error("DDSParser does not support cubemap textures");if(6===_h11)throw new Error("DDSParser does not supported 3D texture data");var _p4=new Array(),_y3=Ja+Qa+ts;if(1===_d4)_p4.push(new Uint8Array(e,_y3));else{var _t231=Ha[_f5];var _r241=0,_a53=i,_s32=n;for(var _e492=0;_e492<o;_e492++){_r241+=Math.max(1,_a53+3&-4)*Math.max(1,_s32+3&-4)*_t231,_a53>>>=1,_s32>>>=1;}var _u22=_y3;for(var _t232=0;_t232<_d4;_t232++)_p4.push(new Uint8Array(e,_u22,_r241)),_u22+=_r241;}return _p4.map(function(e){return new qa(e,{format:_f5,width:i,height:n,levels:o});});}throw s&ls?new Error("DDSParser does not support uncompressed texture data."):s&hs?new Error("DDSParser does not supported YUV uncompressed texture data."):s&cs?new Error("DDSParser does not support single-channel (lumninance) texture data!"):s&ss?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!");}var ms=[171,75,84,88,32,49,49,187,13,10,26,10],ws=67305985,bs={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},vs=64,xs=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},F.UNSIGNED_BYTE,1),F.UNSIGNED_SHORT,2),F.INT,4),F.UNSIGNED_INT,4),F.FLOAT,4),F.HALF_FLOAT,8),_s=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},M.RGBA,4),M.RGB,3),M.RG,2),M.RED,1),M.LUMINANCE,1),M.LUMINANCE_ALPHA,2),M.ALPHA,1),Is=_defineProperty(_defineProperty(_defineProperty({},F.UNSIGNED_SHORT_4_4_4_4,2),F.UNSIGNED_SHORT_5_5_5_1,2),F.UNSIGNED_SHORT_5_6_5,2);function As(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=new DataView(t);if(!function(e,t){for(var _r242=0;_r242<ms.length;_r242++)if(t.getUint8(_r242)!==ms[_r242])return console.error("".concat(e," is not a valid *.ktx file!")),!1;return!0;}(e,n))return null;var i=n.getUint32(bs.ENDIANNESS,!0)===ws,o=n.getUint32(bs.GL_TYPE,i),a=n.getUint32(bs.GL_FORMAT,i),s=n.getUint32(bs.GL_INTERNAL_FORMAT,i),u=n.getUint32(bs.PIXEL_WIDTH,i),l=n.getUint32(bs.PIXEL_HEIGHT,i)||1,h=n.getUint32(bs.PIXEL_DEPTH,i)||1,c=n.getUint32(bs.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(bs.NUMBER_OF_FACES,i),f=n.getUint32(bs.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(bs.BYTES_OF_KEY_VALUE_DATA,i);if(0===l||1!==h)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");var y=u+3&-4,g=l+3&-4,m=new Array(c);var w,b=u*l;if(0===o&&(b=y*g),w=0!==o?xs[o]?xs[o]*_s[a]:Is[o]:Ha[s],void 0===w)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");var v=r?function(e,t,r){var n=new Map();var i=0;for(;i<t;){var _o53=e.getUint32(vs+i,r),_a54=vs+i+4,_s34=3-(_o53+3)%4;if(0===_o53||_o53>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break;}var _u23=0;for(;_u23<_o53&&0!==e.getUint8(_a54+_u23);_u23++);if(-1===_u23){console.error("KTXLoader: Failed to find null byte terminating kvData key");break;}var _l15=new TextDecoder().decode(new Uint8Array(e.buffer,_a54,_u23)),_h12=new DataView(e.buffer,_a54+_u23+1,_o53-_u23-1);n.set(_l15,_h12),i+=4+_o53+_s34;}return n;}(n,p,i):null;var x=b*w,_=u,I=l,A=y,S=g,T=vs+p;for(var _e493=0;_e493<f;_e493++){var _r243=n.getUint32(T,i);var _a55=T+4;for(var _r244=0;_r244<c;_r244++){var _n112=m[_r244];_n112||(_n112=m[_r244]=new Array(f)),_n112[_e493]={levelID:_e493,levelWidth:f>1||0!==o?_:A,levelHeight:f>1||0!==o?I:S,levelBuffer:new Uint8Array(t,_a55,x)},_a55+=x;}T+=_r243+4,T=T%4!=0?T+4-T%4:T,_=_>>1||1,I=I>>1||1,A=_+4-1&-4,S=I+4-1&-4,x=A*S*w;}return 0!==o?{uncompressed:m.map(function(e){var t=e[0].levelBuffer,r=!1;return o===F.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===F.UNSIGNED_INT?(r=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===F.INT&&(r=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new nr(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:r?Ss(a):a};}),kvData:v}:{compressed:m.map(function(e){return new qa(null,{format:s,width:u,height:l,levels:f,levelBuffers:e});}),kvData:v};}function Ss(e){switch(e){case M.RGBA:return M.RGBA_INTEGER;case M.RGB:return M.RGB_INTEGER;case M.RG:return M.RG_INTEGER;case M.RED:return M.RED_INTEGER;default:return e;}}var Ts={extension:{type:Vt.LoadParser,priority:Qo.High},name:"loadDDS",test:function test(e){return Ko(e,".dds");},load:function load(e,t,r){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee120(){var n;return _regeneratorRuntime().wrap(function _callee120$(_context123){while(1)switch(_context123.prev=_context123.next){case 0:_context123.t0=gs;_context123.next=3;return J.ADAPTER.fetch(e);case 3:_context123.next=5;return _context123.sent.arrayBuffer();case 5:_context123.t1=_context123.sent;n=(0,_context123.t0)(_context123.t1).map(function(n){return ma(new ar(n,_objectSpread({mipmap:G.OFF,alphaMode:z.NO_PREMULTIPLIED_ALPHA,resolution:zt(e)},t.data)),r,e);});return _context123.abrupt("return",1===n.length?n[0]:n);case 8:case"end":return _context123.stop();}},_callee120);}))();},unload:function unload(e){Array.isArray(e)?e.forEach(function(e){return e.destroy(!0);}):e.destroy(!0);}};Yt.add(Ts);var Cs={extension:{type:Vt.LoadParser,priority:Qo.High},name:"loadKTX",test:function test(e){return Ko(e,".ktx");},load:function load(e,t,r){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee121(){var n,_As,i,o,a,s,u,l;return _regeneratorRuntime().wrap(function _callee121$(_context124){while(1)switch(_context124.prev=_context124.next){case 0:_context124.next=2;return J.ADAPTER.fetch(e);case 2:_context124.next=4;return _context124.sent.arrayBuffer();case 4:n=_context124.sent;_As=As(e,n);i=_As.compressed;o=_As.uncompressed;a=_As.kvData;s=i!==null&&i!==void 0?i:o;u=_objectSpread({mipmap:G.OFF,alphaMode:z.NO_PREMULTIPLIED_ALPHA,resolution:zt(e)},t.data);l=s.map(function(t){var _t$resource;s===o&&Object.assign(u,{type:t.type,format:t.format});var n=(_t$resource=t.resource)!==null&&_t$resource!==void 0?_t$resource:t,i=new ar(n,u);return i.ktxKeyValueData=a,ma(i,r,e);});return _context124.abrupt("return",1===l.length?l[0]:l);case 13:case"end":return _context124.stop();}},_callee121);}))();},unload:function unload(e){Array.isArray(e)?e.forEach(function(e){return e.destroy(!0);}):e.destroy(!0);}};Yt.add(Cs);var Es={extension:Vt.ResolveParser,test:function test(e){var t=Se.extname(e).slice(1);return["basis","ktx","dds"].includes(t);},parse:function parse(e){var _J$RETINA_PREFIX$exec5,_J$RETINA_PREFIX$exec6;var t=Se.extname(e).slice(1);if("ktx"===t){var _J$RETINA_PREFIX$exec3,_J$RETINA_PREFIX$exec4;var _t233=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx",".bptc.ktx"];if(_t233.some(function(t){return e.endsWith(t);}))return{resolution:parseFloat((_J$RETINA_PREFIX$exec3=(_J$RETINA_PREFIX$exec4=J.RETINA_PREFIX.exec(e))===null||_J$RETINA_PREFIX$exec4===void 0?void 0:_J$RETINA_PREFIX$exec4[1])!==null&&_J$RETINA_PREFIX$exec3!==void 0?_J$RETINA_PREFIX$exec3:"1"),format:_t233.find(function(t){return e.endsWith(t);}),src:e};}return{resolution:parseFloat((_J$RETINA_PREFIX$exec5=(_J$RETINA_PREFIX$exec6=J.RETINA_PREFIX.exec(e))===null||_J$RETINA_PREFIX$exec6===void 0?void 0:_J$RETINA_PREFIX$exec6[1])!==null&&_J$RETINA_PREFIX$exec5!==void 0?_J$RETINA_PREFIX$exec5:"1"),format:t,src:e};}};Yt.add(Es);var Os=new Ir(),ks=/*#__PURE__*/function(){function e(_e494){_classCallCheck(this,e);this.renderer=_e494,this._rendererPremultipliedAlpha=!1;}_createClass(e,[{key:"contextChange",value:function contextChange(){var _this$renderer10;var _e495=(_this$renderer10=this.renderer)===null||_this$renderer10===void 0?void 0:_this$renderer10.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_e495&&_e495.alpha&&_e495.premultipliedAlpha);}},{key:"image",value:function(){var _image=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee122(_e496,t,r,n){var i;return _regeneratorRuntime().wrap(function _callee122$(_context125){while(1)switch(_context125.prev=_context125.next){case 0:i=new Image();_context125.next=3;return this.base64(_e496,t,r,n);case 3:i.src=_context125.sent;return _context125.abrupt("return",i);case 5:case"end":return _context125.stop();}},_callee122,this);}));function image(_x138,_x139,_x140,_x141){return _image.apply(this,arguments);}return image;}()},{key:"base64",value:function(){var _base=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee123(_e497,t,r,n){var i,_e499;return _regeneratorRuntime().wrap(function _callee123$(_context126){while(1)switch(_context126.prev=_context126.next){case 0:i=this.canvas(_e497,n);if(!(void 0!==i.toBlob)){_context126.next=3;break;}return _context126.abrupt("return",new Promise(function(_e498,n){i.toBlob(function(t){if(!t)return void n(new Error("ICanvas.toBlob failed!"));var r=new FileReader();r.onload=function(){return _e498(r.result);},r.onerror=n,r.readAsDataURL(t);},t,r);}));case 3:if(!(void 0!==i.toDataURL)){_context126.next=5;break;}return _context126.abrupt("return",i.toDataURL(t,r));case 5:if(!(void 0!==i.convertToBlob)){_context126.next=10;break;}_context126.next=8;return i.convertToBlob({type:t,quality:r});case 8:_e499=_context126.sent;return _context126.abrupt("return",new Promise(function(t,r){var n=new FileReader();n.onload=function(){return t(n.result);},n.onerror=r,n.readAsDataURL(_e499);}));case 10:throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented");case 11:case"end":return _context126.stop();}},_callee123,this);}));function base64(_x142,_x143,_x144,_x145){return _base.apply(this,arguments);}return base64;}()},{key:"canvas",value:function canvas(t,r){var _this$_rawPixels=this._rawPixels(t,r),n=_this$_rawPixels.pixels,i=_this$_rawPixels.width,o=_this$_rawPixels.height,a=_this$_rawPixels.flipY,s=_this$_rawPixels.premultipliedAlpha;a&&e._flipY(n,i,o),s&&e._unpremultiplyAlpha(n);var u=new Mt(i,o,1),l=new ImageData(new Uint8ClampedArray(n.buffer),i,o);return u.context.putImageData(l,0,0),u.canvas;}},{key:"pixels",value:function pixels(t,r){var _this$_rawPixels2=this._rawPixels(t,r),n=_this$_rawPixels2.pixels,i=_this$_rawPixels2.width,o=_this$_rawPixels2.height,a=_this$_rawPixels2.flipY,s=_this$_rawPixels2.premultipliedAlpha;return a&&e._flipY(n,i,o),s&&e._unpremultiplyAlpha(n),n;}},{key:"_rawPixels",value:function _rawPixels(_e500,t){var _i83;var r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");var n,i,o=!1,a=!1,s=!1;_e500&&(_e500 instanceof Tn?i=_e500:(i=r.generateTexture(_e500,{region:t,resolution:r.resolution,multisample:r.multisample}),s=!0,t&&(Os.width=t.width,Os.height=t.height,t=Os)));var u=r.gl;if(i){var _t234;if(n=i.baseTexture.resolution,t=(_t234=t)!==null&&_t234!==void 0?_t234:i.frame,o=!1,a=i.baseTexture.alphaMode>0&&i.baseTexture.format===M.RGBA,!s){r.renderTexture.bind(i);var _e501=i.framebuffer.glFramebuffers[r.CONTEXT_UID];_e501.blitFramebuffer&&r.framebuffer.bind(_e501.blitFramebuffer);}}else n=r.resolution,t||((t=Os).width=r.width/n,t.height=r.height/n),o=!0,a=this._rendererPremultipliedAlpha,r.renderTexture.bind();var l=Math.max(Math.round(t.width*n),1),h=Math.max(Math.round(t.height*n),1),c=new Uint8Array(4*l*h);return u.readPixels(Math.round(t.x*n),Math.round(t.y*n),l,h,u.RGBA,u.UNSIGNED_BYTE,c),s&&(_i83=i)!==null&&_i83!==void 0&&_i83.destroy(!0),{pixels:c,width:l,height:h,flipY:o,premultipliedAlpha:a};}},{key:"destroy",value:function destroy(){this.renderer=null;}}],[{key:"_flipY",value:function _flipY(_e502,t,r){var n=t<<2,i=r>>1,o=new Uint8Array(n);for(var _t235=0;_t235<i;_t235++){var _i84=_t235*n,_a56=(r-_t235-1)*n;o.set(_e502.subarray(_i84,_i84+n)),_e502.copyWithin(_i84,_a56,_a56+n),_e502.set(o,_a56);}}},{key:"_unpremultiplyAlpha",value:function _unpremultiplyAlpha(_e503){_e503 instanceof Uint8ClampedArray&&(_e503=new Uint8Array(_e503.buffer));var t=_e503.length;for(var _r245=0;_r245<t;_r245+=4){var _t236=_e503[_r245+3];if(0!==_t236){var n=255.001/_t236;_e503[_r245]=_e503[_r245]*n+.5,_e503[_r245+1]=_e503[_r245+1]*n+.5,_e503[_r245+2]=_e503[_r245+2]*n+.5;}}}}]);return e;}();ks.extension={name:"extract",type:Vt.RendererSystem};var Ps=ks;Yt.add(Ps);var $s={build:function build(e){var t=e.points;var r,n,i,o,a,s;if(e.type===vr.CIRC){var _t237=e.shape;r=_t237.x,n=_t237.y,a=s=_t237.radius,i=o=0;}else if(e.type===vr.ELIP){var _t238=e.shape;r=_t238.x,n=_t238.y,a=_t238.width,s=_t238.height,i=o=0;}else{var _t239=e.shape,_u24=_t239.width/2,_l16=_t239.height/2;r=_t239.x+_u24,n=_t239.y+_l16,a=s=Math.max(0,Math.min(_t239.radius,Math.min(_u24,_l16))),i=_u24-a,o=_l16-s;}if(!(a>=0&&s>=0&&i>=0&&o>=0))return void(t.length=0);var u=Math.ceil(2.3*Math.sqrt(a+s)),l=8*u+(i?4:0)+(o?4:0);if(t.length=l,0===l)return;if(0===u)return t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+o,t[2]=t[4]=r-i,void(t[5]=t[7]=n-o);var h=0,c=4*u+(i?2:0)+2,d=c,f=l;{var _e504=i+a,_s35=o,_u25=r+_e504,_l17=r-_e504,_p5=n+_s35;if(t[h++]=_u25,t[h++]=_p5,t[--c]=_p5,t[--c]=_l17,o){var _e505=n-_s35;t[d++]=_l17,t[d++]=_e505,t[--f]=_e505,t[--f]=_u25;}}for(var _e506=1;_e506<u;_e506++){var _l18=Math.PI/2*(_e506/u),_p6=i+Math.cos(_l18)*a,_y4=o+Math.sin(_l18)*s,_g3=r+_p6,_m3=r-_p6,_w2=n+_y4,_b3=n-_y4;t[h++]=_g3,t[h++]=_w2,t[--c]=_w2,t[--c]=_m3,t[d++]=_m3,t[d++]=_b3,t[--f]=_b3,t[--f]=_g3;}{var _e507=o+s,_a57=r+i,_u26=r-i,_l19=n+_e507,_c6=n-_e507;t[h++]=_a57,t[h++]=_l19,t[--f]=_c6,t[--f]=_a57,i&&(t[h++]=_u26,t[h++]=_l19,t[--f]=_c6,t[--f]=_u26);}},triangulate:function triangulate(e,t){var r=e.points,n=t.points,i=t.indices;if(0===r.length)return;var o=n.length/2;var a=o;var s,u;if(e.type!==vr.RREC){var _t240=e.shape;s=_t240.x,u=_t240.y;}else{var _t241=e.shape;s=_t241.x+_t241.width/2,u=_t241.y+_t241.height/2;}var l=e.matrix;n.push(e.matrix?l.a*s+l.c*u+l.tx:s,e.matrix?l.b*s+l.d*u+l.ty:u),o++,n.push(r[0],r[1]);for(var _e508=2;_e508<r.length;_e508+=2)n.push(r[_e508],r[_e508+1]),i.push(o++,a,o);i.push(a+1,a,o);}};function Rs(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var r=e.length;if(r<6)return;var n=0;for(var _t242=0,i=e[r-2],_o54=e[r-1];_t242<r;_t242+=2){var _r246=e[_t242],_a58=e[_t242+1];n+=(_r246-i)*(_a58+_o54),i=_r246,_o54=_a58;}if(!t&&n>0||t&&n<=0){var _t243=r/2;for(var _n113=_t243+_t243%2;_n113<r;_n113+=2){var _ref56,_ref57;var _t244=r-_n113-2,_i85=r-_n113-1,_o55=_n113,_a59=_n113+1;(_ref56=[e[_o55],e[_t244]],e[_t244]=_ref56[0],e[_o55]=_ref56[1]),(_ref57=[e[_a59],e[_i85]],e[_i85]=_ref57[0],e[_a59]=_ref57[1]);}}}var Bs={build:function build(e){e.points=e.shape.points.slice();},triangulate:function triangulate(e,t){var r=e.points;var n=e.holes,i=t.points,o=t.indices;if(r.length>=6){Rs(r,!1);var _e509=[];for(var _t245=0;_t245<n.length;_t245++){var _i86=n[_t245];Rs(_i86.points,!0),_e509.push(r.length/2),r=r.concat(_i86.points);}var _t246=we(r,_e509,2);if(!_t246)return;var _a60=i.length/2;for(var _e510=0;_e510<_t246.length;_e510+=3)o.push(_t246[_e510]+_a60),o.push(_t246[_e510+1]+_a60),o.push(_t246[_e510+2]+_a60);for(var _e511=0;_e511<r.length;_e511++)i.push(r[_e511]);}}},Ds={build:function build(e){var t=e.shape,r=t.x,n=t.y,i=t.width,o=t.height,a=e.points;a.length=0,i>=0&&o>=0&&a.push(r,n,r+i,n,r+i,n+o,r,n+o);},triangulate:function triangulate(e,t){var r=e.points,n=t.points;if(0===r.length)return;var i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3);}},Ms={build:function build(e){$s.build(e);},triangulate:function triangulate(e,t){$s.triangulate(e,t);}};var Ls=function(e){return e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e;}(Ls||{}),Fs=function(e){return e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e;}(Fs||{});var Ns={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function _segmentsCount(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;if(!this.adaptive||!e||isNaN(e))return t;var r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r;}},Us=Ns;var js=/*#__PURE__*/function(){function js(){_classCallCheck(this,js);}_createClass(js,null,[{key:"curveTo",value:function curveTo(e,t,r,n,i,o){var a=o[o.length-2],s=o[o.length-1]-t,u=a-e,l=n-t,h=r-e,c=Math.abs(s*h-u*l);if(c<1e-8||0===i)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;var d=s*s+u*u,f=l*l+h*h,p=s*l+u*h,y=i*Math.sqrt(d)/c,g=i*Math.sqrt(f)/c,m=y*p/d,w=g*p/f,b=y*h+g*u,v=y*l+g*s,x=u*(g+m),_=s*(g+m),I=h*(y+w),A=l*(y+w);return{cx:b+e,cy:v+t,radius:i,startAngle:Math.atan2(_-v,x-b),endAngle:Math.atan2(A-v,I-b),anticlockwise:u*l>h*s};}},{key:"arc",value:function arc(e,t,r,n,i,o,a,s,u){var l=a-o,h=Ns._segmentsCount(Math.abs(l)*i,40*Math.ceil(Math.abs(l)/mr)),c=l/(2*h),d=2*c,f=Math.cos(c),p=Math.sin(c),y=h-1,g=y%1/y;for(var _e512=0;_e512<=y;++_e512){var _t247=c+o+d*(_e512+g*_e512),_a61=Math.cos(_t247),_s36=-Math.sin(_t247);u.push((f*_a61+p*_s36)*i+r,(f*-_s36+p*_a61)*i+n);}}}]);return js;}();var Gs=/*#__PURE__*/function(){function Gs(){_classCallCheck(this,Gs);}_createClass(Gs,null,[{key:"curveLength",value:function curveLength(e,t,r,n,i,o,a,s){var u=0,l=0,h=0,c=0,d=0,f=0,p=0,y=0,g=0,m=0,w=0,b=e,v=t;for(var _x146=1;_x146<=10;++_x146)l=_x146/10,h=l*l,c=h*l,d=1-l,f=d*d,p=f*d,y=p*e+3*f*l*r+3*d*h*i+c*a,g=p*t+3*f*l*n+3*d*h*o+c*s,m=b-y,w=v-g,b=y,v=g,u+=Math.sqrt(m*m+w*w);return u;}},{key:"curveTo",value:function curveTo(e,t,r,n,i,o,a){var s=a[a.length-2],u=a[a.length-1];a.length-=2;var l=Ns._segmentsCount(Gs.curveLength(s,u,e,t,r,n,i,o));var h=0,c=0,d=0,f=0,p=0;a.push(s,u);for(var _y5=1,_g4=0;_y5<=l;++_y5)_g4=_y5/l,h=1-_g4,c=h*h,d=c*h,f=_g4*_g4,p=f*_g4,a.push(d*s+3*c*_g4*e+3*h*f*r+p*i,d*u+3*c*_g4*t+3*h*f*n+p*o);}}]);return Gs;}();function zs(e,t,r,n,i,o,a,s){var u,l;a?(u=n,l=-r):(u=-n,l=r);var h=e-r*i+u,c=t-n*i+l,d=e+r*o+u,f=t+n*o+l;return s.push(h,c,d,f),2;}function Vs(e,t,r,n,i,o,a,s){var u=r-e,l=n-t;var h=Math.atan2(u,l),c=Math.atan2(i-e,o-t);s&&h<c?h+=2*Math.PI:!s&&h>c&&(c+=2*Math.PI);var d=h;var f=c-h,p=Math.abs(f),y=Math.sqrt(u*u+l*l),g=1+(15*p*Math.sqrt(y)/Math.PI>>0),m=f/g;if(d+=m,s){a.push(e,t,r,n);for(var _r247=1,_n114=d;_r247<g;_r247++,_n114+=m)a.push(e,t,e+Math.sin(_n114)*y,t+Math.cos(_n114)*y);a.push(e,t,i,o);}else{a.push(r,n,e,t);for(var _r248=1,_n115=d;_r248<g;_r248++,_n115+=m)a.push(e+Math.sin(_n115)*y,t+Math.cos(_n115)*y,e,t);a.push(i,o,e,t);}return 2*g;}function Hs(e,t){e.lineStyle["native"]?function(e,t){var r=0;var n=e.shape,i=e.points||n.points,o=n.type!==vr.POLY||n.closeStroke;if(0===i.length)return;var a=t.points,s=t.indices,u=i.length/2,l=a.length/2;var h=l;for(a.push(i[0],i[1]),r=1;r<u;r++)a.push(i[2*r],i[2*r+1]),s.push(h,h+1),h++;o&&s.push(h,l);}(e,t):function(e,t){var r=e.shape;var n=e.points||r.points.slice();var i=t.closePointEps;if(0===n.length)return;var o=e.lineStyle,a=new xr(n[0],n[1]),s=new xr(n[n.length-2],n[n.length-1]),u=r.type!==vr.POLY||r.closeStroke,l=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(u){n=n.slice(),l&&(n.pop(),n.pop(),s.set(n[n.length-2],n[n.length-1]));var _e513=.5*(a.x+s.x),_t248=.5*(s.y+a.y);n.unshift(_e513,_t248),n.push(_e513,_t248);}var h=t.points,c=n.length/2;var d=n.length;var f=h.length/2,p=o.width/2,y=p*p,g=o.miterLimit*o.miterLimit;var m=n[0],w=n[1],b=n[2],v=n[3],x=0,_=0,I=-(w-v),A=m-b,S=0,T=0,C=Math.sqrt(I*I+A*A);I/=C,A/=C,I*=p,A*=p;var E=o.alignment,O=2*(1-E),k=2*E;u||(o.cap===Fs.ROUND?d+=Vs(m-I*(O-k)*.5,w-A*(O-k)*.5,m-I*O,w-A*O,m+I*k,w+A*k,h,!0)+2:o.cap===Fs.SQUARE&&(d+=zs(m,w,I,A,O,k,!0,h))),h.push(m-I*O,w-A*O,m+I*k,w+A*k);for(var _e514=1;_e514<c-1;++_e514){m=n[2*(_e514-1)],w=n[2*(_e514-1)+1],b=n[2*_e514],v=n[2*_e514+1],x=n[2*(_e514+1)],_=n[2*(_e514+1)+1],I=-(w-v),A=m-b,C=Math.sqrt(I*I+A*A),I/=C,A/=C,I*=p,A*=p,S=-(v-_),T=b-x,C=Math.sqrt(S*S+T*T),S/=C,T/=C,S*=p,T*=p;var _t249=b-m,_r249=w-v,_i87=b-x,_a62=_-v,_s37=_t249*_i87+_r249*_a62,_u27=_r249*_i87-_a62*_t249,_l20=_u27<0;if(Math.abs(_u27)<.001*Math.abs(_s37)){h.push(b-I*O,v-A*O,b+I*k,v+A*k),_s37>=0&&(o.join===Ls.ROUND?d+=Vs(b,v,b-I*O,v-A*O,b-S*O,v-T*O,h,!1)+4:d+=2,h.push(b-S*k,v-T*k,b+S*O,v+T*O));continue;}var _c7=(-I+m)*(-A+v)-(-I+b)*(-A+w),_f6=(-S+x)*(-T+v)-(-S+b)*(-T+_),_E2=(_t249*_f6-_i87*_c7)/_u27,_P=(_a62*_c7-_r249*_f6)/_u27,_$=(_E2-b)*(_E2-b)+(_P-v)*(_P-v),_R=b+(_E2-b)*O,_B=v+(_P-v)*O,_D=b-(_E2-b)*k,_M=v-(_P-v)*k,_L=_l20?O:k,_F=_$<=Math.min(_t249*_t249+_r249*_r249,_i87*_i87+_a62*_a62)+_L*_L*y;var _N=o.join;if(_N===Ls.MITER&&_$/y>g&&(_N=Ls.BEVEL),_F)switch(_N){case Ls.MITER:h.push(_R,_B,_D,_M);break;case Ls.BEVEL:_l20?h.push(_R,_B,b+I*k,v+A*k,_R,_B,b+S*k,v+T*k):h.push(b-I*O,v-A*O,_D,_M,b-S*O,v-T*O,_D,_M),d+=2;break;case Ls.ROUND:_l20?(h.push(_R,_B,b+I*k,v+A*k),d+=Vs(b,v,b+I*k,v+A*k,b+S*k,v+T*k,h,!0)+4,h.push(_R,_B,b+S*k,v+T*k)):(h.push(b-I*O,v-A*O,_D,_M),d+=Vs(b,v,b-I*O,v-A*O,b-S*O,v-T*O,h,!1)+4,h.push(b-S*O,v-T*O,_D,_M));}else{switch(h.push(b-I*O,v-A*O,b+I*k,v+A*k),_N){case Ls.MITER:_l20?h.push(_D,_M,_D,_M):h.push(_R,_B,_R,_B),d+=2;break;case Ls.ROUND:d+=_l20?Vs(b,v,b+I*k,v+A*k,b+S*k,v+T*k,h,!0)+2:Vs(b,v,b-I*O,v-A*O,b-S*O,v-T*O,h,!1)+2;}h.push(b-S*O,v-T*O,b+S*k,v+T*k),d+=2;}}m=n[2*(c-2)],w=n[2*(c-2)+1],b=n[2*(c-1)],v=n[2*(c-1)+1],I=-(w-v),A=m-b,C=Math.sqrt(I*I+A*A),I/=C,A/=C,I*=p,A*=p,h.push(b-I*O,v-A*O,b+I*k,v+A*k),u||(o.cap===Fs.ROUND?d+=Vs(b-I*(O-k)*.5,v-A*(O-k)*.5,b-I*O,v-A*O,b+I*k,v+A*k,h,!1)+2:o.cap===Fs.SQUARE&&(d+=zs(b,v,I,A,O,k,!1,h)));var P=t.indices,$=Ns.epsilon*Ns.epsilon;for(var _e515=f;_e515<d+f-2;++_e515)m=h[2*_e515],w=h[2*_e515+1],b=h[2*(_e515+1)],v=h[2*(_e515+1)+1],x=h[2*(_e515+2)],_=h[2*(_e515+2)+1],!(Math.abs(m*(v-_)+b*(_-w)+x*(w-v))<$)&&P.push(_e515,_e515+1,_e515+2);}(e,t);}var Ws=/*#__PURE__*/function(){function Ws(){_classCallCheck(this,Ws);}_createClass(Ws,null,[{key:"curveLength",value:function curveLength(e,t,r,n,i,o){var a=e-2*r+i,s=t-2*n+o,u=2*r-2*e,l=2*n-2*t,h=4*(a*a+s*s),c=4*(a*u+s*l),d=u*u+l*l,f=2*Math.sqrt(h+c+d),p=Math.sqrt(h),y=2*h*p,g=2*Math.sqrt(d),m=c/p;return(y*f+p*c*(f-g)+(4*d*h-c*c)*Math.log((2*p+m+f)/(m+g)))/(4*y);}},{key:"curveTo",value:function curveTo(e,t,r,n,i){var o=i[i.length-2],a=i[i.length-1],s=Ns._segmentsCount(Ws.curveLength(o,a,e,t,r,n));var u=0,l=0;for(var _h13=1;_h13<=s;++_h13){var _c8=_h13/s;u=o+(e-o)*_c8,l=a+(t-a)*_c8,i.push(u+(e+(r-e)*_c8-u)*_c8,l+(t+(n-t)*_c8-l)*_c8);}}}]);return Ws;}();var Ys=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},vr.POLY,Bs),vr.CIRC,$s),vr.ELIP,$s),vr.RECT,Ds),vr.RREC,Ms),Ks=[],Xs=[];var Zs=/*#__PURE__*/function(){function Zs(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;_classCallCheck(this,Zs);this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=n,this.type=e.type;}_createClass(Zs,[{key:"clone",value:function clone(){return new Zs(this.shape,this.fillStyle,this.lineStyle,this.matrix);}},{key:"destroy",value:function destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null;}}]);return Zs;}();var qs=/*#__PURE__*/function(){function qs(){_classCallCheck(this,qs);this.reset();}_createClass(qs,[{key:"begin",value:function begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r;}},{key:"end",value:function end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start;}},{key:"reset",value:function reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0;}}]);return qs;}();var Js=new xr(),Qs=/*#__PURE__*/function(_gr){_inherits(e,_gr);function e(){var _this118;_classCallCheck(this,e);_this118=_callSuper(this,e),_this118.closePointEps=1e-4,_this118.boundsPadding=0,_this118.uvsFloat32=null,_this118.indicesUint16=null,_this118.batchable=!1,_this118.points=[],_this118.colors=[],_this118.uvs=[],_this118.indices=[],_this118.textureIds=[],_this118.graphicsData=[],_this118.drawCalls=[],_this118.batchDirty=-1,_this118.batches=[],_this118.dirty=0,_this118.cacheDirty=-1,_this118.clearDirty=0,_this118.shapeIndex=0,_this118._bounds=new oo(),_this118.boundsDirty=-1;return _this118;}_createClass(e,[{key:"bounds",get:function get(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds;}},{key:"invalidate",value:function invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var _e542=0;_e542<this.drawCalls.length;_e542++)this.drawCalls[_e542].texArray.clear(),Xs.push(this.drawCalls[_e542]);this.drawCalls.length=0;for(var _e543=0;_e543<this.batches.length;_e543++){var _t250=this.batches[_e543];_t250.reset(),Ks.push(_t250);}this.batches.length=0;}},{key:"clear",value:function clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this;}},{key:"drawShape",value:function drawShape(_e518){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=new Zs(_e518,t,r,n);return this.graphicsData.push(i),this.dirty++,this;}},{key:"drawHole",value:function drawHole(_e519){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!this.graphicsData.length)return null;var r=new Zs(_e519,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this;}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(e.prototype),"destroy",this).call(this);for(var _e544=0;_e544<this.graphicsData.length;++_e544)this.graphicsData[_e544].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null;}},{key:"containsPoint",value:function containsPoint(_e521){var t=this.graphicsData;for(var _r250=0;_r250<t.length;++_r250){var n=t[_r250];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(_e521,Js):Js.copyFrom(_e521),n.shape.contains(Js.x,Js.y))){var _e522=!1;if(n.holes)for(var _t251=0;_t251<n.holes.length;_t251++)if(n.holes[_t251].shape.contains(Js.x,Js.y)){_e522=!0;break;}if(!_e522)return!0;}}return!1;}},{key:"updateBatches",value:function updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;var _e523=this.uvs,t=this.graphicsData;var r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(var _i88=this.shapeIndex;_i88<t.length;_i88++){this.shapeIndex++;var _o56=t[_i88],_a63=_o56.fillStyle,_s38=_o56.lineStyle;Ys[_o56.type].build(_o56),_o56.matrix&&this.transformPoints(_o56.points,_o56.matrix),(_a63.visible||_s38.visible)&&this.processHoles(_o56.holes);for(var _t252=0;_t252<2;_t252++){var _i89=0===_t252?_a63:_s38;if(!_i89.visible)continue;var _u28=_i89.texture.baseTexture,_l21=this.indices.length,_h14=this.points.length/2;_u28.wrapMode=j.REPEAT,0===_t252?this.processFill(_o56):this.processLine(_o56);var _c9=this.points.length/2-_h14;0!==_c9&&(r&&!this._compareStyles(n,_i89)&&(r.end(_l21,_h14),r=null),r||(r=Ks.pop()||new qs(),r.begin(_i89,_l21,_h14),this.batches.push(r),n=_i89),this.addUvs(this.points,_e523,_i89.texture,_h14,_c9,_i89.matrix));}}var i=this.indices.length,o=this.points.length/2;if(r&&r.end(i,o),0===this.batches.length)return void(this.batchable=!0);var a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls();}},{key:"_compareStyles",value:function _compareStyles(_e524,t){return!(!_e524||!t||_e524.texture.baseTexture!==t.texture.baseTexture||_e524.color+_e524.alpha!==t.color+t.alpha||!!_e524["native"]!=!!t["native"]);}},{key:"validateBatching",value:function validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var _e545=0,_t253=this.graphicsData.length;_e545<_t253;_e545++){var _t254=this.graphicsData[_e545],_r251=_t254.fillStyle,n=_t254.lineStyle;if(_r251&&!_r251.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1;}return!0;}},{key:"packBatches",value:function packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);var _e526=this.batches;for(var _t255=0,_r252=_e526.length;_t255<_r252;_t255++){var _r253=_e526[_t255];for(var _e546=0;_e546<_r253.size;_e546++){var _t256=_r253.start+_e546;this.indicesUint16[_t256]=this.indicesUint16[_t256]-_r253.attribStart;}}}},{key:"isBatchable",value:function isBatchable(){if(this.points.length>131070)return!1;var t=this.batches;for(var _e547=0;_e547<t.length;_e547++)if(t[_e547].style["native"])return!1;return this.points.length<2*e.BATCHABLE_SIZE;}},{key:"buildDrawCalls",value:function buildDrawCalls(){var _e529=++ar._globalBatch;for(var _e548=0;_e548<this.drawCalls.length;_e548++)this.drawCalls[_e548].texArray.clear(),Xs.push(this.drawCalls[_e548]);this.drawCalls.length=0;var t=this.colors,r=this.textureIds;var n=Xs.pop();n||(n=new sr(),n.texArray=new un()),n.texArray.count=0,n.start=0,n.size=0,n.type=D.TRIANGLES;var i=0,o=null,a=0,s=!1,u=D.TRIANGLES,l=0;this.drawCalls.push(n);for(var _h15=0;_h15<this.batches.length;_h15++){var _c10=this.batches[_h15],_d5=8,_f7=_c10.style,_p7=_f7.texture.baseTexture;s!==!!_f7["native"]&&(s=!!_f7["native"],u=s?D.LINES:D.TRIANGLES,o=null,i=_d5,_e529++),o!==_p7&&(o=_p7,_p7._batchEnabled!==_e529&&(i===_d5&&(_e529++,i=0,n.size>0&&(n=Xs.pop(),n||(n=new sr(),n.texArray=new un()),this.drawCalls.push(n)),n.start=l,n.size=0,n.texArray.count=0,n.type=u),_p7.touched=1,_p7._batchEnabled=_e529,_p7._batchLocation=i,_p7.wrapMode=j.REPEAT,n.texArray.elements[n.texArray.count++]=_p7,i++)),n.size+=_c10.size,l+=_c10.size,a=_p7._batchLocation,this.addColors(t,_f7.color,_f7.alpha,_c10.attribSize,_c10.attribStart),this.addTextureIds(r,a,_c10.attribSize,_c10.attribStart);}ar._globalBatch=_e529,this.packAttributes();}},{key:"packAttributes",value:function packAttributes(){var _e531=this.points,t=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(3*_e531.length*4),o=new Float32Array(i),a=new Uint32Array(i);var s=0;for(var _i90=0;_i90<_e531.length/2;_i90++)o[s++]=_e531[2*_i90],o[s++]=_e531[2*_i90+1],o[s++]=t[2*_i90],o[s++]=t[2*_i90+1],a[s++]=r[_i90],o[s++]=n[_i90];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16);}},{key:"processFill",value:function processFill(_e532){_e532.holes.length?Bs.triangulate(_e532,this):Ys[_e532.type].triangulate(_e532,this);}},{key:"processLine",value:function processLine(_e533){Hs(_e533,this);for(var _t257=0;_t257<_e533.holes.length;_t257++)Hs(_e533.holes[_t257],this);}},{key:"processHoles",value:function processHoles(_e534){for(var _t258=0;_t258<_e534.length;_t258++){var _r254=_e534[_t258];Ys[_r254.type].build(_r254),_r254.matrix&&this.transformPoints(_r254.points,_r254.matrix);}}},{key:"calculateBounds",value:function calculateBounds(){var _e535=this._bounds;_e535.clear(),_e535.addVertexData(this.points,0,this.points.length),_e535.pad(this.boundsPadding,this.boundsPadding);}},{key:"transformPoints",value:function transformPoints(_e536,t){for(var _r255=0;_r255<_e536.length/2;_r255++){var n=_e536[2*_r255],i=_e536[2*_r255+1];_e536[2*_r255]=t.a*n+t.c*i+t.tx,_e536[2*_r255+1]=t.b*n+t.d*i+t.ty;}}},{key:"addColors",value:function addColors(_e537,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=st.shared.setValue(t).toLittleEndianNumber(),a=st.shared.setValue(o).toPremultiplied(r);_e537.length=Math.max(_e537.length,i+n);for(var _t259=0;_t259<n;_t259++)_e537[i+_t259]=a;}},{key:"addTextureIds",value:function addTextureIds(_e538,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_e538.length=Math.max(_e538.length,n+r);for(var i=0;i<r;i++)_e538[n+i]=t;}},{key:"addUvs",value:function addUvs(_e539,t,r,n,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var a=0;var s=t.length,u=r.frame;for(;a<i;){var _r256=_e539[2*(n+a)],_i91=_e539[2*(n+a)+1];if(o){var _e540=o.a*_r256+o.c*_i91+o.tx;_i91=o.b*_r256+o.d*_i91+o.ty,_r256=_e540;}a++,t.push(_r256/u.width,_i91/u.height);}var l=r.baseTexture;(u.width<l.width||u.height<l.height)&&this.adjustUvs(t,r,s,i);}},{key:"adjustUvs",value:function adjustUvs(_e541,t,r,n){var i=t.baseTexture,o=1e-6,a=r+2*n,s=t.frame,u=s.width/i.width,l=s.height/i.height;var h=s.x/s.width,c=s.y/s.height,d=Math.floor(_e541[r]+o),f=Math.floor(_e541[r+1]+o);for(var _t260=r+2;_t260<a;_t260+=2)d=Math.min(d,Math.floor(_e541[_t260]+o)),f=Math.min(f,Math.floor(_e541[_t260+1]+o));h-=d,c-=f;for(var _t261=r;_t261<a;_t261+=2)_e541[_t261]=(_e541[_t261]+h)*u,_e541[_t261+1]=(_e541[_t261+1]+c)*l;}}]);return e;}(gr);Qs.BATCHABLE_SIZE=100;var eu=Qs;var tu=/*#__PURE__*/function(){function tu(){_classCallCheck(this,tu);this.color=16777215,this.alpha=1,this.texture=Sn.WHITE,this.matrix=null,this.visible=!1,this.reset();}_createClass(tu,[{key:"clone",value:function clone(){var e=new tu();return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e;}},{key:"reset",value:function reset(){this.color=16777215,this.alpha=1,this.texture=Sn.WHITE,this.matrix=null,this.visible=!1;}},{key:"destroy",value:function destroy(){this.texture=null,this.matrix=null;}}]);return tu;}();var ru=/*#__PURE__*/function(_tu){_inherits(ru,_tu);function ru(){var _this119;_classCallCheck(this,ru);_this119=_callSuper(this,ru,arguments),_this119.width=0,_this119.alignment=.5,_this119["native"]=!1,_this119.cap=Fs.BUTT,_this119.join=Ls.MITER,_this119.miterLimit=10;return _this119;}_createClass(ru,[{key:"clone",value:function clone(){var e=new ru();return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e["native"]=this["native"],e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e;}},{key:"reset",value:function reset(){_get(_getPrototypeOf(ru.prototype),"reset",this).call(this),this.color=0,this.alignment=.5,this.width=0,this["native"]=!1,this.cap=Fs.BUTT,this.join=Ls.MITER,this.miterLimit=10;}}]);return ru;}(tu);var nu={},iu=/*#__PURE__*/function(_co2){_inherits(e,_co2);function e(){var _this120;var _e549=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_classCallCheck(this,e);_this120=_callSuper(this,e),_this120.shader=null,_this120.pluginName="batch",_this120.currentPath=null,_this120.batches=[],_this120.batchTint=-1,_this120.batchDirty=-1,_this120.vertexData=null,_this120._fillStyle=new tu(),_this120._lineStyle=new ru(),_this120._matrix=null,_this120._holeMode=!1,_this120.state=Jt.for2d(),_this120._geometry=_e549||new eu(),_this120._geometry.refCount++,_this120._transformID=-1,_this120._tintColor=new st(16777215),_this120.blendMode=B.NORMAL;return _this120;}_createClass(e,[{key:"geometry",get:function get(){return this._geometry;}},{key:"clone",value:function clone(){return this.finishPoly(),new e(this._geometry);}},{key:"blendMode",get:function get(){return this.state.blendMode;},set:function set(_e550){this.state.blendMode=_e550;}},{key:"tint",get:function get(){return this._tintColor.value;},set:function set(_e551){this._tintColor.setValue(_e551);}},{key:"fill",get:function get(){return this._fillStyle;}},{key:"line",get:function get(){return this._lineStyle;}},{key:"lineStyle",value:function lineStyle(){var _e552=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var r=arguments.length>2?arguments[2]:undefined;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:.5;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;return"number"==typeof _e552&&(_e552={width:_e552,color:t,alpha:r,alignment:n,"native":i}),this.lineTextureStyle(_e552);}},{key:"lineTextureStyle",value:function lineTextureStyle(_e553){var _e588;var t={width:0,texture:Sn.WHITE,color:(_e588=_e553)!==null&&_e588!==void 0&&_e588.texture?16777215:0,matrix:null,alignment:.5,"native":!1,cap:Fs.BUTT,join:Ls.MITER,miterLimit:10};_e553=Object.assign(t,_e553),this.normalizeColor(_e553),this.currentPath&&this.startPoly();var r=_e553.width>0&&_e553.alpha>0;return r?(_e553.matrix&&(_e553.matrix=_e553.matrix.clone(),_e553.matrix.invert()),Object.assign(this._lineStyle,{visible:r},_e553)):this._lineStyle.reset(),this;}},{key:"startPoly",value:function startPoly(){if(this.currentPath){var _e554=this.currentPath.points,_t262=this.currentPath.points.length;_t262>2&&(this.drawShape(this.currentPath),this.currentPath=new Tr(),this.currentPath.closeStroke=!1,this.currentPath.points.push(_e554[_t262-2],_e554[_t262-1]));}else this.currentPath=new Tr(),this.currentPath.closeStroke=!1;}},{key:"finishPoly",value:function finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0);}},{key:"moveTo",value:function moveTo(_e555,t){return this.startPoly(),this.currentPath.points[0]=_e555,this.currentPath.points[1]=t,this;}},{key:"lineTo",value:function lineTo(_e556,t){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return(n!==_e556||i!==t)&&r.push(_e556,t),this;}},{key:"_initCurve",value:function _initCurve(){var _e557=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[_e557,t]):this.moveTo(_e557,t);}},{key:"quadraticCurveTo",value:function quadraticCurveTo(_e558,t,r,n){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Ws.curveTo(_e558,t,r,n,i),this;}},{key:"bezierCurveTo",value:function bezierCurveTo(_e559,t,r,n,i,o){return this._initCurve(),Gs.curveTo(_e559,t,r,n,i,o,this.currentPath.points),this;}},{key:"arcTo",value:function arcTo(_e560,t,r,n,i){this._initCurve(_e560,t);var o=this.currentPath.points,a=js.curveTo(_e560,t,r,n,i,o);if(a){var _e561=a.cx,_t263=a.cy,_r257=a.radius,_n116=a.startAngle,_i92=a.endAngle,_o57=a.anticlockwise;this.arc(_e561,_t263,_r257,_n116,_i92,_o57);}return this;}},{key:"arc",value:function arc(_e562,t,r,n,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:!1;if(n===i)return this;if(!o&&i<=n?i+=mr:o&&n<=i&&(n+=mr),i-n==0)return this;var a=_e562+Math.cos(n)*r,s=t+Math.sin(n)*r,u=this._geometry.closePointEps;var l=this.currentPath?this.currentPath.points:null;if(l){var _e563=Math.abs(l[l.length-2]-a),_t264=Math.abs(l[l.length-1]-s);_e563<u&&_t264<u||l.push(a,s);}else this.moveTo(a,s),l=this.currentPath.points;return js.arc(a,s,_e562,t,r,n,i,o,l),this;}},{key:"beginFill",value:function beginFill(){var _e564=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1?arguments[1]:undefined;return this.beginTextureFill({texture:Sn.WHITE,color:_e564,alpha:t});}},{key:"normalizeColor",value:function normalizeColor(_e565){var _e565$color,_e565$alpha;var t=st.shared.setValue((_e565$color=_e565.color)!==null&&_e565$color!==void 0?_e565$color:0);_e565.color=t.toNumber(),(_e565$alpha=_e565.alpha)!==null&&_e565$alpha!==void 0?_e565$alpha:_e565.alpha=t.alpha;}},{key:"beginTextureFill",value:function beginTextureFill(_e566){var t={texture:Sn.WHITE,color:16777215,matrix:null};_e566=Object.assign(t,_e566),this.normalizeColor(_e566),this.currentPath&&this.startPoly();var r=_e566.alpha>0;return r?(_e566.matrix&&(_e566.matrix=_e566.matrix.clone(),_e566.matrix.invert()),Object.assign(this._fillStyle,{visible:r},_e566)):this._fillStyle.reset(),this;}},{key:"endFill",value:function endFill(){return this.finishPoly(),this._fillStyle.reset(),this;}},{key:"drawRect",value:function drawRect(_e567,t,r,n){return this.drawShape(new Ir(_e567,t,r,n));}},{key:"drawRoundedRect",value:function drawRoundedRect(_e568,t,r,n,i){return this.drawShape(new Cr(_e568,t,r,n,i));}},{key:"drawCircle",value:function drawCircle(_e569,t,r){return this.drawShape(new Ar(_e569,t,r));}},{key:"drawEllipse",value:function drawEllipse(_e570,t,r,n){return this.drawShape(new Sr(_e570,t,r,n));}},{key:"drawPolygon",value:function drawPolygon(){var t,r=!0;for(var _len8=arguments.length,_e571=new Array(_len8),_key8=0;_key8<_len8;_key8++){_e571[_key8]=arguments[_key8];}var n=_e571[0];n.points?(r=n.closeStroke,t=n.points):t=Array.isArray(_e571[0])?_e571[0]:_e571;var i=new Tr(t);return i.closeStroke=r,this.drawShape(i),this;}},{key:"drawShape",value:function drawShape(_e572){return this._holeMode?this._geometry.drawHole(_e572,this._matrix):this._geometry.drawShape(_e572,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this;}},{key:"clear",value:function clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this;}},{key:"isFastRect",value:function isFastRect(){var _e573=this._geometry.graphicsData;return!(1!==_e573.length||_e573[0].shape.type!==vr.RECT||_e573[0].matrix||_e573[0].holes.length||_e573[0].lineStyle.visible&&_e573[0].lineStyle.width);}},{key:"_render",value:function _render(_e574){this.finishPoly();var t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(_e574)):(_e574.batch.flush(),this._renderDirect(_e574));}},{key:"_populateBatches",value:function _populateBatches(){var _e575=this._geometry,t=this.blendMode,r=_e575.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_e575.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(_e575.points);for(var n=0;n<r;n++){var _r258=_e575.batches[n],i=_r258.style.color,_o58=new Float32Array(this.vertexData.buffer,4*_r258.attribStart*2,2*_r258.attribSize),_a64=new Float32Array(_e575.uvsFloat32.buffer,4*_r258.attribStart*2,2*_r258.attribSize),_s39={vertexData:_o58,blendMode:t,indices:new Uint16Array(_e575.indicesUint16.buffer,2*_r258.start,_r258.size),uvs:_a64,_batchRGB:st.shared.setValue(i).toRgbArray(),_tintRGB:i,_texture:_r258.style.texture,alpha:_r258.style.alpha,worldAlpha:1};this.batches[n]=_s39;}}},{key:"_renderBatched",value:function _renderBatched(_e576){if(this.batches.length){_e576.batch.setObjectRenderer(_e576.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var _t265=0,_r259=this.batches.length;_t265<_r259;_t265++){var _r260=this.batches[_t265];_r260.worldAlpha=this.worldAlpha*_r260.alpha,_e576.plugins[this.pluginName].render(_r260);}}}},{key:"_renderDirect",value:function _renderDirect(_e577){var t=this._resolveDirectShader(_e577),r=this._geometry,n=this.worldAlpha,i=t.uniforms,o=r.drawCalls;i.translationMatrix=this.transform.worldTransform,st.shared.setValue(this._tintColor).premultiply(n).toArray(i.tint),_e577.shader.bind(t),_e577.geometry.bind(r,t),_e577.state.set(this.state);for(var _t266=0,_n117=o.length;_t266<_n117;_t266++)this._renderDrawCallDirect(_e577,r.drawCalls[_t266]);}},{key:"_renderDrawCallDirect",value:function _renderDrawCallDirect(_e578,t){var r=t.texArray,n=t.type,i=t.size,o=t.start,a=r.count;for(var _t267=0;_t267<a;_t267++)_e578.texture.bind(r.elements[_t267],_t267);_e578.geometry.draw(n,i,o);}},{key:"_resolveDirectShader",value:function _resolveDirectShader(_e579){var t=this.shader;var r=this.pluginName;if(!t){if(!nu[r]){var _t268=_e579.plugins[r].maxTextures,n=new Int32Array(_t268);for(var _e589=0;_e589<_t268;_e589++)n[_e589]=_e589;var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Er(),"default":on.from({uSamplers:n},!0)},_o59=_e579.plugins[r]._shader.program;nu[r]=new an(_o59,i);}t=nu[r];}return t;}},{key:"_calculateBounds",value:function _calculateBounds(){this.finishPoly();var _e581=this._geometry;if(!_e581.graphicsData.length)return;var _e581$bounds=_e581.bounds,t=_e581$bounds.minX,r=_e581$bounds.minY,n=_e581$bounds.maxX,i=_e581$bounds.maxY;this._bounds.addFrame(this.transform,t,r,n,i);}},{key:"containsPoint",value:function containsPoint(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT);}},{key:"calculateTints",value:function calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(var _e590=0;_e590<this.batches.length;_e590++){var _t269=this.batches[_e590];_t269._tintRGB=st.shared.setValue(this._tintColor).multiply(_t269._batchRGB).toLittleEndianNumber();}}}},{key:"calculateVertices",value:function calculateVertices(){var _e583=this.transform._worldID;if(this._transformID===_e583)return;this._transformID=_e583;var t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=this._geometry.points,l=this.vertexData;var h=0;for(var _e591=0;_e591<u.length;_e591+=2){var _t270=u[_e591],_c11=u[_e591+1];l[h++]=r*_t270+i*_c11+a,l[h++]=o*_c11+n*_t270+s;}}},{key:"closePath",value:function closePath(){var _e585=this.currentPath;return _e585&&(_e585.closeStroke=!0,this.finishPoly()),this;}},{key:"setMatrix",value:function setMatrix(_e586){return this._matrix=_e586,this;}},{key:"beginHole",value:function beginHole(){return this.finishPoly(),this._holeMode=!0,this;}},{key:"endHole",value:function endHole(){return this.finishPoly(),this._holeMode=!1,this;}},{key:"destroy",value:function destroy(_e587){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,_get(_getPrototypeOf(e.prototype),"destroy",this).call(this,_e587);}}]);return e;}(co);iu.curves=Ns,iu._TEMP_POINT=new xr();var ou=iu;var au={buildPoly:Bs,buildCircle:$s,buildRectangle:Ds,buildRoundedRectangle:Ms,buildLine:Hs,ArcUtils:js,BezierUtils:Gs,QuadraticUtils:Ws,BatchPart:qs,FILL_COMMANDS:Ys,BATCH_POOL:Ks,DRAW_CALL_POOL:Xs};var su=/*#__PURE__*/function(){function su(e,t){_classCallCheck(this,su);this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0;}_createClass(su,[{key:"update",value:function update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++;}}]);return su;}();var uu=new xr(),lu=new Tr(),hu=/*#__PURE__*/function(_co3){_inherits(e,_co3);function e(_e592,t,r){var _this121;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:D.TRIANGLES;_classCallCheck(this,e);_this121=_callSuper(this,e),_this121.geometry=_e592,_this121.shader=t,_this121.state=r||Jt.for2d(),_this121.drawMode=n,_this121.start=0,_this121.size=0,_this121.uvs=null,_this121.indices=null,_this121.vertexData=new Float32Array(1),_this121.vertexDirty=-1,_this121._transformID=-1,_this121._roundPixels=J.ROUND_PIXELS,_this121.batchUvs=null;return _this121;}_createClass(e,[{key:"geometry",get:function get(){return this._geometry;},set:function set(_e593){this._geometry!==_e593&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=_e593,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1);}},{key:"uvBuffer",get:function get(){return this.geometry.buffers[1];}},{key:"verticesBuffer",get:function get(){return this.geometry.buffers[0];}},{key:"material",get:function get(){return this.shader;},set:function set(_e594){this.shader=_e594;}},{key:"blendMode",get:function get(){return this.state.blendMode;},set:function set(_e595){this.state.blendMode=_e595;}},{key:"roundPixels",get:function get(){return this._roundPixels;},set:function set(_e596){this._roundPixels!==_e596&&(this._transformID=-1),this._roundPixels=_e596;}},{key:"tint",get:function get(){return"tint"in this.shader?this.shader.tint:null;},set:function set(_e597){this.shader.tint=_e597;}},{key:"tintValue",get:function get(){return this.shader.tintValue;}},{key:"texture",get:function get(){return"texture"in this.shader?this.shader.texture:null;},set:function set(_e598){this.shader.texture=_e598;}},{key:"_render",value:function _render(t){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===D.TRIANGLES&&r.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t);}},{key:"_renderDefault",value:function _renderDefault(_e599){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),_e599.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_e599.shader.bind(t),_e599.state.set(this.state),_e599.geometry.bind(this.geometry,t),_e599.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount);}},{key:"_renderToBatch",value:function _renderToBatch(_e600){var t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;var n=this.material.pluginName;_e600.batch.setObjectRenderer(_e600.plugins[n]),_e600.plugins[n].render(this);}},{key:"calculateVertices",value:function calculateVertices(){var _e601=this.geometry.buffers[0],t=_e601.data,r=_e601._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));var n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,u=n.tx,l=n.ty,h=this.vertexData;for(var _e608=0;_e608<h.length/2;_e608++){var _r261=t[2*_e608],_n118=t[2*_e608+1];h[2*_e608]=i*_r261+a*_n118+u,h[2*_e608+1]=o*_r261+s*_n118+l;}if(this._roundPixels){var _e603=J.RESOLUTION;for(var _t271=0;_t271<h.length;++_t271)h[_t271]=Math.round(h[_t271]*_e603)/_e603;}this.vertexDirty=r;}},{key:"calculateUvs",value:function calculateUvs(){var _e604=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=_e604.data:(this.batchUvs||(this.batchUvs=new su(_e604,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data);}},{key:"_calculateBounds",value:function _calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length);}},{key:"containsPoint",value:function containsPoint(_e605){if(!this.getBounds().contains(_e605.x,_e605.y))return!1;this.worldTransform.applyInverse(_e605,uu);var t=this.geometry.getBuffer("aVertexPosition").data,r=lu.points,n=this.geometry.getIndex().data,i=n.length,o=4===this.drawMode?3:1;for(var _e609=0;_e609+2<i;_e609+=o){var _i93=2*n[_e609],_o60=2*n[_e609+1],_a65=2*n[_e609+2];if(r[0]=t[_i93],r[1]=t[_i93+1],r[2]=t[_o60],r[3]=t[_o60+1],r[4]=t[_a65],r[5]=t[_a65+1],lu.contains(uu.x,uu.y))return!0;}return!1;}},{key:"destroy",value:function destroy(_e607){_get(_getPrototypeOf(e.prototype),"destroy",this).call(this,_e607),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null;}}]);return e;}(co);hu.BATCHABLE_SIZE=100;var cu=hu;var du=/*#__PURE__*/function(_yr4){_inherits(du,_yr4);function du(e,t,r){var _this122;_classCallCheck(this,du);_this122=_callSuper(this,du);var n=new lr(e),i=new lr(t,!0),o=new lr(r,!0,!0);_this122.addAttribute("aVertexPosition",n,2,!1,F.FLOAT).addAttribute("aTextureCoord",i,2,!1,F.FLOAT).addIndex(o),_this122._updateId=-1;return _this122;}_createClass(du,[{key:"vertexDirtyId",get:function get(){return this.buffers[0]._updateID;}}]);return du;}(yr);var fu=/*#__PURE__*/function(_an2){_inherits(fu,_an2);function fu(e,t){var _this123;_classCallCheck(this,fu);var r={uSampler:e,alpha:1,uTextureMatrix:Er.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(r,t.uniforms),_this123=_callSuper(this,fu,[t.program||rn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r]),_this123._colorDirty=!1,_this123.uvMatrix=new Un(e),_this123.batchable=void 0===t.program,_this123.pluginName=t.pluginName,_this123._tintColor=new st(t.tint),_this123._tintRGB=_this123._tintColor.toLittleEndianNumber(),_this123._colorDirty=!0,_this123.alpha=t.alpha;return _this123;}_createClass(fu,[{key:"texture",get:function get(){return this.uniforms.uSampler;},set:function set(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e);}},{key:"alpha",get:function get(){return this._alpha;},set:function set(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0);}},{key:"tint",get:function get(){return this._tintColor.value;},set:function set(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0);}},{key:"tintValue",get:function get(){return this._tintColor.toNumber();}},{key:"update",value:function update(){if(this._colorDirty){this._colorDirty=!1;var _e610=this.texture.baseTexture.alphaMode;st.shared.setValue(this._tintColor).premultiply(this._alpha,_e610).toArray(this.uniforms.uColor);}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord);}}]);return fu;}(an);var pu=/*#__PURE__*/function(_du){_inherits(pu,_du);function pu(){var _this124;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:100;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:10;_classCallCheck(this,pu);_this124=_callSuper(this,pu),_this124.segWidth=r,_this124.segHeight=n,_this124.width=e,_this124.height=t,_this124.build();return _this124;}_createClass(pu,[{key:"build",value:function build(){var e=this.segWidth*this.segHeight,t=[],r=[],n=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o;for(var _n119=0;_n119<e;_n119++){var _e611=_n119%this.segWidth,_u29=_n119/this.segWidth|0;t.push(_e611*a,_u29*s),r.push(_e611/i,_u29/o);}var u=i*o;for(var _e612=0;_e612<u;_e612++){var _t272=_e612%i,_r262=_e612/i|0,_o61=_r262*this.segWidth+_t272,_a66=_r262*this.segWidth+_t272+1,_s40=(_r262+1)*this.segWidth+_t272,_u30=(_r262+1)*this.segWidth+_t272+1;n.push(_o61,_a66,_s40,_a66,_u30,_s40);}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update();}}]);return pu;}(du);var yu=/*#__PURE__*/function(_du2){_inherits(yu,_du2);function yu(){var _this125;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:200;var t=arguments.length>1?arguments[1]:undefined;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,yu);_this125=_callSuper(this,yu,[new Float32Array(4*t.length),new Float32Array(4*t.length),new Uint16Array(6*(t.length-1))]),_this125.points=t,_this125._width=e,_this125.textureScale=r,_this125.build();return _this125;}_createClass(yu,[{key:"width",get:function get(){return this._width;}},{key:"build",value:function build(){var e=this.points;if(!e)return;var t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),n=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),r.data=new Float32Array(4*e.length),n.data=new Uint16Array(6*(e.length-1)));var i=r.data,o=n.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;var a=0,s=e[0];var u=this._width*this.textureScale,l=e.length;for(var _t273=0;_t273<l;_t273++){var _r263=4*_t273;if(this.textureScale>0){var _r264=s.x-e[_t273].x,_n120=s.y-e[_t273].y,_i94=Math.sqrt(_r264*_r264+_n120*_n120);s=e[_t273],a+=_i94/u;}else a=_t273/(l-1);i[_r263]=a,i[_r263+1]=0,i[_r263+2]=a,i[_r263+3]=1;}var h=0;for(var _e613=0;_e613<l-1;_e613++){var _t274=2*_e613;o[h++]=_t274,o[h++]=_t274+1,o[h++]=_t274+2,o[h++]=_t274+2,o[h++]=_t274+1,o[h++]=_t274+3;}r.update(),n.update(),this.updateVertices();}},{key:"updateVertices",value:function updateVertices(){var e=this.points;if(e.length<1)return;var t,r=e[0],n=0,i=0;var o=this.buffers[0].data,a=e.length,s=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(var _u31=0;_u31<a;_u31++){var _l22=e[_u31],_h16=4*_u31;t=_u31<e.length-1?e[_u31+1]:_l22,i=-(t.x-r.x),n=t.y-r.y;var _c12=10*(1-_u31/(a-1));_c12>1&&(_c12=1);var _d6=Math.sqrt(n*n+i*i);_d6<1e-6?(n=0,i=0):(n/=_d6,i/=_d6,n*=s,i*=s),o[_h16]=_l22.x+n,o[_h16+1]=_l22.y+i,o[_h16+2]=_l22.x-n,o[_h16+3]=_l22.y-i,r=_l22;}this.buffers[0].update();}},{key:"update",value:function update(){this.textureScale>0?this.build():this.updateVertices();}}]);return yu;}(du);var gu=/*#__PURE__*/function(_cu){_inherits(gu,_cu);function gu(e,t,r){var _this126;_classCallCheck(this,gu);_this126=_callSuper(this,gu,[new pu(e.width,e.height,t,r),new fu(Sn.WHITE)]),_this126.texture=e,_this126.autoResize=!0;return _this126;}_createClass(gu,[{key:"textureUpdated",value:function textureUpdated(){this._textureID=this.shader.texture._updateID;var e=this.geometry,_this$shader$texture=this.shader.texture,t=_this$shader$texture.width,r=_this$shader$texture.height;this.autoResize&&(e.width!==t||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build());}},{key:"texture",get:function get(){return this.shader.texture;},set:function set(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this));}},{key:"_render",value:function _render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),_get(_getPrototypeOf(gu.prototype),"_render",this).call(this,e);}},{key:"destroy",value:function destroy(e){this.shader.texture.off("update",this.textureUpdated,this),_get(_getPrototypeOf(gu.prototype),"destroy",this).call(this,e);}}]);return gu;}(cu);var mu=/*#__PURE__*/function(_gu){_inherits(mu,_gu);function mu(e,t,r,n,i){var _ref58,_e$defaultBorders,_ref59,_e$defaultBorders2,_ref60,_e$defaultBorders3,_ref61,_e$defaultBorders4;var _this127;_classCallCheck(this,mu);_this127=_callSuper(this,mu,[Sn.WHITE,4,4]),_this127._origWidth=e.orig.width,_this127._origHeight=e.orig.height,_this127._width=_this127._origWidth,_this127._height=_this127._origHeight,_this127._leftWidth=(_ref58=t!==null&&t!==void 0?t:(_e$defaultBorders=e.defaultBorders)===null||_e$defaultBorders===void 0?void 0:_e$defaultBorders.left)!==null&&_ref58!==void 0?_ref58:10,_this127._rightWidth=(_ref59=n!==null&&n!==void 0?n:(_e$defaultBorders2=e.defaultBorders)===null||_e$defaultBorders2===void 0?void 0:_e$defaultBorders2.right)!==null&&_ref59!==void 0?_ref59:10,_this127._topHeight=(_ref60=r!==null&&r!==void 0?r:(_e$defaultBorders3=e.defaultBorders)===null||_e$defaultBorders3===void 0?void 0:_e$defaultBorders3.top)!==null&&_ref60!==void 0?_ref60:10,_this127._bottomHeight=(_ref61=i!==null&&i!==void 0?i:(_e$defaultBorders4=e.defaultBorders)===null||_e$defaultBorders4===void 0?void 0:_e$defaultBorders4.bottom)!==null&&_ref61!==void 0?_ref61:10,_this127.texture=e;return _this127;}_createClass(mu,[{key:"textureUpdated",value:function textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh();}},{key:"vertices",get:function get(){return this.geometry.getBuffer("aVertexPosition").data;},set:function set(e){this.geometry.getBuffer("aVertexPosition").data=e;}},{key:"updateHorizontalVertices",value:function updateHorizontalVertices(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height;}},{key:"updateVerticalVertices",value:function updateVerticalVertices(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width;}},{key:"_getMinScale",value:function _getMinScale(){var e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,n=this._height>r?1:this._height/r;return Math.min(t,n);}},{key:"width",get:function get(){return this._width;},set:function set(e){this._width=e,this._refresh();}},{key:"height",get:function get(){return this._height;},set:function set(e){this._height=e,this._refresh();}},{key:"leftWidth",get:function get(){return this._leftWidth;},set:function set(e){this._leftWidth=e,this._refresh();}},{key:"rightWidth",get:function get(){return this._rightWidth;},set:function set(e){this._rightWidth=e,this._refresh();}},{key:"topHeight",get:function get(){return this._topHeight;},set:function set(e){this._topHeight=e,this._refresh();}},{key:"bottomHeight",get:function get(){return this._bottomHeight;},set:function set(e){this._bottomHeight=e,this._refresh();}},{key:"_refresh",value:function _refresh(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update();}}]);return mu;}(gu);var wu=/*#__PURE__*/function(_cu2){_inherits(wu,_cu2);function wu(){var _this128;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Sn.EMPTY;var t=arguments.length>1?arguments[1]:undefined;var r=arguments.length>2?arguments[2]:undefined;var n=arguments.length>3?arguments[3]:undefined;var i=arguments.length>4?arguments[4]:undefined;_classCallCheck(this,wu);var o=new du(t,r,n);o.getBuffer("aVertexPosition")["static"]=!1;_this128=_callSuper(this,wu,[o,new fu(e),null,i]),_this128.autoUpdate=!0;return _this128;}_createClass(wu,[{key:"vertices",get:function get(){return this.geometry.getBuffer("aVertexPosition").data;},set:function set(e){this.geometry.getBuffer("aVertexPosition").data=e;}},{key:"_render",value:function _render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),_get(_getPrototypeOf(wu.prototype),"_render",this).call(this,e);}}]);return wu;}(cu);var bu=/*#__PURE__*/function(_cu3){_inherits(bu,_cu3);function bu(e,t){var _this129;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,bu);var n=new yu(e.height,t,r),i=new fu(e);r>0&&(e.baseTexture.wrapMode=j.REPEAT),_this129=_callSuper(this,bu,[n,i]),_this129.autoUpdate=!0;return _this129;}_createClass(bu,[{key:"_render",value:function _render(e){var t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),_get(_getPrototypeOf(bu.prototype),"_render",this).call(this,e);}}]);return bu;}(cu);var vu=/*#__PURE__*/function(_co4){_inherits(vu,_co4);function vu(){var _this130;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1500;var t=arguments.length>1?arguments[1]:undefined;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16384;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;_classCallCheck(this,vu);_this130=_callSuper(this,vu);r>16384&&(r=16384),_this130._properties=[!1,!0,!1,!1,!1],_this130._maxSize=e,_this130._batchSize=r,_this130._buffers=null,_this130._bufferUpdateIDs=[],_this130._updateID=0,_this130.interactiveChildren=!1,_this130.blendMode=B.NORMAL,_this130.autoResize=n,_this130.roundPixels=!0,_this130.baseTexture=null,_this130.setProperties(t),_this130._tintColor=new st(0),_this130.tintRgb=new Float32Array(3),_this130.tint=16777215;return _this130;}_createClass(vu,[{key:"setProperties",value:function setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4]);}},{key:"updateTransform",value:function updateTransform(){this.displayObjectUpdateTransform();}},{key:"tint",get:function get(){return this._tintColor.value;},set:function set(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb);}},{key:"render",value:function render(e){var _this131=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return _this131.onChildrenChange(0);})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this));}},{key:"onChildrenChange",value:function onChildrenChange(e){var t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID;}},{key:"dispose",value:function dispose(){if(this._buffers){for(var _e614=0;_e614<this._buffers.length;++_e614)this._buffers[_e614].destroy();this._buffers=null;}}},{key:"destroy",value:function destroy(e){_get(_getPrototypeOf(vu.prototype),"destroy",this).call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null;}}]);return vu;}(co);var xu=/*#__PURE__*/function(){function xu(e,t,r){_classCallCheck(this,xu);this.geometry=new yr(),this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var _r265=0;_r265<e.length;++_r265){var n=e[_r265];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||F.FLOAT,offset:n.offset},t[_r265]?this.dynamicProperties.push(n):this.staticProperties.push(n);}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers();}_createClass(xu,[{key:"initBuffers",value:function initBuffers(){var e=this.geometry;var t=0;this.indexBuffer=new lr(wt(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var _e615=0;_e615<this.dynamicProperties.length;++_e615){var _r266=this.dynamicProperties[_e615];_r266.offset=t,t+=_r266.size,this.dynamicStride+=_r266.size;}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new lr(this.dynamicData,!1,!1);var n=0;this.staticStride=0;for(var _e616=0;_e616<this.staticProperties.length;++_e616){var _t275=this.staticProperties[_e616];_t275.offset=n,n+=_t275.size,this.staticStride+=_t275.size;}var i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new lr(this.staticData,!0,!1);for(var _t276=0;_t276<this.dynamicProperties.length;++_t276){var _r267=this.dynamicProperties[_t276];e.addAttribute(_r267.attributeName,this.dynamicBuffer,0,_r267.type===F.UNSIGNED_BYTE,_r267.type,4*this.dynamicStride,4*_r267.offset);}for(var _t277=0;_t277<this.staticProperties.length;++_t277){var _r268=this.staticProperties[_t277];e.addAttribute(_r268.attributeName,this.staticBuffer,0,_r268.type===F.UNSIGNED_BYTE,_r268.type,4*this.staticStride,4*_r268.offset);}}},{key:"uploadDynamic",value:function uploadDynamic(e,t,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(e,t,r,i.type===F.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset);}this.dynamicBuffer._updateID++;}},{key:"uploadStatic",value:function uploadStatic(e,t,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(e,t,r,i.type===F.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset);}this.staticBuffer._updateID++;}},{key:"destroy",value:function destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy();}}]);return xu;}();var _u=/*#__PURE__*/function(_ln2){_inherits(_u,_ln2);function _u(e){var _this132;_classCallCheck(this,_u);_this132=_callSuper(this,_u,[e]),_this132.shader=null,_this132.properties=null,_this132.tempMatrix=new Er(),_this132.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:_this132.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:_this132.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:_this132.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:_this132.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:F.UNSIGNED_BYTE,uploadFunction:_this132.uploadTint,offset:0}],_this132.shader=an.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),_this132.state=Jt.for2d();return _this132;}_createClass(_u,[{key:"render",value:function render(e){var t=e.children,r=e._maxSize,n=e._batchSize,i=this.renderer;var o=t.length;if(0===o)return;o>r&&!e.autoResize&&(o=r);var a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));var s=t[0]._texture.baseTexture,u=s.alphaMode>0;this.state.blendMode=ft(e.blendMode,u),i.state.set(this.state);var l=i.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=st.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);var c=!1;for(var _r269=0,_s41=0;_r269<o;_r269+=n,_s41+=1){var _u32=o-_r269;_u32>n&&(_u32=n),_s41>=a.length&&a.push(this._generateOneMoreBuffer(e));var _h17=a[_s41];_h17.uploadDynamic(t,_r269,_u32);var _d7=e._bufferUpdateIDs[_s41]||0;c=c||_h17._updateID<_d7,c&&(_h17._updateID=e._updateID,_h17.uploadStatic(t,_r269,_u32)),i.geometry.bind(_h17.geometry),l.drawElements(l.TRIANGLES,6*_u32,l.UNSIGNED_SHORT,0);}}},{key:"generateBuffers",value:function generateBuffers(e){var t=[],r=e._maxSize,n=e._batchSize,i=e._properties;for(var _e617=0;_e617<r;_e617+=n)t.push(new xu(this.properties,i,n));return t;}},{key:"_generateOneMoreBuffer",value:function _generateOneMoreBuffer(e){var t=e._batchSize,r=e._properties;return new xu(this.properties,r,t);}},{key:"uploadVertices",value:function uploadVertices(e,t,r,n,i,o){var a=0,s=0,u=0,l=0;for(var _h18=0;_h18<r;++_h18){var _r270=e[t+_h18],_c13=_r270._texture,_d8=_r270.scale.x,_f8=_r270.scale.y,_p8=_c13.trim,_y6=_c13.orig;_p8?(s=_p8.x-_r270.anchor.x*_y6.width,a=s+_p8.width,l=_p8.y-_r270.anchor.y*_y6.height,u=l+_p8.height):(a=_y6.width*(1-_r270.anchor.x),s=_y6.width*-_r270.anchor.x,u=_y6.height*(1-_r270.anchor.y),l=_y6.height*-_r270.anchor.y),n[o]=s*_d8,n[o+1]=l*_f8,n[o+i]=a*_d8,n[o+i+1]=l*_f8,n[o+2*i]=a*_d8,n[o+2*i+1]=u*_f8,n[o+3*i]=s*_d8,n[o+3*i+1]=u*_f8,o+=4*i;}}},{key:"uploadPosition",value:function uploadPosition(e,t,r,n,i,o){for(var _a67=0;_a67<r;_a67++){var _r271=e[t+_a67].position;n[o]=_r271.x,n[o+1]=_r271.y,n[o+i]=_r271.x,n[o+i+1]=_r271.y,n[o+2*i]=_r271.x,n[o+2*i+1]=_r271.y,n[o+3*i]=_r271.x,n[o+3*i+1]=_r271.y,o+=4*i;}}},{key:"uploadRotation",value:function uploadRotation(e,t,r,n,i,o){for(var _a68=0;_a68<r;_a68++){var _r272=e[t+_a68].rotation;n[o]=_r272,n[o+i]=_r272,n[o+2*i]=_r272,n[o+3*i]=_r272,o+=4*i;}}},{key:"uploadUvs",value:function uploadUvs(e,t,r,n,i,o){for(var _a69=0;_a69<r;++_a69){var _r273=e[t+_a69]._texture._uvs;_r273?(n[o]=_r273.x0,n[o+1]=_r273.y0,n[o+i]=_r273.x1,n[o+i+1]=_r273.y1,n[o+2*i]=_r273.x2,n[o+2*i+1]=_r273.y2,n[o+3*i]=_r273.x3,n[o+3*i+1]=_r273.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i);}}},{key:"uploadTint",value:function uploadTint(e,t,r,n,i,o){for(var _a70=0;_a70<r;++_a70){var _r274=e[t+_a70],_s42=st.shared.setValue(_r274._tintRGB).toPremultiplied(_r274.alpha,_r274.texture.baseTexture.alphaMode>0);n[o]=_s42,n[o+i]=_s42,n[o+2*i]=_s42,n[o+3*i]=_s42,o+=4*i;}}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_u.prototype),"destroy",this).call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null;}}]);return _u;}(ln);_u.extension={name:"particle",type:Vt.RendererPlugin},Yt.add(_u);var Iu=function(e){return e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e;}(Iu||{});var Au={willReadFrequently:!0},Su=/*#__PURE__*/function(){function e(_e618,t,r,n,i,o,a,s,u){_classCallCheck(this,e);this.text=_e618,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u;}_createClass(e,null,[{key:"experimentalLetterSpacingSupported",get:function get(){var t=e._experimentalLetterSpacingSupported;if(void 0!==t){var _r275=J.ADAPTER.getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in _r275||"textLetterSpacing"in _r275;}return t;}},{key:"measureText",value:function measureText(t,r,n){var _n121;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:e._canvas;n=(_n121=n)!==null&&_n121!==void 0?_n121:r.wordWrap;var o=r.toFontString(),a=e.measureFont(o);0===a.fontSize&&(a.fontSize=r.fontSize,a.ascent=r.fontSize);var s=i.getContext("2d",Au);s.font=o;var u=(n?e.wordWrap(t,r,i):t).split(/(?:\r\n|\r|\n)/),l=new Array(u.length);var h=0;for(var _t278=0;_t278<u.length;_t278++){var _n122=e._measureText(u[_t278],r.letterSpacing,s);l[_t278]=_n122,h=Math.max(h,_n122);}var c=h+r.strokeThickness;r.dropShadow&&(c+=r.dropShadowDistance);var d=r.lineHeight||a.fontSize+r.strokeThickness;var f=Math.max(d,a.fontSize+2*r.strokeThickness)+r.leading+(u.length-1)*(d+r.leading);return r.dropShadow&&(f+=r.dropShadowDistance),new e(t,r,c,f,u,l,d+r.leading,h,a);}},{key:"_measureText",value:function _measureText(t,r,n){var i=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(n.letterSpacing="".concat(r,"px"),n.textLetterSpacing="".concat(r,"px"),i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));var o=n.measureText(t).width;return o>0&&(i?o-=r:o+=(e.graphemeSegmenter(t).length-1)*r),o;}},{key:"wordWrap",value:function wordWrap(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:e._canvas;var i=n.getContext("2d",Au);var o=0,a="",s="";var u=Object.create(null),l=r.letterSpacing,h=r.whiteSpace,c=e.collapseSpaces(h),d=e.collapseNewlines(h);var f=!c;var p=r.wordWrapWidth+l,y=e.tokenize(t);for(var _t279=0;_t279<y.length;_t279++){var _n123=y[_t279];if(e.isNewline(_n123)){if(!d){s+=e.addLine(a),f=!c,a="",o=0;continue;}_n123=" ";}if(c){var _t280=e.isBreakingSpace(_n123),_r276=e.isBreakingSpace(a[a.length-1]);if(_t280&&_r276)continue;}var _h19=e.getFromCache(_n123,l,u,i);if(_h19>p){if(""!==a&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(_n123,r.breakWords)){var _t281=e.wordWrapSplit(_n123);for(var _h20=0;_h20<_t281.length;_h20++){var _c14=_t281[_h20],_d9=_c14,_y7=1;for(;_t281[_h20+_y7];){var _i95=_t281[_h20+_y7];if(e.canBreakChars(_d9,_i95,_n123,_h20,r.breakWords))break;_c14+=_i95,_d9=_i95,_y7++;}_h20+=_y7-1;var _g5=e.getFromCache(_c14,l,u,i);_g5+o>p&&(s+=e.addLine(a),f=!1,a="",o=0),a+=_c14,o+=_g5;}}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var _r277=_t279===y.length-1;s+=e.addLine(_n123,!_r277),f=!1,a="",o=0;}}else _h19+o>p&&(f=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(_n123)||f)&&(a+=_n123,o+=_h19);}return s+=e.addLine(a,!1),s;}},{key:"addLine",value:function addLine(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;return t=e.trimRight(t),t=r?"".concat(t,"\n"):t;}},{key:"getFromCache",value:function getFromCache(t,r,n,i){var o=n[t];return"number"!=typeof o&&(o=e._measureText(t,r,i)+r,n[t]=o),o;}},{key:"collapseSpaces",value:function collapseSpaces(_e619){return"normal"===_e619||"pre-line"===_e619;}},{key:"collapseNewlines",value:function collapseNewlines(_e620){return"normal"===_e620;}},{key:"trimRight",value:function trimRight(t){if("string"!=typeof t)return"";for(var _r278=t.length-1;_r278>=0;_r278--){var n=t[_r278];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1);}return t;}},{key:"isNewline",value:function isNewline(t){return"string"==typeof t&&e._newlines.includes(t.charCodeAt(0));}},{key:"isBreakingSpace",value:function isBreakingSpace(t,r){return"string"==typeof t&&e._breakingSpaces.includes(t.charCodeAt(0));}},{key:"tokenize",value:function tokenize(t){var r=[];var n="";if("string"!=typeof t)return r;for(var i=0;i<t.length;i++){var _o62=t[i],_a71=t[i+1];e.isBreakingSpace(_o62,_a71)||e.isNewline(_o62)?(""!==n&&(r.push(n),n=""),r.push(_o62)):n+=_o62;}return""!==n&&r.push(n),r;}},{key:"canBreakWords",value:function canBreakWords(_e621,t){return t;}},{key:"canBreakChars",value:function canBreakChars(_e622,t,r,n,i){return!0;}},{key:"wordWrapSplit",value:function wordWrapSplit(t){return e.graphemeSegmenter(t);}},{key:"measureFont",value:function measureFont(t){if(e._fonts[t])return e._fonts[t];var r={ascent:0,descent:0,fontSize:0},n=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width);var s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width);var u=Math.ceil(e.HEIGHT_MULTIPLIER*s);if(s=s*e.BASELINE_MULTIPLIER|0,0===a||0===u)return e._fonts[t]=r,r;n.width=a,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var l=i.getImageData(0,0,a,u).data,h=l.length,c=4*a;var d=0,f=0,p=!1;for(d=0;d<s;++d){for(var _e625=0;_e625<c;_e625+=4)if(255!==l[f+_e625]){p=!0;break;}if(p)break;f+=c;}for(r.ascent=s-d,f=h-c,p=!1,d=u;d>s;--d){for(var _e626=0;_e626<c;_e626+=4)if(255!==l[f+_e626]){p=!0;break;}if(p)break;f-=c;}return r.descent=d-s,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r;}},{key:"clearMetrics",value:function clearMetrics(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";t?delete e._fonts[t]:e._fonts={};}},{key:"_canvas",get:function get(){if(!e.__canvas){var _t282;try{var _r279$getContext;var _r279=new OffscreenCanvas(0,0);if((_r279$getContext=_r279.getContext("2d",Au))!==null&&_r279$getContext!==void 0&&_r279$getContext.measureText)return e.__canvas=_r279,_r279;_t282=J.ADAPTER.createCanvas();}catch(_unused15){_t282=J.ADAPTER.createCanvas();}_t282.width=_t282.height=10,e.__canvas=_t282;}return e.__canvas;}},{key:"_context",get:function get(){return e.__context||(e.__context=e._canvas.getContext("2d",Au)),e.__context;}}]);return e;}();Su.METRICS_STRING="|q",Su.BASELINE_SYMBOL="M",Su.BASELINE_MULTIPLIER=1.4,Su.HEIGHT_MULTIPLIER=2,Su.graphemeSegmenter=function(_Intl){if("function"==typeof((_Intl=Intl)===null||_Intl===void 0?void 0:_Intl.Segmenter)){var _e627=new Intl.Segmenter();return function(t){return _toConsumableArray(_e627.segment(t)).map(function(e){return e.segment;});};}return function(e){return _toConsumableArray(e);};}(),Su.experimentalLetterSpacing=!1,Su._fonts={},Su._newlines=[10,13],Su._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Tu=Su;var Cu=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Eu=/*#__PURE__*/function(){function e(_e628){_classCallCheck(this,e);this.styleID=0,this.reset(),Pu(this,_e628,_e628);}_createClass(e,[{key:"clone",value:function clone(){var t={};return Pu(t,this,e.defaultStyle),new e(t);}},{key:"reset",value:function reset(){Pu(this,e.defaultStyle,e.defaultStyle);}},{key:"align",get:function get(){return this._align;},set:function set(_e629){this._align!==_e629&&(this._align=_e629,this.styleID++);}},{key:"breakWords",get:function get(){return this._breakWords;},set:function set(_e630){this._breakWords!==_e630&&(this._breakWords=_e630,this.styleID++);}},{key:"dropShadow",get:function get(){return this._dropShadow;},set:function set(_e631){this._dropShadow!==_e631&&(this._dropShadow=_e631,this.styleID++);}},{key:"dropShadowAlpha",get:function get(){return this._dropShadowAlpha;},set:function set(_e632){this._dropShadowAlpha!==_e632&&(this._dropShadowAlpha=_e632,this.styleID++);}},{key:"dropShadowAngle",get:function get(){return this._dropShadowAngle;},set:function set(_e633){this._dropShadowAngle!==_e633&&(this._dropShadowAngle=_e633,this.styleID++);}},{key:"dropShadowBlur",get:function get(){return this._dropShadowBlur;},set:function set(_e634){this._dropShadowBlur!==_e634&&(this._dropShadowBlur=_e634,this.styleID++);}},{key:"dropShadowColor",get:function get(){return this._dropShadowColor;},set:function set(_e635){var t=ku(_e635);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++);}},{key:"dropShadowDistance",get:function get(){return this._dropShadowDistance;},set:function set(_e636){this._dropShadowDistance!==_e636&&(this._dropShadowDistance=_e636,this.styleID++);}},{key:"fill",get:function get(){return this._fill;},set:function set(_e637){var t=ku(_e637);this._fill!==t&&(this._fill=t,this.styleID++);}},{key:"fillGradientType",get:function get(){return this._fillGradientType;},set:function set(_e638){this._fillGradientType!==_e638&&(this._fillGradientType=_e638,this.styleID++);}},{key:"fillGradientStops",get:function get(){return this._fillGradientStops;},set:function set(_e639){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var _r280=0;_r280<e.length;++_r280)if(e[_r280]!==t[_r280])return!1;return!0;})(this._fillGradientStops,_e639)||(this._fillGradientStops=_e639,this.styleID++);}},{key:"fontFamily",get:function get(){return this._fontFamily;},set:function set(_e640){this.fontFamily!==_e640&&(this._fontFamily=_e640,this.styleID++);}},{key:"fontSize",get:function get(){return this._fontSize;},set:function set(_e641){this._fontSize!==_e641&&(this._fontSize=_e641,this.styleID++);}},{key:"fontStyle",get:function get(){return this._fontStyle;},set:function set(_e642){this._fontStyle!==_e642&&(this._fontStyle=_e642,this.styleID++);}},{key:"fontVariant",get:function get(){return this._fontVariant;},set:function set(_e643){this._fontVariant!==_e643&&(this._fontVariant=_e643,this.styleID++);}},{key:"fontWeight",get:function get(){return this._fontWeight;},set:function set(_e644){this._fontWeight!==_e644&&(this._fontWeight=_e644,this.styleID++);}},{key:"letterSpacing",get:function get(){return this._letterSpacing;},set:function set(_e645){this._letterSpacing!==_e645&&(this._letterSpacing=_e645,this.styleID++);}},{key:"lineHeight",get:function get(){return this._lineHeight;},set:function set(_e646){this._lineHeight!==_e646&&(this._lineHeight=_e646,this.styleID++);}},{key:"leading",get:function get(){return this._leading;},set:function set(_e647){this._leading!==_e647&&(this._leading=_e647,this.styleID++);}},{key:"lineJoin",get:function get(){return this._lineJoin;},set:function set(_e648){this._lineJoin!==_e648&&(this._lineJoin=_e648,this.styleID++);}},{key:"miterLimit",get:function get(){return this._miterLimit;},set:function set(_e649){this._miterLimit!==_e649&&(this._miterLimit=_e649,this.styleID++);}},{key:"padding",get:function get(){return this._padding;},set:function set(_e650){this._padding!==_e650&&(this._padding=_e650,this.styleID++);}},{key:"stroke",get:function get(){return this._stroke;},set:function set(_e651){var t=ku(_e651);this._stroke!==t&&(this._stroke=t,this.styleID++);}},{key:"strokeThickness",get:function get(){return this._strokeThickness;},set:function set(_e652){this._strokeThickness!==_e652&&(this._strokeThickness=_e652,this.styleID++);}},{key:"textBaseline",get:function get(){return this._textBaseline;},set:function set(_e653){this._textBaseline!==_e653&&(this._textBaseline=_e653,this.styleID++);}},{key:"trim",get:function get(){return this._trim;},set:function set(_e654){this._trim!==_e654&&(this._trim=_e654,this.styleID++);}},{key:"whiteSpace",get:function get(){return this._whiteSpace;},set:function set(_e655){this._whiteSpace!==_e655&&(this._whiteSpace=_e655,this.styleID++);}},{key:"wordWrap",get:function get(){return this._wordWrap;},set:function set(_e656){this._wordWrap!==_e656&&(this._wordWrap=_e656,this.styleID++);}},{key:"wordWrapWidth",get:function get(){return this._wordWrapWidth;},set:function set(_e657){this._wordWrapWidth!==_e657&&(this._wordWrapWidth=_e657,this.styleID++);}},{key:"toFontString",value:function toFontString(){var _e658="number"==typeof this.fontSize?"".concat(this.fontSize,"px"):this.fontSize;var t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var _e660=t.length-1;_e660>=0;_e660--){var _r281=t[_e660].trim();!/([\"\'])[^\'\"]+\1/.test(_r281)&&!Cu.includes(_r281)&&(_r281="\"".concat(_r281,"\"")),t[_e660]=_r281;}return"".concat(this.fontStyle," ").concat(this.fontVariant," ").concat(this.fontWeight," ").concat(_e658," ").concat(t.join(","));}}]);return e;}();Eu.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Iu.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Ou=Eu;function ku(e){var t=st.shared,r=function r(e){var r=t.setValue(e);return 1===r.alpha?r.toHex():r.toRgbaString();};return Array.isArray(e)?e.map(r):r(e);}function Pu(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n];}var $u={texture:!0,children:!1,baseTexture:!0},Ru=/*#__PURE__*/function(_yo){_inherits(e,_yo);function e(t,r,n){var _e$defaultResolution;var _this133;_classCallCheck(this,e);var i=!1;n||(n=J.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;var o=Sn.from(n);o.orig=new Ir(),o.trim=new Ir(),_this133=_callSuper(this,e,[o]),_this133._ownCanvas=i,_this133.canvas=n,_this133.context=n.getContext("2d",{willReadFrequently:!0}),_this133._resolution=(_e$defaultResolution=e.defaultResolution)!==null&&_e$defaultResolution!==void 0?_e$defaultResolution:J.RESOLUTION,_this133._autoResolution=e.defaultAutoResolution,_this133._text=null,_this133._style=null,_this133._styleListener=null,_this133._font="",_this133.text=t,_this133.style=r,_this133.localStyleID=-1;return _this133;}_createClass(e,[{key:"updateText",value:function updateText(_e662){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&_e662)return;this._font=this._style.toFontString();var r=this.context,n=Tu.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,o=n.height,a=n.lines,s=n.lineHeight,u=n.lineWidths,l=n.maxLineWidth,h=n.fontProperties;var c,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+2*t.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;var f=t.dropShadow?2:1;for(var _e683=0;_e683<f;++_e683){var _i96=t.dropShadow&&0===_e683,_f9=_i96?Math.ceil(Math.max(1,o)+2*t.padding):0,_p9=_f9*this._resolution;if(_i96){r.fillStyle="black",r.strokeStyle="black";var _e664=t.dropShadowColor,_n124=t.dropShadowBlur*this._resolution,_i97=t.dropShadowDistance*this._resolution;r.shadowColor=st.shared.setValue(_e664).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=_n124,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*_i97,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*_i97+_p9;}else r.fillStyle=this._generateFillStyle(t,a,n),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;var _y8=(s-h.fontSize)/2;s-h.fontSize<0&&(_y8=0);for(var _e684=0;_e684<a.length;_e684++)c=t.strokeThickness/2,d=t.strokeThickness/2+_e684*s+h.ascent+_y8,"right"===t.align?c+=l-u[_e684]:"center"===t.align&&(c+=(l-u[_e684])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[_e684],c+t.padding,d+t.padding-_f9,!0),t.fill&&this.drawLetterSpacing(a[_e684],c+t.padding,d+t.padding-_f9);}this.updateTexture();}},{key:"drawLetterSpacing",value:function drawLetterSpacing(_e666,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;var i=this._style.letterSpacing;var o=!1;if(Tu.experimentalLetterSpacingSupported&&(Tu.experimentalLetterSpacing?(this.context.letterSpacing="".concat(i,"px"),this.context.textLetterSpacing="".concat(i,"px"),o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===i||o)return void(n?this.context.strokeText(_e666,t,r):this.context.fillText(_e666,t,r));var a=t;var s=Tu.graphemeSegmenter(_e666);var u=this.context.measureText(_e666).width,l=0;for(var _e685=0;_e685<s.length;++_e685){var _t283=s[_e685];n?this.context.strokeText(_t283,a,r):this.context.fillText(_t283,a,r);var _o63="";for(var _t284=_e685+1;_t284<s.length;++_t284)_o63+=s[_t284];l=this.context.measureText(_o63).width,a+=u-l+i,u=l;}}},{key:"updateTexture",value:function updateTexture(){var _e668=this.canvas;if(this._style.trim){var _t285=Ut(_e668);_t285.data&&(_e668.width=_t285.width,_e668.height=_t285.height,this.context.putImageData(_t285.data,0,0));}var t=this._texture,r=this._style,n=r.trim?0:r.padding,i=t.baseTexture;t.trim.width=t._frame.width=_e668.width/this._resolution,t.trim.height=t._frame.height=_e668.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-2*n,t.orig.height=t._frame.height-2*n,this._onTextureUpdate(),i.setRealSize(_e668.width,_e668.height,this._resolution),t.updateUvs(),this.dirty=!1;}},{key:"_render",value:function _render(_e669){this._autoResolution&&this._resolution!==_e669.resolution&&(this._resolution=_e669.resolution,this.dirty=!0),this.updateText(!0),_get(_getPrototypeOf(e.prototype),"_render",this).call(this,_e669);}},{key:"updateTransform",value:function updateTransform(){this.updateText(!0),_get(_getPrototypeOf(e.prototype),"updateTransform",this).call(this);}},{key:"getBounds",value:function getBounds(_e670,t){return this.updateText(!0),-1===this._textureID&&(_e670=!1),_get(_getPrototypeOf(e.prototype),"getBounds",this).call(this,_e670,t);}},{key:"getLocalBounds",value:function getLocalBounds(_e671){return this.updateText(!0),_get(_getPrototypeOf(e.prototype),"getLocalBounds",this).call(this,_e671);}},{key:"_calculateBounds",value:function _calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData);}},{key:"_generateFillStyle",value:function _generateFillStyle(_e672,t,r){var n=_e672.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var i;var o=_e672.dropShadow?_e672.dropShadowDistance:0,a=_e672.padding||0,s=this.canvas.width/this._resolution-o-2*a,u=this.canvas.height/this._resolution-o-2*a,l=n.slice(),h=_e672.fillGradientStops.slice();if(!h.length){var _e673=l.length+1;for(var _t286=1;_t286<_e673;++_t286)h.push(_t286/_e673);}if(l.unshift(n[0]),h.unshift(0),l.push(n[n.length-1]),h.push(1),_e672.fillGradientType===Iu.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,a,s/2,u+a);var _n125=r.fontProperties.fontSize+_e672.strokeThickness;for(var _e686=0;_e686<t.length;_e686++){var _o64=r.lineHeight*(_e686-1)+_n125,_a72=r.lineHeight*_e686;var _s43=_a72;_e686>0&&_o64>_a72&&(_s43=(_a72+_o64)/2);var _c15=_a72+_n125,_d10=r.lineHeight*(_e686+1);var _f10=_c15;_e686+1<t.length&&_d10<_c15&&(_f10=(_c15+_d10)/2);var _p10=(_f10-_s43)/u;for(var _e687=0;_e687<l.length;_e687++){var _t287=0;_t287="number"==typeof h[_e687]?h[_e687]:_e687/l.length;var _r282=Math.min(1,Math.max(0,_s43/u+_t287*_p10));_r282=Number(_r282.toFixed(5)),i.addColorStop(_r282,l[_e687]);}}}else{i=this.context.createLinearGradient(a,u/2,s+a,u/2);var _e676=l.length+1;var _t288=1;for(var _r283=0;_r283<l.length;_r283++){var _n126=void 0;_n126="number"==typeof h[_r283]?h[_r283]:_t288/_e676,i.addColorStop(_n126,l[_r283]),_t288++;}}return i;}},{key:"destroy",value:function destroy(_e677){"boolean"==typeof _e677&&(_e677={children:_e677}),_e677=Object.assign({},$u,_e677),_get(_getPrototypeOf(e.prototype),"destroy",this).call(this,_e677),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null;}},{key:"width",get:function get(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width;},set:function set(_e678){this.updateText(!0);var t=Tt(this.scale.x)||1;this.scale.x=t*_e678/this._texture.orig.width,this._width=_e678;}},{key:"height",get:function get(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height;},set:function set(_e679){this.updateText(!0);var t=Tt(this.scale.y)||1;this.scale.y=t*_e679/this._texture.orig.height,this._height=_e679;}},{key:"style",get:function get(){return this._style;},set:function set(_e680){_e680=_e680||{},this._style=_e680 instanceof Ou?_e680:new Ou(_e680),this.localStyleID=-1,this.dirty=!0;}},{key:"text",get:function get(){return this._text;},set:function set(_e681){var _e688;_e681=String((_e688=_e681)!==null&&_e688!==void 0?_e688:""),this._text!==_e681&&(this._text=_e681,this.dirty=!0);}},{key:"resolution",get:function get(){return this._resolution;},set:function set(_e682){this._autoResolution=!1,this._resolution!==_e682&&(this._resolution=_e682,this.dirty=!0);}}],[{key:"experimentalLetterSpacing",get:function get(){return Tu.experimentalLetterSpacing;},set:function set(_e661){xe("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Tu.experimentalLetterSpacing=_e661;}}]);return e;}(yo);Ru.defaultAutoResolution=!0;var Bu=Ru;var Du=/*#__PURE__*/function(){function Du(e){_classCallCheck(this,Du);this.maxItemsPerFrame=e,this.itemsLeft=0;}_createClass(Du,[{key:"beginFrame",value:function beginFrame(){this.itemsLeft=this.maxItemsPerFrame;}},{key:"allowedToUpload",value:function allowedToUpload(){return this.itemsLeft-->0;}}]);return Du;}();function Mu(e,t){var _e$_textures;var r=!1;if(e!==null&&e!==void 0&&(_e$_textures=e._textures)!==null&&_e$_textures!==void 0&&_e$_textures.length)for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof Sn){var i=e._textures[n].baseTexture;t.includes(i)||(t.push(i),r=!0);}return r;}function Lu(e,t){if(e.baseTexture instanceof ar){var _r284=e.baseTexture;return t.includes(_r284)||t.push(_r284),!0;}return!1;}function Fu(e,t){if(e._texture&&e._texture instanceof Sn){var _r285=e._texture.baseTexture;return t.includes(_r285)||t.push(_r285),!0;}return!1;}function Nu(e,t){return t instanceof Bu&&(t.updateText(!0),!0);}function Uu(e,t){if(t instanceof Ou){var _e689=t.toFontString();return Tu.measureFont(_e689),!0;}return!1;}function ju(e,t){if(e instanceof Bu){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);var _r286=e._texture.baseTexture;return t.includes(_r286)||t.push(_r286),!0;}return!1;}function Gu(e,t){return e instanceof Ou&&(t.includes(e)||t.push(e),!0);}var zu=/*#__PURE__*/function(){function e(t){var _this134=this;_classCallCheck(this,e);this.limiter=new Du(e.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){_this134.queue&&_this134.prepareItems();},this.registerFindHook(ju),this.registerFindHook(Gu),this.registerFindHook(Mu),this.registerFindHook(Lu),this.registerFindHook(Fu),this.registerUploadHook(Nu),this.registerUploadHook(Uu);}_createClass(e,[{key:"upload",value:function upload(_e690){var _this135=this;return new Promise(function(t){_e690&&_this135.add(_e690),_this135.queue.length?(_this135.completes.push(t),_this135.ticking||(_this135.ticking=!0,Di.system.addOnce(_this135.tick,_this135,$i.UTILITY))):t();});}},{key:"tick",value:function tick(){setTimeout(this.delayedTick,0);}},{key:"prepareItems",value:function prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var _e691=this.queue[0];var _t289=!1;if(_e691&&!_e691._destroyed)for(var _r287=0,n=this.uploadHooks.length;_r287<n;_r287++)if(this.uploadHooks[_r287](this.uploadHookHelper,_e691)){this.queue.shift(),_t289=!0;break;}_t289||this.queue.shift();}if(this.queue.length)Di.system.addOnce(this.tick,this,$i.UTILITY);else{this.ticking=!1;var _e692=this.completes.slice(0);this.completes.length=0;for(var _t290=0,_r288=_e692.length;_t290<_r288;_t290++)_e692[_t290]();}}},{key:"registerFindHook",value:function registerFindHook(_e693){return _e693&&this.addHooks.push(_e693),this;}},{key:"registerUploadHook",value:function registerUploadHook(_e694){return _e694&&this.uploadHooks.push(_e694),this;}},{key:"add",value:function add(_e695){for(var _t291=0,_r289=this.addHooks.length;_t291<_r289&&!this.addHooks[_t291](_e695,this.queue);_t291++);if(_e695 instanceof co)for(var _t292=_e695.children.length-1;_t292>=0;_t292--)this.add(_e695.children[_t292]);return this;}},{key:"destroy",value:function destroy(){this.ticking&&Di.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null;}}]);return e;}();zu.uploadsPerFrame=4;var Vu=zu;function Hu(e,t){return t instanceof ar&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0);}function Wu(e,t){if(!(t instanceof ou))return!1;var r=t.geometry;t.finishPoly(),r.updateBatches();var n=r.batches;for(var _t293=0;_t293<n.length;_t293++){var _r290=n[_t293].style.texture;_r290&&Hu(e,_r290.baseTexture);}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0;}function Yu(e,t){return e instanceof ou&&(t.push(e),!0);}Object.defineProperties(J,{UPLOADS_PER_FRAME:{get:function get(){return Vu.uploadsPerFrame;},set:function set(e){xe("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Vu.uploadsPerFrame=e;}}});var Ku=/*#__PURE__*/function(_Vu){_inherits(Ku,_Vu);function Ku(e){var _this136;_classCallCheck(this,Ku);_this136=_callSuper(this,Ku,[e]),_this136.uploadHookHelper=_this136.renderer,_this136.registerFindHook(Yu),_this136.registerUploadHook(Hu),_this136.registerUploadHook(Wu);return _this136;}return _createClass(Ku);}(Vu);Ku.extension={name:"prepare",type:Vt.RendererSystem},Yt.add(Ku);var Xu=/*#__PURE__*/function(){function Xu(e){_classCallCheck(this,Xu);this.maxMilliseconds=e,this.frameStart=0;}_createClass(Xu,[{key:"beginFrame",value:function beginFrame(){this.frameStart=Date.now();}},{key:"allowedToUpload",value:function allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds;}}]);return Xu;}();var Zu=/*#__PURE__*/function(_yo2){_inherits(Zu,_yo2);function Zu(e){var _this137;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;_classCallCheck(this,Zu);_this137=_callSuper(this,Zu,[e[0]instanceof Sn?e[0]:e[0].texture]),_this137._textures=null,_this137._durations=null,_this137._autoUpdate=t,_this137._isConnectedToTicker=!1,_this137.animationSpeed=1,_this137.loop=!0,_this137.updateAnchor=!1,_this137.onComplete=null,_this137.onFrameChange=null,_this137.onLoop=null,_this137._currentTime=0,_this137._playing=!1,_this137._previousFrame=null,_this137.textures=e;return _this137;}_createClass(Zu,[{key:"stop",value:function stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Di.shared.remove(this.update,this),this._isConnectedToTicker=!1));}},{key:"play",value:function play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Di.shared.add(this.update,this,$i.HIGH),this._isConnectedToTicker=!0));}},{key:"gotoAndStop",value:function gotoAndStop(e){this.stop(),this.currentFrame=e;}},{key:"gotoAndPlay",value:function gotoAndPlay(e){this.currentFrame=e,this.play();}},{key:"update",value:function update(e){if(!this._playing)return;var t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var _r291=this._currentTime%1*this._durations[this.currentFrame];for(_r291+=t/60*1e3;_r291<0;)this._currentTime--,_r291+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);_r291>=this._durations[this.currentFrame];)_r291-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=_r291/this._durations[this.currentFrame];}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture());}},{key:"updateTexture",value:function updateTexture(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame));}},{key:"destroy",value:function destroy(e){this.stop(),_get(_getPrototypeOf(Zu.prototype),"destroy",this).call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null;}},{key:"totalFrames",get:function get(){return this._textures.length;}},{key:"textures",get:function get(){return this._textures;},set:function set(e){if(e[0]instanceof Sn)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var _t294=0;_t294<e.length;_t294++)this._textures.push(e[_t294].texture),this._durations.push(e[_t294].time);}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture();}},{key:"currentFrame",get:function get(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e;},set:function set(e){if(e<0||e>this.totalFrames-1)throw new Error("[AnimatedSprite]: Invalid frame index value ".concat(e,", expected to be between 0 and totalFrames ").concat(this.totalFrames,"."));var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture();}},{key:"playing",get:function get(){return this._playing;}},{key:"autoUpdate",get:function get(){return this._autoUpdate;},set:function set(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Di.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Di.shared.add(this.update,this),this._isConnectedToTicker=!0));}}],[{key:"fromFrames",value:function fromFrames(e){var t=[];for(var _r292=0;_r292<e.length;++_r292)t.push(Sn.from(e[_r292]));return new Zu(t);}},{key:"fromImages",value:function fromImages(e){var t=[];for(var _r293=0;_r293<e.length;++_r293)t.push(Sn.from(e[_r293]));return new Zu(t);}}]);return Zu;}(yo);var qu=new xr();var Ju=/*#__PURE__*/function(_yo3){_inherits(Ju,_yo3);function Ju(e){var _this138;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;_classCallCheck(this,Ju);_this138=_callSuper(this,Ju,[e]),_this138.tileTransform=new Nr(),_this138._width=t,_this138._height=r,_this138.uvMatrix=_this138.texture.uvMatrix||new Un(e),_this138.pluginName="tilingSprite",_this138.uvRespectAnchor=!1;return _this138;}_createClass(Ju,[{key:"clampMargin",get:function get(){return this.uvMatrix.clampMargin;},set:function set(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0);}},{key:"tileScale",get:function get(){return this.tileTransform.scale;},set:function set(e){this.tileTransform.scale.copyFrom(e);}},{key:"tilePosition",get:function get(){return this.tileTransform.position;},set:function set(e){this.tileTransform.position.copyFrom(e);}},{key:"_onTextureUpdate",value:function _onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215;}},{key:"_render",value:function _render(e){var t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this));}},{key:"_calculateBounds",value:function _calculateBounds(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,n);}},{key:"getLocalBounds",value:function getLocalBounds(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ir()),e=this._localBoundsRect),this._bounds.getRectangle(e)):_get(_getPrototypeOf(Ju.prototype),"getLocalBounds",this).call(this,e);}},{key:"containsPoint",value:function containsPoint(e){this.worldTransform.applyInverse(e,qu);var t=this._width,r=this._height,n=-t*this.anchor._x;if(qu.x>=n&&qu.x<n+t){var _e696=-r*this.anchor._y;if(qu.y>=_e696&&qu.y<_e696+r)return!0;}return!1;}},{key:"destroy",value:function destroy(e){_get(_getPrototypeOf(Ju.prototype),"destroy",this).call(this,e),this.tileTransform=null,this.uvMatrix=null;}},{key:"width",get:function get(){return this._width;},set:function set(e){this._width=e;}},{key:"height",get:function get(){return this._height;},set:function set(e){this._height=e;}}],[{key:"from",value:function from(e,t){var r=e instanceof Sn?e:Sn.from(e,t);return new Ju(r,t.width,t.height);}}]);return Ju;}(yo);var Qu="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";var el=new Er();var tl=/*#__PURE__*/function(_ln3){_inherits(tl,_ln3);function tl(e){var _this139;_classCallCheck(this,tl);_this139=_callSuper(this,tl,[e]),e.runners.contextChange.add(_assertThisInitialized(_this139)),_this139.quad=new On(),_this139.state=Jt.for2d();return _this139;}_createClass(tl,[{key:"contextChange",value:function contextChange(){var e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=an.from(Qu,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?an.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):an.from(Qu,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t);}},{key:"render",value:function render(e){var t=this.renderer,r=this.quad;var n=r.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y);var i=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;n=r.uvs,n[0]=n[6]=-i,n[1]=n[3]=-o,n[2]=n[4]=1-i,n[5]=n[7]=1-o,r.invalidate();var a=e._texture,s=a.baseTexture,u=s.alphaMode>0,l=e.tileTransform.localTransform,h=e.uvMatrix;var c=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;c&&(s._glTextures[t.CONTEXT_UID]?c=s.wrapMode!==j.CLAMP:s.wrapMode===j.CLAMP&&(s.wrapMode=j.REPEAT));var d=c?this.simpleShader:this.shader,f=a.width,p=a.height,y=e._width,g=e._height;el.set(l.a*f/y,l.b*f/g,l.c*p/y,l.d*p/g,l.tx/y,l.ty/g),el.invert(),c?el.prepend(h.mapCoord):(d.uniforms.uMapCoord=h.mapCoord.toArray(!0),d.uniforms.uClampFrame=h.uClampFrame,d.uniforms.uClampOffset=h.uClampOffset),d.uniforms.uTransform=el.toArray(!0),d.uniforms.uColor=st.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,t.shader.bind(d),t.geometry.bind(r),this.state.blendMode=ft(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0);}}]);return tl;}(ln);tl.extension={name:"tilingSprite",type:Vt.RendererPlugin},Yt.add(tl);var rl=/*#__PURE__*/function(){function e(_e697,t,r){_classCallCheck(this,e);this.linkedSheets=[],(_e697 instanceof ar||_e697 instanceof Sn)&&(_e697={texture:_e697,data:t,resolutionFilename:r});var _e704=_e697,n=_e704.texture,i=_e704.data,_e704$resolutionFilen=_e704.resolutionFilename,o=_e704$resolutionFilen===void 0?null:_e704$resolutionFilen,_e704$cachePrefix=_e704.cachePrefix,a=_e704$cachePrefix===void 0?"":_e704$cachePrefix;this.cachePrefix=a,this._texture=n instanceof Sn?n:null,this.baseTexture=n instanceof ar?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=i;var s=this.baseTexture.resource;this.resolution=this._updateResolution(o||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null;}_createClass(e,[{key:"_updateResolution",value:function _updateResolution(){var _e698=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=this.data.meta.scale;var r=zt(_e698,null);return null===r&&(r="number"==typeof t?t:parseFloat(t!==null&&t!==void 0?t:"1")),1!==r&&this.baseTexture.setResolution(r),r;}},{key:"parse",value:function parse(){var _this140=this;return new Promise(function(t){_this140._callback=t,_this140._batchIndex=0,_this140._frameKeys.length<=e.BATCH_SIZE?(_this140._processFrames(0),_this140._processAnimations(),_this140._parseComplete()):_this140._nextBatch();});}},{key:"_processFrames",value:function _processFrames(t){var r=t;var n=e.BATCH_SIZE;for(;r-t<n&&r<this._frameKeys.length;){var _e699=this._frameKeys[r],_t295=this._frames[_e699],_n127=_t295.frame;if(_n127){var _r294=null,i=null;var _o65=!1!==_t295.trimmed&&_t295.sourceSize?_t295.sourceSize:_t295.frame,_a73=new Ir(0,0,Math.floor(_o65.w)/this.resolution,Math.floor(_o65.h)/this.resolution);_r294=_t295.rotated?new Ir(Math.floor(_n127.x)/this.resolution,Math.floor(_n127.y)/this.resolution,Math.floor(_n127.h)/this.resolution,Math.floor(_n127.w)/this.resolution):new Ir(Math.floor(_n127.x)/this.resolution,Math.floor(_n127.y)/this.resolution,Math.floor(_n127.w)/this.resolution,Math.floor(_n127.h)/this.resolution),!1!==_t295.trimmed&&_t295.spriteSourceSize&&(i=new Ir(Math.floor(_t295.spriteSourceSize.x)/this.resolution,Math.floor(_t295.spriteSourceSize.y)/this.resolution,Math.floor(_n127.w)/this.resolution,Math.floor(_n127.h)/this.resolution)),this.textures[_e699]=new Sn(this.baseTexture,_r294,_a73,i,_t295.rotated?2:0,_t295.anchor,_t295.borders),Sn.addToCache(this.textures[_e699],this.cachePrefix+_e699.toString());}r++;}}},{key:"_processAnimations",value:function _processAnimations(){var _e700=this.data.animations||{};for(var _t296 in _e700){this.animations[_t296]=[];for(var _r295=0;_r295<_e700[_t296].length;_r295++){var n=_e700[_t296][_r295];this.animations[_t296].push(this.textures[n]);}}}},{key:"_parseComplete",value:function _parseComplete(){var _e701=this._callback;this._callback=null,this._batchIndex=0,_e701.call(this,this.textures);}},{key:"_nextBatch",value:function _nextBatch(){var _this141=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){_this141._batchIndex*e.BATCH_SIZE<_this141._frameKeys.length?_this141._nextBatch():(_this141._processAnimations(),_this141._parseComplete());},0);}},{key:"destroy",value:function destroy(){var _this$_texture;var _e702=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;for(var _e705 in this.textures)this.textures[_e705].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_e702&&((_this$_texture=this._texture)!==null&&_this$_texture!==void 0&&_this$_texture.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[];}}]);return e;}();rl.BATCH_SIZE=1e3;var nl=rl;var il=["jpg","png","jpeg","avif","webp"];function ol(e,t,r){var n={};if(e.forEach(function(e){n[e]=t;}),Object.keys(t.textures).forEach(function(e){n["".concat(t.cachePrefix).concat(e)]=t.textures[e];}),!r){var _r296=Se.dirname(e[0]);t.linkedSheets.forEach(function(e,i){Object.assign(n,ol(["".concat(_r296,"/").concat(t.data.meta.related_multi_packs[i])],e,!0));});}return n;}var al={extension:Vt.Asset,cache:{test:function test(e){return e instanceof nl;},getCacheableAssets:function getCacheableAssets(e,t){return ol(e,t,!1);}},resolver:{test:function test(e){var t=e.split("?")[0].split("."),r=t.pop(),n=t.pop();return"json"===r&&il.includes(n);},parse:function parse(e){var _J$RETINA_PREFIX$exec7,_J$RETINA_PREFIX$exec8;var t=e.split(".");return{resolution:parseFloat((_J$RETINA_PREFIX$exec7=(_J$RETINA_PREFIX$exec8=J.RETINA_PREFIX.exec(e))===null||_J$RETINA_PREFIX$exec8===void 0?void 0:_J$RETINA_PREFIX$exec8[1])!==null&&_J$RETINA_PREFIX$exec7!==void 0?_J$RETINA_PREFIX$exec7:"1"),format:t[t.length-2],src:e};}},loader:{name:"spritesheetLoader",extension:{type:Vt.LoadParser,priority:Qo.Normal},testParse:function(){var _testParse2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee124(e,t){return _regeneratorRuntime().wrap(function _callee124$(_context127){while(1)switch(_context127.prev=_context127.next){case 0:return _context127.abrupt("return",".json"===Se.extname(t.src).toLowerCase()&&!!e.frames);case 1:case"end":return _context127.stop();}},_callee124);}));function testParse(_x147,_x148){return _testParse2.apply(this,arguments);}return testParse;}(),parse:function parse(e,t,r){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee125(){var _t$data6,_e$meta;var _ref62,n,i,o,a,s,_n128,u,l,_e706,_iterator49,_step49,_t$data7,_n130,_i98,_n129;return _regeneratorRuntime().wrap(function _callee125$(_context128){while(1)switch(_context128.prev=_context128.next){case 0:_ref62=(_t$data6=t===null||t===void 0?void 0:t.data)!==null&&_t$data6!==void 0?_t$data6:{},n=_ref62.texture,i=_ref62.imageFilename,o=_ref62.cachePrefix;s=Se.dirname(t.src);if(!(s&&s.lastIndexOf("/")!==s.length-1&&(s+="/"),n&&n.baseTexture)){_context128.next=6;break;}a=n;_context128.next=11;break;case 6:_n128=za(s+(i!==null&&i!==void 0?i:e.meta.image),t.src);_context128.next=9;return r.load([_n128]);case 9:_context128.t0=_n128;a=_context128.sent[_context128.t0];case 11:u=new nl({texture:a.baseTexture,data:e,resolutionFilename:t.src,cachePrefix:o});_context128.next=14;return u.parse();case 14:l=e===null||e===void 0||(_e$meta=e.meta)===null||_e$meta===void 0?void 0:_e$meta.related_multi_packs;if(!Array.isArray(l)){_context128.next=40;break;}_e706=[];_iterator49=_createForOfIteratorHelper(l);_context128.prev=18;_iterator49.s();case 20:if((_step49=_iterator49.n()).done){_context128.next=28;break;}_n130=_step49.value;if(!("string"!=typeof _n130)){_context128.next=24;break;}return _context128.abrupt("continue",26);case 24:_i98=s+_n130;((_t$data7=t.data)===null||_t$data7===void 0?void 0:_t$data7.ignoreMultiPack)||(_i98=za(_i98,t.src),_e706.push(r.load({src:_i98,data:{ignoreMultiPack:!0}})));case 26:_context128.next=20;break;case 28:_context128.next=33;break;case 30:_context128.prev=30;_context128.t1=_context128["catch"](18);_iterator49.e(_context128.t1);case 33:_context128.prev=33;_iterator49.f();return _context128.finish(33);case 36:_context128.next=38;return Promise.all(_e706);case 38:_n129=_context128.sent;u.linkedSheets=_n129,_n129.forEach(function(e){e.linkedSheets=[u].concat(u.linkedSheets.filter(function(t){return t!==e;}));});case 40:return _context128.abrupt("return",u);case 41:case"end":return _context128.stop();}},_callee125,null,[[18,30,33,36]]);}))();},unload:function unload(e){e.destroy(!0);}}};Yt.add(al);var sl=/*#__PURE__*/_createClass(function sl(){_classCallCheck(this,sl);this.info=[],this.common=[],this.page=[],this["char"]=[],this.kerning=[],this.distanceField=[];});var ul=/*#__PURE__*/function(){function ul(){_classCallCheck(this,ul);}_createClass(ul,null,[{key:"test",value:function test(e){return"string"==typeof e&&e.startsWith("info face=");}},{key:"parse",value:function parse(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],"char":[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var _e707 in t){var _n131=t[_e707].match(/^[a-z]+/gm)[0],i=t[_e707].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),_o66={};for(var _e708 in i){var _t297=i[_e708].split("="),_r297=_t297[0],_n132=_t297[1].replace(/"/gm,""),_a74=parseFloat(_n132),_s44=isNaN(_a74)?_n132:_a74;_o66[_r297]=_s44;}r[_n131].push(_o66);}var n=new sl();return r.info.forEach(function(e){return n.info.push({face:e.face,size:parseInt(e.size,10)});}),r.common.forEach(function(e){return n.common.push({lineHeight:parseInt(e.lineHeight,10)});}),r.page.forEach(function(e){return n.page.push({id:parseInt(e.id,10),file:e.file});}),r["char"].forEach(function(e){return n["char"].push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)});}),r.kerning.forEach(function(e){return n.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)});}),r.distanceField.forEach(function(e){return n.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType});}),n;}}]);return ul;}();var ll=/*#__PURE__*/function(){function ll(){_classCallCheck(this,ll);}_createClass(ll,null,[{key:"test",value:function test(e){var t=e;return"string"!=typeof e&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face");}},{key:"parse",value:function parse(e){var t=new sl(),r=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField");for(var _e709=0;_e709<r.length;_e709++)t.info.push({face:r[_e709].getAttribute("face"),size:parseInt(r[_e709].getAttribute("size"),10)});for(var _e710=0;_e710<n.length;_e710++)t.common.push({lineHeight:parseInt(n[_e710].getAttribute("lineHeight"),10)});for(var _e711=0;_e711<i.length;_e711++)t.page.push({id:parseInt(i[_e711].getAttribute("id"),10)||0,file:i[_e711].getAttribute("file")});for(var _e712=0;_e712<o.length;_e712++){var _r298=o[_e712];t["char"].push({id:parseInt(_r298.getAttribute("id"),10),page:parseInt(_r298.getAttribute("page"),10)||0,x:parseInt(_r298.getAttribute("x"),10),y:parseInt(_r298.getAttribute("y"),10),width:parseInt(_r298.getAttribute("width"),10),height:parseInt(_r298.getAttribute("height"),10),xoffset:parseInt(_r298.getAttribute("xoffset"),10),yoffset:parseInt(_r298.getAttribute("yoffset"),10),xadvance:parseInt(_r298.getAttribute("xadvance"),10)});}for(var _e713=0;_e713<a.length;_e713++)t.kerning.push({first:parseInt(a[_e713].getAttribute("first"),10),second:parseInt(a[_e713].getAttribute("second"),10),amount:parseInt(a[_e713].getAttribute("amount"),10)});for(var _e714=0;_e714<s.length;_e714++)t.distanceField.push({fieldType:s[_e714].getAttribute("fieldType"),distanceRange:parseInt(s[_e714].getAttribute("distanceRange"),10)});return t;}}]);return ll;}();var hl=/*#__PURE__*/function(){function hl(){_classCallCheck(this,hl);}_createClass(hl,null,[{key:"test",value:function test(e){return!("string"!=typeof e||!e.includes("<font>"))&&ll.test(J.ADAPTER.parseXML(e));}},{key:"parse",value:function parse(e){return ll.parse(J.ADAPTER.parseXML(e));}}]);return hl;}();var cl=[ul,ll,hl];function dl(e){for(var _t298=0;_t298<cl.length;_t298++)if(cl[_t298].test(e))return cl[_t298];return null;}function fl(e,t,r,n,i,o,a){var s=r.text,u=r.fontProperties;t.translate(n,i),t.scale(o,o);var l=a.strokeThickness/2,h=-a.strokeThickness/2;if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=function(e,t,r,n,i,o){var a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s;var u=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,h=e.width/n-u-2*l,c=e.height/n-u-2*l,d=a.slice(),f=r.fillGradientStops.slice();if(!f.length){var _e715=d.length+1;for(var _t299=1;_t299<_e715;++_t299)f.push(_t299/_e715);}if(d.unshift(a[0]),f.unshift(0),d.push(a[a.length-1]),f.push(1),r.fillGradientType===Iu.LINEAR_VERTICAL){s=t.createLinearGradient(h/2,l,h/2,c+l);var _e716=0;var _n133=(o.fontProperties.fontSize+r.strokeThickness)/c;for(var _t300=0;_t300<i.length;_t300++){var _r299=o.lineHeight*_t300;for(var _t301=0;_t301<d.length;_t301++){var _i99=0;_i99="number"==typeof f[_t301]?f[_t301]:_t301/d.length;var _o67=_r299/c+_i99*_n133;var _a75=Math.max(_e716,_o67);_a75=Math.min(_a75,1),s.addColorStop(_a75,d[_t301]),_e716=_a75;}}}else{s=t.createLinearGradient(l,c/2,h+l,c/2);var _e717=d.length+1;var _r300=1;for(var _t302=0;_t302<d.length;_t302++){var _n134=void 0;_n134="number"==typeof f[_t302]?f[_t302]:_r300/_e717,s.addColorStop(_n134,d[_t302]),_r300++;}}return s;}(e,t,a,o,[s],r),t.strokeStyle=a.stroke,a.dropShadow){var _e718=a.dropShadowColor,_r301=a.dropShadowBlur*o,_n135=a.dropShadowDistance*o;t.shadowColor=st.shared.setValue(_e718).setAlpha(a.dropShadowAlpha).toRgbaString(),t.shadowBlur=_r301,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*_n135,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*_n135;}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,l,h+r.lineHeight-u.descent),a.fill&&t.fillText(s,l,h+r.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)";}function pl(e){return Array.from?Array.from(e):e.split("");}function yl(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0);}var gl=/*#__PURE__*/function(){function e(_e719,t,r){var _a$fieldType$toLowerC,_a$fieldType;_classCallCheck(this,e);var _e719$info=_slicedToArray(_e719.info,1),n=_e719$info[0],_e719$common=_slicedToArray(_e719.common,1),i=_e719$common[0],_e719$page=_slicedToArray(_e719.page,1),o=_e719$page[0],_e719$distanceField=_slicedToArray(_e719.distanceField,1),a=_e719$distanceField[0],s=zt(o.file),u={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/s,this.chars={},this.pageTextures=u;for(var _r302=0;_r302<_e719.page.length;_r302++){var _e719$page$_r=_e719.page[_r302],_n136=_e719$page$_r.id,_i100=_e719$page$_r.file;u[_n136]=t instanceof Array?t[_r302]:t[_i100],(a===null||a===void 0?void 0:a.fieldType)&&"none"!==a.fieldType&&(u[_n136].baseTexture.alphaMode=z.NO_PREMULTIPLIED_ALPHA,u[_n136].baseTexture.mipmap=G.OFF);}for(var _t303=0;_t303<_e719["char"].length;_t303++){var _e719$char$_t=_e719["char"][_t303],_r303=_e719$char$_t.id,_n137=_e719$char$_t.page;var _e719$char$_t2=_e719["char"][_t303],_i101=_e719$char$_t2.x,_o68=_e719$char$_t2.y,_a76=_e719$char$_t2.width,_l23=_e719$char$_t2.height,_h21=_e719$char$_t2.xoffset,_c16=_e719$char$_t2.yoffset,_d11=_e719$char$_t2.xadvance;_i101/=s,_o68/=s,_a76/=s,_l23/=s,_h21/=s,_c16/=s,_d11/=s;var _f11=new Ir(_i101+u[_n137].frame.x/s,_o68+u[_n137].frame.y/s,_a76,_l23);this.chars[_r303]={xOffset:_h21,yOffset:_c16,xAdvance:_d11,kerning:{},texture:new Sn(u[_n137].baseTexture,_f11),page:_n137};}for(var _t304=0;_t304<_e719.kerning.length;_t304++){var _e719$kerning$_t=_e719.kerning[_t304],_r304=_e719$kerning$_t.first,_n138=_e719$kerning$_t.second,_i102=_e719$kerning$_t.amount;_r304/=s,_n138/=s,_i102/=s,this.chars[_n138]&&(this.chars[_n138].kerning[_r304]=_i102);}this.distanceFieldRange=a===null||a===void 0?void 0:a.distanceRange,this.distanceFieldType=(_a$fieldType$toLowerC=a===null||a===void 0||(_a$fieldType=a.fieldType)===null||_a$fieldType===void 0?void 0:_a$fieldType.toLowerCase())!==null&&_a$fieldType$toLowerC!==void 0?_a$fieldType$toLowerC:"none";}_createClass(e,[{key:"destroy",value:function destroy(){for(var _e726 in this.chars)this.chars[_e726].texture.destroy(),this.chars[_e726].texture=null;for(var _e727 in this.pageTextures)this._ownsTextures&&this.pageTextures[_e727].destroy(!0),this.pageTextures[_e727]=null;this.chars=null,this.pageTextures=null;}}],[{key:"install",value:function install(t,r,n){var i;if(t instanceof sl)i=t;else{var _e722=dl(t);if(!_e722)throw new Error("Unrecognized data format for font.");i=_e722.parse(t);}r instanceof Sn&&(r=[r]);var o=new e(i,r,n);return e.available[o.font]=o,o;}},{key:"uninstall",value:function uninstall(t){var r=e.available[t];if(!r)throw new Error("No font found named '".concat(t,"'"));r.destroy(),delete e.available[t];}},{key:"from",value:function from(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var _Object$assign=Object.assign({},e.defaultOptions,n),i=_Object$assign.chars,o=_Object$assign.padding,a=_Object$assign.resolution,s=_Object$assign.textureWidth,u=_Object$assign.textureHeight,l=_objectWithoutProperties(_Object$assign,_excluded2),h=function(e){"string"==typeof e&&(e=[e]);var t=[];for(var _r305=0,_n139=e.length;_r305<_n139;_r305++){var _n140=e[_r305];if(Array.isArray(_n140)){if(2!==_n140.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got ".concat(_n140.length,"."));var _e728=_n140[0].charCodeAt(0),_r306=_n140[1].charCodeAt(0);if(_r306<_e728)throw new Error("[BitmapFont]: Invalid character range.");for(var _n141=_e728,_i103=_r306;_n141<=_i103;_n141++)t.push(String.fromCharCode(_n141));}else t.push.apply(t,_toConsumableArray(pl(_n140)));}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t;}(i),c=r instanceof Ou?r:new Ou(r),d=s,f=new sl();f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};var p,y,g,m=0,w=0,b=0;var v=[],x=[];for(var _e729=0;_e729<h.length;_e729++){p||(p=J.ADAPTER.createCanvas(),p.width=s,p.height=u,y=p.getContext("2d"),g=new ar(p,_objectSpread({resolution:a},l)),v.push(g),x.push(new Sn(g)),f.page.push({id:x.length-1,file:""}));var _t305=h[_e729],_r307=Tu.measureText(_t305,c,!1,p),_n142=_r307.width,_i104=Math.ceil(_r307.height),_2=Math.ceil(("italic"===c.fontStyle?2:1)*_n142);if(w>=u-_i104*a){if(0===w)throw new Error("[BitmapFont] textureHeight ".concat(u,"px is too small (fontFamily: '").concat(c.fontFamily,"', fontSize: ").concat(c.fontSize,"px, char: '").concat(_t305,"')"));--_e729,p=null,y=null,g=null,w=0,m=0,b=0;continue;}if(b=Math.max(_i104+_r307.fontProperties.descent,b),_2*a+m>=d){if(0===m)throw new Error("[BitmapFont] textureWidth ".concat(s,"px is too small (fontFamily: '").concat(c.fontFamily,"', fontSize: ").concat(c.fontSize,"px, char: '").concat(_t305,"')"));--_e729,w+=b*a,w=Math.ceil(w),m=0,b=0;continue;}fl(p,y,_r307,m,w,a,c);var _I2=yl(_r307.text);f["char"].push({id:_I2,page:x.length-1,x:m/a,y:w/a,width:_2,height:_i104,xoffset:0,yoffset:0,xadvance:_n142-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),m+=(_2+2*o)*a,m=Math.ceil(m);}if(!(n!==null&&n!==void 0&&n.skipKerning))for(var _e730=0,_t306=h.length;_e730<_t306;_e730++){var _r308=h[_e730];for(var _e731=0;_e731<_t306;_e731++){var _t307=h[_e731],_n143=y.measureText(_r308).width,_i105=y.measureText(_t307).width,_o69=y.measureText(_r308+_t307).width-(_n143+_i105);_o69&&f.kerning.push({first:yl(_r308),second:yl(_t307),amount:_o69});}}var _=new e(f,x,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=_,_;}}]);return e;}();gl.ALPHA=[["a","z"],["A","Z"]," "],gl.NUMERIC=[["0","9"]],gl.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],gl.ASCII=[[" ","~"]],gl.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:gl.ALPHANUMERIC},gl.available={};var ml=gl;var wl=[],bl=[],vl=[],xl=/*#__PURE__*/function(_co5){_inherits(e,_co5);function e(t){var _this142;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,e);_this142=_callSuper(this,e);var _Object$assign2=Object.assign({},e.styleDefaults,r),n=_Object$assign2.align,i=_Object$assign2.tint,o=_Object$assign2.maxWidth,a=_Object$assign2.letterSpacing,s=_Object$assign2.fontName,u=_Object$assign2.fontSize;if(!ml.available[s])throw new Error("Missing BitmapFont \"".concat(s,"\""));_this142._activePagesMeshData=[],_this142._textWidth=0,_this142._textHeight=0,_this142._align=n,_this142._tintColor=new st(i),_this142._font=void 0,_this142._fontName=s,_this142._fontSize=u,_this142.text=t,_this142._maxWidth=o,_this142._maxLineHeight=0,_this142._letterSpacing=a,_this142._anchor=new Lr(function(){_this142.dirty=!0;},_assertThisInitialized(_this142),0,0),_this142._roundPixels=J.ROUND_PIXELS,_this142.dirty=!0,_this142._resolution=J.RESOLUTION,_this142._autoResolution=!0,_this142._textureCache={};return _this142;}_createClass(e,[{key:"updateText",value:function updateText(){var _e732=ml.available[this._fontName],t=this.fontSize,r=t/_e732.size,n=new xr(),i=[],o=[],a=[],s=pl(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*_e732.size/t,l="none"===_e732.distanceFieldType?wl:bl;var h=null,c=0,d=0,f=0,p=-1,y=0,g=0,m=0,w=0;for(var _t308=0;_t308<s.length;_t308++){var _r309=s[_t308],_l24=yl(_r309);if(/(?:\s)/.test(_r309)&&(p=_t308,y=c,w++),"\r"===_r309||"\n"===_r309){o.push(c),a.push(-1),d=Math.max(d,c),++f,++g,n.x=0,n.y+=_e732.lineHeight,h=null,w=0;continue;}var _b4=_e732.chars[_l24];if(!_b4)continue;h&&_b4.kerning[h]&&(n.x+=_b4.kerning[h]);var _v3=vl.pop()||{texture:Sn.EMPTY,line:0,charCode:0,prevSpaces:0,position:new xr()};_v3.texture=_b4.texture,_v3.line=f,_v3.charCode=_l24,_v3.position.x=Math.round(n.x+_b4.xOffset+this._letterSpacing/2),_v3.position.y=Math.round(n.y+_b4.yOffset),_v3.prevSpaces=w,i.push(_v3),c=_v3.position.x+Math.max(_b4.xAdvance-_b4.xOffset,_b4.texture.orig.width),n.x+=_b4.xAdvance+this._letterSpacing,m=Math.max(m,_b4.yOffset+_b4.texture.height),h=_l24,-1!==p&&u>0&&n.x>u&&(++g,St(i,1+p-g,1+_t308-p),_t308=p,p=-1,o.push(y),a.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,y),f++,n.x=0,n.y+=_e732.lineHeight,h=null,w=0);}var b=s[s.length-1];"\r"!==b&&"\n"!==b&&(/(?:\s)/.test(b)&&(c=y),o.push(c),d=Math.max(d,c),a.push(-1));var v=[];for(var _e760=0;_e760<=f;_e760++){var _t309=0;"right"===this._align?_t309=d-o[_e760]:"center"===this._align?_t309=(d-o[_e760])/2:"justify"===this._align&&(_t309=a[_e760]<0?0:(d-o[_e760])/a[_e760]),v.push(_t309);}var x=i.length,_={},I=[],A=this._activePagesMeshData;l.push.apply(l,_toConsumableArray(A));for(var _t310=0;_t310<x;_t310++){var _r310=i[_t310].texture,_n144=_r310.baseTexture.uid;if(!_[_n144]){var _t311=l.pop();if(!_t311){var _r311=new du();var _n145=void 0,_i106=void 0;"none"===_e732.distanceFieldType?(_n145=new fu(Sn.EMPTY),_i106=B.NORMAL):(_n145=new fu(Sn.EMPTY,{program:rn.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),_i106=B.NORMAL_NPM);var _o70=new cu(_r311,_n145);_o70.blendMode=_i106,_t311={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:_o70,vertices:null,uvs:null,indices:null};}_t311.index=0,_t311.indexCount=0,_t311.vertexCount=0,_t311.uvsCount=0,_t311.total=0;var _i107=this._textureCache;_i107[_n144]=_i107[_n144]||new Sn(_r310.baseTexture),_t311.mesh.texture=_i107[_n144],_t311.mesh.tint=this._tintColor.value,I.push(_t311),_[_n144]=_t311;}_[_n144].total++;}for(var _e761=0;_e761<A.length;_e761++)I.includes(A[_e761])||this.removeChild(A[_e761].mesh);for(var _e762=0;_e762<I.length;_e762++)I[_e762].mesh.parent!==this&&this.addChild(I[_e762].mesh);this._activePagesMeshData=I;for(var _e763 in _){var _t312$indices;var _t312=_[_e763],_r312=_t312.total;if(!(((_t312$indices=_t312.indices)===null||_t312$indices===void 0?void 0:_t312$indices.length)>6*_r312)||_t312.vertices.length<2*cu.BATCHABLE_SIZE)_t312.vertices=new Float32Array(8*_r312),_t312.uvs=new Float32Array(8*_r312),_t312.indices=new Uint16Array(6*_r312);else{var _e737=_t312.total,_r313=_t312.vertices;for(var _t313=4*_e737*2;_t313<_r313.length;_t313++)_r313[_t313]=0;}_t312.mesh.size=6*_r312;}for(var _e764=0;_e764<x;_e764++){var _t314=i[_e764];var _n146=_t314.position.x+v[_t314.line]*("justify"===this._align?_t314.prevSpaces:1);this._roundPixels&&(_n146=Math.round(_n146));var _o71=_n146*r,_a77=_t314.position.y*r,_s45=_t314.texture,_u33=_[_s45.baseTexture.uid],_l25=_s45.frame,_h22=_s45._uvs,_c17=_u33.index++;_u33.indices[6*_c17+0]=0+4*_c17,_u33.indices[6*_c17+1]=1+4*_c17,_u33.indices[6*_c17+2]=2+4*_c17,_u33.indices[6*_c17+3]=0+4*_c17,_u33.indices[6*_c17+4]=2+4*_c17,_u33.indices[6*_c17+5]=3+4*_c17,_u33.vertices[8*_c17+0]=_o71,_u33.vertices[8*_c17+1]=_a77,_u33.vertices[8*_c17+2]=_o71+_l25.width*r,_u33.vertices[8*_c17+3]=_a77,_u33.vertices[8*_c17+4]=_o71+_l25.width*r,_u33.vertices[8*_c17+5]=_a77+_l25.height*r,_u33.vertices[8*_c17+6]=_o71,_u33.vertices[8*_c17+7]=_a77+_l25.height*r,_u33.uvs[8*_c17+0]=_h22.x0,_u33.uvs[8*_c17+1]=_h22.y0,_u33.uvs[8*_c17+2]=_h22.x1,_u33.uvs[8*_c17+3]=_h22.y1,_u33.uvs[8*_c17+4]=_h22.x2,_u33.uvs[8*_c17+5]=_h22.y2,_u33.uvs[8*_c17+6]=_h22.x3,_u33.uvs[8*_c17+7]=_h22.y3;}this._textWidth=d*r,this._textHeight=(n.y+_e732.lineHeight)*r;for(var _e765 in _){var _t315=_[_e765];if(0!==this.anchor.x||0!==this.anchor.y){var _e740=0;var _r314=this._textWidth*this.anchor.x,_n147=this._textHeight*this.anchor.y;for(var _i108=0;_i108<_t315.total;_i108++)_t315.vertices[_e740++]-=_r314,_t315.vertices[_e740++]-=_n147,_t315.vertices[_e740++]-=_r314,_t315.vertices[_e740++]-=_n147,_t315.vertices[_e740++]-=_r314,_t315.vertices[_e740++]-=_n147,_t315.vertices[_e740++]-=_r314,_t315.vertices[_e740++]-=_n147;}this._maxLineHeight=m*r;var _n148=_t315.mesh.geometry.getBuffer("aVertexPosition"),_i109=_t315.mesh.geometry.getBuffer("aTextureCoord"),_o72=_t315.mesh.geometry.getIndex();_n148.data=_t315.vertices,_i109.data=_t315.uvs,_o72.data=_t315.indices,_n148.update(),_i109.update(),_o72.update();}for(var _e766=0;_e766<i.length;_e766++)vl.push(i[_e766]);this._font=_e732,this.dirty=!1;}},{key:"updateTransform",value:function updateTransform(){this.validate(),this.containerUpdateTransform();}},{key:"_render",value:function _render(_e742){this._autoResolution&&this._resolution!==_e742.resolution&&(this._resolution=_e742.resolution,this.dirty=!0);var _ml$available$this$_f=ml.available[this._fontName],t=_ml$available$this$_f.distanceFieldRange,r=_ml$available$this$_f.distanceFieldType,n=_ml$available$this$_f.size;if("none"!==r){var _this$worldTransform=this.worldTransform,_r315=_this$worldTransform.a,i=_this$worldTransform.b,_o73=_this$worldTransform.c,_a78=_this$worldTransform.d,_s46=Math.sqrt(_r315*_r315+i*i),_u34=Math.sqrt(_o73*_o73+_a78*_a78),_l26=(Math.abs(_s46)+Math.abs(_u34))/2,_h23=this.fontSize/n,_c18=_e742._view.resolution;var _iterator50=_createForOfIteratorHelper(this._activePagesMeshData),_step50;try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var _e743=_step50.value;_e743.mesh.shader.uniforms.uFWidth=_l26*t*_h23*_c18;}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}}_get(_getPrototypeOf(e.prototype),"_render",this).call(this,_e742);}},{key:"getLocalBounds",value:function getLocalBounds(){return this.validate(),_get(_getPrototypeOf(e.prototype),"getLocalBounds",this).call(this);}},{key:"validate",value:function validate(){var _e744=ml.available[this._fontName];if(!_e744)throw new Error("Missing BitmapFont \"".concat(this._fontName,"\""));this._font!==_e744&&(this.dirty=!0),this.dirty&&this.updateText();}},{key:"tint",get:function get(){return this._tintColor.value;},set:function set(_e745){if(this.tint!==_e745){this._tintColor.setValue(_e745);for(var _t316=0;_t316<this._activePagesMeshData.length;_t316++)this._activePagesMeshData[_t316].mesh.tint=_e745;}}},{key:"align",get:function get(){return this._align;},set:function set(_e746){this._align!==_e746&&(this._align=_e746,this.dirty=!0);}},{key:"fontName",get:function get(){return this._fontName;},set:function set(_e747){if(!ml.available[_e747])throw new Error("Missing BitmapFont \"".concat(_e747,"\""));this._fontName!==_e747&&(this._fontName=_e747,this.dirty=!0);}},{key:"fontSize",get:function get(){var _this$_fontSize;return(_this$_fontSize=this._fontSize)!==null&&_this$_fontSize!==void 0?_this$_fontSize:ml.available[this._fontName].size;},set:function set(_e748){this._fontSize!==_e748&&(this._fontSize=_e748,this.dirty=!0);}},{key:"anchor",get:function get(){return this._anchor;},set:function set(_e749){"number"==typeof _e749?this._anchor.set(_e749):this._anchor.copyFrom(_e749);}},{key:"text",get:function get(){return this._text;},set:function set(_e750){var _e767;_e750=String((_e767=_e750)!==null&&_e767!==void 0?_e767:""),this._text!==_e750&&(this._text=_e750,this.dirty=!0);}},{key:"maxWidth",get:function get(){return this._maxWidth;},set:function set(_e751){this._maxWidth!==_e751&&(this._maxWidth=_e751,this.dirty=!0);}},{key:"maxLineHeight",get:function get(){return this.validate(),this._maxLineHeight;}},{key:"textWidth",get:function get(){return this.validate(),this._textWidth;}},{key:"letterSpacing",get:function get(){return this._letterSpacing;},set:function set(_e752){this._letterSpacing!==_e752&&(this._letterSpacing=_e752,this.dirty=!0);}},{key:"roundPixels",get:function get(){return this._roundPixels;},set:function set(_e753){_e753!==this._roundPixels&&(this._roundPixels=_e753,this.dirty=!0);}},{key:"textHeight",get:function get(){return this.validate(),this._textHeight;}},{key:"resolution",get:function get(){return this._resolution;},set:function set(_e754){this._autoResolution=!1,this._resolution!==_e754&&(this._resolution=_e754,this.dirty=!0);}},{key:"destroy",value:function destroy(_e755){var t=this._textureCache,r="none"===ml.available[this._fontName].distanceFieldType?wl:bl;r.push.apply(r,_toConsumableArray(this._activePagesMeshData));var _iterator51=_createForOfIteratorHelper(this._activePagesMeshData),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var _e756=_step51.value;this.removeChild(_e756.mesh);}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}this._activePagesMeshData=[],r.filter(function(_e757){return t[_e757.mesh.texture.baseTexture.uid];}).forEach(function(_e758){_e758.mesh.texture=Sn.EMPTY;});for(var _e768 in t)t[_e768].destroy(),delete t[_e768];this._font=null,this._tintColor=null,this._textureCache=null,_get(_getPrototypeOf(e.prototype),"destroy",this).call(this,_e755);}}]);return e;}(co);xl.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};var _l=xl;var Il=[".xml",".fnt"],Al={extension:{type:Vt.LoadParser,priority:Qo.Normal},name:"loadBitmapFont",test:function test(e){return Il.includes(Se.extname(e).toLowerCase());},testParse:function(){var _testParse3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee126(e){return _regeneratorRuntime().wrap(function _callee126$(_context129){while(1)switch(_context129.prev=_context129.next){case 0:return _context129.abrupt("return",ul.test(e)||hl.test(e));case 1:case"end":return _context129.stop();}},_callee126);}));function testParse(_x149){return _testParse3.apply(this,arguments);}return testParse;}(),parse:function parse(e,t,r){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee127(){var n,i,o,a,_e769,_t317,_r316,s,u;return _regeneratorRuntime().wrap(function _callee127$(_context130){while(1)switch(_context130.prev=_context130.next){case 0:n=ul.test(e)?ul.parse(e):hl.parse(e),i=t.src,o=n.page,a=[];for(_e769=0;_e769<o.length;++_e769){_t317=o[_e769].file;_r316=Se.join(Se.dirname(i),_t317);_r316=za(_r316,i),a.push(_r316);}_context130.next=4;return r.load(a);case 4:s=_context130.sent;u=a.map(function(e){return s[e];});return _context130.abrupt("return",ml.install(n,u,!0));case 7:case"end":return _context130.stop();}},_callee127);}))();},load:function(){var _load6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee128(e,t){return _regeneratorRuntime().wrap(function _callee128$(_context131){while(1)switch(_context131.prev=_context131.next){case 0:_context131.next=2;return J.ADAPTER.fetch(e);case 2:return _context131.abrupt("return",_context131.sent.text());case 3:case"end":return _context131.stop();}},_callee128);}));function load(_x150,_x151){return _load6.apply(this,arguments);}return load;}(),unload:function unload(e){e.destroy();}};Yt.add(Al);var Sl=/*#__PURE__*/function(_Ou){_inherits(e,_Ou);function e(){var _this143;_classCallCheck(this,e);_this143=_callSuper(this,e,arguments),_this143._fonts=[],_this143._overrides=[],_this143._stylesheet="",_this143.fontsDirty=!1;return _this143;}_createClass(e,[{key:"cleanFonts",value:function cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(function(t){URL.revokeObjectURL(t.src),t.refs--,0===t.refs&&(t.fontFace&&document.fonts["delete"](t.fontFace),delete e.availableFonts[t.originalUrl]);}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0);}},{key:"loadFont",value:function loadFont(t){var _this144=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=e.availableFonts;if(n[t]){var _e771=n[t];return this._fonts.push(_e771),_e771.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve();}return J.ADAPTER.fetch(t).then(function(_e772){return _e772.blob();}).then(/*#__PURE__*/function(){var _ref63=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee129(_e773){return _regeneratorRuntime().wrap(function _callee129$(_context132){while(1)switch(_context132.prev=_context132.next){case 0:return _context132.abrupt("return",new Promise(function(t,r){var n=URL.createObjectURL(_e773),i=new FileReader();i.onload=function(){return t([n,i.result]);},i.onerror=r,i.readAsDataURL(_e773);}));case 1:case"end":return _context132.stop();}},_callee129);}));return function(_x152){return _ref63.apply(this,arguments);};}()).then(/*#__PURE__*/function(){var _ref65=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee130(_ref64){var _ref66,_e774,i,o,a;return _regeneratorRuntime().wrap(function _callee130$(_context133){while(1)switch(_context133.prev=_context133.next){case 0:_ref66=_slicedToArray(_ref64,2),_e774=_ref66[0],i=_ref66[1];o=Object.assign({family:Se.basename(t,Se.extname(t)),weight:"normal",style:"normal",display:"auto",src:_e774,dataSrc:i,refs:1,originalUrl:t,fontFace:null},r);n[t]=o,_this144._fonts.push(o),_this144.styleID++;a=new FontFace(o.family,"url(".concat(o.src,")"),{weight:o.weight,style:o.style,display:o.display});o.fontFace=a;_context133.next=7;return a.load();case 7:document.fonts.add(a);_context133.next=10;return document.fonts.ready;case 10:_this144.styleID++;_this144.fontsDirty=!0;case 12:case"end":return _context133.stop();}},_callee130);}));return function(_x153){return _ref65.apply(this,arguments);};}());}},{key:"addOverride",value:function addOverride(){var _this145=this,_this$_overrides;for(var _len9=arguments.length,_e775=new Array(_len9),_key9=0;_key9<_len9;_key9++){_e775[_key9]=arguments[_key9];}var t=_e775.filter(function(_e776){return!_this145._overrides.includes(_e776);});t.length>0&&((_this$_overrides=this._overrides).push.apply(_this$_overrides,_toConsumableArray(t)),this.styleID++);}},{key:"removeOverride",value:function removeOverride(){var _this146=this;for(var _len10=arguments.length,_e777=new Array(_len10),_key10=0;_key10<_len10;_key10++){_e777[_key10]=arguments[_key10];}var t=_e777.filter(function(_e778){return _this146._overrides.includes(_e778);});t.length>0&&(this._overrides=this._overrides.filter(function(_e779){return!t.includes(_e779);}),this.styleID++);}},{key:"toCSS",value:function toCSS(_e780){return["transform: scale(".concat(_e780,")"),"transform-origin: top left","display: inline-block","color: ".concat(this.normalizeColor(this.fill)),"font-size: ".concat(this.fontSize,"px"),"font-family: ".concat(this.fontFamily),"font-weight: ".concat(this.fontWeight),"font-style: ".concat(this.fontStyle),"font-variant: ".concat(this.fontVariant),"letter-spacing: ".concat(this.letterSpacing,"px"),"text-align: ".concat(this.align),"padding: ".concat(this.padding,"px"),"white-space: ".concat(this.whiteSpace)].concat(_toConsumableArray(this.lineHeight?["line-height: ".concat(this.lineHeight,"px")]:[]),_toConsumableArray(this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),"max-width: ".concat(this.wordWrapWidth,"px")]:[]),_toConsumableArray(this.strokeThickness?["-webkit-text-stroke-width: ".concat(this.strokeThickness,"px"),"-webkit-text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"text-stroke-width: ".concat(this.strokeThickness,"px"),"text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"paint-order: stroke"]:[]),_toConsumableArray(this.dropShadow?[this.dropShadowToCSS()]:[]),_toConsumableArray(this._overrides)).join(";");}},{key:"toGlobalCSS",value:function toGlobalCSS(){return this._fonts.reduce(function(_e781,t){return"".concat(_e781,"\n            @font-face {\n                font-family: \"").concat(t.family,"\";\n                src: url('").concat(t.dataSrc,"');\n                font-weight: ").concat(t.weight,";\n                font-style: ").concat(t.style,";\n                font-display: ").concat(t.display,";\n            }");},this._stylesheet);}},{key:"stylesheet",get:function get(){return this._stylesheet;},set:function set(_e782){this._stylesheet!==_e782&&(this._stylesheet=_e782,this.styleID++);}},{key:"normalizeColor",value:function normalizeColor(_e783){return Array.isArray(_e783)&&(_e783=ct(_e783)),"number"==typeof _e783?lt(_e783):_e783;}},{key:"dropShadowToCSS",value:function dropShadowToCSS(){var _e784=this.normalizeColor(this.dropShadowColor);var t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);_e784.startsWith("#")&&t<1&&(_e784+=(255*t|0).toString(16).padStart(2,"0"));var i="".concat(r,"px ").concat(n,"px");return this.dropShadowBlur>0?"text-shadow: ".concat(i," ").concat(this.dropShadowBlur,"px ").concat(_e784):"text-shadow: ".concat(i," ").concat(_e784);}},{key:"reset",value:function reset(){Object.assign(this,e.defaultOptions);}},{key:"onBeforeDraw",value:function onBeforeDraw(){var _e785=this.fontsDirty;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&_e785?new Promise(function(_e786){return setTimeout(_e786,100);}):Promise.resolve();}},{key:"isSafari",get:function get(){var _J$ADAPTER$getNavigat=J.ADAPTER.getNavigator(),_e787=_J$ADAPTER$getNavigat.userAgent;return /^((?!chrome|android).)*safari/i.test(_e787);}},{key:"fillGradientStops",get:function get(){return _get(_getPrototypeOf(e.prototype),"fillGradientStops",this);},set:function set(_e788){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText");}},{key:"fillGradientType",get:function get(){return _get(_getPrototypeOf(e.prototype),"fillGradientType",this);},set:function set(_e789){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText");}},{key:"miterLimit",get:function get(){return _get(_getPrototypeOf(e.prototype),"miterLimit",this);},set:function set(_e790){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText");}},{key:"trim",get:function get(){return _get(_getPrototypeOf(e.prototype),"trim",this);},set:function set(_e791){console.warn("[HTMLTextStyle] trim is not supported by HTMLText");}},{key:"textBaseline",get:function get(){return _get(_getPrototypeOf(e.prototype),"textBaseline",this);},set:function set(_e792){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText");}},{key:"leading",get:function get(){return _get(_getPrototypeOf(e.prototype),"leading",this);},set:function set(_e793){console.warn("[HTMLTextStyle] leading is not supported by HTMLText");}},{key:"lineJoin",get:function get(){return _get(_getPrototypeOf(e.prototype),"lineJoin",this);},set:function set(_e794){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText");}}],[{key:"from",value:function from(t){return new e(Object.keys(e.defaultOptions).reduce(function(_e770,r){return _objectSpread(_objectSpread({},_e770),{},_defineProperty({},r,t[r]));},{}));}}]);return e;}(Ou);Sl.availableFonts={},Sl.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};var Tl=Sl;var Cl=/*#__PURE__*/function(_yo4){_inherits(e,_yo4);function e(){var _e$defaultResolution2;var _this147;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,e);_this147=_callSuper(this,e,[Sn.EMPTY]),_this147._text=null,_this147._style=null,_this147._autoResolution=!0,_this147.localStyleID=-1,_this147.dirty=!1,_this147._updateID=0,_this147.ownsStyle=!1;var n=new Image(),i=Sn.from(n,{scaleMode:J.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new Ir(),i.trim=new Ir(),_this147.texture=i;var o="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xhtml",s=document.createElementNS(o,"svg"),u=document.createElementNS(o,"foreignObject"),l=document.createElementNS(a,"div"),h=document.createElementNS(a,"style");u.setAttribute("width","10000"),u.setAttribute("height","10000"),u.style.overflow="hidden",s.appendChild(u),_this147.maxWidth=e.defaultMaxWidth,_this147.maxHeight=e.defaultMaxHeight,_this147._domElement=l,_this147._styleElement=h,_this147._svgRoot=s,_this147._foreignObject=u,_this147._foreignObject.appendChild(h),_this147._foreignObject.appendChild(l),_this147._image=n,_this147._loadImage=new Image(),_this147._autoResolution=e.defaultAutoResolution,_this147._resolution=(_e$defaultResolution2=e.defaultResolution)!==null&&_e$defaultResolution2!==void 0?_e$defaultResolution2:J.RESOLUTION,_this147.text=t,_this147.style=r;return _this147;}_createClass(e,[{key:"measureText",value:function measureText(_e795){var _this$_style,_this$_style2;var _Object$assign3=Object.assign({text:this._text,style:this._style,resolution:this._resolution},_e795),t=_Object$assign3.text,r=_Object$assign3.style,n=_Object$assign3.resolution;Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);var i=this._domElement.getBoundingClientRect();this._svgRoot.remove();var o=i.width,a=i.height;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");var s=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(_this$_style=this._style)===null||_this$_style===void 0?void 0:_this$_style.toCSS(n)}),this._styleElement.textContent=(_this$_style2=this._style)===null||_this$_style2===void 0?void 0:_this$_style2.toGlobalCSS()),{width:s+2*r.padding,height:u+2*r.padding};}},{key:"updateText",value:function(){var _updateText=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee132(){var _this148=this;var _e796,t,r,n,_this$measureText,i,o,a,_args135=arguments;return _regeneratorRuntime().wrap(function _callee132$(_context135){while(1)switch(_context135.prev=_context135.next){case 0:_e796=_args135.length>0&&_args135[0]!==undefined?_args135[0]:!0;t=this.style,r=this._image,n=this._loadImage;if(!(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&_e796)){_context135.next=4;break;}return _context135.abrupt("return");case 4:_this$measureText=this.measureText(),i=_this$measureText.width,o=_this$measureText.height;r.width=n.width=Math.ceil(Math.max(1,i)),r.height=n.height=Math.ceil(Math.max(1,o)),this._updateID++;a=this._updateID;_context135.next=9;return new Promise(function(_e797){n.onload=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee131(){return _regeneratorRuntime().wrap(function _callee131$(_context134){while(1)switch(_context134.prev=_context134.next){case 0:_context134.t0=a<_this148._updateID;if(_context134.t0){_context134.next=8;break;}_context134.next=4;return t.onBeforeDraw();case 4:r.src=n.src;n.onload=null;n.src="";_this148.updateTexture();case 8:_e797();case 9:case"end":return _context134.stop();}},_callee131);}));var i=new XMLSerializer().serializeToString(_this148._svgRoot);n.src="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(i));});case 9:case"end":return _context135.stop();}},_callee132,this);}));function updateText(){return _updateText.apply(this,arguments);}return updateText;}()},{key:"source",get:function get(){return this._image;}},{key:"updateTexture",value:function updateTexture(){var _e798=this.style,t=this.texture,r=this._image,n=this.resolution,i=_e798.padding,o=t.baseTexture;t.trim.width=t._frame.width=r.width/n,t.trim.height=t._frame.height=r.height/n,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-2*i,t.orig.height=t._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(r.width,r.height,n),this.dirty=!1;}},{key:"_render",value:function _render(_e799){this._autoResolution&&this._resolution!==_e799.resolution&&(this._resolution=_e799.resolution,this.dirty=!0),this.updateText(!0),_get(_getPrototypeOf(e.prototype),"_render",this).call(this,_e799);}},{key:"_renderCanvas",value:function _renderCanvas(_e800){this._autoResolution&&this._resolution!==_e800.resolution&&(this._resolution=_e800.resolution,this.dirty=!0),this.updateText(!0),_get(_getPrototypeOf(e.prototype),"_renderCanvas",this).call(this,_e800);}},{key:"getLocalBounds",value:function getLocalBounds(_e801){return this.updateText(!0),_get(_getPrototypeOf(e.prototype),"getLocalBounds",this).call(this,_e801);}},{key:"_calculateBounds",value:function _calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData);}},{key:"_onStyleChange",value:function _onStyleChange(){this.dirty=!0;}},{key:"destroy",value:function destroy(t){var _this$_style3,_this$_svgRoot,_this$_domElement,_this$_foreignObject,_this$_styleElement;"boolean"==typeof t&&(t={children:t}),t=Object.assign({},e.defaultDestroyOptions,t),_get(_getPrototypeOf(e.prototype),"destroy",this).call(this,t);var r=null;this.ownsStyle&&(_this$_style3=this._style)!==null&&_this$_style3!==void 0&&_this$_style3.cleanFonts(),this._style=r,(_this$_svgRoot=this._svgRoot)!==null&&_this$_svgRoot!==void 0&&_this$_svgRoot.remove(),this._svgRoot=r,(_this$_domElement=this._domElement)!==null&&_this$_domElement!==void 0&&_this$_domElement.remove(),this._domElement=r,(_this$_foreignObject=this._foreignObject)!==null&&_this$_foreignObject!==void 0&&_this$_foreignObject.remove(),this._foreignObject=r,(_this$_styleElement=this._styleElement)!==null&&_this$_styleElement!==void 0&&_this$_styleElement.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r;}},{key:"width",get:function get(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution;},set:function set(_e802){this.updateText(!0);var t=Tt(this.scale.x)||1;this.scale.x=t*_e802/this._image.width/this.resolution,this._width=_e802;}},{key:"height",get:function get(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution;},set:function set(_e803){this.updateText(!0);var t=Tt(this.scale.y)||1;this.scale.y=t*_e803/this._image.height/this.resolution,this._height=_e803;}},{key:"style",get:function get(){return this._style;},set:function set(_e804){this._style!==_e804&&((_e804=_e804||{})instanceof Tl?(this.ownsStyle=!1,this._style=_e804):_e804 instanceof Ou?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Tl.from(_e804)):(this.ownsStyle=!0,this._style=new Tl(_e804)),this.localStyleID=-1,this.dirty=!0);}},{key:"text",get:function get(){return this._text;},set:function set(_e805){_e805=String(""===_e805||null==_e805?" ":_e805),_e805=this.sanitiseText(_e805),this._text!==_e805&&(this._text=_e805,this.dirty=!0);}},{key:"resolution",get:function get(){return this._resolution;},set:function set(_e806){this._autoResolution=!1,this._resolution!==_e806&&(this._resolution=_e806,this.dirty=!0);}},{key:"sanitiseText",value:function sanitiseText(_e807){return _e807.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;");}}]);return e;}(yo);Cl.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Cl.defaultMaxWidth=2024,Cl.defaultMaxHeight=2024,Cl.defaultAutoResolution=!0;var El=Cl;var Ol=__webpack_require__(3444);var kl=function(e,t){var r=null;return function(){if(null!==r)return r;var n=new Blob([t],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return r=e(i),setTimeout(function(){return URL.revokeObjectURL(i);}),r;};}(function(e){var t=new Map([[0,function(){}]]),r=new Map([[0,function(){}]]),n=new Map(),i=new Worker(e);i.addEventListener("message",function(_ref68){var e=_ref68.data;if(void 0!==(i=e).method&&"call"===i.method){var _e$params=e.params,_i110=_e$params.timerId,_o74=_e$params.timerType;if("interval"===_o74){var _e808=t.get(_i110);if("number"==typeof _e808){var _t318=n.get(_e808);if(void 0===_t318||_t318.timerId!==_i110||_t318.timerType!==_o74)throw new Error("The timer is in an undefined state.");}else{if(void 0===_e808)throw new Error("The timer is in an undefined state.");_e808();}}else if("timeout"===_o74){var _e809=r.get(_i110);if("number"==typeof _e809){var _t319=n.get(_e809);if(void 0===_t319||_t319.timerId!==_i110||_t319.timerType!==_o74)throw new Error("The timer is in an undefined state.");}else{if(void 0===_e809)throw new Error("The timer is in an undefined state.");_e809(),r["delete"](_i110);}}}else{if(!function(e){return null===e.error&&"number"==typeof e.id;}(e)){var _t320=e.error.message;throw new Error(_t320);}{var _i111=e.id,_o75=n.get(_i111);if(void 0===_o75)throw new Error("The timer is in an undefined state.");var _a79=_o75.timerId,_s47=_o75.timerType;n["delete"](_i111),"interval"===_s47?t["delete"](_a79):r["delete"](_a79);}}var i;});return{clearInterval:function clearInterval(e){var r=(0,Ol.generateUniqueNumber)(n);n.set(r,{timerId:e,timerType:"interval"}),t.set(e,r),i.postMessage({id:r,method:"clear",params:{timerId:e,timerType:"interval"}});},clearTimeout:function clearTimeout(e){var t=(0,Ol.generateUniqueNumber)(n);n.set(t,{timerId:e,timerType:"timeout"}),r.set(e,t),i.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}});},setInterval:function setInterval(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=(0,Ol.generateUniqueNumber)(t);return t.set(n,function(){e(),"function"==typeof t.get(n)&&i.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n,timerType:"interval"}});}),i.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n,timerType:"interval"}}),n;},setTimeout:function setTimeout(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=(0,Ol.generateUniqueNumber)(r);return r.set(n,e),i.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:n,timerType:"timeout"}}),n;}};},'(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();'),Pl=function Pl(e){return kl().clearTimeout(e);},$l=function $l(){var _kl;return(_kl=kl()).setTimeout.apply(_kl,arguments);};function Rl(e){return Rl="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Rl(e);}function Bl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dl(n.key),n);}}function Dl(e){var t=function(e,t){if("object"!=Rl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Rl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Rl(t)?t:String(t);}function Ml(e,t,r){return t=Nl(t),Ll(e,Fl()?Reflect.construct(t,r||[],Nl(e).constructor):t.apply(e,r));}function Ll(e,t){if(t&&("object"===Rl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}function Fl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(Fl=function Fl(){return!!e;})();}function Nl(e){return Nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},Nl(e);}function Ul(e,t){return Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},Ul(e,t);}var jl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=Ml(this,t)).shouldBeDestroed=!0,e?(r.texture=e instanceof Sn?e:Sn.from(e),r):(r.texture=new Sn(new ar()),Ll(r));}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ul(e,t);}(t,e),r=t,n=[{key:"get",value:function value(){return this.texture;}},{key:"update",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return this.texture.update(),void this.emit("update",this);this.texture&&this.shouldBeDestroed&&this.texture.destroy(!0),this.texture=e instanceof Sn?e:Sn.from(e),this.shouldBeDestroed=t,this.emit("replace",this);}},{key:"destroy",value:function value(){this.texture&&this.texture.destroy(!0),this.removeAllListeners();}}],n&&Bl(r.prototype,n),i&&Bl(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(n);function Gl(e){return Gl="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Gl(e);}function zl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vl(n.key),n);}}function Vl(e){var t=function(e,t){if("object"!=Gl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Gl(t)?t:String(t);}function Hl(e,t,r){return t=Yl(t),function(e,t){if(t&&("object"===Gl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kl(e);}(e,Wl()?Reflect.construct(t,r||[],Yl(e).constructor):t.apply(e,r));}function Wl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(Wl=function Wl(){return!!e;})();}function Yl(e){return Yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},Yl(e);}function Kl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function Xl(e,t){return Xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},Xl(e,t);}var Zl=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=Hl(this,t)).active="origin",n.textures=new Map(),n.buffers=new Map(),e instanceof jl?(n.frame=new yo(e.get()),n.textures.set("origin",e.get()),e.on("replace",n.onReplace,Kl(n))):(n.frame=new yo(e),n.textures.set("origin",e)),n.frame.width=r.width,n.frame.height=r.height,n;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xl(e,t);}(t,e),r=t,n=[{key:"onReplace",value:function value(e){this.textures.set("origin",e.get()),"origin"==this.active&&(this.frame.texture=e.get());}},{key:"addTexture",value:function value(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.textures.has(e)&&(n&&(null===(r=this.textures.get(e))||void 0===r||r.destroy(!0)),this.textures["delete"](e)),this.textures.set(e,t),!0;}},{key:"getTexture",value:function value(e){if(this.textures.has(e))return this.textures.get(e);throw new Error("There is no such texture");}},{key:"addBuffer",value:function value(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.buffers.has(e)&&(r&&(null===(t=this.buffers.get(e))||void 0===t||t.destroy(!0)),this.buffers["delete"](e)),this.buffers.set(e,Tn.create({width:this.frame.width,height:this.frame.height})),!0;}},{key:"getBuffer",value:function value(e){if(this.buffers.has(e))return this.buffers.get(e);throw new Error("There is no such buffer");}},{key:"resize",value:function value(e,t){this.frame.width=e,this.frame.height=t,this.buffers.forEach(function(r,n){r.resize(e,t);});}},{key:"activateBuffer",value:function value(e){this.buffers.has(e)&&(this.frame.texture=this.buffers.get(e),this.active=e);}},{key:"activateTexture",value:function value(e){this.textures.has(e)&&(this.frame.texture=this.textures.get(e),this.active=e);}}],n&&zl(r.prototype,n),i&&zl(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(n);function ql(e){return ql="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},ql(e);}function Jl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ql(n.key),n);}}function Ql(e){var t=function(e,t){if("object"!=ql(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ql(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==ql(t)?t:String(t);}Zl.defaultOptions={width:100,height:100};var eh=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.state="pending",this.fate="unresolved",this.promise=new Promise(function(e,r){t._resolve=e,t._reject=r;}),this.promise.then(function(){return t.state="fulfilled";},function(){return t.state="rejected";});}var t,r,n;return t=e,(r=[{key:"resolve",value:function value(e){if("resolved"===this.fate)throw"Deferred cannot be resolved twice";this.fate="resolved",this._resolve(e);}},{key:"reject",value:function value(e){if("resolved"===this.fate)throw"Deferred cannot be resolved twice";this.fate="resolved",this._reject(e);}},{key:"isResolved",value:function value(){return"resolved"===this.fate;}},{key:"isPending",value:function value(){return"pending"===this.state;}},{key:"isFulfilled",value:function value(){return"fulfilled"===this.state;}},{key:"isRejected",value:function value(){return"rejected"===this.state;}}])&&Jl(t.prototype,r),n&&Jl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function th(e){return th="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},th(e);}function rh(){rh=function rh(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==th(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(th(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function nh(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function ih(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nh(o,n,i,a,s,"next",e);}function s(e){nh(o,n,i,a,s,"throw",e);}a(void 0);});};}function oh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ah(n.key),n);}}function ah(e){var t=function(e,t){if("object"!=th(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=th(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==th(t)?t:String(t);}function sh(e,t,r){return t=hh(t),function(e,t){if(t&&("object"===th(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,uh()?Reflect.construct(t,r||[],hh(e).constructor):t.apply(e,r));}function uh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(uh=function uh(){return!!e;})();}function lh(){return lh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hh(e)););return e;}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value;}},lh.apply(this,arguments);}function hh(e){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},hh(e);}function ch(e,t){return ch=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},ch(e,t);}var dh=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=sh(this,t,[e])).inprocess=!1,r.duration=30,r.textures=[],r.inputVideo=document.createElement("video"),r.duration=1e3/r.fpsLimit,r;}var n,i,o,a,s,u,l,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ch(e,t);}(t,e),n=t,i=[{key:"onTrackUpdate",value:function value(){lh(hh(t.prototype),"onTrackUpdate",this).call(this),this.videoFrame&&this.videoFrame.resize(this.sdkOptions.width,this.sdkOptions.height);}},{key:"setFpsLimit",value:function value(e){this.fpsLimit=e,this.duration=1e3/this.fpsLimit;}},{key:"setRenderer",value:function value(e){this.renderer=e;}},{key:"destroy",value:function value(){this.stopTimers();}},{key:"clearBuffers",value:function value(){this.effectProcessor.clearBuffers();}},{key:"stopTimers",value:function value(){try{this.gatherFramesTimeout&&(Pl(this.gatherFramesTimeout),this.gatherFramesTimeout=0),this.handleFramesTimeout&&(Pl(this.handleFramesTimeout),this.handleFramesTimeout=0),this.gatherFramesInterval&&(e=this.gatherFramesInterval,kl().clearInterval(e),this.gatherFramesInterval=0);}catch(e){}var e;}},{key:"startTimers",value:function value(){var e=this;this.gatherFramesInterval=function(){var _kl2;return(_kl2=kl()).setInterval.apply(_kl2,arguments);}(function(){e.gatherByTimers();},this.duration),this.gatherByCallback(),this.handleFrames();}},{key:"gatherByCallback",value:(h=ih(rh().mark(function e(){return rh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop();}},e);})),function(){return h.apply(this,arguments);})},{key:"gatherByTimers",value:(l=ih(rh().mark(function e(){return rh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:document.hidden&&this.gatherFrames();case 1:case"end":return e.stop();}},e,this);})),function(){return l.apply(this,arguments);})},{key:"gatherFrames",value:(u=ih(rh().mark(function e(){var t,r;return rh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.textures.length>3&&(null==(t=this.textures.shift())||t.destroy(!0)),this.videoTexture&&(this.videoTexture.update(),r=Tn.create({width:this.sdkOptions.width,height:this.sdkOptions.height}),this.renderer.renderTo(this.videoFrame.frame,r),this.textures.push(r));case 2:case"end":return e.stop();}},e,this);})),function(){return u.apply(this,arguments);})},{key:"nextTick",value:(s=ih(rh().mark(function e(){var t,r;return rh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.frameDrawFunction)||void 0===t||t.call(this),this.frame_count++,this.videoTrackWrapper.update(this.inputVideo.videoWidth,this.inputVideo.videoHeight),this.lastFrameTime=performance.now(),this.frameTimer.finish(),this.frameTimer.start(),e.next=8,this.effectProcessor.process();case 8:this.drawFps(),this.toCanvas&&(null===(r=this.toCanvas.getContext("2d"))||void 0===r||r.drawImage(this.renderer.renderer.view,0,0,this.toCanvas.width,this.toCanvas.height));case 10:case"end":return e.stop();}},e,this);})),function(){return s.apply(this,arguments);})},{key:"handleFrames",value:(a=ih(rh().mark(function e(){var t,r,n,i=this;return rh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.textures.length){e.next=2;break;}return e.abrupt("return",this.handleFramesTimeout=$l(function(){i.handleFrames();},10));case 2:if(r=performance.now(),this.isRunning&&!this.isPaused&&this.effectProcessor){e.next=10;break;}return this.textures=[],this.renderer.addToEffects(this.videoFrame.frame),this.renderer.render(),this.renderer.removeFromEffects(this.videoFrame.frame),this.toCanvas&&(null===(t=this.toCanvas.getContext("2d"))||void 0===t||t.drawImage(this.renderer.renderer.view,0,0,this.toCanvas.width,this.toCanvas.height)),e.abrupt("return",this.handleFramesTimeout=$l(function(){i.handleFrames();},Math.max(0,this.duration-(performance.now()-r))));case 10:if(n=this.textures.shift(),this.effectProcessor.nextFrame(new jl(n)),!this.onProcessPromise||!this.onProcessPromise.isPending()){e.next=15;break;}return e.next=15,this.onProcessPromise.promise;case 15:return this.onProcessPromise=new eh(),this.nextTick().then(function(){i.onProcessPromise.resolve();}),e.abrupt("return",this.handleFramesTimeout=$l(function(){i.handleFrames();},0));case 18:case"end":return e.stop();}},e,this);})),function(){return a.apply(this,arguments);})},{key:"process",value:function value(){var e=this;if(this.stopTimers(),this.getInputVideoTrack()){var t=this.getInputVideoStream();t&&(this.inputVideo.srcObject=t,this.inputVideo.muted=!0,this.inputVideo.setAttribute("playsinline",!0),this.inputVideo.playsInline=!0,this.inputVideo.play().then(function(){e.videoTexture=new jl(e.inputVideo),e.videoFrame=new Zl(e.videoTexture,{width:e.sdkOptions.width,height:e.sdkOptions.height});})),this.startTimers();}else r.ie.notify({message:"there is no videoTrack to process",emitter:r.E7.SRTEAM_PROCESSOR});}},{key:"getInputVideoStream",value:function value(){return this.stream?this.stream:null;}},{key:"getStream",value:function value(){var e=this;return this.outputStream||(this.outputStream=this.renderer.renderer.view.captureStream(30),this.outputStream.getVideoTracks()[0].getSettings=function(){return e.videoTrackWrapper.getSettings();},this.outputStream.getVideoTracks()[0].getConstraints=function(){return e.videoTrackWrapper.getConstraints();},this.outputStream.getVideoTracks()[0].getCapabilities=function(){return e.videoTrackWrapper.getCapabilities();},this.outputStream.getVideoTracks()[0].applyConstraints=function(t){return e.videoTrackWrapper.applyConstraints(t);},this.stream&&this.stream.getAudioTracks().forEach(function(t,r){e.outputStream.addTrack(t);})),this.outputStream;}}],i&&oh(n.prototype,i),o&&oh(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(k);function fh(e){return fh="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},fh(e);}function ph(){ph=function ph(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==fh(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(fh(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function yh(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function gh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mh(n.key),n);}}function mh(e){var t=function(e,t){if("object"!=fh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==fh(t)?t:String(t);}function wh(e,t,r){return t=xh(t),function(e,t){if(t&&("object"===fh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,bh()?Reflect.construct(t,r||[],xh(e).constructor):t.apply(e,r));}function bh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(bh=function bh(){return!!e;})();}function vh(){return vh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xh(e)););return e;}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value;}},vh.apply(this,arguments);}function xh(e){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},xh(e);}function _h(e,t){return _h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},_h(e,t);}var Ih=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=wh(this,t,[e])).timing=performance.now(),r;}var r,n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_h(e,t);}(t,e),r=t,n=[{key:"gatherByCallback",value:(o=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){yh(o,n,i,a,s,"next",e);}function s(e){yh(o,n,i,a,s,"throw",e);}a(void 0);});};}(ph().mark(function e(){var t=this;return ph().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:performance.now()-this.timing>.85*this.duration&&(this.gatherFrames(),this.timing=performance.now()),this.requestAnimationFrameID=window.requestAnimationFrame(function(){return t.gatherByCallback();});case 3:case"end":return e.stop();}},e,this);})),function(){return o.apply(this,arguments);})},{key:"stopTimers",value:function value(){if(vh(xh(t.prototype),"stopTimers",this).call(this),this.requestAnimationFrameID)try{cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=0;}catch(e){}}}],n&&gh(r.prototype,n),i&&gh(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(dh);function Ah(e){return Ah="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Ah(e);}function Sh(){Sh=function Sh(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==Ah(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(Ah(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function Th(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function Ch(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Th(o,n,i,a,s,"next",e);}function s(e){Th(o,n,i,a,s,"throw",e);}a(void 0);});};}function Eh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Oh(n.key),n);}}function Oh(e){var t=function(e,t){if("object"!=Ah(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ah(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Ah(t)?t:String(t);}function kh(e,t,r){return t=$h(t),function(e,t){if(t&&("object"===Ah(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,Ph()?Reflect.construct(t,r||[],$h(e).constructor):t.apply(e,r));}function Ph(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(Ph=function Ph(){return!!e;})();}function $h(e){return $h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},$h(e);}function Rh(e,t){return Rh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},Rh(e,t);}var Bh=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=kh(this,t,[e])).frameTimes=[],r.aborter=new AbortController(),r;}var n,i,o,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rh(e,t);}(t,e),n=t,i=[{key:"clearBuffers",value:function value(){this.effectProcessor.clearBuffers();}},{key:"destroy",value:function value(){this.outputStream&&this.outputStream.getTracks().forEach(function(e){e.stop();}),this.aborter.abort("stream_processor is destroyed");}},{key:"nextTick",value:(s=Ch(Sh().mark(function e(t,n){var i,o,a,s,u,l,h;return Sh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===(i=this.frameDrawFunction)||void 0===i||i.call(this),this.videoTrackWrapper.update(t.displayWidth,t.displayHeight),this.frame_count++,this.lastFrameTime=performance.now(),this.frameTimer.finish(),this.frameTimer.start(),e.next=8,this.effectProcessor.process();case 8:this.drawFps();try{l=this.renderer.getVideoFrameSettings(this.frameTimer.getFrameDuration()),h=this.renderer.getVideoFrameData(),u=new VideoFrame(h,l),t.close();try{n.enqueue(u);}catch(e){r.ie.notify({message:null!==(o=e.message)&&void 0!==o?o:e,emitter:r.E7.SRTEAM_PROCESSOR,cause:e}),u.close();}this.toCanvas&&(null===(a=this.toCanvas.getContext("2d"))||void 0===a||a.drawImage(this.renderer.renderer.view,0,0,this.toCanvas.width,this.toCanvas.height));}catch(e){r.ie.notify({message:null!==(s=e.message)&&void 0!==s?s:e,emitter:r.E7.SRTEAM_PROCESSOR,cause:e}),t.close();}case 10:case"end":return e.stop();}},e,this);})),function(e,t){return s.apply(this,arguments);})},{key:"handleFrames",value:(a=Ch(Sh().mark(function e(t,r){var n,i=this;return Sh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRunning&&!this.isPaused&&this.effectProcessor){e.next=3;break;}try{r.enqueue(t),this.toCanvas&&(null===(n=this.toCanvas.getContext("2d"))||void 0===n||n.drawImage(t,0,0,this.toCanvas.width,this.toCanvas.height));}catch(e){t.close();}return e.abrupt("return");case 3:if(this.effectProcessor.nextFrame(new jl(t)),!this.onProcessPromise||!this.onProcessPromise.isPending()){e.next=7;break;}return e.next=7,this.onProcessPromise.promise;case 7:this.onProcessPromise=new eh(),this.nextTick(t,r).then(function(){i.onProcessPromise.resolve();});case 9:case"end":return e.stop();}},e,this);})),function(e,t){return a.apply(this,arguments);})},{key:"process",value:function value(){var e=this,t=this.getInputVideoTrack();if(t){this.outputVideoTrack=new MediaStreamTrackGenerator({kind:"video"}),this.outputVideoTrack.getSettings=function(){return e.videoTrackWrapper.getSettings();},this.outputVideoTrack.getConstraints=function(){return e.videoTrackWrapper.getConstraints();},this.outputVideoTrack.getCapabilities=function(){return e.videoTrackWrapper.getCapabilities();},this.outputVideoTrack.applyConstraints=function(t){return e.videoTrackWrapper.applyConstraints(t);},this.outputStream&&this.outputStream.getTracks().forEach(function(e){e.stop();}),this.outputStream=new MediaStream([this.outputVideoTrack]),this.stream&&this.stream.getAudioTracks().forEach(function(t,r){e.outputStream.addTrack(t);}),this.trackProcessor=new MediaStreamTrackProcessor({track:t,maxBufferSize:4}),this.timestamp=performance.now();var n=this,i=new TransformStream({transform:function transform(e,t){return Ch(Sh().mark(function r(){return Sh().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.handleFrames(e,t);case 2:case"end":return r.stop();}},r);}))();}});this.trackProcessor.readable.pipeThrough(i,{signal:this.aborter.signal}).pipeTo(this.outputVideoTrack.writable)["catch"](function(e){var t;r.ie.notify({message:null!==(t=e.message)&&void 0!==t?t:e,emitter:r.E7.SRTEAM_PROCESSOR,cause:e});});}else r.ie.notify({message:"there is no videoTrack to process",emitter:r.E7.SRTEAM_PROCESSOR});}},{key:"getStream",value:function value(){return this.outputStream;}}],i&&Eh(n.prototype,i),o&&Eh(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(k);function Dh(e){return Dh="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Dh(e);}function Mh(){Mh=function Mh(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==Dh(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(Dh(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function Lh(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function Fh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nh(n.key),n);}}function Nh(e){var t=function(e,t){if("object"!=Dh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Dh(t)?t:String(t);}function Uh(e,t,r){return t=zh(t),function(e,t){if(t&&("object"===Dh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,jh()?Reflect.construct(t,r||[],zh(e).constructor):t.apply(e,r));}function jh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(jh=function jh(){return!!e;})();}function Gh(){return Gh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zh(e)););return e;}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value;}},Gh.apply(this,arguments);}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},zh(e);}function Vh(e,t){return Vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},Vh(e,t);}var Hh=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=Uh(this,t,[e])).timing=performance.now(),r;}var r,n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vh(e,t);}(t,e),r=t,n=[{key:"gatherByCallback",value:(o=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Lh(o,n,i,a,s,"next",e);}function s(e){Lh(o,n,i,a,s,"throw",e);}a(void 0);});};}(Mh().mark(function e(){var t=this;return Mh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:performance.now()-this.timing>.85*this.duration&&(this.gatherFrames(),this.timing=performance.now()),this.gatherFramesTimeout=setTimeout(function(){t.inputVideo.requestVideoFrameCallback(function(){return t.gatherByCallback();});},0);case 3:case"end":return e.stop();}},e,this);})),function(){return o.apply(this,arguments);})},{key:"stopTimers",value:function value(){if(Gh(zh(t.prototype),"stopTimers",this).call(this),this.requestVideoFrameID)try{this.inputVideo.cancelVideoFrameCallback(this.requestVideoFrameID),this.requestVideoFrameID=0;}catch(e){}}}],n&&Fh(r.prototype,n),i&&Fh(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(dh);function Wh(e){return Wh="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Wh(e);}function Yh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kh(n.key),n);}}function Kh(e){var t=function(e,t){if("object"!=Wh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Wh(t)?t:String(t);}var Xh,Zh,qh,Jh,Qh,ec,tc,rc,nc,ic,oc,ac,sc,uc,lc,hc,cc,dc,fc,pc,yc,gc,mc,wc,bc,vc,xc,_c,Ic,Ac,Sc,Tc={transform:Bh,videocallback:Hh,animationcallback:Ih},Cc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e);}var t,r,n;return t=e,n=[{key:"getStreamProcessor",value:function value(e,t){return new Tc[e](t);}}],(r=null)&&Yh(t.prototype,r),n&&Yh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}(),Ec=__webpack_require__(1472),Oc=__webpack_require__(6512),kc=__webpack_require__(3296).Sn,Pc=Object.defineProperty,$c=Object.getOwnPropertyDescriptor,Rc=Object.getOwnPropertyNames,Bc=Object.prototype.hasOwnProperty,Dc=function(e){return(typeof require==="undefined"?"undefined":_typeof(require))<"u"?require:(typeof Proxy==="undefined"?"undefined":_typeof(Proxy))<"u"?new Proxy(e,{get:function get(e,t){return((typeof require==="undefined"?"undefined":_typeof(require))<"u"?require:e)[t];}}):e;}(function(e){if((typeof require==="undefined"?"undefined":_typeof(require))<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported');}),Mc=function Mc(e,t){return function(){return e&&(t=e(e=0)),t;};},Lc=function Lc(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports;};},Fc=function Fc(e,t){for(var r in t)Pc(e,r,{get:t[r],enumerable:!0});},Nc=function Nc(e){return function(e,t,r,n){if(t&&"object"==_typeof(t)||"function"==typeof t){var _iterator52=_createForOfIteratorHelper(Rc(t)),_step52;try{var _loop12=function _loop12(){var i=_step52.value;!Bc.call(e,i)&&i!==r&&Pc(e,i,{get:function get(){return t[i];},enumerable:!(n=$c(t,i))||n.enumerable});};for(_iterator52.s();!(_step52=_iterator52.n()).done;){_loop12();}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}}return e;}(Pc({},"__esModule",{value:!0}),e);},Uc=Mc(function(){Xh=new Map(),Zh=[],qh=function qh(e,t,r){if(!t||"function"!=typeof t.init||"function"!=typeof t.createInferenceSessionHandler)throw new TypeError("not a valid backend");{var n=Xh.get(e);if(void 0===n)Xh.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error("cannot register backend \"".concat(e,"\" using priority ").concat(r));}if(r>=0){var _t321=Zh.indexOf(e);-1!==_t321&&Zh.splice(_t321,1);for(var _t322=0;_t322<Zh.length;_t322++)if(Xh.get(Zh[_t322]).priority<=r)return void Zh.splice(_t322,0,e);Zh.push(e);}}},Jh=/*#__PURE__*/function(){var _ref69=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee133(e){var t,r,_iterator53,_step53,_e810,_t323,n;return _regeneratorRuntime().wrap(function _callee133$(_context136){while(1)switch(_context136.prev=_context136.next){case 0:t=0===e.length?Zh:e,r=[];_iterator53=_createForOfIteratorHelper(t);_context136.prev=2;_iterator53.s();case 4:if((_step53=_iterator53.n()).done){_context136.next=29;break;}_e810=_step53.value;_t323=Xh.get(_e810);if(!_t323){_context136.next=27;break;}if(!_t323.initialized){_context136.next=10;break;}return _context136.abrupt("return",_t323.backend);case 10:if(!_t323.aborted){_context136.next=12;break;}return _context136.abrupt("continue",27);case 12:n=!!_t323.initPromise;_context136.prev=13;n||(_t323.initPromise=_t323.backend.init(_e810));_context136.next=17;return _t323.initPromise;case 17:_t323.initialized=!0;return _context136.abrupt("return",_t323.backend);case 21:_context136.prev=21;_context136.t0=_context136["catch"](13);n||r.push({name:_e810,err:_context136.t0}),_t323.aborted=!0;case 24:_context136.prev=24;delete _t323.initPromise;return _context136.finish(24);case 27:_context136.next=4;break;case 29:_context136.next=34;break;case 31:_context136.prev=31;_context136.t1=_context136["catch"](2);_iterator53.e(_context136.t1);case 34:_context136.prev=34;_iterator53.f();return _context136.finish(34);case 37:throw new Error("no available backend found. ERR: ".concat(r.map(function(e){return"[".concat(e.name,"] ").concat(e.err);}).join(", ")));case 38:case"end":return _context136.stop();}},_callee133,null,[[2,31,34,37],[13,21,24,27]]);}));return function Jh(_x154){return _ref69.apply(this,arguments);};}();}),jc=Mc(function(){Uc();}),Gc=Mc(function(){Qh="1.17.0";}),zc=Mc(function(){Gc(),ec="warning",tc={wasm:{},webgl:{},webgpu:{},versions:{common:Qh},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error("Unsupported logging level: ".concat(e));ec=e;}},get logLevel(){return ec;}},Object.defineProperty(tc,"logLevel",{enumerable:!0});}),Vc=Mc(function(){zc(),rc=tc;}),Hc=Mc(function(){nc=function nc(e,t){var r=(typeof document==="undefined"?"undefined":_typeof(document))<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];var n=r.getContext("2d");if(null!=n){var i,_o76;void 0!==(t===null||t===void 0?void 0:t.tensorLayout)&&"NHWC"===t.tensorLayout?(i=e.dims[2],_o76=e.dims[3]):(i=e.dims[3],_o76=e.dims[2]);var _a80,_s48,_u35=void 0!==(t===null||t===void 0?void 0:t.format)?t.format:"RGB",_l27=t===null||t===void 0?void 0:t.norm;void 0===_l27||void 0===_l27.mean?_a80=[255,255,255,255]:"number"==typeof _l27.mean?_a80=[_l27.mean,_l27.mean,_l27.mean,_l27.mean]:(_a80=[_l27.mean[0],_l27.mean[1],_l27.mean[2],0],void 0!==_l27.mean[3]&&(_a80[3]=_l27.mean[3])),void 0===_l27||void 0===_l27.bias?_s48=[0,0,0,0]:"number"==typeof _l27.bias?_s48=[_l27.bias,_l27.bias,_l27.bias,_l27.bias]:(_s48=[_l27.bias[0],_l27.bias[1],_l27.bias[2],0],void 0!==_l27.bias[3]&&(_s48[3]=_l27.bias[3]));var _h24=_o76*i,_c19=0,_d12=_h24,_f12=2*_h24,_p11=-1;"RGBA"===_u35?(_c19=0,_d12=_h24,_f12=2*_h24,_p11=3*_h24):"RGB"===_u35?(_c19=0,_d12=_h24,_f12=2*_h24):"RBG"===_u35&&(_c19=0,_f12=_h24,_d12=2*_h24);for(var _t324=0;_t324<_o76;_t324++)for(var _r317=0;_r317<i;_r317++){var _i112=(e.data[_c19++]-_s48[0])*_a80[0],_o77=(e.data[_d12++]-_s48[1])*_a80[1],_u36=(e.data[_f12++]-_s48[2])*_a80[2],_l28=-1===_p11?255:(e.data[_p11++]-_s48[3])*_a80[3];n.fillStyle="rgba("+_i112+","+_o77+","+_u36+","+_l28+")",n.fillRect(_r317,_t324,1,1);}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported");}throw new Error("Can not access image data");},ic=function ic(e,t){var r,n=(typeof document==="undefined"?"undefined":_typeof(document))<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");if(null==n)throw new Error("Can not access image data");{var i,_o78,_a81;void 0!==(t===null||t===void 0?void 0:t.tensorLayout)&&"NHWC"===t.tensorLayout?(i=e.dims[2],_o78=e.dims[1],_a81=e.dims[3]):(i=e.dims[3],_o78=e.dims[2],_a81=e.dims[1]);var _s49,_u37,_l29=void 0!==t&&void 0!==t.format?t.format:"RGB",_h25=t===null||t===void 0?void 0:t.norm;void 0===_h25||void 0===_h25.mean?_s49=[255,255,255,255]:"number"==typeof _h25.mean?_s49=[_h25.mean,_h25.mean,_h25.mean,_h25.mean]:(_s49=[_h25.mean[0],_h25.mean[1],_h25.mean[2],255],void 0!==_h25.mean[3]&&(_s49[3]=_h25.mean[3])),void 0===_h25||void 0===_h25.bias?_u37=[0,0,0,0]:"number"==typeof _h25.bias?_u37=[_h25.bias,_h25.bias,_h25.bias,_h25.bias]:(_u37=[_h25.bias[0],_h25.bias[1],_h25.bias[2],0],void 0!==_h25.bias[3]&&(_u37[3]=_h25.bias[3]));var _c20=_o78*i;if(void 0!==t&&(void 0!==t.format&&4===_a81&&"RGBA"!==t.format||3===_a81&&"RGB"!==t.format&&"BGR"!==t.format))throw new Error("Tensor format doesn't match input tensor dims");var _d13=4,_f13=0,_p12=1,_y9=2,_g6=3,_m4=0,_w3=_c20,_b5=2*_c20,_v4=-1;"RGBA"===_l29?(_m4=0,_w3=_c20,_b5=2*_c20,_v4=3*_c20):"RGB"===_l29?(_m4=0,_w3=_c20,_b5=2*_c20):"RBG"===_l29&&(_m4=0,_b5=_c20,_w3=2*_c20),r=n.createImageData(i,_o78);for(var _t325=0;_t325<_o78*i;_f13+=_d13,_p12+=_d13,_y9+=_d13,_g6+=_d13,_t325++)r.data[_f13]=(e.data[_m4++]-_u37[0])*_s49[0],r.data[_p12]=(e.data[_w3++]-_u37[1])*_s49[1],r.data[_y9]=(e.data[_b5++]-_u37[2])*_s49[2],r.data[_g6]=-1===_v4?255:(e.data[_v4++]-_u37[3])*_s49[3];}return r;};}),Wc=Mc(function(){Xc(),oc=function oc(e,t){var _t$norm2,_a$mean$2,_a$bias$2;if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");var r,n,i=t.height,o=t.width,a=(_t$norm2=t.norm)!==null&&_t$norm2!==void 0?_t$norm2:{mean:255,bias:0};r="number"==typeof a.mean?[a.mean,a.mean,a.mean,a.mean]:[a.mean[0],a.mean[1],a.mean[2],(_a$mean$2=a.mean[3])!==null&&_a$mean$2!==void 0?_a$mean$2:255],n="number"==typeof a.bias?[a.bias,a.bias,a.bias,a.bias]:[a.bias[0],a.bias[1],a.bias[2],(_a$bias$2=a.bias[3])!==null&&_a$bias$2!==void 0?_a$bias$2:0];var s=void 0!==t.format?t.format:"RGBA",u=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",l=i*o,h="RGBA"===u?new Float32Array(4*l):new Float32Array(3*l),c=4,d=0,f=1,p=2,y=3,g=0,m=l,w=2*l,b=-1;"RGB"===s&&(c=3,d=0,f=1,p=2,y=-1),"RGBA"===u?b=3*l:"RBG"===u?(g=0,w=l,m=2*l):"BGR"===u&&(w=0,m=l,g=2*l);for(var _t326=0;_t326<l;_t326++,d+=c,p+=c,f+=c,y+=c)h[g++]=(e[d]+n[0])/r[0],h[m++]=(e[f]+n[1])/r[1],h[w++]=(e[p]+n[2])/r[2],-1!==b&&-1!==y&&(h[b++]=(e[y]+n[3])/r[3]);return new gc("float32",h,"RGBA"===u?[1,4,i,o]:[1,3,i,o]);},ac=/*#__PURE__*/function(){var _ref70=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee134(e,t){var r,n,i,o,a,s,u,l,_n149,_i113,_n150,_o79,_n151,_i114,_t327,_n152,_n153,_i115,_t328,_o80;return _regeneratorRuntime().wrap(function _callee134$(_context137){while(1)switch(_context137.prev=_context137.next){case 0:n=(typeof HTMLImageElement==="undefined"?"undefined":_typeof(HTMLImageElement))<"u"&&e instanceof HTMLImageElement,i=(typeof ImageData==="undefined"?"undefined":_typeof(ImageData))<"u"&&e instanceof ImageData,o=(typeof ImageBitmap==="undefined"?"undefined":_typeof(ImageBitmap))<"u"&&e instanceof ImageBitmap,a="string"==typeof e,s=t!==null&&t!==void 0?t:{},u=function u(){if((typeof document==="undefined"?"undefined":_typeof(document))<"u")return document.createElement("canvas");if((typeof OffscreenCanvas==="undefined"?"undefined":_typeof(OffscreenCanvas))<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported");},l=function l(e){return e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas?e.getContext("2d"):null;};if(!n){_context137.next=18;break;}_n149=u();_n149.width=e.width,_n149.height=e.height;_i113=l(_n149);if(!(null==_i113)){_context137.next=7;break;}throw new Error("Can not access image data");case 7:_n150=e.height,_o79=e.width;if(!(void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(_n150=t.resizedHeight,_o79=t.resizedWidth),void 0!==t)){_context137.next=14;break;}if(!(s=t,void 0!==t.tensorFormat)){_context137.next=11;break;}throw new Error("Image input config format must be RGBA for HTMLImageElement");case 11:s.tensorFormat="RGBA",s.height=_n150,s.width=_o79;_context137.next=15;break;case 14:s.tensorFormat="RGBA",s.height=_n150,s.width=_o79;case 15:_i113.drawImage(e,0,0),r=_i113.getImageData(0,0,_o79,_n150).data;_context137.next=42;break;case 18:if(i){_context137.next=32;break;}if(!o){_context137.next=29;break;}if(!(void 0===t)){_context137.next=22;break;}throw new Error("Please provide image config with format for Imagebitmap");case 22:_n151=u();_n151.width=e.width,_n151.height=e.height;_i114=l(_n151);if(!(null!=_i114)){_context137.next=28;break;}_t327=e.height,_n152=e.width;return _context137.abrupt("return",(_i114.drawImage(e,0,0,_n152,_t327),r=_i114.getImageData(0,0,_n152,_t327).data,s.height=_t327,s.width=_n152,oc(r,s)));case 28:throw new Error("Can not access image data");case 29:if(!a){_context137.next=31;break;}return _context137.abrupt("return",new Promise(function(t,r){var n=u(),i=l(n);if(!e||!i)return r();var o=new Image();o.crossOrigin="Anonymous",o.src=e,o.onload=function(){n.width=o.width,n.height=o.height,i.drawImage(o,0,0,n.width,n.height);var e=i.getImageData(0,0,n.width,n.height);s.height=n.height,s.width=n.width,t(oc(e.data,s));};}));case 31:throw new Error("Input data provided is not supported - aborted tensor creation");case 32:if(!(void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(_n153=t.resizedHeight,_i115=t.resizedWidth):(_n153=e.height,_i115=e.width),void 0!==t&&(s=t),s.format="RGBA",s.height=_n153,s.width=_i115,void 0!==t)){_context137.next=41;break;}_t328=u();_t328.width=_i115,_t328.height=_n153;_o80=l(_t328);if(!(null==_o80)){_context137.next=38;break;}throw new Error("Can not access image data");case 38:_o80.putImageData(e,0,0),r=_o80.getImageData(0,0,_i115,_n153).data;_context137.next=42;break;case 41:r=e.data;case 42:if(!(void 0!==r)){_context137.next=44;break;}return _context137.abrupt("return",oc(r,s));case 44:throw new Error("Input data provided is not supported - aborted tensor creation");case 45:case"end":return _context137.stop();}},_callee134);}));return function ac(_x155,_x156){return _ref70.apply(this,arguments);};}(),sc=function sc(e,t){var r=t.width,n=t.height,i=t.download,o=t.dispose;return new gc({location:"texture",type:"float32",texture:e,dims:[1,n,r,4],download:i,dispose:o});},uc=function uc(e,t){var r=t.dataType,n=t.dims,i=t.download,o=t.dispose;return new gc({location:"gpu-buffer",type:r!==null&&r!==void 0?r:"float32",gpuBuffer:e,dims:n,download:i,dispose:o});},lc=function lc(e,t,r){return new gc({location:"cpu-pinned",type:e,data:t,dims:r!==null&&r!==void 0?r:[t.length]});};}),Yc=Mc(function(){hc=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),cc=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),dc=!1,fc=function fc(){if(!dc){dc=!0;var _e811=(typeof BigInt64Array==="undefined"?"undefined":_typeof(BigInt64Array))<"u"&&"function"==typeof BigInt64Array.from,_t329=(typeof BigUint64Array==="undefined"?"undefined":_typeof(BigUint64Array))<"u"&&"function"==typeof BigUint64Array.from;_e811&&(hc.set("int64",BigInt64Array),cc.set(BigInt64Array,"int64")),_t329&&(hc.set("uint64",BigUint64Array),cc.set(BigUint64Array,"uint64"));}};}),Kc=Mc(function(){Xc(),pc=function pc(e){var t=1;for(var _r318=0;_r318<e.length;_r318++){var n=e[_r318];if("number"!=typeof n||!Number.isSafeInteger(n))throw new TypeError("dims[".concat(_r318,"] must be an integer, got: ").concat(n));if(n<0)throw new RangeError("dims[".concat(_r318,"] must be a non-negative integer, got: ").concat(n));t*=n;}return t;},yc=function yc(e,t){switch(e.location){case"cpu":return new gc(e.type,e.data,t);case"cpu-pinned":return new gc({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new gc({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new gc({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw new Error("tensorReshape: tensor location ".concat(e.location," is not supported"));}};}),Xc=Mc(function(){Hc(),Wc(),Yc(),Kc(),gc=/*#__PURE__*/function(){function gc(e,t,r){_classCallCheck(this,gc);var n,i;if(fc(),"object"==_typeof(e)&&"location"in e)switch(this.dataLocation=e.location,n=e.type,i=e.dims,e.location){case"cpu-pinned":{var _t330=hc.get(n);if(!_t330)throw new TypeError("unsupported type \"".concat(n,"\" to create tensor from pinned buffer"));if(!(e.data instanceof _t330))throw new TypeError("buffer should be of type ".concat(_t330.name));this.cpuData=e.data;break;}case"texture":if("float32"!==n)throw new TypeError("unsupported type \"".concat(n,"\" to create tensor from texture"));this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==n&&"float16"!==n&&"int32"!==n&&"int64"!==n&&"uint32"!==n&&"bool"!==n)throw new TypeError("unsupported type \"".concat(n,"\" to create tensor from gpu buffer"));this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;default:throw new Error("Tensor constructor: unsupported location '".concat(this.dataLocation,"'"));}else{var _o81,_a82;if("string"==typeof e){if(n=e,_a82=r,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");_o81=t;}else{var _r319=hc.get(e);if(void 0===_r319)throw new TypeError("Unsupported tensor type: ".concat(e,"."));if(Array.isArray(t)){if("float16"===e)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");_o81="uint64"===e||"int64"===e?_r319.from(t,BigInt):_r319.from(t);}else{if(!(t instanceof _r319))throw new TypeError("A ".concat(n," tensor's data must be type of ").concat(_r319));_o81=t;}}}else if(_a82=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");var _t331=_typeof(e[0]);if("string"===_t331)n="string",_o81=e;else{if("boolean"!==_t331)throw new TypeError("Invalid element type of data array: ".concat(_t331,"."));n="bool",_o81=Uint8Array.from(e);}}else{var _t332=cc.get(e.constructor);if(void 0===_t332)throw new TypeError("Unsupported type for tensor data: ".concat(e.constructor,"."));n=_t332,_o81=e;}if(void 0===_a82)_a82=[_o81.length];else if(!Array.isArray(_a82))throw new TypeError("A tensor's dims must be a number array");i=_a82,this.cpuData=_o81,this.dataLocation="cpu";}var o=pc(i);if(this.cpuData&&o!==this.cpuData.length)throw new Error("Tensor's size(".concat(o,") does not match data length(").concat(this.cpuData.length,")."));this.type=n,this.dims=i,this.size=o;}_createClass(gc,[{key:"toDataURL",value:function toDataURL(e){return nc(this,e);}},{key:"toImageData",value:function toImageData(e){return ic(this,e);}},{key:"data",get:function get(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData;}},{key:"location",get:function get(){return this.dataLocation;}},{key:"texture",get:function get(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData;}},{key:"gpuBuffer",get:function get(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData;}},{key:"getData",value:function(){var _getData3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee135(e){var _t333;return _regeneratorRuntime().wrap(function _callee135$(_context138){while(1)switch(_context138.prev=_context138.next){case 0:_context138.t0=(this.ensureValid(),this.dataLocation);_context138.next=_context138.t0==="cpu"?3:_context138.t0==="cpu-pinned"?3:_context138.t0==="texture"?4:_context138.t0==="gpu-buffer"?4:17;break;case 3:return _context138.abrupt("return",this.data);case 4:if(this.downloader){_context138.next=6;break;}throw new Error("The current tensor is not created with a specified data downloader.");case 6:if(!this.isDownloading){_context138.next=8;break;}throw new Error("The current tensor is being downloaded.");case 8:_context138.prev=8;this.isDownloading=!0;_context138.next=12;return this.downloader();case 12:_t333=_context138.sent;return _context138.abrupt("return",(this.downloader=void 0,this.dataLocation="cpu",this.cpuData=_t333,e&&this.disposer&&(this.disposer(),this.disposer=void 0),_t333));case 14:_context138.prev=14;this.isDownloading=!1;return _context138.finish(14);case 17:throw new Error("cannot get data from location: ".concat(this.dataLocation));case 18:case"end":return _context138.stop();}},_callee135,this,[[8,,14,17]]);}));function getData(_x157){return _getData3.apply(this,arguments);}return getData;}()},{key:"dispose",value:function dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none";}},{key:"ensureValid",value:function ensureValid(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.");}},{key:"reshape",value:function reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return yc(this,e);}}],[{key:"fromImage",value:function(){var _fromImage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee136(e,t){return _regeneratorRuntime().wrap(function _callee136$(_context139){while(1)switch(_context139.prev=_context139.next){case 0:return _context139.abrupt("return",ac(e,t));case 1:case"end":return _context139.stop();}},_callee136);}));function fromImage(_x158,_x159){return _fromImage2.apply(this,arguments);}return fromImage;}()},{key:"fromTexture",value:function fromTexture(e,t){return sc(e,t);}},{key:"fromGpuBuffer",value:function fromGpuBuffer(e,t){return uc(e,t);}},{key:"fromPinnedBuffer",value:function fromPinnedBuffer(e,t,r){return lc(e,t,r);}}]);return gc;}();}),Zc=Mc(function(){Xc(),mc=gc;}),qc=Mc(function(){zc(),wc=function wc(e,t){tc.wasm.trace&&console.timeStamp("".concat(e,"::ORT::").concat(t));},bc=function bc(e,t){var _Error$stack2;var r=((_Error$stack2=new Error().stack)===null||_Error$stack2===void 0?void 0:_Error$stack2.split(/\r\n|\r|\n/g))||[],n=!1;for(var i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){var _n154="FUNC_".concat(e,"::").concat(r[i].trim().split(" ")[1]);return t&&(_n154+="::".concat(t)),void wc("CPU",_n154);}r[i].includes("TRACE_FUNC")&&(n=!0);}},vc=function vc(e){tc.wasm.trace&&bc("BEGIN",e);},xc=function xc(e){tc.wasm.trace&&bc("END",e);};}),Jc=Mc(function(){Uc(),Zc(),qc(),_c=/*#__PURE__*/function(){function e(_e812){_classCallCheck(this,e);this.handler=_e812;}_createClass(e,[{key:"run",value:function(){var _run6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee137(_e813,t,r){var n,i,o,_iterator54,_step54,_e814,_e815,_a83,_iterator55,_step55,_r320,_i116,_iterator56,_step56,_t335,_iterator57,_step57,_e816,a,s,_e822,_t334;return _regeneratorRuntime().wrap(function _callee137$(_context140){while(1)switch(_context140.prev=_context140.next){case 0:vc();n={},i={};if(!("object"!=_typeof(_e813)||null===_e813||_e813 instanceof mc||Array.isArray(_e813))){_context140.next=4;break;}throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");case 4:o=!0;if(!("object"==_typeof(t))){_context140.next=57;break;}if(!(null===t)){_context140.next=8;break;}throw new TypeError("Unexpected argument[1]: cannot be null.");case 8:if(!(t instanceof mc)){_context140.next=10;break;}throw new TypeError("'fetches' cannot be a Tensor");case 10:if(!Array.isArray(t)){_context140.next=42;break;}if(!(0===t.length)){_context140.next=13;break;}throw new TypeError("'fetches' cannot be an empty array.");case 13:o=!1;_iterator54=_createForOfIteratorHelper(t);_context140.prev=15;_iterator54.s();case 17:if((_step54=_iterator54.n()).done){_context140.next=26;break;}_e814=_step54.value;if(!("string"!=typeof _e814)){_context140.next=21;break;}throw new TypeError("'fetches' must be a string array or an object.");case 21:if(!(-1===this.outputNames.indexOf(_e814))){_context140.next=23;break;}throw new RangeError("'fetches' contains invalid output name: ".concat(_e814,"."));case 23:n[_e814]=null;case 24:_context140.next=17;break;case 26:_context140.next=31;break;case 28:_context140.prev=28;_context140.t0=_context140["catch"](15);_iterator54.e(_context140.t0);case 31:_context140.prev=31;_iterator54.f();return _context140.finish(31);case 34:if(!("object"==_typeof(r)&&null!==r)){_context140.next=38;break;}i=r;_context140.next=40;break;case 38:if(!(_typeof(r)<"u")){_context140.next=40;break;}throw new TypeError("'options' must be an object.");case 40:_context140.next=55;break;case 42:_e815=!1,_a83=Object.getOwnPropertyNames(t);_iterator55=_createForOfIteratorHelper(this.outputNames);try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){_r320=_step55.value;if(-1!==_a83.indexOf(_r320)){_i116=t[_r320];(null===_i116||_i116 instanceof mc)&&(_e815=!0,o=!1,n[_r320]=_i116);}}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}if(!_e815){_context140.next=54;break;}if(!("object"==_typeof(r)&&null!==r)){_context140.next=50;break;}i=r;_context140.next=52;break;case 50:if(!(_typeof(r)<"u")){_context140.next=52;break;}throw new TypeError("'options' must be an object.");case 52:_context140.next=55;break;case 54:i=t;case 55:_context140.next=59;break;case 57:if(!(_typeof(t)<"u")){_context140.next=59;break;}throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");case 59:_iterator56=_createForOfIteratorHelper(this.inputNames);_context140.prev=60;_iterator56.s();case 62:if((_step56=_iterator56.n()).done){_context140.next=68;break;}_t335=_step56.value;if(!(_typeof(_e813[_t335])>"u")){_context140.next=66;break;}throw new Error("input '".concat(_t335,"' is missing in 'feeds'."));case 66:_context140.next=62;break;case 68:_context140.next=73;break;case 70:_context140.prev=70;_context140.t1=_context140["catch"](60);_iterator56.e(_context140.t1);case 73:_context140.prev=73;_iterator56.f();return _context140.finish(73);case 76:if(o){_iterator57=_createForOfIteratorHelper(this.outputNames);try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){_e816=_step57.value;n[_e816]=null;}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}}_context140.next=79;return this.handler.run(_e813,n,i);case 79:a=_context140.sent;s={};for(_e822 in a)if(Object.hasOwnProperty.call(a,_e822)){_t334=a[_e822];s[_e822]=_t334 instanceof mc?_t334:new mc(_t334.type,_t334.data,_t334.dims);}return _context140.abrupt("return",(xc(),s));case 83:case"end":return _context140.stop();}},_callee137,this,[[15,28,31,34],[60,70,73,76]]);}));function run(_x160,_x161,_x162){return _run6.apply(this,arguments);}return run;}()},{key:"release",value:function(){var _release3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee138(){return _regeneratorRuntime().wrap(function _callee138$(_context141){while(1)switch(_context141.prev=_context141.next){case 0:return _context141.abrupt("return",this.handler.dispose());case 1:case"end":return _context141.stop();}},_callee138,this);}));function release(){return _release3.apply(this,arguments);}return release;}()},{key:"configure",value:function(){var _configure4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee139(_e818){return _regeneratorRuntime().wrap(function _callee139$(_context142){while(1)switch(_context142.prev=_context142.next){case 0:_context142.next=2;return this.handler.configure(_e818);case 2:return _context142.abrupt("return",_context142.sent);case 3:case"end":return _context142.stop();}},_callee139,this);}));function configure(_x163){return _configure4.apply(this,arguments);}return configure;}()},{key:"auth",value:function(){var _auth4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee140(_e819){return _regeneratorRuntime().wrap(function _callee140$(_context143){while(1)switch(_context143.prev=_context143.next){case 0:_context143.next=2;return this.handler.auth(_e819);case 2:return _context143.abrupt("return",_context143.sent);case 3:case"end":return _context143.stop();}},_callee140,this);}));function auth(_x164){return _auth4.apply(this,arguments);}return auth;}()},{key:"startProfiling",value:function startProfiling(){this.handler.startProfiling();}},{key:"endProfiling",value:function endProfiling(){this.handler.endProfiling();}},{key:"inputNames",get:function get(){return this.handler.inputNames;}},{key:"outputNames",get:function get(){return this.handler.outputNames;}}],[{key:"create",value:function(){var _create3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee141(t,r,n,i){var o,a,_e820,_s50,_u38,s,u;return _regeneratorRuntime().wrap(function _callee141$(_context144){while(1)switch(_context144.prev=_context144.next){case 0:vc();a={};if(!("string"==typeof t)){_context144.next=11;break;}if(!(o=t,"object"==_typeof(r)&&null!==r)){_context144.next=7;break;}a=r;_context144.next=9;break;case 7:if(!(_typeof(r)<"u")){_context144.next=9;break;}throw new TypeError("'options' must be an object.");case 9:_context144.next=52;break;case 11:if(!(t instanceof Uint8Array)){_context144.next=20;break;}if(!(o=t,"object"==_typeof(r)&&null!==r)){_context144.next=16;break;}a=r;_context144.next=18;break;case 16:if(!(_typeof(r)<"u")){_context144.next=18;break;}throw new TypeError("'options' must be an object.");case 18:_context144.next=52;break;case 20:if(t instanceof ArrayBuffer||(typeof SharedArrayBuffer==="undefined"?"undefined":_typeof(SharedArrayBuffer))<"u"&&t instanceof SharedArrayBuffer){_context144.next=22;break;}throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");case 22:_e820=t,_s50=0,_u38=t.byteLength;if(!("object"==_typeof(r)&&null!==r)){_context144.next=27;break;}a=r;_context144.next=51;break;case 27:if(!("number"==typeof r)){_context144.next=49;break;}if(!(_s50=r,!Number.isSafeInteger(_s50))){_context144.next=30;break;}throw new RangeError("'byteOffset' must be an integer.");case 30:if(!(_s50<0||_s50>=_e820.byteLength)){_context144.next=32;break;}throw new RangeError("'byteOffset' is out of range [0, ".concat(_e820.byteLength,")."));case 32:if(!(_u38=t.byteLength-_s50,"number"==typeof n)){_context144.next=45;break;}if(!(_u38=n,!Number.isSafeInteger(_u38))){_context144.next=35;break;}throw new RangeError("'byteLength' must be an integer.");case 35:if(!(_u38<=0||_s50+_u38>_e820.byteLength)){_context144.next=37;break;}throw new RangeError("'byteLength' is out of range (0, ".concat(_e820.byteLength-_s50,"]."));case 37:if(!("object"==_typeof(i)&&null!==i)){_context144.next=41;break;}a=i;_context144.next=43;break;case 41:if(!(_typeof(i)<"u")){_context144.next=43;break;}throw new TypeError("'options' must be an object.");case 43:_context144.next=47;break;case 45:if(!(_typeof(n)<"u")){_context144.next=47;break;}throw new TypeError("'byteLength' must be a number.");case 47:_context144.next=51;break;case 49:if(!(_typeof(r)<"u")){_context144.next=51;break;}throw new TypeError("'options' must be an object.");case 51:o=new Uint8Array(_e820,_s50,_u38);case 52:s=(a.executionProviders||[]).map(function(_e821){return"string"==typeof _e821?_e821:_e821.name;});_context144.next=55;return Jh(s);case 55:_context144.next=57;return _context144.sent.createInferenceSessionHandler(o,a);case 57:u=_context144.sent;return _context144.abrupt("return",(xc(),new e(u)));case 59:case"end":return _context144.stop();}},_callee141);}));function create(_x165,_x166,_x167,_x168){return _create3.apply(this,arguments);}return create;}()}]);return e;}();}),Qc=Mc(function(){Jc(),Ic=_c;}),ed=Mc(function(){}),td=Mc(function(){Uc(),Zc(),"Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Ac=/*#__PURE__*/function(){function e(_e823,t,r){_classCallCheck(this,e);this.handler=_e823,this.hasOptimizerModel=t,this.hasEvalModel=r;}_createClass(e,[{key:"trainingInputNames",get:function get(){return this.handler.inputNames;}},{key:"trainingOutputNames",get:function get(){return this.handler.outputNames;}},{key:"evalInputNames",get:function get(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.");}},{key:"evalOutputNames",get:function get(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.");}},{key:"typeNarrowingForRunStep",value:function typeNarrowingForRunStep(_e825,t,r,n,i){var o={},a={};if("object"!=_typeof(r)||null===r||r instanceof mc||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");var s=!0;if("object"==_typeof(n)){if(null===n)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof mc)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(0===n.length)throw new TypeError("'fetches' cannot be an empty array.");s=!1;var _iterator58=_createForOfIteratorHelper(n),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var _e826=_step58.value;if("string"!=typeof _e826)throw new TypeError("'fetches' must be a string array or an object.");if(-1===t.indexOf(_e826))throw new RangeError("'fetches' contains invalid output name: ".concat(_e826,"."));o[_e826]=null;}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}if("object"==_typeof(i)&&null!==i)a=i;else if(_typeof(i)<"u")throw new TypeError("'options' must be an object.");}else{var _e827=!1,_r321=Object.getOwnPropertyNames(n);var _iterator59=_createForOfIteratorHelper(t),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var _i117=_step59.value;if(-1!==_r321.indexOf(_i117)){var _t336=n[_i117];(null===_t336||_t336 instanceof mc)&&(_e827=!0,s=!1,o[_i117]=_t336);}}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}if(_e827){if("object"==_typeof(i)&&null!==i)a=i;else if(_typeof(i)<"u")throw new TypeError("'options' must be an object.");}else a=n;}}else if(_typeof(n)<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");var _iterator60=_createForOfIteratorHelper(_e825),_step60;try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var _t337=_step60.value;if(_typeof(r[_t337])>"u")throw new Error("input '".concat(_t337,"' is missing in 'feeds'."));}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}if(s){var _iterator61=_createForOfIteratorHelper(t),_step61;try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var _e828=_step61.value;o[_e828]=null;}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}}return[o,a];}},{key:"convertHandlerReturnTypeToMapOfTensors",value:function convertHandlerReturnTypeToMapOfTensors(_e829){var t={};for(var _r322 in _e829)if(Object.hasOwnProperty.call(_e829,_r322)){var n=_e829[_r322];t[_r322]=n instanceof mc?n:new mc(n.type,n.data,n.dims);}return t;}},{key:"lazyResetGrad",value:function(){var _lazyResetGrad2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee142(){return _regeneratorRuntime().wrap(function _callee142$(_context145){while(1)switch(_context145.prev=_context145.next){case 0:_context145.next=2;return this.handler.lazyResetGrad();case 2:case"end":return _context145.stop();}},_callee142,this);}));function lazyResetGrad(){return _lazyResetGrad2.apply(this,arguments);}return lazyResetGrad;}()},{key:"runTrainStep",value:function(){var _runTrainStep2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee143(_e830,t,r){var _this$typeNarrowingFo5,_this$typeNarrowingFo6,n,i,o;return _regeneratorRuntime().wrap(function _callee143$(_context146){while(1)switch(_context146.prev=_context146.next){case 0:_this$typeNarrowingFo5=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,_e830,t,r);_this$typeNarrowingFo6=_slicedToArray(_this$typeNarrowingFo5,2);n=_this$typeNarrowingFo6[0];i=_this$typeNarrowingFo6[1];_context146.next=6;return this.handler.runTrainStep(_e830,n,i);case 6:o=_context146.sent;return _context146.abrupt("return",this.convertHandlerReturnTypeToMapOfTensors(o));case 8:case"end":return _context146.stop();}},_callee143,this);}));function runTrainStep(_x169,_x170,_x171){return _runTrainStep2.apply(this,arguments);}return runTrainStep;}()},{key:"runOptimizerStep",value:function(){var _runOptimizerStep2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee144(_e831){return _regeneratorRuntime().wrap(function _callee144$(_context147){while(1)switch(_context147.prev=_context147.next){case 0:if(this.hasOptimizerModel){_context147.next=2;break;}throw new Error("This TrainingSession has no OptimizerModel loaded.");case 2:_context147.next=4;return this.handler.runOptimizerStep(_e831||{});case 4:case"end":return _context147.stop();}},_callee144,this);}));function runOptimizerStep(_x172){return _runOptimizerStep2.apply(this,arguments);}return runOptimizerStep;}()},{key:"runEvalStep",value:function(){var _runEvalStep2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee145(_e832,t,r){var _this$typeNarrowingFo7,_this$typeNarrowingFo8,n,i,_o82;return _regeneratorRuntime().wrap(function _callee145$(_context148){while(1)switch(_context148.prev=_context148.next){case 0:if(!this.hasEvalModel){_context148.next=9;break;}_this$typeNarrowingFo7=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,_e832,t,r);_this$typeNarrowingFo8=_slicedToArray(_this$typeNarrowingFo7,2);n=_this$typeNarrowingFo8[0];i=_this$typeNarrowingFo8[1];_context148.next=7;return this.handler.runEvalStep(_e832,n,i);case 7:_o82=_context148.sent;return _context148.abrupt("return",this.convertHandlerReturnTypeToMapOfTensors(_o82));case 9:throw new Error("This TrainingSession has no EvalModel loaded.");case 10:case"end":return _context148.stop();}},_callee145,this);}));function runEvalStep(_x173,_x174,_x175){return _runEvalStep2.apply(this,arguments);}return runEvalStep;}()},{key:"getParametersSize",value:function(){var _getParametersSize2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee146(){var _e833,_args149=arguments;return _regeneratorRuntime().wrap(function _callee146$(_context149){while(1)switch(_context149.prev=_context149.next){case 0:_e833=_args149.length>0&&_args149[0]!==undefined?_args149[0]:!0;return _context149.abrupt("return",this.handler.getParametersSize(_e833));case 2:case"end":return _context149.stop();}},_callee146,this);}));function getParametersSize(){return _getParametersSize2.apply(this,arguments);}return getParametersSize;}()},{key:"loadParametersBuffer",value:function(){var _loadParametersBuffer2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee147(_e834){var t,r,_args150=arguments;return _regeneratorRuntime().wrap(function _callee147$(_context150){while(1)switch(_context150.prev=_context150.next){case 0:t=_args150.length>1&&_args150[1]!==undefined?_args150[1]:!0;_context150.next=3;return this.getParametersSize(t);case 3:r=_context150.sent;if(!(_e834.length!==4*r)){_context150.next=6;break;}throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");case 6:return _context150.abrupt("return",this.handler.loadParametersBuffer(_e834,t));case 7:case"end":return _context150.stop();}},_callee147,this);}));function loadParametersBuffer(_x176){return _loadParametersBuffer2.apply(this,arguments);}return loadParametersBuffer;}()},{key:"getContiguousParameters",value:function(){var _getContiguousParameters2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee148(){var _e835,_args151=arguments;return _regeneratorRuntime().wrap(function _callee148$(_context151){while(1)switch(_context151.prev=_context151.next){case 0:_e835=_args151.length>0&&_args151[0]!==undefined?_args151[0]:!0;return _context151.abrupt("return",this.handler.getContiguousParameters(_e835));case 2:case"end":return _context151.stop();}},_callee148,this);}));function getContiguousParameters(){return _getContiguousParameters2.apply(this,arguments);}return getContiguousParameters;}()},{key:"release",value:function(){var _release4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee149(){return _regeneratorRuntime().wrap(function _callee149$(_context152){while(1)switch(_context152.prev=_context152.next){case 0:return _context152.abrupt("return",this.handler.dispose());case 1:case"end":return _context152.stop();}},_callee149,this);}));function release(){return _release4.apply(this,arguments);}return release;}()}],[{key:"create",value:function(){var _create4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee150(t,r){var n,i,o,a,s,_r323;return _regeneratorRuntime().wrap(function _callee150$(_context153){while(1)switch(_context153.prev=_context153.next){case 0:n=t.evalModel||"";i=t.optimizerModel||"";o=r||{};a=(o.executionProviders||[]).map(function(_e824){return"string"==typeof _e824?_e824:_e824.name;});_context153.next=6;return Jh(a);case 6:s=_context153.sent;if(!s.createTrainingSessionHandler){_context153.next=12;break;}_context153.next=10;return s.createTrainingSessionHandler(t.checkpointState,t.trainModel,n,i,o);case 10:_r323=_context153.sent;return _context153.abrupt("return",new e(_r323,!!t.optimizerModel,!!t.evalModel));case 12:throw new Error("Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.");case 13:case"end":return _context153.stop();}},_callee150);}));function create(_x177,_x178){return _create4.apply(this,arguments);}return create;}()}]);return e;}();}),rd=Mc(function(){td(),Sc=Ac;}),nd={};Fc(nd,{InferenceSession:function InferenceSession(){return Ic;},TRACE:function TRACE(){return wc;},TRACE_FUNC_BEGIN:function TRACE_FUNC_BEGIN(){return vc;},TRACE_FUNC_END:function TRACE_FUNC_END(){return xc;},Tensor:function Tensor(){return mc;},TrainingSession:function TrainingSession(){return Sc;},env:function env(){return rc;},registerBackend:function registerBackend(){return qh;}});var id=Mc(function(){jc(),Vc(),Qc(),Zc(),qc(),ed(),rd();}),od={};Fc(od,{createReadStream:function createReadStream(){return ud;},readFile:function readFile(){return ad;},readFileSync:function readFileSync(){return sd;}});var ad,sd,ud,ld=Mc(function(){ad=void 0,sd=void 0,ud=void 0;}),hd={};Fc(hd,{join:function join(){return cd;}});var cd,dd=Mc(function(){cd=void 0;}),fd=Lc(function(e,t){var r=function(){var e=(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript?document.currentScript.src:void 0;return(typeof __filename==="undefined"?"undefined":_typeof(__filename))<"u"&&(e=e||__filename),function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r,n,i=t;i.ready=new Promise(function(e,t){r=e,n=t;}),i.mountExternalData=function(e,t){(i.Ka||(i.Ka=new Map())).set(e,t);},i.unmountExternalData=function(){delete i.Ka;},i.jsepInit=function(e,t,r,n,o,a,s,u){i.gb=e,i.Wa=t,i.Ya=r,i.Qa=n,i.Xa=o,i.Ba=a,i.Za=s,i.$a=u,t=function t(e,_t340,r){return function(){var _t338,_t339;for(var _len11=arguments.length,n=new Array(_len11),_key11=0;_key11<_len11;_key11++){n[_key11]=arguments[_key11];}var i=fe,o=(_t338=_t340)===null||_t338===void 0?void 0:_t338();n=e.apply(void 0,_toConsumableArray(n));var a=(_t339=_t340)===null||_t339===void 0?void 0:_t339();return o!==a&&(e=a,r(o),_t340=r=null),fe!=i?new Promise(function(e,t){be={resolve:e,reject:t};}):n;};},r=function r(t){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee151(){var _n155,_o83,_a84,_e836,_args154=arguments;return _regeneratorRuntime().wrap(function _callee151$(_context154){while(1)switch(_context154.prev=_context154.next){case 0:_context154.prev=0;if(!i.Ja){_context154.next=3;break;}throw Error("Session already started");case 3:_n155=i.Ja={ab:_args154.length<=0?undefined:_args154[0],errors:[]};_context154.next=6;return t.apply(void 0,_args154);case 6:_o83=_context154.sent;if(!(i.Ja!==_n155)){_context154.next=9;break;}throw Error("Session mismatch");case 9:e.flush();_a84=_n155.errors;if(!(0<_a84.length)){_context154.next=17;break;}_context154.next=14;return Promise.all(_a84);case 14:_e836=_context154.sent;if(!(_e836=_e836.filter(function(e){return e;}),0<_e836.length)){_context154.next=17;break;}throw Error(_e836.join("\n"));case 17:return _context154.abrupt("return",_o83);case 18:_context154.prev=18;i.Ja=null;return _context154.finish(18);case 21:case"end":return _context154.stop();}},_callee151,null,[[0,,18,21]]);}));},i._OrtRun=r(t(i._OrtRun,function(){return i._OrtRun;},function(e){return i._OrtRun=e;})),i._OrtRunWithBinding=r(t(i._OrtRunWithBinding,function(){return i._OrtRunWithBinding;},function(e){return i._OrtRunWithBinding=e;})),i._OrtBindInput=t(i._OrtBindInput,function(){return i._OrtBindInput;},function(e){return i._OrtBindInput=e;}),i.jsepRegisterBuffer=function(t,r,n,i){return e.registerBuffer(t,r,n,i);},i.jsepUnregisterBuffers=function(t){e.unregisterBuffers(t);},i.jsepGetBuffer=function(t){return e.getBuffer(t);},i.jsepCreateDownloader=function(t,r,n){return e.createDownloader(t,r,n);};};var o,a,s,u=Object.assign({},i),l="./this.program",h=function h(e,t){throw t;},c="object"==(typeof window==="undefined"?"undefined":_typeof(window)),d="function"==typeof importScripts,f="object"==_typeof(Oc)&&"object"==_typeof(Oc.versions)&&"string"==typeof Oc.versions.node,p="";if(f){var y=(ld(),Nc(od)),g=(dd(),Nc(hd));p=d?g.dirname(p)+"/":__dirname+"/",o=function o(e,t){return e=F(e)?new URL(e):g.normalize(e),y.readFileSync(e,t?void 0:"utf8");},s=function s(e){return(e=o(e,!0)).buffer||(e=new Uint8Array(e)),e;},a=function a(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!0;e=F(e)?new URL(e):g.normalize(e),y.readFile(e,n?void 0:"utf8",function(e,i){e?r(e):t(n?i.buffer:i);});},!i.thisProgram&&1<Oc.argv.length&&(l=Oc.argv[1].replace(/\\/g,"/")),Oc.argv.slice(2),h=function h(e,t){throw Oc.exitCode=e,t;},i.inspect=function(){return"[Emscripten Module object]";};}else(c||d)&&(d?p=self.location.href:(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript&&(p=document.currentScript.src),e&&(p=e),p=0!==p.indexOf("blob:")?p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=function o(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.send(null),t.responseText;},d&&(s=function s(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response);}),a=function a(e,t,r){var n=new XMLHttpRequest();n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r();},n.onerror=r,n.send(null);});var m=console.log.bind(console),w=console.error.bind(console);Object.assign(i,u),u=null,"object"!=(typeof WebAssembly==="undefined"?"undefined":_typeof(WebAssembly))&&D("no native wasm support detected");var b,v,x,_3,I,A,S,T,C=!1;function E(){var e=b.buffer;i.HEAP8=x=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=_3=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=I=new Int32Array(e),i.HEAPU32=A=new Uint32Array(e),i.HEAPF32=S=new Float32Array(e),i.HEAPF64=T=new Float64Array(e);}var O=[],k=[],P=[],$=0,R=null,B=null;function D(e){throw w(e="Aborted("+e+")"),C=!0,v=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e;}var M,L=function L(e){return e.startsWith("data:application/octet-stream;base64,");},F=function F(e){return e.startsWith("file://");};if(!L(M="ort-wasm-simd.wasm")){var N=M;M=i.locateFile?i.locateFile(N,p):p+N;}function U(e){if(s)return s(e);throw"both async and sync fetching of the wasm failed";}function j(e,t,r){return function(e){if(c||d){if("function"==typeof fetch&&!F(e))return fetch(e,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer();})["catch"](function(){return U(e);});if(a)return new Promise(function(t,r){a(e,function(e){return t(new Uint8Array(e));},r);});}return Promise.resolve().then(function(){return U(e);});}(e).then(function(e){return WebAssembly.instantiate(e,t);}).then(function(e){return e;}).then(r,function(e){w("failed to asynchronously prepare wasm: ".concat(e)),D(e);});}var G,z={898080:function _(e,t,r,n){if(_typeof(i)>"u"||!i.Ka)return 1;if((e=X(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=i.Ka.get(e)))return 2;if((t>>>=0)+(r>>>=0)>e.byteLength)return 3;try{return _3.set(e.subarray(t,t+r),n>>>0>>>0),0;}catch(_unused16){return 4;}},898581:function _(e){return i.Wa(e);},898614:function _(e){return i.Ya(e);},898646:function _(e,t,r){i.Qa(e,t,r,!0);},898685:function _(e,t,r){i.Qa(e,t,r);},898718:function _(e){i.Ba("Abs",e,void 0);},898769:function _(e){i.Ba("Neg",e,void 0);},898820:function _(e){i.Ba("Floor",e,void 0);},898873:function _(e){i.Ba("Ceil",e,void 0);},898925:function _(e){i.Ba("Reciprocal",e,void 0);},898983:function _(e){i.Ba("Sqrt",e,void 0);},899035:function _(e){i.Ba("Exp",e,void 0);},899086:function _(e){i.Ba("Erf",e,void 0);},899137:function _(e){i.Ba("Sigmoid",e,void 0);},899192:function _(e){i.Ba("Log",e,void 0);},899243:function _(e){i.Ba("Sin",e,void 0);},899294:function _(e){i.Ba("Cos",e,void 0);},899345:function _(e){i.Ba("Tan",e,void 0);},899396:function _(e){i.Ba("Asin",e,void 0);},899448:function _(e){i.Ba("Acos",e,void 0);},899500:function _(e){i.Ba("Atan",e,void 0);},899552:function _(e){i.Ba("Sinh",e,void 0);},899604:function _(e){i.Ba("Cosh",e,void 0);},899656:function _(e){i.Ba("Asinh",e,void 0);},899709:function _(e){i.Ba("Acosh",e,void 0);},899762:function _(e){i.Ba("Atanh",e,void 0);},899815:function _(e){i.Ba("Tanh",e,void 0);},899867:function _(e){i.Ba("Not",e,void 0);},899918:function _(e,t,r){i.Ba("Clip",e,{min:t,max:r});},899987:function _(e){i.Ba("Clip",e,void 0);},900039:function _(e,t){i.Ba("Elu",e,{alpha:t});},900097:function _(e){i.Ba("Relu",e,void 0);},900149:function _(e,t){i.Ba("LeakyRelu",e,{alpha:t});},900213:function _(e,t){i.Ba("ThresholdedRelu",e,{alpha:t});},900283:function _(e,t){i.Ba("Cast",e,{to:t});},900341:function _(e){i.Ba("Add",e,void 0);},900392:function _(e){i.Ba("Sub",e,void 0);},900443:function _(e){i.Ba("Mul",e,void 0);},900494:function _(e){i.Ba("Div",e,void 0);},900545:function _(e){i.Ba("Pow",e,void 0);},900596:function _(e){i.Ba("Equal",e,void 0);},900649:function _(e){i.Ba("Greater",e,void 0);},900704:function _(e){i.Ba("GreaterOrEqual",e,void 0);},900766:function _(e){i.Ba("Less",e,void 0);},900818:function _(e){i.Ba("LessOrEqual",e,void 0);},900877:function _(e,t,r,n,o){i.Ba("ReduceMean",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},901036:function _(e,t,r,n,o){i.Ba("ReduceMax",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},901194:function _(e,t,r,n,o){i.Ba("ReduceMin",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},901352:function _(e,t,r,n,o){i.Ba("ReduceProd",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},901511:function _(e,t,r,n,o){i.Ba("ReduceSum",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},901669:function _(e,t,r,n,o){i.Ba("ReduceL1",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},901826:function _(e,t,r,n,o){i.Ba("ReduceL2",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},901983:function _(e,t,r,n,o){i.Ba("ReduceLogSum",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},902144:function _(e,t,r,n,o){i.Ba("ReduceSumSquare",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},902308:function _(e,t,r,n,o){i.Ba("ReduceLogSumExp",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},902472:function _(e){i.Ba("Where",e,void 0);},902525:function _(e,t,r){i.Ba("Transpose",e,{perm:t?Array.from(I.subarray(t>>>0,r>>>0)):[]});},902633:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p,y){i.Ba("ConvTranspose",e,{format:l?"NHWC":"NCHW",autoPad:t,dilations:[r],group:n,kernel_shape:[o],pads:[a,s],strides:[u],wIsConst:function wIsConst(){return!!x[h>>>0];},outputPadding:c?Array.from(I.subarray(c>>>0,d>>>0)):[],outputShape:f?Array.from(I.subarray(f>>>0,p>>>0)):[],activation:X(y)});},903035:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p){i.Ba("ConvTranspose",e,{format:u?"NHWC":"NCHW",autoPad:t,dilations:Array.from(I.subarray(r>>>0,2+(r>>>0)>>>0)),group:n,kernelShape:Array.from(I.subarray(o>>>0,2+(o>>>0)>>>0)),pads:Array.from(I.subarray(a>>>0,4+(a>>>0)>>>0)),strides:Array.from(I.subarray(s>>>0,2+(s>>>0)>>>0)),wIsConst:function wIsConst(){return!!x[l>>>0];},outputPadding:h?Array.from(I.subarray(h>>>0,c>>>0)):[],outputShape:d?Array.from(I.subarray(d>>>0,f>>>0)):[],activation:X(p)});},903600:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p,y){i.Ba("ConvTranspose",e,{format:l?"NHWC":"NCHW",autoPad:t,dilations:[r],group:n,kernel_shape:[o],pads:[a,s],strides:[u],wIsConst:function wIsConst(){return!!x[h>>>0];},outputPadding:c?Array.from(I.subarray(c>>>0,d>>>0)):[],outputShape:f?Array.from(I.subarray(f>>>0,p>>>0)):[],activation:X(y)});},904002:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p){i.Ba("ConvTranspose",e,{format:u?"NHWC":"NCHW",autoPad:t,dilations:Array.from(I.subarray(r>>>0,2+(r>>>0)>>>0)),group:n,kernelShape:Array.from(I.subarray(o>>>0,2+(o>>>0)>>>0)),pads:Array.from(I.subarray(a>>>0,4+(a>>>0)>>>0)),strides:Array.from(I.subarray(s>>>0,2+(s>>>0)>>>0)),wIsConst:function wIsConst(){return!!x[l>>>0];},outputPadding:h?Array.from(I.subarray(h>>>0,c>>>0)):[],outputShape:d?Array.from(I.subarray(d>>>0,f>>>0)):[],activation:X(p)});},904567:function _(e,t){i.Ba("GlobalAveragePool",e,{format:t?"NHWC":"NCHW"});},904658:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p,y,g){i.Ba("AveragePool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:o,dilations:[a,s],kernel_shape:[u,l],pads:[h,c,d,f],strides:[p,y]});},904942:function _(e,t){i.Ba("GlobalAveragePool",e,{format:t?"NHWC":"NCHW"});},905033:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p,y,g){i.Ba("AveragePool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:o,dilations:[a,s],kernel_shape:[u,l],pads:[h,c,d,f],strides:[p,y]});},905317:function _(e,t){i.Ba("GlobalMaxPool",e,{format:t?"NHWC":"NCHW"});},905404:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p,y,g){i.Ba("MaxPool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:o,dilations:[a,s],kernel_shape:[u,l],pads:[h,c,d,f],strides:[p,y]});},905684:function _(e,t){i.Ba("GlobalMaxPool",e,{format:t?"NHWC":"NCHW"});},905771:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p,y,g){i.Ba("MaxPool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:o,dilations:[a,s],kernel_shape:[u,l],pads:[h,c,d,f],strides:[p,y]});},906051:function _(e,t,r,n,o){i.Ba("Gemm",e,{alpha:t,beta:r,transA:n,transB:o});},906155:function _(e){i.Ba("MatMul",e,void 0);},906209:function _(e,t,r,n){i.Ba("ArgMax",e,{keepDims:!!t,selectLastIndex:!!r,axis:n});},906317:function _(e,t,r,n){i.Ba("ArgMin",e,{keepDims:!!t,selectLastIndex:!!r,axis:n});},906425:function _(e,t){i.Ba("Softmax",e,{axis:t});},906488:function _(e,t){i.Ba("Concat",e,{axis:t});},906548:function _(e,t,r,n,o){i.Ba("Split",e,{axis:t,numOutputs:r,splitSizes:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},906688:function _(e){i.Ba("Expand",e,void 0);},906742:function _(e,t){i.Ba("Gather",e,{axis:Number(t)});},906813:function _(e,t){i.Ba("GatherElements",e,{axis:Number(t)});},906892:function _(e,t,r,n,o,a,s,u,l,h,c){i.Ba("Resize",e,{antialias:t,axes:r?Array.from(I.subarray(r>>>0,n>>>0)):[],coordinateTransformMode:X(o),cubicCoeffA:a,excludeOutside:s,extrapolationValue:u,keepAspectRatioPolicy:X(l),mode:X(h),nearestMode:X(c)});},907238:function _(e,t,r,n,o,a,s){i.Ba("Slice",e,{starts:t?Array.from(I.subarray(t>>>0,r>>>0)):[],ends:n?Array.from(I.subarray(n>>>0,o>>>0)):[],axes:a?Array.from(I.subarray(a>>>0,s>>>0)):[]});},907454:function _(e){i.Ba("Tile",e,void 0);},907506:function _(e,t,r){i.Ba("LayerNormalization",e,{axis:Number(t),epsilon:Number(r)});},907613:function _(e,t,r){i.Ba("InstanceNormalization",e,{epsilon:t,format:r?"NHWC":"NCHW"});},907727:function _(e,t,r){i.Ba("InstanceNormalization",e,{epsilon:t,format:r?"NHWC":"NCHW"});},907841:function _(e){i.Ba("Range",e,void 0);},907894:function _(e,t){i.Ba("Einsum",e,{equation:X(t)});},907975:function _(e,t,r,n,o){i.Ba("Pad",e,{mode:t,value:r,pads:n?Array.from(I.subarray(n>>>0,o>>>0)):[]});},908102:function _(e,t,r,n,o,a){i.Ba("BatchNormalization",e,{epsilon:t,momentum:r,spatial:!!o,trainingMode:!!n,format:a?"NHWC":"NCHW"});},908271:function _(e,t,r,n,o,a){i.Ba("BatchNormalization",e,{epsilon:t,momentum:r,spatial:!!o,trainingMode:!!n,format:a?"NHWC":"NCHW"});},908440:function _(e,t,r){i.Ba("CumSum",e,{exclusive:Number(t),reverse:Number(r)});},908537:function _(e,t,r,n,o,a,s,u,l){i.Ba("Attention",e,{numHeads:t,isUnidirectional:r,maskFilterValue:n,scale:o,doRotary:a,qkvHiddenSizes:s?Array.from(I.subarray(Number(u)>>>0,Number(u)+s>>>0)):[],pastPresentShareBuffer:!!l});},908809:function _(e){i.Ba("Gelu",e,void 0);},908861:function _(e,t,r,n,o,a){i.Ba("MultiHeadAttention",e,{numHeads:t,isUnidirectional:r,maskFilterValue:n,scale:o,doRotary:a});},909020:function _(e){i.Ba("BiasAdd",e,void 0);},909075:function _(e){i.Ba("BiasSplitGelu",e,void 0);},909136:function _(e,t){i.Ba("SkipLayerNormalization",e,{epsilon:t});},909217:function _(e,t,r,n,o,a,s,u,l,h,c,d,f){i.Ba("Conv",e,{format:l?"NHWC":"NCHW",auto_pad:t,dilations:[r],group:n,kernel_shape:[o],pads:a?Array.from(I.subarray(a>>>0,s>>>0)):[],strides:[u],w_is_const:function w_is_const(){return!!x[h>>>0];},activation:X(c),activation_params:d?Array.from(S.subarray(d>>>0,f>>>0)):[]});},909587:function _(e,t,r,n,o,a,s,u,l,h,c,d,f,p,y,g){i.Ba("Conv",e,{format:d?"NHWC":"NCHW",auto_pad:t,dilations:[r,n],group:o,kernel_shape:[a,s],pads:u?Array.from(I.subarray(u>>>0,l>>>0)):[],strides:[h,c],w_is_const:function w_is_const(){return!!x[f>>>0];},activation:X(p),activation_params:y?Array.from(S.subarray(y>>>0,g>>>0)):[]});},909978:function _(e){i.Za(e);},910012:function _(e,t){return i.$a(e,t,i.Ja.ab,i.Ja.errors);}};function V(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e;}function H(e){this.Na=e-24,this.Ua=function(e){A[this.Na+4>>>2>>>0]=e;},this.Ta=function(e){A[this.Na+8>>>2>>>0]=e;},this.Ra=function(e,t){this.Sa(),this.Ua(e),this.Ta(t);},this.Sa=function(){A[this.Na+16>>>2>>>0]=0;};}var W,Y=(typeof TextDecoder==="undefined"?"undefined":_typeof(TextDecoder))<"u"?new TextDecoder("utf8"):void 0,K=function K(e,t,r){var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&Y)return Y.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&e[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i));}}else n+=String.fromCharCode(i);}return n;},X=function X(e,t){return(e>>>=0)?K(_3,e,t):"";},Z=function Z(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3;}return t;},q=function q(e,t,r,n){if(!(0<n))return 0;var i=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o);if(127>=a){if(r>=n)break;t[r++>>>0]=a;}else{if(2047>=a){if(r+1>=n)break;t[r++>>>0]=192|a>>6;}else{if(65535>=a){if(r+2>=n)break;t[r++>>>0]=224|a>>12;}else{if(r+3>=n)break;t[r++>>>0]=240|a>>18,t[r++>>>0]=128|a>>12&63;}t[r++>>>0]=128|a>>6&63;}t[r++>>>0]=128|63&a;}}return t[r>>>0]=0,r-i;},J=function J(e){return e%4==0&&(e%100!=0||e%400==0);},Q=[0,31,60,91,121,152,182,213,244,274,305,335],ee=[0,31,59,90,120,151,181,212,243,273,304,334],te=function te(e){var t=Z(e)+1,r=Pe(t);return r&&q(e,_3,r,t),r;},re=[],ne=function ne(e,t){re.length=0;for(var r;r=_3[e++>>>0];){var n=105!=r;t+=(n&=112!=r)&&t%8?4:0,re.push(112==r?A[t>>>2>>>0]:105==r?I[t>>>2>>>0]:T[t>>>3>>>0]),t+=n?8:4;}return re;},ie={},oe=function oe(){if(!W){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==(typeof navigator==="undefined"?"undefined":_typeof(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(e in ie)void 0===ie[e]?delete t[e]:t[e]=ie[e];var r=[];for(e in t)r.push("".concat(e,"=").concat(t[e]));W=r;}return W;},ae=[null,[],[]],_se=function se(e){return(_se=function(){if("object"==(typeof crypto==="undefined"?"undefined":_typeof(crypto))&&"function"==typeof crypto.getRandomValues)return function(e){return crypto.getRandomValues(e);};if(f)try{var e=Dc("crypto");if(e.randomFillSync)return function(t){return e.randomFillSync(t);};var t=e.randomBytes;return function(e){return e.set(t(e.byteLength)),e;};}catch(_unused17){}D("initRandomDevice");}())(e);},ue=[31,29,31,30,31,30,31,31,30,31,30,31],le=[31,28,31,30,31,30,31,31,30,31,30,31];function he(e,t,r,n){function i(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e;}function o(e,t){return i(e,t,"0");}function a(e,t){function r(e){return 0>e?-1:0<e?1:0;}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n;}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30);}}function u(e){var t=e.Ha;for(e=new Date(new Date(e.Ia+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(J(e.getFullYear())?ue:le)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break;}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=a(t,e)?0>=a(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1;}e>>>=0,t>>>=0,r>>>=0;var l=A[(n>>>=0)+40>>>2>>>0];for(var h in n={eb:I[n>>>2>>>0],cb:I[n+4>>>2>>>0],La:I[n+8>>>2>>>0],Pa:I[n+12>>>2>>>0],Ma:I[n+16>>>2>>>0],Ia:I[n+20>>>2>>>0],Ga:I[n+24>>>2>>>0],Ha:I[n+28>>>2>>>0],hb:I[n+32>>>2>>>0],bb:I[n+36>>>2>>>0],fb:l?X(l):""},r=X(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(h,"g"),l[h]);var c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(h in l={"%a":function a(e){return c[e.Ga].substring(0,3);},"%A":function A(e){return c[e.Ga];},"%b":function b(e){return d[e.Ma].substring(0,3);},"%B":function B(e){return d[e.Ma];},"%C":function C(e){return o((e.Ia+1900)/100|0,2);},"%d":function d(e){return o(e.Pa,2);},"%e":function e(_e837){return i(_e837.Pa,2," ");},"%g":function g(e){return u(e).toString().substring(2);},"%G":function G(e){return u(e);},"%H":function H(e){return o(e.La,2);},"%I":function I(e){return 0==(e=e.La)?e=12:12<e&&(e-=12),o(e,2);},"%j":function j(e){for(var t=0,r=0;r<=e.Ma-1;t+=(J(e.Ia+1900)?ue:le)[r++]);return o(e.Pa+t,3);},"%m":function m(e){return o(e.Ma+1,2);},"%M":function M(e){return o(e.cb,2);},"%n":function n(){return"\n";},"%p":function p(e){return 0<=e.La&&12>e.La?"AM":"PM";},"%S":function S(e){return o(e.eb,2);},"%t":function t(){return"\t";},"%u":function u(e){return e.Ga||7;},"%U":function U(e){return o(Math.floor((e.Ha+7-e.Ga)/7),2);},"%V":function V(e){var t=Math.floor((e.Ha+7-(e.Ga+6)%7)/7);if(2>=(e.Ga+371-e.Ha-2)%7&&t++,t)53==t&&(4==(r=(e.Ga+371-e.Ha)%7)||3==r&&J(e.Ia)||(t=1));else{t=52;var r=(e.Ga+7-e.Ha-1)%7;(4==r||5==r&&J(e.Ia%400-1))&&t++;}return o(t,2);},"%w":function w(e){return e.Ga;},"%W":function W(e){return o(Math.floor((e.Ha+7-(e.Ga+6)%7)/7),2);},"%y":function y(e){return(e.Ia+1900).toString().substring(2);},"%Y":function Y(e){return e.Ia+1900;},"%z":function z(e){return(0<=(e=e.bb)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4);},"%Z":function Z(e){return e.fb;},"%%":function _(){return"%";}},r=r.replace(/%%/g,"\0\0"),l)r.includes(h)&&(r=r.replace(new RegExp(h,"g"),l[h](n)));return h=function(e){var t=Array(Z(e)+1);return q(e,t,0,t.length),t;}(r=r.replace(/\0\0/g,"%")),h.length>t?0:(x.set(h,e>>>0),h.length-1);}var ce=function ce(e){try{e();}catch(e){D(e);}};var de=0,fe=null,pe=0,ye=[],ge={},me={},we=0,be=null,ve=[];function xe(e){if(!C){if(0===de){var t=!1,r=!1;e(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!C&&(pe=e,t=!0,r)){de=2,ce(function(){return _Ne(fe);}),(typeof Browser==="undefined"?"undefined":_typeof(Browser))<"u"&&Browser.Oa.Va&&Browser.Oa.resume(),e=!1;try{var n=(0,Ee[me[I[fe+8>>>2>>>0]]])();}catch(t){n=t,e=!0;}var i=!1;if(!fe){var o=be;o&&(be=null,(e?o.reject:o.resolve)(n),i=!0);}if(e&&!i)throw n;}}),r=!0,t||(de=1,fe=function(){var e=Pe(65548),t=e+12;A[e>>>2>>>0]=t,A[e+4>>>2>>>0]=t+65536,t=ye[0];var r=ge[t];return void 0===r&&(r=we++,ge[t]=r,me[r]=t),I[e+8>>>2>>>0]=r,e;}(),(typeof Browser==="undefined"?"undefined":_typeof(Browser))<"u"&&Browser.Oa.Va&&Browser.Oa.pause(),ce(function(){return _Le(fe);}));}else 2===de?(de=0,ce(_Ue),$e(fe),fe=null,ve.forEach(function(e){if(!C)try{e();try{var _i$onExit;v=v=e=v,(_i$onExit=i.onExit)!==null&&_i$onExit!==void 0&&_i$onExit.call(i,e),C=!0,h(e,new V(e));}catch(e){e instanceof V||"unwind"==e||h(1,e);}}catch(e){e instanceof V||"unwind"==e||h(1,e);}})):D("invalid state: ".concat(de));return pe;}}var _e,Ie,Ae=[],Se=[],Te=function Te(e,t){if(!Ie){Ie=new WeakMap();var r=_e.length;if(Ie)for(var n=0;n<0+r;n++){var i=n,o=Ae[i];o||(i>=Ae.length&&(Ae.length=i+1),Ae[i]=o=_e.get(i)),(i=o)&&Ie.set(i,n);}}if(r=Ie.get(e)||0)return r;if(Se.length)r=Se.pop();else{try{_e.grow(1);}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e;}r=_e.length-1;}try{n=r,_e.set(n,e),Ae[n]=_e.get(n);}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},o={parameters:[],results:"v"==t[0]?[]:[i[t[0]]]};for(var a=1;a<t.length;++a)o.parameters.push(i[t[a]]);t=new n(o,e);}else{for(n=[1],i=t.slice(0,1),t=t.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96),128>(a=t.length)?n.push(a):n.push(a%128|128,a>>7),a=0;a<t.length;++a)n.push(o[t[a]]);"v"==i?n.push(0):n.push(1,o[i]),t=[0,97,115,109,1,0,0,0,1],128>(i=n.length)?t.push(i):t.push(i%128|128,i>>7),t.push.apply(t,n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f;}n=r,_e.set(n,t),Ae[n]=_e.get(n);}return Ie.set(e,r),r;},Ce={n:function n(e,t,r){return function(e){return xe(function(t){e().then(t);});}(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee152(){return _regeneratorRuntime().wrap(function _callee152$(_context155){while(1)switch(_context155.prev=_context155.next){case 0:_context155.next=2;return i.Xa(e,t,r);case 2:case"end":return _context155.stop();}},_callee152);})));},a:function a(e,t,r){throw new H(e>>>=0).Ra(t>>>0,r>>>0),e;},g:function g(){return 0;},M:function M(){},C:function C(){},E:function E(){},v:function v(){return 0;},K:function K(){},F:function F(){},J:function J(){},m:function m(){},D:function D(){},A:function A(){},L:function L(){},B:function B(){},N:function N(){return 1;},q:function q(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),I[r>>>2>>>0]=e.getUTCSeconds(),I[r+4>>>2>>>0]=e.getUTCMinutes(),I[r+8>>>2>>>0]=e.getUTCHours(),I[r+12>>>2>>>0]=e.getUTCDate(),I[r+16>>>2>>>0]=e.getUTCMonth(),I[r+20>>>2>>>0]=e.getUTCFullYear()-1900,I[r+24>>>2>>>0]=e.getUTCDay(),I[r+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0;},r:function r(e,t,_r324){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,_r324>>>=0,e=new Date(1e3*e),I[_r324>>>2>>>0]=e.getSeconds(),I[_r324+4>>>2>>>0]=e.getMinutes(),I[_r324+8>>>2>>>0]=e.getHours(),I[_r324+12>>>2>>>0]=e.getDate(),I[_r324+16>>>2>>>0]=e.getMonth(),I[_r324+20>>>2>>>0]=e.getFullYear()-1900,I[_r324+24>>>2>>>0]=e.getDay(),I[_r324+28>>>2>>>0]=(J(e.getFullYear())?Q:ee)[e.getMonth()]+e.getDate()-1|0,I[_r324+36>>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();I[_r324+32>>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t));},s:function s(e){e>>>=0;var t=new Date(I[e+20>>>2>>>0]+1900,I[e+16>>>2>>>0],I[e+12>>>2>>>0],I[e+8>>>2>>>0],I[e+4>>>2>>>0],I[e>>>2>>>0],0),r=I[e+32>>>2>>>0],n=t.getTimezoneOffset(),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),a=Math.min(o,i);return 0>r?I[e+32>>>2>>>0]=+(i!=o&&a==n):0<r!=(a==n)&&(i=Math.max(o,i),t.setTime(t.getTime()+6e4*((0<r?a:i)-n))),I[e+24>>>2>>>0]=t.getDay(),I[e+28>>>2>>>0]=(J(t.getFullYear())?Q:ee)[t.getMonth()]+t.getDate()-1|0,I[e>>>2>>>0]=t.getSeconds(),I[e+4>>>2>>>0]=t.getMinutes(),I[e+8>>>2>>>0]=t.getHours(),I[e+12>>>2>>>0]=t.getDate(),I[e+16>>>2>>>0]=t.getMonth(),I[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(I[_ke()>>>2>>>0]=61,e=-1):e/=1e3,_Re((G=e,1<=+Math.abs(G)?0<G?+Math.floor(G/4294967296)>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)),e>>>0;},o:function o(){return-52;},p:function p(){},y:function y(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT";}r>>>=0;var i=new Date().getFullYear(),o=new Date(i,0,1),a=new Date(i,6,1);i=o.getTimezoneOffset();var s=a.getTimezoneOffset();A[e>>>0>>>2>>>0]=60*Math.max(i,s),I[t>>>0>>>2>>>0]=+(i!=s),e=n(o),t=n(a),e=te(e),t=te(t),s<i?(A[r>>>2>>>0]=e,A[r+4>>>2>>>0]=t):(A[r>>>2>>>0]=t,A[r+4>>>2>>>0]=e);},e:function e(){D("");},b:function b(e,t,r){return e>>>=0,t=ne(t>>>0,r>>>0),z[e].apply(null,t);},j:function j(e,t,r){return e>>>=0,t=ne(t>>>0,r>>>0),z[e].apply(null,t);},h:function h(){return Date.now();},z:function z(){return 4294901760;},c:function c(){return performance.now();},I:function I(e,t,r){return t>>>=0,_3.copyWithin(e>>>0>>>0,t>>>0,t+(r>>>0)>>>0);},w:function w(e){e>>>=0;var t=_3.length;if(4294901760<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var i=Math;n=Math.max(e,n);e:{i=(i.min.call(i,4294901760,n+(65536-n%65536)%65536)-b.buffer.byteLength+65535)/65536;try{b.grow(i),E();var o=1;break e;}catch(_unused18){}o=void 0;}if(o)return!0;}return!1;},G:function G(e,t){e>>>=0,t>>>=0;var r=0;return oe().forEach(function(n,i){var o=t+r;for(i=A[e+4*i>>>2>>>0]=o,o=0;o<n.length;++o)x[i++>>>0>>>0]=n.charCodeAt(o);x[i>>>0>>>0]=0,r+=n.length+1;}),0;},H:function H(e,t){e>>>=0,t>>>=0;var r=oe();A[e>>>2>>>0]=r.length;var n=0;return r.forEach(function(e){return n+=e.length+1;}),A[t>>>2>>>0]=n,0;},f:function f(){return 52;},l:function l(){return 52;},t:function t(){return 70;},k:function k(e,t,r,n){t>>>=0,r>>>=0,n>>>=0;for(var i=0,o=0;o<r;o++){var a=A[t>>>2>>>0],s=A[t+4>>>2>>>0];t+=8;for(var u=0;u<s;u++){var l=_3[a+u>>>0],h=ae[e];0===l||10===l?((1===e?m:w)(K(h,0)),h.length=0):h.push(l);}i+=s;}return A[n>>>2>>>0]=i,0;},u:function u(e,t){return e>>>=0,_se(_3.subarray(e>>>0,e+(t>>>0)>>>0)),0;},x:he,d:function d(e,t,r,n){return he(e>>>0,t>>>0,r>>>0,n>>>0);},i:function i(e,t,r,n){var i=_e.length;e=new Uint8Array(_3.slice(e+t,e+r));try{var o,a=new WebAssembly.Module(e),s=new WebAssembly.Instance(a,{env:{memory:b}});for(o in s.exports)Te(s.exports[o]);return i<_e.length?i:n;}catch(e){return console.log(e),n;}}},Ee=function(){function e(e){return Ee=e.exports,Ee=function(){var e=Ee,t={};var _loop13=function _loop13(){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i118],2),r=_Object$entries2$_i[0],n=_Object$entries2$_i[1];t[r]="function"==typeof n?function(){ye.push(r);try{return n.apply(null,arguments);}finally{C||(ye.pop(),fe&&1===de&&0===ye.length&&(de=0,ce(_Fe),(typeof Fibers==="undefined"?"undefined":_typeof(Fibers))<"u"&&Fibers.ib()));}}:n;};for(var _i118=0,_Object$entries2=Object.entries(e);_i118<_Object$entries2.length;_i118++){_loop13();}return t;}(),Ee=function(){var e=Ee;e=Object.assign({},e);var t=function t(e){return function(){return e()>>>0;};},r=function r(e){return function(t){return e(t)>>>0;};};return e.ta=t(e.ta),e.ua=r(e.ua),e.ya=t(e.ya),e.Aa=r(e.Aa),e;}(),b=Ee.O,E(),_e=Ee.wa,k.unshift(Ee.P),0==--$&&(null!==R&&(clearInterval(R),R=null),B&&(e=B,B=null,e())),Ee;}var t={a:Ce};if($++,i.instantiateWasm)try{return i.instantiateWasm(t,e);}catch(e){w("Module.instantiateWasm callback failed with error: ".concat(e)),n(e);}return function(e,t){var r=M;return"function"!=typeof WebAssembly.instantiateStreaming||L(r)||F(r)||f||"function"!=typeof fetch?j(r,e,t):fetch(r,{credentials:"same-origin"}).then(function(n){return WebAssembly.instantiateStreaming(n,e).then(t,function(n){return w("wasm streaming compile failed: ".concat(n)),w("falling back to ArrayBuffer instantiation"),j(r,e,t);});});}(t,function(t){e(t.instance);})["catch"](n),{};}();i._OrtInit=function(e,t){return(i._OrtInit=Ee.Q)(e,t);},i._OrtGetLastError=function(e,t){return(i._OrtGetLastError=Ee.R)(e,t);},i._OrtCreateSessionOptions=function(e,t,r,n,o,a,s,u,l,h){return(i._OrtCreateSessionOptions=Ee.S)(e,t,r,n,o,a,s,u,l,h);},i._OrtAppendExecutionProvider=function(e,t){return(i._OrtAppendExecutionProvider=Ee.T)(e,t);},i._OrtAddFreeDimensionOverride=function(e,t,r){return(i._OrtAddFreeDimensionOverride=Ee.U)(e,t,r);},i._OrtAddSessionConfigEntry=function(e,t,r){return(i._OrtAddSessionConfigEntry=Ee.V)(e,t,r);},i._OrtReleaseSessionOptions=function(e){return(i._OrtReleaseSessionOptions=Ee.W)(e);},i._OrtCreateSession=function(e,t,r){return(i._OrtCreateSession=Ee.X)(e,t,r);},i._OrtReleaseSession=function(e){return(i._OrtReleaseSession=Ee.Y)(e);},i._OrtGetInputOutputCount=function(e,t,r){return(i._OrtGetInputOutputCount=Ee.Z)(e,t,r);},i._OrtGetInputName=function(e,t){return(i._OrtGetInputName=Ee._)(e,t);},i._OrtGetOutputName=function(e,t){return(i._OrtGetOutputName=Ee.$)(e,t);},i._OrtFree=function(e){return(i._OrtFree=Ee.aa)(e);},i._OrtCreateTensor=function(e,t,r,n,o,a){return(i._OrtCreateTensor=Ee.ba)(e,t,r,n,o,a);},i._OrtGetTensorData=function(e,t,r,n,o){return(i._OrtGetTensorData=Ee.ca)(e,t,r,n,o);},i._OrtReleaseTensor=function(e){return(i._OrtReleaseTensor=Ee.da)(e);},i._OrtCreateRunOptions=function(e,t,r,n){return(i._OrtCreateRunOptions=Ee.ea)(e,t,r,n);},i._OrtAddRunConfigEntry=function(e,t,r){return(i._OrtAddRunConfigEntry=Ee.fa)(e,t,r);},i._OrtReleaseRunOptions=function(e){return(i._OrtReleaseRunOptions=Ee.ga)(e);},i._OrtCreateBinding=function(e){return(i._OrtCreateBinding=Ee.ha)(e);},i._OrtBindInput=function(e,t,r){return(i._OrtBindInput=Ee.ia)(e,t,r);},i._OrtBindOutput=function(e,t,r,n){return(i._OrtBindOutput=Ee.ja)(e,t,r,n);},i._OrtClearBoundOutputs=function(e){return(i._OrtClearBoundOutputs=Ee.ka)(e);},i._OrtReleaseBinding=function(e){return(i._OrtReleaseBinding=Ee.la)(e);},i._OrtRunWithBinding=function(e,t,r,n,o){return(i._OrtRunWithBinding=Ee.ma)(e,t,r,n,o);},i._OrtRun=function(e,t,r,n,o,a,s,u){return(i._OrtRun=Ee.na)(e,t,r,n,o,a,s,u);},i._OrtEndProfiling=function(e){return(i._OrtEndProfiling=Ee.oa)(e);},i._OrtConfigure=function(e,t){return(i._OrtConfigure=Ee.pa)(e,t);},i._OrtAuth=function(e,t){return(i._OrtAuth=Ee.qa)(e,t);},i._JsepOutput=function(e,t,r){return(i._JsepOutput=Ee.ra)(e,t,r);},i._JsepGetNodeName=function(e){return(i._JsepGetNodeName=Ee.sa)(e);};var Oe,_ke=function ke(){return(_ke=Ee.ta)();},Pe=i._malloc=function(e){return(Pe=i._malloc=Ee.ua)(e);},$e=i._free=function(e){return($e=i._free=Ee.va)(e);},_Re=function Re(e){return(_Re=Ee.xa)(e);},_Be=function Be(){return(_Be=Ee.ya)();},_De=function De(e){return(_De=Ee.za)(e);},_Me=function Me(e){return(_Me=Ee.Aa)(e);},_Le=function Le(e){return(_Le=Ee.Ca)(e);},_Fe=function Fe(){return(_Fe=Ee.Da)();},_Ne=function Ne(e){return(_Ne=Ee.Ea)(e);},_Ue=function Ue(){return(_Ue=Ee.Fa)();};function je(){if(!(0<$)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;){var e=i.preRun.shift();O.unshift(e);}for(;0<O.length;)O.shift()(i);if(!(0<$||Oe||(Oe=!0,i.calledRun=!0,C))){for(;0<k.length;)k.shift()(i);for(r(i);0<P.length;)P.shift()(i);}}}return i.___start_em_js=910124,i.___stop_em_js=910897,i.stackAlloc=_Me,i.stackSave=_Be,i.stackRestore=_De,i.addFunction=Te,i.UTF8ToString=X,i.stringToUTF8=function(e,t,r){return q(e,_3,t,r);},i.lengthBytesUTF8=Z,B=function e(){Oe||je(),Oe||(B=e);},je(),t.ready;};}();"object"==_typeof(e)&&"object"==_typeof(t)?t.exports=r:"function"==typeof define&&define.amd&&define([],function(){return r;});}),pd=Lc(function(){}),yd=Lc(function(){}),gd={};Fc(gd,{cpus:function cpus(){return md;}});var md,wd,bd,vd,xd,_d,Id,Ad,Sd,Td,Cd,Ed,Od,_kd,Pd,$d,Rd,Bd,Dd,Md,Ld,Fd,Nd,Ud,jd,Gd,zd,Vd,Hd,Wd,Yd,Kd,Xd,Zd,qd,Jd,Qd,ef,tf,rf,nf,of,af,sf,uf,lf,hf,cf,df,ff,pf,yf,gf,mf,wf,bf,vf,xf,_f,If,Af,Sf,Tf,Cf,Ef,Of,kf,Pf,$f,Rf,Bf,Df,Mf,Lf,Ff,Nf,Uf,jf,Gf,zf,Vf,Hf,Wf,Yf,Kf,Xf,Zf,qf,Jf,Qf,ep,tp,rp,np,ip,op,ap,sp,up,lp,hp,cp,dp,fp,pp,yp,gp,mp,wp,bp,vp,xp,_p,Ip,Ap,Sp,Tp,Cp,Ep,Op,kp,Pp,$p,Rp,Bp,Dp,Mp,Lp,Fp,Np,Up,jp,Gp,zp,Vp,Hp,Wp,Yp,Kp,Xp,Zp,qp,Jp,Qp,ey,ty,ry,ny,iy,oy,ay,sy,uy,ly,hy,cy,dy,fy,py,yy,gy,my,wy,by,vy,xy,_y,Iy,Ay,Sy,Ty,Cy,Ey,Oy,ky,Py,$y,Ry,By,Dy,My,Ly,Fy,Ny,Uy,jy,Gy,zy,Vy,Hy,Wy,Yy,Ky,Xy,Zy,qy,Jy,Qy,eg,tg,rg,ng,ig,og,ag,sg,ug,lg,hg,cg,dg,fg,pg,yg,gg,mg,wg,bg,vg,xg,_g,Ig,Ag,Sg,Tg,Cg,Eg,Og,kg,Pg,$g,Rg,Bg,Dg,Mg,Lg,Fg,Ng,Ug,jg,Gg,zg,Vg,Hg,Wg,Yg,Kg,Xg,Zg,qg,Jg,Qg,em,tm,rm,nm,im,om,am,sm,um,lm,hm,cm,dm,fm,pm,ym,gm,mm,wm,bm,vm,xm,_m,Im,Am,Sm,Tm,Cm,Em,Om,km,Pm,$m,Rm,Bm,Dm,Mm,Lm,Fm,Nm,Um,jm,Gm,zm,Vm,Hm,Wm,Ym,Km,Xm,Zm,qm,Jm,Qm,ew,tw,rw,nw,iw,ow,aw,sw,uw,lw,hw,cw,dw,fw,pw,yw,gw,mw,ww,bw,vw,xw,_w,Iw,Aw,Sw,Tw,Cw,Ew,Ow,kw,Pw,$w,Rw,Bw,Dw,Mw,Lw,Fw,Nw,Uw,jw,Gw,zw,Vw,Hw,Ww,Yw,Kw,Xw,Zw,qw,Jw,Qw,eb,tb,rb,nb,ib,ob,ab,sb,ub,lb=Mc(function(){md=void 0;}),hb=Lc(function(e,t){var r=function(){var e=(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript?document.currentScript.src:void 0;return(typeof __filename==="undefined"?"undefined":_typeof(__filename))<"u"&&(e=e||__filename),function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};function r(){return O.buffer!=$.buffer&&N(),$;}function n(){return O.buffer!=$.buffer&&N(),R;}function i(){return O.buffer!=$.buffer&&N(),B;}function o(){return O.buffer!=$.buffer&&N(),D;}function a(){return O.buffer!=$.buffer&&N(),M;}function s(){return O.buffer!=$.buffer&&N(),L;}var u,l,h=t;h.ready=new Promise(function(e,t){u=e,l=t;}),h.mountExternalData=function(e,t){(h.ib||(h.ib=new Map())).set(e,t);},h.unmountExternalData=function(){delete h.ib;},h.jsepInit=function(e,t,r,n,i,o,a,s){h.Rb=e,h.Bb=t,h.Db=r,h.pb=n,h.Cb=i,h.Ua=o,h.Eb=a,h.Fb=s,t=function t(e,_t343,r){return function(){var _t341,_t342;for(var _len12=arguments.length,n=new Array(_len12),_key12=0;_key12<_len12;_key12++){n[_key12]=arguments[_key12];}var i=dt,o=(_t341=_t343)===null||_t341===void 0?void 0:_t341();n=e.apply(void 0,_toConsumableArray(n));var a=(_t342=_t343)===null||_t342===void 0?void 0:_t342();return o!==a&&(e=a,r(o),_t343=r=null),dt!=i?new Promise(function(e,t){wt={resolve:e,reject:t};}):n;};},r=function r(t){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee153(){var _n156,_i119,_o84,_e838,_args156=arguments;return _regeneratorRuntime().wrap(function _callee153$(_context156){while(1)switch(_context156.prev=_context156.next){case 0:_context156.prev=0;if(!h.hb){_context156.next=3;break;}throw Error("Session already started");case 3:_n156=h.hb={Hb:_args156.length<=0?undefined:_args156[0],errors:[]};_context156.next=6;return t.apply(void 0,_args156);case 6:_i119=_context156.sent;if(!(h.hb!==_n156)){_context156.next=9;break;}throw Error("Session mismatch");case 9:e.flush();_o84=_n156.errors;if(!(0<_o84.length)){_context156.next=17;break;}_context156.next=14;return Promise.all(_o84);case 14:_e838=_context156.sent;if(!(_e838=_e838.filter(function(e){return e;}),0<_e838.length)){_context156.next=17;break;}throw Error(_e838.join("\n"));case 17:return _context156.abrupt("return",_i119);case 18:_context156.prev=18;h.hb=null;return _context156.finish(18);case 21:case"end":return _context156.stop();}},_callee153,null,[[0,,18,21]]);}));},h._OrtRun=r(t(h._OrtRun,function(){return h._OrtRun;},function(e){return h._OrtRun=e;})),h._OrtRunWithBinding=r(t(h._OrtRunWithBinding,function(){return h._OrtRunWithBinding;},function(e){return h._OrtRunWithBinding=e;})),h._OrtBindInput=t(h._OrtBindInput,function(){return h._OrtBindInput;},function(e){return h._OrtBindInput=e;}),h.jsepRegisterBuffer=function(t,r,n,i){return e.registerBuffer(t,r,n,i);},h.jsepUnregisterBuffers=function(t){e.unregisterBuffers(t);},h.jsepGetBuffer=function(t){return e.getBuffer(t);},h.jsepCreateDownloader=function(t,r,n){return e.createDownloader(t,r,n);};};var c,d,f,p=Object.assign({},h),y="./this.program",g=function g(e,t){throw t;},m="object"==(typeof window==="undefined"?"undefined":_typeof(window)),w="function"==typeof importScripts,b="object"==_typeof(Oc)&&"object"==_typeof(Oc.versions)&&"string"==typeof Oc.versions.node,v=h.ENVIRONMENT_IS_PTHREAD||!1,x="";function _(e){return h.locateFile?h.locateFile(e,x):x+e;}if(b){var I=(ld(),Nc(od)),A=(dd(),Nc(hd));var _e839;x=w?A.dirname(x)+"/":__dirname+"/",c=function c(e,t){return e=q(e)?new URL(e):A.normalize(e),I.readFileSync(e,t?void 0:"utf8");},f=function f(e){return(e=c(e,!0)).buffer||(e=new Uint8Array(e)),e;},d=function d(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!0;e=q(e)?new URL(e):A.normalize(e),I.readFile(e,n?void 0:"utf8",function(e,i){e?r(e):t(n?i.buffer:i);});},!h.thisProgram&&1<Oc.argv.length&&(y=Oc.argv[1].replace(/\\/g,"/")),Oc.argv.slice(2),g=function g(e,t){throw Oc.exitCode=e,t;},h.inspect=function(){return"[Emscripten Module object]";};try{_e839=pd();}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e;}global.Worker=_e839.Worker;}else(m||w)&&(w?x=self.location.href:(typeof document==="undefined"?"undefined":_typeof(document))<"u"&&document.currentScript&&(x=document.currentScript.src),_typeof(e)<"u"&&e&&(x=e),x=0!==x.indexOf("blob:")?x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):"",b||(c=function c(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.send(null),t.responseText;},w&&(f=function f(e){var t=new XMLHttpRequest();return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response);}),d=function d(e,t,r){var n=new XMLHttpRequest();n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r();},n.onerror=r,n.send(null);}));b&&(typeof performance==="undefined"?"undefined":_typeof(performance))>"u"&&(global.performance=yd().performance);var S=console.log.bind(console),T=console.error.bind(console);b&&(S=function S(){for(var _len13=arguments.length,e=new Array(_len13),_key13=0;_key13<_len13;_key13++){e[_key13]=arguments[_key13];}return I.writeSync(1,e.join(" ")+"\n");},T=function T(){for(var _len14=arguments.length,e=new Array(_len14),_key14=0;_key14<_len14;_key14++){e[_key14]=arguments[_key14];}return I.writeSync(2,e.join(" ")+"\n");});var C=S,E=T;Object.assign(h,p),p=null,"object"!=(typeof WebAssembly==="undefined"?"undefined":_typeof(WebAssembly))&&K("no native wasm support detected");var O,k,P,$,R,B,D,M,L,F=!1;function N(){var e=O.buffer;h.HEAP8=$=new Int8Array(e),h.HEAP16=new Int16Array(e),h.HEAPU8=R=new Uint8Array(e),h.HEAPU16=new Uint16Array(e),h.HEAP32=B=new Int32Array(e),h.HEAPU32=D=new Uint32Array(e),h.HEAPF32=M=new Float32Array(e),h.HEAPF64=L=new Float64Array(e);}var U=16777216;if(v)O=h.wasmMemory;else if(h.wasmMemory)O=h.wasmMemory;else if(!((O=new WebAssembly.Memory({initial:U/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw E("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&E("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");N(),U=O.buffer.byteLength;var j=[],G=[],z=[],V=0,H=null,W=null;function Y(){if(0==--V&&(null!==H&&(clearInterval(H),H=null),W)){var e=W;W=null,e();}}function K(e){throw E(e="Aborted("+e+")"),F=!0,P=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),l(e),e;}var X,Z=function Z(e){return e.startsWith("data:application/octet-stream;base64,");},q=function q(e){return e.startsWith("file://");};function J(e){if(f)return f(e);throw"both async and sync fetching of the wasm failed";}function Q(e,t,r){return function(e){if(m||w){if("function"==typeof fetch&&!q(e))return fetch(e,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer();})["catch"](function(){return J(e);});if(d)return new Promise(function(t,r){d(e,function(e){return t(new Uint8Array(e));},r);});}return Promise.resolve().then(function(){return J(e);});}(e).then(function(e){return WebAssembly.instantiate(e,t);}).then(function(e){return e;}).then(r,function(e){E("failed to asynchronously prepare wasm: ".concat(e)),K(e);});}Z(X="ort-wasm-simd-threaded.wasm")||(X=_(X));var ee,te={902596:function _(e,t,r,i){if(_typeof(h)>"u"||!h.ib)return 1;if((e=ue(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=h.ib.get(e)))return 2;if(i>>>=0,(t>>>=0)+(r>>>=0)>e.byteLength)return 3;try{return n().set(e.subarray(t,t+r),i>>>0),0;}catch(_unused19){return 4;}},903097:function _(e){return h.Bb(e);},903130:function _(e){return h.Db(e);},903162:function _(e,t,r){h.pb(e,t,r,!0);},903201:function _(e,t,r){h.pb(e,t,r);},903234:function _(e){h.Ua("Abs",e,void 0);},903285:function _(e){h.Ua("Neg",e,void 0);},903336:function _(e){h.Ua("Floor",e,void 0);},903389:function _(e){h.Ua("Ceil",e,void 0);},903441:function _(e){h.Ua("Reciprocal",e,void 0);},903499:function _(e){h.Ua("Sqrt",e,void 0);},903551:function _(e){h.Ua("Exp",e,void 0);},903602:function _(e){h.Ua("Erf",e,void 0);},903653:function _(e){h.Ua("Sigmoid",e,void 0);},903708:function _(e){h.Ua("Log",e,void 0);},903759:function _(e){h.Ua("Sin",e,void 0);},903810:function _(e){h.Ua("Cos",e,void 0);},903861:function _(e){h.Ua("Tan",e,void 0);},903912:function _(e){h.Ua("Asin",e,void 0);},903964:function _(e){h.Ua("Acos",e,void 0);},904016:function _(e){h.Ua("Atan",e,void 0);},904068:function _(e){h.Ua("Sinh",e,void 0);},904120:function _(e){h.Ua("Cosh",e,void 0);},904172:function _(e){h.Ua("Asinh",e,void 0);},904225:function _(e){h.Ua("Acosh",e,void 0);},904278:function _(e){h.Ua("Atanh",e,void 0);},904331:function _(e){h.Ua("Tanh",e,void 0);},904383:function _(e){h.Ua("Not",e,void 0);},904434:function _(e,t,r){h.Ua("Clip",e,{min:t,max:r});},904503:function _(e){h.Ua("Clip",e,void 0);},904555:function _(e,t){h.Ua("Elu",e,{alpha:t});},904613:function _(e){h.Ua("Relu",e,void 0);},904665:function _(e,t){h.Ua("LeakyRelu",e,{alpha:t});},904729:function _(e,t){h.Ua("ThresholdedRelu",e,{alpha:t});},904799:function _(e,t){h.Ua("Cast",e,{to:t});},904857:function _(e){h.Ua("Add",e,void 0);},904908:function _(e){h.Ua("Sub",e,void 0);},904959:function _(e){h.Ua("Mul",e,void 0);},905010:function _(e){h.Ua("Div",e,void 0);},905061:function _(e){h.Ua("Pow",e,void 0);},905112:function _(e){h.Ua("Equal",e,void 0);},905165:function _(e){h.Ua("Greater",e,void 0);},905220:function _(e){h.Ua("GreaterOrEqual",e,void 0);},905282:function _(e){h.Ua("Less",e,void 0);},905334:function _(e){h.Ua("LessOrEqual",e,void 0);},905393:function _(e,t,r,n,o){h.Ua("ReduceMean",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},905552:function _(e,t,r,n,o){h.Ua("ReduceMax",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},905710:function _(e,t,r,n,o){h.Ua("ReduceMin",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},905868:function _(e,t,r,n,o){h.Ua("ReduceProd",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},906027:function _(e,t,r,n,o){h.Ua("ReduceSum",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},906185:function _(e,t,r,n,o){h.Ua("ReduceL1",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},906342:function _(e,t,r,n,o){h.Ua("ReduceL2",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},906499:function _(e,t,r,n,o){h.Ua("ReduceLogSum",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},906660:function _(e,t,r,n,o){h.Ua("ReduceSumSquare",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},906824:function _(e,t,r,n,o){h.Ua("ReduceLogSumExp",e,{keepDims:!!t,noopWithEmptyAxes:!!r,axes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},906988:function _(e){h.Ua("Where",e,void 0);},907041:function _(e,t,r){h.Ua("Transpose",e,{perm:t?Array.from(i().subarray(t>>>0,r>>>0)):[]});},907149:function _(e,t,n,o,a,s,u,l,c,d,f,p,y,g,m){h.Ua("ConvTranspose",e,{format:c?"NHWC":"NCHW",autoPad:t,dilations:[n],group:o,kernel_shape:[a],pads:[s,u],strides:[l],wIsConst:function wIsConst(){return!!r()[d>>>0];},outputPadding:f?Array.from(i().subarray(f>>>0,p>>>0)):[],outputShape:y?Array.from(i().subarray(y>>>0,g>>>0)):[],activation:ue(m)});},907551:function _(e,t,n,o,a,s,u,l,c,d,f,p,y,g){h.Ua("ConvTranspose",e,{format:l?"NHWC":"NCHW",autoPad:t,dilations:Array.from(i().subarray(n>>>0,2+(n>>>0)>>>0)),group:o,kernelShape:Array.from(i().subarray(a>>>0,2+(a>>>0)>>>0)),pads:Array.from(i().subarray(s>>>0,4+(s>>>0)>>>0)),strides:Array.from(i().subarray(u>>>0,2+(u>>>0)>>>0)),wIsConst:function wIsConst(){return!!r()[c>>>0];},outputPadding:d?Array.from(i().subarray(d>>>0,f>>>0)):[],outputShape:p?Array.from(i().subarray(p>>>0,y>>>0)):[],activation:ue(g)});},908116:function _(e,t,n,o,a,s,u,l,c,d,f,p,y,g,m){h.Ua("ConvTranspose",e,{format:c?"NHWC":"NCHW",autoPad:t,dilations:[n],group:o,kernel_shape:[a],pads:[s,u],strides:[l],wIsConst:function wIsConst(){return!!r()[d>>>0];},outputPadding:f?Array.from(i().subarray(f>>>0,p>>>0)):[],outputShape:y?Array.from(i().subarray(y>>>0,g>>>0)):[],activation:ue(m)});},908518:function _(e,t,n,o,a,s,u,l,c,d,f,p,y,g){h.Ua("ConvTranspose",e,{format:l?"NHWC":"NCHW",autoPad:t,dilations:Array.from(i().subarray(n>>>0,2+(n>>>0)>>>0)),group:o,kernelShape:Array.from(i().subarray(a>>>0,2+(a>>>0)>>>0)),pads:Array.from(i().subarray(s>>>0,4+(s>>>0)>>>0)),strides:Array.from(i().subarray(u>>>0,2+(u>>>0)>>>0)),wIsConst:function wIsConst(){return!!r()[c>>>0];},outputPadding:d?Array.from(i().subarray(d>>>0,f>>>0)):[],outputShape:p?Array.from(i().subarray(p>>>0,y>>>0)):[],activation:ue(g)});},909083:function _(e,t){h.Ua("GlobalAveragePool",e,{format:t?"NHWC":"NCHW"});},909174:function _(e,t,r,n,i,o,a,s,u,l,c,d,f,p,y,g){h.Ua("AveragePool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:i,dilations:[o,a],kernel_shape:[s,u],pads:[l,c,d,f],strides:[p,y]});},909458:function _(e,t){h.Ua("GlobalAveragePool",e,{format:t?"NHWC":"NCHW"});},909549:function _(e,t,r,n,i,o,a,s,u,l,c,d,f,p,y,g){h.Ua("AveragePool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:i,dilations:[o,a],kernel_shape:[s,u],pads:[l,c,d,f],strides:[p,y]});},909833:function _(e,t){h.Ua("GlobalMaxPool",e,{format:t?"NHWC":"NCHW"});},909920:function _(e,t,r,n,i,o,a,s,u,l,c,d,f,p,y,g){h.Ua("MaxPool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:i,dilations:[o,a],kernel_shape:[s,u],pads:[l,c,d,f],strides:[p,y]});},910200:function _(e,t){h.Ua("GlobalMaxPool",e,{format:t?"NHWC":"NCHW"});},910287:function _(e,t,r,n,i,o,a,s,u,l,c,d,f,p,y,g){h.Ua("MaxPool",e,{format:g?"NHWC":"NCHW",auto_pad:t,ceil_mode:r,count_include_pad:n,storage_order:i,dilations:[o,a],kernel_shape:[s,u],pads:[l,c,d,f],strides:[p,y]});},910567:function _(e,t,r,n,i){h.Ua("Gemm",e,{alpha:t,beta:r,transA:n,transB:i});},910671:function _(e){h.Ua("MatMul",e,void 0);},910725:function _(e,t,r,n){h.Ua("ArgMax",e,{keepDims:!!t,selectLastIndex:!!r,axis:n});},910833:function _(e,t,r,n){h.Ua("ArgMin",e,{keepDims:!!t,selectLastIndex:!!r,axis:n});},910941:function _(e,t){h.Ua("Softmax",e,{axis:t});},911004:function _(e,t){h.Ua("Concat",e,{axis:t});},911064:function _(e,t,r,n,o){h.Ua("Split",e,{axis:t,numOutputs:r,splitSizes:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},911204:function _(e){h.Ua("Expand",e,void 0);},911258:function _(e,t){h.Ua("Gather",e,{axis:Number(t)});},911329:function _(e,t){h.Ua("GatherElements",e,{axis:Number(t)});},911408:function _(e,t,r,n,o,a,s,u,l,c,d){h.Ua("Resize",e,{antialias:t,axes:r?Array.from(i().subarray(r>>>0,n>>>0)):[],coordinateTransformMode:ue(o),cubicCoeffA:a,excludeOutside:s,extrapolationValue:u,keepAspectRatioPolicy:ue(l),mode:ue(c),nearestMode:ue(d)});},911754:function _(e,t,r,n,o,a,s){h.Ua("Slice",e,{starts:t?Array.from(i().subarray(t>>>0,r>>>0)):[],ends:n?Array.from(i().subarray(n>>>0,o>>>0)):[],axes:a?Array.from(i().subarray(a>>>0,s>>>0)):[]});},911970:function _(e){h.Ua("Tile",e,void 0);},912022:function _(e,t,r){h.Ua("LayerNormalization",e,{axis:Number(t),epsilon:Number(r)});},912129:function _(e,t,r){h.Ua("InstanceNormalization",e,{epsilon:t,format:r?"NHWC":"NCHW"});},912243:function _(e,t,r){h.Ua("InstanceNormalization",e,{epsilon:t,format:r?"NHWC":"NCHW"});},912357:function _(e){h.Ua("Range",e,void 0);},912410:function _(e,t){h.Ua("Einsum",e,{equation:ue(t)});},912491:function _(e,t,r,n,o){h.Ua("Pad",e,{mode:t,value:r,pads:n?Array.from(i().subarray(n>>>0,o>>>0)):[]});},912618:function _(e,t,r,n,i,o){h.Ua("BatchNormalization",e,{epsilon:t,momentum:r,spatial:!!i,trainingMode:!!n,format:o?"NHWC":"NCHW"});},912787:function _(e,t,r,n,i,o){h.Ua("BatchNormalization",e,{epsilon:t,momentum:r,spatial:!!i,trainingMode:!!n,format:o?"NHWC":"NCHW"});},912956:function _(e,t,r){h.Ua("CumSum",e,{exclusive:Number(t),reverse:Number(r)});},913053:function _(e,t,r,n,o,a,s,u,l){h.Ua("Attention",e,{numHeads:t,isUnidirectional:r,maskFilterValue:n,scale:o,doRotary:a,qkvHiddenSizes:s?Array.from(i().subarray(Number(u)>>>0,Number(u)+s>>>0)):[],pastPresentShareBuffer:!!l});},913325:function _(e){h.Ua("Gelu",e,void 0);},913377:function _(e,t,r,n,i,o){h.Ua("MultiHeadAttention",e,{numHeads:t,isUnidirectional:r,maskFilterValue:n,scale:i,doRotary:o});},913536:function _(e){h.Ua("BiasAdd",e,void 0);},913591:function _(e){h.Ua("BiasSplitGelu",e,void 0);},913652:function _(e,t){h.Ua("SkipLayerNormalization",e,{epsilon:t});},913733:function _(e,t,n,o,s,u,l,c,d,f,p,y,g){h.Ua("Conv",e,{format:d?"NHWC":"NCHW",auto_pad:t,dilations:[n],group:o,kernel_shape:[s],pads:u?Array.from(i().subarray(u>>>0,l>>>0)):[],strides:[c],w_is_const:function w_is_const(){return!!r()[f>>>0];},activation:ue(p),activation_params:y?Array.from(a().subarray(y>>>0,g>>>0)):[]});},914103:function _(e,t,n,o,s,u,l,c,d,f,p,y,g,m,w,b){h.Ua("Conv",e,{format:y?"NHWC":"NCHW",auto_pad:t,dilations:[n,o],group:s,kernel_shape:[u,l],pads:c?Array.from(i().subarray(c>>>0,d>>>0)):[],strides:[f,p],w_is_const:function w_is_const(){return!!r()[g>>>0];},activation:ue(m),activation_params:w?Array.from(a().subarray(w>>>0,b>>>0)):[]});},914494:function _(e){h.Eb(e);},914528:function _(e,t){return h.Fb(e,t,h.hb.Hb,h.hb.errors);}};function re(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e;}var ne=function ne(e){e.terminate(),e.onmessage=function(){};},ie=function ie(e){0==ge.cb.length&&(ye(),ge.qb(ge.cb[0]));var t=ge.cb.pop();if(!t)return 6;ge.eb.push(t),ge.$a[e.bb]=t,t.bb=e.bb;var r={cmd:"run",start_routine:e.Ib,arg:e.xb,pthread_ptr:e.bb};return b&&t.unref(),t.postMessage(r,e.Ob),0;},oe=0,ae=(typeof TextDecoder==="undefined"?"undefined":_typeof(TextDecoder))<"u"?new TextDecoder("utf8"):void 0,se=function se(e,t,r){var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&ae)return ae.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&e[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i));}}else n+=String.fromCharCode(i);}return n;},ue=function ue(e,t){return(e>>>=0)?se(n(),e,t):"";},le=function le(e){var t=_jt();return e=e(),_Gt(t),e;};function he(e,t){var r=arguments.length-2,n=arguments;return le(function(){for(var i=_zt(8*r),o=i>>>3,a=0;a<r;a++){var u=n[2+a];s()[o+a>>>0]=u;}return _Dt(e,r,i,t);});}function ce(e){var _h$onExit;if(v)return he(0,1,e);P=e,0<oe||(ge.Jb(),(_h$onExit=h.onExit)!==null&&_h$onExit!==void 0&&_h$onExit.call(h,e),F=!0),g(e,new re(e));}var de=function de(e){if(P=e,v)throw we(e),"unwind";ce(e);},fe=function fe(e){e instanceof re||"unwind"==e||g(1,e);};function pe(){for(var e=h.numThreads;e--;)ye();j.unshift(function(){V++,function(e){v?e():Promise.all(ge.cb.map(ge.qb)).then(e);}(function(){return Y();});});}function ye(){var e=_("ort-wasm-simd-threaded.worker.js");e=new Worker(e),ge.cb.push(e);}var ge={cb:[],eb:[],ub:[],$a:{},mb:function mb(){v?(ge.receiveObjectTransfer=ge.Gb,ge.threadInitTLS=ge.tb,ge.setExitStatus=ge.sb):pe();},sb:function sb(e){return P=e;},Sb:["$terminateWorker"],Jb:function Jb(){var _iterator62=_createForOfIteratorHelper(ge.eb),_step62;try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var e=_step62.value;ne(e);}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}var _iterator63=_createForOfIteratorHelper(ge.cb),_step63;try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){e=_step63.value;ne(e);}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}ge.cb=[],ge.eb=[],ge.$a=[];},rb:function rb(e){var t=e.bb;delete ge.$a[t],ge.cb.push(e),ge.eb.splice(ge.eb.indexOf(e),1),e.bb=0,_Mt(t);},Gb:function Gb(){},tb:function tb(){ge.ub.forEach(function(e){return e();});},qb:function qb(t){return new Promise(function(r){t.onmessage=function(e){var n=(e=e.data).cmd;if(e.targetThread&&e.targetThread!=kt()){var i=ge.$a[e.targetThread];i?i.postMessage(e,e.transferList):E("Internal error! Worker sent a message \"".concat(n,"\" to target pthread ").concat(e.targetThread,", but that thread no longer exists!"));}else"checkMailbox"===n?Ue():"spawnThread"===n?ie(e):"cleanupThread"===n?ge.rb(ge.$a[e.thread]):"killThread"===n?(e=e.thread,n=ge.$a[e],delete ge.$a[e],ne(n),_Mt(e),ge.eb.splice(ge.eb.indexOf(n),1),n.bb=0):"cancelThread"===n?ge.$a[e.thread].postMessage({cmd:"cancel"}):"loaded"===n?(t.loaded=!0,b&&!t.bb&&t.unref(),r(t)):"alert"===n?alert("Thread ".concat(e.threadId,": ").concat(e.text)):"setimmediate"===e.target?t.postMessage(e):"callHandler"===n?h[e.handler].apply(h,_toConsumableArray(e.args)):n&&E("worker sent an unknown command ".concat(n));},t.onerror=function(e){throw E("worker sent an error! ".concat(e.filename,":").concat(e.lineno,": ").concat(e.message)),e;},b&&(t.on("message",function(e){return t.onmessage({data:e});}),t.on("error",function(e){return t.onerror(e);}));var n,i=[];for(var _i120=0,_arr2=["onExit"];_i120<_arr2.length;_i120++){n=_arr2[_i120];h.hasOwnProperty(n)&&i.push(n);}t.postMessage({cmd:"load",handlers:i,urlOrBlob:h.mainScriptUrlOrBlob||e,wasmMemory:O,wasmModule:k});});}};h.PThread=ge;var me=function me(e){for(;0<e.length;)e.shift()(h);};function we(e){if(v)return he(1,0,e);de(e);}function be(e){this.lb=e-24,this.yb=function(e){o()[this.lb+4>>>2>>>0]=e;},this.wb=function(e){o()[this.lb+8>>>2>>>0]=e;},this.mb=function(e,t){this.vb(),this.yb(e),this.wb(t);},this.vb=function(){o()[this.lb+16>>>2>>>0]=0;};}h.establishStackSpace=function(){var e=kt(),t=o()[e+52>>>2>>>0];e=o()[e+56>>>2>>>0],_Ut(t,t-e),_Gt(t);},h.invokeEntryPoint=function(e,t){e=Vt.apply(null,[e,t]),0<oe?ge.sb(e):Lt(e);};function ve(e,t,r,n){return v?he(2,1,e,t,r,n):xe(e,t,r,n);}function xe(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,(typeof SharedArrayBuffer==="undefined"?"undefined":_typeof(SharedArrayBuffer))>"u")return E("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var i=[];return v&&0===i.length?ve(e,t,r,n):(e={Ib:r,bb:e,xb:n,Ob:i},v?(e.Qb="spawnThread",postMessage(e,i),0):ie(e));}function _e(e,t,r){return v?he(3,1,e,t,r):0;}function Ie(e,t){if(v)return he(4,1,e,t);}var Ae=function Ae(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3;}return t;},Se=function Se(e,t,r,n){if(!(0<n))return 0;var i=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o);if(127>=a){if(r>=n)break;t[r++>>>0]=a;}else{if(2047>=a){if(r+1>=n)break;t[r++>>>0]=192|a>>6;}else{if(65535>=a){if(r+2>=n)break;t[r++>>>0]=224|a>>12;}else{if(r+3>=n)break;t[r++>>>0]=240|a>>18,t[r++>>>0]=128|a>>12&63;}t[r++>>>0]=128|a>>6&63;}t[r++>>>0]=128|63&a;}}return t[r>>>0]=0,r-i;},Te=function Te(e,t,r){return Se(e,n(),t,r);};function Ce(e,t){if(v)return he(5,1,e,t);}function Ee(e,t,r){if(v)return he(6,1,e,t,r);}function Oe(e,t,r){return v?he(7,1,e,t,r):0;}function ke(e,t){if(v)return he(8,1,e,t);}function Pe(e,t,r){if(v)return he(9,1,e,t,r);}function $e(e,t,r,n){if(v)return he(10,1,e,t,r,n);}function Re(e,t,r,n){if(v)return he(11,1,e,t,r,n);}function Be(e,t,r,n){if(v)return he(12,1,e,t,r,n);}function De(e){if(v)return he(13,1,e);}function Me(e,t){if(v)return he(14,1,e,t);}function Le(e,t,r){if(v)return he(15,1,e,t,r);}var Fe=function Fe(){if(!(0<oe))try{v?Lt(P):de(P);}catch(e){fe(e);}};function Ne(e){e>>>=0,"function"==typeof Atomics.Pb&&(Atomics.Pb(i(),e>>>2,e).value.then(Ue),e+=128,Atomics.store(i(),e>>>2,1));}h.__emscripten_thread_mailbox_await=Ne;var Ue=function Ue(){var e=kt();if(e&&(Ne(e),!F))try{_Ft(),Fe();}catch(e){fe(e);}};h.checkMailbox=Ue;var je=[],Ge=function Ge(e){return e%4==0&&(e%100!=0||e%400==0);},ze=[0,31,60,91,121,152,182,213,244,274,305,335],Ve=[0,31,59,90,120,151,181,212,243,273,304,334];function He(e,t,r,n,i,o,a,s){return v?he(16,1,e,t,r,n,i,o,a,s):-52;}function We(e,t,r,n,i,o,a){if(v)return he(17,1,e,t,r,n,i,o,a);}var Ye,Ke=function Ke(e){var t=Ae(e)+1,r=Pt(t);return r&&Te(e,r,t),r;},Xe=[],Ze=function Ze(e,t){Xe.length=0;for(var r;r=n()[e++>>>0];){var a=105!=r;t+=(a&=112!=r)&&t%8?4:0,Xe.push(112==r?o()[t>>>2>>>0]:105==r?i()[t>>>2>>>0]:s()[t>>>3>>>0]),t+=a?8:4;}return Xe;},qe={},Je=function Je(){if(!Ye){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==(typeof navigator==="undefined"?"undefined":_typeof(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in qe)void 0===qe[e]?delete t[e]:t[e]=qe[e];var r=[];for(e in t)r.push("".concat(e,"=").concat(t[e]));Ye=r;}return Ye;};function Qe(e,t){if(v)return he(18,1,e,t);e>>>=0,t>>>=0;var n=0;return Je().forEach(function(i,a){var s=t+n;for(a=o()[e+4*a>>>2>>>0]=s,s=0;s<i.length;++s)r()[a++>>>0>>>0]=i.charCodeAt(s);r()[a>>>0>>>0]=0,n+=i.length+1;}),0;}function et(e,t){if(v)return he(19,1,e,t);e>>>=0,t>>>=0;var r=Je();o()[e>>>2>>>0]=r.length;var n=0;return r.forEach(function(e){return n+=e.length+1;}),o()[t>>>2>>>0]=n,0;}function tt(e){return v?he(20,1,e):52;}function rt(e,t,r,n){return v?he(21,1,e,t,r,n):52;}function nt(e,t,r,n,i){return v?he(22,1,e,t,r,n,i):70;}var it=[null,[],[]];function ot(e,t,r,i){if(v)return he(23,1,e,t,r,i);t>>>=0,r>>>=0,i>>>=0;for(var a=0,s=0;s<r;s++){var u=o()[t>>>2>>>0],l=o()[t+4>>>2>>>0];t+=8;for(var h=0;h<l;h++){var c=n()[u+h>>>0],d=it[e];0===c||10===c?((1===e?C:E)(se(d,0)),d.length=0):d.push(c);}a+=l;}return o()[i>>>2>>>0]=a,0;}var _at=function at(e){return(_at=function(){if("object"==(typeof crypto==="undefined"?"undefined":_typeof(crypto))&&"function"==typeof crypto.getRandomValues)return function(e){return e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e;};if(b)try{var e=Dc("crypto");if(e.randomFillSync)return function(t){return e.randomFillSync(t);};var t=e.randomBytes;return function(e){return e.set(t(e.byteLength)),e;};}catch(_unused20){}K("initRandomDevice");}())(e);},st=[31,29,31,30,31,30,31,31,30,31,30,31],ut=[31,28,31,30,31,30,31,31,30,31,30,31];function lt(e,t,n,a){function s(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e;}function u(e,t){return s(e,t,"0");}function l(e,t){function r(e){return 0>e?-1:0<e?1:0;}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n;}function h(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30);}}function c(e){var t=e.fb;for(e=new Date(new Date(e.gb+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Ge(e.getFullYear())?st:ut)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break;}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));}return r=new Date(e.getFullYear()+1,0,4),t=h(new Date(e.getFullYear(),0,4)),r=h(r),0>=l(t,e)?0>=l(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1;}e>>>=0,t>>>=0,n>>>=0,a>>>=0;var d=o()[a+40>>>2>>>0];for(var f in a={Mb:i()[a>>>2>>>0],Lb:i()[a+4>>>2>>>0],jb:i()[a+8>>>2>>>0],ob:i()[a+12>>>2>>>0],kb:i()[a+16>>>2>>>0],gb:i()[a+20>>>2>>>0],ab:i()[a+24>>>2>>>0],fb:i()[a+28>>>2>>>0],Tb:i()[a+32>>>2>>>0],Kb:i()[a+36>>>2>>>0],Nb:d?ue(d):""},n=ue(n),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(f,"g"),d[f]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),y="January February March April May June July August September October November December".split(" ");for(f in d={"%a":function a(e){return p[e.ab].substring(0,3);},"%A":function A(e){return p[e.ab];},"%b":function b(e){return y[e.kb].substring(0,3);},"%B":function B(e){return y[e.kb];},"%C":function C(e){return u((e.gb+1900)/100|0,2);},"%d":function d(e){return u(e.ob,2);},"%e":function e(_e840){return s(_e840.ob,2," ");},"%g":function g(e){return c(e).toString().substring(2);},"%G":function G(e){return c(e);},"%H":function H(e){return u(e.jb,2);},"%I":function I(e){return 0==(e=e.jb)?e=12:12<e&&(e-=12),u(e,2);},"%j":function j(e){for(var t=0,r=0;r<=e.kb-1;t+=(Ge(e.gb+1900)?st:ut)[r++]);return u(e.ob+t,3);},"%m":function m(e){return u(e.kb+1,2);},"%M":function M(e){return u(e.Lb,2);},"%n":function n(){return"\n";},"%p":function p(e){return 0<=e.jb&&12>e.jb?"AM":"PM";},"%S":function S(e){return u(e.Mb,2);},"%t":function t(){return"\t";},"%u":function u(e){return e.ab||7;},"%U":function U(e){return u(Math.floor((e.fb+7-e.ab)/7),2);},"%V":function V(e){var t=Math.floor((e.fb+7-(e.ab+6)%7)/7);if(2>=(e.ab+371-e.fb-2)%7&&t++,t)53==t&&(4==(r=(e.ab+371-e.fb)%7)||3==r&&Ge(e.gb)||(t=1));else{t=52;var r=(e.ab+7-e.fb-1)%7;(4==r||5==r&&Ge(e.gb%400-1))&&t++;}return u(t,2);},"%w":function w(e){return e.ab;},"%W":function W(e){return u(Math.floor((e.fb+7-(e.ab+6)%7)/7),2);},"%y":function y(e){return(e.gb+1900).toString().substring(2);},"%Y":function Y(e){return e.gb+1900;},"%z":function z(e){return(0<=(e=e.Kb)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4);},"%Z":function Z(e){return e.Nb;},"%%":function _(){return"%";}},n=n.replace(/%%/g,"\0\0"),d)n.includes(f)&&(n=n.replace(new RegExp(f,"g"),d[f](a)));return f=function(e){var t=Array(Ae(e)+1);return Se(e,t,0,t.length),t;}(n=n.replace(/\0\0/g,"%")),f.length>t?0:(function(e,t){r().set(e,t>>>0);}(f,e),f.length-1);}var ht=function ht(e){try{e();}catch(e){K(e);}};var ct=0,dt=null,ft=0,pt=[],yt={},gt={},mt=0,wt=null,bt=[];function vt(e){if(!F){if(0===ct){var t=!1,r=!1;e(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!F&&(ft=e,t=!0,r)){ct=2,ht(function(){return _Yt(dt);}),(typeof Browser==="undefined"?"undefined":_typeof(Browser))<"u"&&Browser.nb.Ab&&Browser.nb.resume(),e=!1;try{var n=function(){var e=i()[dt+8>>>2>>>0];return e=Et[gt[e]],--oe,e();}();}catch(t){n=t,e=!0;}var o=!1;if(!dt){var a=wt;a&&(wt=null,(e?a.reject:a.resolve)(n),o=!0);}if(e&&!o)throw n;}}),r=!0,t||(ct=1,dt=function(){var e=Pt(65548),t=e+12;o()[e>>>2>>>0]=t,o()[e+4>>>2>>>0]=t+65536,t=pt[0];var r=yt[t];return void 0===r&&(r=mt++,yt[t]=r,gt[r]=t),t=r,i()[e+8>>>2>>>0]=t,e;}(),(typeof Browser==="undefined"?"undefined":_typeof(Browser))<"u"&&Browser.nb.Ab&&Browser.nb.pause(),ht(function(){return _Ht(dt);}));}else 2===ct?(ct=0,ht(_Kt),$t(dt),dt=null,bt.forEach(function(e){if(!F)try{e(),Fe();}catch(e){fe(e);}})):K("invalid state: ".concat(ct));return ft;}}var xt,_t,It=[],At=[],St=function St(e,t){if(!_t){_t=new WeakMap();var r=xt.length;if(_t)for(var n=0;n<0+r;n++){var i=n,o=It[i];o||(i>=It.length&&(It.length=i+1),It[i]=o=xt.get(i)),(i=o)&&_t.set(i,n);}}if(r=_t.get(e)||0)return r;if(At.length)r=At.pop();else{try{xt.grow(1);}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e;}r=xt.length-1;}try{n=r,xt.set(n,e),It[n]=xt.get(n);}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},o={parameters:[],results:"v"==t[0]?[]:[i[t[0]]]};for(var a=1;a<t.length;++a)o.parameters.push(i[t[a]]);t=new n(o,e);}else{for(n=[1],i=t.slice(0,1),t=t.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96),128>(a=t.length)?n.push(a):n.push(a%128|128,a>>7),a=0;a<t.length;++a)n.push(o[t[a]]);"v"==i?n.push(0):n.push(1,o[i]),t=[0,97,115,109,1,0,0,0,1],128>(i=n.length)?t.push(i):t.push(i%128|128,i>>7),t.push.apply(t,n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f;}n=r,xt.set(n,t),It[n]=xt.get(n);}return _t.set(e,r),r;};ge.mb();var Tt=[ce,we,ve,_e,Ie,Ce,Ee,Oe,ke,Pe,$e,Re,Be,De,Me,Le,He,We,Qe,et,tt,rt,nt,ot],Ct={r:function r(e,t,_r325){return function(e){return vt(function(t){e().then(t);});}(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee154(){return _regeneratorRuntime().wrap(function _callee154$(_context157){while(1)switch(_context157.prev=_context157.next){case 0:_context157.next=2;return h.Cb(e,t,_r325);case 2:case"end":return _context157.stop();}},_callee154);})));},b:function b(e,t,r){throw new be(e>>>=0).mb(t>>>0,r>>>0),e;},P:function P(e){Rt(e>>>0,!w,1,!m,131072,!1),ge.tb();},n:function n(e){e>>>=0,v?postMessage({cmd:"cleanupThread",thread:e}):ge.rb(ge.$a[e]);},L:xe,i:_e,V:Ie,H:Ce,J:Ee,z:Oe,T:ke,N:Pe,S:$e,p:Re,I:Be,F:De,U:Me,G:Le,Y:function Y(){return 1;},D:function D(e,t){(e>>>=0)==t>>>0?setTimeout(function(){return Ue();}):v?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=ge.$a[e])&&e.postMessage({cmd:"checkMailbox"});},M:function M(e,t,r,n){t>>>=0,je.length=r,n=n>>>0>>>3;for(var i=0;i<r;i++)je[i]=s()[n+i>>>0];return e=0>e?te[-e-1]:Tt[e],ge.zb=t,t=e.apply(null,je),ge.zb=0,t;},O:Ne,X:function X(e){b&&ge.$a[e>>>0].ref();},u:function u(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),i()[r>>>2>>>0]=e.getUTCSeconds(),i()[r+4>>>2>>>0]=e.getUTCMinutes(),i()[r+8>>>2>>>0]=e.getUTCHours(),i()[r+12>>>2>>>0]=e.getUTCDate(),i()[r+16>>>2>>>0]=e.getUTCMonth(),i()[r+20>>>2>>>0]=e.getUTCFullYear()-1900,i()[r+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,i()[r+28>>>2>>>0]=e;},v:function v(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),i()[r>>>2>>>0]=e.getSeconds(),i()[r+4>>>2>>>0]=e.getMinutes(),i()[r+8>>>2>>>0]=e.getHours(),i()[r+12>>>2>>>0]=e.getDate(),i()[r+16>>>2>>>0]=e.getMonth(),i()[r+20>>>2>>>0]=e.getFullYear()-1900,i()[r+24>>>2>>>0]=e.getDay(),t=(Ge(e.getFullYear())?ze:Ve)[e.getMonth()]+e.getDate()-1|0,i()[r+28>>>2>>>0]=t,i()[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t)),i()[r+32>>>2>>>0]=e;},w:function w(e){e>>>=0;var t=new Date(i()[e+20>>>2>>>0]+1900,i()[e+16>>>2>>>0],i()[e+12>>>2>>>0],i()[e+8>>>2>>>0],i()[e+4>>>2>>>0],i()[e>>>2>>>0],0),r=i()[e+32>>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(a,o);return 0>r?i()[e+32>>>2>>>0]=+(o!=a&&s==n):0<r!=(s==n)&&(o=Math.max(a,o),t.setTime(t.getTime()+6e4*((0<r?s:o)-n))),i()[e+24>>>2>>>0]=t.getDay(),r=(Ge(t.getFullYear())?ze:Ve)[t.getMonth()]+t.getDate()-1|0,i()[e+28>>>2>>>0]=r,i()[e>>>2>>>0]=t.getSeconds(),i()[e+4>>>2>>>0]=t.getMinutes(),i()[e+8>>>2>>>0]=t.getHours(),i()[e+12>>>2>>>0]=t.getDate(),i()[e+16>>>2>>>0]=t.getMonth(),i()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(i()[_Ot()>>>2>>>0]=61,e=-1):e/=1e3,_Nt6((ee=e,1<=+Math.abs(ee)?0<ee?+Math.floor(ee/4294967296)>>>0:~~+Math.ceil((ee-+(~~ee>>>0))/4294967296)>>>0:0)),e>>>0;},s:He,t:We,C:function C(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT";}e>>>=0,t>>>=0,r>>>=0;var a=new Date().getFullYear(),s=new Date(a,0,1),u=new Date(a,6,1);a=s.getTimezoneOffset();var l=u.getTimezoneOffset(),h=Math.max(a,l);o()[e>>>2>>>0]=60*h,i()[t>>>2>>>0]=+(a!=l),e=n(s),t=n(u),e=Ke(e),t=Ke(t),l<a?(o()[r>>>2>>>0]=e,o()[r+4>>>2>>>0]=t):(o()[r>>>2>>>0]=t,o()[r+4>>>2>>>0]=e);},d:function d(){K("");},c:function c(e,t,r){return e>>>=0,t=Ze(t>>>0,r>>>0),te[e].apply(null,t);},k:function k(e,t,r){return e>>>=0,t=Ze(t>>>0,r>>>0),te[e].apply(null,t);},o:function o(){},q:function q(){return Date.now();},W:function W(){throw oe+=1,"unwind";},E:function E(){return 4294901760;},f:function f(){return performance.timeOrigin+performance.now();},g:function g(){return b?(lb(),Nc(gd)).cpus().length:navigator.hardwareConcurrency;},A:function A(e){e>>>=0;var t=n().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var o=Math;i=Math.max(e,i);e:{o=(o.min.call(o,4294901760,i+(65536-i%65536)%65536)-O.buffer.byteLength+65535)/65536;try{O.grow(o),N();var a=1;break e;}catch(_unused21){}a=void 0;}if(a)return!0;}return!1;},Q:Qe,R:et,K:de,h:tt,m:rt,x:nt,l:ot,y:function y(e,t){return e>>>=0,t>>>=0,_at(n().subarray(e>>>0,e+t>>>0)),0;},a:O||h.wasmMemory,B:lt,e:function e(_e841,t,r,n){return lt(_e841>>>0,t>>>0,r>>>0,n>>>0);},j:function j(e,t,r,i){var o=xt.length;e=new Uint8Array(n().slice(e+t,e+r));try{var a,s=new WebAssembly.Module(e),u=new WebAssembly.Instance(s,{env:{memory:O}});for(a in u.exports)St(u.exports[a]);return o<xt.length?o:i;}catch(e){return console.log(e),i;}}},Et=function(){function e(e,t){return Et=e.exports,Et=function(){var e=Et,t={};var _loop14=function _loop14(){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i121],2),r=_Object$entries3$_i[0],n=_Object$entries3$_i[1];t[r]="function"==typeof n?function(){pt.push(r);try{return n.apply(null,arguments);}finally{F||(pt.pop(),dt&&1===ct&&0===pt.length&&(ct=0,oe+=1,ht(_Wt),(typeof Fibers==="undefined"?"undefined":_typeof(Fibers))<"u"&&Fibers.Ub()));}}:n;};for(var _i121=0,_Object$entries3=Object.entries(e);_i121<_Object$entries3.length;_i121++){_loop14();}return t;}(),Et=function(){var e=Et;e=Object.assign({},e);var t=function t(e){return function(){return e()>>>0;};},r=function r(e){return function(t){return e(t)>>>0;};};return e.Da=t(e.Da),e.Ea=t(e.Ea),e.Fa=r(e.Fa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ra=t(e.Ra),e.Ta=r(e.Ta),e;}(),ge.ub.push(Et.Ha),xt=Et.Ia,G.unshift(Et.Z),k=t,Y(),Et;}var t={a:Ct};if(V++,h.instantiateWasm)try{return h.instantiateWasm(t,e);}catch(e){E("Module.instantiateWasm callback failed with error: ".concat(e)),l(e);}return function(e,t){var r=X;return"function"!=typeof WebAssembly.instantiateStreaming||Z(r)||q(r)||b||"function"!=typeof fetch?Q(r,e,t):fetch(r,{credentials:"same-origin"}).then(function(n){return WebAssembly.instantiateStreaming(n,e).then(t,function(n){return E("wasm streaming compile failed: ".concat(n)),E("falling back to ArrayBuffer instantiation"),Q(r,e,t);});});}(t,function(t){e(t.instance,t.module);})["catch"](l),{};}();h._OrtInit=function(e,t){return(h._OrtInit=Et._)(e,t);},h._OrtGetLastError=function(e,t){return(h._OrtGetLastError=Et.$)(e,t);},h._OrtCreateSessionOptions=function(e,t,r,n,i,o,a,s,u,l){return(h._OrtCreateSessionOptions=Et.aa)(e,t,r,n,i,o,a,s,u,l);},h._OrtAppendExecutionProvider=function(e,t){return(h._OrtAppendExecutionProvider=Et.ba)(e,t);},h._OrtAddFreeDimensionOverride=function(e,t,r){return(h._OrtAddFreeDimensionOverride=Et.ca)(e,t,r);},h._OrtAddSessionConfigEntry=function(e,t,r){return(h._OrtAddSessionConfigEntry=Et.da)(e,t,r);},h._OrtReleaseSessionOptions=function(e){return(h._OrtReleaseSessionOptions=Et.ea)(e);},h._OrtCreateSession=function(e,t,r){return(h._OrtCreateSession=Et.fa)(e,t,r);},h._OrtReleaseSession=function(e){return(h._OrtReleaseSession=Et.ga)(e);},h._OrtGetInputOutputCount=function(e,t,r){return(h._OrtGetInputOutputCount=Et.ha)(e,t,r);},h._OrtGetInputName=function(e,t){return(h._OrtGetInputName=Et.ia)(e,t);},h._OrtGetOutputName=function(e,t){return(h._OrtGetOutputName=Et.ja)(e,t);},h._OrtFree=function(e){return(h._OrtFree=Et.ka)(e);},h._OrtCreateTensor=function(e,t,r,n,i,o){return(h._OrtCreateTensor=Et.la)(e,t,r,n,i,o);},h._OrtGetTensorData=function(e,t,r,n,i){return(h._OrtGetTensorData=Et.ma)(e,t,r,n,i);},h._OrtReleaseTensor=function(e){return(h._OrtReleaseTensor=Et.na)(e);},h._OrtCreateRunOptions=function(e,t,r,n){return(h._OrtCreateRunOptions=Et.oa)(e,t,r,n);},h._OrtAddRunConfigEntry=function(e,t,r){return(h._OrtAddRunConfigEntry=Et.pa)(e,t,r);},h._OrtReleaseRunOptions=function(e){return(h._OrtReleaseRunOptions=Et.qa)(e);},h._OrtCreateBinding=function(e){return(h._OrtCreateBinding=Et.ra)(e);},h._OrtBindInput=function(e,t,r){return(h._OrtBindInput=Et.sa)(e,t,r);},h._OrtBindOutput=function(e,t,r,n){return(h._OrtBindOutput=Et.ta)(e,t,r,n);},h._OrtClearBoundOutputs=function(e){return(h._OrtClearBoundOutputs=Et.ua)(e);},h._OrtReleaseBinding=function(e){return(h._OrtReleaseBinding=Et.va)(e);},h._OrtRunWithBinding=function(e,t,r,n,i){return(h._OrtRunWithBinding=Et.wa)(e,t,r,n,i);},h._OrtRun=function(e,t,r,n,i,o,a,s){return(h._OrtRun=Et.xa)(e,t,r,n,i,o,a,s);},h._OrtEndProfiling=function(e){return(h._OrtEndProfiling=Et.ya)(e);},h._OrtConfigure=function(e,t){return(h._OrtConfigure=Et.za)(e,t);},h._OrtAuth=function(e,t){return(h._OrtAuth=Et.Aa)(e,t);},h._JsepOutput=function(e,t,r){return(h._JsepOutput=Et.Ba)(e,t,r);},h._JsepGetNodeName=function(e){return(h._JsepGetNodeName=Et.Ca)(e);};var _Ot=function Ot(){return(_Ot=Et.Da)();},kt=h._pthread_self=function(){return(kt=h._pthread_self=Et.Ea)();},Pt=h._malloc=function(e){return(Pt=h._malloc=Et.Fa)(e);},$t=h._free=function(e){return($t=h._free=Et.Ga)(e);};h.__emscripten_tls_init=function(){return(h.__emscripten_tls_init=Et.Ha)();};var Rt=h.__emscripten_thread_init=function(e,t,r,n,i,o){return(Rt=h.__emscripten_thread_init=Et.Ja)(e,t,r,n,i,o);};h.__emscripten_thread_crashed=function(){return(h.__emscripten_thread_crashed=Et.Ka)();};var Bt,_Dt=function Dt(e,t,r,n){return(_Dt=Et.La)(e,t,r,n);},_Mt=function Mt(e){return(_Mt=Et.Ma)(e);},Lt=h.__emscripten_thread_exit=function(e){return(Lt=h.__emscripten_thread_exit=Et.Na)(e);},_Ft=function Ft(){return(_Ft=Et.Oa)();},_Nt6=function Nt(e){return(_Nt6=Et.Pa)(e);},_Ut=function Ut(e,t){return(_Ut=Et.Qa)(e,t);},_jt=function jt(){return(_jt=Et.Ra)();},_Gt=function Gt(e){return(_Gt=Et.Sa)(e);},_zt=function zt(e){return(_zt=Et.Ta)(e);},Vt=h.dynCall_ii=function(e,t){return(Vt=h.dynCall_ii=Et.Va)(e,t);},_Ht=function Ht(e){return(_Ht=Et.Wa)(e);},_Wt=function Wt(){return(_Wt=Et.Xa)();},_Yt=function Yt(e){return(_Yt=Et.Ya)(e);},_Kt=function Kt(){return(_Kt=Et.Za)();};function Xt(){if(!(0<V))if(v)u(h),v||me(G),startWorker(h);else{if(h.preRun)for("function"==typeof h.preRun&&(h.preRun=[h.preRun]);h.preRun.length;)j.unshift(h.preRun.shift());me(j),0<V||Bt||(Bt=!0,h.calledRun=!0,F||(v||me(G),u(h),v||me(z)));}}return h.___start_em_js=914640,h.___stop_em_js=915413,h.wasmMemory=O,h.stackAlloc=_zt,h.stackSave=_jt,h.stackRestore=_Gt,h.keepRuntimeAlive=function(){return 0<oe;},h.addFunction=St,h.UTF8ToString=ue,h.stringToUTF8=Te,h.lengthBytesUTF8=Ae,h.ExitStatus=re,h.PThread=ge,W=function e(){Bt||Xt(),Bt||(W=e);},Xt(),t.ready;};}();"object"==_typeof(e)&&"object"==_typeof(t)?t.exports=r:"function"==typeof define&&define.amd&&define([],function(){return r;});}),cb=Lc(function(e,t){t.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n';}),db=Mc(function(){wd=fd(),bd=hb(),xd=!1,_d=!1,Id=!1,Ad=function Ad(e){if(1===e)return!1;if((typeof SharedArrayBuffer==="undefined"?"undefined":_typeof(SharedArrayBuffer))>"u")return(typeof self==="undefined"?"undefined":_typeof(self))<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;_typeof(Oc)<"u"&&Oc.versions&&Oc.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return(typeof MessageChannel==="undefined"?"undefined":_typeof(MessageChannel))<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));}catch(_unused22){return!1;}},Sd=function Sd(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]));}catch(_unused23){return!1;}},Td=function Td(e,t){return e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm";},Cd=/*#__PURE__*/function(){var _ref75=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee155(e){var t,r,n,i,o,a,s,u,l,h,c;return _regeneratorRuntime().wrap(function _callee155$(_context158){while(1)switch(_context158.prev=_context158.next){case 0:if(!xd){_context158.next=2;break;}return _context158.abrupt("return",Promise.resolve());case 2:if(!_d){_context158.next=4;break;}throw new Error("multiple calls to 'initializeWebAssembly()' detected.");case 4:if(!Id){_context158.next=6;break;}throw new Error("previous call to 'initializeWebAssembly()' failed.");case 6:_d=!0;t=e.initTimeout,r=e.numThreads,n=e.simd,i=Ad(r),o=n&&Sd(),a=e.wasmPaths,s="string"==typeof a?a:void 0,u=Td(o,i),l="object"==_typeof(a)?a[u]:void 0,h=!1,c=[];t>0&&c.push(new Promise(function(e){setTimeout(function(){h=!0,e();},t);}));c.push(new Promise(function(e,t){var n=i?bd:wd,o={locateFile:function locateFile(e,t){if(i&&e.endsWith(".worker.js")&&(typeof Blob==="undefined"?"undefined":_typeof(Blob))<"u")return URL.createObjectURL(new Blob([cb()],{type:"text/javascript"}));if(e.endsWith(".wasm")){if(l)return l;var _e842=s!==null&&s!==void 0?s:t;return"ort-wasm-simd.wasm"===u?_e842+"ort-wasm-simd.jsep.wasm":"ort-wasm-simd-threaded.wasm"===u?_e842+"ort-wasm-simd-threaded.jsep.wasm":_e842+u;}return t+e;}};if(i)if(o.numThreads=r,(typeof Blob==="undefined"?"undefined":_typeof(Blob))>"u")o.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{var _e843="var ortWasmThreaded=".concat(n.toString(),";");o.mainScriptUrlOrBlob=new Blob([_e843],{type:"text/javascript"});}n(o).then(function(t){_d=!1,xd=!0,vd=t,e();},function(e){_d=!1,Id=!0,t(e);});}));_context158.next=12;return Promise.race(c);case 12:if(!h){_context158.next=14;break;}throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(t,"ms"));case 14:case"end":return _context158.stop();}},_callee155);}));return function Cd(_x179){return _ref75.apply(this,arguments);};}(),Ed=function Ed(){if(xd&&vd)return vd;throw new Error("WebAssembly is not initialized yet.");};}),fb=Mc(function(){db(),Od=function Od(e,t){var r=Ed(),n=r.lengthBytesUTF8(e)+1,i=r._malloc(n);return r.stringToUTF8(e,i,n),t.push(i),i;},_kd=function kd(e,t,r,n){if("object"==_typeof(e)&&null!==e){if(r.has(e))throw new Error("Circular reference in options");r.add(e);}Object.entries(e).forEach(function(_ref76){var _ref77=_slicedToArray(_ref76,2),e=_ref77[0],i=_ref77[1];var o=t?t+e:e;if("object"==_typeof(i))_kd(i,o+".",r,n);else if("string"==typeof i||"number"==typeof i)n(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can't handle extra config type: "+_typeof(i));n(o,i?"1":"0");}});},Pd=function Pd(e){var t=Ed(),r=t.stackSave();try{var _r326=t.stackAlloc(8);t._OrtGetLastError(_r326,_r326+4);var n=t.HEAP32[_r326/4],i=t.HEAPU32[_r326/4+1],_o85=i?t.UTF8ToString(i):"";throw new Error("".concat(e," ERROR_CODE: ").concat(n,", ERROR_MESSAGE: ").concat(_o85));}finally{t.stackRestore(r);}};}),pb=Mc(function(){db(),fb(),$d=function $d(e){var t=Ed(),r=0,n=[],i=e||{};try{if(void 0===(e===null||e===void 0?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(e.logSeverityLevel));if(void 0===(e===null||e===void 0?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(e.logVerbosityLevel));void 0===(e===null||e===void 0?void 0:e.terminate)&&(i.terminate=!1);var _o86=0;return void 0!==(e===null||e===void 0?void 0:e.tag)&&(_o86=Od(e.tag,n)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,_o86),0===r&&Pd("Can't create run options."),void 0!==(e===null||e===void 0?void 0:e.extra)&&_kd(e.extra,"",new WeakSet(),function(e,i){var o=Od(e,n),a=Od(i,n);0!==t._OrtAddRunConfigEntry(r,o,a)&&Pd("Can't set a run config entry: ".concat(e," - ").concat(i,"."));}),[r,n];}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),n.forEach(function(e){return t._free(e);}),e;}};}),yb=Mc(function(){db(),fb(),Rd=function Rd(e){switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(e));}},Bd=function Bd(e){switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(e));}},Dd=function Dd(e){e.extra||(e.extra={}),e.extra.session||(e.extra.session={});var t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(function(e){return"webgpu"===("string"==typeof e?e:e.name);})&&(e.enableMemPattern=!1);},Md=function Md(e,t,r){var _iterator64=_createForOfIteratorHelper(t),_step64;try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var n=_step64.value;var _t344="string"==typeof n?n:n.name;switch(_t344){case"webnn":if(_t344="WEBNN","string"!=typeof n){var _t345=n;if(_t345!==null&&_t345!==void 0&&_t345.deviceType){var _n157=Od("deviceType",r),_i122=Od(_t345.deviceType,r);0!==Ed()._OrtAddSessionConfigEntry(e,_n157,_i122)&&Pd("Can't set a session config entry: 'deviceType' - ".concat(_t345.deviceType,"."));}if(_t345!==null&&_t345!==void 0&&_t345.numThreads){var _n158=_t345.numThreads;("number"!=typeof _n158||!Number.isInteger(_n158)||_n158<0)&&(_n158=0);var _i123=Od("numThreads",r),_o87=Od(_n158.toString(),r);0!==Ed()._OrtAddSessionConfigEntry(e,_i123,_o87)&&Pd("Can't set a session config entry: 'numThreads' - ".concat(_t345.numThreads,"."));}if(_t345!==null&&_t345!==void 0&&_t345.powerPreference){var _n159=Od("powerPreference",r),_i124=Od(_t345.powerPreference,r);0!==Ed()._OrtAddSessionConfigEntry(e,_n159,_i124)&&Pd("Can't set a session config entry: 'powerPreference' - ".concat(_t345.powerPreference,"."));}}break;case"webgpu":if(_t344="JS","string"!=typeof n){var _t346=n;if(_t346!==null&&_t346!==void 0&&_t346.preferredLayout){if("NCHW"!==_t346.preferredLayout&&"NHWC"!==_t346.preferredLayout)throw new Error("preferredLayout must be either 'NCHW' or 'NHWC': ".concat(_t346.preferredLayout));var _n160=Od("preferredLayout",r),_i125=Od(_t346.preferredLayout,r);0!==Ed()._OrtAddSessionConfigEntry(e,_n160,_i125)&&Pd("Can't set a session config entry: 'preferredLayout' - ".concat(_t346.preferredLayout,"."));}}break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(_t344));}var i=Od(_t344,r);0!==Ed()._OrtAppendExecutionProvider(e,i)&&Pd("Can't append execution provider: ".concat(_t344,"."));}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}},Ld=function Ld(e){var t=Ed(),r=0,n=[],i=e||{};Dd(i);try{var _i$graphOptimizationL2,_i$executionMode2,_i$logSeverityLevel2,_i$logVerbosityLevel2;var _e844=Rd((_i$graphOptimizationL2=i.graphOptimizationLevel)!==null&&_i$graphOptimizationL2!==void 0?_i$graphOptimizationL2:"all"),_o88=Bd((_i$executionMode2=i.executionMode)!==null&&_i$executionMode2!==void 0?_i$executionMode2:"sequential"),_a85="string"==typeof i.logId?Od(i.logId,n):0,_s51=(_i$logSeverityLevel2=i.logSeverityLevel)!==null&&_i$logSeverityLevel2!==void 0?_i$logSeverityLevel2:2;if(!Number.isInteger(_s51)||_s51<0||_s51>4)throw new Error("log serverity level is not valid: ".concat(_s51));var _u39=(_i$logVerbosityLevel2=i.logVerbosityLevel)!==null&&_i$logVerbosityLevel2!==void 0?_i$logVerbosityLevel2:0;if(!Number.isInteger(_u39)||_u39<0||_u39>4)throw new Error("log verbosity level is not valid: ".concat(_u39));var _l30="string"==typeof i.optimizedModelFilePath?Od(i.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(_e844,!!i.enableCpuMemArena,!!i.enableMemPattern,_o88,!!i.enableProfiling,0,_a85,_s51,_u39,_l30),0===r&&Pd("Can't create session options."),i.executionProviders&&Md(r,i.executionProviders,n),i.freeDimensionOverrides)for(var _i126=0,_Object$entries4=Object.entries(i.freeDimensionOverrides);_i126<_Object$entries4.length;_i126++){var _Object$entries4$_i=_slicedToArray(_Object$entries4[_i126],2),_e845=_Object$entries4$_i[0],_o89=_Object$entries4$_i[1];if("string"!=typeof _e845)throw new Error("free dimension override name must be a string: ".concat(_e845));if("number"!=typeof _o89||!Number.isInteger(_o89)||_o89<0)throw new Error("free dimension override value must be a non-negative integer: ".concat(_o89));var _i127=Od(_e845,n);0!==t._OrtAddFreeDimensionOverride(r,_i127,_o89)&&Pd("Can't set a free dimension override: ".concat(_e845," - ").concat(_o89,"."));}return void 0!==i.extra&&_kd(i.extra,"",new WeakSet(),function(e,i){var o=Od(e,n),a=Od(i,n);0!==t._OrtAddSessionConfigEntry(r,o,a)&&Pd("Can't set a session config entry: ".concat(e," - ").concat(i,"."));}),[r,n];}catch(e){throw 0!==r&&t._OrtReleaseSessionOptions(r),n.forEach(function(e){return t._free(e);}),e;}};}),gb=Mc(function(){Fd=function Fd(e){switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(e));}},Nd=function Nd(e){switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(e));}},Ud=function Ud(e){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e];},jd=function jd(e){switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(e));}},Gd=function Gd(e){switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(e));}},zd=function zd(e){return"float32"===e||"int32"===e||"int64"===e||"bool"===e||"float16"===e||"uint32"===e;},Vd=function Vd(e){switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error("unsupported data location: ".concat(e));}};}),mb=Mc(function(){Hd=/*#__PURE__*/function(){var _ref78=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee156(e){var _t347,_r327,n,_r328,i,_e846,_o90,_yield$i$read2,_e847,_t348,_n161,_t349,_r329,_iteratorAbruptCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,_e848;return _regeneratorRuntime().wrap(function _callee156$(_context159){while(1)switch(_context159.prev=_context159.next){case 0:if(!("string"!=typeof e)){_context159.next=11;break;}if(!(e instanceof Blob)){_context159.next=9;break;}_context159.t1=Uint8Array;_context159.next=5;return e.arrayBuffer();case 5:_context159.t2=_context159.sent;_context159.t0=new _context159.t1(_context159.t2);_context159.next=10;break;case 9:_context159.t0=e instanceof Uint8Array?e:new Uint8Array(e);case 10:return _context159.abrupt("return",_context159.t0);case 11:if(_typeof(Oc)<"u"&&Oc.versions&&Oc.versions.node){_context159.next=50;break;}_context159.next=14;return fetch(e);case 14:_t347=_context159.sent;if(_t347.ok){_context159.next=17;break;}throw new Error("failed to load external data file: ".concat(e));case 17:_r327=_t347.headers.get("Content-Length"),n=_r327?parseInt(_r327,10):0;if(!(n<1073741824)){_context159.next=24;break;}_context159.t3=Uint8Array;_context159.next=22;return _t347.arrayBuffer();case 22:_context159.t4=_context159.sent;return _context159.abrupt("return",new _context159.t3(_context159.t4));case 24:if(_t347.body){_context159.next=26;break;}throw new Error("failed to load external data file: ".concat(e,", no response body."));case 26:i=_t347.body.getReader();_context159.prev=27;_r328=new ArrayBuffer(n);_context159.next=37;break;case 31:_context159.prev=31;_context159.t5=_context159["catch"](27);if(_context159.t5 instanceof RangeError){_context159.next=35;break;}throw _context159.t5;case 35:_e846=Math.ceil(n/65536);_r328=new WebAssembly.Memory({initial:_e846,maximum:_e846}).buffer;case 37:_o90=0;case 38:_context159.next=40;return i.read();case 40:_yield$i$read2=_context159.sent;_e847=_yield$i$read2.done;_t348=_yield$i$read2.value;if(!_e847){_context159.next=45;break;}return _context159.abrupt("break",49);case 45:_n161=_t348.byteLength;new Uint8Array(_r328,_o90,_n161).set(_t348),_o90+=_n161;case 47:_context159.next=38;break;case 49:return _context159.abrupt("return",new Uint8Array(_r328,0,n));case 50:_context159.prev=50;_context159.t6=Uint8Array;_context159.next=54;return(void 0)(e);case 54:_context159.t7=_context159.sent;return _context159.abrupt("return",new _context159.t6(_context159.t7));case 58:_context159.prev=58;_context159.t8=_context159["catch"](50);if(!("ERR_FS_FILE_TOO_LARGE"===_context159.t8.code)){_context159.next=91;break;}_t349=(void 0)(e),_r329=[];_iteratorAbruptCompletion2=false;_didIteratorError2=false;_context159.prev=64;_iterator2=_asyncIterator(_t349);case 66:_context159.next=68;return _iterator2.next();case 68:if(!(_iteratorAbruptCompletion2=!(_step2=_context159.sent).done)){_context159.next=74;break;}_e848=_step2.value;_r329.push(_e848);case 71:_iteratorAbruptCompletion2=false;_context159.next=66;break;case 74:_context159.next=80;break;case 76:_context159.prev=76;_context159.t9=_context159["catch"](64);_didIteratorError2=true;_iteratorError2=_context159.t9;case 80:_context159.prev=80;_context159.prev=81;if(!(_iteratorAbruptCompletion2&&_iterator2["return"]!=null)){_context159.next=85;break;}_context159.next=85;return _iterator2["return"]();case 85:_context159.prev=85;if(!_didIteratorError2){_context159.next=88;break;}throw _iteratorError2;case 88:return _context159.finish(85);case 89:return _context159.finish(80);case 90:return _context159.abrupt("return",new Uint8Array(kc.concat(_r329)));case 91:throw _context159.t8;case 92:case"end":return _context159.stop();}},_callee156,null,[[27,31],[50,58],[64,76,80,90],[81,,85,89]]);}));return function Hd(_x180){return _ref78.apply(this,arguments);};}();}),wb=Mc(function(){gb(),Wd=["V","I","W","E","F"],Yd=function Yd(e,t){console.log("[".concat(Wd[e],",").concat(new Date().toISOString(),"]").concat(t));},Zd=function Zd(e,t){Kd=e,Xd=t;},qd=function qd(e,t){var r=Gd(e);r>=Gd(Kd)&&Yd(r,"function"==typeof t?t():t);},Jd=function Jd(){Xd&&qd.apply(void 0,arguments);};}),bb=Mc(function(){gb(),Qd=function Qd(e,t){return new(jd(t))(e);};}),vb=Mc(function(){}),xb=Mc(function(){wb(),vb(),ef=function ef(e){return 16*Math.ceil(e/16);},tf=1,rf=function rf(){return tf++;},nf=/*#__PURE__*/function(){var _ref79=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee157(e,t,r,n){var i,o,_a86,_s52,_e849;return _regeneratorRuntime().wrap(function _callee157$(_context160){while(1)switch(_context160.prev=_context160.next){case 0:i=ef(r),o=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});_context160.prev=1;_a86=e.getCommandEncoder();e.endComputePass();_a86.copyBufferToBuffer(t,0,o,0,i);e.flush();_context160.next=8;return o.mapAsync(GPUMapMode.READ);case 8:_s52=o.getMappedRange();if(!n){_context160.next=12;break;}_e849=n();return _context160.abrupt("return",(_e849.set(new Uint8Array(_s52,0,r)),_e849));case 12:return _context160.abrupt("return",new Uint8Array(_s52.slice(0,r)));case 13:_context160.prev=13;o.destroy();return _context160.finish(13);case 16:case"end":return _context160.stop();}},_callee157,null,[[1,,13,16]]);}));return function nf(_x181,_x182,_x183,_x184){return _ref79.apply(this,arguments);};}(),of=/*#__PURE__*/function(){function of(e){_classCallCheck(this,of);this.backend=e,this.storageCache=new Map(),this.freeBuffers=new Map(),this.freeUniformBuffers=new Map(),this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map();}_createClass(of,[{key:"upload",value:function upload(e,t){var r=t.buffer,n=t.byteOffset,i=t.byteLength,o=ef(i),a=this.storageCache.get(e);if(!a)throw new Error("gpu data for uploading does not exist");if(a.originalSize!==i)throw new Error("inconsistent data size. gpu data size=".concat(a.originalSize,", data size=").concat(i));var s=this.backend.device.createBuffer({mappedAtCreation:!0,size:o,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),u=s.getMappedRange();new Uint8Array(u).set(new Uint8Array(r,n,i)),s.unmap();var l=this.backend.getCommandEncoder();this.backend.endComputePass(),l.copyBufferToBuffer(s,0,a.gpuData.buffer,0,o),Jd("verbose",function(){return"[WebGPU] GpuDataManager.upload(id=".concat(e,")");}),this.buffersForUploadingPending.push(s);}},{key:"memcpy",value:function memcpy(e,t){var r=this.storageCache.get(e);if(!r)throw new Error("source gpu data for memcpy does not exist");var n=this.storageCache.get(t);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(r.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");var i=ef(r.originalSize),o=this.backend.getCommandEncoder();this.backend.endComputePass(),o.copyBufferToBuffer(r.gpuData.buffer,0,n.gpuData.buffer,0,i);}},{key:"registerExternalBuffer",value:function registerExternalBuffer(e,t,r){var n;if(r){if(n=this.externalBuffers.get(r),void 0===n)throw new Error("previous buffer is not registered");if(e===r)return Jd("verbose",function(){return"[WebGPU] GpuDataManager.registerExternalBuffer(size=".concat(t,") => id=").concat(n,", buffer is the same, skip.");}),n;this.externalBuffers["delete"](r);}else n=rf();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:e},originalSize:t}),this.externalBuffers.set(e,n),Jd("verbose",function(){return"[WebGPU] GpuDataManager.registerExternalBuffer(size=".concat(t,") => id=").concat(n,", registered.");}),n;}},{key:"unregisterExternalBuffer",value:function unregisterExternalBuffer(e){var t=this.externalBuffers.get(e);void 0!==t&&(this.storageCache["delete"](t),this.externalBuffers["delete"](e),Jd("verbose",function(){return"[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=".concat(t);}));}},{key:"create",value:function create(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;var r,n=ef(e),i=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,o=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(i||o){var _e850=i?this.freeBuffers:this.freeUniformBuffers,_o91=_e850.get(n);_o91||(_o91=[],_e850.set(n,_o91)),r=_o91.length>0?_o91.pop():this.backend.device.createBuffer({size:n,usage:t});}else r=this.backend.device.createBuffer({size:n,usage:t});var a={id:rf(),type:0,buffer:r};return this.storageCache.set(a.id,{gpuData:a,originalSize:e}),Jd("verbose",function(){return"[WebGPU] GpuDataManager.create(size=".concat(e,") => id=").concat(a.id);}),a;}},{key:"get",value:function get(e){var _this$storageCache$ge;return(_this$storageCache$ge=this.storageCache.get(e))===null||_this$storageCache$ge===void 0?void 0:_this$storageCache$ge.gpuData;}},{key:"release",value:function release(e){var t=this.storageCache.get(e);if(!t)throw new Error("releasing data does not exist");return Jd("verbose",function(){return"[WebGPU] GpuDataManager.release(id=".concat(e,"), gpuDataId=").concat(t.gpuData.id);}),this.storageCache["delete"](e),this.buffersPending.push(t.gpuData.buffer),t.originalSize;}},{key:"download",value:function(){var _download=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee158(e,t){var r;return _regeneratorRuntime().wrap(function _callee158$(_context161){while(1)switch(_context161.prev=_context161.next){case 0:r=this.storageCache.get(e);if(r){_context161.next=3;break;}throw new Error("data does not exist");case 3:_context161.next=5;return nf(this.backend,r.gpuData.buffer,r.originalSize,t);case 5:case"end":return _context161.stop();}},_callee158,this);}));function download(_x185,_x186){return _download.apply(this,arguments);}return download;}()},{key:"refreshPendingBuffers",value:function refreshPendingBuffers(){var _iterator65=_createForOfIteratorHelper(this.buffersForUploadingPending),_step65;try{for(_iterator65.s();!(_step65=_iterator65.n()).done;){var _e851=_step65.value;_e851.destroy();}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}this.buffersForUploadingPending=[];var _iterator66=_createForOfIteratorHelper(this.buffersPending),_step66;try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var _e852=_step66.value;(_e852.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE?this.freeBuffers.get(_e852.size).push(_e852):(_e852.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM?this.freeUniformBuffers.get(_e852.size).push(_e852):_e852.destroy();}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}this.buffersPending=[];}},{key:"dispose",value:function dispose(){this.freeBuffers.forEach(function(e){e.forEach(function(e){e.destroy();});}),this.freeUniformBuffers.forEach(function(e){e.forEach(function(e){e.destroy();});}),this.storageCache.forEach(function(e){e.gpuData.buffer.destroy();}),this.storageCache=new Map(),this.freeBuffers=new Map(),this.freeUniformBuffers=new Map();}}]);return of;}(),af=function af(){for(var _len15=arguments.length,e=new Array(_len15),_key15=0;_key15<_len15;_key15++){e[_key15]=arguments[_key15];}return _construct(of,e);};}),_b=Mc(function(){sf=/*#__PURE__*/function(){function sf(e){_classCallCheck(this,sf);Object.assign(this,e);}_createClass(sf,[{key:"cacheKey",get:function get(){var _this149=this;return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(function(e){return"".concat(_this149[e]);}).join(";")),this.key;}}]);return sf;}(),uf=function uf(e){return new sf(e);};}),Ib=Mc(function(){lf=/*#__PURE__*/function(){function lf(){_classCallCheck(this,lf);}_createClass(lf,null,[{key:"calcMatMulShape",value:function calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]];}}]);return lf;}(),hf=/*#__PURE__*/function(){function hf(){_classCallCheck(this,hf);}_createClass(hf,null,[{key:"calcShape",value:function calcShape(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var n=e.length,i=t.length;if(0===n)return t;if(0===i)return e;var o=Math.max(e.length,t.length),a=new Array(o);if(r){if(n<2||i<2)return;var _r330=lf.calcMatMulShape([e[n-2],e[n-1]],[t[i-2],t[i-1]]);if(void 0===_r330)return;var _r331=_slicedToArray(_r330,2);a[o-2]=_r331[0];a[o-1]=_r331[1];}for(var _s53=r?3:1;_s53<=o;_s53++){var _r332=n-_s53<0?1:e[n-_s53],_u40=i-_s53<0?1:t[i-_s53];if(_r332!==_u40&&_r332>1&&_u40>1)return;a[o-_s53]=Math.max(_r332,_u40);}return a;}},{key:"isValidBroadcast",value:function isValidBroadcast(e,t){var r=e.length,n=t.length;if(r>n)return!1;for(var i=1;i<=r;i++)if(1!==e[r-i]&&e[r-i]!==t[n-i])return!1;return!0;}}]);return hf;}(),cf=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);}_createClass(e,null,[{key:"size",value:function size(t){return e.getSizeFromDimensionRange(t,0,t.length);}},{key:"sizeFromDimension",value:function sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error("invalid dimension of ".concat(r," for sizeFromDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,r,t.length);}},{key:"sizeToDimension",value:function sizeToDimension(t,r){if(r<0||r>t.length)throw new Error("invalid dimension of ".concat(r," for sizeToDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,0,r);}},{key:"getSizeFromDimensionRange",value:function getSizeFromDimensionRange(_e853,t,r){var n=1;for(var i=t;i<r;i++){if(_e853[i]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");n*=_e853[i];}return n;}},{key:"computeStrides",value:function computeStrides(_e854){var t=_e854.length;if(0===t)return[];if(1===t)return[1];var r=new Array(t);r[t-1]=1,r[t-2]=_e854[t-1];for(var n=t-3;n>=0;--n)r[n]=r[n+1]*_e854[n+1];return r;}},{key:"normalizeAxis",value:function normalizeAxis(_e855,t){if(_e855<-t&&_e855>=t)throw new Error("unsupported axis for this operation.");return _e855<0?_e855+t:_e855;}},{key:"normalizeAxes",value:function normalizeAxes(_e856,t){var _this150=this;return _e856.map(function(r){return _this150.normalizeAxis(r,t!==null&&t!==void 0?t:_e856.length);});}},{key:"sortBasedOnPerm",value:function sortBasedOnPerm(_e857,t){return t?t.map(function(t){return _e857[t];}):_e857.slice().reverse();}},{key:"padShape",value:function padShape(_e858,t){var r=_e858.length;return _e858.map(function(_e859,n){return _e859+t[n]+t[n+r];});}},{key:"areEqual",value:function areEqual(_e860,t){return _e860.length===t.length&&_e860.every(function(_e861,r){return _e861===t[r];});}}]);return e;}(),df=/*#__PURE__*/function(){function e(){_classCallCheck(this,e);}_createClass(e,null,[{key:"adjustPoolAttributes",value:function adjustPoolAttributes(_e862,t,r,n,i,o){if(!_e862&&r.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(_e862)for(var _e870=0;_e870<t.length-2;_e870++)_e870>=r.length?r.push(t[_e870+2]):r[_e870]=t[_e870+2];for(var _e871=0;_e871<r.length;_e871++)if(_e871<n.length){if(n[_e871]<0)throw new Error("strides should be greater than or equal to 1");}else n.push(1);for(var _e872=0;_e872<r.length;_e872++)if(_e872<i.length){if(i[_e872]<0)throw new Error("dilations should be greater than or equal to 1");}else i.push(1);for(var _e873=0;_e873<2*r.length;_e873++)if(_e873<o.length){if(o[_e873]<0)throw new Error("pad should be greater than or equal to 1");}else o.push(0);for(var _e874=0;_e874<r.length;_e874++){if(r[_e874]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[_e874]>=r[_e874]||o[_e874+r.length]>=r[_e874])throw new Error("pads should be smaller than kernel");}}},{key:"adjustPadsBasedOnAutoPad",value:function adjustPadsBasedOnAutoPad(t,r,n,i,o,a,s){if(s){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var _u41=0;_u41<t.length-2;_u41++)e.adjustPadAndReturnShape(t[_u41+(a?1:2)],r[_u41],n[_u41],i[_u41],o,_u41,_u41+t.length-2,s);}}},{key:"computePoolOutputShape",value:function computePoolOutputShape(t,r,n,i,o,a,s){if(r.length<=0)throw new Error("input shape must be of size greater than 0");var u=[r[0],r[1]];return e.computeShapeHelper(t,r,u,n,i,o,a,s),u;}},{key:"computeConvOutputShape",value:function computeConvOutputShape(t,r,n,i,o,a,s){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[t[0],r[0]];return e.computeShapeHelper(!1,t,u,n,i,o,a,s),u;}},{key:"computeShapeHelper",value:function computeShapeHelper(t,r,n,i,o,a,s,u){if(t)for(var _e875=0;_e875<r.length-2;_e875++)n.push(1);else for(var _t350=0;_t350<r.length-2;_t350++)n.push(e.adjustPadAndReturnShape(r[_t350+2],i[_t350],o[_t350],a[_t350],s,_t350,_t350+r.length-2,u));}},{key:"adjustPadAndReturnShape",value:function adjustPadAndReturnShape(_e869,t,r,n,i,o,a,s){var u=r*(n-1)+1;if(!s||"NOTSET"===s)return Math.floor((_e869+i[o]+i[a]-u)/t+1);switch(s){case"VALID":return i[o]=0,i[a]=0,Math.floor((_e869-u)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==r)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{var _r333=((_e869+t-1)/t-1)*t+n-_e869;return i[o]=Math.floor("SAME_LOWER"===s?(_r333+1)/2:_r333/2),i[a]=_r333-i[o],Math.floor((_e869+_r333-n)/t+1);}default:throw new Error("Unsupported AutoPad type");}}}]);return e;}(),ff=/*#__PURE__*/function(){function ff(){_classCallCheck(this,ff);}_createClass(ff,null,[{key:"getShapeOfGemmResult",value:function getShapeOfGemmResult(e,t,r,n,i){if(2!==e.length||2!==r.length)throw new Error("shape need to be of size 2");var o,a,s;t?(o=e[1],a=e[0]):(o=e[0],a=e[1]);var u=-1;if(n?(s=r[0],u=1):(s=r[1],u=0),r[u]!==a)throw new Error("dimension mismatch");if(o<=0||s<=0||a<=0)throw new Error("invalid shape specified");if(i&&!hf.isValidBroadcast(i,[o,s]))throw new Error("gemm: invalid bias shape for broadcast");return[o,s,a];}}]);return ff;}(),pf=-34028234663852886e22,yf=34028234663852886e22;}),Ab=Mc(function(){gb(),Ib(),64,gf=function gf(e,t){if(3===t)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?"vec".concat(t,"<f16>"):"f16";case 1:return t>1?"vec".concat(t,"<f32>"):"f32";case 6:return t>1?"vec".concat(t,"<i32>"):"i32";case 12:return t>1?"vec".concat(t,"<u32>"):"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(4!==t)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error("Unknown data type: ".concat(e));}},mf=function mf(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=gf(e,t);return"string"==typeof r?r:r[0];},wf=function wf(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=gf(e,t);return"string"==typeof r?r:r[1];},bf=function bf(e){return 0===e.length?[]:[{type:"uint32",data:e},{type:"uint32",data:cf.computeStrides(e)}];},vf=function vf(e){return e%4==0?4:e%2==0?2:1;},xf=function xf(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"f32";var t=arguments.length>1?arguments[1]:undefined;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"0";return t&&1!==t?"vec".concat(t,"<").concat(e,">(").concat(r,")"):"".concat(e,"(").concat(r,")");},_f=function _f(e,t,r){return"f32"===e?r:1===t?"f32(".concat(r,")"):"vec".concat(t,"f(").concat(r,")");},If=function If(e,t){return 4===t?"(".concat(e,".x + ").concat(e,".y + ").concat(e,".z + ").concat(e,".w)"):2===t?"(".concat(e,".x + ").concat(e,".y)"):3===t?"(".concat(e,".x + ").concat(e,".y + ").concat(e,".z)"):e;},Af=function Af(e,t,r){return e.startsWith("uniforms.")&&r>4?"string"==typeof t?"".concat(e,"[(").concat(t,") / 4][(").concat(t,") % 4]"):"".concat(e,"[").concat(Math.floor(t/4),"][").concat(t%4,"]"):r>1?"".concat(e,"[").concat(t,"]"):e;},Sf=function Sf(e,t,r,n,i){var o="number"==typeof r,a=o?r:r.length,s=_toConsumableArray(new Array(a).keys()),u=a<2?"u32":a<=4?"vec".concat(a,"<u32>"):"array<u32, ".concat(a,">"),l=gf(t,i),h="string"==typeof l?l:l[1],c="string"==typeof l?l:l[0],d={indices:u,value:h,storage:c,tensor:t},f=function f(e){return"string"==typeof e?e:"".concat(e,"u");},p={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},y=o?"uniforms.":"",g="".concat(y).concat(e,"_shape"),m="".concat(y).concat(e,"_strides"),w="";for(var _e876=0;_e876<a-1;_e876++)w+="\n    let dim".concat(_e876," = current / ").concat(Af(m,_e876,a),";\n    let rest").concat(_e876," = current % ").concat(Af(m,_e876,a),";\n    indices[").concat(_e876,"] = dim").concat(_e876,";\n    current = rest").concat(_e876,";\n    ");w+="indices[".concat(a-1,"] = current;");var b=a<2?"":"\n  fn o2i_".concat(e,"(offset: u32) -> ").concat(d.indices," {\n    var indices: ").concat(d.indices,";\n    var current = offset;\n    ").concat(w,"\n    return indices;\n  }"),v=[];if(a>=2)for(var _e877=a-1;_e877>=0;_e877--)v.push("".concat(Af(m,_e877,a)," * (indices[").concat(_e877,"])"));var x=a<2?"":"\n  fn i2o_".concat(e,"(indices: ").concat(d.indices,") -> u32 {\n    return ").concat(v.join("+"),";\n  }"),_=function _(){for(var _len16=arguments.length,e=new Array(_len16),_key16=0;_key16<_len16;_key16++){e[_key16]=arguments[_key16];}return 0===a?"0u":"".concat(d.indices,"(").concat(e.map(f).join(","),")");},I=function I(e,t){return a<2?"".concat(e):"".concat(Af(e,t,a));},A={},S=function S(t,r){return function(){if(d.storage===d.value)return"".concat(e,"[").concat(t,"]=").concat(r,";");if("vec2<u32>"===d.storage&&"i32"===d.value)return"".concat(e,"[").concat(t,"]=vec2<u32>(u32(").concat(r,"), select(0u, 0xFFFFFFFFu, ").concat(r," < 0));");if("vec2<u32>"===d.storage&&"u32"===d.value)return"".concat(e,"[").concat(t,"]=vec2<u32>(u32(").concat(r,"), 0u);");if("u32"===d.storage&&"vec4<bool>"===d.value)return"".concat(e,"[").concat(t,"]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(").concat(r,"));");throw new Error("not supported combination of storage type ".concat(d.storage," and value type ").concat(d.value," yet"));}();},T=function T(t){return function(){if(d.storage===d.value)return"".concat(e,"[").concat(t,"]");if("vec2<u32>"===d.storage&&"i32"===d.value)return"i32(".concat(e,"[").concat(t,"].x)");if("vec2<u32>"===d.storage&&"u32"===d.value)return"u32(".concat(e,"[").concat(t,"].x)");if("u32"===d.storage&&"vec4<bool>"===d.value)return"vec4<bool>(bool(".concat(e,"[").concat(t,"] & 0xFFu), bool(").concat(e,"[").concat(t,"] & 0xFF00u), bool(").concat(e,"[").concat(t,"] & 0xFF0000u), bool(").concat(e,"[").concat(t,"] & 0xFF000000u))");throw new Error("not supported combination of storage type ".concat(d.storage," and value type ").concat(d.value," yet"));}();},C=a<2?"":"\n  fn get_".concat(e,"ByIndices(indices: ").concat(d.indices,") -> ").concat(h," {\n    return ").concat(T("i2o_".concat(e,"(indices)")),";\n  }"),E=a<2?"":function(){var t=s.map(function(e){return"d".concat(e,": u32");}).join(", "),r=s.map(function(e){return"d".concat(e);}).join(", ");return"\n  fn get_".concat(e,"(").concat(t,") -> ").concat(h," {\n    return get_").concat(e,"ByIndices(").concat(_(r),");\n  }");}(),O=a<2?"":"\n  fn set_".concat(e,"ByIndices(indices: ").concat(d.indices,", value: ").concat(h,") {\n    ").concat(S("i2o_".concat(e,"(indices)"),"value"),"\n  }"),k=a<2?"":function(){var t=s.map(function(e){return"d".concat(e,": u32");}).join(", "),r=s.map(function(e){return"d".concat(e);}).join(", ");return"\n  fn set_".concat(e,"(").concat(t,", value: ").concat(h,") {\n    set_").concat(e,"ByIndices(").concat(_(r),", value);\n  }");}();return{impl:function impl(){var e=[],t=!1;return p.offsetToIndices&&(e.push(b),t=!0),p.indicesToOffset&&(e.push(x),t=!0),p.broadcastedIndicesToOffset&&(Object.values(A).forEach(function(t){return e.push(t);}),t=!0),p.set&&(e.push(k),t=!0),p.setByIndices&&(e.push(O),t=!0),p.get&&(e.push(E),t=!0),p.getByIndices&&(e.push(C),t=!0),!o&&t&&e.unshift("const ".concat(g," = ").concat(d.indices,"(").concat(r.join(","),");"),"const ".concat(m," = ").concat(d.indices,"(").concat(cf.computeStrides(r).join(","),");")),e.join("\n");},type:d,offsetToIndices:function offsetToIndices(t){return p.offsetToIndices=!0,a<2?t:"o2i_".concat(e,"(").concat(t,")");},indicesToOffset:function indicesToOffset(t){return p.indicesToOffset=!0,a<2?t:"i2o_".concat(e,"(").concat(t,")");},broadcastedIndicesToOffset:function broadcastedIndicesToOffset(t,r){p.broadcastedIndicesToOffset=!0;var n="".concat(r.name,"broadcastedIndicesTo").concat(e,"Offset");if(n in A)return"".concat(n,"(").concat(t,")");var i=[];for(var _e878=a-1;_e878>=0;_e878--){var _t351=r.indicesGet("outputIndices",_e878+r.rank-a);i.push("".concat(I(m,_e878)," * (").concat(_t351," % ").concat(I(g,_e878),")"));}return A[n]="fn ".concat(n,"(outputIndices: ").concat(r.type.indices,") -> u32 {\n             return ").concat(i.length>0?i.join("+"):"0u",";\n           }"),"".concat(n,"(").concat(t,")");},indices:_,indicesGet:I,indicesSet:function indicesSet(e,t,r){return a<2?"".concat(e,"=").concat(r,";"):"".concat(Af(e,t,a),"=").concat(r,";");},set:function set(){for(var _len17=arguments.length,t=new Array(_len17),_key17=0;_key17<_len17;_key17++){t[_key17]=arguments[_key17];}if(t.length!==a+1)throw new Error("indices length must be ".concat(a));var r=t[a];if("string"!=typeof r)throw new Error("value must be string");var n=t.slice(0,a).map(f).join(",");return 0===a?S("0u",r):1===a?S(n[0],r):(p.set=!0,p.setByIndices=!0,p.indicesToOffset=!0,"set_".concat(e,"(").concat(n,", ").concat(r,")"));},setByOffset:S,setByIndices:function setByIndices(t,r){return a<2?S(t,r):(p.setByIndices=!0,p.indicesToOffset=!0,"set_".concat(e,"ByIndices(").concat(t,", ").concat(r,");"));},get:function get(){for(var _len18=arguments.length,t=new Array(_len18),_key18=0;_key18<_len18;_key18++){t[_key18]=arguments[_key18];}if(t.length!==a)throw new Error("indices length must be ".concat(a));var r=t.map(f).join(",");return 0===a?T("0u"):1===a?T(r[0]):(p.get=!0,p.getByIndices=!0,p.indicesToOffset=!0,"get_".concat(e,"(").concat(r,")"));},getByOffset:T,getByIndices:function getByIndices(t){return a<2?T(t):(p.getByIndices=!0,p.indicesToOffset=!0,"get_".concat(e,"ByIndices(").concat(t,")"));},usage:n,name:e,strides:m,shape:g,rank:a};},Tf=function Tf(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return Sf(e,t,r,"input",n);},Cf=function Cf(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return Sf(e,t,r,"output",n);},Ef=function Ef(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return Sf(e,t,r,"internal",n);},Of=/*#__PURE__*/function(){function Of(e){_classCallCheck(this,Of);this.normalizedDispatchGroup=e,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0;}_createClass(Of,[{key:"guardAgainstOutOfBoundsWorkgroupSizes",value:function guardAgainstOutOfBoundsWorkgroupSizes(e){return"if (global_idx >= ".concat("number"==typeof e?"".concat(e,"u"):e,") { return; }");}},{key:"mainStart",value:function mainStart(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:64;var t="number"==typeof e?e:e[0],r="number"==typeof e?1:e[1],n="number"==typeof e?1:e[2],i=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2];return"@compute @workgroup_size(".concat(t,", ").concat(r,", ").concat(n,")\n  fn main(").concat(i?"@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>":"@builtin(local_invocation_id) local_id : vec3<u32>,\n    @builtin(local_invocation_index) local_idx : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(num_workgroups) num_workgroups : vec3<u32>",") {\n    ").concat(i?"let global_idx = global_id.x; let local_idx = local_id.x;":"let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +\n          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ".concat(t*r*n,"u + local_idx;"),"\n  ");}},{key:"appendVariableUniforms",value:function appendVariableUniforms(e){0!==e.rank&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}));}},{key:"declareVariable",value:function declareVariable(e,t){if("internal"===e.usage)throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);var r="input"===e.usage?"read":"read_write",n=e.type.storage;return"@group(0) @binding(".concat(t,") var<storage, ").concat(r,"> ").concat(e.name,": array<").concat(n,">;");}},{key:"declareVariables",value:function declareVariables(){var _this151=this;for(var _len19=arguments.length,e=new Array(_len19),_key19=0;_key19<_len19;_key19++){e[_key19]=arguments[_key19];}return e.map(function(e){return _this151.declareVariable(e,_this151.variableIndex++);}).join("\n");}},{key:"registerInternalVariable",value:function registerInternalVariable(e){if("internal"!==e.usage)throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e);}},{key:"registerInternalVariables",value:function registerInternalVariables(){var _this152=this;for(var _len20=arguments.length,e=new Array(_len20),_key20=0;_key20<_len20;_key20++){e[_key20]=arguments[_key20];}return e.forEach(function(e){return _this152.registerInternalVariable(e);}),this;}},{key:"registerUniform",value:function registerUniform(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return this.uniforms.push({name:e,type:t,length:r}),this;}},{key:"registerUniforms",value:function registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this;}},{key:"uniformDeclaration",value:function uniformDeclaration(){if(0===this.uniforms.length)return"";var e=[];var _iterator67=_createForOfIteratorHelper(this.uniforms),_step67;try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var _step67$value=_step67.value,_t352=_step67$value.name,_r334=_step67$value.type,n=_step67$value.length;if(n&&n>4)e.push("".concat(_t352,":array<vec4<").concat(_r334,">, ").concat(Math.ceil(n/4),">"));else{var i=null==n||1===n?_r334:"vec".concat(n,"<").concat(_r334,">");e.push("".concat(_t352,":").concat(i));}}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}return"\n      struct Uniforms { ".concat(e.join(", ")," };\n      @group(0) @binding(").concat(this.variableIndex,") var<uniform> uniforms: Uniforms;");}},{key:"additionalImplementations",get:function get(){return this.uniformDeclaration()+this.variables.map(function(e){return e.impl();}).join("\n")+this.internalVariables.map(function(e){return e.impl();}).join("\n");}}]);return Of;}(),kf=function kf(e){return new Of(e);},Pf=function Pf(e,t){var r=e.length,n=[];for(var i=0;i<r;i++){var _o92=r-1-i,_a87=e[_o92]||1;(t[t.length-1-i]||1)>1&&1===_a87&&n.unshift(_o92);}return n;},$f=function $f(e){return!0;};}),Sb=Mc(function(){Ib(),_b(),Ab(),Rf=function Rf(e){if(!e||1!==e.length)throw new Error("Transpose requires 1 input.");},Bf=function Bf(e,t){return t&&t.length!==e?_toConsumableArray(new Array(e).keys()).reverse():t;},Df=function Df(e,t){return cf.sortBasedOnPerm(e,Bf(e.length,t));},Mf=function Mf(e,t,r,n){var i=[];i.push("fn perm(i: ".concat(n.type.indices,") -> ").concat(r.type.indices," {\n    var a: ").concat(r.type.indices,";"));for(var _n162=0;_n162<t;++_n162)i.push(r.indicesSet("a",e[_n162],"i[".concat(_n162,"]")));return i.push("return a;}"),i.join("\n");},Lf=function Lf(e,t){var r=e.dataType,n=e.dims.length,i=Bf(n,t),o=$f(n),a=Df(e.dims,i),s=o?a.length:a,u=o?n:e.dims,l=Cf("output",r,s),h=Tf("a",r,u);return{name:"Transpose",shaderCache:{hint:"".concat(t),inputDependencies:o?["rank"]:["dims"]},getRunData:function getRunData(e){var t=cf.size(a);return{outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(t/64)},programUniforms:o?[{type:"uint32",data:t}].concat(_toConsumableArray(bf(e[0].dims)),_toConsumableArray(bf(a))):[{type:"uint32",data:t}]};},getShaderSource:function getShaderSource(e){return"\n  ".concat(e.registerUniform("output_size","u32").declareVariables(h,l),"\n\n  ").concat(Mf(i,n,h,l),"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size"),"\n\n    let indices = ").concat(l.offsetToIndices("global_idx"),";\n    let aIndices = perm(indices);\n\n    ").concat(l.setByOffset("global_idx",h.getByIndices("aIndices")),"\n  }");}};},Ff=function Ff(e,t){Rf(e.inputs),e.compute(Lf(e.inputs[0],t.perm));},Nf=function Nf(e){return uf({perm:e.perm});};}),Tb=Mc(function(){Ib(),Ab(),Cb(),Sb(),Uf={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},jf={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Gf={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},zf={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Vf=function Vf(e,t){var r=[];for(var n=t-e;n<t;++n)r.push(n);return r;},Hf=function Hf(e,t){var r=[],n=e.length;for(var _i128=0;_i128<n;_i128++)-1===t.indexOf(_i128)&&r.push(e[_i128]);var i=t.map(function(t){return e[t];});return[r,i];},Wf=function Wf(e,t){var r=e.length+t.length,n=[],i=0;for(var _o93=0;_o93<r;_o93++)-1===t.indexOf(_o93)?n.push(e[i++]):n.push(1);return n;},Yf=function Yf(e,t){for(var _r335=0;_r335<e.length;++_r335)if(e[e.length-_r335-1]!==t-1-_r335)return!1;return!0;},Kf=function Kf(e,t){var r=[];if(!Yf(e,t)){for(var n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);e.forEach(function(e){return r.push(e);});}return r;},Xf=function Xf(e,t,r,n,i,o,a){var s=r[0].dims,u=cf.size(o),l=cf.size(a),h=Tf("_A",r[0].dataType,s),c=Cf("output",i,o),d="\n          var<workgroup> aBestValues : array<".concat(c.type.storage,", 32>;\n       ");return{name:e,shaderCache:t,getShaderSource:function getShaderSource(e){return"\n        ".concat(e.registerUniform("reduceSize","u32").declareVariables(h,c),"\n        ").concat(d,"\n        fn DIV_CEIL(a : u32, b : u32) -> u32 {\n          return ((a - 1u) / b + 1u);\n         }\n         ").concat(e.mainStart(32),"\n\n          let outputIndex = global_idx / 32;\n          let offset = outputIndex * uniforms.reduceSize;\n\n          var bestValue = ").concat(c.type.storage,"(").concat(Gf[n],");\n          let Length = uniforms.reduceSize;\n          for (var k = local_idx; k < Length; k = k + 32) {\n           let candidate = ").concat(c.type.storage,"(").concat(h.getByOffset("offset + k"),");\n           bestValue = ").concat(Uf[n],";\n          }\n          aBestValues[local_idx] = bestValue;\n          workgroupBarrier();\n\n         var reduceSize = min(Length, 32u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (local_idx < currentSize) {\n            let candidate = aBestValues[local_idx + interval];\n            bestValue = ").concat(jf[n],";\n            aBestValues[local_idx] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (local_idx == 0u) {\n          ").concat(c.setByOffset("outputIndex",""+("mean"===n?"bestValue / ".concat(c.type.storage,"(uniforms.reduceSize)"):"".concat(zf[n]))),";\n         }\n        }");},getRunData:function getRunData(){return{outputs:[{dims:o,dataType:i}],dispatchGroup:{x:u},programUniforms:[{type:"uint32",data:l}]};}};},Zf=function Zf(e,t,r,n){var i=1===e.inputs.length?r:hp(e.inputs,r),o=i.axes;0===o.length&&!i.noopWithEmptyAxes&&(o=e.inputs[0].dims.map(function(e,t){return t;}));var a=cf.normalizeAxes(o,e.inputs[0].dims.length),s=a,u=e.inputs[0],l=Kf(s,e.inputs[0].dims.length);l.length>0&&(u=e.compute(Lf(e.inputs[0],l),{inputs:[0],outputs:[-1]})[0],s=Vf(s.length,u.dims.length));var _Hf=Hf(u.dims,s),_Hf2=_slicedToArray(_Hf,2),h=_Hf2[0],c=_Hf2[1],d=h;i.keepDims&&(d=Wf(h,a)),e.compute(Xf(t,{hint:i.cacheKey,inputDependencies:["type"]},[u],n,e.inputs[0].dataType,d,c),{inputs:[u]});},qf=function qf(e,t){Zf(e,"ReduceMeanShared",t,"mean");},Jf=function Jf(e,t){Zf(e,"ReduceL1Shared",t,"l1");},Qf=function Qf(e,t){Zf(e,"ReduceL2Shared",t,"l2");},ep=function ep(e,t){Zf(e,"ReduceLogSumExpShared",t,"logSumExp");},tp=function tp(e,t){Zf(e,"ReduceMaxShared",t,"max");},rp=function rp(e,t){Zf(e,"ReduceMinShared",t,"min");},np=function np(e,t){Zf(e,"ReduceProdShared",t,"prod");},ip=function ip(e,t){Zf(e,"ReduceSumShared",t,"sum");},op=function op(e,t){Zf(e,"ReduceSumSquareShared",t,"sumSquare");},ap=function ap(e,t){Zf(e,"ReduceLogSumShared",t,"logSum");};}),Cb=Mc(function(){Ib(),_b(),Ab(),Tb(),sp=function sp(e){if(!e||0===e.length||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(2===e.length&&1!==e[1].dims.length)throw new Error("Invalid axes input dims.");},up=function up(e){return["","","var value = ".concat(e.getByIndices("input_indices"),";"),""];},lp=function lp(e,t,r,n,i,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:!1;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:!1;var u=[],l=r[0].dims,h=l.length,c=cf.normalizeAxes(i,h),d=!s&&0===c.length;l.forEach(function(e,t){d||c.indexOf(t)>=0?a&&u.push(1):u.push(e);});var f=u.length,p=cf.size(u);return{name:e,shaderCache:t,getShaderSource:function getShaderSource(e){var t=[],i=Tf("_A",r[0].dataType,h),s=Cf("output",o,f),u=n(i,s,c),p=u[2];for(var _e879=0,_r336=0;_e879<h;_e879++)d||c.indexOf(_e879)>=0?(a&&_r336++,p="for(var j".concat(_e879,": u32 = 0; j").concat(_e879," < ").concat(l[_e879],"; j").concat(_e879,"++) {\n                  ").concat(u[2].includes("last_index")?"let last_index = j".concat(_e879,";"):"","\n                  ").concat(i.indicesSet("input_indices",_e879,"j".concat(_e879)),"\n                  ").concat(p,"\n                }")):(t.push("".concat(i.indicesSet("input_indices",_e879,s.indicesGet("output_indices",_r336)),";")),_r336++);return"\n\n        ".concat(e.registerUniform("output_size","u32").declareVariables(i,s),"\n\n        ").concat(e.mainStart(),"\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size"),"\n          var input_indices: ").concat(i.type.indices,";\n          let output_indices = ").concat(s.offsetToIndices("global_idx"),";\n\n          ").concat(t.join("\n"),"\n          ").concat(u[0],"       // init ops for reduce max/min\n          ").concat(u[1],"\n          ").concat(p,"\n          ").concat(u[3],"\n          ").concat(4===u.length?s.setByOffset("global_idx","value"):u.slice(4).join("\n"),"\n        }");},getRunData:function getRunData(){return{outputs:[{dims:u,dataType:o}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:[{type:"uint32",data:p}].concat(_toConsumableArray(bf(l)),_toConsumableArray(bf(u)))};}};},hp=function hp(e,t){var r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(function(e){return r.push(Number(e));}),uf({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes});},cp=function cp(e,t,r,n){var i=e.inputs,o=1===i.length?r:hp(i,r);e.compute(lp(t,{hint:o.cacheKey,inputDependencies:["rank"]},[i[0]],o.noopWithEmptyAxes&&0===o.axes.length?up:n,o.axes,i[0].dataType,o.keepDims,o.noopWithEmptyAxes),{inputs:[0]});},dp=function dp(e,t){sp(e.inputs),cp(e,"ReduceLogSum",t,function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += ".concat(e.getByIndices("input_indices"),";"),"value = log(value);"];});},fp=function fp(e,t){sp(e.inputs),cp(e,"ReduceL1",t,function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += abs(".concat(e.getByIndices("input_indices"),");"),""];});},pp=function pp(e,t){sp(e.inputs),cp(e,"ReduceL2",t,function(e,t){return["var t = ".concat(t.type.value,"(0); var value = ").concat(t.type.value,"(0);"),"","t = ".concat(e.getByIndices("input_indices"),"; value += (t * t);"),"value = sqrt(value);"];});},yp=function yp(e,t){sp(e.inputs),cp(e,"ReduceLogSumExp",t,function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += exp(".concat(e.getByIndices("input_indices"),");"),"value = log(value);"];});},gp=function gp(e,t){sp(e.inputs),cp(e,"ReduceMax",t,function(e,t,r){var n=[];for(var _t353=0;_t353<e.rank;_t353++)(r.indexOf(_t353)>=0||0===r.length)&&n.push(e.indicesSet("input_indices",_t353,0));return["".concat(n.join("\n")),"var value = ".concat(e.getByIndices("input_indices"),";"),"value = max(value, ".concat(e.getByIndices("input_indices"),");"),""];});},mp=function mp(e,t){sp(e.inputs),cp(e,"ReduceMean",t,function(t,r,n){var i=1;for(var _r337=0;_r337<t.rank;_r337++)(n.indexOf(_r337)>=0||0===n.length)&&(i*=e.inputs[0].dims[_r337]);return["var sum = f32(0);","","sum += f32(".concat(t.getByIndices("input_indices"),");"),"let value = ".concat(r.type.value,"(sum / ").concat(i,");")];});},wp=function wp(e,t){sp(e.inputs),cp(e,"ReduceMin",t,function(e,t,r){var n=[];for(var _t354=0;_t354<e.rank;_t354++)(r.indexOf(_t354)>=0||0===r.length)&&n.push("input_indices[".concat(_t354,"] = 0;"));return["".concat(n.join("\n")),"var value = ".concat(e.getByIndices("input_indices"),";"),"value = min(value, ".concat(e.getByIndices("input_indices"),");"),""];});},bp=function bp(e,t){sp(e.inputs),cp(e,"ReduceProd",t,function(e,t){return["var value = ".concat(t.type.storage,"(1);"),"","value *= ".concat(e.getByIndices("input_indices"),";"),""];});},vp=function vp(e,t){sp(e.inputs),cp(e,"ReduceSum",t,function(e,t){return["var value = ".concat(t.type.storage,"(0);"),"","value += ".concat(e.getByIndices("input_indices"),";"),""];});},xp=function xp(e,t){sp(e.inputs),cp(e,"ReduceSumSquare",t,function(e,t){return["var t = ".concat(t.type.value,"(0); var value = ").concat(t.type.value,"(0);"),"","t = ".concat(e.getByIndices("input_indices"),"; value += t * t;"),""];});},_p=function _p(e,t,r){if(0===t.length)return r;var n=1,i=1;for(var _r338=0;_r338<t.length;_r338++)-1===t.indexOf(_r338)?n*=e[_r338]:i*=e[_r338];return i<32&&n>1024;},Ip=function Ip(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?mp(e,t):qf(e,t);},Ap=function Ap(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?fp(e,t):Jf(e,t);},Sp=function Sp(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?pp(e,t):Qf(e,t);},Tp=function Tp(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?yp(e,t):ep(e,t);},Cp=function Cp(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?gp(e,t):tp(e,t);},Ep=function Ep(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?wp(e,t):rp(e,t);},Op=function Op(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?bp(e,t):np(e,t);},kp=function kp(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?vp(e,t):ip(e,t);},Pp=function Pp(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?xp(e,t):op(e,t);},$p=function $p(e,t){_p(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?dp(e,t):ap(e,t);};}),Eb=Mc(function(){gb(),_b(),Cb(),Rp=function Rp(e){if(!e||0===e.length||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(1!==e[0].dataType)throw new Error("Invalid input type.");},Bp=function Bp(e,t){Rp(e.inputs);e.compute(lp("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],function(e,r,n){var i=[];for(var _t355=0;_t355<e.rank;_t355++)(n.indexOf(_t355)>=0||0===n.length)&&i.push("input_indices[".concat(_t355,"] = 0;"));return["".concat(i.join("\n")),"var value = ".concat(e.getByIndices("input_indices"),";\nvar best_index : i32 = 0;"),"if (".concat(e.getByIndices("input_indices")," ").concat(t.selectLastIndex>0?"<=":"<"," value) {\n         value = ").concat(e.getByIndices("input_indices"),";\n         best_index = i32(last_index);\n       }"),"",r.setByOffset("global_idx","best_index")];},[t.axis],7,t.keepDims),{inputs:[0]});},Dp=function Dp(e,t){Rp(e.inputs);e.compute(lp("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],function(e,r,n){var i=[];for(var _t356=0;_t356<e.rank;_t356++)(n.indexOf(_t356)>=0||0===n.length)&&i.push("input_indices[".concat(_t356,"] = 0;"));return["".concat(i.join("\n")),"var value = ".concat(e.getByIndices("input_indices"),";\nvar best_index : i32 = 0;"),"if (".concat(e.getByIndices("input_indices")," ").concat(t.selectLastIndex>0?">=":">"," value) {\n         value = ").concat(e.getByIndices("input_indices"),";\n         best_index = i32(last_index);\n       }"),"",r.setByOffset("global_idx","best_index")];},[t.axis],7,t.keepDims),{inputs:[0]});},Mp=function Mp(e){return uf(e);};}),Ob=Mc(function(){gb(),vb(),Ab(),Lp=function Lp(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5];if(a&&s)throw new Error("Attention cannot have both past and relative_position_bias");if(3!==r.dims.length)throw new Error('Input "input" must have 3 dimensions');var u=r.dims[0],l=r.dims[1],h=r.dims[2];if(1!==i.dims.length)throw new Error('Input "bias" is expected to have 1 dimensions');if(2!==n.dims.length)throw new Error('Input "weights" is expected to have 2 dimensions');if(n.dims[0]!==h)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==n.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');var c=i.dims[0]/3,d=c,f=d;if(t.qkvHiddenSizes.length>0){if(3!==t.qkvHiddenSizes.length)throw new Error("qkv_hidden_sizes attribute should have 3 elements");var _iterator68=_createForOfIteratorHelper(t.qkvHiddenSizes),_step68;try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var _e880=_step68.value;if(_e880%t.numHeads!=0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}c=t.qkvHiddenSizes[0],d=t.qkvHiddenSizes[1],f=t.qkvHiddenSizes[2];}var p=l;if(c!==d)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==c+d+f)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');var y=0;if(a){if(d!==f)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(5!==a.dims.length)throw new Error('Input "past" must have 5 dimensions');if(2!==a.dims[0])throw new Error('Input "past" first dimension must be 2');if(a.dims[1]!==u)throw new Error('Input "past" second dimension must be batch_size');if(a.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(a.dims[4]!==d/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(y=a.dims[3]);}var g=p+y;if(o)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");if(s)throw new Error("relativePositionBias is not supported");return{batchSize:u,sequenceLength:l,pastSequenceLength:y,kvSequenceLength:p,totalSequenceLength:g,maxSequenceLength:-1,inputHiddenSize:h,hiddenSize:c,vHiddenSize:f,headSize:Math.floor(c/t.numHeads),vHeadSize:Math.floor(f/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:0,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1};},Fp=function Fp(e,t,r,n){var i=vf(n),o=64,a=n/i;a<o?o=1:a/8<64&&(o=Math.ceil(a/8));var s=Math.ceil(n/i/o),u=[{type:Nd(t.dataType),data:1/n},{type:"uint32",data:a},{type:"uint32",data:s}],l=mf(t.dataType,i);e.compute({name:"AttentionProbsSoftmax",shaderCache:{hint:"".concat(o,";").concat(l,";").concat(i)},getShaderSource:function getShaderSource(e){var r=Cf("x",t.dataType,t.dims,i),n="thread_max_vector";2===i?n="max(thread_max_vector.x, thread_max_vector.y)":4===i&&(n="max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))");var a=wf(t.dataType),s=[{name:"d_inv",type:a},{name:"d_comp",type:"u32"},{name:"elements_per_wg",type:"u32"}];return"\n  var<workgroup> wgMax: array<f32, ".concat(o,">;\n  var<workgroup> wgSum: array<f32, ").concat(o,">;\n  ").concat(e.registerUniforms(s).declareVariables(r),"\n  ").concat(e.mainStart([o,1,1]),"\n    let localOffset = local_idx * uniforms.elements_per_wg;\n    let offset: u32 = workgroup_id.x * uniforms.d_comp + localOffset;\n\n    var thread_max_vector = ").concat(xf("f32",i,"-3.402823e+38f"),";\n    for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n      thread_max_vector = max(").concat(_f(a,i,"x[offset + i]"),", thread_max_vector);\n    }\n    wgMax[local_idx] = ").concat(n,";\n    workgroupBarrier();\n\n    var maxValue = -3.402823e+38f;\n    for (var i = 0u; i < ").concat(o,"; i++) {\n      maxValue = max(wgMax[i], maxValue);\n    }\n\n    var sumVector = ").concat(xf("f32",i,"0"),";\n    for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n      sumVector += exp(").concat(_f(a,i,"x[offset + i]")," - maxValue);\n    }\n    wgSum[local_idx] = ").concat(If("sumVector",i),";\n    workgroupBarrier();\n\n    var sum: f32 = 0;\n    for (var i = 0u; i < ").concat(o,"; i++) {\n      sum += wgSum[i];\n    }\n\n    if (sum == 0) {\n      for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n        x[offset + i] = ").concat(xf("f32",i,"uniforms.d_inv"),";\n      }\n    } else {\n      for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n        let f32input = ").concat(_f(a,i,"x[offset + i]"),";\n        x[offset + i] = ").concat(r.type.value,"(exp(f32input - maxValue) / sum);\n      }\n    }\n  }");},getRunData:function getRunData(){return{outputs:[],dispatchGroup:{x:r},programUniforms:u};}},{inputs:[t],outputs:[]});},Np=function Np(e,t,r,n,i,o){var a=[i.batchSize,i.numHeads,i.sequenceLength,i.kvSequenceLength+i.pastSequenceLength],s=0===o.scale?1/Math.sqrt(i.headSize):o.scale,u=vf(i.headSize),l=i.headSize/u,h=12,c={x:Math.ceil(i.totalSequenceLength/h),y:Math.ceil(i.sequenceLength/h),z:i.batchSize*i.numHeads},d=Nd(t.dataType),f=[{type:"uint32",data:i.sequenceLength},{type:"uint32",data:l},{type:"uint32",data:i.totalSequenceLength},{type:"uint32",data:i.kvSequenceLength},{type:d,data:s}],p=[t,r],y=e.compute({name:"AttentionProbs",shaderCache:{hint:"".concat(u),inputDependencies:["type","type"]},getRunData:function getRunData(){return{outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:f};},getShaderSource:function getShaderSource(e){var n=Tf("q",t.dataType,t.dims,u),i=Tf("key",r.dataType,r.dims,u),o=Cf("output",t.dataType,a),s=mf(t.dataType),l=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"alpha",type:s}];return"\n  const beta: ".concat(s," = 1.0;\n  const TILE_SIZE = 12u;\n\n  var<workgroup> tileQ: array<").concat(n.type.storage,", 144>;\n  var<workgroup> tileK: array<").concat(n.type.storage,", 144>;\n  ").concat(e.registerUniforms(l).declareVariables(n,i,o),"\n  ").concat(e.mainStart([h,h,1]),"\n    // x holds the N and y holds the M\n    let headIdx = workgroup_id.z;\n    let m = workgroup_id.y * TILE_SIZE;\n    let n = workgroup_id.x * TILE_SIZE;\n    let lm = m + local_id.y;\n    let ln = n + local_id.x;\n\n    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;\n    let kOffset = uniforms.kv_sequence_length * uniforms.K * headIdx + n * uniforms.K;\n\n    var value = ").concat(xf(s,u),";\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m + local_id.y < uniforms.M && w + local_id.x < uniforms.K) {\n        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {\n        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      workgroupBarrier();\n\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = headIdx * uniforms.M * uniforms.N;\n    if (lm < uniforms.M && ln < uniforms.N) {\n      let outputIdx = headOffset + lm * uniforms.N + ln;\n      output[outputIdx] = ").concat(If("value",u)," * uniforms.alpha;\n    }\n  }");}},{inputs:p,outputs:[-1]})[0];return Fp(e,y,i.batchSize*i.numHeads*i.sequenceLength,i.totalSequenceLength),y;},Up=function Up(e,t,r,n){var i=[n.batchSize,n.sequenceLength,n.vHiddenSize],o=12,a={x:Math.ceil(n.vHeadSize/o),y:Math.ceil(n.sequenceLength/o),z:n.batchSize*n.numHeads},s=[{type:"uint32",data:n.sequenceLength},{type:"uint32",data:n.totalSequenceLength},{type:"uint32",data:n.vHeadSize},{type:"uint32",data:n.numHeads},{type:"uint32",data:n.vHiddenSize}];return e.compute({name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:function getRunData(){return{outputs:[{dims:i,dataType:t.dataType,gpuDataType:0}],dispatchGroup:a,programUniforms:s};},getShaderSource:function getShaderSource(e){var n=Tf("probs",t.dataType,t.dims),a=Tf("v",r.dataType,r.dims),s=Cf("output",t.dataType,i);return"\n  const TILE_SIZE = 12u;\n  var<workgroup> tileQ: array<".concat(n.type.value,", 144>;\n  var<workgroup> tileK: array<").concat(n.type.value,", 144>;\n  ").concat(e.registerUniforms([{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}]).declareVariables(n,a,s),"\n  ").concat(e.mainStart([o,o,1]),"\n   let headIdx = workgroup_id.z;\n   let m = workgroup_id.y * TILE_SIZE + local_id.y;\n   let n = workgroup_id.x * TILE_SIZE + local_id.x;\n\n   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;\n   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;\n\n   var value = ").concat(n.type.storage,"(0);\n   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n     if (m < uniforms.M && w + local_id.x < uniforms.K) {\n       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];\n     }\n     if (n < uniforms.N && w + local_id.y < uniforms.K) {\n       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];\n     }\n     workgroupBarrier();\n     for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];\n     }\n     workgroupBarrier();\n   }\n\n   // we need to transpose output from BNSH_v to BSND_v\n   let batchIdx = workgroup_id.z / uniforms.num_heads;\n   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;\n   let headOffset = (batchIdx * uniforms.M * uniforms.num_heads + currentBatchHeadNumber) * uniforms.N;\n   if (m < uniforms.M && n < uniforms.N) {\n     let outputIdx = batchIdx * uniforms.M *uniforms.v_hidden_size + m * uniforms.v_hidden_size\n       + currentBatchHeadNumber * uniforms.N + n;\n     output[outputIdx] = value;\n   }\n  }");}},{inputs:[t,r],outputs:[0]})[0];},jp=function jp(e,t,r,n,i,o,a,s,u,l,h){var c=Np(e,t,r,0,l,h);Up(e,c,n,l);},Gp=function Gp(e,t){var r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],n=t.sequenceLength,i=t.inputHiddenSize,o=t.headSize,a=12,s={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},u=[e.inputs[0],e.inputs[1],e.inputs[2]],l=[{type:"uint32",data:n},{type:"uint32",data:i},{type:"uint32",data:o},{type:"uint32",data:t.numHeads},{type:"uint32",data:t.headSize},{type:"uint32",data:t.hiddenSize},{type:"uint32",data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}];return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:function getRunData(){return{outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:s,programUniforms:l};},getShaderSource:function getShaderSource(e){var t=Cf("output_q",u[0].dataType,r),n=Cf("output_k",u[0].dataType,r),i=Cf("output_v",u[0].dataType,r),o=Tf("input",u[0].dataType,u[0].dims),s=Tf("weight",u[1].dataType,u[1].dims),l=Tf("bias",u[2].dataType,u[2].dims),h=o.type.storage;return"\n  const TILE_SIZE = 12u;\n  var<workgroup> tileInput: array<".concat(h,", 144>;\n  var<workgroup> tileWeightQ: array<").concat(h,", 144>;\n  var<workgroup> tileWeightK: array<").concat(h,", 144>;\n  var<workgroup> tileWeightV: array<").concat(h,", 144>;\n  ").concat(e.registerUniforms([{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}]).declareVariables(o,s,l,t,n,i),"\n  ").concat(e.mainStart([a,a,1]),"\n    let batchIndex = workgroup_id.z / uniforms.num_heads;\n    let headNumber = workgroup_id.z % uniforms.num_heads;\n    let m = workgroup_id.y * TILE_SIZE + local_id.y;\n    let n = workgroup_id.x * TILE_SIZE + local_id.x;\n\n    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;\n    let biasOffsetQ = headNumber * uniforms.head_size;\n    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;\n    let biasOffsetV = uniforms.hidden_size + biasOffsetK;\n\n    var valueQ = ").concat(h,"(0);\n    var valueK = ").concat(h,"(0);\n    var valueV = ").concat(h,"(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m < uniforms.M && w + local_id.x < uniforms.K) {\n        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];\n      }\n      if (n < uniforms.N && w + local_id.y < uniforms.K) {\n        let offset = n + (w + local_id.y) * uniforms.ldb;\n        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];\n        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];\n        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];\n      }\n      workgroupBarrier();\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        let inputTileOffset = TILE_SIZE * local_id.y + k;\n        let weightTileOffset = TILE_SIZE * k + local_id.x;\n        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];\n        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];\n        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = (m * uniforms.N + n) % uniforms.head_size;\n    valueQ += bias[headOffset + biasOffsetQ];\n    valueK += bias[headOffset + biasOffsetK];\n    valueV += bias[headOffset + biasOffsetV];\n\n    let offset = workgroup_id.z * uniforms.M * uniforms.N;\n    if (m < uniforms.M && n < uniforms.N) {\n      let outputIdx = offset + m * uniforms.N + n;\n      output_q[outputIdx] = valueQ;\n      output_k[outputIdx] = valueK;\n      output_v[outputIdx] = valueV;\n    }\n  }");}},{inputs:u,outputs:[-1,-1,-1]});},zp=function zp(e,t){var r=Lp(e.inputs,t),_Gp=Gp(e,r),_Gp2=_slicedToArray(_Gp,3),n=_Gp2[0],i=_Gp2[1],o=_Gp2[2];return jp(e,n,i,o,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t);};}),kb=Mc(function(){id(),Ib(),_b(),Ab(),Vp=function Vp(e,t){if(!e||5!==e.length)throw new Error("BatchNormalization requires 5 inputs");var r=function r(e,t,_r339){var n=t.length;if(n!==e.length)throw new Error("".concat(_r339,": num dimensions != ").concat(n));t.forEach(function(t,n){if(t!==e[n])throw new Error("".concat(_r339,": dim[").concat(n,"] do not match"));});};if(e[0].dims.length>1){var n="NHWC"===t.format?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,n,"Invalid input scale"),r(e[2].dims,n,"Invalid input B"),r(e[3].dims,n,"Invalid input mean"),r(e[4].dims,n,"Invalid input var");}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var");},Hp=function Hp(e,t){var r=t.epsilon,n=t.spatial,i=t.format,o=e[0].dims,a=n?vf(o[o.length-1]):1,s="NHWC"===i&&o.length>1?a:1,u=cf.size(o)/a,l=$f(o.length)&&n,h=l?o.length:o,c=Tf("x",e[0].dataType,e[0].dims,a),d=Tf("scale",e[1].dataType,e[1].dims,s),f=Tf("bias",e[2].dataType,e[2].dims,s),p=Tf("inputMean",e[3].dataType,e[3].dims,s),y=Tf("inputVar",e[4].dataType,e[4].dims,s),g=Cf("y",e[0].dataType,h,a);return{name:"BatchNormalization",shaderCache:{hint:"".concat(t.epsilon,"_").concat(t.format,"_").concat(n,"_").concat(a),inputDependencies:l?["rank","type","type","type","type"]:void 0},getShaderSource:function getShaderSource(e){return"\n  const epsilon = ".concat(r,";\n  ").concat(e.registerUniform("outputSize","u32").declareVariables(c,d,f,p,y,g),"\n  ").concat(e.mainStart(),"\n  ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n    var outputIndices = ").concat(g.offsetToIndices("global_idx * ".concat(a)),";\n    ").concat(function(){var e="";if(n)e="let cOffset = ".concat(1===o.length?"0u":"NHWC"===i?"outputIndices[".concat(o.length-1,"] / ").concat(a):"outputIndices[1]",";");else if("NCHW"===i)e="\n            ".concat(g.indicesSet("outputIndices","0","0"),"\n            let cOffset = ").concat(g.indicesToOffset("outputIndices"),";");else{e="var cIndices = ".concat(d.type.indices,"(0);\n                       cIndices[0] = outputIndices[").concat(o.length-1,"];");for(var _t357=1;_t357<d.rank;_t357++)e+="cIndices[".concat(_t357,"] = outputIndices[").concat(_t357,"];");e+="let cOffset = ".concat(d.indicesToOffset("cIndices"),";");}return e;}(),"\n    let scale = ").concat(d.getByOffset("cOffset"),";\n    let bias = ").concat(f.getByOffset("cOffset"),";\n    let inputMean = ").concat(p.getByOffset("cOffset"),";\n    let inputVar = ").concat(y.getByOffset("cOffset"),";\n    let x = ").concat(c.getByOffset("global_idx"),";\n    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;\n    ").concat(g.setByOffset("global_idx","value"),"\n  }");},getRunData:function getRunData(){return{outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:l?[{type:"uint32",data:u}].concat(_toConsumableArray(bf(o))):[{type:"uint32",data:u}]};}};},Wp=function Wp(e){return uf(e);},Yp=function Yp(e,t){var r=e.inputs,n=e.outputCount,i=Wp(_objectSpread(_objectSpread({},t),{},{outputCount:n}));if(rc.webgpu.validateInputContent&&Vp(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(Hp(r,i));};}),Pb=Mc(function(){Ib(),Ab(),Kp=function Kp(e){if(3!==e[0].dims.length)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(1!==e[1].dims.length)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same");},Xp=function Xp(e){var t=e[0].dims,r=e[0].dims[2],n=cf.size(t)/4,i=e[0].dataType,o=Tf("input",i,t,4),a=Tf("bias",i,[r],4),s=Tf("residual",i,t,4),u=Cf("output",i,t,4);return{name:"BiasAdd",getRunData:function getRunData(){return{outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)}};},getShaderSource:function getShaderSource(e){return"\n  const channels = ".concat(r,"u / 4;\n  ").concat(e.declareVariables(o,a,s,u),"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(n),"\n    let value = ").concat(o.getByOffset("global_idx"),"\n      + ").concat(a.getByOffset("global_idx % channels")," + ").concat(s.getByOffset("global_idx"),";\n    ").concat(u.setByOffset("global_idx","value"),"\n  }");}};},Zp=function Zp(e){Kp(e.inputs),e.compute(Xp(e.inputs));};}),$b=Mc(function(){gb(),Ib(),_b(),Ab(),qp=function qp(e,t,r,n,i,o){var a=Math.ceil(t/4),s="";s="string"==typeof i?"".concat(i,"(a)"):i("a");var u=Tf("inputData",r,[a],4),l=Cf("outputData",n,[a],4);return"\n      ".concat(e.registerUniform("vec_size","u32").declareVariables(u,l),"\n\n  ").concat(o!==null&&o!==void 0?o:"","\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size"),"\n\n    let a = ").concat(u.getByOffset("global_idx"),";\n    ").concat(l.setByOffset("global_idx",s),"\n  }");},Jp=function Jp(e,t,r,n,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:e.dataType;return{name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:function getShaderSource(t){return qp(t,cf.size(e.dims),e.dataType,o,r,n);},getRunData:function getRunData(t){return{outputs:[{dims:e.dims,dataType:o}],dispatchGroup:{x:Math.ceil(cf.size(t[0].dims)/64/4)},programUniforms:[{type:"uint32",data:Math.ceil(cf.size(e.dims)/4)}]};}};},Qp=function Qp(e){e.compute(Jp(e.inputs[0],"Abs","abs"));},ey=function ey(e){e.compute(Jp(e.inputs[0],"Acos","acos"));},ty=function ty(e){e.compute(Jp(e.inputs[0],"Acosh","acosh"));},ry=function ry(e){e.compute(Jp(e.inputs[0],"Asin","asin"));},ny=function ny(e){e.compute(Jp(e.inputs[0],"Asinh","asinh"));},iy=function iy(e){e.compute(Jp(e.inputs[0],"Atan","atan"));},oy=function oy(e){e.compute(Jp(e.inputs[0],"Atanh","atanh"));},ay=function ay(e){return uf(e);},sy=function sy(e,t){var r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError("not supported type (specified in attribute 'to' from 'Cast' operator): ".concat(t.to));}e.compute(Jp(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to));},uy=function uy(e){var t=e.length>=2&&0!==e[1].data?e[1].getFloat32Array()[0]:pf,r=e.length>=3&&0!==e[2].data?e[2].getFloat32Array()[0]:yf;return uf({min:t,max:r});},ly=function ly(e,t){var r=1===e.inputs.length?t:uy(e.inputs),n=wf(e.inputs[0].dataType);e.compute(Jp(e.inputs[0],"Clip",function(e){return"clamp(".concat(e,", clip_min_, clip_max_)");},"\n    const clip_min_: vec4<".concat(n,"> = vec4(").concat(n,"(").concat(r.min,"));\n    const clip_max_: vec4<").concat(n,"> = vec4(").concat(n,"(").concat(r.max,"));\n"),r.cacheKey),{inputs:[0]});},hy=function hy(e){e.compute(Jp(e.inputs[0],"Ceil","ceil"));},cy=function cy(e){e.compute(Jp(e.inputs[0],"Cos","cos"));},dy=function dy(e){e.compute(Jp(e.inputs[0],"Cosh","cosh"));},fy=function fy(e){return uf(e);},py=function py(e,t){var r=wf(e.inputs[0].dataType);e.compute(Jp(e.inputs[0],"Elu",function(e){return"elu_vf32(".concat(e,")");},"\n  const elu_alpha_ = ".concat(r,"(").concat(t.alpha,");\n\n  fn elu_f32(a: ").concat(r,") -> ").concat(r," {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<").concat(r,">) -> vec4<").concat(r,"> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }"),t.cacheKey));},yy=function yy(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"f32";return"\nconst r0: ".concat(t," = 0.3275911;\nconst r1: ").concat(t," = 0.254829592;\nconst r2: ").concat(t," = -0.284496736;\nconst r3: ").concat(t," = 1.421413741;\nconst r4: ").concat(t," = -1.453152027;\nconst r5: ").concat(t," = 1.061405429;\n\nfn erf_vf32(v: ").concat(e,") -> ").concat(e," {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}");},gy=function gy(e){var t=wf(e.inputs[0].dataType);e.compute(Jp(e.inputs[0],"Erf",function(e){return"erf_vf32(".concat(e,")");},yy("vec4<".concat(t,">"),t)));},my=function my(e){e.compute(Jp(e.inputs[0],"Exp","exp"));},wy=function wy(e){e.compute(Jp(e.inputs[0],"Floor","floor"));},by=function by(e){var t=wf(e.inputs[0].dataType);e.compute(Jp(e.inputs[0],"Gelu",function(e){return"0.5 * ".concat(e," * (1.0 + erf_vf32(").concat(e," * 0.7071067811865475))");},yy("vec4<".concat(t,">"),t)));},vy=function vy(e,t){var r=wf(e.inputs[0].dataType);e.compute(Jp(e.inputs[0],"LeakyRelu",function(e){return"select(leaky_relu_alpha_ * ".concat(e,", ").concat(e,", ").concat(e," >= vec4<").concat(r,">(0.0))");},"const leaky_relu_alpha_ = ".concat(r,"(").concat(t.alpha,");"),t.cacheKey));},xy=function xy(e){e.compute(Jp(e.inputs[0],"Not",function(e){return"!".concat(e);}));},_y=function _y(e){e.compute(Jp(e.inputs[0],"Neg",function(e){return"-".concat(e);}));},Iy=function Iy(e){e.compute(Jp(e.inputs[0],"Reciprocal",function(e){return"1.0/".concat(e);}));},Ay=function Ay(e){var t=wf(e.inputs[0].dataType);e.compute(Jp(e.inputs[0],"Relu",function(e){return"select(vec4<".concat(t,">(0.0), ").concat(e,", ").concat(e," > vec4<").concat(t,">(0.0))");}));},Sy=function Sy(e){e.compute(Jp(e.inputs[0],"Sigmoid",function(e){return"(1.0 / (1.0 + exp(-".concat(e,")))");}));},Ty=function Ty(e){e.compute(Jp(e.inputs[0],"Sin","sin"));},Cy=function Cy(e){e.compute(Jp(e.inputs[0],"Sinh","sinh"));},Ey=function Ey(e){e.compute(Jp(e.inputs[0],"Sqrt","sqrt"));},Oy=function Oy(e){e.compute(Jp(e.inputs[0],"Tan","tan"));},ky=function ky(e){e.compute(Jp(e.inputs[0],"Tanh","tanh"));},Py=function Py(e,t){var r=wf(e.inputs[0].dataType);return e.compute(Jp(e.inputs[0],"ThresholdedRelu",function(e){return"select(vec4<".concat(r,">(0.0), ").concat(e,", ").concat(e," > thresholded_relu_alpha_)");},"const thresholded_relu_alpha_ = vec4<".concat(r,">(").concat(t.alpha,");"),t.cacheKey)),0;},$y=function $y(e){e.compute(Jp(e.inputs[0],"Log","log"));};}),Rb=Mc(function(){Ib(),Ab(),$b(),Ry=function Ry(e){if(3!==e[0].dims.length)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(1!==e[1].dims.length)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same");},By=function By(e){var t=e[0].dims.slice();t[2]=t[2]/2;var r=Tf("input",e[0].dataType,e[0].dims,4),n=Tf("bias",e[0].dataType,[e[0].dims[2]],4),i=Cf("output",e[0].dataType,t,4),o=cf.size(t)/4,a=mf(e[0].dataType);return{name:"BiasSplitGelu",getRunData:function getRunData(){return{outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}};},getShaderSource:function getShaderSource(t){return"\n  const M_SQRT2 = sqrt(2.0);\n  const halfChannels = ".concat(e[0].dims[2]/4/2,"u;\n\n  ").concat(t.declareVariables(r,n,i),"\n\n  ").concat(yy("vec4<".concat(a,">"),a),"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(o),"\n    let biasIdx = global_idx % halfChannels;\n    let batchIndex = global_idx / halfChannels;\n    let inputOffset = biasIdx + batchIndex * halfChannels * 2;\n    let valueLeft = input[inputOffset] + bias[biasIdx];\n    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];\n    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);\n\n    ").concat(i.setByOffset("global_idx","valueLeft * geluRight"),"\n  }");}};},Dy=function Dy(e){Ry(e.inputs),e.compute(By(e.inputs));};}),Bb=Mc(function(){gb(),Ib(),Ab(),My=function My(e,t,r,n,i,o,a,s,u,l,h,c,d){var f,p;"string"==typeof s?f=p=function p(e,t){return"".concat(s,"((").concat(e,"),(").concat(t,"))");}:"function"==typeof s?f=p=s:(f=s.scalar,p=s.vector);var y,g=c?t.length:t,m=c?r.length:r,w=c?n.length:n,b=Cf("outputData",h,w,4),v=Tf("aData",u,g,4),x=Tf("bData",l,m,4);if(i){if(o){var _e881=1===cf.size(t),_n163=1===cf.size(r),_i129=t.length>0&&t[t.length-1]%4==0,_o94=r.length>0&&r[r.length-1]%4==0;y=_e881||_n163?b.setByOffset("global_idx",p(_e881?"".concat(v.type.value,"(").concat(v.getByOffset("0"),".x)"):v.getByOffset("global_idx"),_n163?"".concat(x.type.value,"(").concat(x.getByOffset("0"),".x)"):x.getByOffset("global_idx"))):"\n            let outputIndices = ".concat(b.offsetToIndices("global_idx * 4u"),";\n            let offsetA = ").concat(v.broadcastedIndicesToOffset("outputIndices",b),";\n            let offsetB = ").concat(x.broadcastedIndicesToOffset("outputIndices",b),";\n            ").concat(b.setByOffset("global_idx",p(a||_i129?v.getByOffset("offsetA / 4u"):"".concat(v.type.value,"(").concat(v.getByOffset("offsetA / 4u"),"[offsetA % 4u])"),a||_o94?x.getByOffset("offsetB / 4u"):"".concat(x.type.value,"(").concat(x.getByOffset("offsetB / 4u"),"[offsetB % 4u])"))),"\n          ");}else y=b.setByOffset("global_idx",p(v.getByOffset("global_idx"),x.getByOffset("global_idx")));}else{if(!o)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var _e882=function _e882(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var n="aData[indexA".concat(t,"][componentA").concat(t,"]"),i="bData[indexB".concat(t,"][componentB").concat(t,"]");return"\n            let outputIndices".concat(t," = ").concat(b.offsetToIndices("global_idx * 4u + ".concat(t,"u")),";\n            let offsetA").concat(t," = ").concat(v.broadcastedIndicesToOffset("outputIndices".concat(t),b),";\n            let offsetB").concat(t," = ").concat(x.broadcastedIndicesToOffset("outputIndices".concat(t),b),";\n            let indexA").concat(t," = offsetA").concat(t," / 4u;\n            let indexB").concat(t," = offsetB").concat(t," / 4u;\n            let componentA").concat(t," = offsetA").concat(t," % 4u;\n            let componentB").concat(t," = offsetB").concat(t," % 4u;\n            ").concat(e,"[").concat(t,"] = ").concat(r,"(").concat(f(n,i),");\n          ");};y=9===h?"\n            var data = vec4<u32>(0);\n            ".concat(_e882("data",0,"u32"),"\n            ").concat(_e882("data",1,"u32"),"\n            ").concat(_e882("data",2,"u32"),"\n            ").concat(_e882("data",3,"u32"),"\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));"):"\n            ".concat(_e882("outputData[global_idx]",0),"\n            ").concat(_e882("outputData[global_idx]",1),"\n            ").concat(_e882("outputData[global_idx]",2),"\n            ").concat(_e882("outputData[global_idx]",3),"\n          ");}return"\n        ".concat(e.registerUniform("vec_size","u32").declareVariables(v,x,b),"\n\n        ").concat(d!==null&&d!==void 0?d:"","\n\n        ").concat(e.mainStart(),"\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size"),"\n        ").concat(y,"\n      }");},Ly=function Ly(e,t,r,n,i,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:r.dataType;var s=!cf.areEqual(r.dims,n.dims),u=r.dims,l=cf.size(r.dims),h=!1,c=!1,d=[s];if(s){var _e883=hf.calcShape(r.dims,n.dims,!1);if(!_e883)throw new Error("Can't perform binary op on the given tensors");u=_e883,l=cf.size(u);var _t358=1===cf.size(r.dims),_i130=1===cf.size(n.dims),_o95=r.dims.length>0&&r.dims[r.dims.length-1]%4==0,_a88=n.dims.length>0&&n.dims[n.dims.length-1]%4==0;d.push(_t358),d.push(_i130),d.push(_o95),d.push(_a88);var _s54=1;for(var _e884=1;_e884<u.length;_e884++){var _r$dims,_n$dims;var _t359=(_r$dims=r.dims[r.dims.length-_e884])!==null&&_r$dims!==void 0?_r$dims:1;if(_t359!==((_n$dims=n.dims[n.dims.length-_e884])!==null&&_n$dims!==void 0?_n$dims:1))break;_s54*=_t359;}_s54%4==0?(c=!0,h=!0):(_t358||_i130||_o95||_a88)&&(h=!0);}else h=!0;d.push(h);var f=$f(r.dims.length)&&$f(n.dims.length)&&$f(u.length);return{name:e,shaderCache:{hint:t+d.map(function(e){return e.toString();}).join("_"),inputDependencies:f?["rank","rank"]:["dims","dims"]},getShaderSource:function getShaderSource(e){return My(e,r.dims,n.dims,u,h,s,c,i,r.dataType,n.dataType,a,f,o);},getRunData:function getRunData(){return{outputs:[{dims:u,dataType:a}],dispatchGroup:{x:Math.ceil(l/64/4)},programUniforms:f?[{type:"uint32",data:Math.ceil(cf.size(u)/4)}].concat(_toConsumableArray(bf(r.dims)),_toConsumableArray(bf(n.dims)),_toConsumableArray(bf(u))):[{type:"uint32",data:Math.ceil(cf.size(u)/4)}]};}};},Fy=function Fy(e,t,r,n,i,o){e.compute(Ly(t,i!==null&&i!==void 0?i:"",e.inputs[0],e.inputs[1],r,n,o));},Ny=function Ny(e){Fy(e,"Add",function(e,t){return"".concat(e,"+").concat(t);});},Uy=function Uy(e){Fy(e,"Div",function(e,t){return"".concat(e,"/").concat(t);});},jy=function jy(e){Fy(e,"Equal",{scalar:function scalar(e,t){return"u32(".concat(e,"==").concat(t,")");},vector:function vector(e,t){return"vec4<u32>(".concat(e,"==").concat(t,")");}},void 0,void 0,9);},Gy=function Gy(e){Fy(e,"Mul",function(e,t){return"".concat(e,"*").concat(t);});},zy=function zy(e){var t=Tf("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Fy(e,"Pow",{scalar:function scalar(e,t){return"pow_custom(".concat(e,",").concat(t,")");},vector:function vector(e,t){return"pow_vector_custom(".concat(e,",").concat(t,")");}},"\n    fn pow_custom(a : ".concat(t,", b : ").concat(t,") -> ").concat(t," {\n      if (b == ").concat(t,"(0.0)) {\n        return ").concat(t,"(1.0);\n      } else if (a < ").concat(t,"(0.0) && f32(b) != floor(f32(b))) {\n        return ").concat(t,"(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ").concat(t,"(1.0), round(f32(abs(b) % ").concat(t,"(2.0))) != 1.0) * ").concat(t,"(").concat("i32"===t?"round":"","(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<").concat(t,">, b : vec4<").concat(t,">) -> vec4<").concat(t,"> {\n      // TODO: implement vectorized pow\n      return vec4<").concat(t,">(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      "));},Vy=function Vy(e){Fy(e,"Sub",function(e,t){return"".concat(e,"-").concat(t);});},Hy=function Hy(e){Fy(e,"Greater",{scalar:function scalar(e,t){return"u32(".concat(e,">").concat(t,")");},vector:function vector(e,t){return"vec4<u32>(".concat(e,">").concat(t,")");}},void 0,void 0,9);},Wy=function Wy(e){Fy(e,"Less",{scalar:function scalar(e,t){return"u32(".concat(e,"<").concat(t,")");},vector:function vector(e,t){return"vec4<u32>(".concat(e,"<").concat(t,")");}},void 0,void 0,9);},Yy=function Yy(e){Fy(e,"GreaterOrEqual",{scalar:function scalar(e,t){return"u32(".concat(e,">=").concat(t,")");},vector:function vector(e,t){return"vec4<u32>(".concat(e,">=").concat(t,")");}},void 0,void 0,9);},Ky=function Ky(e){Fy(e,"LessOrEqual",{scalar:function scalar(e,t){return"u32(".concat(e,"<=").concat(t,")");},vector:function vector(e,t){return"vec4<u32>(".concat(e,"<=").concat(t,")");}},void 0,void 0,9);};}),Db=Mc(function(){Ib(),_b(),Ab(),Xy=function Xy(e){if(!e||e.length<1)throw new Error("too few inputs");var t=e[0].dataType,r=e[0].dims.length;var _iterator69=_createForOfIteratorHelper(e),_step69;try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var n=_step69.value;if(n.dataType!==t)throw new Error("input tensors should be one type");if(n.dims.length!==r)throw new Error("input tensors should have the same shape");}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}},Zy=function Zy(e,t){return"\n  fn calculateInputIndex(index: u32) -> u32 {\n    let sizeInConcatAxis = array<u32, ".concat(e,"u>(").concat(t,");\n    for (var i: u32 = 0u; i < ").concat(e,"; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ").concat(e,"u;\n  }");},qy=function qy(e,t){var r=e.length,n=[];for(var i=0;i<r;++i){var _o96=t.setByOffset("global_idx",e[i].getByIndices("indices"));1===r?n.push(_o96):0===i?n.push("if (inputIndex == ".concat(i,"u) { ").concat(_o96," }")):i===r-1?n.push("else { ".concat(_o96," }")):n.push("else if (inputIndex == ".concat(i,") { ").concat(_o96," }"));}return n.join("\n");},Jy=function Jy(e,t){var r=e[0].dims.slice();if(t>=r.length||t<-1*r.length)throw new Error("axis specified for concat doesn't match input dimensionality");var n=t<0?r.length+t:t,i=r.slice(0);for(var _t360=1;_t360<e.length;_t360++){var _o97=e[_t360].dims.slice();for(var _e885=0;_e885<r.length;_e885++)if(_e885===n)i[n]+=_o97[_e885];else if(r[_e885]!==_o97[_e885])throw new Error("non concat dimensions must match");}var o=cf.size(i),a=new Array(e.length),s=new Array(e.length),u=e[0].dataType,l=0,h=[],c=[],d=[],f=[{type:"uint32",data:o}];for(var _t361=0;_t361<e.length;++_t361)l+=e[_t361].dims[n],a[_t361]=l,d.push($f(e[_t361].dims.length)),c.push(d[_t361]?e[_t361].dims.length:e[_t361].dims),s[_t361]=Tf("input".concat(_t361),u,c[_t361]),h.push(d[_t361]?"rank":"dims"),f.push({type:"uint32",data:a[_t361]});for(var _t362=0;_t362<e.length;++_t362)d[_t362]&&f.push.apply(f,_toConsumableArray(bf(e[_t362].dims)));var p=$f(i.length);p&&f.push.apply(f,_toConsumableArray(bf(i)));var y=p?i.length:i,g=Cf("output",u,y),m=g.indicesGet("indices",n),w=Array.from(Array(a.length).keys()).map(function(e){return"uniforms.sizeInConcatAxis".concat(e);}).join(",");return{name:"Concat",shaderCache:{hint:"".concat(t),inputDependencies:h},getRunData:function getRunData(){return{outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:f};},getShaderSource:function getShaderSource(t){return"\n\n  ".concat(function(){t.registerUniform("outputSize","u32");for(var _r340=0;_r340<e.length;_r340++)t.registerUniform("sizeInConcatAxis".concat(_r340),"u32");return t.declareVariables.apply(t,s.concat([g]));}(),"\n\n  ").concat(Zy(a.length,w),"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n\n    var indices = ").concat(g.offsetToIndices("global_idx"),";\n\n    let inputIndex = calculateInputIndex(").concat(m,");\n    if (inputIndex != 0u) {\n      let sizeInConcatAxis = array<u32, ").concat(a.length,"u>(").concat(w,");\n      ").concat(m," -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ").concat(qy(s,g),"\n  }");}};},Qy=function Qy(e,t){Xy(e.inputs),e.compute(Jy(e.inputs,t.axis));},eg=function eg(e){return uf({axis:e.axis});};}),Mb=Mc(function(){Ib(),tg=function tg(e,t){switch(e.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, ".concat(t,"(0.0));")};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (".concat(t,"(1.0) / (").concat(t,"(1.0) + exp(-value)));")};case"Clip":return{activationFunction:"const clip_min_=".concat(t,"(").concat(e.clipMin,");const clip_max_=").concat(t,"(").concat(e.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""};}},rg=function rg(e){var t=(e===null||e===void 0?void 0:e.activation)||"";if("Clip"===t){var _ref80=(e===null||e===void 0?void 0:e.activation_params)||[pf,yf],_ref81=_slicedToArray(_ref80,2),_r341=_ref81[0],n=_ref81[1];return{activation:t,clipMax:n,clipMin:_r341,activationCacheKey:"".concat(t,":").concat(_r341,",").concat(n)};}return{activation:t,activationCacheKey:t};};}),Lb=Mc(function(){ng=function ng(e,t){switch(e){case 1:return t;case 2:return"vec2<".concat(t,">");case 3:return"vec3<".concat(t,">");case 4:return"vec4<".concat(t,">");default:throw new Error("".concat(e,"-component is not supported."));}},ig=function ig(e){return"\n      ".concat(e?"value = value + getBiasByOutputCoords(coords);":"","\n      ");};}),Fb=Mc(function(){og=function og(e){return"\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    i32(".concat(e,".x), i32(").concat(e,".y), i32(").concat(e,".z), 1));\n}\n");};}),Nb=Mc(function(){Ib(),Ab(),Mb(),Lb(),ag=function ag(e,t){return e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol".concat(t?", batchIndices":"",");\n        "):"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol".concat(t?", batchIndices":"",");\n        ");},sg=function sg(e,t){return e?"\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ".concat(3===t?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ").concat(3===t?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\n        }"):"\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ".concat(3===t?"":"acc[i] = BCached3 * ACached.w + acc[i];","\n        }");},ug=function ug(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"f32";var n=arguments.length>3?arguments[3]:undefined;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:32;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:!1;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:32;var u=t[1]*e[1],l=t[0]*e[0],h=i?u:o,c=i?o:u,d=h/t[0],f=o/t[1];if((!i||4!==d||4!==e[1])&&(i||3!==d&&4!==d)||h%t[0]!=0||o%t[1]!=0||4!==e[0])throw new Error("If transposeA ".concat(i," is true, innerElementSize ").concat(d," and workPerThread[1] ").concat(e[1]," must be 4.\n      Otherwise, innerElementSize ").concat(d," must be 3 or 4.\n  tileAWidth ").concat(h," must be divisible by workgroupSize[0]").concat(t[0],". tileInner ").concat(o," must be divisible by workgroupSize[1] ").concat(t[1],". colPerThread ").concat(e[0]," must be 4."));return"\nvar<workgroup> mm_Asub: array<array<vec".concat(d,"<").concat(r,">, ").concat(h/d,">, ").concat(c,">;\nvar<workgroup> mm_Bsub: array<array<vec4<").concat(r,">, ").concat(l/e[0],">, ").concat(o,">;\n\nconst rowPerThread = ").concat(e[1],";\nconst colPerThread = ").concat(e[0],";\nconst innerElementSize = ").concat(d,";\nconst tileInner = ").concat(o,";\n\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ").concat(a?"0":"i32(globalId.z)",";\n  ").concat(n?"let batchIndices = ".concat(n.offsetToIndices("u32(batch)"),";"):"","\n  let globalRowStart = i32(workgroupId.y) * ").concat(u,";\n\n  let numTiles = ").concat(a?"".concat(Math.ceil(s/o)):"(uniforms.dimInner - 1) / tileInner + 1",";\n  var kStart = ").concat(a?"i32(globalId.z) * ".concat(s):"0",";\n\n  var acc: array<vec4<").concat(r,">, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ").concat(f,";\n  for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ").concat(ag(i,n),"\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ").concat(f,"; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol").concat(n?", batchIndices":"",");\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ").concat(3===d?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\n\n          ").concat(sg(i,d),"\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}");},lg=function lg(e,t){return e?"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol".concat(t?", batchIndices":"",");\n            "):"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol".concat(t?", batchIndices":"",");\n            ");},hg=function hg(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];";},cg=function cg(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"f32";var n=arguments.length>3?arguments[3]:undefined;var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:32;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:!1;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:32;var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:!1;var l=e[1]*t[1],h=e[0]*t[0],c=i?l:o,d=i?o:l;if(d%t[1]!=0||c%t[0]!=0||o%t[1]!=0)throw new Error("tileAHight ".concat(d," must be divisible by workgroupSize[1]").concat(t[1],", tileAWidth ").concat(c," must be divisible by workgroupSize[0]").concat(t[0],", tileInner ").concat(o," must be divisible by workgroupSize[1]").concat(t[1]));var f=d/t[1],p=c/t[0],y=o/t[1],g=u?"\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ".concat(l,";\n    let globalColStart = i32(workgroupId.x) * ").concat(h,";\n\n    // Loop over shared dimension.\n    for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(d,"; inputRow = inputRow + ").concat(t[1],") {\n        for (var inputCol = localCol; inputCol < ").concat(c,"; inputCol = inputCol + ").concat(t[0],") {\n          ").concat(lg(i,n),"\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(o,"; inputRow = inputRow + ").concat(t[1],") {\n            for (var inputCol = localCol; inputCol < ").concat(h,"; inputCol = inputCol + ").concat(t[0],") {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol").concat(n?", batchIndices":"",");\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<").concat(r,", colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(t[0],"];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ").concat(i?"mm_Asub[k][localRow + innerRow * ".concat(t[1],"];"):"mm_Asub[localRow + innerRow * ".concat(t[1],"][k];"),"\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ").concat(t[1],";\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ").concat(t[0],";\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    "):"\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ".concat(l,";\n\nlet tileRowA = i32(localId.y) * ").concat(f,";\nlet tileColA = i32(localId.x) * ").concat(p,";\nlet tileRowB = i32(localId.y) * ").concat(y,";\n// Loop over shared dimension.\nfor (var t = 0; t < numTiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ").concat(f,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ").concat(p,"; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ").concat(lg(i,n),"\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ").concat(y,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol").concat(n?", batchIndices":"",");\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<").concat(r,", colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ").concat(hg(i),"\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n");return"\n  var<workgroup> mm_Asub : array<array<".concat(r,", ").concat(c,">, ").concat(d,">;\n  var<workgroup> mm_Bsub : array<array<").concat(r,", ").concat(h,">, ").concat(o,">;\n  const rowPerThread = ").concat(e[1],";\n  const colPerThread = ").concat(e[0],";\n  const tileInner = ").concat(o,";\n\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ").concat(a?"0":"i32(globalId.z)",";\n    ").concat(n?"let batchIndices = ".concat(n.offsetToIndices("u32(batch)"),";"):"","\n    let numTiles = ").concat(a?"".concat(Math.ceil(s/o)):"(uniforms.dimInner - 1) / tileInner + 1",";\n    var kStart = ").concat(a?"i32(globalId.z) * ".concat(s):"0",";\n\n    var acc : array<array<").concat(r,", colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ").concat(g,"\n  }\n");},dg=function dg(e,t,r,n,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:!1;var _i131=_slicedToArray(i,3),a=_i131[0],s=_i131[1],u=_i131[2],_n164=_slicedToArray(n,4),l=_n164[0],h=_n164[1],c=_n164[2],d=_n164[3],f=Pf(a,u),p=Pf(s,u),y=mf(n[0].type.tensor);return"\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ".concat(l.type.indices,") -> ").concat(ng(e,y)," {\n      var value = ").concat(ng(e,y),"(0.0);\n      let col = colIn * ").concat(e,";\n      if(row < uniforms.dimAOuter && col < uniforms.dimInner)\n      {\n        ").concat(function(){var e=h.rank,t=l.rank,r="var aIndices: ".concat(h.type.indices,";");for(var _n165=e-2-1,_i132=t-1;_n165>=0;_n165--,_i132--)r+="\naIndices[".concat(_n165,"] = ").concat(t>1?"batchIndices[".concat(_i132,"]"):"batchIndices",";");return f.forEach(function(e){r+="\naIndices[".concat(e,"] = 0;");}),r+="\naIndices[".concat(e-2,"] = u32(row);\n                   aIndices[").concat(e-1,"] = u32(colIn);"),r;}(),"\n        value = ").concat(h.getByIndices("aIndices"),";\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ").concat(l.type.indices,") -> ").concat(ng(e,y)," {\n      var value = ").concat(ng(e,y),"(0.0);\n      let col = colIn * ").concat(e,";\n      if(row < uniforms.dimInner && col < uniforms.dimBOuter)\n      {\n        ").concat(function(){var e=c.rank,t=l.rank,r="var bIndices: ".concat(c.type.indices,";");for(var _n166=e-2-1,_i133=t-1;_n166>=0;_n166--,_i133--)r+="\nbIndices[".concat(_n166,"] = ").concat(t>1?"batchIndices[".concat(_i133,"]"):"batchIndices",";");return p.forEach(function(e){r+="\nbIndices[".concat(e,"] = 0;");}),r+="\nbIndices[".concat(e-2,"] = u32(row);\n                   bIndices[").concat(e-1,"] = u32(colIn);"),r;}(),"\n        value = ").concat(c.getByIndices("bIndices"),";\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ").concat(ng(e,y),") {\n      let col = colIn * ").concat(e,";\n      if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ").concat(t?"value = value + ".concat(o?"bias[colIn]":"".concat(ng(e,y),"(bias[row])"),";"):"","\n        ").concat(r,"\n        ").concat(d.setByIndices("vec3<u32>(coords)","value"),"\n      }\n    }\n    ");},fg=function fg(e,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;var o=e[0].dims,a=e[1].dims,s=o.slice(0,-2),u=a.slice(0,-2),l=n?n.slice(0,-2):r.slice(0,-2),h=$f(l.length),c=h?l.length:l,d=Ef("batchDims",e[0].dataType,c,1),f=cf.size(l),p=o[o.length-2],y=o[o.length-1],g=a[a.length-1],m=y%4==0&&g%4==0,w=p<=8?[4,1,1]:[4,4,1],b=[8,8,1],v=[Math.ceil(g/b[0]/w[0]),Math.ceil(p/b[1]/w[1]),Math.ceil(f/b[2]/w[2])],x=mf(e[0].dataType),_=m?4:1,I=[].concat(_toConsumableArray(s),[p,y/_]),A=$f(I.length),S=A?I.length:I,T=[].concat(_toConsumableArray(u),[y,g/_]),C=$f(T.length),E=C?T.length:T,O=[f,p,g/_],k=Tf("a",e[0].dataType,S,_),P=Tf("b",e[1].dataType,E,_),$=Cf("result",e[0].dataType,O.length,_),R=[k,P],B=[{type:"int32",data:p},{type:"int32",data:g},{type:"int32",data:y}];h&&B.push.apply(B,_toConsumableArray(bf(l))),A&&B.push.apply(B,_toConsumableArray(bf(I))),C&&B.push.apply(B,_toConsumableArray(bf(T)));var D=[];D.push(A?"rank":"dims"),D.push(C?"rank":"dims");var M=e.length>2,_tg=tg(t,$.type.value),L=_tg.activationFunction,F=_tg.applyActivation,N=dg(_,M,F,[d,k,P,$],[s,u,l],i);if(M){var _t363=i?_:1;R.push(Tf("bias",e[2].dataType,e[2].dims.length,_t363)),B.push.apply(B,_toConsumableArray(bf(e[2].dims))),D.push("rank");}B.push.apply(B,_toConsumableArray(bf(O)));return{name:"MatMul",shaderCache:{hint:t.activationCacheKey+"".concat(w).concat(m).concat(i),inputDependencies:D},getRunData:function getRunData(){return{outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:v[0],y:v[1],z:v[2]},programUniforms:B};},getShaderSource:function getShaderSource(e){var _e$registerUniform$re;return"\n  ".concat((_e$registerUniform$re=e.registerUniform("dimAOuter","i32").registerUniform("dimBOuter","i32").registerUniform("dimInner","i32").registerInternalVariables(d)).declareVariables.apply(_e$registerUniform$re,R.concat([$])),"\n  ").concat(L,"\n  ").concat(N,"\n  ").concat(m?ug(w,b,x,d):cg(w,b,x,d),"\n                   ");}};};}),Ub=Mc(function(){wb(),Ab(),Mb(),Lb(),Fb(),Nb(),pg=function pg(e,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;var o=arguments.length>5?arguments[5]:undefined;var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:4;var s=arguments.length>7&&arguments[7]!==undefined?arguments[7]:4;var u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:4;var l=arguments.length>9&&arguments[9]!==undefined?arguments[9]:"f32";var h=e?"\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    ":"\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    ",c=e?"\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    ":"\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    ",d=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",f=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",p=e?"row":"col",y=e?"col":"row",g="\n    let inChannels = i32(uniforms.w_shape[2]);\n    let outWidth = ".concat(e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])",";\n    let outRow = ").concat(p," / outWidth;\n    let outCol = ").concat(p," % outWidth;\n\n    let WRow = ").concat(y," / (filterDims[1] * inChannels);\n    let WCol = ").concat(y," / inChannels % filterDims[1];\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\n    let xCh = ").concat(y," % inChannels;\n    var resData = ").concat(ng(a,l),"(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the 'same' padding type.\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(f,") {\n      ").concat(h,"\n      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));\n      ").concat(function(e){switch(e){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<".concat(l,">(x[xIndex], x[xIndex + 1], x[xIndex + 2]);");case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(e," is not supported."));}}(a),"\n    }\n    return resData;"),m=e?t&&n?"\n    let col = colIn * ".concat(a,";\n    ").concat(g):"\n    let col = colIn * ".concat(a,";\n    if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n      ").concat(g,"\n    }\n    return ").concat(ng(a,l),"(0.0);"):n&&r?"\n    let col = colIn * ".concat(a,";\n    ").concat(g):"\n    let col = colIn * ".concat(a,";\n    if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n      ").concat(g,"\n    }\n    return ").concat(ng(a,l),"(0.0);"),w="".concat(function(e){switch(e){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error("innerElementSize ".concat(e," is not supported."));}}(s)),b=ng(u,l),v=ng(e?a:s,l),x=ng(e?s:a,l),_tg2=tg(o,b),_=_tg2.activationFunction,I=_tg2.applyActivation;return"\n    ".concat(_,"\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(v," {\n      ").concat(e?m:w,"\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(x," {\n      ").concat(e?w:m,"\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(b,") {\n      let col = colIn * ").concat(u,";\n      if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n      {\n      var value = valueIn;\n      let outWidth = ").concat(e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])",";\n      ").concat(c,"\n      ").concat(ig(i),"\n      ").concat(I,"\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }");},yg=function yg(e,t,r,n,i,o,a,s){var u="NHWC"===t.format,l=u?e[0].dims[3]:e[0].dims[1],h=r[0],c=u?r[2]:r[3],d=u?r[1]:r[2],f=u?r[3]:r[1],p=u&&(l%4==0||l%3==0)&&f%4==0,y=u?f:c*d,g=u?c*d:f,m=[8,8,1],w=n<=8?[4,1,1]:[4,4,1],b=[Math.ceil(y/m[0]/w[0]),Math.ceil(g/m[1]/w[1]),Math.ceil(h/m[2]/w[2])];Jd("verbose",function(){return"[conv2d_mm_webgpu] dispatch = ".concat(b);});var v=p?u&&l%4!=0?3:4:1,x=m[1]*w[1],_=m[0]*w[0],I=Math.max(m[0]*v,m[1]),A=n%x==0,S=i%_==0,T=o%I==0,C=p?[v,4,4]:[1,1,1],E=mf(e[0].dataType),O=p?4:1,k=[{type:"int32",data:n},{type:"int32",data:i},{type:"int32",data:o}],P=[Tf("x",e[0].dataType,e[0].dims.length,3===v?1:v),Tf("w",e[1].dataType,e[1].dims.length,O)];k.push.apply(k,_toConsumableArray(bf(e[0].dims))),k.push.apply(k,_toConsumableArray(bf(e[1].dims)));var $="\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(p?"vec4<".concat(E,">"):E,") {\n        result[flatIndex] = ").concat(p?"vec4<".concat(E,">"):E,"(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(p?"vec4<".concat(E,">"):E,") {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ").concat(p?"/ 4":"",", value);\n      }");if(a){var _t364=Tf("bias",e[2].dataType,e[2].dims.length,O);P.push(_t364),k.push.apply(k,_toConsumableArray(bf(e[2].dims))),$+="\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(p?"vec4<".concat(E,">"):E," {\n          return bias[coords.").concat(u?"w":"y").concat(p?"/ 4":"","];\n        }");}var R=Cf("result",e[0].dataType,r.length,O);return k.push.apply(k,_toConsumableArray(bf(r))),{name:"Conv2DMatMul",shaderCache:{hint:t.cacheKey},getRunData:function getRunData(){return{outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:b[0],y:b[1],z:b[2]},programUniforms:k};},getShaderSource:function getShaderSource(e){var _e$registerUniform$re2;return"\n        ".concat(og("uniforms.result_strides"),"\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ").concat((_e$registerUniform$re2=e.registerUniform("dimAOuter","i32").registerUniform("dimBOuter","i32").registerUniform("dimInner","i32")).declareVariables.apply(_e$registerUniform$re2,P.concat([R])),"\n        const filterDims : vec2<i32> = vec2<i32>(").concat(t.kernelShape[0],", ").concat(t.kernelShape[1],");\n        const pad : vec2<i32> = vec2<i32>(").concat(t.pads[0],", ").concat(t.pads[1],");\n        const stride : vec2<i32> = vec2<i32>(").concat(t.strides[0],", ").concat(t.strides[1],");\n        const dilation : vec2<i32> = vec2<i32>(").concat(t.dilations[0],", ").concat(t.dilations[1],");\n        ").concat($,"\n        ").concat(pg(u,A,S,T,a,t,C[0],C[1],C[2],E),"\n            ").concat(p?ug(w,m,E,void 0,!u,I):cg(w,m,E,void 0,!u,I,!1,void 0,s));}};};}),jb=Mc(function(){Ib(),Ab(),zb(),Mb(),gg=function gg(e,t,r){var n=e.length>2,i=n?"value += b[output_channel];":"",o=e[0].dims,a=e[1].dims,s=a[0]/t.group,u="NHWC"===t.format,l=vg(o,a,t.dilations,t.pads,t.strides,u),h=cf.size(l),c=Cf("output",e[0].dataType,l),_tg3=tg(t,c.type.value),d=_tg3.activationFunction,f=_tg3.applyActivation,p=Tf("x",e[0].dataType,o),y=Tf("w",e[1].dataType,a),g=[p,y];n&&g.push(Tf("b",e[2].dataType,e[2].dims));return{name:"GroupedConv",shaderCache:{hint:t.cacheKey},getRunData:function getRunData(){return{outputs:[{dims:r?r(l):l,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)}};},getShaderSource:function getShaderSource(e){return"\n  const strides: vec2<u32> = vec2(".concat(t.strides[0],"u, ").concat(t.strides[1],"u);\n  const pads: vec2<u32> = vec2(").concat(t.pads[0],"u, ").concat(t.pads[1],"u);\n\n  ").concat(e.declareVariables.apply(e,g.concat([c])),"\n\n  ").concat(d,"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(h),"\n\n    let outputIndices = ").concat(c.offsetToIndices("global_idx"),";\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[").concat(u?3:1,"];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(u?1:2,"], outputIndices[").concat(u?2:3,"]) * strides - pads;\n    let group_id: u32 = output_channel / ").concat(s,"u;\n\n    var value: ").concat(c.type.value," = ").concat(c.type.value,"(0);\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(a[1],"u; wInChannel++) {\n      let input_channel = group_id * ").concat(a[1],"u + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < ").concat(a[2],"u; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * ").concat(t.dilations[0],"u;\n\n        if (xHeight < 0u || xHeight >= ").concat(o[u?1:2],"u) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < ").concat(a[3],"u; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * ").concat(t.dilations[1],"u;\n          if (xWidth < 0u || xWidth >= ").concat(o[u?2:3],"u) {\n            continue;\n          }\n\n          let xVal = ").concat(u?p.get("batch","xHeight","xWidth","input_channel"):p.get("batch","input_channel","xHeight","xWidth"),";\n          let wVal = ").concat(y.get("output_channel","wInChannel","wHeight","wWidth"),";\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(i,"\n    ").concat(f,"\n    ").concat(c.setByOffset("global_idx","value"),"\n  }");}};};}),Gb=Mc(function(){Ib(),Nb(),Ab(),Mb(),mg=function mg(e,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;var o=e[0].dims,a=e[1].dims,s=o[o.length-2],u=a[a.length-1],l=o[o.length-1],h=vf(u),c=vf(l),d=vf(s),f=cf.size(r)/h/d,p=e.length>2,y=n?n.slice(0,-2):r.slice(0,-2),g=[cf.size(y),s,u],m=[{type:"uint32",data:f},{type:"uint32",data:s},{type:"uint32",data:u},{type:"uint32",data:l}].concat(_toConsumableArray(bf(y)),_toConsumableArray(bf(o)),_toConsumableArray(bf(a)));p&&m.push.apply(m,_toConsumableArray(bf(e[2].dims))),m.push.apply(m,_toConsumableArray(bf(g)));return{name:"MatMulNaive",shaderCache:{hint:"".concat(t.activationCacheKey,"_").concat(h,"_").concat(c,"_").concat(d,"_").concat(i),inputDependencies:p?["rank","rank","rank"]:["rank","rank"]},getRunData:function getRunData(){return{outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:m};},getShaderSource:function getShaderSource(n){var _n$registerUniform$re;var s=Ef("batch_dims",e[0].dataType,y.length),u=Tf("a",e[0].dataType,o.length,c),l=Tf("b",e[1].dataType,a.length,h),f=Cf("output",e[0].dataType,g.length,h),_tg4=tg(t,f.type.value),m=_tg4.activationFunction,w=_tg4.applyActivation,b=[u,l],v="";if(p){var _t365=i?h:1;b.push(Tf("bias",e[2].dataType,e[2].dims.length,_t365)),v=""+(i?"value += bias[col / ".concat(_t365,"];"):"value += ".concat(f.type.value,"(bias[row + i]);"));}var x=o.slice(0,-2),_=a.slice(0,-2),I=Pf(x,y),A=Pf(_,y),S=function S(e,t){var r=e.rank,n=e.name;if(2===r)return"var ".concat(n,"_indices = ").concat(e.type.indices,"(0u, 0u);");var i=s.rank,o="var ".concat(n,"_indices: ").concat(e.type.indices,";");for(var _e886=r-2-1,_t366=i-1;_e886>=0;_e886--,_t366--)o+="\n".concat(n,"_indices[").concat(_e886,"] = ").concat(i>1?"batch_indices[".concat(_t366,"]"):"batch_indices",";");return t.forEach(function(e){o+="\n".concat(n,"_indices[").concat(e,"] = 0;");}),o+="".concat(n,"_indices[").concat(r-2,"] = 0u;\n                     ").concat(n,"_indices[").concat(r-1,"] = 0u;"),o;};return"\n  ".concat((_n$registerUniform$re=n.registerUniform("outputSize","u32").registerUniform("M","u32").registerUniform("N","u32").registerUniform("K","u32").registerInternalVariables(s)).declareVariables.apply(_n$registerUniform$re,b.concat([f])),"\n  ").concat(m,"\n  ").concat(n.mainStart(),"\n    ").concat(n.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n    let col = (global_idx % (uniforms.N / ").concat(h,")) * ").concat(h,";\n    var index1 = global_idx / (uniforms.N / ").concat(h,");\n    let stride1 = uniforms.M / ").concat(d,";\n    let row = (index1 % stride1) * ").concat(d,";\n    let batch = index1 / stride1;\n\n    ").concat(2===r.length?"":"let batch_indices = ".concat(s.offsetToIndices("batch"),";"),"\n    ").concat(S(u,I),"\n    let a_offset = ").concat(u.indicesToOffset("a_indices"),";\n    ").concat(S(l,A),"\n    let b_offset = ").concat(l.indicesToOffset("b_indices"),";\n    var values: array<").concat(f.type.value,", ").concat(d,">;\n    for (var k: u32 = 0u; k < uniforms.K; k = k + ").concat(c,") {\n      ").concat(function(){var e="var a_data: ".concat(u.type.value,";");for(var _t367=0;_t367<c;_t367++)e+="\n              let b_data".concat(_t367," = b[(b_offset + (k + ").concat(_t367,") * uniforms.N + col) / ").concat(h,"];");for(var _t368=0;_t368<d;_t368++){e+="a_data = a[(a_offset + (row + ".concat(_t368,") * uniforms.K + k) / ").concat(c,"];");for(var _r342=0;_r342<c;_r342++)e+="\n            values[".concat(_t368,"] = fma(").concat(l.type.value,"(a_data").concat(1===c?"":"[".concat(_r342,"]"),"), b_data").concat(_r342,", values[").concat(_t368,"]);\n");}return e;}(),"\n    }\n    for (var i = 0u; i < ").concat(d,"u; i++) {\n      var value = values[i];\n      ").concat(v,"\n      ").concat(w,"\n      let cur_indices = ").concat(f.type.indices,"(batch, row + i, col);\n      let offset = ").concat(f.indicesToOffset("cur_indices"),";\n      ").concat(f.setByOffset("offset / ".concat(h),"value"),";\n    }\n  }\n  ");}};},wg=function wg(e){if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");},bg=function bg(e){wg(e.inputs);var t=hf.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");var r=t[t.length-1],n=e.inputs[0].dims[e.inputs[0].dims.length-1];r<8&&n<8?e.compute(mg(e.inputs,{activation:"",activationCacheKey:""},t)):e.compute(fg(e.inputs,{activation:"",activationCacheKey:""},t));};}),zb=Mc(function(){Ib(),_b(),Ub(),Nb(),jb(),Mb(),Gb(),Sb(),vg=function vg(e,t,r,n,i,o){var a=e[0],s=e.slice(o?1:2,o?3:4),u=s.length,l=t[0],h=t.slice(2).map(function(e,t){return e+(e-1)*(r[t]-1);}),c=s.map(function(e,t){return e+n[t]+n[t+u];}).map(function(e,t){return Math.floor((e-h[t]+i[t])/i[t]);});return c.splice(0,0,a),c.splice(o?3:1,0,l),c;},xg=[2,3,1,0],_g=function _g(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===t.format?e[0].dims.length-1:1]!==e[1].dims[1]*t.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");var r=e[0].dims.length-2;if(t.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(t.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(t.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");},Ig=function Ig(e,t){var r=e.kernelShape.slice();for(var _e887=2;_e887<t[1].dims.length;++_e887)0===r[_e887-2]&&(r[_e887-2]=t[1].dims[_e887]);var n=e.pads.slice();df.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,"NHWC"===e.format,e.autoPad);var i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:n,cacheKey:e.cacheKey}),i;},Ag=function Ag(e){var t=rg(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,o=e.group,a=e.kernel_shape,s=e.pads,u=e.strides,l=e.w_is_const();return uf(_objectSpread({autoPad:n,format:r,dilations:i,group:o,kernelShape:a,pads:s,strides:u,wIsConst:l},t));},Sg=function Sg(e,t,r){var _e$kernelCustomData$w2;var n=Ig(r,t),i="NHWC"===r.format;if(1!==r.group)return void e.compute(gg(t,n));var o=3===t.length,a=t[0].dims[i?1:2],s=t[0].dims[i?2:3],u=t[0].dims[i?3:1],l=t[1].dims[2],h=t[1].dims[3],c=vg(t[0].dims,t[1].dims,r.dilations,n.pads,r.strides,i),d=c[i?1:2],f=c[i?2:3],p=c[i?3:1],y=i&&l===a&&h===s&&0===r.pads[0]&&0===r.pads[1];if(y||1===l&&1===h&&1===r.dilations[0]&&1===r.dilations[1]&&1===r.strides[0]&&1===r.strides[1]&&0===r.pads[0]&&0===r.pads[1]){var _l31,_h26,_g7,_m5=c[0],_w4=[];if(i){var _e$kernelCustomData$w;var _n167=(_e$kernelCustomData$w=e.kernelCustomData.wT)!==null&&_e$kernelCustomData$w!==void 0?_e$kernelCustomData$w:e.compute(Lf(t[1],xg),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=_n167),y){var _e888=a*s*u;_l31=t[0].reshape([1,_m5,_e888]),_h26=_n167.reshape([1,_e888,p]),_g7=[1,_m5,p];}else _l31=t[0].reshape([_m5,a*s,u]),_h26=_n167.reshape([1,u,p]),_g7=[_m5,d*f,p];_w4.push(_l31),_w4.push(_h26);}else _l31=t[0].reshape([_m5,u,a*s]),_h26=t[1].reshape([1,p,u]),_g7=[_m5,p,d*f],_w4.push(_h26),_w4.push(_l31);o&&_w4.push(t[2]);var _b6=_g7[2],_v5=_w4[0].dims[_w4[0].dims.length-1];return void(_b6<8&&_v5<8?e.compute(mg(_w4,n,c,_g7,i),{inputs:_w4}):e.compute(fg(_w4,n,c,_g7,i),{inputs:_w4}));}var g=(_e$kernelCustomData$w2=e.kernelCustomData.wT)!==null&&_e$kernelCustomData$w2!==void 0?_e$kernelCustomData$w2:e.compute(Lf(t[1],xg),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=g);var m=[t[0],g];o&&m.push(t[2]);var w=i?d*f:p,b=i?p:d*f,v=l*h*u;e.compute(yg(m,n,c,w,b,v,o,!0),{inputs:m});},Tg=function Tg(e,t){var r="NHWC"===t.format,n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===e.inputs.length&&n.push(e.inputs[2]);var i=[0,t.pads[0],0,t.pads[1]],o=[1].concat(t.strides),a=[1].concat(t.dilations),s=[1].concat(t.kernelShape),u=Ig(_objectSpread(_objectSpread({},t),{},{pads:i,strides:o,dilations:a,kernelShape:s}),n);e.compute(gg(n,u,function(e){return r?[e[0],e[2],e[3]]:[];}));},Cg=function Cg(e,t){_g(e.inputs,t),3===e.inputs[0].dims.length?Tg(e,t):Sg(e,e.inputs,t);};}),Vb=Mc(function(){wb(),Ab(),Mb(),Lb(),Fb(),Nb(),Eg=function Eg(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var r=arguments.length>2?arguments[2]:undefined;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4;var i=ng(n,"f32"),o=e?"\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    ":"\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    ",a=e?"row":"col",s=e?"col":"row",u="\n      let inChannels = ".concat(e?"outBackprop[3]":"outBackprop[1]",";\n      let outWidth = ").concat(e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])",";\n      let outRow = ").concat(a," / outWidth;\n      let outCol = ").concat(a," % outWidth;\n\n      let WRow = ").concat(s," / (filterDims[1] * inChannels);\n      let WCol = ").concat(s," / inChannels % filterDims[1];\n      let xR = f32(outRow - pads[0] + dilation[0] * WRow) / f32(strides[0]);\n      let xC = f32(outCol - pads[1] + dilation[1] * WCol) / f32(strides[1]);\n      if (xR < 0.0 || xR >= f32(").concat(e?"outBackprop[1]":"outBackprop[2]",") || fract(xR) > 0.0) {\n        return ").concat(i,"(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(").concat(e?"outBackprop[2]":"outBackprop[3]",") || fract(xC) > 0.0) {\n        return ").concat(i,"(0.0);\n      }\n      let iXR = i32(xR);\n      let iXC = i32(xC);\n      let xCh = ").concat(s," % inChannels;\n      ").concat(e?"\n      let coord = vec4<i32>(batch, iXR, iXC, xCh);\n      ":"\n      let coord = vec4<i32>(batch, xCh, iXR, iXC);\n      ","\n      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/").concat(n,"];"),l=e?"\n      let col = colIn * ".concat(n,";\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ").concat(u,"\n      }\n      return ").concat(i,"(0.0);"):"\n      let col = colIn * ".concat(n,";\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ").concat(u,"\n      }\n      return ").concat(i,"(0.0);"),h="\n      let col = colIn * ".concat(n,";\n      let inChannels = ").concat(e?"outBackprop[3]":"outBackprop[1]",";\n      let coordX = filterDims.x - 1 - row / (filterDims[1] * inChannels);\n      let coordY = filterDims.y - 1 - (row / inChannels) % filterDims[1];\n      if (").concat(e?"row < uniforms.dimInner && col < uniforms.dimBOuter":"row < uniforms.dimInner && col < uniforms.dimAOuter","  && coordX >= 0 && coordY >= 0) {\n        let rowInner = row % inChannels;\n        let coord = vec4<i32>(coordX, coordY, col, rowInner);\n        ").concat(function(e){switch(e){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return"\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];\n            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];\n            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];\n            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];\n            return vec4<f32>(v0, v1, v2, v3);\n            ";default:throw new Error("innerElementSize ".concat(e," is not supported."));}}(n),"\n      }\n      return ").concat(i,"(0.0);\n      "),_tg5=tg(r,i),c=_tg5.activationFunction,d=_tg5.applyActivation;return"\n      ".concat(c,"\n  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(i," {\n    ").concat(e?l:h,"\n  }\n\n  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(i," {\n    ").concat(e?h:l,"\n  }\n\n  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ").concat(i,") {\n    let col = colIn * ").concat(n,";\n    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n      var value = valueInput;\n      let outWidth = ").concat(e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])",";\n      ").concat(o,"\n      ").concat(ig(t),"\n      ").concat(d,"\n      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/").concat(n,"] = value;\n    }\n  }");},Og=function Og(e,t,r,n,i,o,a,s){var u="NHWC"===t.format,l=u?e[0].dims[3]:e[0].dims[1],h=r[0],c=u?r[2]:r[3],d=u?r[1]:r[2],f=u?r[3]:r[1],p=u?l%4==0&&f%4==0:c%4==0&&f%4==0,y=u?f:c*d,g=u?c*d:f,m=p?[8,8,1]:[y<=4||g<=4?4:16,y>4&&g<=4?4:16,1],w=p?[4,4,1]:[y<=4?1:4,y>4&&g<=4?1:4,1],b=[Math.ceil(y/m[0]/w[0]),Math.ceil(g/m[1]/w[1]),Math.ceil(h/m[2]/w[2])];Jd("verbose",function(){return"[conv_backprop_mm_webgpu] dispatch = ".concat(b);});var v=p?4:1,x=Math.max(m[0]*v,m[1]),_=p?4:1,I=[{type:"int32",data:n},{type:"int32",data:i},{type:"int32",data:o}],A=Tf("x",e[0].dataType,e[0].dims.length,_),S=Tf("w",e[1].dataType,e[1].dims.length,1),T=Cf("result",e[0].dataType,r.length,_),C=[A,S];I.push.apply(I,_toConsumableArray(bf(e[0].dims))),I.push.apply(I,_toConsumableArray(bf(e[1].dims)));var E="";if(a){var _t369=Tf("bias",e[2].dataType,e[2].dims.length,_);C.push(_t369),I.push.apply(I,_toConsumableArray(bf(e[2].dims))),E+="\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(p?"vec4<f32>":"f32"," {\n          return bias[coords.").concat(u?"w":"y").concat(p?"/ 4":"","];\n        }");}return I.push.apply(I,_toConsumableArray(bf(r))),{name:"Conv2DTransposeMatMul",shaderCache:{hint:t.cacheKey},getRunData:function getRunData(){return{outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:b[0],y:b[1],z:b[2]},programUniforms:I};},getShaderSource:function getShaderSource(r){var _r$registerUniform$re;return"\n        ".concat(og("uniforms.result_strides"),"\n        ").concat((_r$registerUniform$re=r.registerUniform("dimAOuter","i32").registerUniform("dimBOuter","i32").registerUniform("dimInner","i32")).declareVariables.apply(_r$registerUniform$re,C.concat([T])),";\n        const outBackprop : vec4<i32> = vec4<i32>(").concat(e[0].dims.join(","),");\n        const filterDims : vec2<i32> = vec2<i32>(").concat(t.kernelShape[u?1:2],", ").concat(t.kernelShape[u?2:3],");\n        const effectiveFilterDims : vec2<i32> = filterDims + vec2<i32>(\n              ").concat(t.dilations[0]<=1?0:(t.kernelShape[u?1:2]-1)*(t.dilations[0]-1),",\n              ").concat(t.dilations[1]<=1?0:(t.kernelShape[u?2:3]-1)*(t.dilations[1]-1),");\n        const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (").concat(t.pads[0]+t.pads[2],")/2,\n                                         i32(effectiveFilterDims[1]) - 1 - (").concat(t.pads[1]+t.pads[3],")/2);\n        const strides : vec2<i32> = vec2<i32>(").concat(t.strides[0],", ").concat(t.strides[1],");\n        const dilation : vec2<i32> = vec2<i32>(").concat(t.dilations[0],", ").concat(t.dilations[1],");\n        const dimAOuter : i32 = ").concat(n,";\n        const dimBOuter : i32 = ").concat(i,";\n        const dimInner : i32 = ").concat(o,";\n        ").concat(E,"\n        ").concat(Eg(u,a,t,v),"\n        ").concat(p?ug(w,m,"f32",void 0,!u,x):cg(w,m,"f32",void 0,!u,x,!1,void 0,s));}};};}),Hb=Mc(function(){wb(),Ib(),Ab(),kg=function kg(e,t,r,n,i,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:!1;var s=arguments.length>7?arguments[7]:undefined;var u="NHWC"===r.format,l=u?1:2,h=u?2:3,c=u?3:1,d=cf.size(n),f=a?2:1,p=r.group,y=t[1].dims,g=y[0]/p,m=y[1],w="\n  fn setOutputAtIndex(flatIndex : u32, value : ".concat(a?"vec4<".concat(s,">"):s,") {\n    result[flatIndex] = ").concat(a?"vec4<".concat(s,">"):s,"(value);\n  }");i&&(w+="\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ".concat(a?"vec4<".concat(s,">"):s," {\n      return bias[coords.").concat(u?"w":"y").concat(a?"/ 4":"","];\n    }"));var b=a?4:1,v=Tf("W",t[1].dataType,t[1].dims,b),x=Tf("Dy",t[0].dataType,t[0].dims,b),_=[x,v];i&&_.push(Tf("bias",t[2].dataType,[n[c]],b));var I=Cf("result",t[0].dataType,n,b),A="{\n        let batch: u32 = ".concat(o?"global_id.z":"workgroup_id.z"," / outShape[1];\n        let r = ").concat(o?"global_id.z":"workgroup_id.z"," % outShape[1];\n        let c = ").concat(o?"global_id.y":"workgroup_id.y"," * ").concat(f,";\n        let d1: u32 = ").concat(o?"global_id.x":"workgroup_id.x"," * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<").concat(s,">, ").concat(f,">;\n        for (var i = 0; i < ").concat(f,"; i++) {\n          dotProd[i] = vec4<").concat(s,">(0.0);\n        }\n        for (var wR: u32 = 0; wR < filterDims[0]; wR = wR + 1) {\n          var dyR = (").concat(s,"(dyCorner.x) + ").concat(s,"(wR)) / ").concat(s,"(strides.x);\n          let wRPerm = filterDims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= ").concat(s,"(outBackprop[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < filterDims[1]; wC = wC + 1) {\n            let dyC = (").concat(s,"(dyCorner.y) + ").concat(s,"(wC)) / ").concat(s,"(strides.y);\n            let dyC2 = (").concat(s,"(dyCorner.y) + 1.0 + ").concat(s,"(wC)) / ").concat(s,"(strides.y);\n            let wCPerm = filterDims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= ").concat(s,"(outBackprop[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= ").concat(s,"(outBackprop[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\n                let wValue1 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\n                let wValue2 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\n                let wValue3 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\n\n                var xValue = ").concat(x.get("batch","idyR","idyC","d2"),";\n                let tmpval = vec4<").concat(s,">(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ").concat(x.get("batch","idyR","idyC2","d2"),";\n\n                dotProd[1] = dotProd[1] + vec4<").concat(s,">(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = outBackprop[").concat(c,"];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\n                let wValue1 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\n                let wValue2 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\n                let wValue3 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\n\n                var xValue = ").concat(x.get("batch","idyR","idyC","d2"),";\n                let tmpval = vec4<").concat(s,">(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1","d2"),";\n                let wValue1 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2"),";\n                let wValue2 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2"),";\n                let wValue3 = ").concat(v.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2"),";\n\n                var xValue = ").concat(x.get("batch","idyR","idyC2","d2"),";\n                let tmpval = vec4<").concat(s,">(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ").concat(f,"; i = i + 1) {\n          let value = dotProd[i] + ").concat(i?"bias[c+i]":"vec4<".concat(s,">(0.0)"),";\n          ").concat(I.set("batch","r","c + i","d1","value"),";\n        }\n      }"),S="\n          let outputIndices = ".concat(I.offsetToIndices("global_idx"),";\n          let batch = ").concat(I.indicesGet("outputIndices",0),";\n          let d1 = ").concat(I.indicesGet("outputIndices",c),";\n          let r = ").concat(I.indicesGet("outputIndices",l),";\n          let c = ").concat(I.indicesGet("outputIndices",h),";\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / ").concat(m,";\n          let wOutChannel = d1 - groupId * ").concat(m,";\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = ").concat(s,"(0.0);\n          for (var wR: u32 = 0; wR < effectiveFilterDims.x; wR = wR + 1) {\n            if (wR % dilations.x != 0) {\n              continue;\n            }\n            let dyR = (").concat(s,"(dyRCorner) + ").concat(s,"(wR)) / ").concat(s,"(strides[0]);\n            let wRPerm = filterDims.x - 1 - wR / dilations.x;\n            if (dyR < 0.0 || dyR >= ").concat(s,"(outBackprop[").concat(l,"]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < effectiveFilterDims.y; wC = wC + 1) {\n              if (wC % dilations.y != 0) {\n                continue;\n              }\n              let dyC = (").concat(s,"(dyCCorner) + ").concat(s,"(wC)) / ").concat(s,"(strides.y);\n              let wCPerm = filterDims.y - 1 - wC / dilations.y;\n              if (dyC < 0.0 || dyC >= ").concat(s,"(outBackprop[").concat(h,"]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n              var inputChannel = groupId * ").concat(g,";\n              for (var d2: u32 = 0; d2 < ").concat(g,"; d2 = d2 + 1) {\n                let xValue = ").concat(u?x.get("batch","idyR","idyC","inputChannel"):x.get("batch","inputChannel","idyR","idyC"),";\n                let wValue = ").concat(v.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)"),";\n                dotProd = dotProd + xValue * wValue;\n                inputChannel = inputChannel + 1;\n              }\n            }\n          }\n          let value = dotProd + ").concat(i?"bias[d1]":"".concat(s,"(0.0)"),";\n          ").concat(I.setByOffset("global_idx","value"),";\n        ");return"\n  ".concat(e.declareVariables.apply(e,_.concat([I])),"\n  ").concat(w,"\n  const outShape : vec4<u32> = vec4<u32>(").concat(n.join(","),");\n  const outBackprop : vec4<u32> = vec4<u32>(").concat(t[0].dims.join(","),");\n  const strides : vec2<u32> = vec2<u32>(").concat(r.strides[0],", ").concat(r.strides[1],");\n  const filterDims : vec2<u32> = vec2<u32>(").concat(r.kernelShape[u?1:2],", ").concat(r.kernelShape[u?2:3],");\n  const dilations : vec2<u32> = vec2<u32>(").concat(r.dilations[0],", ").concat(r.dilations[1],");\n  const effectiveFilterDims : vec2<u32> = filterDims + vec2<u32>(\n          ").concat(r.dilations[0]<=1?0:(r.kernelShape[u?1:2]-1)*(r.dilations[0]-1),",\n          ").concat(r.dilations[1]<=1?0:(r.kernelShape[u?2:3]-1)*(r.dilations[1]-1),");\n  const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (").concat(r.pads[0]+r.pads[2],")/2,\n                                     i32(effectiveFilterDims[1]) - 1 - (").concat(r.pads[1]+r.pads[3],")/2);\n    ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(d),";\n  ").concat(a?A:S,"}");},Pg=function Pg(e,t,r){var n=e.length>2,i=t.outputShape,o=cf.size(i),a=[Math.ceil(o/64),1,1];Jd("verbose",function(){return"[conv2d_backprop_webgpu] dispatch = ".concat(a);});var s=mf(e[0].dataType);return{name:"ConvTranspose2D",shaderCache:{hint:t.cacheKey},getRunData:function getRunData(){return{dispatchGroup:{x:a[0],y:a[1],z:a[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}]};},getShaderSource:function getShaderSource(r){return kg(r,e,t,i,n,1===a[1]&&1===a[2],!1,s);}};};}),Wb=Mc(function(){_b(),Vb(),Hb(),Mb(),Sb(),$g=function $g(e,t,r,n,i,o){return(e-1)*t+r+(n-1)*i+1-o;},Rg=function Rg(e,t,r,n,i){var o=Math.floor(e/2);"SAME_UPPER"===t?(r[n]=o,r[i]=e-o):"SAME_LOWER"===t&&(r[n]=e-o,r[i]=o);},Bg=function Bg(e,t,r,n,i,o,a,s,u,l){var h=e.length-2,c=0===l.length;if(0===u.length)for(var _e889=0;_e889<h;++_e889)u.push(0);var d=e[0],f=t[s?3:1]*i;for(var _i134=0,_d14=e.length-h-(s?1:0);_i134<h;++_i134,++_d14){var _s55=e[_d14],_f14=c?_s55*a[_i134]:l[_i134],_p13=$g(_s55,a[_i134],o[_i134],t[_d14],r[_i134],_f14);Rg(_p13,n,o,_i134,_i134+h),c&&l.push(a[_i134]*(_s55-1)+u[_i134]+(t[_d14]-1)*r[_i134]+1-o[_i134]-o[_i134+h]);}l.splice(0,0,d),l.splice(s?3:1,0,f);},Dg=function Dg(e,t){var r=e.kernelShape.slice();if(0===e.kernelShape.length||0===e.kernelShape.reduce(function(e,t){return e*t;},1)){r.length=0;for(var _e890=2;_e890<t[1].dims.length;++_e890)r.push(t[1].dims[_e890]);}var n="NHWC"===e.format;r.splice(0,0,t[1].dims[0]),r.splice(n?3:1,0,t[1].dims[1]);var i=e.pads.slice(),o=e.outputShape.slice(),a=e.outputPadding.slice(),s=t[0].dims,u=e.dilations.slice();if(0===u.reduce(function(e,t){return e+t;},0)){var _e891=t[0].dims.length-2;u=new Array(_e891).fill(1);}var l=e.strides.slice();if(0===l.reduce(function(e,t){return e+t;},0)){var _e892=t[0].dims.length-2;l=new Array(_e892).fill(1);}Bg(s,r,u,e.autoPad,e.group,i,l,n,a,o);var h=Object.assign({},e),c=e.cacheKey+[r.join("n,"),i.join(","),l.join(","),a.join(","),o.join(","),u.join(",")].join("_");return Object.assign(h,{kernelShape:r,pads:i,outputPadding:a,outputShape:o,dilations:u,strides:l,cacheKey:c}),h;},Mg=function Mg(e){var t=rg(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][_typeof(e.autoPad)>"u"?0:e.autoPad],i=e.dilations,o=e.group,a=e.kernelShape,s=e.pads,u=e.strides,l=e.wIsConst(),h=e.outputPadding,c=e.outputShape;return uf(_objectSpread({autoPad:n,format:r,dilations:i,group:o,kernelShape:a,outputPadding:h,outputShape:c,pads:s,strides:u,wIsConst:l},t));},Lg=function Lg(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===t.format?e[0].dims.length-1:1]!==e[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var r=e[1].dims[1]*t.group;if(3===e.length&&(1!==e[2].dims.length||e[2].dims[0]!==r))throw new Error("invalid bias");var n=e[0].dims.length-2;if(t.dilations.reduce(function(e,t){return e+t;},0)>0&&t.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(t.strides.reduce(function(e,t){return e+t;},0)>0&&t.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(t.pads.reduce(function(e,t){return e+t;},0)>0&&t.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(t.outputPadding.length!==n&&0!==t.outputPadding.length)throw new Error("output_padding should be ".concat(n,"D"));if(t.kernelShape.reduce(function(e,t){return e+t;},0)>0&&0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==t.outputShape.length&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");},Fg=[2,3,1,0],Ng=function Ng(e,t,r){var _e$kernelCustomData$w3;var n=Dg(r,t),i="NHWC"===r.format,o=n.outputShape,a=o[i?3:1],s=t[0].dims[i?3:1];if(1!==n.group||1===a&&1===s)return void e.compute(Pg(t,n));var u=o[i?1:2],l=o[i?2:3],h=i?u*l:a,c=i?a:u*l,d=t[1].dims[2]*t[1].dims[3]*s,f=(_e$kernelCustomData$w3=e.kernelCustomData.wT)!==null&&_e$kernelCustomData$w3!==void 0?_e$kernelCustomData$w3:e.compute(Lf(t[1],Fg),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=f);var p=[t[0],f],y=3===t.length;y&&(i||1!==t[2].dims.length?p.push(t[2]):p.push(t[2].reshape([t[2].dims[0],1,1]))),e.compute(Og(p,n,o,h,c,d,y,!0),{inputs:p});},Ug=function Ug(e,t){var r="NHWC"===t.format,n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===n.length&&n.push(e.inputs[2]);var i=t.kernelShape;(0===i.length||0===i[0])&&(i=[e.inputs[1].dims[2]]);var o=t.dilations;(0===o.length||0===o[0])&&(o=[1]);var a=t.strides;(0===a.length||0===a[0])&&(a=[1]);var s=t.pads;0===s.length&&(s=[0,0]),s=[0,s[0],0,s[1]],a=[1].concat(a),o=[1].concat(o),i=[1].concat(i);var u=Dg(_objectSpread(_objectSpread({},t),{},{pads:s,strides:a,dilations:o,kernelShape:i}),n);e.compute(Pg(n,u,function(e){return r?[e[0],e[2],e[3]]:[e[0],e[1],e[3]];}));},jg=function jg(e,t){Lg(e.inputs,t),3===e.inputs[0].dims.length?Ug(e,t):Ng(e,e.inputs,t);};}),Yb=Mc(function(){gb(),Ib(),_b(),Ab(),Gg=function Gg(e,t,r,n){var i=cf.size(t),o=t.length,a=Tf("input",e,o),s=Cf("output",e,o),u=6===r.dataType?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),l=cf.normalizeAxis(u,o);return{name:"CumSum",shaderCache:{hint:n.cacheKey,inputDependencies:["rank"]},getRunData:function getRunData(){return{outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:"uint32",data:i},{type:"int32",data:l}].concat(_toConsumableArray(bf(t)),_toConsumableArray(bf(t)))};},getShaderSource:function getShaderSource(e){var t=" i32(".concat(a.indicesGet("inputIndices","uniforms.axis"),") "),r=Af("uniforms.input_shape","uniforms.axis",o),i=n.reverse?t+(n.exclusive?" + 1":""):"0",u=n.reverse?r:t+(n.exclusive?"":" + 1");return"\n                ".concat(e.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,s),"\n                ").concat(e.mainStart(),"\n                  ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n                  var inputIndices = ").concat(s.offsetToIndices("global_idx"),";\n                  var sum = ").concat(s.type.value,"(0);\n                  let first : i32 = ").concat(i,";\n                  let last : i32 = ").concat(u,";\n                  for (var i : i32 = first; i < last; i++) {\n                    ").concat(a.indicesSet("inputIndices","uniforms.axis","u32(i)"),";\n                    sum = sum + ").concat(a.getByIndices("inputIndices"),";\n                  }\n                  ").concat(s.setByOffset("global_idx","sum"),";\n                }");}};},zg=function zg(e,t){var r=e.inputs[0].dims,n=e.inputs[0].dataType,i=e.inputs[1];e.compute(Gg(n,r,i,t),{inputs:[0]});},Vg=function Vg(e){var t=1===e.exclusive,r=1===e.reverse;return uf({exclusive:t,reverse:r});};}),Kb=Mc(function(){Ib(),_b(),Ab(),Yg="^"+(Wg="("+(Hg="[a-zA-Z]|\\.\\.\\.")+")+")+"$",Kg="^"+("("+Wg+",)*"+Wg)+"$",Xg=/*#__PURE__*/function(){function Xg(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;_classCallCheck(this,Xg);this.symbolToIndices=new Map(),this.inputIndex=e;}_createClass(Xg,[{key:"addSymbol",value:function addSymbol(e,t){var r=this.symbolToIndices.get(e);void 0===r?r=[t]:r.push(t),this.symbolToIndices.set(e,r);}}]);return Xg;}(),Zg=/*#__PURE__*/function(){function Zg(e,t){var _this153=this,_n$match;_classCallCheck(this,Zg);this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map(),this.lhs=new Array(),this.outputDims=[];var _ref82=t.includes("->")?t.split("->",2):[t,""],_ref83=_slicedToArray(_ref82,2),r=_ref83[0],n=_ref83[1];if(!r.match(RegExp(Kg)))throw new Error("Invalid LHS term");if(r.split(",").forEach(function(t,r){var n=e[r].dims.slice();if(!t.match(RegExp(Yg)))throw new Error("Invalid LHS term");var i=_this153.processTerm(t,!0,n,r);_this153.lhs.push(i);}),""===n)n+=_toConsumableArray(this.symbolToInfo.entries()).filter(function(_ref84){var _ref85=_slicedToArray(_ref84,2),e=_ref85[0],t=_ref85[1];return 1===t.count||"..."===e;}).map(function(_ref86){var _ref87=_slicedToArray(_ref86,1),e=_ref87[0];return e;}).join("");else if(!n.match(RegExp(Wg)))throw new Error("Invalid RHS");(_n$match=n.match(RegExp(Hg,"g")))!==null&&_n$match!==void 0&&_n$match.forEach(function(e){if("..."===e)_this153.outputDims=_this153.outputDims.concat(_this153.ellipsisDims);else{var _t370=_this153.symbolToInfo.get(e);if(void 0===_t370)throw new Error("Invalid RHS symbol");_this153.outputDims.push(_t370.dimValue);}}),this.rhs=this.processTerm(n,!1,this.outputDims);}_createClass(Zg,[{key:"addSymbol",value:function addSymbol(e,t,r){var n=this.symbolToInfo.get(e);if(void 0!==n){if(n.dimValue!==t&&1!==n.count)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(r);}else n={count:1,dimValue:t,inputIndices:[r]};this.symbolToInfo.set(e,n);}},{key:"processTerm",value:function processTerm(e,t,r){var _this154=this;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;var i=r.length,o=!1,a=[],s=0;if(!e.match(RegExp(Yg))&&!t&&""!==e)throw new Error("Invalid LHS term");var u=e.match(RegExp(Hg,"g")),l=new Xg(n);return u!==null&&u!==void 0&&u.forEach(function(e,h){if("..."===e){if(o)throw new Error("Only one ellipsis is allowed per input term");o=!0;var _e893=i-u.length+1;if(_e893<0)throw new Error("Ellipsis out of bounds");if(a=r.slice(s,s+_e893),_this154.hasEllipsis){if(_this154.ellipsisDims.length!==a.length||_this154.ellipsisDims.toString()!==a.toString())throw new Error("Ellipsis dimensions mismatch");}else{if(!t)throw new Error("Ellipsis must be specified in the LHS");_this154.hasEllipsis=!0,_this154.ellipsisDims=a;}for(var _e894=0;_e894<a.length;_e894++){var _t371=String.fromCharCode("0".charCodeAt(0)+_e894);l.addSymbol(_t371,h+_e894),_this154.addSymbol(_t371,r[s++],n);}}else l.addSymbol(e,h+(_this154.hasEllipsis?_this154.ellipsisDims.length-1:0)),_this154.addSymbol(e,r[s++],n);}),l;}}]);return Zg;}(),qg=function qg(e){return e+"_max";},Jg=function Jg(e,t,r,n,i){var o=t.map(function(t,r){return e[r]?t.length:t;}).map(function(e,t){return Tf("input".concat(t),r,e);}),a=cf.size(i),s=$f(i.length),u=s?i.length:i,l=Cf("output",r,u),h=_toConsumableArray(n.symbolToInfo.keys()).filter(function(e){return!n.rhs.symbolToIndices.has(e);});return{name:"Einsum",shaderCache:{hint:n.equation,inputDependencies:e.map(function(e){return e?"rank":"dims";})},getRunData:function getRunData(){var o=h.filter(function(e){return n.symbolToInfo.has(e);}).map(function(e){var _n$symbolToInfo$get;return{type:"uint32",data:((_n$symbolToInfo$get=n.symbolToInfo.get(e))===null||_n$symbolToInfo$get===void 0?void 0:_n$symbolToInfo$get.dimValue)||0};});o.push({type:"uint32",data:a});var u=t.filter(function(t,r){return e[r];}).map(function(e,t){return _toConsumableArray(bf(e));}).reduce(function(e,t){return e.concat(t);},o);return s&&u.push.apply(u,_toConsumableArray(bf(i))),{outputs:[{dims:i,dataType:r}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:u};},getShaderSource:function getShaderSource(e){var _e$registerUniforms$r;var t=[],r=[],i=[],a=[],s=[],u=n.symbolToInfo.size===n.rhs.symbolToIndices.size;n.symbolToInfo.forEach(function(e,u){if(n.rhs.symbolToIndices.has(u)){var _n$rhs$symbolToIndice;var _r343=(_n$rhs$symbolToIndice=n.rhs.symbolToIndices.get(u))===null||_n$rhs$symbolToIndice===void 0?void 0:_n$rhs$symbolToIndice[0];void 0!==_r343&&n.lhs.forEach(function(n,i){if(e.inputIndices.includes(i)){var _e895=n.symbolToIndices.get(u);if(void 0===_e895)throw new Error("Invalid symbol error");_e895.forEach(function(e){t.push("".concat(o[i].indicesSet("input".concat(i,"Indices"),e,l.indicesGet("outputIndices",_r343))));});}});}else n.lhs.forEach(function(t,n){if(e.inputIndices.includes(n)){var _e896=t.symbolToIndices.get(u);if(void 0===_e896)throw new Error("Invalid symbol error");_e896.forEach(function(e){r.push("".concat(o[n].indicesSet("input".concat(n,"Indices"),e,"".concat(u))));}),s.push("prod *= ".concat(o[n].getByIndices("input".concat(n,"Indices")),";"));}}),i.push("for(var ".concat(u,": u32 = 0; ").concat(u," < uniforms.").concat(qg(u),"; ").concat(u,"++) {")),a.push("}");});var c=u?[].concat(t,["let sum = ".concat(o.map(function(e,t){return e.getByIndices("input".concat(t,"Indices"));}).join(" * "),";")]):[].concat(t,["var sum = 0.0;"],i,r,["var prod = 1.0;"],s,["sum += prod;"],a);return"\n            ".concat((_e$registerUniforms$r=e.registerUniforms(h.map(function(e){return{name:"".concat(qg(e)),type:"u32"};})).registerUniform("outputSize","u32")).declareVariables.apply(_e$registerUniforms$r,_toConsumableArray(o).concat([l])),"\n\n            ").concat(e.mainStart(),"\n            ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n            var outputIndices = ").concat(l.offsetToIndices("global_idx"),";\n            ").concat(o.map(function(e,t){return"var input".concat(t,"Indices: ").concat(o[t].type.indices,";");}).join("\n"),"\n            ").concat(c.join("\n"),";\n            ").concat(l.setByOffset("global_idx","sum"),";\n          }");}};},Qg=function Qg(e,t){var r=new Zg(e.inputs,t.equation),n=e.inputs.map(function(e,t){return $f(e.dims.length);}),i=r.outputDims,o=e.inputs.map(function(e,t){return e.dims;});e.compute(Jg(n,o,e.inputs[0].dataType,r,i));},em=function em(e){var t=e.equation.replace(/\s+/g,"");return uf({equation:t});};}),Xb=Mc(function(){gb(),Ib(),Ab(),tm=function tm(e){if(!e||2!==e.length)throw new Error("Expand requires 2 input.");var t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;n<r.length&&i<t.length;++n,++i)if(r[n]!==t[i]&&1!==r[n]&&1!==t[i])throw new Error("Expand requires shape to be broadcastable to input");},rm=function rm(e,t){var r=e.length-t.length,n=[];for(var _t372=0;_t372<r;++_t372)n.push(e[_t372]);for(var i=0;i<t.length;++i)n.push(1===t[i]?e[i+r]:t[i]);return n;},nm=function nm(e,t){return e.length>t.length?rm(e,t):rm(t,e);},im=function im(e){var t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=nm(t,r),i=e[0].dataType,o=9===i?4:1,a=Math.ceil(cf.size(n)/o),s=$f(t.length),u=$f(n.length),l=[{type:"uint32",data:a}];return s&&l.push.apply(l,_toConsumableArray(bf(t))),u&&l.push.apply(l,_toConsumableArray(bf(n))),{name:"Expand",shaderCache:{hint:"".concat(n.length),inputDependencies:[s?"rank":"dims"]},getShaderSource:function getShaderSource(e){var r,a=s?t.length:t,l=u?n.length:n,h=Tf("input",i,a,o),c=Cf("output",i,l,o);if(9===i){var _e897=function _e897(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";return"\n          let outputIndices".concat(t," = ").concat(c.offsetToIndices("outputOffset + ".concat(t,"u")),";\n          let offset").concat(t," = ").concat(h.broadcastedIndicesToOffset("outputIndices".concat(t),c),";\n          let index").concat(t," = offset").concat(t," / 4u;\n          let component").concat(t," = offset").concat(t," % 4u;\n          ").concat(e,"[").concat(t,"] = ").concat(r,"(").concat(h.getByOffset("index".concat(t)),"[component").concat(t,"]);\n        ");};r="\n        let outputOffset = global_idx * ".concat(o,";\n        var data = vec4<u32>(0);\n        ").concat(_e897("data",0,"u32"),"\n        ").concat(_e897("data",1,"u32"),"\n        ").concat(_e897("data",2,"u32"),"\n        ").concat(_e897("data",3,"u32"),"\n        ").concat(c.setByOffset("global_idx","data"),"\n      }");}else r="\n        let outputIndices = ".concat(c.offsetToIndices("global_idx"),";\n        let inputOffset = ").concat(h.broadcastedIndicesToOffset("outputIndices",c),";\n        ").concat(c.setByOffset("global_idx",h.getByOffset("inputOffset")),"\n      }");return"\n    ".concat(e.registerUniform("vec_size","u32").declareVariables(h,c),"\n    ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size"),"\n    ").concat(r);},getRunData:function getRunData(){return{outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:l};}};},om=function om(e){tm(e.inputs),e.compute(im(e.inputs),{inputs:[0]});};}),Zb=Mc(function(){gb(),Ib(),_b(),Ab(),am=function am(e){if(!e||2!==e.length)throw new Error("Gather requires 2 inputs.");},sm=function sm(e,t){var r=e[0].dims,n=e[1].dims,i=r.length,o=cf.normalizeAxis(t.axis,i),a=r.slice(0);a.splice.apply(a,[o,1].concat(_toConsumableArray(n)));var s=r[o],u=9===e[0].dataType?4:1,l=Math.ceil(cf.size(a)/u),h=$f(e[0].dims.length),c=h?e[0].dims.length:e[0].dims,d=$f(e[1].dims.length),f=d?e[1].dims.length:e[1].dims,p=$f(a.length),y=p?a.length:a,g=[{type:"uint32",data:l},{type:"int32",data:s},{type:"uint32",data:o}];h&&g.push.apply(g,_toConsumableArray(bf(e[0].dims))),d&&g.push.apply(g,_toConsumableArray(bf(e[1].dims))),p&&g.push.apply(g,_toConsumableArray(bf(a)));var m=[];m.push(h?"rank":"dims"),m.push(d?"rank":"dims");return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:m},getRunData:function getRunData(){return{outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:g};},getShaderSource:function getShaderSource(t){var r,s=Tf("data",e[0].dataType,c,u),l=Tf("inputIndices",e[1].dataType,f),h=Cf("output",e[0].dataType,y,u),d=function d(e){var t=n.length,r="var indicesIndices".concat(e,"  = ").concat(l.type.indices,"(0);");for(var _n168=0;_n168<t;_n168++)r+="".concat(t>1?"indicesIndices".concat(e,"[").concat(_n168,"]"):"indicesIndices".concat(e)," = ").concat(a.length>1?"outputIndices".concat(e,"[uniforms.axis + ").concat(_n168,"]"):"outputIndices".concat(e),";");r+="\n          var idx".concat(e," = ").concat(l.getByIndices("indicesIndices".concat(e)),";\n          if (idx").concat(e," < 0) {\n            idx").concat(e," = idx").concat(e," + uniforms.axisDimLimit;\n          }\n          var dataIndices").concat(e," = ").concat(s.type.indices,"(0);\n        ");for(var _n169=0,_s56=0;_n169<i;_n169++)_n169===o?(r+="".concat(i>1?"dataIndices".concat(e,"[").concat(_n169,"]"):"dataIndices".concat(e)," = u32(idx").concat(e,");"),_s56+=t):(r+="".concat(i>1?"dataIndices".concat(e,"[").concat(_n169,"]"):"dataIndices".concat(e)," = ").concat(a.length>1?"outputIndices".concat(e,"[").concat(_s56,"]"):"outputIndices".concat(e),";"),_s56++);return r;};if(9===e[0].dataType){var _e898=function _e898(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";return"\n          let outputIndices".concat(t," = ").concat(h.offsetToIndices("outputOffset + ".concat(t,"u")),";\n          ").concat(d(t),";\n          let offset").concat(t," = ").concat(s.indicesToOffset("dataIndices".concat(t)),";\n          let index").concat(t," = offset").concat(t," / 4u;\n          let component").concat(t," = offset").concat(t," % 4u;\n          ").concat(e,"[").concat(t,"] = ").concat(r,"(").concat(s.getByOffset("index".concat(t)),"[component").concat(t,"]);\n        ");};r="\n        let outputOffset = global_idx * ".concat(u,";\n        var value = vec4<u32>(0);\n        ").concat(_e898("value",0,"u32"),"\n        ").concat(_e898("value",1,"u32"),"\n        ").concat(_e898("value",2,"u32"),"\n        ").concat(_e898("value",3,"u32"),"\n        ").concat(h.setByOffset("global_idx","value"),"\n      ");}else r="\n      let outputIndices = ".concat(h.offsetToIndices("global_idx"),";\n      ").concat(d(""),";\n      let value = ").concat(s.getByIndices("dataIndices"),";\n      ").concat(h.setByOffset("global_idx","value"),";\n      ");return"\n      ".concat(t.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(s,l,h),"\n      ").concat(t.mainStart(),"\n        ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n        ").concat(r,"\n      }");}};},um=function um(e){return uf({axis:e.axis});},lm=function lm(e,t){var r=e.inputs;am(r),e.compute(sm(e.inputs,t));};}),qb=Mc(function(){Ib(),_b(),Ab(),hm=function hm(e){if(!e||2!==e.length)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error("GatherElements requires that the data input and\n                     indices input tensors be of same rank.");},cm=function cm(e,t){var r=e[0].dims,n=e[0].dataType,i=r.length,o=e[1].dims,a=e[1].dataType,s=cf.normalizeAxis(t.axis,i),u=r[s],l=o.slice(0),h=cf.size(l),c=Tf("input",n,i),d=Tf("indicesInput",a,o.length),f=Cf("output",n,l.length),p=[{type:"uint32",data:h},{type:"int32",data:u},{type:"uint32",data:s}];return p.push.apply(p,_toConsumableArray(bf(r))),p.push.apply(p,_toConsumableArray(bf(o))),p.push.apply(p,_toConsumableArray(bf(l))),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:function getRunData(){return{outputs:[{dims:l,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:p};},getShaderSource:function getShaderSource(e){return"\n      ".concat(e.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(c,d,f),"\n      ").concat(e.mainStart(),"\n      ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n\n      let outputIndices = ").concat(f.offsetToIndices("global_idx"),";\n\n      var idx = ").concat(d.getByOffset("global_idx"),";\n      if (idx < 0) {\n        idx = idx + uniforms.axisDimLimit;\n      }\n      var inputIndices = ").concat(c.type.indices,"(outputIndices);\n      ").concat(c.indicesSet("inputIndices","uniforms.axis","u32(idx)"),";\n      let value = ").concat(c.getByIndices("inputIndices"),";\n\n      ").concat(f.setByOffset("global_idx","value"),";\n  }");}};},dm=function dm(e){return uf({axis:e.axis});},fm=function fm(e,t){var r=e.inputs;hm(r),e.compute(cm(e.inputs,t));};}),Jb=Mc(function(){Ib(),Ab(),pm=function pm(e){if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(3===e.length&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||3===e.length&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched");},ym=function ym(e,t){var r=e[0].dims.slice(),n=e[1].dims.slice(),_ff$getShapeOfGemmRes=ff.getShapeOfGemmResult(r,t.transA,n,t.transB,3===e.length?e[2].dims:void 0),_ff$getShapeOfGemmRes2=_slicedToArray(_ff$getShapeOfGemmRes,3),i=_ff$getShapeOfGemmRes2[0],o=_ff$getShapeOfGemmRes2[1],a=_ff$getShapeOfGemmRes2[2],s=[i,o];if(!s)throw new Error("Can't use gemm on the given tensors");var u=cf.size(s),l=[{type:"uint32",data:u},{type:"uint32",data:i},{type:"uint32",data:o},{type:"uint32",data:a},{type:"float32",data:t.alpha},{type:"float32",data:t.beta}],h=["type","type"];3===e.length&&(l.push.apply(l,_toConsumableArray(bf(e[2].dims))),h.push("rank")),l.push.apply(l,_toConsumableArray(bf(s)));return{name:"Gemm",shaderCache:{hint:"".concat(t.cacheKey),inputDependencies:h},getRunData:function getRunData(){return{outputs:[{dims:s,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:l};},getShaderSource:function getShaderSource(r){var _r$registerUniforms;var n="";t.transA&&t.transB?n="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?n="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?n="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(n="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");var i=1===t.alpha?"":"value *= uniforms.alpha;",o=Tf("a",e[0].dataType,e[0].dims),a=Tf("b",e[1].dataType,e[1].dims),u=o.type.value,l=null,h=[o,a];3===e.length&&(l=Tf("c",e[2].dataType,e[2].dims.length),h.push(l));var c=Cf("output",e[0].dataType,s.length);h.push(c);return"\n  ".concat((_r$registerUniforms=r.registerUniforms([{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}])).declareVariables.apply(_r$registerUniforms,h),"\n\n  ").concat(r.mainStart(),"\n    ").concat(r.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size"),"\n\n    let m = global_idx / uniforms.N;\n    let n = global_idx % uniforms.N;\n\n    var value = ").concat(u,"(0);\n    for (var k: u32 = 0u; k < uniforms.K; k++) {\n      ").concat(n,"\n    }\n\n    ").concat(i,"\n    ").concat(null!=l?"let cOffset = ".concat(l.broadcastedIndicesToOffset("vec2(m, n)",c),"; value += ").concat(u,"(uniforms.beta) * ").concat(l.getByOffset("cOffset"),";"):"","\n    output[global_idx] = value;\n  }");}};},gm=function gm(e){return{transA:e.transA,transB:e.transB,alpha:e.alpha,beta:e.beta,cacheKey:"".concat(e.transA,";").concat(e.transB,";").concat(1===e.alpha)};},mm=function mm(e,t){pm(e.inputs),e.compute(ym(e.inputs,t));};}),Qb=Mc(function(){gb(),Ib(),Ab(),wm=function wm(e,t){var r=e[0].dims,n=r,i=cf.sizeToDimension(r,2),o=cf.sizeFromDimension(r,2),a=vf(o),s=o/a,u=[r[0],r[1],s],l=[{type:"uint32",data:o},{type:"uint32",data:s}];l.push.apply(l,_toConsumableArray(bf(u)).concat(_toConsumableArray(bf(u))));return{name:"InstanceNormalization",shaderCache:{hint:"".concat(t.epsilon,";").concat(a),inputDependencies:["rank","type","type"]},getRunData:function getRunData(){return{outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:i},programUniforms:l};},getShaderSource:function getShaderSource(r){var _r$registerUniforms2;var n=Tf("x",e[0].dataType,u.length,a),i=Tf("scale",e[1].dataType,e[1].dims),o=Tf("bias",e[2].dataType,e[2].dims),s=Cf("output",e[0].dataType,u.length,a),l=[n,i,o,s],h=n.type.value,c=1===a?"f32":"vec".concat(a,"<f32>");return"\n  var<workgroup> meanShared : f32;\n  var<workgroup> squaredNormShared : f32;\n  var<workgroup> workgroupShared : array<".concat(c,", 64>;\n  const workgroupSize = 64u;\n  ").concat((_r$registerUniforms2=r.registerUniforms([{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}])).declareVariables.apply(_r$registerUniforms2,l),"\n  ").concat(r.mainStart(64),"\n    let norm = global_idx / workgroupSize;\n    let batch = norm / uniforms.x_shape[1];\n    let channel = norm % uniforms.x_shape[1];\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial = ").concat(c,"(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      initial = initial + ").concat(c,"(").concat(n.get("batch","channel","h"),");\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = ").concat(If("workgroupShared[0]",a)," / f32(uniforms.normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = ").concat(c,"(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let deviation =  ").concat(c,"(").concat(n.get("batch","channel","h"),") - ").concat(c,"(meanShared);\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = ").concat(If("workgroupShared[0]",a),";\n    }\n    workgroupBarrier();\n\n    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(").concat(t.epsilon,"));\n    let channelScale = invStdDev * f32(").concat(i.getByOffset("channel"),");\n    let channelShift = f32(").concat(o.getByOffset("channel"),") - meanShared * channelScale;\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let value = ").concat(n.get("batch","channel","h")," * ").concat(h,"(").concat(c,"(channelScale)) + ").concat(h,"(").concat(c,"(channelShift));\n      ").concat(s.set("batch","channel","h","value"),";\n    }\n  }");}};},bm=function bm(e,t,r,n,i,o,a,s){var u=vf(a),l=64,h=1===u?"vec2f":"mat2x".concat(u,"f"),c=1===u?"f32":"vec".concat(u,"f"),d=function d(e,t){return"".concat(h,"(").concat(e,", ").concat(t,")");},f=i*a/u,p=[{type:"uint32",data:Math.ceil(o/l)},{type:"uint32",data:o},{type:"uint32",data:Math.floor(a/u)},{type:"uint32",data:Math.floor(o*a/u)}],y=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:"".concat(u),inputDependencies:["type"]},getRunData:function getRunData(){return{outputs:[{dims:[i,a,l,2],dataType:1}],dispatchGroup:{x:i*a/u},programUniforms:p};},getShaderSource:function getShaderSource(e){var r=Tf("input",t.dataType,t.dims,u);return"\n  ".concat(e.declareVariables(r),"\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat(h,">;\n  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};\n  @group(0) @binding(2) var<uniform> uniforms: Uniforms;\n\n  ").concat(e.mainStart(l),"\n    let currentImageNumber = global_idx / 64 / uniforms.C;\n    let currentChannelNumber = (global_idx / 64) % uniforms.C;\n    let wgId = global_idx % 64;\n    let wgOffset = wgId * uniforms.wg_size;\n    if (wgOffset >= uniforms.H) {\n        return;\n    }\n    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);\n\n    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;\n    var sum = ").concat(xf("f32",u),";\n    var squaredSum = ").concat(xf("f32",u),";\n    for (var i: u32 = wgOffset; i < wgMax; i++) {\n        let value = ").concat(c,"(input[offset + i * uniforms.C]);\n        sum += value;\n        squaredSum += value * value;\n    }\n    output[global_idx] = ").concat(d("sum","squaredSum"),";\n  }");}},{inputs:[t],outputs:[-1]})[0],g=[{type:"uint32",data:f},{type:"uint32",data:o},{type:"uint32",data:Math.floor(a/u)},{type:"uint32",data:Math.floor(l*a/u)}];return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:"".concat(u,";").concat(s),inputDependencies:["type","type","type"]},getRunData:function getRunData(){return{outputs:[{dims:[i,a,2],dataType:1}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:g};},getShaderSource:function getShaderSource(e){var t=Tf("scale",r.dataType,r.dims,u),i=Tf("bias",n.dataType,n.dims,u);return"\n  @group(0) @binding(0) var<storage, read> input : array<".concat(h,">;\n  @group(0) @binding(1) var<storage, read> scale : array<").concat(t.type.storage,">;\n  @group(0) @binding(2) var<storage, read> bias : array<").concat(i.type.storage,">;\n  @group(0) @binding(3) var<storage, read_write> output : array<").concat(h,">;\n  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};\n  @group(0) @binding(4) var<uniform> uniforms: Uniforms;\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work"),"\n    let currentImageNumber = global_idx / uniforms.C;\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let offset = currentImageNumber * uniforms.image_size;\n    var sum = ").concat(xf("f32",u),";\n    var squaredSum = ").concat(xf("f32",u),";\n    for (var i: u32 = 0; i < 64; i++) {\n        let value = input[offset + i + currentChannelNumber * 64];\n        sum += value[0];\n        squaredSum += value[1];\n    }\n    sum = sum / f32(uniforms.H);\n    squaredSum = squaredSum / f32(uniforms.H);\n    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(").concat(s,"));\n    let channelScale = invStdDev * ").concat(c,"(scale[currentChannelNumber]);\n    let channelShift = ").concat(c,"(bias[currentChannelNumber]) - sum * channelScale;\n\n    output[global_idx] = ").concat(d("channelScale","channelShift"),";\n  }");}},{inputs:[y,r,n],outputs:[-1]})[0];},vm=function vm(e,t,r){var n=t[0].dims,i=n,o=n[0],a=n[n.length-1],s=cf.sizeFromDimension(n,1)/a,u=vf(a),l=cf.size(i)/u,h=[{type:"uint32",data:s},{type:"uint32",data:Math.floor(a/u)}],c=bm(e,t[0],t[1],t[2],o,s,a,r.epsilon);e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:"".concat(u),inputDependencies:["type","type"]},getRunData:function getRunData(){return{outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:h};},getShaderSource:function getShaderSource(e){var r=mf(t[0].dataType),n=1===u?"vec2f":"mat2x".concat(u,"f"),o=1===u?r:"vec".concat(u,"<").concat(r,">"),a=Tf("input",t[0].dataType,t[0].dims,u),s=Cf("output",t[0].dataType,i,u);return"\n  @group(0) @binding(0) var<storage, read> input : array<".concat(a.type.storage,">;\n  @group(0) @binding(1) var<storage, read> scaleInput : array<").concat(n,">;\n  @group(0) @binding(2) var<storage, read_write> output : array<").concat(s.type.storage,">;\n  struct Uniforms {H: u32, C : u32};\n  @group(0) @binding(3) var<uniform> uniforms: Uniforms;\n\n  ").concat(e.mainStart(),"\n    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;\n    let scale = scaleInput[scaleOffset];\n    output[global_idx] = fma(input[global_idx], ").concat(o,"(scale[0]), ").concat(o,"(scale[1]));\n  }");}},{inputs:[t[0],c]});},xm=function xm(e,t){"NHWC"===t.format?vm(e,e.inputs,t):e.compute(wm(e.inputs,t));};}),ev=Mc(function(){gb(),Ib(),Ab(),_m=function _m(e){if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.");},Im=function Im(e,t,r){var n=e[0].dims,i=e[1],o=e[2],a=n,s=cf.normalizeAxis(t.axis,n.length),u=cf.sizeToDimension(n,s),l=cf.sizeFromDimension(n,s),h=cf.size(i.dims),c=o?cf.size(o.dims):0;if(h!==l||o&&c!==l)throw new Error("Size of X.shape()[axis:] == ".concat(l,".\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ").concat(h," and bias size of ").concat(c));var d=[];for(var _e899=0;_e899<n.length;++_e899)_e899<s?d.push(n[_e899]):d.push(1);var f=vf(l),p=["type","type"],y=[{type:"uint32",data:u},{type:"float32",data:l},{type:"uint32",data:Math.floor(l/f)},{type:"float32",data:t.epsilon}];o&&p.push("type");var g=r>1,m=r>2,w=[{dims:a,dataType:e[0].dataType}];return g&&w.push({dims:d,dataType:1}),m&&w.push({dims:d,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:"".concat(f,";").concat(r),inputDependencies:p},getRunData:function getRunData(){return{outputs:w,dispatchGroup:{x:Math.ceil(u/64)},programUniforms:y};},getShaderSource:function getShaderSource(t){var _t$registerUniforms;var r=mf(e[0].dataType),n=[Tf("x",e[0].dataType,e[0].dims,f),Tf("scale",i.dataType,i.dims,f)];o&&n.push(Tf("bias",o.dataType,o.dims,f)),n.push(Cf("output",e[0].dataType,a,f)),g&&n.push(Cf("mean_data_output",1,d)),m&&n.push(Cf("inv_std_output",1,d));return"\n  ".concat((_t$registerUniforms=t.registerUniforms([{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}])).declareVariables.apply(_t$registerUniforms,n),"\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count"),"\n    let offset = global_idx * uniforms.norm_size_vectorized;\n    var meanVector = ").concat(xf("f32",f),";\n    var meanSquareVector = ").concat(xf("f32",f),";\n\n    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {\n      let value = ").concat(_f(r,f,"x[h + offset]"),";\n      meanVector += value;\n      meanSquareVector += value * value;\n    }\n    let mean = ").concat(If("meanVector",f)," / uniforms.norm_size;\n    let invStdDev =\n        inverseSqrt(").concat(If("meanSquareVector",f)," / uniforms.norm_size - mean * mean + uniforms.epsilon);\n\n    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {\n      let f32input = ").concat(_f(r,f,"x[j + offset]"),";\n      let f32scale = ").concat(_f(r,f,"scale[j]"),";\n      output[j + offset] = ").concat(n[0].type.value,"((f32input - mean) * invStdDev * f32scale\n        ").concat(o?"+ ".concat(_f(r,f,"bias[j]")):"","\n      );\n    }\n\n    ").concat(g?"mean_data_output[global_idx] = mean":"",";\n    ").concat(m?"inv_std_output[global_idx] = invStdDev":"",";\n  }");}};},Am=function Am(e,t){_m(e.inputs),e.compute(Im(e.inputs,t,e.outputCount));};}),tv=Mc(function(){Ib(),_b(),vb(),Ob(),Ab(),Sb(),Sm=function Sm(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];if(3!==r.dims.length&&5!==r.dims.length)throw new Error("Input query is expected to have 3 or 5 dimensions");var h,c=r.dims[0],d=r.dims[1],f=3===r.dims.length?r.dims[2]:t.numHeads*r.dims[4],p=d,y=0,g=0,m=Math.floor(f/t.numHeads);if(u&&l){if(4!==u.dims.length)throw new Error('Input "past_key" is expected to have 4 dimensions');if(4!==l.dims.length)throw new Error('Input "past_value" is expected to have 4 dimensions');y=u.dims[2],g=u.dims[2];}else if(u||l)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');if(n){if(3!==r.dims.length)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(3===n.dims.length){if(n.dims[2]!==r.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');h=2,p=n.dims[1];}else if(5===n.dims.length){if(n.dims[2]!==t.numHeads||2!==n.dims[3]||n.dims[4]!==m)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');h=5,p=n.dims[1];}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==m)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');h=0,p=n.dims[2];}}else{if(3!==r.dims.length&&5!==r.dims.length)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(5===r.dims.length&&(r.dims[2]!==t.numHeads||3!==r.dims[3]))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');h=3;}if(o){if(1!==o.dims.length)throw new Error('Input "bias" is expected to have 1 dimension');if(i&&5===r.dims.length&&2===r.dims[3])throw new Error("bias is not allowed for packed kv.");}var w=0;if(a){w=8;var _e900=a.dims;throw 1===_e900.length?_e900[0]===c?w=1:_e900[0]===3*c+2&&(w=3):2===_e900.length&&_e900[0]===c&&_e900[1]===p&&(w=5),8===w?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)'):new Error("Mask not supported");}var b=!1,v=f;if(i){if(3!==i.dims.length&&4!==i.dims.length)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(3===i.dims.length){if(p!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');v=i.dims[2];}else{if(p!==i.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');v=i.dims[1]*i.dims[3],b=!0;}}var x=y+p;if(a)throw new Error("Key padding mask is not supported");if(s)throw new Error("extraAddQk is not supported");if(u)throw new Error("pastKey is not supported");if(l)throw new Error("pastValue is not supported");return{batchSize:c,sequenceLength:d,pastSequenceLength:y,kvSequenceLength:p,totalSequenceLength:x,maxSequenceLength:g,inputHiddenSize:0,hiddenSize:f,vHiddenSize:v,headSize:m,vHeadSize:Math.floor(v/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:w,scale:t.scale,broadcastResPosBias:!1,passPastInKv:b,qkvFormat:h};},Tm=function Tm(e){return uf(_objectSpread({},e));},Cm=uf({perm:[0,2,1,3]}),Em=function Em(e,t,r,n,i,o,a){var s=[n,i,o],u=cf.size(s),l=[{type:"uint32",data:u},{type:"uint32",data:a},{type:"uint32",data:o}];return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:function getRunData(){return{outputs:[{dims:s,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:l};},getShaderSource:function getShaderSource(e){var n=Cf("qkv_with_bias",t.dataType,s),i=Tf("qkv",t.dataType,s),o=Tf("bias",r.dataType,s);return"\n  ".concat(e.registerUniforms([{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}]).declareVariables(i,o,n),"\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size"),"\n    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;\n\n    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];\n  }");}},{inputs:[t,r],outputs:[-1]})[0];},Om=function Om(e,t,r,n,i,o,a,s){var u=o;if(a){if(1===n)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return u=Em(e,o,a,t,n,r*i,s),u=u.reshape([t,n,r,i]),e.compute(Lf(u,Cm.perm),{inputs:[u],outputs:[-1]})[0];}return 3===o.dims.length&&(u=o.reshape([t,n,r,i])),e.compute(Lf(u,Cm.perm),{inputs:[u],outputs:[-1]})[0];},km=function km(e,t){var _e$inputs$;var r=Sm(e.inputs,t);if(5===e.inputs[0].dims.length)throw new Error("Packed QKV is not implemented");if(5===((_e$inputs$=e.inputs[1])===null||_e$inputs$===void 0?void 0:_e$inputs$.dims.length))throw new Error("Packed KV is not implemented");var n=e.inputs[1]&&e.inputs[2]&&4===e.inputs[1].dims.length&&4===e.inputs[2].dims.length,i=Om(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,e.inputs[0],e.inputs[3],0);if(n)return jp(e,i,e.inputs[1],e.inputs[2],e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t);var o=Om(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,e.inputs[1],e.inputs[3],r.hiddenSize),a=Om(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,e.inputs[2],e.inputs[3],2*r.hiddenSize);jp(e,i,o,a,e.inputs[4],void 0,e.inputs[6],e.inputs[7],e.inputs[5],r,t);};}),rv=Mc(function(){gb(),Ib(),Ab(),Pm=function Pm(e){if(!e||e.length<1)throw new Error("Too few inputs");if(1!==e[0].dataType)throw new Error("Input type must be float.");if(e.length>=2){var _t373=2*e[0].dims.length===e[1].dims[0];if(4===e.length&&(_t373=2*e[3].dims[0]===e[1].dims[0]),!_t373)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].");}},$m=function $m(e,t,r){var n="";for(var i=t-1;i>=0;--i)n+="\n            k = i32(".concat(e.indicesGet("indices",i),") - ").concat(Af("uniforms.pads",i,r),";\n            if (k < 0) {\n              break;\n            }\n            if (k >= i32(").concat(Af("uniforms.x_shape",i,t),")) {\n              break;\n            }\n            offset += k * i32(").concat(Af("uniforms.x_strides",i,t),");\n        ");return"\n          value = ".concat(e.type.value,"(uniforms.constant_value);\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ").concat(n,"\n            value = x[offset];\n          }\n      ");},Rm=function Rm(e,t,r){var n="";for(var i=t-1;i>=0;--i)n+="\n                k = i32(".concat(e.indicesGet("indices",i),") - ").concat(Af("uniforms.pads",i,r),";\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = 2 * (i32(").concat(Af("uniforms.x_shape",i,t),") - 1);\n                  k = k % _2n_1;\n                  if(k >= i32(").concat(Af("uniforms.x_shape",i,t),")) {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * i32(").concat(Af("uniforms.x_strides",i,t),");\n            ");return"\n              var offset = 0;\n              var k = 0;\n              ".concat(n,"\n              value = x[offset];\n          ");},Bm=function Bm(e,t,r){var n="";for(var i=t-1;i>=0;--i)n+="\n                k = i32(".concat(e.indicesGet("indices",i),") - ").concat(Af("uniforms.pads",i,r),";\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= i32(").concat(Af("uniforms.x_shape",i,t),")) {\n                  k = i32(").concat(Af("uniforms.x_shape",i,t),") - 1;\n                }\n                offset += k * i32(").concat(Af("uniforms.x_strides",i,t),");\n            ");return"\n              var offset = 0;\n              var k = 0;\n              ".concat(n,"\n              value = x[offset];\n          ");},Dm=function Dm(e,t,r){var n="";for(var i=t-1;i>=0;--i)n+="\n                k = i32(".concat(e.indicesGet("indices",i),") - ").concat(Af("uniforms.pads",i,r),";\n                if (k < 0)  {\n                  k += i32(").concat(Af("uniforms.x_shape",i,t),"]);\n                }\n                if (k >= i32(").concat(Af("uniforms.x_shape",i,t),")) {\n                  k -= i32(").concat(Af("uniforms.x_shape",i,t),");\n                }\n                offset += k * i32(").concat(Af("uniforms.x_strides",i,t),");\n            ");return"\n              var offset = 0;\n              var k = 0;\n              ".concat(n,"\n              value = x[offset];\n          ");},Mm=function Mm(e,t,r){switch(r.mode){case 0:return $m(e,t,r.pads.length);case 1:return Rm(e,t,r.pads.length);case 2:return Bm(e,t,r.pads.length);case 3:return Dm(e,t,r.pads.length);default:throw new Error("Invalid mode");}},Lm=function Lm(e,t){var r=cf.padShape(e[0].dims.slice(),t.pads),n=e[0].dims,i=[{type:"uint32",data:cf.size(r)},{type:"uint32",data:t.pads}];if(0===t.mode){var _r344=Nd(e[0].dataType);i.push({type:_r344,data:t.value});}i.push.apply(i,_toConsumableArray(bf(e[0].dims)).concat(_toConsumableArray(bf(r))));return{name:"Pad",shaderCache:{hint:"".concat(t.mode),inputDependencies:["rank"]},getRunData:function getRunData(){return{outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(cf.size(r)/64)},programUniforms:i};},getShaderSource:function getShaderSource(i){var o=Cf("output",e[0].dataType,r.length),a=Tf("x",e[0].dataType,n.length),s=a.type.value,u=Mm(o,n.length,t),l=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return 0===t.mode&&l.push({name:"constant_value",type:s}),"\n            ".concat(i.registerUniforms(l).declareVariables(a,o),"\n            ").concat(i.mainStart(),"\n            ").concat(i.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size"),"\n\n            let indices = ").concat(o.offsetToIndices("global_idx"),";\n\n            var value = ").concat(s,"(0);\n            ").concat(u,"\n            output[global_idx] = value;\n        }");}};},Fm=function Fm(e,t){if(e.length>1){var _r345=e[1].getBigInt64Array(),n=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,i=e[0].dims.length,_o98=new Int32Array(2*i).fill(0);if(e.length>=4){var _t374=e[3].getBigInt64Array();for(var _e901=0;_e901<_t374.length;_e901++)_o98[Number(_t374[_e901])]=Number(_r345[_e901]),_o98[Number(_t374[_e901])+i]=Number(_r345[_e901+_t374.length]);}else _r345.forEach(function(e,t){return _o98[Number(t)]=Number(e);});var _a89=[];return _o98.forEach(function(e){return _a89.push(e);}),{mode:t.mode,value:n,pads:_a89};}return t;},Nm=function Nm(e,t){Pm(e.inputs);var r=Fm(e.inputs,t);e.compute(Lm(e.inputs,r),{inputs:[0]});};}),nv=Mc(function(){id(),Ib(),Ab(),Um=function Um(e){if(rc.webgpu.validateInputContent&&(!e||1!==e.length))throw new Error("Pool ops requires 1 input.");},jm=function jm(e,t,r){var n="NHWC"===t.format,i=e.dims.slice();n&&i.splice(1,0,i.pop());var o=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),s=t.strides.slice(),u=o?t.dilations.slice():[],l=t.pads.slice();df.adjustPoolAttributes(r,i,a,s,u,l);var h=df.computePoolOutputShape(r,i,s,u,a,l,t.autoPad),c=Object.assign({},t);o?Object.assign(c,{kernelShape:a,strides:s,pads:l,dilations:u,cacheKey:t.cacheKey}):Object.assign(c,{kernelShape:a,strides:s,pads:l,cacheKey:t.cacheKey});var d=h.slice();return d.push(d.splice(1,1)[0]),[c,n?d:h];},Gm=function Gm(e,t){var r="NHWC"===t.format,n=[{type:"uint32",data:cf.size(e)},{type:"uint32",data:cf.size(t.kernelShape)}],i=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){var _e902=t.kernelShape[t.kernelShape.length-1],_r346=t.strides[t.strides.length-1],_o99=t.pads[t.pads.length/2-1],_a90=t.pads[t.pads.length-1],_s57=!!(_o99+_a90);n.push({type:"uint32",data:_e902},{type:"uint32",data:_r346},{type:"uint32",data:_o99},{type:"uint32",data:_a90}),i.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});var _u42=!1;if(2===t.kernelShape.length){var _e903=t.kernelShape[t.kernelShape.length-2],_r347=t.strides[t.strides.length-2],_o100=t.pads[t.pads.length/2-2],_a91=t.pads[t.pads.length-2];_u42=!!(_o100+_a91),n.push({type:"uint32",data:_e903},{type:"uint32",data:_r347},{type:"uint32",data:_o100},{type:"uint32",data:_a91}),i.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"});}return[n,i,!0,_s57,_u42];}{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var _e904=cf.computeStrides(t.kernelShape);n.push({type:"uint32",data:_e904},{type:"uint32",data:t.pads},{type:"uint32",data:t.strides}),i.push({name:"kernelStrides",type:"u32",length:_e904.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});var _o101=t.pads.reduce(function(e,t){return e+t;});return[n,i,!!_o101,!1,!1];}},zm=function zm(e,t,r,n,i,o,a,s,u,l,h,c){var d="NHWC"===i.format,f=t.type.value,p=Cf("output",t.type.tensor,n);if(i.kernelShape.length<=2){var _n170="",_l32="",_y10="",_g8=r-(d?2:1);if(_n170=h?"\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[".concat(_g8,"] = indices[").concat(_g8,"] * uniforms.sw - uniforms.pwStart + i;\n                  if (xIndices[").concat(_g8,"] < 0 || xIndices[").concat(_g8,"]\n                      >= uniforms.x_shape[").concat(_g8,"]) {\n                    pad++;\n                    continue;\n                  }\n                  let x_val = x[").concat(t.indicesToOffset("xIndices"),"];\n                  ").concat(o,"\n                }"):"\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[".concat(_g8,"] = indices[").concat(_g8,"] * uniforms.sw - uniforms.pwStart + i;\n                  let x_val = x[").concat(t.indicesToOffset("xIndices"),"];\n                  ").concat(o,"\n                }"),2===i.kernelShape.length){var _e905=r-(d?3:2);_l32=c?"\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[".concat(_e905,"] = indices[").concat(_e905,"] * uniforms.sh - uniforms.phStart + j;\n                  if (xIndices[").concat(_e905,"] < 0 || xIndices[").concat(_e905,"] >= uniforms.x_shape[").concat(_e905,"]) {\n                    pad += i32(uniforms.kw);\n                    continue;\n                  }\n              "):"\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[".concat(_e905,"] = indices[").concat(_e905,"] * uniforms.sh - uniforms.phStart + j;\n                "),_y10="\n              }\n            ";}return"\n            ".concat(e.registerUniforms(u).declareVariables(t,p),"\n\n            ").concat(e.mainStart(),"\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n\n              let indices = ").concat(p.offsetToIndices("global_idx"),";\n              var xIndices = ").concat(p.offsetToIndices("global_idx"),";\n\n              var value = ").concat(f,"(").concat(s,");\n              var pad = 0;\n              ").concat(_l32,"\n              ").concat(_n170,"\n              ").concat(_y10,"\n              ").concat(a,"\n\n              output[global_idx] = value;\n            }");}{if(d)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var _n171=i.kernelShape.length,_h27=i.pads.length,_c21="";return _c21=l?"\n                if (xIndices[j] >= uniforms.x_shape[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[".concat(t.indicesToOffset("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              }\n              let x_val = x[".concat(t.indicesToOffset("xIndices"),"];\n              ").concat(o,"\n            "),"\n            ".concat(e.registerUniforms(u).declareVariables(t,p),"\n\n            ").concat(e.mainStart(),"\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n              let indices = ").concat(p.offsetToIndices("global_idx"),";\n              var xIndices = ").concat(p.offsetToIndices("global_idx"),";\n\n              var offsets: array<u32, ").concat(_n171,">;\n\n              var value = ").concat(f,"(").concat(s,");\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {\n                var offset = i;\n                for (var j = 0u; j < ").concat(_n171-1,"u; j++) {\n                  offsets[j] = offset / ").concat(Af("uniforms.kernelStrides","j",_n171),";\n                  offset -= offsets[j] * ").concat(Af("uniforms.kernelStrides","j",_n171),";\n                }\n                offsets[").concat(_n171-1,"] = offset;\n\n                isPad = false;\n                for (var j = ").concat(r-_n171,"u; j < ").concat(r,"u; j++) {\n                  xIndices[j] = indices[j] * ").concat(Af("uniforms.strides","j - ".concat(r-_n171,"u"),_n171),"\n                    + offsets[j - ").concat(r-_n171,"u] - ").concat(Af("uniforms.pads","j - 2u",_h27),";\n                  ").concat(_c21,"\n              }\n              ").concat(a,"\n\n              output[global_idx] = value;\n            }");}},Vm=function Vm(e){return"".concat(e.format,";").concat(e.ceilMode,";").concat(e.autoPad,";").concat(e.kernelShape.length);},Hm=function Hm(e){return"".concat(Vm(e),";").concat(e.countIncludePad);},Wm=function Wm(e){return"".concat(Vm(e),";").concat(e.storageOrder,";").concat(e.dilations);},Ym=function Ym(e){return{format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads};},Km=function Km(e,t,r,n){var _jm=jm(t,n,r),_jm2=_slicedToArray(_jm,2),i=_jm2[0],o=_jm2[1],a=Tf("x",t.dataType,t.dims.length),s=a.type.value,u="";i.countIncludePad?u+="value /= ".concat(s,"(uniforms.kernelSize);"):u+="value /= ".concat(s,"(i32(uniforms.kernelSize) - pad);");var _Gm=Gm(o,i),_Gm2=_slicedToArray(_Gm,5),l=_Gm2[0],h=_Gm2[1],c=_Gm2[2],d=_Gm2[3],f=_Gm2[4];l.push.apply(l,_toConsumableArray(bf(t.dims)).concat(_toConsumableArray(bf(o))));return{name:e,shaderCache:{hint:"".concat(n.cacheKey,";").concat(c,";").concat(d,";").concat(f),inputDependencies:["rank"]},getRunData:function getRunData(){return{outputs:[{dims:o,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(cf.size(o)/64)},programUniforms:l};},getShaderSource:function getShaderSource(e){return zm(e,a,t.dims.length,o.length,i,"value += x_val;",u,0,h,c,d,f);}};},Xm=function Xm(e){var t=0!==e.count_include_pad,r=Ym(e);if(0!==r.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");var n=_objectSpread(_objectSpread({countIncludePad:t},r),{},{cacheKey:""});return _objectSpread(_objectSpread({},n),{},{cacheKey:Hm(n)});},Zm=function Zm(e,t){Um(e.inputs),e.compute(Km("AveragePool",e.inputs[0],!1,t));},qm={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},Jm=function Jm(e){var t=e.format;return _objectSpread(_objectSpread({format:t},qm),{},{cacheKey:t});},Qm=function Qm(e,t){Um(e.inputs),e.compute(Km("GlobalAveragePool",e.inputs[0],!0,t));},ew=function ew(e,t,r,n){var _jm3=jm(t,n,r),_jm4=_slicedToArray(_jm3,2),i=_jm4[0],o=_jm4[1],a=Tf("x",t.dataType,t.dims.length),_Gm3=Gm(o,i),_Gm4=_slicedToArray(_Gm3,5),s=_Gm4[0],u=_Gm4[1],l=_Gm4[2],h=_Gm4[3],c=_Gm4[4];return s.push.apply(s,_toConsumableArray(bf(t.dims)).concat(_toConsumableArray(bf(o)))),{name:e,shaderCache:{hint:"".concat(n.cacheKey,";").concat(l,";").concat(h,";").concat(c),inputDependencies:["rank"]},getRunData:function getRunData(){return{outputs:[{dims:o,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(cf.size(o)/64)},programUniforms:s};},getShaderSource:function getShaderSource(e){return zm(e,a,t.dims.length,o.length,i,"\n      value = max(x_val, value);\n    ","",-1e5,u,l,h,c);}};},tw=function tw(e,t){Um(e.inputs),e.compute(ew("MaxPool",e.inputs[0],!1,t));},rw=function rw(e){var t=e.storage_order,r=e.dilations,n=Ym(e);if(0!==t)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");var i=_objectSpread(_objectSpread({storageOrder:t,dilations:r},n),{},{cacheKey:""});return _objectSpread(_objectSpread({},i),{},{cacheKey:Wm(i)});},nw=function nw(e){var t=e.format;return _objectSpread(_objectSpread({format:t},qm),{},{cacheKey:t});},iw=function iw(e,t){Um(e.inputs),e.compute(ew("GlobalMaxPool",e.inputs[0],!0,t));};}),iv=Mc(function(){id(),gb(),Ab(),ow=function ow(e,t,r){if(e===t||e<t&&r<0||e>t&&r>0)throw new Error("Range these inputs' contents are invalid.");},aw=function aw(e,t,r,n){var i=Math.abs(Math.ceil((t-e)/r)),o=[i],a=i,s=Nd(n),u=[{type:"uint32",data:a},{type:s,data:e},{type:s,data:r}].concat(_toConsumableArray(bf(o)));return{name:"Range",shaderCache:{hint:"".concat(n)},getShaderSource:function getShaderSource(e){var t=Cf("output",n,o.length),r=t.type.value,i=[{name:"outputSize",type:"u32"},{name:"start",type:r},{name:"delta",type:r}];return"\n        ".concat(e.registerUniforms(i).declareVariables(t),"\n        ").concat(e.mainStart(),"\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n        output[global_idx] = uniforms.start + ").concat(r,"(global_idx) * uniforms.delta;\n      }");},getRunData:function getRunData(){return{outputs:[{dims:o,dataType:n}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:u};}};},sw=function sw(e){var t=0,r=0,n=0;6===e.inputs[0].dataType?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],n=e.inputs[2].getInt32Array()[0]):1===e.inputs[0].dataType&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],n=e.inputs[2].getFloat32Array()[0]),rc.webgpu.validateInputContent&&ow(t,r,n),e.compute(aw(t,r,n,e.inputs[0].dataType),{inputs:[]});};}),ov=Mc(function(){Ib(),_b(),Ab(),uw=function uw(e,t){if(e.every(function(e){return e>0||function(){throw new Error("Resize requires scales input values to be positive");};}),e.length>0)if("linear"===t.mode){if(!(2===e.length||3===e.length||4===e.length&&1===e[0]&&1===e[1]||4===e.length&&1===e[0]&&1===e[3]||5===e.length&&1===e[0]&&1===e[1]))throw new Error("For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and\n            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1");}else if("cubic"===t.mode&&!(2===e.length||4===e.length&&1===e[0]&&1===e[1]||4===e.length&&1===e[0]&&1===e[3]))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode");},lw=function lw(e,t,r){t.every(function(e){return e>=0&&e<r||function(){throw new Error("Resize requires axes input values to be positive and less than rank");};});var n=new Array(r).fill(1);return t.forEach(function(t,r){return n[t]=e[r];}),n;},hw=function hw(e,t,r,n,i,o){var _ref88=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],_ref89=_slicedToArray(_ref88,3),a=_ref89[0],s=_ref89[1],u=_ref89[2],l=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(function(e){return o.push(e);});else if("tf_crop_and_resize"===t.coordinateTransformMode)throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(s>0&&e.length>s&&e[s].dims.length>0){if(e[s].getFloat32Array().forEach(function(e){return n.push(e);}),0!==n.length&&n.length!==l&&r>=18&&n.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");uw(n,t),t.axes.length>0&&lw(n,t.axes,l).forEach(function(e,t){return n[t]=e;});}if(u>0&&e.length>u&&(e[u].getBigInt64Array().forEach(function(e){return i.push(Number(e));}),i.length!==l||r>=18&&i.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(n.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(i.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified');}if(_typeof(n)<"u"&&_typeof(i)<"u"&&n.length>0&&i.length>l)throw new Error("Resize requires only of scales or sizes to be specified");},cw=function cw(e,t){return"fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,\n     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ".concat(t," { ")+function(){switch(e){case"asymmetric":return"return ".concat(t,"(xResized) / ").concat(t,"(xScale);");case"pytorch_half_pixel":return"if (lengthResized > 1) {\n                    return (".concat(t,"(xResized) + 0.5) / ").concat(t,"(xScale) - 0.5;\n                  } else {\n                    return 0.0;\n                  }");case"tf_half_pixel_for_nn":return"return (".concat(t,"(xResized) + 0.5) / ").concat(t,"(xScale);");case"align_corners":return"if (lengthResized == 1) {\n                    return 0.0;\n                  } else {\n                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating\n                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an\n                    // offset-by-one error later in floor().\n                    let whole = ".concat(t,"(xResized * (lengthOriginal - 1) / (lengthResized - 1));\n                    let fract =\n                        ").concat(t,"(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ").concat(t,"(lengthResized - 1);\n                    return whole + fract;\n                  }");case"tf_crop_and_resize":return"if (lengthResized > 1) {\n                    return ".concat(t,"(roiStart) * ").concat(t,"(lengthOriginal - 1) +\n                        (").concat(t,"(xResized) * ").concat(t,"(roiEnd - roiStart) * ").concat(t,"(lengthOriginal - 1)) /\n                        ").concat(t,"(lengthResized - 1);\n                  } else {\n                    return 0.5 * ").concat(t,"(roiStart + roiEnd) * ").concat(t,"(lengthOriginal - 1);\n                  }");case"half_pixel_symmetric":return"const outputWidth = ".concat(t,"xScale * ").concat(t,"(lengthResized);\n                  const adjustment = ").concat(t,"(lengthResized) / outputWidth;\n                  const center = ").concat(t,"(lengthOriginal) / 2;\n                  const offset = center * (1 - adjustment);\n                  return offset + ((").concat(t,"(xResized) + 0.5) / ").concat(t,"(xScale)) - 0.5;");case"half_pixel":return"return ((".concat(t,"(xResized) + 0.5) / ").concat(t,"(xScale)) - 0.5;");default:throw new Error("Coordinate transform mode ".concat(e," is not supported"));}}()+"}";},dw=function dw(e,t,r){return"fn getNearestPixelFromOriginal(xOriginal: ".concat(r,", isDownSample: bool) -> ").concat(r," {")+function(){switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error("Nearest mode ".concat(e," is not supported"));}}()+"}";},fw=function fw(e,t,r){var n=new Array(r).fill(0).concat(new Array(r).fill(1)),i=0===e.length?n:e.slice();return t.length>0?(t.forEach(function(e,o){n[e]=i[o],n[o+r]=i[t.length+o];}),n):i;},pw=function pw(e,t,r,n){var i=[];if(r.length>0){if(n.length>0){if(e.forEach(function(e){return i.push(e);}),Math.max.apply(Math,_toConsumableArray(n))>e.length)throw new Error("axes is out of bound");n.forEach(function(e,t){return i[e]=r[t];});}else r.forEach(function(e){return i.push(e);});}else{if(0===t.length)throw new Error("Resize requires either scales or sizes.");i=e.map(function(e,r){return Math.round(e*t[r]);});}return i;},yw=function yw(e,t,r){var n=function(){switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min.apply(Math,_toConsumableArray(r.axes.map(function(e){return t[e];})).concat([Number.MAX_VALUE])):Math.min.apply(Math,_toConsumableArray(t).concat([Number.MAX_VALUE]));case"not_smaller":return r.axes.length>0?Math.max.apply(Math,_toConsumableArray(r.axes.map(function(e){return t[e];})).concat([Number.MIN_VALUE])):Math.max.apply(Math,_toConsumableArray(t).concat([Number.MIN_VALUE]));default:throw new Error("Keep aspect ratio policy ".concat(r.keepAspectRatioPolicy," is not supported"));}}();t.fill(1,0,t.length);var i=e.slice();return r.axes.length>0?(r.axes.forEach(function(e){return t[e]=n;}),r.axes.forEach(function(r){return i[r]=Math.round(e[r]*t[r]);})):(t.fill(n,0,t.length),i.forEach(function(e,r){return i[r]=Math.round(e*t[r]);})),i;},gw=function gw(e,t,r,n,i){return"\n    fn calculateOriginalIndicesFromOutputIndices(output_indices: ".concat(e.type.indices,") -> array<").concat(e.type.value,", ").concat(r.length,"> {\n      var original_indices: array<").concat(e.type.value,", ").concat(r.length,">;\n      for (var i:u32 = 0; i < ").concat(r.length,"; i++) {\n        var output_index = ").concat(e.indicesGet("output_indices","i"),";\n        var scale = ").concat(Af("uniforms.scales","i",n),";\n        var roi_low = ").concat(Af("uniforms.roi","i",i),";\n        var roi_hi = ").concat(Af("uniforms.roi","i + ".concat(t.length),i),";\n        if (scale == 1.0) {\n          original_indices[i] = ").concat(e.type.value,"(output_index);\n        } else {\n          var input_shape_i = ").concat(Af("uniforms.input_shape","i",t.length),";\n          var output_shape_i = ").concat(Af("uniforms.output_shape","i",r.length),";\n          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                           input_shape_i, roi_low, roi_hi);\n        }\n      }\n      return original_indices;\n    }");},mw=function mw(e,t,r,n,i,o,a){return"\n    fn calculateInputIndicesFromOutputIndices(output_indices: ".concat(t.type.indices,") -> ").concat(e.type.indices," {\n      var input_indices: ").concat(e.type.indices,";\n      for (var i:u32 = 0; i < ").concat(n.length,"; i++) {\n        var output_index = ").concat(t.indicesGet("output_indices","i"),";\n        var input_index: u32;\n        var scale = ").concat(Af("uniforms.scales","i",i),";\n        if (scale == 1.0) {\n          input_index = output_index;\n        } else {\n          var roi_low = ").concat(Af("uniforms.roi","i",o),";\n          var roi_hi = ").concat(Af("uniforms.roi","i + ".concat(r.length),o),";\n          var input_shape_i = ").concat(Af("uniforms.input_shape","i",r.length),";\n          var output_shape_i = ").concat(Af("uniforms.output_shape","i",n.length),";\n          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                        input_shape_i, roi_low, roi_hi);\n          if (!").concat(a," || (original_idx >= 0 && original_idx < ").concat(t.type.value,"(input_shape_i))) {\n            if (original_idx < 0) {\n              input_index = 0;\n            } else if (original_idx > ").concat(t.type.value,"(input_shape_i - 1)) {\n              input_index = input_shape_i - 1;\n            } else {\n              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));\n            }\n          } else {\n            input_index = u32(original_idx);\n          }\n        }\n        ").concat(e.indicesSet("input_indices","i"," input_index"),"\n      }\n      return input_indices;\n    }");},ww=function ww(e,t){return"\n    fn checkInputIndices(input_indices: ".concat(e.type.indices,") -> bool {\n      for (var i:u32 = 0; i < ").concat(t.length,"; i++) {\n        var input_index = ").concat(e.indicesGet("input_indices","i"),";\n        if (input_index < 0 || input_index >= ").concat(Af("uniforms.input_shape","i",t.length),") {\n          return false;\n        }\n      }\n      return true;\n    }");},bw=function bw(e,t,r,n){return e.rank>n?"\n    ".concat(e.indicesSet("input_indices",t,"channel"),";\n    ").concat(e.indicesSet("input_indices",r,"batch"),";\n"):"";},vw=function vw(e,t,r,n,i){var _ref90=2===r.length?[-1,0,1,-1]:[0,2,3,1],_ref91=_slicedToArray(_ref90,4),o=_ref91[0],a=_ref91[1],s=_ref91[2],u=_ref91[3],l=e.type.value;return"\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ".concat(l," {\n      var input_indices: ").concat(e.type.indices,";\n      ").concat(e.indicesSet("input_indices",a,"max(0, min(row, ".concat(r[a]," - 1))")),";\n      ").concat(e.indicesSet("input_indices",s,"max(0, min(col, ".concat(r[s]," - 1))")),";\n      ").concat(bw(e,u,o,2),"\n      return ").concat(e.getByIndices("input_indices"),";\n    }\n\n    fn bilinearInterpolation(output_indices: ").concat(t.type.indices,") -> ").concat(l," {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var row:").concat(l," = originalIndices[").concat(a,"];\n      var col:").concat(l," = originalIndices[").concat(s,"];\n      ").concat(n?"if (row < 0 || row > (".concat(r[a]," - 1) || col < 0 || col > (").concat(r[s]," - 1)) {\n        return ").concat(i,";\n      }"):"",";\n      row = max(0, min(row, ").concat(r[a]," - 1));\n      col = max(0, min(col, ").concat(r[s]," - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = ").concat(r.length>2?"u32(originalIndices[".concat(u,"])"):"0",";\n      var batch: u32 =  ").concat(r.length>2?"u32(originalIndices[".concat(o,"])"):"0",";\n      var x11: ").concat(l," = getInputValue(batch, channel, row1, col1);\n      var x12: ").concat(l," = getInputValue(batch, channel, row1, col2);\n      var x21: ").concat(l," = getInputValue(batch, channel, row2, col1);\n      var x22: ").concat(l," = getInputValue(batch, channel, row2, col2);\n      var dx1: ").concat(l," = abs(row - ").concat(l,"(row1));\n      var dx2: ").concat(l," = abs(").concat(l,"(row2) - row);\n      var dy1: ").concat(l," = abs(col - ").concat(l,"(col1));\n      var dy2: ").concat(l," = abs(").concat(l,"(col2) - col);\n      if (row1 == row2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (col1 == col2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }");},xw=function xw(e,t,r,n,i,o,a,s,u,l){var h=2===r.length,_ref92=h?[0,1]:[2,3],_ref93=_slicedToArray(_ref92,2),c=_ref93[0],d=_ref93[1],f=e.type.value,p=function p(a){var h=a===c?"row":"col";return"\n      fn ".concat(h,"CubicInterpolation(input_indices: ").concat(e.type.indices,", output_indices: ").concat(t.type.indices,") -> ").concat(f," {\n        var output_index = ").concat(t.indicesGet("output_indices",a),";\n        var originalIdx: ").concat(f," = getOriginalCoordinateFromResizedCoordinate(output_index, ").concat(i[a],",\n        ").concat(n[a],", ").concat(r[a],", ").concat(o[a],", ").concat(o[a]," + ").concat(r.length,");\n        var fractOriginalIdx: ").concat(f," = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (").concat(s," && (originalIdx < 0 || originalIdx > (").concat(r[a]," - 1))) {\n          return ").concat(u,";\n        }\n        var data: array<").concat(f,", 4> = array<").concat(f,", 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ").concat(h,": ").concat(f," = originalIdx + ").concat(f,"(i);\n          if (").concat(h," < 0 || ").concat(h," >= ").concat(r[a],") {\n            ").concat(l?"coefs[i + 1] = 0.0;\n                        continue;":s?"return ".concat(u,";"):"".concat(h," = max(0, min(").concat(h,", ").concat(r[a]," - 1));"),";\n          }\n        var input_indices_copy: ").concat(e.type.indices," = input_indices;\n          ").concat(e.indicesSet("input_indices_copy",a,"u32(".concat(h,")")),";\n          data[i + 1] = ").concat(a===c?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)",";\n        }\n        return cubicInterpolation1D(data, coefs);\n      }");};return"\n    ".concat(p(c),";\n    ").concat(p(d),";\n  fn getCubicInterpolationCoefs(s: ").concat(f,") -> array<").concat(f,", 4> {\n    var absS = abs(s);\n    var coeffs: array<").concat(f,", 4> = array<").concat(f,", 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: ").concat(f," = 1.0 - absS;\n    var twoMinusAbsS: ").concat(f," = 2.0 - absS;\n    var onePlusAbsS: ").concat(f," = 1.0 + absS;\n    coeffs[0] = ((").concat(a," * onePlusAbsS - 5 * ").concat(a,") * onePlusAbsS + 8 * ").concat(a,") * onePlusAbsS - 4 * ").concat(a,";\n    coeffs[1] = ((").concat(a," + 2) * absS - (").concat(a," + 3)) * absS * absS + 1;\n    coeffs[2] = ((").concat(a," + 2) * oneMinusAbsS - (").concat(a," + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((").concat(a," * twoMinusAbsS - 5 * ").concat(a,") * twoMinusAbsS + 8 * ").concat(a,") * twoMinusAbsS - 4 * ").concat(a,";\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<").concat(f,", 4>, coefs: array<").concat(f,", 4>) -> ").concat(f," {\n    var coefsSum: ").concat(f," = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(output_indices: ").concat(t.type.indices,") -> ").concat(f," {\n    var input_indices: ").concat(e.type.indices," = output_indices;\n    return colCubicInterpolation(input_indices, output_indices);\n  }\n    ");},_w=function _w(e,t,r,n,i){var _ref94=3===r.length?[-1,0,1,2,-1]:[0,2,3,4,1],_ref95=_slicedToArray(_ref94,5),o=_ref95[0],a=_ref95[1],s=_ref95[2],u=_ref95[3],l=_ref95[4],h=e.type.value;return"\n    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ".concat(h," {\n      var input_indices: ").concat(e.type.indices,";\n      ").concat(e.indicesSet("input_indices",a,"max(0, min(depth, ".concat(r[a]," - 1))")),";\n      ").concat(e.indicesSet("input_indices",s,"max(0, min(height, ".concat(r[s]," - 1))")),";\n      ").concat(e.indicesSet("input_indices",u,"max(0, min(width, ".concat(r[u]," - 1))")),";\n      ").concat(bw(e,l,o,3),"\n      return ").concat(e.getByIndices("input_indices"),";\n    }\n\n    fn trilinearInterpolation(output_indices: ").concat(t.type.indices,") -> ").concat(h," {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var depth:").concat(h," = originalIndices[").concat(a,"];\n      var height:").concat(h," = originalIndices[").concat(s,"];\n      var width:").concat(h," = originalIndices[").concat(u,"];\n      ").concat(n?"if (depth < 0 || depth > (".concat(r[a]," - 1) || height < 0 || height > (").concat(r[s]," - 1) || width < 0 || (width > ").concat(r[u]," - 1)) {\n      return ").concat(i,";\n        }"):"",";\n\n    depth = max(0, min(depth, ").concat(r[a]," - 1));\n      height = max(0, min(height, ").concat(r[s]," - 1));\n      width = max(0, min(width, ").concat(r[u]," - 1));\n      var depth1: u32 = u32(depth);\n      var height1: u32 = u32(height);\n      var width1: u32 = u32(width);\n      var depth2: u32 = u32(depth + 1);\n      var height2: u32 = u32(height + 1);\n      var width2: u32 = u32(width + 1);\n      var channel: u32 = ").concat(r.length>3?"u32(originalIndices[".concat(l,"])"):"0",";\n      var batch: u32 =  ").concat(r.length>3?"u32(originalIndices[".concat(o,"])"):"0",";\n\n      var x111: ").concat(h," = getInputValue(batch, channel, depth1, height1, width1);\n      var x112: ").concat(h," = getInputValue(batch, channel, depth1, height1, width2);\n      var x121: ").concat(h," = getInputValue(batch, channel, depth1, height2, width1);\n      var x122: ").concat(h," = getInputValue(batch, channel, depth1, height2, width2);\n      var x211: ").concat(h," = getInputValue(batch, channel, depth2, height1, width1);\n      var x212: ").concat(h," = getInputValue(batch, channel, depth2, height1, width2);\n      var x221: ").concat(h," = getInputValue(batch, channel, depth2, height2, width1);\n      var x222: ").concat(h," = getInputValue(batch, channel, depth2, height2, width2);\n      var dx1: ").concat(h," = abs(depth - ").concat(h,"(depth1));\n      var dx2: ").concat(h," = abs(").concat(h,"(depth2) - depth);\n      var dy1: ").concat(h," = abs(height - ").concat(h,"(height1));\n      var dy2: ").concat(h," = abs(").concat(h,"(height2) - height);\n      var dz1: ").concat(h," = abs(width - ").concat(h,"(width1));\n      var dz2: ").concat(h," = abs(").concat(h,"(width2) - width);\n      if (depth1 == depth2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (height1 == height2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      if (width1 == width2) {\n        dz1 = 0.5;\n        dz2 = 0.5;\n      }\n      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +\n              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);\n    }");},Iw=function Iw(e,t,r,n,i,o){var a=e.dims,s=fw(o,t.axes,a.length),u=pw(a,n,i,t.axes),l=n.slice();0===n.length&&(l=a.map(function(e,t){return 0===e?1:u[t]/e;}),"stretch"!==t.keepAspectRatioPolicy&&(u=yw(a,l,t)));var h=Cf("output",e.dataType,u.length),c=Tf("input",e.dataType,a.length),d=cf.size(u),f=a.length===u.length&&a.every(function(e,t){return e===u[t];}),p="tf_crop_and_resize"===t.coordinateTransformMode,y=t.extrapolationValue,g=c.type.value;return{name:"Resize",shaderCache:{hint:"".concat(t.cacheKey,"|").concat(r,"|").concat(l.length>0?l:"","|").concat(i.length>0?i:"","|").concat(s.length>0?s:"","|").concat(f,"|").concat(a),inputDependencies:["rank"]},getShaderSource:function getShaderSource(e){return"\n      ".concat(f?"":"\n      ".concat(cw(t.coordinateTransformMode,g),";\n      ").concat(function(){switch(t.mode){case"nearest":return"\n              ".concat(ww(c,a),";\n              ").concat(dw(t.nearestMode,r,g),";\n              ").concat(mw(c,h,a,u,l.length,s.length,p),";\n              ");case"linear":return"\n              ".concat(gw(h,a,u,l.length,s.length),";\n              ").concat(function(){if(2===a.length||4===a.length)return"".concat(vw(c,h,a,p,y));if(3===a.length||5===a.length)return"".concat(_w(c,h,a,p,y));throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.");}(),";\n            ");case"cubic":return"\n            ".concat(function(){if(2===a.length||4===a.length)return"".concat(xw(c,h,a,u,l,s,t.cubicCoeffA,p,t.extrapolationValue,t.excludeOutside));throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.");}(),";\n            ");default:throw Error("Invalid resize mode");}}(),";\n      "),"\n      ").concat(e.registerUniform("output_size","u32").registerUniform("scales","f32",l.length).registerUniform("roi","f32",s.length).declareVariables(c,h),"\n      ").concat(e.mainStart(),"\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size"),"\n        ").concat(f?"output[global_idx] = input[global_idx];":"\n        let output_indices = ".concat(h.offsetToIndices("global_idx"),";\n        var input_indices: ").concat(c.type.indices,";\n        ").concat(function(){switch(t.mode){case"nearest":return"input_indices = calculateInputIndicesFromOutputIndices(output_indices);\n                if (checkInputIndices(input_indices)) {\n                  output[global_idx] = ".concat(c.getByIndices("input_indices"),";\n                } else {\n                  output[global_idx] = ").concat(t.extrapolationValue,";\n                }");case"linear":return"output[global_idx] = ".concat(2===a.length||4===a.length?"bilinearInterpolation":"trilinearInterpolation","(output_indices);");case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error("Unsupported resize mode: ".concat(t.mode));}}(),";\n"),"\n      }");},getRunData:function getRunData(){return{outputs:[{dims:u,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:"uint32",data:d},{type:"float32",data:l},{type:"float32",data:s}].concat(_toConsumableArray(bf(a)),_toConsumableArray(bf(u)))};}};},Aw=function Aw(e){var t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0];},Sw=function Sw(e,t){var r=[],n=[],i=[],o=Aw(e);if(0!==t.antialias)throw Error("Only default value (0) for Antialias attribute is supported");hw(e.inputs,t,o,r,n,i),e.compute(Iw(e.inputs[0],t,o,r,n,i),{inputs:[0]});},Tw=function Tw(e){var t=e.antialias,r=e.axes,n=e.coordinateTransformMode,i=e.cubicCoeffA,o=0!==e.excludeOutside,a=e.extrapolationValue,s=e.keepAspectRatioPolicy,u=e.mode,l=""===e.nearestMode?"simple":e.nearestMode;return uf({antialias:t,axes:r,coordinateTransformMode:n,cubicCoeffA:i,excludeOutside:o,extrapolationValue:a,keepAspectRatioPolicy:s,mode:u,nearestMode:l});};}),av=Mc(function(){gb(),Ib(),_b(),Ab(),Cw=function Cw(e){if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");var t=e[0],r=e[1],n=e[2];if(t.dataType!==r.dataType||t.dataType!==n.dataType)throw new Error("All inputs must have the same data type");if(3!==t.dims.length&&2!==t.dims.length)throw new Error("Input must be 2D or 3D");if(3!==r.dims.length&&2!==r.dims.length)throw new Error("Skip must be 2D or 3D");var i=t.dims[t.dims.length-1],o=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==o)throw new Error("Skip must have the same sequence length as input");if(1!==n.dims.length)throw new Error("Gamma must be 1D");if(n.dims[n.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){var _t375=e[3];if(1!==_t375.dims.length)throw new Error("Beta must be 1D");if(_t375.dims[_t375.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input");}if(e.length>4){var _t376=e[4];if(1!==_t376.dims.length)throw new Error("Bias must be 1D");if(_t376.dims[_t376.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input");}},Ew=function Ew(e,t,r,n){var i=e[0].dims,o=i,a=cf.size(i),s=i.slice(-1)[0],u=n?i.slice(0,-1).concat(1):[],l=e.length>3,h=e.length>4,c=n&&r>1,d=n&&r>2,f=r>3,p=vf(s),y=[Tf("x",e[0].dataType,e[0].dims,p),Tf("skip",e[1].dataType,e[1].dims,p),Tf("gamma",e[2].dataType,e[2].dims,p)];l&&y.push(Tf("beta",e[3].dataType,e[3].dims,p)),h&&y.push(Tf("bias",e[4].dataType,e[4].dims,p)),y.push(Cf("output",e[0].dataType,o,p)),c&&y.push(Cf("meanOutput",1,u)),d&&y.push(Cf("invStdOutput",1,u)),f&&y.push(Cf("inputSkipBiasSum",e[0].dataType,o,p));var g=mf(e[0].dataType),m=[{dims:o,dataType:e[0].dataType}];return r>1&&m.push({dims:u,dataType:1}),r>2&&m.push({dims:u,dataType:1}),r>3&&m.push({dims:i,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:t.cacheKey},getShaderSource:function getShaderSource(e){return"\n      const hiddenSize: f32 = ".concat(s,";\n      const hiddenSizeVectorized: u32 = ").concat(s/p,";\n      const epsilon: f32 = ").concat(t.epsilon,";\n\n      ").concat(e.declareVariables.apply(e,y),"\n\n      ").concat(e.mainStart(),"\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(a/s),"\n        let offset = global_idx * hiddenSizeVectorized;\n        var sum = ").concat(xf("f32",p),";\n        var squareSum = ").concat(xf("f32",p),";\n        for (var i: u32 = 0; i < hiddenSizeVectorized; i++) {\n          let skipValue = skip[offset + i];\n          let biasValue = ").concat(h?"bias[i]":"0.0",";\n          let inputValue = x[offset + i];\n          let value = inputValue + skipValue + biasValue;\n          ").concat(f?"inputSkipBiasSum[offset + i] = value;":"","\n          output[offset + i] = value;\n          let f32Value = ").concat(_f(g,p,"value"),";\n          sum += f32Value;\n          squareSum += f32Value * f32Value;\n        }\n        let mean = ").concat(If("sum",p)," / hiddenSize;\n        let invStdDev = inverseSqrt(").concat(If("squareSum",p)," / hiddenSize - mean * mean + epsilon);\n        ").concat(c?"meanOutput[global_idx] = mean;":"","\n        ").concat(d?"invStdOutput[global_idx] = invStdDev;":"","\n        for (var i: u32 = 0; i < hiddenSizeVectorized; i++) {\n          output[offset + i] = (output[offset + i] - ").concat(g,"(mean)) * ").concat(g,"(invStdDev) * gamma[i]\n           + ").concat(l?"beta[i]":"0.0",";\n        }\n      }");},getRunData:function getRunData(){return{outputs:m,dispatchGroup:{x:Math.ceil(a/s/64)}};}};},Ow=function Ow(e,t){Cw(e.inputs);var r=[0];e.outputCount>1&&r.push(-3),e.outputCount>2&&r.push(-3),e.outputCount>3&&r.push(3),e.compute(Ew(e.inputs,t,e.outputCount,!1),{outputs:r});},kw=function kw(e){var t=e.epsilon;return uf({epsilon:t});};}),sv=Mc(function(){gb(),Ib(),_b(),Ab(),Pw=function Pw(e,t){if(!e||e.length<1)throw new Error("too few inputs");if(0!==t.axes.length){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length");}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach(function(t,r){if(6!==e[r+1].dataType&&7!==e[r+1].dataType)throw new Error("Input ".concat(r," must be an array of int32 or int64"));});},$w=function $w(e,t){var r=[];if(e.length>t)if(7===e[t].dataType)e[t].getBigInt64Array().forEach(function(e){return r.push(Number(e));});else{if(6!==e[t].dataType)throw new Error("Input ".concat(t," must be an array of int32 or int64"));e[t].getInt32Array().forEach(function(e){return r.push(Number(e));});}return r;},Rw=function Rw(e,t){if(e.length>1){var _t377=$w(e,1),_r348=$w(e,2),n=$w(e,3);return 0===n.length&&(n=_toConsumableArray(Array(e[0].dims.length).keys())),uf({starts:_t377,ends:_r348,axes:n});}return t;},Bw=function Bw(e,t,r,n,i){var o=e;return e<0&&(o+=r[n[t]]),i[t]<0?Math.max(0,Math.min(o,r[n[t]]-1)):Math.max(0,Math.min(o,r[n[t]]));},Dw=function Dw(e,t,r){return"fn calculateInputIndices(output_indices: ".concat(t.type.indices,") -> ").concat(e.type.indices," {\n          var input_indices: ").concat(e.type.indices,";\n          var carry = 0u;\n          for (var i = ").concat(r.length,"; i >= 0; i--) {\n            let input_shape_i = ").concat(Af("uniforms.input_shape","i",r.length),";\n            let steps_i = ").concat(Af("uniforms.steps","i",r.length),";\n            let signs_i = ").concat(Af("uniforms.signs","i",r.length),";\n            let starts_i = ").concat(Af("uniforms.starts","i",r.length),";\n            var output_index = ").concat(t.indicesGet("output_indices","i"),";\n            var input_index = output_index * steps_i + starts_i + carry;\n            carry = input_index / input_shape_i;\n            input_index = input_index % input_shape_i;\n            if (signs_i < 0) {\n              input_index = input_shape_i - input_index - 1u + starts_i;\n            }\n            ").concat(e.indicesSet("input_indices","i","input_index"),";\n          }\n          return input_indices;\n      }");},Mw=function Mw(e,t){var r=e[0].dims,n=cf.size(r),i=t.axes.length>0?cf.normalizeAxes(t.axes,r.length):_toConsumableArray(Array(r.length).keys()),o=$w(e,4);o.forEach(function(e){return 0!==e||function(){throw new Error("step cannot be 0");};}),0===o.length&&(o=Array(i.length).fill(1));var a=t.starts.map(function(e,t){return Bw(e,t,r,i,o);}),s=t.ends.map(function(e,t){return Bw(e,t,r,i,o);});if(i.length!==a.length||i.length!==s.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(var _e906=0;_e906<r.length;++_e906)i.includes(_e906)||(a.splice(_e906,0,0),s.splice(_e906,0,r[_e906]),o.splice(_e906,0,1));var u=o.map(function(e){return Math.sign(e);});o.forEach(function(e,t,r){if(e<0){var _n172=(s[t]-a[t])/e,_i135=a[t],_u43=_i135+_n172*o[t];a[t]=_u43,s[t]=_i135,r[t]=-e;}});var l=r.slice(0);i.forEach(function(e,t){l[e]=Math.ceil((s[e]-a[e])/o[e]);});var h={dims:l,dataType:e[0].dataType},c=Cf("output",e[0].dataType,l.length),d=Tf("input",e[0].dataType,e[0].dims.length),f=cf.size(l),p=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:u.length},{name:"steps",type:"u32",length:o.length}],y=[{type:"uint32",data:f},{type:"uint32",data:a},{type:"int32",data:u},{type:"uint32",data:o}].concat(_toConsumableArray(bf(e[0].dims)),_toConsumableArray(bf(l)));return{name:"Slice",shaderCache:{hint:"".concat(u.length,"_").concat(a.length,"_").concat(o.length),inputDependencies:["rank"]},getShaderSource:function getShaderSource(e){return"\n      ".concat(e.registerUniforms(p).declareVariables(d,c),"\n        ").concat(Dw(d,c,r),"\n        ").concat(e.mainStart(),"\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize"),"\n          let output_indices = ").concat(c.offsetToIndices("global_idx"),";\n          let input_indices = calculateInputIndices(output_indices);\n          ").concat(c.setByOffset("global_idx",d.getByIndices("input_indices")),"\n      }");},getRunData:function getRunData(){return{outputs:[h],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:y};}};},Lw=function Lw(e,t){Pw(e.inputs,t);var r=Rw(e.inputs,t);e.compute(Mw(e.inputs,r),{inputs:[0]});},Fw=function Fw(e){var t=e.starts,r=e.ends,n=e.axes;return uf({starts:t,ends:r,axes:n});};}),uv=Mc(function(){Ib(),_b(),Ab(),Nw=function Nw(e){if(!e||1!==e.length)throw new Error("Softmax op requires 1 input.");},Uw=function Uw(e,t){var r=e.dims,n=cf.size(r),i=t.axis;if(i<0&&(i=r.length+i),i<r.length-1)throw new Error("softmax only supports last axis for now.");var o=r[i],a=n/o,s=vf(o),u=o/s,l=Tf("x",e.dataType,e.dims,s),h=Cf("result",e.dataType,e.dims,s),c=l.type.value,d="f32"===mf(e.dataType)?"var threadMax = ".concat(c,"(-3.402823e+38f);"):"var threadMax = ".concat(c,"(-65504.0h);");return{name:"Softmax",shaderCache:{hint:"".concat(s),inputDependencies:["type"]},getRunData:function getRunData(){return{outputs:[{dims:r,dataType:e.dataType}],dispatchGroup:{x:a},programUniforms:[{type:"uint32",data:u}]};},getShaderSource:function getShaderSource(e){return"\n      var<workgroup> rowMaxShared : ".concat(c,";\n      var<workgroup> rowSumShared : ").concat(c,";\n      var<workgroup> threadShared : array<").concat(c,", 64>;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ").concat(c," {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ").concat(c,") {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n      ").concat(e.registerUniform("packedCols","i32").declareVariables(l,h),"\n      ").concat(e.mainStart(),"\n        let gindex = i32(global_idx);\n        let lindex = i32(local_idx);\n        const wg = 64;\n        let row = gindex / wg;\n        let cols = uniforms.packedCols;\n        let row_stride : i32 = uniforms.packedCols;\n\n        // find the rows max\n        ").concat(d,"\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = ").concat(c,"(").concat(function(e,t){return 4===t?"max(max(".concat(e,".x, ").concat(e,".y), max(").concat(e,".z, ").concat(e,".w))"):2===t?"max(".concat(e,".x, ").concat(e,".y)"):3===t?"max(max(".concat(e,".x, ").concat(e,".y), ").concat(e,".z)"):e;}("threadShared[0]",s),");\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum = ").concat(c,"(0.0);\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = ").concat(c,"(").concat(If("threadShared[0]",s),");\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }");}};},jw=function jw(e,t){Nw(e.inputs),e.compute(Uw(e.inputs[0],t));},Gw=function Gw(e){return uf({axis:e.axis});};}),lv=Mc(function(){Ib(),_b(),Ab(),zw=function zw(e){if(!e||e.length<1)throw new Error("too few inputs");},Vw=function Vw(e,t){var r=[],n=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(function(e){return r.push(Number(e));}),n=r.length),uf({numOutputs:n,axis:t.axis,splitSizes:r});},Hw=function Hw(e){return"\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ".concat(e,"u; i += 1u ) {\n    if (index < ").concat(Af("uniforms.size_in_split_axis","i",e),") {\n        return i;\n    }\n    }\n    return ").concat(e,"u;\n}");},Ww=function Ww(e){var t=e.length,r=[];for(var n=0;n<t;++n){var i=e[n].setByIndices("indices","input[global_idx]");1===t?r.push(i):0===n?r.push("if (output_number == ".concat(n,"u) { ").concat(i," }")):n===t-1?r.push("else { ".concat(i," }")):r.push("else if (output_number == ".concat(n,") { ").concat(i," }"));}return"\n      fn writeBufferData(output_number: u32, indices: ".concat(e[0].type.indices,", global_idx: u32) {\n        ").concat(r.join("\n"),"\n      }");},Yw=function Yw(e,t){var r=e[0].dims,n=cf.size(r),i=e[0].dataType,o=cf.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),s=Tf("input",i,r),u=new Array(t.numOutputs),l=[],h=[],c=0,d=[{type:"uint32",data:n}];for(var _n173=0;_n173<t.numOutputs;_n173++){c+=t.splitSizes[_n173],u[_n173]=c;var _o102=r.slice();_o102[t.axis]=t.splitSizes[_n173],h.push(_o102),a[_n173]=Cf("output".concat(_n173),i,_o102),l.push({dims:h[_n173],dataType:e[0].dataType});}d.push({type:"uint32",data:u}),d.push.apply(d,_toConsumableArray(bf(r))),h.forEach(function(e){return d.push.apply(d,_toConsumableArray(bf(e)));});return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:function getShaderSource(e){var _e$registerUniform$re3;return"\n  ".concat((_e$registerUniform$re3=e.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",u.length)).declareVariables.apply(_e$registerUniform$re3,[s].concat(a)),"\n  ").concat(Hw(u.length),"\n  ").concat(Ww(a),"\n\n  ").concat(e.mainStart(),"\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size"),"\n\n    var indices = ").concat(s.offsetToIndices("global_idx"),";\n    var index = ").concat(s.indicesGet("indices",o),";\n    let output_number = calculateOutputIndex(index);\n    if (output_number != 0) {\n      index -= ").concat(Af("uniforms.size_in_split_axis","output_number - 1u",u.length),";\n      ").concat(s.indicesSet("indices",o,"index"),";\n    }\n    writeBufferData(output_number, indices, global_idx);\n  }");},getRunData:function getRunData(){return{outputs:l,dispatchGroup:{x:Math.ceil(n/64)},programUniforms:d};}};},Kw=function Kw(e,t){zw(e.inputs);var r=1===e.inputs.length?t:Vw(e.inputs,t);e.compute(Yw(e.inputs,r),{inputs:[0]});},Xw=function Xw(e){var t=e.axis,r=e.splitSizes,n=e.numOutputs<0?r.length:e.numOutputs;if(n!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return uf({axis:t,numOutputs:n,splitSizes:r});};}),hv=Mc(function(){gb(),Ib(),Ab(),Zw=function Zw(e){return Array.from(e.getBigInt64Array(),Number);},qw=function qw(e){if(!e||2!==e.length)throw new Error("Tile requires 2 inputs.");if(1!==e[0].dataType&&6!==e[0].dataType&&12!==e[0].dataType)throw new Error("Tile only support float, int32, and uint32 data types");if(7!==e[1].dataType)throw new Error("Tile `repeats` input should be of int64 data type");if(1!==e[1].dims.length)throw new Error("Tile `repeats` input should be 1-D");if(Zw(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor");},Jw=function Jw(e,t){var r=[];for(var n=0;n<e.length;++n)r.push(e[n]*t[n]);return r;},Qw=function Qw(e){var t=e[0].dims,r=Zw(e[1]),n=Jw(t,r),i=cf.size(n),o=e[0].dataType,a=Tf("input",o,t.length),s=Cf("output",o,n.length);return{name:"Tile",shaderCache:{hint:"".concat(r),inputDependencies:["rank"]},getRunData:function getRunData(){return{outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:"uint32",data:i}].concat(_toConsumableArray(bf(e[0].dims)),_toConsumableArray(bf(n)))};},getShaderSource:function getShaderSource(e){return"\n      const inputShape = ".concat(a.indices.apply(a,_toConsumableArray(t)),";\n      ").concat(e.registerUniform("output_size","u32").declareVariables(a,s),"\n      ").concat(e.mainStart(),"\n      ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size"),"\n      let output_indices = ").concat(s.offsetToIndices("global_idx"),";\n      var input_indices: ").concat(a.type.indices,";\n      for (var i = 0; i < ").concat(t.length,"; i++) {\n        let input_dim_i = ").concat(a.indicesGet("uniforms.input_shape","i"),";\n        let input_dim_value = ").concat(s.indicesGet("output_indices","i"),"  % input_dim_i;\n\n        ").concat(a.indicesSet("input_indices","i","input_dim_value"),"\n      }\n      ").concat(s.setByOffset("global_idx",a.getByIndices("input_indices")),"\n    }");}};},eb=function eb(e){qw(e.inputs),e.compute(Qw(e.inputs),{inputs:[0]});};}),cv=Mc(function(){gb(),Ib(),Ab(),tb=function tb(e,t,r,n,i){var o,a=Cf("output_data",i,r.length,4),s=Tf("a_data",t[1].dataType,t[1].dims.length,4),u=Tf("b_data",t[2].dataType,t[2].dims.length,4),l=Tf("c_data",t[0].dataType,t[0].dims.length,4),h=function h(e,t,r){return"select(".concat(t,", ").concat(e,", ").concat(r,")");};if(n){var _e907=function _e907(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var n="a_data[index_a".concat(t,"][component_a").concat(t,"]"),i="b_data[index_b".concat(t,"][component_b").concat(t,"]"),o="bool(c_data[index_c".concat(t,"] & ").concat(4278190080>>>8*(3-t),"u)");return"\n            let output_indices".concat(t," = ").concat(a.offsetToIndices("global_idx * 4u + ".concat(t,"u")),";\n            let offset_a").concat(t," = ").concat(s.broadcastedIndicesToOffset("output_indices".concat(t),a),";\n            let offset_b").concat(t," = ").concat(u.broadcastedIndicesToOffset("output_indices".concat(t),a),";\n            let offset_c").concat(t," = ").concat(l.broadcastedIndicesToOffset("output_indices".concat(t),a),";\n            let index_a").concat(t," = offset_a").concat(t," / 4u;\n            let index_b").concat(t," = offset_b").concat(t," / 4u;\n            let index_c").concat(t," = offset_c").concat(t," / 4u;\n            let component_a").concat(t," = offset_a").concat(t," % 4u;\n            let component_b").concat(t," = offset_b").concat(t," % 4u;\n            ").concat(e,"[").concat(t,"] = ").concat(r,"(").concat(h(n,i,o),");\n          ");};o=9===i?"\n            var data = vec4<u32>(0);\n            ".concat(_e907("data",0,"u32"),"\n            ").concat(_e907("data",1,"u32"),"\n            ").concat(_e907("data",2,"u32"),"\n            ").concat(_e907("data",3,"u32"),"\n            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));"):"\n            ".concat(_e907("output_data[global_idx]",0),"\n            ").concat(_e907("output_data[global_idx]",1),"\n            ").concat(_e907("output_data[global_idx]",2),"\n            ").concat(_e907("output_data[global_idx]",3),"\n          ");}else o=a.setByOffset("global_idx",h(s.getByOffset("global_idx"),u.getByOffset("global_idx"),l.getByOffset("global_idx")));return"\n        ".concat(e.registerUniform("vec_size","u32").declareVariables(l,s,u,a),"\n        ").concat(e.mainStart(),"\n        ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size"),"\n        ").concat(o,"\n      }");},rb=function rb(e){var t=e[1].dims,r=e[2].dims,n=e[0].dims,i=e[1].dataType,o=!(cf.areEqual(t,r)&&cf.areEqual(r,n)),a=t,s=cf.size(t);if(o){var _e908=hf.calcShape(hf.calcShape(t,r,!1),n,!1);if(!_e908)throw new Error("Can't perform where op on the given tensors");a=_e908,s=cf.size(a);}var u=Math.ceil(s/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:function getShaderSource(t){return tb(t,e,a,o,i);},getRunData:function getRunData(){return{outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(s/64/4)},programUniforms:[{type:"uint32",data:u}].concat(_toConsumableArray(bf(n)),_toConsumableArray(bf(t)),_toConsumableArray(bf(r)),_toConsumableArray(bf(a)))};}};},nb=function nb(e){e.compute(rb(e.inputs));};}),dv=Mc(function(){Eb(),Ob(),kb(),Pb(),Rb(),Bb(),Db(),zb(),Wb(),Yb(),Kb(),Xb(),Zb(),qb(),Jb(),Qb(),ev(),Gb(),tv(),rv(),nv(),iv(),Cb(),ov(),av(),sv(),uv(),lv(),hv(),Sb(),$b(),cv(),ib=new Map([["Abs",[Qp]],["Acos",[ey]],["Acosh",[ty]],["Add",[Ny]],["ArgMax",[Dp,Mp]],["ArgMin",[Bp,Mp]],["Asin",[ry]],["Asinh",[ny]],["Atan",[iy]],["Atanh",[oy]],["Attention",[zp]],["AveragePool",[Zm,Xm]],["BatchNormalization",[Yp]],["BiasAdd",[Zp]],["BiasSplitGelu",[Dy]],["Cast",[sy,ay]],["Ceil",[hy]],["Clip",[ly]],["Concat",[Qy,eg]],["Conv",[Cg,Ag]],["ConvTranspose",[jg,Mg]],["Cos",[cy]],["Cosh",[dy]],["CumSum",[zg,Vg]],["Div",[Uy]],["Einsum",[Qg,em]],["Elu",[py,fy]],["Equal",[jy]],["Erf",[gy]],["Exp",[my]],["Expand",[om]],["Floor",[wy]],["FusedConv",[Cg,Ag]],["Gather",[lm,um]],["GatherElements",[fm,dm]],["Gelu",[by]],["Gemm",[mm,gm]],["GlobalAveragePool",[Qm,Jm]],["GlobalMaxPool",[iw,nw]],["Greater",[Hy]],["GreaterOrEqual",[Yy]],["InstanceNormalization",[xm]],["LayerNormalization",[Am]],["LeakyRelu",[vy,fy]],["Less",[Wy]],["LessOrEqual",[Ky]],["Log",[$y]],["MatMul",[bg]],["MaxPool",[tw,rw]],["Mul",[Gy]],["MultiHeadAttention",[km,Tm]],["Neg",[_y]],["Not",[xy]],["Pad",[Nm]],["Pow",[zy]],["Range",[sw]],["Reciprocal",[Iy]],["ReduceMin",[Ep]],["ReduceMean",[Ip]],["ReduceMax",[Cp]],["ReduceSum",[kp]],["ReduceProd",[Op]],["ReduceL1",[Ap]],["ReduceL2",[Sp]],["ReduceLogSum",[$p]],["ReduceLogSumExp",[Tp]],["ReduceSumSquare",[Pp]],["Relu",[Ay]],["Resize",[Sw,Tw]],["Sigmoid",[Sy]],["Sin",[Ty]],["Sinh",[Cy]],["Slice",[Lw,Fw]],["SkipLayerNormalization",[Ow,kw]],["Split",[Kw,Xw]],["Sqrt",[Ey]],["Softmax",[jw,Gw]],["Sub",[Vy]],["Tan",[Oy]],["Tanh",[ky]],["ThresholdedRelu",[Py,fy]],["Tile",[eb]],["Transpose",[Ff,Nf]],["Where",[nb]]]);}),fv=Mc(function(){id(),wb(),Ab(),ob=/*#__PURE__*/function(){function ob(e){_classCallCheck(this,ob);this.backend=e,this.repo=new Map(),this.attributesBound=!1;}_createClass(ob,[{key:"getArtifact",value:function getArtifact(e){return this.repo.get(e);}},{key:"setArtifact",value:function setArtifact(e,t){this.repo.set(e,t);}},{key:"run",value:function run(e,t,r,n,i){vc(e.programInfo.name);var o=this.backend.device,a=this.backend.getComputePassEncoder();this.backend.writeTimestamp(2*this.backend.pendingDispatchNumber),a.setPipeline(e.computePipeline);var s=[];var _iterator70=_createForOfIteratorHelper(t),_step70;try{for(_iterator70.s();!(_step70=_iterator70.n()).done;){var _e909=_step70.value;s.push({binding:s.length,resource:{buffer:_e909.buffer}});}}catch(err){_iterator70.e(err);}finally{_iterator70.f();}var _iterator71=_createForOfIteratorHelper(r),_step71;try{for(_iterator71.s();!(_step71=_iterator71.n()).done;){var _e910=_step71.value;s.push({binding:s.length,resource:{buffer:_e910.buffer}});}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}i&&s.push({binding:s.length,resource:i});var u=o.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:s,label:e.programInfo.name});a.setBindGroup(0,u),a.dispatchWorkgroups.apply(a,_toConsumableArray(n)),this.backend.writeTimestamp(2*this.backend.pendingDispatchNumber+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||"at-passes"===this.backend.queryType)&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),xc(e.programInfo.name);}},{key:"dispose",value:function dispose(){}},{key:"build",value:function build(e,t){vc(e.name);var r=this.backend.device,n=[];r.features.has("shader-f16")&&n.push("enable f16;");var i=kf(t),o=e.getShaderSource(i),a="".concat(n.join("\n"),"\n").concat(i.additionalImplementations,"\n").concat(o),s=r.createShaderModule({code:a,label:e.name});Jd("verbose",function(){return"[WebGPU] ".concat(e.name," shader code: ").concat(a);});var u=r.createComputePipeline({compute:{module:s,entryPoint:"main"},layout:"auto",label:e.name});return xc(e.name),{programInfo:e,computePipeline:u};}},{key:"normalizeDispatchGroupSize",value:function normalizeDispatchGroupSize(e){var t="number"==typeof e?e:e.x,r="number"==typeof e?1:e.y||1,n="number"==typeof e?1:e.z||1,i=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=i&&r<=i&&n<=i)return[t,r,n];var o=t*r*n,a=Math.ceil(Math.sqrt(o));if(a>i){if(a=Math.ceil(Math.cbrt(o)),a>i)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[a,a,a];}return[a,a,1];}}]);return ob;}();}),pv=Mc(function(){id(),gb(),wb(),bb(),xb(),dv(),fv(),ab=function ab(e,t){if(t.length!==e.length)throw new Error("inputDependencies length ".concat(t.length," is not equal to inputTensors length ").concat(e.length,"."));var r=[];for(var n=0;n<e.length;++n){var i=e[n].dataType;switch(t[n]){case"none":r.push("");break;case"type":r.push("".concat(i));break;case"rank":{var _t378=e[n].dims.length;r.push("".concat(i,";").concat(_t378));break;}case"dims":{var _t379=e[n].dims.join(",");r.push("".concat(i,";").concat(_t379));break;}default:throw new Error("unsupported input dependency: ".concat(t[n]));}}return r.join("|");},sb=function sb(e,t,r){var _e$shaderCache,_e$shaderCache$inputD,_e$shaderCache2;var n=e.name;return(_e$shaderCache=e.shaderCache)!==null&&_e$shaderCache!==void 0&&_e$shaderCache.hint&&(n+="["+e.shaderCache.hint+"]"),n+=":"+r+":".concat(ab(t,(_e$shaderCache$inputD=(_e$shaderCache2=e.shaderCache)===null||_e$shaderCache2===void 0?void 0:_e$shaderCache2.inputDependencies)!==null&&_e$shaderCache$inputD!==void 0?_e$shaderCache$inputD:new Array(t.length).fill("dims"))),n;},ub=/*#__PURE__*/function(){function ub(){_classCallCheck(this,ub);this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map(),this.sessionExternalDataMapping=new Map();}_createClass(ub,[{key:"currentKernelCustomData",get:function get(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e;}},{key:"initialize",value:function(){var _initialize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee159(e,t){var r,n;return _regeneratorRuntime().wrap(function _callee159$(_context162){while(1)switch(_context162.prev=_context162.next){case 0:this.env=e;r=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:r};t.features.has("chromium-experimental-timestamp-query-inside-passes")?r.push("chromium-experimental-timestamp-query-inside-passes"):t.features.has("timestamp-query")&&r.push("timestamp-query");t.features.has("shader-f16")&&r.push("shader-f16");_context162.next=6;return t.requestDevice(n);case 6:this.device=_context162.sent;this.gpuDataManager=af(this);this.programManager=new ob(this);this.kernels=new Map();this.kernelPersistentData=new Map();this.kernelCustomData=new Map();Zd(e.logLevel,!!e.debug);this.device.onuncapturederror=function(e){e.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(e.error.message));};Object.defineProperty(this.env.webgpu,"device",{value:this.device});this.setQueryType();case 16:case"end":return _context162.stop();}},_callee159,this);}));function initialize(_x187,_x188){return _initialize.apply(this,arguments);}return initialize;}()},{key:"dispose",value:function dispose(){_typeof(this.querySet)<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose();}},{key:"getCommandEncoder",value:function getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder(),this.setQueryType(),"none"!==this.queryType&&_typeof(this.querySet)>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:2*this.maxDispatchNumber}),this.queryResolveBuffer=this.device.createBuffer({size:2*this.maxDispatchNumber*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE}))),this.commandEncoder;}},{key:"getComputePassEncoder",value:function getComputePassEncoder(){if(!this.computePassEncoder){var _e911={};"at-passes"===this.queryType&&(_e911.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:2*this.pendingDispatchNumber,endOfPassWriteIndex:2*this.pendingDispatchNumber+1}),this.computePassEncoder=this.getCommandEncoder().beginComputePass(_e911);}return this.computePassEncoder;}},{key:"endComputePass",value:function endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null);}},{key:"flush",value:function flush(){var _this155=this;if(!this.commandEncoder)return;var e;vc(),this.endComputePass(),"none"!==this.queryType&&(this.commandEncoder.resolveQuerySet(this.querySet,0,2*this.pendingDispatchNumber,this.queryResolveBuffer,0),e=this.device.createBuffer({size:2*this.pendingDispatchNumber*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,2*this.pendingDispatchNumber*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,"none"!==this.queryType&&e.mapAsync(GPUMapMode.READ).then(function(){var t=new BigUint64Array(e.getMappedRange()),r=_this155.pendingQueries.get(e);var _loop15=function _loop15(){var _this155$env$webgpu$p;var n=r[_e912],i=n.kernelId,o=_this155.kernels.get(i),a=o.kernelType,s=o.kernelName,u=n.programName,l=n.inputTensorViews,h=n.outputTensorViews,c=t[2*_e912],d=t[2*_e912+1];_typeof(_this155.queryTimeBase)>"u"&&(_this155.queryTimeBase=c);var f=Number(c-_this155.queryTimeBase),p=Number(d-_this155.queryTimeBase);if(!Number.isSafeInteger(f)||!Number.isSafeInteger(p))throw new RangeError("incorrect timestamp range");if((_this155$env$webgpu$p=_this155.env.webgpu.profiling)!==null&&_this155$env$webgpu$p!==void 0&&_this155$env$webgpu$p.ondata)_this155.env.webgpu.profiling.ondata({version:1,inputsMetadata:l.map(function(e){return{dims:e.dims,dataType:Nd(e.dataType)};}),outputsMetadata:h.map(function(e){return{dims:e.dims,dataType:Nd(e.dataType)};}),kernelId:i,kernelType:a,kernelName:s,programName:u,startTime:f,endTime:p});else{var _e913="";l.forEach(function(t,r){_e913+="input[".concat(r,"]: [").concat(t.dims,"] | ").concat(Nd(t.dataType),", ");});var _t380="";h.forEach(function(e,r){_t380+="output[".concat(r,"]: [").concat(e.dims,"] | ").concat(Nd(e.dataType),", ");}),console.log("[profiling] kernel \"".concat(i,"|").concat(a,"|").concat(s,"|").concat(u,"\" ").concat(_e913).concat(_t380,"execution time: ").concat(p-f," ns"));}wc("GPU","".concat(u,"::").concat(c,"::").concat(d));};for(var _e912=0;_e912<t.length/2;_e912++){_loop15();}e.unmap(),_this155.pendingQueries["delete"](e);}),xc();}},{key:"run",value:function run(e,t,r,n,i){vc(e.name);var o=[];for(var _e914=0;_e914<t.length;++_e914){var _r349=this.gpuDataManager.get(t[_e914].data);if(!_r349)throw new Error("no GPU data for input: ".concat(t[_e914].data));o[_e914]=_r349;}var _e$getRunData=e.getRunData(t),a=_e$getRunData.outputs,s=_e$getRunData.dispatchGroup,u=_e$getRunData.programUniforms,l=0===r.length?a.map(function(e,t){return t;}):r;if(l.length!==a.length)throw new Error("Output size ".concat(l.length," must be equal to ").concat(a.length,"."));var h,c=[],d=[];for(var _e915=0;_e915<a.length;++_e915){if(!Number.isInteger(l[_e915])||l[_e915]<-3||l[_e915]>=a.length)throw new Error("Invalid output index: ".concat(l[_e915]));if(-3===l[_e915])continue;var _t381=-1===l[_e915],_r350=-2===l[_e915],_o103=_t381||_r350?i(a[_e915].dataType,a[_e915].dims):n(l[_e915],a[_e915].dataType,a[_e915].dims),_s58=this.gpuDataManager.get(_o103.data);if(!_s58)throw new Error("no GPU data for output: ".concat(_o103.data));if(_t381&&this.temporaryData.push(_s58),_r350){var _e916=this.kernelPersistentData.get(this.currentKernelId);_e916||(_e916=[],this.kernelPersistentData.set(this.currentKernelId,_e916)),_e916.push(_s58);}c.push(_o103),d.push(_s58);}if(u){var _e917=0,_t382=[];u.forEach(function(r){var n="number"==typeof r.data?[r.data]:r.data;if(0===n.length)return;var i=n.length<=2?4*n.length:16;_e917=Math.ceil(_e917/i)*i,_t382.push(_e917),_e917+=n.length>4?16*Math.ceil(n.length/4):4*n.length;});var _r351=16;_e917=Math.ceil(_e917/_r351)*_r351;var _n174=new ArrayBuffer(_e917);u.forEach(function(e,r){var i=_t382[r],o="number"==typeof e.data?[e.data]:e.data;"int32"===e.type?new Int32Array(_n174,i,o.length).set(o):"uint32"===e.type?new Uint32Array(_n174,i,o.length).set(o):new Float32Array(_n174,i,o.length).set(o);});var _i136=this.gpuDataManager.create(_e917,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(_i136.buffer,0,_n174,0,_e917),this.gpuDataManager.release(_i136.id),h={offset:0,size:_e917,buffer:_i136.buffer};}var f=this.programManager.normalizeDispatchGroupSize(s),p=1===f[1]&&1===f[2],y=sb(e,t,p),g=this.programManager.getArtifact(y);if(g||(g=this.programManager.build(e,f),this.programManager.setArtifact(y,g),Jd("info",function(){return"[artifact] key: ".concat(y,", programName: ").concat(e.name);})),Jd("info",function(){return"[ProgramManager] run \"".concat(e.name,"\" (key=").concat(y,") with ").concat(f[0],"x").concat(f[1],"x").concat(f[2]);}),"none"!==this.queryType){var _e918={kernelId:this.currentKernelId,programName:g.programInfo.name,inputTensorViews:t,outputTensorViews:c};this.pendingKernels.push(_e918);}return this.programManager.run(g,o,d,f,h),xc(e.name),c;}},{key:"upload",value:function upload(e,t){this.gpuDataManager.upload(e,t);}},{key:"memcpy",value:function memcpy(e,t){this.gpuDataManager.memcpy(e,t);}},{key:"download",value:function(){var _download2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee160(e,t){return _regeneratorRuntime().wrap(function _callee160$(_context163){while(1)switch(_context163.prev=_context163.next){case 0:_context163.next=2;return this.gpuDataManager.download(e,t);case 2:case"end":return _context163.stop();}},_callee160,this);}));function download(_x189,_x190){return _download2.apply(this,arguments);}return download;}()},{key:"alloc",value:function alloc(e){return this.gpuDataManager.create(e).id;}},{key:"free",value:function free(e){return this.gpuDataManager.release(e);}},{key:"createKernel",value:function createKernel(e,t,r,n){var i=ib.get(e);if(!i)throw new Error("kernel not implemented: ".concat(e));var o={kernelType:e,kernelName:n,kernelEntry:i[0],attributes:[i[1],r]};this.kernels.set(t,o);}},{key:"releaseKernel",value:function releaseKernel(e){var t=this.kernelPersistentData.get(e);if(t){var _iterator72=_createForOfIteratorHelper(t),_step72;try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var _e919=_step72.value;this.gpuDataManager.release(_e919.id);}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}this.kernelPersistentData["delete"](e);}this.kernelCustomData["delete"](e),this.kernels["delete"](e);}},{key:"computeKernel",value:function computeKernel(e,t,r){var n=this.kernels.get(e);if(!n)throw new Error("kernel not created: ".concat(e));var i=n.kernelType,o=n.kernelName,a=n.kernelEntry,s=n.attributes;if(null!==this.currentKernelId)throw new Error("kernel \"[".concat(i,"] ").concat(o,"\" is not allowed to be called recursively"));this.currentKernelId=e,s[0]&&(s[1]=s[0](s[1]),s[0]=void 0),Jd("info",function(){return"[WebGPU] Start to run kernel \"[".concat(i,"] ").concat(o,"\"...");});var u=this.env.debug;this.temporaryData=[];try{return u&&this.device.pushErrorScope("validation"),a(t,s[1]),0;}catch(e){return r.push(Promise.resolve("[WebGPU] Kernel \"[".concat(i,"] ").concat(o,"\" failed. ").concat(e))),1;}finally{u&&r.push(this.device.popErrorScope().then(function(e){return e?"GPU validation error for kernel \"[".concat(i,"] ").concat(o,"\": ").concat(e.message):null;}));var _iterator73=_createForOfIteratorHelper(this.temporaryData),_step73;try{for(_iterator73.s();!(_step73=_iterator73.n()).done;){var _e920=_step73.value;this.gpuDataManager.release(_e920.id);}}catch(err){_iterator73.e(err);}finally{_iterator73.f();}this.temporaryData=[],this.currentKernelId=null;}}},{key:"registerBuffer",value:function registerBuffer(e,t,r,n){var i=this.sessionExternalDataMapping.get(e);i||(i=new Map(),this.sessionExternalDataMapping.set(e,i));var o=i.get(t),a=this.gpuDataManager.registerExternalBuffer(r,n,o===null||o===void 0?void 0:o[1]);return i.set(t,[a,r]),a;}},{key:"unregisterBuffers",value:function unregisterBuffers(e){var _this156=this;var t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(function(e){return _this156.gpuDataManager.unregisterExternalBuffer(e[1]);}),this.sessionExternalDataMapping["delete"](e));}},{key:"getBuffer",value:function getBuffer(e){var t=this.gpuDataManager.get(e);if(!t)throw new Error("no GPU data for buffer: ".concat(e));return t.buffer;}},{key:"createDownloader",value:function createDownloader(e,t,r){var _this157=this;return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee161(){var n;return _regeneratorRuntime().wrap(function _callee161$(_context164){while(1)switch(_context164.prev=_context164.next){case 0:_context164.next=2;return nf(_this157,e,t);case 2:n=_context164.sent;return _context164.abrupt("return",Qd(n.buffer,r));case 4:case"end":return _context164.stop();}},_callee161);}));}},{key:"writeTimestamp",value:function writeTimestamp(e){"inside-passes"===this.queryType&&this.computePassEncoder.writeTimestamp(this.querySet,e);}},{key:"setQueryType",value:function setQueryType(){var _this$env$webgpu$prof;this.queryType="none",("default"===((_this$env$webgpu$prof=this.env.webgpu.profiling)===null||_this$env$webgpu$prof===void 0?void 0:_this$env$webgpu$prof.mode)||this.env.wasm.trace)&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"));}}]);return ub;}();}),yv={};Fc(yv,{init:function init(){return wv;}});var gv,mv,wv,bv,vv,xv,_v,Iv,Av,Sv,Tv,Cv,Ev,Ov,kv,Pv,$v,Rv,Bv,Dv,Mv,Lv,Fv,Nv,Uv,jv,Gv,zv,Vv,Hv,Wv,Yv,Kv,Xv,Zv,qv,Jv,Qv,ex,tx,rx,nx,ix=Mc(function(){gb(),pv(),wb(),Ib(),gv=/*#__PURE__*/function(){function e(_e921,t,r,n){_classCallCheck(this,e);this.module=_e921,this.dataType=t,this.data=r,this.dims=n;}_createClass(e,[{key:"getFloat32Array",value:function getFloat32Array(){if(1!==this.dataType)throw new Error("Invalid data type");var _e922=cf.size(this.dims);return 0===_e922?new Float32Array():new Float32Array(this.module.HEAP8.buffer,this.data,_e922);}},{key:"getBigInt64Array",value:function getBigInt64Array(){if(7!==this.dataType)throw new Error("Invalid data type");var _e923=cf.size(this.dims);return 0===_e923?new BigInt64Array():new BigInt64Array(this.module.HEAP8.buffer,this.data,_e923);}},{key:"getInt32Array",value:function getInt32Array(){if(6!==this.dataType)throw new Error("Invalid data type");var _e924=cf.size(this.dims);return 0===_e924?new Int32Array():new Int32Array(this.module.HEAP8.buffer,this.data,_e924);}},{key:"reshape",value:function reshape(t){if(cf.size(t)!==cf.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t);}}]);return e;}(),mv=/*#__PURE__*/function(){function mv(e,t,r){_classCallCheck(this,mv);this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0;var n=e.HEAPU32,i=r>>>2;this.opKernelContext=n[i++];var o=n[i++];this.outputCount=n[i++],this.customDataOffset=n[i++],this.customDataSize=n[i++];var a=[];for(var _t383=0;_t383<o;_t383++){var _t384=n[i++],_r352=n[i++],_o104=n[i++],_s59=[];for(var _e925=0;_e925<_o104;_e925++)_s59.push(n[i++]);a.push(new gv(e,_t384,_r352,_s59));}this.inputs=a;}_createClass(mv,[{key:"kernelCustomData",get:function get(){return this.backend.currentKernelCustomData;}},{key:"customDataBuffer",get:function get(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize);}},{key:"compute",value:function compute(e,t){var _t$inputs$map,_t$inputs,_this158=this,_t$outputs;var r=(_t$inputs$map=t===null||t===void 0||(_t$inputs=t.inputs)===null||_t$inputs===void 0?void 0:_t$inputs.map(function(e){return"number"==typeof e?_this158.inputs[e]:e;}))!==null&&_t$inputs$map!==void 0?_t$inputs$map:this.inputs,n=(_t$outputs=t===null||t===void 0?void 0:t.outputs)!==null&&_t$outputs!==void 0?_t$outputs:[];return this.backend.run(e,r,n,function(e,t,r){return new gv(_this158.module,t,_this158.output(e,r),r);},function(e,t){var r=Ud(e);if(!r)throw new Error("Unsupported data type: ".concat(e));var n=r*cf.size(t);return new gv(_this158.module,e,_this158.backend.gpuDataManager.create(n).id,t);});}},{key:"output",value:function output(e,t){var r=this.module.stackSave();try{var _r353=this.module.stackAlloc(4*(1+t.length)),n=_r353>>2;this.module.HEAPU32[n++]=t.length;for(var _e926=0;_e926<t.length;_e926++)this.module.HEAPU32[n++]=t[_e926];return this.module._JsepOutput(this.opKernelContext,e,_r353);}catch(r){throw new Error("Failed to generate kernel's output[".concat(e,"] with dims [").concat(t,"]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ").concat(r));}finally{this.module.stackRestore(r);}}}]);return mv;}(),wv=/*#__PURE__*/function(){var _ref97=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee163(e,t,r){var n,i;return _regeneratorRuntime().wrap(function _callee163$(_context166){while(1)switch(_context166.prev=_context166.next){case 0:n=e.jsepInit;if(n){_context166.next=3;break;}throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");case 3:i=new ub();_context166.next=6;return i.initialize(t,r);case 6:n(i,function(e){return i.alloc(e);},function(e){return i.free(e);},function(t,r,n){var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(o)Jd("verbose",function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(t,", dst=").concat(r,", size=").concat(n);}),i.memcpy(t,r);else{Jd("verbose",function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(t,", gpuDataId=").concat(r,", size=").concat(n);});var _o105=e.HEAPU8.subarray(t>>>0,(t>>>0)+n);i.upload(r,_o105);}},/*#__PURE__*/function(){var _ref98=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee162(t,r,n){return _regeneratorRuntime().wrap(function _callee162$(_context165){while(1)switch(_context165.prev=_context165.next){case 0:Jd("verbose",function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(t,", dataOffset=").concat(r,", size=").concat(n);});_context165.next=3;return i.download(t,function(){return e.HEAPU8.subarray(r>>>0,(r>>>0)+n);});case 3:case"end":return _context165.stop();}},_callee162);}));return function(_x194,_x195,_x196){return _ref98.apply(this,arguments);};}(),function(t,r,n){return i.createKernel(t,r,n,e.UTF8ToString(e._JsepGetNodeName(r)));},function(e){return i.releaseKernel(e);},function(t,r,n,o){Jd("verbose",function(){return"[WebGPU] jsepRun: sessionHandle=".concat(n,", kernel=").concat(t,", contextDataOffset=").concat(r);});var a=new mv(e,i,r);return i.computeKernel(t,a,o);});case 7:case"end":return _context166.stop();}},_callee163);}));return function wv(_x191,_x192,_x193){return _ref97.apply(this,arguments);};}();}),ox=Mc(function(){pb(),yb(),gb(),db(),fb(),mb(),bv=function bv(e,t){0!==Ed()._OrtInit(e,t)&&Pd("Can't initialize onnxruntime.");},vv=/*#__PURE__*/function(){var _ref99=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee164(e){return _regeneratorRuntime().wrap(function _callee164$(_context167){while(1)switch(_context167.prev=_context167.next){case 0:bv(e.wasm.numThreads,Gd(e.logLevel));case 1:case"end":return _context167.stop();}},_callee164);}));return function vv(_x197){return _ref99.apply(this,arguments);};}(),xv=/*#__PURE__*/function(){var _ref100=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee165(e,t){var _t385,_r354;return _regeneratorRuntime().wrap(function _callee165$(_context168){while(1)switch(_context168.prev=_context168.next){case 0:if(!("webgpu"===t)){_context168.next=13;break;}if(!((typeof navigator==="undefined"?"undefined":_typeof(navigator))>"u"||!navigator.gpu)){_context168.next=3;break;}throw new Error("WebGPU is not supported in current environment");case 3:_context168.next=5;return navigator.gpu.requestAdapter();case 5:_t385=_context168.sent;if(_t385){_context168.next=8;break;}throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.');case 8:if(e.wasm.simd){_context168.next=10;break;}throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");case 10:_r354=(ix(),Nc(yv)).init;_context168.next=13;return _r354(Ed(),e,_t385);case 13:case"end":return _context168.stop();}},_callee165);}));return function xv(_x198,_x199){return _ref100.apply(this,arguments);};}(),_v=new Map(),Iv=function Iv(e){var t=Ed(),r=t.stackSave();try{var _r355=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,_r355,_r355+4)&&Pd("Can't get session input/output count."),[t.HEAP32[_r355/4],t.HEAP32[_r355/4+1]];}finally{t.stackRestore(r);}},Av=function Av(e){var t=Ed(),r=t._malloc(e.byteLength);if(0===r)throw new Error("Can't create a session. failed to allocate a buffer of size ".concat(e.byteLength,"."));return t.HEAPU8.set(e,r),[r,e.byteLength];},Sv=/*#__PURE__*/function(){var _ref101=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee166(e,t){var _e927,_e928,_ref102,_Av,_Av2;var r,n,i,o,a,s,u,l,h,_Ld,_Ld2,_e929,_iterator74,_step74,_loop16,_Iv,_Iv2,_e930,_c22,_d15,_f15,_p14,_t386,_e931,_e932,_r356,_n175,_t$preferredOutputLoc,_t$preferredOutputLoc2,_e933,_y11,_i$unmountExternalDat2;return _regeneratorRuntime().wrap(function _callee166$(_context170){while(1)switch(_context170.prev=_context170.next){case 0:i=Ed();Array.isArray(e)?(_e927=e,_e928=_slicedToArray(_e927,2),r=_e928[0],n=_e928[1],_e927):e.buffer===i.HEAPU8.buffer?(_ref102=[e.byteOffset,e.byteLength],r=_ref102[0],n=_ref102[1],_ref102):(_Av=Av(e),_Av2=_slicedToArray(_Av,2),r=_Av2[0],n=_Av2[1],_Av);o=0,a=0,s=0,u=[],l=[],h=[];_context170.prev=3;if(!((_Ld=Ld(t),_Ld2=_slicedToArray(_Ld,2),a=_Ld2[0],u=_Ld2[1]),t!==null&&t!==void 0&&t.externalData&&i.mountExternalData)){_context170.next=24;break;}_e929=[];_iterator74=_createForOfIteratorHelper(t.externalData);_context170.prev=7;_loop16=/*#__PURE__*/_regeneratorRuntime().mark(function _loop16(){var r,t;return _regeneratorRuntime().wrap(function _loop16$(_context169){while(1)switch(_context169.prev=_context169.next){case 0:r=_step74.value;t="string"==typeof r?r:r.path;_e929.push(Hd("string"==typeof r?r:r.data).then(function(e){i.mountExternalData(t,e);}));case 3:case"end":return _context169.stop();}},_loop16);});_iterator74.s();case 10:if((_step74=_iterator74.n()).done){_context170.next=14;break;}return _context170.delegateYield(_loop16(),"t0",12);case 12:_context170.next=10;break;case 14:_context170.next=19;break;case 16:_context170.prev=16;_context170.t1=_context170["catch"](7);_iterator74.e(_context170.t1);case 19:_context170.prev=19;_iterator74.f();return _context170.finish(19);case 22:_context170.next=24;return Promise.all(_e929);case 24:o=i._OrtCreateSession(r,n,a),0===o&&Pd("Can't create a session.");_Iv=Iv(o),_Iv2=_slicedToArray(_Iv,2),_e930=_Iv2[0],_c22=_Iv2[1],_d15=[],_f15=[],_p14=[];for(_t386=0;_t386<_e930;_t386++){_e931=i._OrtGetInputName(o,_t386);0===_e931&&Pd("Can't get an input name."),l.push(_e931),_d15.push(i.UTF8ToString(_e931));}_e932=0;case 28:if(!(_e932<_c22)){_context170.next=40;break;}_r356=i._OrtGetOutputName(o,_e932);0===_r356&&Pd("Can't get an output name."),h.push(_r356);_n175=i.UTF8ToString(_r356);_f15.push(_n175);_e933="string"==typeof(t===null||t===void 0?void 0:t.preferredOutputLocation)?t.preferredOutputLocation:(_t$preferredOutputLoc=t===null||t===void 0||(_t$preferredOutputLoc2=t.preferredOutputLocation)===null||_t$preferredOutputLoc2===void 0?void 0:_t$preferredOutputLoc2[_n175])!==null&&_t$preferredOutputLoc!==void 0?_t$preferredOutputLoc:"cpu";if(!("cpu"!==_e933&&"cpu-pinned"!==_e933&&"gpu-buffer"!==_e933)){_context170.next=36;break;}throw new Error("Not supported preferred output location: ".concat(_e933,"."));case 36:_p14.push(_e933);case 37:_e932++;_context170.next=28;break;case 40:_y11=null;return _context170.abrupt("return",(_p14.some(function(e){return"gpu-buffer"===e;})&&(s=i._OrtCreateBinding(o),0===s&&Pd("Can't create IO binding."),_y11={handle:s,outputPreferredLocations:_p14,outputPreferredLocationsEncoded:_p14.map(function(e){return Vd(e);})}),_v.set(o,[o,l,h,_y11]),[o,_d15,_f15]));case 44:_context170.prev=44;_context170.t2=_context170["catch"](3);throw l.forEach(function(e){return i._OrtFree(e);}),h.forEach(function(e){return i._OrtFree(e);}),0!==s&&i._OrtReleaseBinding(s),0!==o&&i._OrtReleaseSession(o),_context170.t2;case 47:_context170.prev=47;i._free(r),0!==a&&i._OrtReleaseSessionOptions(a),u.forEach(function(e){return i._free(e);}),(_i$unmountExternalDat2=i.unmountExternalData)===null||_i$unmountExternalDat2===void 0?void 0:_i$unmountExternalDat2.call(i);return _context170.finish(47);case 50:case"end":return _context170.stop();}},_callee166,null,[[3,44,47,50],[7,16,19,22]]);}));return function Sv(_x200,_x201){return _ref101.apply(this,arguments);};}(),Tv=function Tv(e){var _t$jsepUnregisterBuff2;var t=Ed(),r=_v.get(e);if(!r)throw new Error("cannot release session. invalid session id: ".concat(e));var _r357=_slicedToArray(r,4),n=_r357[0],i=_r357[1],o=_r357[2],a=_r357[3];a&&t._OrtReleaseBinding(a.handle),(_t$jsepUnregisterBuff2=t.jsepUnregisterBuffers)!==null&&_t$jsepUnregisterBuff2!==void 0&&_t$jsepUnregisterBuff2.call(t,e),i.forEach(function(e){return t._OrtFree(e);}),o.forEach(function(e){return t._OrtFree(e);}),t._OrtReleaseSession(n),_v["delete"](e);},Cv=function Cv(e,t,r,n,i){if(!e)return void t.push(0);var o,a,s=Ed(),u=e[0],l=e[1],h=e[3];if("string"===u&&"gpu-buffer"===h)throw new Error("String tensor is not supported on GPU.");if("gpu-buffer"===h){var _t387=e[2].gpuBuffer,_r358=Ud(Fd(u));a=l.reduce(function(e,t){return e*t;},1)*_r358,o=s.jsepRegisterBuffer(n,i,_t387,a);}else{var _t388=e[2];if(Array.isArray(_t388)){a=4*_t388.length,o=s._malloc(a),r.push(o);var _e934=o/4;for(var _n176=0;_n176<_t388.length;_n176++){if("string"!=typeof _t388[_n176])throw new TypeError("tensor data at index ".concat(_n176," is not a string"));s.HEAPU32[_e934++]=Od(_t388[_n176],r);}}else a=_t388.byteLength,o=s._malloc(a),r.push(o),s.HEAPU8.set(new Uint8Array(_t388.buffer,_t388.byteOffset,a),o);}var c=s.stackSave(),d=s.stackAlloc(4*l.length);try{var _e935=d/4;l.forEach(function(t){return s.HEAP32[_e935++]=t;});var _r359=s._OrtCreateTensor(Fd(u),o,a,d,l.length,Vd(h));0===_r359&&Pd("Can't create tensor for input/output. session=".concat(n,", index=").concat(i,".")),t.push(_r359);}finally{s.stackRestore(c);}},Ev=function Ev(e){var t=new TextEncoder().encode(e),r=Ed(),n=r._malloc(t.byteLength);r.HEAPU8.set(t,n);var i=r._OrtConfigure(n,t.byteLength);if(0===i)throw new Error("Can't get an configure key");var o=r.UTF8ToString(i);return r._OrtFree(i),o;},Ov=function Ov(e){var t=new TextEncoder().encode(e),r=Ed(),n=r._malloc(t.byteLength);r.HEAPU8.set(t,n);var i=r._OrtAuth(n,t.byteLength);if(0===i)throw new Error("Can't get an auth result");var o=r.UTF8ToString(i);return r._OrtFree(i),o;},kv=/*#__PURE__*/function(){var _ref103=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee167(e,t,r,n,i,o){var a,s,_s60,u,l,h,c,d,f,p,y,g,m,w,b,v,x,_,I,_$d,_$d2,_n177,_t389,_s61,_b7,_A2,_S2,_T2,_e936,_e937,_r360,_o106,_s62,_n178,_i137,_t390,_i$_t,_u44,_C2,_loop17,_e938;return _regeneratorRuntime().wrap(function _callee167$(_context172){while(1)switch(_context172.prev=_context172.next){case 0:a=Ed(),s=_v.get(e);if(s){_context172.next=3;break;}throw new Error("cannot run inference. invalid session id: ".concat(e));case 3:_s60=_slicedToArray(s,4),u=_s60[0],l=_s60[1],h=_s60[2],c=_s60[3],d=t.length,f=n.length,p=0,y=[],g=[],m=[],w=[],b=a.stackSave(),v=a.stackAlloc(4*d),x=a.stackAlloc(4*d),_=a.stackAlloc(4*f),I=a.stackAlloc(4*f);_context172.prev=4;_$d=$d(o);_$d2=_slicedToArray(_$d,2);p=_$d2[0];y=_$d2[1];for(_n177=0;_n177<d;_n177++)Cv(r[_n177],g,w,e,t[_n177]);for(_t389=0;_t389<f;_t389++)Cv(i[_t389],m,w,e,d+n[_t389]);_b7=v/4,_A2=x/4,_S2=_/4,_T2=I/4;for(_e936=0;_e936<d;_e936++)a.HEAPU32[_b7++]=g[_e936],a.HEAPU32[_A2++]=l[t[_e936]];for(_e937=0;_e937<f;_e937++)a.HEAPU32[_S2++]=m[_e937],a.HEAPU32[_T2++]=h[n[_e937]];if(!c){_context172.next=31;break;}_r360=c.handle,_o106=c.outputPreferredLocations,_s62=c.outputPreferredLocationsEncoded;if(!(l.length!==d)){_context172.next=18;break;}throw new Error("input count from feeds (".concat(d,") is expected to be always equal to model's input count (").concat(l.length,")."));case 18:_n178=0;case 19:if(!(_n178<d)){_context172.next=30;break;}_i137=t[_n178];_context172.next=23;return a._OrtBindInput(_r360,l[_i137],g[_n178]);case 23:_context172.t0=_context172.sent;_context172.t1=0!==_context172.t0;if(!_context172.t1){_context172.next=27;break;}Pd("Can't bind input[".concat(_n178,"] for session=").concat(e,"."));case 27:_n178++;_context172.next=19;break;case 30:for(_t390=0;_t390<f;_t390++){_u44=n[_t390];(_i$_t=i[_t390])!==null&&_i$_t!==void 0&&_i$_t[3]?0!==a._OrtBindOutput(_r360,h[_u44],m[_t390],0)&&Pd("Can't bind pre-allocated output[".concat(_t390,"] for session=").concat(e,".")):0!==a._OrtBindOutput(_r360,h[_u44],0,_s62[_u44])&&Pd("Can't bind output[".concat(_t390,"] to ").concat(_o106[_t390]," for session=").concat(e,"."));}case 31:if(!c){_context172.next=37;break;}_context172.next=34;return a._OrtRunWithBinding(u,c.handle,f,_,p);case 34:_context172.t2=_context172.sent;_context172.next=40;break;case 37:_context172.next=39;return a._OrtRun(u,x,v,d,I,f,_,p);case 39:_context172.t2=_context172.sent;case 40:_s61=_context172.t2;0!==_s61&&Pd("failed to call OrtRun().");_C2=[];_loop17=/*#__PURE__*/_regeneratorRuntime().mark(function _loop17(){var t,r,o,s,u,l,_i138,_o107,_h28,_d16,_f16,_e939,_p15,_y12,_e940,_t391,_r361,_n179,_i139,_e941,_n180,_e942;return _regeneratorRuntime().wrap(function _loop17$(_context171){while(1)switch(_context171.prev=_context171.next){case 0:t=a.HEAPU32[_/4+_e938];if(!(t===m[_e938])){_context171.next=4;break;}_C2.push(i[_e938]);return _context171.abrupt("return",1);case 4:o=a.stackSave(),s=a.stackAlloc(16),u=!1,l=0;_context171.prev=5;0!==a._OrtGetTensorData(t,s,s+4,s+8,s+12)&&Pd("Can't access output tensor data on index ".concat(_e938,"."));_i138=s/4,_o107=a.HEAPU32[_i138++];l=a.HEAPU32[_i138++];_h28=a.HEAPU32[_i138++],_d16=a.HEAPU32[_i138++],_f16=[];for(_e939=0;_e939<_d16;_e939++)_f16.push(a.HEAPU32[_h28/4+_e939]);a._OrtFree(_h28);_p15=_f16.reduce(function(e,t){return e*t;},1);r=Nd(_o107);_y12=c===null||c===void 0?void 0:c.outputPreferredLocations[n[_e938]];if(!("string"===r)){_context171.next=23;break;}if(!("gpu-buffer"===_y12)){_context171.next=18;break;}throw new Error("String tensor is not supported on GPU.");case 18:_e940=[],_t391=l/4;for(_r361=0;_r361<_p15;_r361++){_n179=a.HEAPU32[_t391++],_i139=_r361===_p15-1?void 0:a.HEAPU32[_t391]-_n179;_e940.push(a.UTF8ToString(_n179,_i139));}_C2.push([r,_f16,_e940,"cpu"]);_context171.next=32;break;case 23:if(!("gpu-buffer"===_y12&&_p15>0)){_context171.next=30;break;}_e941=a.jsepGetBuffer(l),_n180=Ud(_o107);if(!(void 0===_n180||!zd(r))){_context171.next=27;break;}throw new Error("Unsupported data type: ".concat(r));case 27:u=!0,_C2.push([r,_f16,{gpuBuffer:_e941,download:a.jsepCreateDownloader(_e941,_p15*_n180,r),dispose:function dispose(){a._OrtReleaseTensor(t);}},"gpu-buffer"]);_context171.next=32;break;case 30:_e942=new(jd(r))(_p15);new Uint8Array(_e942.buffer,_e942.byteOffset,_e942.byteLength).set(a.HEAPU8.subarray(l,l+_e942.byteLength)),_C2.push([r,_f16,_e942,"cpu"]);case 32:_context171.prev=32;a.stackRestore(o),"string"===r&&l&&a._free(l),u||a._OrtReleaseTensor(t);return _context171.finish(32);case 35:case"end":return _context171.stop();}},_loop17,null,[[5,,32,35]]);});_e938=0;case 45:if(!(_e938<f)){_context172.next=52;break;}return _context172.delegateYield(_loop17(),"t3",47);case 47:if(!_context172.t3){_context172.next=49;break;}return _context172.abrupt("continue",49);case 49:_e938++;_context172.next=45;break;case 52:return _context172.abrupt("return",(c&&a._OrtClearBoundOutputs(c.handle),_C2));case 53:_context172.prev=53;a.stackRestore(b),g.forEach(function(e){return a._OrtReleaseTensor(e);}),m.forEach(function(e){return a._OrtReleaseTensor(e);}),w.forEach(function(e){return a._free(e);}),0!==p&&a._OrtReleaseRunOptions(p),y.forEach(function(e){return a._free(e);});return _context172.finish(53);case 56:case"end":return _context172.stop();}},_callee167,null,[[4,,53,56]]);}));return function kv(_x202,_x203,_x204,_x205,_x206,_x207){return _ref103.apply(this,arguments);};}(),Pv=function Pv(e){var t=Ed(),r=_v.get(e);if(!r)throw new Error("invalid session id");var n=r[0],i=t._OrtEndProfiling(n);0===i&&Pd("Can't get an profile file name."),t._OrtFree(i);},$v=function $v(e){var t=[];var _iterator75=_createForOfIteratorHelper(e),_step75;try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var _r362=_step75.value;var _e943=_r362[2];!Array.isArray(_e943)&&"buffer"in _e943&&t.push(_e943.buffer);}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}return t;};}),ax=Lc(function(e,t){t.exports='/*!\n * ONNX Runtime Web v1.17.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Cn=Object.defineProperty;var el=Object.getOwnPropertyDescriptor;var tl=Object.getOwnPropertyNames;var rl=Object.prototype.hasOwnProperty;var ko=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error(\'Dynamic require of "\'+e+\'" is not supported\')});var q=(e,t)=>()=>(e&&(t=e(e=0)),t);var wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Gr=(e,t)=>{for(var r in t)Cn(e,r,{get:t[r],enumerable:!0})},nl=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of tl(t))!rl.call(e,n)&&n!==r&&Cn(e,n,{get:()=>t[n],enumerable:!(o=el(t,n))||o.enumerable});return e};var Jt=e=>nl(Cn({},"__esModule",{value:!0}),e);var In={};Gr(In,{createReadStream:()=>Bo,readFile:()=>ol,readFileSync:()=>al});var ol,al,Bo,An=q(()=>{ol=void 0,al=void 0,Bo=void 0});var Tn={};Gr(Tn,{join:()=>il});var il,En=q(()=>{il=void 0});var Mo=wr((Do,On)=>{"use strict";var Ro=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(e=e||__filename),function(t={}){var r=t,o,n;r.ready=new Promise((l,p)=>{o=l,n=p}),r.mountExternalData=(l,p)=>{(r.Ka||(r.Ka=new Map)).set(l,p)},r.unmountExternalData=()=>{delete r.Ka},r.jsepInit=(l,p,b,x,O,W,L,te)=>{r.gb=l,r.Wa=p,r.Ya=b,r.Qa=x,r.Xa=O,r.Ba=W,r.Za=L,r.$a=te,p=(ee,ue,le)=>(...ve)=>{let Ie=Je,k=ue?.();ve=ee(...ve);let de=ue?.();return k!==de&&(ee=de,le(k),ue=le=null),Je!=Ie?kr():ve},b=ee=>async(...ue)=>{try{if(r.Ja)throw Error("Session already started");let le=r.Ja={ab:ue[0],errors:[]},ve=await ee(...ue);if(r.Ja!==le)throw Error("Session mismatch");l.flush();let Ie=le.errors;if(0<Ie.length){let k=await Promise.all(Ie);if(k=k.filter(de=>de),0<k.length)throw Error(k.join(`\n`))}return ve}finally{r.Ja=null}},r._OrtRun=b(p(r._OrtRun,()=>r._OrtRun,ee=>r._OrtRun=ee)),r._OrtRunWithBinding=b(p(r._OrtRunWithBinding,()=>r._OrtRunWithBinding,ee=>r._OrtRunWithBinding=ee)),r._OrtBindInput=p(r._OrtBindInput,()=>r._OrtBindInput,ee=>r._OrtBindInput=ee),r.jsepRegisterBuffer=(ee,ue,le,ve)=>l.registerBuffer(ee,ue,le,ve),r.jsepUnregisterBuffers=ee=>{l.unregisterBuffers(ee)},r.jsepGetBuffer=ee=>l.getBuffer(ee),r.jsepCreateDownloader=(ee,ue,le)=>l.createDownloader(ee,ue,le)};var s=Object.assign({},r),u="./this.program",d=(l,p)=>{throw p},a=typeof window=="object",m=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",g="",w,v,y;if(h){var C=(An(),Jt(In)),I=(En(),Jt(Tn));g=m?I.dirname(g)+"/":__dirname+"/",w=(l,p)=>(l=We(l)?new URL(l):I.normalize(l),C.readFileSync(l,p?void 0:"utf8")),y=l=>(l=w(l,!0),l.buffer||(l=new Uint8Array(l)),l),v=(l,p,b,x=!0)=>{l=We(l)?new URL(l):I.normalize(l),C.readFile(l,x?void 0:"utf8",(O,W)=>{O?b(O):p(x?W.buffer:W)})},!r.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),d=(l,p)=>{throw process.exitCode=l,p},r.inspect=()=>"[Emscripten Module object]"}else(a||m)&&(m?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g.indexOf("blob:")!==0?g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):g="",w=l=>{var p=new XMLHttpRequest;return p.open("GET",l,!1),p.send(null),p.responseText},m&&(y=l=>{var p=new XMLHttpRequest;return p.open("GET",l,!1),p.responseType="arraybuffer",p.send(null),new Uint8Array(p.response)}),v=(l,p,b)=>{var x=new XMLHttpRequest;x.open("GET",l,!0),x.responseType="arraybuffer",x.onload=()=>{x.status==200||x.status==0&&x.response?p(x.response):b()},x.onerror=b,x.send(null)});var S=console.log.bind(console),_=console.error.bind(console);Object.assign(r,s),s=null,typeof WebAssembly!="object"&&he("no native wasm support detected");var P,A=!1,z,R,N,T,H,ie,Z;function K(){var l=P.buffer;r.HEAP8=R=new Int8Array(l),r.HEAP16=new Int16Array(l),r.HEAPU8=N=new Uint8Array(l),r.HEAPU16=new Uint16Array(l),r.HEAP32=T=new Int32Array(l),r.HEAPU32=H=new Uint32Array(l),r.HEAPF32=ie=new Float32Array(l),r.HEAPF64=Z=new Float64Array(l)}var Q=[],X=[],Ee=[],Pe=0,fe=null,Ce=null;function he(l){throw l="Aborted("+l+")",_(l),A=!0,z=1,l=new WebAssembly.RuntimeError(l+". Build with -sASSERTIONS for more info."),n(l),l}var ye=l=>l.startsWith("data:application/octet-stream;base64,"),We=l=>l.startsWith("file://"),Me;if(Me="ort-wasm-simd.wasm",!ye(Me)){var Ge=Me;Me=r.locateFile?r.locateFile(Ge,g):g+Ge}function G(l){if(y)return y(l);throw"both async and sync fetching of the wasm failed"}function re(l){if(a||m){if(typeof fetch=="function"&&!We(l))return fetch(l,{credentials:"same-origin"}).then(p=>{if(!p.ok)throw"failed to load wasm binary file at \'"+l+"\'";return p.arrayBuffer()}).catch(()=>G(l));if(v)return new Promise((p,b)=>{v(l,x=>p(new Uint8Array(x)),b)})}return Promise.resolve().then(()=>G(l))}function be(l,p,b){return re(l).then(x=>WebAssembly.instantiate(x,p)).then(x=>x).then(b,x=>{_(`failed to asynchronously prepare wasm: ${x}`),he(x)})}function rt(l,p){var b=Me;return typeof WebAssembly.instantiateStreaming!="function"||ye(b)||We(b)||h||typeof fetch!="function"?be(b,l,p):fetch(b,{credentials:"same-origin"}).then(x=>WebAssembly.instantiateStreaming(x,l).then(p,function(O){return _(`wasm streaming compile failed: ${O}`),_("falling back to ArrayBuffer instantiation"),be(b,l,p)}))}var ze,Ve={898080:(l,p,b,x)=>{if(typeof r>"u"||!r.Ka)return 1;if(l=qe(l>>>0),l.startsWith("./")&&(l=l.substring(2)),l=r.Ka.get(l),!l)return 2;if(p>>>=0,b>>>=0,p+b>l.byteLength)return 3;try{return N.set(l.subarray(p,p+b),x>>>0>>>0),0}catch{return 4}},898581:l=>r.Wa(l),898614:l=>r.Ya(l),898646:(l,p,b)=>{r.Qa(l,p,b,!0)},898685:(l,p,b)=>{r.Qa(l,p,b)},898718:l=>{r.Ba("Abs",l,void 0)},898769:l=>{r.Ba("Neg",l,void 0)},898820:l=>{r.Ba("Floor",l,void 0)},898873:l=>{r.Ba("Ceil",l,void 0)},898925:l=>{r.Ba("Reciprocal",l,void 0)},898983:l=>{r.Ba("Sqrt",l,void 0)},899035:l=>{r.Ba("Exp",l,void 0)},899086:l=>{r.Ba("Erf",l,void 0)},899137:l=>{r.Ba("Sigmoid",l,void 0)},899192:l=>{r.Ba("Log",l,void 0)},899243:l=>{r.Ba("Sin",l,void 0)},899294:l=>{r.Ba("Cos",l,void 0)},899345:l=>{r.Ba("Tan",l,void 0)},899396:l=>{r.Ba("Asin",l,void 0)},899448:l=>{r.Ba("Acos",l,void 0)},899500:l=>{r.Ba("Atan",l,void 0)},899552:l=>{r.Ba("Sinh",l,void 0)},899604:l=>{r.Ba("Cosh",l,void 0)},899656:l=>{r.Ba("Asinh",l,void 0)},899709:l=>{r.Ba("Acosh",l,void 0)},899762:l=>{r.Ba("Atanh",l,void 0)},899815:l=>{r.Ba("Tanh",l,void 0)},899867:l=>{r.Ba("Not",l,void 0)},899918:(l,p,b)=>{r.Ba("Clip",l,{min:p,max:b})},899987:l=>{r.Ba("Clip",l,void 0)},900039:(l,p)=>{r.Ba("Elu",l,{alpha:p})},900097:l=>{r.Ba("Relu",l,void 0)},900149:(l,p)=>{r.Ba("LeakyRelu",l,{alpha:p})},900213:(l,p)=>{r.Ba("ThresholdedRelu",l,{alpha:p})},900283:(l,p)=>{r.Ba("Cast",l,{to:p})},900341:l=>{r.Ba("Add",l,void 0)},900392:l=>{r.Ba("Sub",l,void 0)},900443:l=>{r.Ba("Mul",l,void 0)},900494:l=>{r.Ba("Div",l,void 0)},900545:l=>{r.Ba("Pow",l,void 0)},900596:l=>{r.Ba("Equal",l,void 0)},900649:l=>{r.Ba("Greater",l,void 0)},900704:l=>{r.Ba("GreaterOrEqual",l,void 0)},900766:l=>{r.Ba("Less",l,void 0)},900818:l=>{r.Ba("LessOrEqual",l,void 0)},900877:(l,p,b,x,O)=>{r.Ba("ReduceMean",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},901036:(l,p,b,x,O)=>{r.Ba("ReduceMax",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},901194:(l,p,b,x,O)=>{r.Ba("ReduceMin",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},901352:(l,p,b,x,O)=>{r.Ba("ReduceProd",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},901511:(l,p,b,x,O)=>{r.Ba("ReduceSum",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},901669:(l,p,b,x,O)=>{r.Ba("ReduceL1",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},901826:(l,p,b,x,O)=>{r.Ba("ReduceL2",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},901983:(l,p,b,x,O)=>{r.Ba("ReduceLogSum",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},902144:(l,p,b,x,O)=>{r.Ba("ReduceSumSquare",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},902308:(l,p,b,x,O)=>{r.Ba("ReduceLogSumExp",l,{keepDims:!!p,noopWithEmptyAxes:!!b,axes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},902472:l=>{r.Ba("Where",l,void 0)},902525:(l,p,b)=>{r.Ba("Transpose",l,{perm:p?Array.from(T.subarray(p>>>0,b>>>0)):[]})},902633:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k,de)=>{r.Ba("ConvTranspose",l,{format:ee?"NHWC":"NCHW",autoPad:p,dilations:[b],group:x,kernel_shape:[O],pads:[W,L],strides:[te],wIsConst:()=>!!R[ue>>>0],outputPadding:le?Array.from(T.subarray(le>>>0,ve>>>0)):[],outputShape:Ie?Array.from(T.subarray(Ie>>>0,k>>>0)):[],activation:qe(de)})},903035:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k)=>{r.Ba("ConvTranspose",l,{format:te?"NHWC":"NCHW",autoPad:p,dilations:Array.from(T.subarray(b>>>0,(b>>>0)+2>>>0)),group:x,kernelShape:Array.from(T.subarray(O>>>0,(O>>>0)+2>>>0)),pads:Array.from(T.subarray(W>>>0,(W>>>0)+4>>>0)),strides:Array.from(T.subarray(L>>>0,(L>>>0)+2>>>0)),wIsConst:()=>!!R[ee>>>0],outputPadding:ue?Array.from(T.subarray(ue>>>0,le>>>0)):[],outputShape:ve?Array.from(T.subarray(ve>>>0,Ie>>>0)):[],activation:qe(k)})},903600:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k,de)=>{r.Ba("ConvTranspose",l,{format:ee?"NHWC":"NCHW",autoPad:p,dilations:[b],group:x,kernel_shape:[O],pads:[W,L],strides:[te],wIsConst:()=>!!R[ue>>>0],outputPadding:le?Array.from(T.subarray(le>>>0,ve>>>0)):[],outputShape:Ie?Array.from(T.subarray(Ie>>>0,k>>>0)):[],activation:qe(de)})},904002:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k)=>{r.Ba("ConvTranspose",l,{format:te?"NHWC":"NCHW",autoPad:p,dilations:Array.from(T.subarray(b>>>0,(b>>>0)+2>>>0)),group:x,kernelShape:Array.from(T.subarray(O>>>0,(O>>>0)+2>>>0)),pads:Array.from(T.subarray(W>>>0,(W>>>0)+4>>>0)),strides:Array.from(T.subarray(L>>>0,(L>>>0)+2>>>0)),wIsConst:()=>!!R[ee>>>0],outputPadding:ue?Array.from(T.subarray(ue>>>0,le>>>0)):[],outputShape:ve?Array.from(T.subarray(ve>>>0,Ie>>>0)):[],activation:qe(k)})},904567:(l,p)=>{r.Ba("GlobalAveragePool",l,{format:p?"NHWC":"NCHW"})},904658:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k,de,Se)=>{r.Ba("AveragePool",l,{format:Se?"NHWC":"NCHW",auto_pad:p,ceil_mode:b,count_include_pad:x,storage_order:O,dilations:[W,L],kernel_shape:[te,ee],pads:[ue,le,ve,Ie],strides:[k,de]})},904942:(l,p)=>{r.Ba("GlobalAveragePool",l,{format:p?"NHWC":"NCHW"})},905033:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k,de,Se)=>{r.Ba("AveragePool",l,{format:Se?"NHWC":"NCHW",auto_pad:p,ceil_mode:b,count_include_pad:x,storage_order:O,dilations:[W,L],kernel_shape:[te,ee],pads:[ue,le,ve,Ie],strides:[k,de]})},905317:(l,p)=>{r.Ba("GlobalMaxPool",l,{format:p?"NHWC":"NCHW"})},905404:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k,de,Se)=>{r.Ba("MaxPool",l,{format:Se?"NHWC":"NCHW",auto_pad:p,ceil_mode:b,count_include_pad:x,storage_order:O,dilations:[W,L],kernel_shape:[te,ee],pads:[ue,le,ve,Ie],strides:[k,de]})},905684:(l,p)=>{r.Ba("GlobalMaxPool",l,{format:p?"NHWC":"NCHW"})},905771:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k,de,Se)=>{r.Ba("MaxPool",l,{format:Se?"NHWC":"NCHW",auto_pad:p,ceil_mode:b,count_include_pad:x,storage_order:O,dilations:[W,L],kernel_shape:[te,ee],pads:[ue,le,ve,Ie],strides:[k,de]})},906051:(l,p,b,x,O)=>{r.Ba("Gemm",l,{alpha:p,beta:b,transA:x,transB:O})},906155:l=>{r.Ba("MatMul",l,void 0)},906209:(l,p,b,x)=>{r.Ba("ArgMax",l,{keepDims:!!p,selectLastIndex:!!b,axis:x})},906317:(l,p,b,x)=>{r.Ba("ArgMin",l,{keepDims:!!p,selectLastIndex:!!b,axis:x})},906425:(l,p)=>{r.Ba("Softmax",l,{axis:p})},906488:(l,p)=>{r.Ba("Concat",l,{axis:p})},906548:(l,p,b,x,O)=>{r.Ba("Split",l,{axis:p,numOutputs:b,splitSizes:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},906688:l=>{r.Ba("Expand",l,void 0)},906742:(l,p)=>{r.Ba("Gather",l,{axis:Number(p)})},906813:(l,p)=>{r.Ba("GatherElements",l,{axis:Number(p)})},906892:(l,p,b,x,O,W,L,te,ee,ue,le)=>{r.Ba("Resize",l,{antialias:p,axes:b?Array.from(T.subarray(b>>>0,x>>>0)):[],coordinateTransformMode:qe(O),cubicCoeffA:W,excludeOutside:L,extrapolationValue:te,keepAspectRatioPolicy:qe(ee),mode:qe(ue),nearestMode:qe(le)})},907238:(l,p,b,x,O,W,L)=>{r.Ba("Slice",l,{starts:p?Array.from(T.subarray(p>>>0,b>>>0)):[],ends:x?Array.from(T.subarray(x>>>0,O>>>0)):[],axes:W?Array.from(T.subarray(W>>>0,L>>>0)):[]})},907454:l=>{r.Ba("Tile",l,void 0)},907506:(l,p,b)=>{r.Ba("LayerNormalization",l,{axis:Number(p),epsilon:Number(b)})},907613:(l,p,b)=>{r.Ba("InstanceNormalization",l,{epsilon:p,format:b?"NHWC":"NCHW"})},907727:(l,p,b)=>{r.Ba("InstanceNormalization",l,{epsilon:p,format:b?"NHWC":"NCHW"})},907841:l=>{r.Ba("Range",l,void 0)},907894:(l,p)=>{r.Ba("Einsum",l,{equation:qe(p)})},907975:(l,p,b,x,O)=>{r.Ba("Pad",l,{mode:p,value:b,pads:x?Array.from(T.subarray(x>>>0,O>>>0)):[]})},908102:(l,p,b,x,O,W)=>{r.Ba("BatchNormalization",l,{epsilon:p,momentum:b,spatial:!!O,trainingMode:!!x,format:W?"NHWC":"NCHW"})},908271:(l,p,b,x,O,W)=>{r.Ba("BatchNormalization",l,{epsilon:p,momentum:b,spatial:!!O,trainingMode:!!x,format:W?"NHWC":"NCHW"})},908440:(l,p,b)=>{r.Ba("CumSum",l,{exclusive:Number(p),reverse:Number(b)})},908537:(l,p,b,x,O,W,L,te,ee)=>{r.Ba("Attention",l,{numHeads:p,isUnidirectional:b,maskFilterValue:x,scale:O,doRotary:W,qkvHiddenSizes:L?Array.from(T.subarray(Number(te)>>>0,Number(te)+L>>>0)):[],pastPresentShareBuffer:!!ee})},908809:l=>{r.Ba("Gelu",l,void 0)},908861:(l,p,b,x,O,W)=>{r.Ba("MultiHeadAttention",l,{numHeads:p,isUnidirectional:b,maskFilterValue:x,scale:O,doRotary:W})},909020:l=>{r.Ba("BiasAdd",l,void 0)},909075:l=>{r.Ba("BiasSplitGelu",l,void 0)},909136:(l,p)=>{r.Ba("SkipLayerNormalization",l,{epsilon:p})},909217:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie)=>{r.Ba("Conv",l,{format:ee?"NHWC":"NCHW",auto_pad:p,dilations:[b],group:x,kernel_shape:[O],pads:W?Array.from(T.subarray(W>>>0,L>>>0)):[],strides:[te],w_is_const:()=>!!R[ue>>>0],activation:qe(le),activation_params:ve?Array.from(ie.subarray(ve>>>0,Ie>>>0)):[]})},909587:(l,p,b,x,O,W,L,te,ee,ue,le,ve,Ie,k,de,Se)=>{r.Ba("Conv",l,{format:ve?"NHWC":"NCHW",auto_pad:p,dilations:[b,x],group:O,kernel_shape:[W,L],pads:te?Array.from(T.subarray(te>>>0,ee>>>0)):[],strides:[ue,le],w_is_const:()=>!!R[Ie>>>0],activation:qe(k),activation_params:de?Array.from(ie.subarray(de>>>0,Se>>>0)):[]})},909978:l=>{r.Za(l)},910012:(l,p)=>r.$a(l,p,r.Ja.ab,r.Ja.errors)};function Ue(l){this.name="ExitStatus",this.message=`Program terminated with exit(${l})`,this.status=l}function St(l){this.Na=l-24,this.Ua=function(p){H[this.Na+4>>>2>>>0]=p},this.Ta=function(p){H[this.Na+8>>>2>>>0]=p},this.Ra=function(p,b){this.Sa(),this.Ua(p),this.Ta(b)},this.Sa=function(){H[this.Na+16>>>2>>>0]=0}}var nt=0,zt=0,Tt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,xt=(l,p,b)=>{p>>>=0;var x=p+b;for(b=p;l[b]&&!(b>=x);)++b;if(16<b-p&&l.buffer&&Tt)return Tt.decode(l.subarray(p,b));for(x="";p<b;){var O=l[p++];if(O&128){var W=l[p++]&63;if((O&224)==192)x+=String.fromCharCode((O&31)<<6|W);else{var L=l[p++]&63;O=(O&240)==224?(O&15)<<12|W<<6|L:(O&7)<<18|W<<12|L<<6|l[p++]&63,65536>O?x+=String.fromCharCode(O):(O-=65536,x+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else x+=String.fromCharCode(O)}return x},qe=(l,p)=>(l>>>=0)?xt(N,l,p):"",rr=l=>{for(var p=0,b=0;b<l.length;++b){var x=l.charCodeAt(b);127>=x?p++:2047>=x?p+=2:55296<=x&&57343>=x?(p+=4,++b):p+=3}return p},Vt=(l,p,b,x)=>{if(b>>>=0,!(0<x))return 0;var O=b;x=b+x-1;for(var W=0;W<l.length;++W){var L=l.charCodeAt(W);if(55296<=L&&57343>=L){var te=l.charCodeAt(++W);L=65536+((L&1023)<<10)|te&1023}if(127>=L){if(b>=x)break;p[b++>>>0]=L}else{if(2047>=L){if(b+1>=x)break;p[b++>>>0]=192|L>>6}else{if(65535>=L){if(b+2>=x)break;p[b++>>>0]=224|L>>12}else{if(b+3>=x)break;p[b++>>>0]=240|L>>18,p[b++>>>0]=128|L>>12&63}p[b++>>>0]=128|L>>6&63}p[b++>>>0]=128|L&63}}return p[b>>>0]=0,b-O},_t=l=>l%4===0&&(l%100!==0||l%400===0),yt=[0,31,60,91,121,152,182,213,244,274,305,335],Nt=[0,31,59,90,120,151,181,212,243,273,304,334],Wt=l=>{var p=rr(l)+1,b=jt(p);return b&&Vt(l,N,b,p),b},Et=[],nr=(l,p)=>{Et.length=0;for(var b;b=N[l++>>>0];){var x=b!=105;x&=b!=112,p+=x&&p%8?4:0,Et.push(b==112?H[p>>>2>>>0]:b==105?T[p>>>2>>>0]:Z[p>>>3>>>0]),p+=x?8:4}return Et},ot={},or=()=>{if(!Ht){var l={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},p;for(p in ot)ot[p]===void 0?delete l[p]:l[p]=ot[p];var b=[];for(p in l)b.push(`${p}=${l[p]}`);Ht=b}return Ht},Ht,Ye=[null,[],[]],yn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return b=>crypto.getRandomValues(b);if(h)try{var l=ko("crypto");if(l.randomFillSync)return b=>l.randomFillSync(b);var p=l.randomBytes;return b=>(b.set(p(b.byteLength)),b)}catch{}he("initRandomDevice")},Oe=l=>(Oe=yn())(l),ar=[31,29,31,30,31,30,31,31,30,31,30,31],Gt=[31,28,31,30,31,30,31,31,30,31,30,31];function ir(l){var p=Array(rr(l)+1);return Vt(l,p,0,p.length),p}function Tr(l,p,b,x){function O(k,de,Se){for(k=typeof k=="number"?k.toString():k||"";k.length<de;)k=Se[0]+k;return k}function W(k,de){return O(k,de,"0")}function L(k,de){function Se(Ur){return 0>Ur?-1:0<Ur?1:0}var $t;return($t=Se(k.getFullYear()-de.getFullYear()))===0&&($t=Se(k.getMonth()-de.getMonth()))===0&&($t=Se(k.getDate()-de.getDate())),$t}function te(k){switch(k.getDay()){case 0:return new Date(k.getFullYear()-1,11,29);case 1:return k;case 2:return new Date(k.getFullYear(),0,3);case 3:return new Date(k.getFullYear(),0,2);case 4:return new Date(k.getFullYear(),0,1);case 5:return new Date(k.getFullYear()-1,11,31);case 6:return new Date(k.getFullYear()-1,11,30)}}function ee(k){var de=k.Ha;for(k=new Date(new Date(k.Ia+1900,0,1).getTime());0<de;){var Se=k.getMonth(),$t=(_t(k.getFullYear())?ar:Gt)[Se];if(de>$t-k.getDate())de-=$t-k.getDate()+1,k.setDate(1),11>Se?k.setMonth(Se+1):(k.setMonth(0),k.setFullYear(k.getFullYear()+1));else{k.setDate(k.getDate()+de);break}}return Se=new Date(k.getFullYear()+1,0,4),de=te(new Date(k.getFullYear(),0,4)),Se=te(Se),0>=L(de,k)?0>=L(Se,k)?k.getFullYear()+1:k.getFullYear():k.getFullYear()-1}l>>>=0,p>>>=0,b>>>=0,x>>>=0;var ue=H[x+40>>>2>>>0];x={eb:T[x>>>2>>>0],cb:T[x+4>>>2>>>0],La:T[x+8>>>2>>>0],Pa:T[x+12>>>2>>>0],Ma:T[x+16>>>2>>>0],Ia:T[x+20>>>2>>>0],Ga:T[x+24>>>2>>>0],Ha:T[x+28>>>2>>>0],hb:T[x+32>>>2>>>0],bb:T[x+36>>>2>>>0],fb:ue?qe(ue):""},b=qe(b),ue={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var le in ue)b=b.replace(new RegExp(le,"g"),ue[le]);var ve="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ie="January February March April May June July August September October November December".split(" ");ue={"%a":k=>ve[k.Ga].substring(0,3),"%A":k=>ve[k.Ga],"%b":k=>Ie[k.Ma].substring(0,3),"%B":k=>Ie[k.Ma],"%C":k=>W((k.Ia+1900)/100|0,2),"%d":k=>W(k.Pa,2),"%e":k=>O(k.Pa,2," "),"%g":k=>ee(k).toString().substring(2),"%G":k=>ee(k),"%H":k=>W(k.La,2),"%I":k=>(k=k.La,k==0?k=12:12<k&&(k-=12),W(k,2)),"%j":k=>{for(var de=0,Se=0;Se<=k.Ma-1;de+=(_t(k.Ia+1900)?ar:Gt)[Se++]);return W(k.Pa+de,3)},"%m":k=>W(k.Ma+1,2),"%M":k=>W(k.cb,2),"%n":()=>`\n`,"%p":k=>0<=k.La&&12>k.La?"AM":"PM","%S":k=>W(k.eb,2),"%t":()=>"\t","%u":k=>k.Ga||7,"%U":k=>W(Math.floor((k.Ha+7-k.Ga)/7),2),"%V":k=>{var de=Math.floor((k.Ha+7-(k.Ga+6)%7)/7);if(2>=(k.Ga+371-k.Ha-2)%7&&de++,de)de==53&&(Se=(k.Ga+371-k.Ha)%7,Se==4||Se==3&&_t(k.Ia)||(de=1));else{de=52;var Se=(k.Ga+7-k.Ha-1)%7;(Se==4||Se==5&&_t(k.Ia%400-1))&&de++}return W(de,2)},"%w":k=>k.Ga,"%W":k=>W(Math.floor((k.Ha+7-(k.Ga+6)%7)/7),2),"%y":k=>(k.Ia+1900).toString().substring(2),"%Y":k=>k.Ia+1900,"%z":k=>{k=k.bb;var de=0<=k;return k=Math.abs(k)/60,(de?"+":"-")+("0000"+(k/60*100+k%60)).slice(-4)},"%Z":k=>k.fb,"%%":()=>"%"},b=b.replace(/%%/g,"\\0\\0");for(le in ue)b.includes(le)&&(b=b.replace(new RegExp(le,"g"),ue[le](x)));return b=b.replace(/\\0\\0/g,"%"),le=ir(b),le.length>p?0:(R.set(le,l>>>0),le.length-1)}var Ot=l=>{try{l()}catch(p){he(p)}};function bn(){var l=oe,p={};for(let[b,x]of Object.entries(l))p[b]=typeof x=="function"?function(){Lt.push(b);try{return x.apply(null,arguments)}finally{A||(Lt.pop(),Je&&ne===1&&Lt.length===0&&(ne=0,Ot(vt),typeof Fibers<"u"&&Fibers.ib()))}}:x;return p}var ne=0,Je=null,sr=0,Lt=[],ur={},Er={},Or=0,Ft=null,Pr=[];function kr(){return new Promise((l,p)=>{Ft={resolve:l,reject:p}})}function lr(){var l=jt(65548),p=l+12;H[l>>>2>>>0]=p,H[l+4>>>2>>>0]=p+65536,p=Lt[0];var b=ur[p];return b===void 0&&(b=Or++,ur[p]=b,Er[b]=p),T[l+8>>>2>>>0]=b,l}function Br(l){if(!A){if(ne===0){var p=!1,b=!1;l((x=0)=>{if(!A&&(sr=x,p=!0,b)){ne=2,Ot(()=>gr(Je)),typeof Browser<"u"&&Browser.Oa.Va&&Browser.Oa.resume(),x=!1;try{var O=(0,oe[Er[T[Je+8>>>2>>>0]]])()}catch(te){O=te,x=!0}var W=!1;if(!Je){var L=Ft;L&&(Ft=null,(x?L.reject:L.resolve)(O),W=!0)}if(x&&!W)throw O}}),b=!0,p||(ne=1,Je=lr(),typeof Browser<"u"&&Browser.Oa.Va&&Browser.Oa.pause(),Ot(()=>Kt(Je)))}else ne===2?(ne=0,Ot(yr),mr(Je),Je=null,Pr.forEach(x=>{if(!A)try{x();try{z=z=x=z,r.onExit?.(x),A=!0,d(x,new Ue(x))}catch(O){O instanceof Ue||O=="unwind"||d(1,O)}}catch(O){O instanceof Ue||O=="unwind"||d(1,O)}})):he(`invalid state: ${ne}`);return sr}}function Rr(l){return Br(p=>{l().then(p)})}var bt=[],Xe,wt,dr=[],cr=(l,p)=>{if(!wt){wt=new WeakMap;var b=Xe.length;if(wt)for(var x=0;x<0+b;x++){var O=x,W=bt[O];W||(O>=bt.length&&(bt.length=O+1),bt[O]=W=Xe.get(O)),(O=W)&&wt.set(O,x)}}if(b=wt.get(l)||0)return b;if(dr.length)b=dr.pop();else{try{Xe.grow(1)}catch(te){throw te instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":te}b=Xe.length-1}try{x=b,Xe.set(x,l),bt[x]=Xe.get(x)}catch(te){if(!(te instanceof TypeError))throw te;if(typeof WebAssembly.Function=="function"){x=WebAssembly.Function,O={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},W={parameters:[],results:p[0]=="v"?[]:[O[p[0]]]};for(var L=1;L<p.length;++L)W.parameters.push(O[p[L]]);p=new x(W,l)}else{for(x=[1],O=p.slice(0,1),p=p.slice(1),W={i:127,p:127,j:126,f:125,d:124,e:111},x.push(96),L=p.length,128>L?x.push(L):x.push(L%128|128,L>>7),L=0;L<p.length;++L)x.push(W[p[L]]);O=="v"?x.push(0):x.push(1,W[O]),p=[0,97,115,109,1,0,0,0,1],O=x.length,128>O?p.push(O):p.push(O%128|128,O>>7),p.push.apply(p,x),p.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),p=new WebAssembly.Module(new Uint8Array(p)),p=new WebAssembly.Instance(p,{e:{f:l}}).exports.f}x=b,Xe.set(x,p),bt[x]=Xe.get(x)}return wt.set(l,b),b},Dr={n:function(l,p,b){return Rr(async()=>{await r.Xa(l,p,b)})},a:function(l,p,b){throw l>>>=0,new St(l).Ra(p>>>0,b>>>0),nt=l,zt++,nt},g:function(){return 0},M:function(){},C:function(){},E:function(){},v:function(){return 0},K:function(){},F:function(){},J:function(){},m:function(){},D:function(){},A:function(){},L:function(){},B:function(){},N:()=>1,q:function(l,p,b){l=p+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*p:NaN,b>>>=0,l=new Date(1e3*l),T[b>>>2>>>0]=l.getUTCSeconds(),T[b+4>>>2>>>0]=l.getUTCMinutes(),T[b+8>>>2>>>0]=l.getUTCHours(),T[b+12>>>2>>>0]=l.getUTCDate(),T[b+16>>>2>>>0]=l.getUTCMonth(),T[b+20>>>2>>>0]=l.getUTCFullYear()-1900,T[b+24>>>2>>>0]=l.getUTCDay(),T[b+28>>>2>>>0]=(l.getTime()-Date.UTC(l.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},r:function(l,p,b){l=p+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*p:NaN,b>>>=0,l=new Date(1e3*l),T[b>>>2>>>0]=l.getSeconds(),T[b+4>>>2>>>0]=l.getMinutes(),T[b+8>>>2>>>0]=l.getHours(),T[b+12>>>2>>>0]=l.getDate(),T[b+16>>>2>>>0]=l.getMonth(),T[b+20>>>2>>>0]=l.getFullYear()-1900,T[b+24>>>2>>>0]=l.getDay(),T[b+28>>>2>>>0]=(_t(l.getFullYear())?yt:Nt)[l.getMonth()]+l.getDate()-1|0,T[b+36>>>2>>>0]=-(60*l.getTimezoneOffset()),p=new Date(l.getFullYear(),6,1).getTimezoneOffset();var x=new Date(l.getFullYear(),0,1).getTimezoneOffset();T[b+32>>>2>>>0]=(p!=x&&l.getTimezoneOffset()==Math.min(x,p))|0},s:function(l){l>>>=0;var p=new Date(T[l+20>>>2>>>0]+1900,T[l+16>>>2>>>0],T[l+12>>>2>>>0],T[l+8>>>2>>>0],T[l+4>>>2>>>0],T[l>>>2>>>0],0),b=T[l+32>>>2>>>0],x=p.getTimezoneOffset(),O=new Date(p.getFullYear(),6,1).getTimezoneOffset(),W=new Date(p.getFullYear(),0,1).getTimezoneOffset(),L=Math.min(W,O);return 0>b?T[l+32>>>2>>>0]=+(O!=W&&L==x):0<b!=(L==x)&&(O=Math.max(W,O),p.setTime(p.getTime()+6e4*((0<b?L:O)-x))),T[l+24>>>2>>>0]=p.getDay(),T[l+28>>>2>>>0]=(_t(p.getFullYear())?yt:Nt)[p.getMonth()]+p.getDate()-1|0,T[l>>>2>>>0]=p.getSeconds(),T[l+4>>>2>>>0]=p.getMinutes(),T[l+8>>>2>>>0]=p.getHours(),T[l+12>>>2>>>0]=p.getDate(),T[l+16>>>2>>>0]=p.getMonth(),T[l+20>>>2>>>0]=p.getYear(),l=p.getTime(),isNaN(l)?(T[pr()>>>2>>>0]=61,l=-1):l/=1e3,fr((ze=l,1<=+Math.abs(ze)?0<ze?+Math.floor(ze/4294967296)>>>0:~~+Math.ceil((ze-+(~~ze>>>0))/4294967296)>>>0:0)),l>>>0},o:function(){return-52},p:function(){},y:function(l,p,b){function x(ee){return(ee=ee.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ee[1]:"GMT"}b>>>=0;var O=new Date().getFullYear(),W=new Date(O,0,1),L=new Date(O,6,1);O=W.getTimezoneOffset();var te=L.getTimezoneOffset();H[l>>>0>>>2>>>0]=60*Math.max(O,te),T[p>>>0>>>2>>>0]=+(O!=te),l=x(W),p=x(L),l=Wt(l),p=Wt(p),te<O?(H[b>>>2>>>0]=l,H[b+4>>>2>>>0]=p):(H[b>>>2>>>0]=p,H[b+4>>>2>>>0]=l)},e:()=>{he("")},b:function(l,p,b){return l>>>=0,p=nr(p>>>0,b>>>0),Ve[l].apply(null,p)},j:function(l,p,b){return l>>>=0,p=nr(p>>>0,b>>>0),Ve[l].apply(null,p)},h:()=>Date.now(),z:function(){return 4294901760},c:()=>performance.now(),I:function(l,p,b){return p>>>=0,N.copyWithin(l>>>0>>>0,p>>>0,p+(b>>>0)>>>0)},w:function(l){l>>>=0;var p=N.length;if(4294901760<l)return!1;for(var b=1;4>=b;b*=2){var x=p*(1+.2/b);x=Math.min(x,l+100663296);var O=Math;x=Math.max(l,x);e:{O=(O.min.call(O,4294901760,x+(65536-x%65536)%65536)-P.buffer.byteLength+65535)/65536;try{P.grow(O),K();var W=1;break e}catch{}W=void 0}if(W)return!0}return!1},G:function(l,p){l>>>=0,p>>>=0;var b=0;return or().forEach((x,O)=>{var W=p+b;for(O=H[l+4*O>>>2>>>0]=W,W=0;W<x.length;++W)R[O++>>>0>>>0]=x.charCodeAt(W);R[O>>>0>>>0]=0,b+=x.length+1}),0},H:function(l,p){l>>>=0,p>>>=0;var b=or();H[l>>>2>>>0]=b.length;var x=0;return b.forEach(O=>x+=O.length+1),H[p>>>2>>>0]=x,0},f:()=>52,l:function(){return 52},t:function(){return 70},k:function(l,p,b,x){p>>>=0,b>>>=0,x>>>=0;for(var O=0,W=0;W<b;W++){var L=H[p>>>2>>>0],te=H[p+4>>>2>>>0];p+=8;for(var ee=0;ee<te;ee++){var ue=N[L+ee>>>0],le=Ye[l];ue===0||ue===10?((l===1?S:_)(xt(le,0)),le.length=0):le.push(ue)}O+=te}return H[x>>>2>>>0]=O,0},u:function(l,p){return l>>>=0,Oe(N.subarray(l>>>0,l+(p>>>0)>>>0)),0},x:Tr,d:function(l,p,b,x){return Tr(l>>>0,p>>>0,b>>>0,x>>>0)},i:function(l,p,b,x){let O=Xe.length;l=new Uint8Array(N.slice(l+p,l+b));try{var W=new WebAssembly.Module(l),L=new WebAssembly.Instance(W,{env:{memory:P}}),te;for(te in L.exports)cr(L.exports[te]);return O<Xe.length?O:x}catch(ee){return console.log(ee),x}}},oe=function(){function l(b){return oe=b.exports,oe=bn(),oe=Mr(),P=oe.O,K(),Xe=oe.wa,X.unshift(oe.P),Pe--,Pe==0&&(fe!==null&&(clearInterval(fe),fe=null),Ce&&(b=Ce,Ce=null,b())),oe}var p={a:Dr};if(Pe++,r.instantiateWasm)try{return r.instantiateWasm(p,l)}catch(b){_(`Module.instantiateWasm callback failed with error: ${b}`),n(b)}return rt(p,function(b){l(b.instance)}).catch(n),{}}();r._OrtInit=(l,p)=>(r._OrtInit=oe.Q)(l,p),r._OrtGetLastError=(l,p)=>(r._OrtGetLastError=oe.R)(l,p),r._OrtCreateSessionOptions=(l,p,b,x,O,W,L,te,ee,ue)=>(r._OrtCreateSessionOptions=oe.S)(l,p,b,x,O,W,L,te,ee,ue),r._OrtAppendExecutionProvider=(l,p)=>(r._OrtAppendExecutionProvider=oe.T)(l,p),r._OrtAddFreeDimensionOverride=(l,p,b)=>(r._OrtAddFreeDimensionOverride=oe.U)(l,p,b),r._OrtAddSessionConfigEntry=(l,p,b)=>(r._OrtAddSessionConfigEntry=oe.V)(l,p,b),r._OrtReleaseSessionOptions=l=>(r._OrtReleaseSessionOptions=oe.W)(l),r._OrtCreateSession=(l,p,b)=>(r._OrtCreateSession=oe.X)(l,p,b),r._OrtReleaseSession=l=>(r._OrtReleaseSession=oe.Y)(l),r._OrtGetInputOutputCount=(l,p,b)=>(r._OrtGetInputOutputCount=oe.Z)(l,p,b),r._OrtGetInputName=(l,p)=>(r._OrtGetInputName=oe._)(l,p),r._OrtGetOutputName=(l,p)=>(r._OrtGetOutputName=oe.$)(l,p),r._OrtFree=l=>(r._OrtFree=oe.aa)(l),r._OrtCreateTensor=(l,p,b,x,O,W)=>(r._OrtCreateTensor=oe.ba)(l,p,b,x,O,W),r._OrtGetTensorData=(l,p,b,x,O)=>(r._OrtGetTensorData=oe.ca)(l,p,b,x,O),r._OrtReleaseTensor=l=>(r._OrtReleaseTensor=oe.da)(l),r._OrtCreateRunOptions=(l,p,b,x)=>(r._OrtCreateRunOptions=oe.ea)(l,p,b,x),r._OrtAddRunConfigEntry=(l,p,b)=>(r._OrtAddRunConfigEntry=oe.fa)(l,p,b),r._OrtReleaseRunOptions=l=>(r._OrtReleaseRunOptions=oe.ga)(l),r._OrtCreateBinding=l=>(r._OrtCreateBinding=oe.ha)(l),r._OrtBindInput=(l,p,b)=>(r._OrtBindInput=oe.ia)(l,p,b),r._OrtBindOutput=(l,p,b,x)=>(r._OrtBindOutput=oe.ja)(l,p,b,x),r._OrtClearBoundOutputs=l=>(r._OrtClearBoundOutputs=oe.ka)(l),r._OrtReleaseBinding=l=>(r._OrtReleaseBinding=oe.la)(l),r._OrtRunWithBinding=(l,p,b,x,O)=>(r._OrtRunWithBinding=oe.ma)(l,p,b,x,O),r._OrtRun=(l,p,b,x,O,W,L,te)=>(r._OrtRun=oe.na)(l,p,b,x,O,W,L,te),r._OrtEndProfiling=l=>(r._OrtEndProfiling=oe.oa)(l),r._OrtConfigure=(l,p)=>(r._OrtConfigure=oe.pa)(l,p),r._OrtAuth=(l,p)=>(r._OrtAuth=oe.qa)(l,p),r._JsepOutput=(l,p,b)=>(r._JsepOutput=oe.ra)(l,p,b),r._JsepGetNodeName=l=>(r._JsepGetNodeName=oe.sa)(l);var pr=()=>(pr=oe.ta)(),jt=r._malloc=l=>(jt=r._malloc=oe.ua)(l),mr=r._free=l=>(mr=r._free=oe.va)(l),fr=l=>(fr=oe.xa)(l),hr=()=>(hr=oe.ya)(),qt=l=>(qt=oe.za)(l),Pt=l=>(Pt=oe.Aa)(l),Kt=l=>(Kt=oe.Ca)(l),vt=()=>(vt=oe.Da)(),gr=l=>(gr=oe.Ea)(l),yr=()=>(yr=oe.Fa)();r.___start_em_js=910124,r.___stop_em_js=910897;function Mr(){var l=oe;l=Object.assign({},l);var p=x=>()=>x()>>>0,b=x=>O=>x(O)>>>0;return l.ta=p(l.ta),l.ua=b(l.ua),l.ya=p(l.ya),l.Aa=b(l.Aa),l}r.stackAlloc=Pt,r.stackSave=hr,r.stackRestore=qt,r.addFunction=cr,r.UTF8ToString=qe,r.stringToUTF8=(l,p,b)=>Vt(l,N,p,b),r.lengthBytesUTF8=rr;var kt;Ce=function l(){kt||br(),kt||(Ce=l)};function br(){if(!(0<Pe)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var l=r.preRun.shift();Q.unshift(l)}for(;0<Q.length;)Q.shift()(r);if(!(0<Pe||kt||(kt=!0,r.calledRun=!0,A))){for(;0<X.length;)X.shift()(r);for(o(r);0<Ee.length;)Ee.shift()(r)}}}return br(),t.ready}})();typeof Do=="object"&&typeof On=="object"?On.exports=Ro:typeof define=="function"&&define.amd&&define([],()=>Ro)});var Uo=wr(()=>{});var zo=wr(()=>{});var Vo={};Gr(Vo,{cpus:()=>sl});var sl,No=q(()=>{sl=void 0});var Go=wr((Ho,Pn)=>{"use strict";var Wo=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(e=e||__filename),function(t={}){function r(){return Q.buffer!=fe.buffer&&Ge(),fe}function o(){return Q.buffer!=fe.buffer&&Ge(),Ce}function n(){return Q.buffer!=fe.buffer&&Ge(),he}function s(){return Q.buffer!=fe.buffer&&Ge(),ye}function u(){return Q.buffer!=fe.buffer&&Ge(),We}function d(){return Q.buffer!=fe.buffer&&Ge(),Me}var a=t,m,h;a.ready=new Promise((i,c)=>{m=i,h=c}),a.mountExternalData=(i,c)=>{(a.ib||(a.ib=new Map)).set(i,c)},a.unmountExternalData=()=>{delete a.ib},a.jsepInit=(i,c,f,$,E,D,U,J)=>{a.Rb=i,a.Bb=c,a.Db=f,a.pb=$,a.Cb=E,a.Ua=D,a.Eb=U,a.Fb=J,c=(ae,se,pe)=>(...xe)=>{let Te=ut,B=se?.();xe=ae(...xe);let me=se?.();return B!==me&&(ae=me,pe(B),se=pe=null),ut!=Te?ju():xe},f=ae=>async(...se)=>{try{if(a.hb)throw Error("Session already started");let pe=a.hb={Hb:se[0],errors:[]},xe=await ae(...se);if(a.hb!==pe)throw Error("Session mismatch");i.flush();let Te=pe.errors;if(0<Te.length){let B=await Promise.all(Te);if(B=B.filter(me=>me),0<B.length)throw Error(B.join(`\n`))}return xe}finally{a.hb=null}},a._OrtRun=f(c(a._OrtRun,()=>a._OrtRun,ae=>a._OrtRun=ae)),a._OrtRunWithBinding=f(c(a._OrtRunWithBinding,()=>a._OrtRunWithBinding,ae=>a._OrtRunWithBinding=ae)),a._OrtBindInput=c(a._OrtBindInput,()=>a._OrtBindInput,ae=>a._OrtBindInput=ae),a.jsepRegisterBuffer=(ae,se,pe,xe)=>i.registerBuffer(ae,se,pe,xe),a.jsepUnregisterBuffers=ae=>{i.unregisterBuffers(ae)},a.jsepGetBuffer=ae=>i.getBuffer(ae),a.jsepCreateDownloader=(ae,se,pe)=>i.createDownloader(ae,se,pe)};var g=Object.assign({},a),w="./this.program",v=(i,c)=>{throw c},y=typeof window=="object",C=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S=a.ENVIRONMENT_IS_PTHREAD||!1,_="";function P(i){return a.locateFile?a.locateFile(i,_):_+i}var A,z,R;if(I){var N=(An(),Jt(In)),T=(En(),Jt(Tn));_=C?T.dirname(_)+"/":__dirname+"/",A=(c,f)=>(c=Tt(c)?new URL(c):T.normalize(c),N.readFileSync(c,f?void 0:"utf8")),R=c=>(c=A(c,!0),c.buffer||(c=new Uint8Array(c)),c),z=(c,f,$,E=!0)=>{c=Tt(c)?new URL(c):T.normalize(c),N.readFile(c,E?void 0:"utf8",(D,U)=>{D?$(D):f(E?U.buffer:U)})},!a.thisProgram&&1<process.argv.length&&(w=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),v=(c,f)=>{throw process.exitCode=c,f},a.inspect=()=>"[Emscripten Module object]";let i;try{i=Uo()}catch(c){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),c}global.Worker=i.Worker}else(y||C)&&(C?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),typeof e<"u"&&e&&(_=e),_.indexOf("blob:")!==0?_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):_="",I||(A=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.send(null),c.responseText},C&&(R=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),z=(i,c,f)=>{var $=new XMLHttpRequest;$.open("GET",i,!0),$.responseType="arraybuffer",$.onload=()=>{$.status==200||$.status==0&&$.response?c($.response):f()},$.onerror=f,$.send(null)}));I&&typeof performance>"u"&&(global.performance=zo().performance);var H=console.log.bind(console),ie=console.error.bind(console);I&&(H=(...i)=>N.writeSync(1,i.join(" ")+`\n`),ie=(...i)=>N.writeSync(2,i.join(" ")+`\n`));var Z=H,K=ie;Object.assign(a,g),g=null,typeof WebAssembly!="object"&&nt("no native wasm support detected");var Q,X,Ee=!1,Pe,fe,Ce,he,ye,We,Me;function Ge(){var i=Q.buffer;a.HEAP8=fe=new Int8Array(i),a.HEAP16=new Int16Array(i),a.HEAPU8=Ce=new Uint8Array(i),a.HEAPU16=new Uint16Array(i),a.HEAP32=he=new Int32Array(i),a.HEAPU32=ye=new Uint32Array(i),a.HEAPF32=We=new Float32Array(i),a.HEAPF64=Me=new Float64Array(i)}var G=16777216;if(S)Q=a.wasmMemory;else if(a.wasmMemory)Q=a.wasmMemory;else if(Q=new WebAssembly.Memory({initial:G/65536,maximum:65536,shared:!0}),!(Q.buffer instanceof SharedArrayBuffer))throw K("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),I&&K("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ge(),G=Q.buffer.byteLength;var re=[],be=[],rt=[],ze=0,Ve=null,Ue=null;function St(){if(ze--,ze==0&&(Ve!==null&&(clearInterval(Ve),Ve=null),Ue)){var i=Ue;Ue=null,i()}}function nt(i){throw i="Aborted("+i+")",K(i),Ee=!0,Pe=1,i=new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info."),h(i),i}var zt=i=>i.startsWith("data:application/octet-stream;base64,"),Tt=i=>i.startsWith("file://"),xt;xt="ort-wasm-simd-threaded.wasm",zt(xt)||(xt=P(xt));function qe(i){if(R)return R(i);throw"both async and sync fetching of the wasm failed"}function rr(i){if(y||C){if(typeof fetch=="function"&&!Tt(i))return fetch(i,{credentials:"same-origin"}).then(c=>{if(!c.ok)throw"failed to load wasm binary file at \'"+i+"\'";return c.arrayBuffer()}).catch(()=>qe(i));if(z)return new Promise((c,f)=>{z(i,$=>c(new Uint8Array($)),f)})}return Promise.resolve().then(()=>qe(i))}function Vt(i,c,f){return rr(i).then($=>WebAssembly.instantiate($,c)).then($=>$).then(f,$=>{K(`failed to asynchronously prepare wasm: ${$}`),nt($)})}function _t(i,c){var f=xt;return typeof WebAssembly.instantiateStreaming!="function"||zt(f)||Tt(f)||I||typeof fetch!="function"?Vt(f,i,c):fetch(f,{credentials:"same-origin"}).then($=>WebAssembly.instantiateStreaming($,i).then(c,function(E){return K(`wasm streaming compile failed: ${E}`),K("falling back to ArrayBuffer instantiation"),Vt(f,i,c)}))}var yt,Nt={902596:(i,c,f,$)=>{if(typeof a>"u"||!a.ib)return 1;if(i=Ye(i>>>0),i.startsWith("./")&&(i=i.substring(2)),i=a.ib.get(i),!i)return 2;if(c>>>=0,f>>>=0,$>>>=0,c+f>i.byteLength)return 3;try{return o().set(i.subarray(c,c+f),$>>>0),0}catch{return 4}},903097:i=>a.Bb(i),903130:i=>a.Db(i),903162:(i,c,f)=>{a.pb(i,c,f,!0)},903201:(i,c,f)=>{a.pb(i,c,f)},903234:i=>{a.Ua("Abs",i,void 0)},903285:i=>{a.Ua("Neg",i,void 0)},903336:i=>{a.Ua("Floor",i,void 0)},903389:i=>{a.Ua("Ceil",i,void 0)},903441:i=>{a.Ua("Reciprocal",i,void 0)},903499:i=>{a.Ua("Sqrt",i,void 0)},903551:i=>{a.Ua("Exp",i,void 0)},903602:i=>{a.Ua("Erf",i,void 0)},903653:i=>{a.Ua("Sigmoid",i,void 0)},903708:i=>{a.Ua("Log",i,void 0)},903759:i=>{a.Ua("Sin",i,void 0)},903810:i=>{a.Ua("Cos",i,void 0)},903861:i=>{a.Ua("Tan",i,void 0)},903912:i=>{a.Ua("Asin",i,void 0)},903964:i=>{a.Ua("Acos",i,void 0)},904016:i=>{a.Ua("Atan",i,void 0)},904068:i=>{a.Ua("Sinh",i,void 0)},904120:i=>{a.Ua("Cosh",i,void 0)},904172:i=>{a.Ua("Asinh",i,void 0)},904225:i=>{a.Ua("Acosh",i,void 0)},904278:i=>{a.Ua("Atanh",i,void 0)},904331:i=>{a.Ua("Tanh",i,void 0)},904383:i=>{a.Ua("Not",i,void 0)},904434:(i,c,f)=>{a.Ua("Clip",i,{min:c,max:f})},904503:i=>{a.Ua("Clip",i,void 0)},904555:(i,c)=>{a.Ua("Elu",i,{alpha:c})},904613:i=>{a.Ua("Relu",i,void 0)},904665:(i,c)=>{a.Ua("LeakyRelu",i,{alpha:c})},904729:(i,c)=>{a.Ua("ThresholdedRelu",i,{alpha:c})},904799:(i,c)=>{a.Ua("Cast",i,{to:c})},904857:i=>{a.Ua("Add",i,void 0)},904908:i=>{a.Ua("Sub",i,void 0)},904959:i=>{a.Ua("Mul",i,void 0)},905010:i=>{a.Ua("Div",i,void 0)},905061:i=>{a.Ua("Pow",i,void 0)},905112:i=>{a.Ua("Equal",i,void 0)},905165:i=>{a.Ua("Greater",i,void 0)},905220:i=>{a.Ua("GreaterOrEqual",i,void 0)},905282:i=>{a.Ua("Less",i,void 0)},905334:i=>{a.Ua("LessOrEqual",i,void 0)},905393:(i,c,f,$,E)=>{a.Ua("ReduceMean",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},905552:(i,c,f,$,E)=>{a.Ua("ReduceMax",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},905710:(i,c,f,$,E)=>{a.Ua("ReduceMin",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},905868:(i,c,f,$,E)=>{a.Ua("ReduceProd",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},906027:(i,c,f,$,E)=>{a.Ua("ReduceSum",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},906185:(i,c,f,$,E)=>{a.Ua("ReduceL1",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},906342:(i,c,f,$,E)=>{a.Ua("ReduceL2",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},906499:(i,c,f,$,E)=>{a.Ua("ReduceLogSum",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},906660:(i,c,f,$,E)=>{a.Ua("ReduceSumSquare",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},906824:(i,c,f,$,E)=>{a.Ua("ReduceLogSumExp",i,{keepDims:!!c,noopWithEmptyAxes:!!f,axes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},906988:i=>{a.Ua("Where",i,void 0)},907041:(i,c,f)=>{a.Ua("Transpose",i,{perm:c?Array.from(n().subarray(c>>>0,f>>>0)):[]})},907149:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B,me)=>{a.Ua("ConvTranspose",i,{format:ae?"NHWC":"NCHW",autoPad:c,dilations:[f],group:$,kernel_shape:[E],pads:[D,U],strides:[J],wIsConst:()=>!!r()[se>>>0],outputPadding:pe?Array.from(n().subarray(pe>>>0,xe>>>0)):[],outputShape:Te?Array.from(n().subarray(Te>>>0,B>>>0)):[],activation:Ye(me)})},907551:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B)=>{a.Ua("ConvTranspose",i,{format:J?"NHWC":"NCHW",autoPad:c,dilations:Array.from(n().subarray(f>>>0,(f>>>0)+2>>>0)),group:$,kernelShape:Array.from(n().subarray(E>>>0,(E>>>0)+2>>>0)),pads:Array.from(n().subarray(D>>>0,(D>>>0)+4>>>0)),strides:Array.from(n().subarray(U>>>0,(U>>>0)+2>>>0)),wIsConst:()=>!!r()[ae>>>0],outputPadding:se?Array.from(n().subarray(se>>>0,pe>>>0)):[],outputShape:xe?Array.from(n().subarray(xe>>>0,Te>>>0)):[],activation:Ye(B)})},908116:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B,me)=>{a.Ua("ConvTranspose",i,{format:ae?"NHWC":"NCHW",autoPad:c,dilations:[f],group:$,kernel_shape:[E],pads:[D,U],strides:[J],wIsConst:()=>!!r()[se>>>0],outputPadding:pe?Array.from(n().subarray(pe>>>0,xe>>>0)):[],outputShape:Te?Array.from(n().subarray(Te>>>0,B>>>0)):[],activation:Ye(me)})},908518:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B)=>{a.Ua("ConvTranspose",i,{format:J?"NHWC":"NCHW",autoPad:c,dilations:Array.from(n().subarray(f>>>0,(f>>>0)+2>>>0)),group:$,kernelShape:Array.from(n().subarray(E>>>0,(E>>>0)+2>>>0)),pads:Array.from(n().subarray(D>>>0,(D>>>0)+4>>>0)),strides:Array.from(n().subarray(U>>>0,(U>>>0)+2>>>0)),wIsConst:()=>!!r()[ae>>>0],outputPadding:se?Array.from(n().subarray(se>>>0,pe>>>0)):[],outputShape:xe?Array.from(n().subarray(xe>>>0,Te>>>0)):[],activation:Ye(B)})},909083:(i,c)=>{a.Ua("GlobalAveragePool",i,{format:c?"NHWC":"NCHW"})},909174:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B,me,_e)=>{a.Ua("AveragePool",i,{format:_e?"NHWC":"NCHW",auto_pad:c,ceil_mode:f,count_include_pad:$,storage_order:E,dilations:[D,U],kernel_shape:[J,ae],pads:[se,pe,xe,Te],strides:[B,me]})},909458:(i,c)=>{a.Ua("GlobalAveragePool",i,{format:c?"NHWC":"NCHW"})},909549:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B,me,_e)=>{a.Ua("AveragePool",i,{format:_e?"NHWC":"NCHW",auto_pad:c,ceil_mode:f,count_include_pad:$,storage_order:E,dilations:[D,U],kernel_shape:[J,ae],pads:[se,pe,xe,Te],strides:[B,me]})},909833:(i,c)=>{a.Ua("GlobalMaxPool",i,{format:c?"NHWC":"NCHW"})},909920:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B,me,_e)=>{a.Ua("MaxPool",i,{format:_e?"NHWC":"NCHW",auto_pad:c,ceil_mode:f,count_include_pad:$,storage_order:E,dilations:[D,U],kernel_shape:[J,ae],pads:[se,pe,xe,Te],strides:[B,me]})},910200:(i,c)=>{a.Ua("GlobalMaxPool",i,{format:c?"NHWC":"NCHW"})},910287:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B,me,_e)=>{a.Ua("MaxPool",i,{format:_e?"NHWC":"NCHW",auto_pad:c,ceil_mode:f,count_include_pad:$,storage_order:E,dilations:[D,U],kernel_shape:[J,ae],pads:[se,pe,xe,Te],strides:[B,me]})},910567:(i,c,f,$,E)=>{a.Ua("Gemm",i,{alpha:c,beta:f,transA:$,transB:E})},910671:i=>{a.Ua("MatMul",i,void 0)},910725:(i,c,f,$)=>{a.Ua("ArgMax",i,{keepDims:!!c,selectLastIndex:!!f,axis:$})},910833:(i,c,f,$)=>{a.Ua("ArgMin",i,{keepDims:!!c,selectLastIndex:!!f,axis:$})},910941:(i,c)=>{a.Ua("Softmax",i,{axis:c})},911004:(i,c)=>{a.Ua("Concat",i,{axis:c})},911064:(i,c,f,$,E)=>{a.Ua("Split",i,{axis:c,numOutputs:f,splitSizes:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},911204:i=>{a.Ua("Expand",i,void 0)},911258:(i,c)=>{a.Ua("Gather",i,{axis:Number(c)})},911329:(i,c)=>{a.Ua("GatherElements",i,{axis:Number(c)})},911408:(i,c,f,$,E,D,U,J,ae,se,pe)=>{a.Ua("Resize",i,{antialias:c,axes:f?Array.from(n().subarray(f>>>0,$>>>0)):[],coordinateTransformMode:Ye(E),cubicCoeffA:D,excludeOutside:U,extrapolationValue:J,keepAspectRatioPolicy:Ye(ae),mode:Ye(se),nearestMode:Ye(pe)})},911754:(i,c,f,$,E,D,U)=>{a.Ua("Slice",i,{starts:c?Array.from(n().subarray(c>>>0,f>>>0)):[],ends:$?Array.from(n().subarray($>>>0,E>>>0)):[],axes:D?Array.from(n().subarray(D>>>0,U>>>0)):[]})},911970:i=>{a.Ua("Tile",i,void 0)},912022:(i,c,f)=>{a.Ua("LayerNormalization",i,{axis:Number(c),epsilon:Number(f)})},912129:(i,c,f)=>{a.Ua("InstanceNormalization",i,{epsilon:c,format:f?"NHWC":"NCHW"})},912243:(i,c,f)=>{a.Ua("InstanceNormalization",i,{epsilon:c,format:f?"NHWC":"NCHW"})},912357:i=>{a.Ua("Range",i,void 0)},912410:(i,c)=>{a.Ua("Einsum",i,{equation:Ye(c)})},912491:(i,c,f,$,E)=>{a.Ua("Pad",i,{mode:c,value:f,pads:$?Array.from(n().subarray($>>>0,E>>>0)):[]})},912618:(i,c,f,$,E,D)=>{a.Ua("BatchNormalization",i,{epsilon:c,momentum:f,spatial:!!E,trainingMode:!!$,format:D?"NHWC":"NCHW"})},912787:(i,c,f,$,E,D)=>{a.Ua("BatchNormalization",i,{epsilon:c,momentum:f,spatial:!!E,trainingMode:!!$,format:D?"NHWC":"NCHW"})},912956:(i,c,f)=>{a.Ua("CumSum",i,{exclusive:Number(c),reverse:Number(f)})},913053:(i,c,f,$,E,D,U,J,ae)=>{a.Ua("Attention",i,{numHeads:c,isUnidirectional:f,maskFilterValue:$,scale:E,doRotary:D,qkvHiddenSizes:U?Array.from(n().subarray(Number(J)>>>0,Number(J)+U>>>0)):[],pastPresentShareBuffer:!!ae})},913325:i=>{a.Ua("Gelu",i,void 0)},913377:(i,c,f,$,E,D)=>{a.Ua("MultiHeadAttention",i,{numHeads:c,isUnidirectional:f,maskFilterValue:$,scale:E,doRotary:D})},913536:i=>{a.Ua("BiasAdd",i,void 0)},913591:i=>{a.Ua("BiasSplitGelu",i,void 0)},913652:(i,c)=>{a.Ua("SkipLayerNormalization",i,{epsilon:c})},913733:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te)=>{a.Ua("Conv",i,{format:ae?"NHWC":"NCHW",auto_pad:c,dilations:[f],group:$,kernel_shape:[E],pads:D?Array.from(n().subarray(D>>>0,U>>>0)):[],strides:[J],w_is_const:()=>!!r()[se>>>0],activation:Ye(pe),activation_params:xe?Array.from(u().subarray(xe>>>0,Te>>>0)):[]})},914103:(i,c,f,$,E,D,U,J,ae,se,pe,xe,Te,B,me,_e)=>{a.Ua("Conv",i,{format:xe?"NHWC":"NCHW",auto_pad:c,dilations:[f,$],group:E,kernel_shape:[D,U],pads:J?Array.from(n().subarray(J>>>0,ae>>>0)):[],strides:[se,pe],w_is_const:()=>!!r()[Te>>>0],activation:Ye(B),activation_params:me?Array.from(u().subarray(me>>>0,_e>>>0)):[]})},914494:i=>{a.Eb(i)},914528:(i,c)=>a.Fb(i,c,a.hb.Hb,a.hb.errors)};function Wt(i){this.name="ExitStatus",this.message=`Program terminated with exit(${i})`,this.status=i}var Et=i=>{i.terminate(),i.onmessage=()=>{}},nr=i=>{ne.cb.length==0&&(Ot(),ne.qb(ne.cb[0]));var c=ne.cb.pop();if(!c)return 6;ne.eb.push(c),ne.$a[i.bb]=c,c.bb=i.bb;var f={cmd:"run",start_routine:i.Ib,arg:i.xb,pthread_ptr:i.bb};return I&&c.unref(),c.postMessage(f,i.Ob),0},ot=0,or=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ht=(i,c,f)=>{c>>>=0;var $=c+f;for(f=c;i[f]&&!(f>=$);)++f;if(16<f-c&&i.buffer&&or)return or.decode(i.buffer instanceof SharedArrayBuffer?i.slice(c,f):i.subarray(c,f));for($="";c<f;){var E=i[c++];if(E&128){var D=i[c++]&63;if((E&224)==192)$+=String.fromCharCode((E&31)<<6|D);else{var U=i[c++]&63;E=(E&240)==224?(E&15)<<12|D<<6|U:(E&7)<<18|D<<12|U<<6|i[c++]&63,65536>E?$+=String.fromCharCode(E):(E-=65536,$+=String.fromCharCode(55296|E>>10,56320|E&1023))}}else $+=String.fromCharCode(E)}return $},Ye=(i,c)=>(i>>>=0)?Ht(o(),i,c):"",yn=i=>{var c=xn();return i=i(),Wr(c),i};function Oe(i,c){var f=arguments.length-2,$=arguments;return yn(()=>{for(var E=_n(8*f),D=E>>>3,U=0;U<f;U++){var J=$[2+U];d()[D+U>>>0]=J}return $o(i,f,E,c)})}function ar(i){if(S)return Oe(0,1,i);Pe=i,0<ot||(ne.Jb(),a.onExit?.(i),Ee=!0),v(i,new Wt(i))}var Gt=i=>{if(Pe=i,S)throw sr(i),"unwind";ar(i)},ir=i=>{i instanceof Wt||i=="unwind"||v(1,i)};function Tr(){for(var i=a.numThreads;i--;)Ot();re.unshift(()=>{ze++,bn(()=>St())})}function Ot(){var i=P("ort-wasm-simd-threaded.worker.js");i=new Worker(i),ne.cb.push(i)}function bn(i){S?i():Promise.all(ne.cb.map(ne.qb)).then(i)}var ne={cb:[],eb:[],ub:[],$a:{},mb(){S?(ne.receiveObjectTransfer=ne.Gb,ne.threadInitTLS=ne.tb,ne.setExitStatus=ne.sb):Tr()},sb:i=>Pe=i,Sb:["$terminateWorker"],Jb:()=>{for(var i of ne.eb)Et(i);for(i of ne.cb)Et(i);ne.cb=[],ne.eb=[],ne.$a=[]},rb:i=>{var c=i.bb;delete ne.$a[c],ne.cb.push(i),ne.eb.splice(ne.eb.indexOf(i),1),i.bb=0,$n(c)},Gb(){},tb(){ne.ub.forEach(i=>i())},qb:i=>new Promise(c=>{i.onmessage=D=>{D=D.data;var U=D.cmd;if(D.targetThread&&D.targetThread!=Nr()){var J=ne.$a[D.targetThread];J?J.postMessage(D,D.transferList):K(`Internal error! Worker sent a message "${U}" to target pthread ${D.targetThread}, but that thread no longer exists!`)}else U==="checkMailbox"?Pt():U==="spawnThread"?nr(D):U==="cleanupThread"?ne.rb(ne.$a[D.thread]):U==="killThread"?(D=D.thread,U=ne.$a[D],delete ne.$a[D],Et(U),$n(D),ne.eb.splice(ne.eb.indexOf(U),1),U.bb=0):U==="cancelThread"?ne.$a[D.thread].postMessage({cmd:"cancel"}):U==="loaded"?(i.loaded=!0,I&&!i.bb&&i.unref(),c(i)):U==="alert"?alert(`Thread ${D.threadId}: ${D.text}`):D.target==="setimmediate"?i.postMessage(D):U==="callHandler"?a[D.handler](...D.args):U&&K(`worker sent an unknown command ${U}`)},i.onerror=D=>{throw K(`worker sent an error! ${D.filename}:${D.lineno}: ${D.message}`),D},I&&(i.on("message",D=>i.onmessage({data:D})),i.on("error",D=>i.onerror(D)));var f=[],$=["onExit"],E;for(E of $)a.hasOwnProperty(E)&&f.push(E);i.postMessage({cmd:"load",handlers:f,urlOrBlob:a.mainScriptUrlOrBlob||e,wasmMemory:Q,wasmModule:X})})};a.PThread=ne;var Je=i=>{for(;0<i.length;)i.shift()(a)};a.establishStackSpace=()=>{var i=Nr(),c=s()[i+52>>>2>>>0];i=s()[i+56>>>2>>>0],_o(c,c-i),Wr(c)};function sr(i){if(S)return Oe(1,0,i);Gt(i)}a.invokeEntryPoint=(i,c)=>{i=Co.apply(null,[i,c]),0<ot?ne.sb(i):Sn(i)};function Lt(i){this.lb=i-24,this.yb=function(c){s()[this.lb+4>>>2>>>0]=c},this.wb=function(c){s()[this.lb+8>>>2>>>0]=c},this.mb=function(c,f){this.vb(),this.yb(c),this.wb(f)},this.vb=function(){s()[this.lb+16>>>2>>>0]=0}}var ur=0,Er=0;function Or(i,c,f,$){return S?Oe(2,1,i,c,f,$):Ft(i,c,f,$)}function Ft(i,c,f,$){if(i>>>=0,c>>>=0,f>>>=0,$>>>=0,typeof SharedArrayBuffer>"u")return K("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var E=[];return S&&E.length===0?Or(i,c,f,$):(i={Ib:f,bb:i,xb:$,Ob:E},S?(i.Qb="spawnThread",postMessage(i,E),0):nr(i))}function Pr(i,c,f){return S?Oe(3,1,i,c,f):0}function kr(i,c){if(S)return Oe(4,1,i,c)}var lr=i=>{for(var c=0,f=0;f<i.length;++f){var $=i.charCodeAt(f);127>=$?c++:2047>=$?c+=2:55296<=$&&57343>=$?(c+=4,++f):c+=3}return c},Br=(i,c,f,$)=>{if(f>>>=0,!(0<$))return 0;var E=f;$=f+$-1;for(var D=0;D<i.length;++D){var U=i.charCodeAt(D);if(55296<=U&&57343>=U){var J=i.charCodeAt(++D);U=65536+((U&1023)<<10)|J&1023}if(127>=U){if(f>=$)break;c[f++>>>0]=U}else{if(2047>=U){if(f+1>=$)break;c[f++>>>0]=192|U>>6}else{if(65535>=U){if(f+2>=$)break;c[f++>>>0]=224|U>>12}else{if(f+3>=$)break;c[f++>>>0]=240|U>>18,c[f++>>>0]=128|U>>12&63}c[f++>>>0]=128|U>>6&63}c[f++>>>0]=128|U&63}}return c[f>>>0]=0,f-E},Rr=(i,c,f)=>Br(i,o(),c,f);function bt(i,c){if(S)return Oe(5,1,i,c)}function Xe(i,c,f){if(S)return Oe(6,1,i,c,f)}function wt(i,c,f){return S?Oe(7,1,i,c,f):0}function dr(i,c){if(S)return Oe(8,1,i,c)}function cr(i,c,f){if(S)return Oe(9,1,i,c,f)}function Dr(i,c,f,$){if(S)return Oe(10,1,i,c,f,$)}function oe(i,c,f,$){if(S)return Oe(11,1,i,c,f,$)}function pr(i,c,f,$){if(S)return Oe(12,1,i,c,f,$)}function jt(i){if(S)return Oe(13,1,i)}function mr(i,c){if(S)return Oe(14,1,i,c)}function fr(i,c,f){if(S)return Oe(15,1,i,c,f)}var hr=()=>{if(!(0<ot))try{S?Sn(Pe):Gt(Pe)}catch(i){ir(i)}};function qt(i){i>>>=0,typeof Atomics.Pb=="function"&&(Atomics.Pb(n(),i>>>2,i).value.then(Pt),i+=128,Atomics.store(n(),i>>>2,1))}a.__emscripten_thread_mailbox_await=qt;var Pt=()=>{var i=Nr();if(i&&(qt(i),!Ee))try{So(),hr()}catch(c){ir(c)}};a.checkMailbox=Pt;var Kt=[],vt=i=>i%4===0&&(i%100!==0||i%400===0),gr=[0,31,60,91,121,152,182,213,244,274,305,335],yr=[0,31,59,90,120,151,181,212,243,273,304,334];function Mr(i,c,f,$,E,D,U,J){return S?Oe(16,1,i,c,f,$,E,D,U,J):-52}function kt(i,c,f,$,E,D,U){if(S)return Oe(17,1,i,c,f,$,E,D,U)}var br=i=>{var c=lr(i)+1,f=vn(c);return f&&Rr(i,f,c),f},l=[],p=(i,c)=>{l.length=0;for(var f;f=o()[i++>>>0];){var $=f!=105;$&=f!=112,c+=$&&c%8?4:0,l.push(f==112?s()[c>>>2>>>0]:f==105?n()[c>>>2>>>0]:d()[c>>>3>>>0]),c+=$?8:4}return l},b={},x=()=>{if(!O){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"},c;for(c in b)b[c]===void 0?delete i[c]:i[c]=b[c];var f=[];for(c in i)f.push(`${c}=${i[c]}`);O=f}return O},O;function W(i,c){if(S)return Oe(18,1,i,c);i>>>=0,c>>>=0;var f=0;return x().forEach(($,E)=>{var D=c+f;for(E=s()[i+4*E>>>2>>>0]=D,D=0;D<$.length;++D)r()[E++>>>0>>>0]=$.charCodeAt(D);r()[E>>>0>>>0]=0,f+=$.length+1}),0}function L(i,c){if(S)return Oe(19,1,i,c);i>>>=0,c>>>=0;var f=x();s()[i>>>2>>>0]=f.length;var $=0;return f.forEach(E=>$+=E.length+1),s()[c>>>2>>>0]=$,0}function te(i){return S?Oe(20,1,i):52}function ee(i,c,f,$){return S?Oe(21,1,i,c,f,$):52}function ue(i,c,f,$,E){return S?Oe(22,1,i,c,f,$,E):70}var le=[null,[],[]];function ve(i,c,f,$){if(S)return Oe(23,1,i,c,f,$);c>>>=0,f>>>=0,$>>>=0;for(var E=0,D=0;D<f;D++){var U=s()[c>>>2>>>0],J=s()[c+4>>>2>>>0];c+=8;for(var ae=0;ae<J;ae++){var se=o()[U+ae>>>0],pe=le[i];se===0||se===10?((i===1?Z:K)(Ht(pe,0)),pe.length=0):pe.push(se)}E+=J}return s()[$>>>2>>>0]=E,0}var Ie=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return f=>(f.set(crypto.getRandomValues(new Uint8Array(f.byteLength))),f);if(I)try{var i=ko("crypto");if(i.randomFillSync)return f=>i.randomFillSync(f);var c=i.randomBytes;return f=>(f.set(c(f.byteLength)),f)}catch{}nt("initRandomDevice")},k=i=>(k=Ie())(i),de=[31,29,31,30,31,30,31,31,30,31,30,31],Se=[31,28,31,30,31,30,31,31,30,31,30,31];function $t(i){var c=Array(lr(i)+1);return Br(i,c,0,c.length),c}var Ur=(i,c)=>{r().set(i,c>>>0)};function po(i,c,f,$){function E(B,me,_e){for(B=typeof B=="number"?B.toString():B||"";B.length<me;)B=_e[0]+B;return B}function D(B,me){return E(B,me,"0")}function U(B,me){function _e(Po){return 0>Po?-1:0<Po?1:0}var Bt;return(Bt=_e(B.getFullYear()-me.getFullYear()))===0&&(Bt=_e(B.getMonth()-me.getMonth()))===0&&(Bt=_e(B.getDate()-me.getDate())),Bt}function J(B){switch(B.getDay()){case 0:return new Date(B.getFullYear()-1,11,29);case 1:return B;case 2:return new Date(B.getFullYear(),0,3);case 3:return new Date(B.getFullYear(),0,2);case 4:return new Date(B.getFullYear(),0,1);case 5:return new Date(B.getFullYear()-1,11,31);case 6:return new Date(B.getFullYear()-1,11,30)}}function ae(B){var me=B.fb;for(B=new Date(new Date(B.gb+1900,0,1).getTime());0<me;){var _e=B.getMonth(),Bt=(vt(B.getFullYear())?de:Se)[_e];if(me>Bt-B.getDate())me-=Bt-B.getDate()+1,B.setDate(1),11>_e?B.setMonth(_e+1):(B.setMonth(0),B.setFullYear(B.getFullYear()+1));else{B.setDate(B.getDate()+me);break}}return _e=new Date(B.getFullYear()+1,0,4),me=J(new Date(B.getFullYear(),0,4)),_e=J(_e),0>=U(me,B)?0>=U(_e,B)?B.getFullYear()+1:B.getFullYear():B.getFullYear()-1}i>>>=0,c>>>=0,f>>>=0,$>>>=0;var se=s()[$+40>>>2>>>0];$={Mb:n()[$>>>2>>>0],Lb:n()[$+4>>>2>>>0],jb:n()[$+8>>>2>>>0],ob:n()[$+12>>>2>>>0],kb:n()[$+16>>>2>>>0],gb:n()[$+20>>>2>>>0],ab:n()[$+24>>>2>>>0],fb:n()[$+28>>>2>>>0],Tb:n()[$+32>>>2>>>0],Kb:n()[$+36>>>2>>>0],Nb:se?Ye(se):""},f=Ye(f),se={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var pe in se)f=f.replace(new RegExp(pe,"g"),se[pe]);var xe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Te="January February March April May June July August September October November December".split(" ");se={"%a":B=>xe[B.ab].substring(0,3),"%A":B=>xe[B.ab],"%b":B=>Te[B.kb].substring(0,3),"%B":B=>Te[B.kb],"%C":B=>D((B.gb+1900)/100|0,2),"%d":B=>D(B.ob,2),"%e":B=>E(B.ob,2," "),"%g":B=>ae(B).toString().substring(2),"%G":B=>ae(B),"%H":B=>D(B.jb,2),"%I":B=>(B=B.jb,B==0?B=12:12<B&&(B-=12),D(B,2)),"%j":B=>{for(var me=0,_e=0;_e<=B.kb-1;me+=(vt(B.gb+1900)?de:Se)[_e++]);return D(B.ob+me,3)},"%m":B=>D(B.kb+1,2),"%M":B=>D(B.Lb,2),"%n":()=>`\n`,"%p":B=>0<=B.jb&&12>B.jb?"AM":"PM","%S":B=>D(B.Mb,2),"%t":()=>"\t","%u":B=>B.ab||7,"%U":B=>D(Math.floor((B.fb+7-B.ab)/7),2),"%V":B=>{var me=Math.floor((B.fb+7-(B.ab+6)%7)/7);if(2>=(B.ab+371-B.fb-2)%7&&me++,me)me==53&&(_e=(B.ab+371-B.fb)%7,_e==4||_e==3&&vt(B.gb)||(me=1));else{me=52;var _e=(B.ab+7-B.fb-1)%7;(_e==4||_e==5&&vt(B.gb%400-1))&&me++}return D(me,2)},"%w":B=>B.ab,"%W":B=>D(Math.floor((B.fb+7-(B.ab+6)%7)/7),2),"%y":B=>(B.gb+1900).toString().substring(2),"%Y":B=>B.gb+1900,"%z":B=>{B=B.Kb;var me=0<=B;return B=Math.abs(B)/60,(me?"+":"-")+("0000"+(B/60*100+B%60)).slice(-4)},"%Z":B=>B.Nb,"%%":()=>"%"},f=f.replace(/%%/g,"\\0\\0");for(pe in se)f.includes(pe)&&(f=f.replace(new RegExp(pe,"g"),se[pe]($)));return f=f.replace(/\\0\\0/g,"%"),pe=$t(f),pe.length>c?0:(Ur(pe,i),pe.length-1)}var zr=i=>{try{i()}catch(c){nt(c)}};function Gu(){var i=Y,c={};for(let[f,$]of Object.entries(i))c[f]=typeof $=="function"?function(){Vr.push(f);try{return $.apply(null,arguments)}finally{Ee||(Vr.pop(),ut&&Ct===1&&Vr.length===0&&(Ct=0,ot+=1,zr(Ao),typeof Fibers<"u"&&Fibers.Ub()))}}:$;return c}var Ct=0,ut=null,mo=0,Vr=[],fo={},ho={},Lu=0,wn=null,Fu=[];function ju(){return new Promise((i,c)=>{wn={resolve:i,reject:c}})}function qu(){var i=vn(65548),c=i+12;s()[i>>>2>>>0]=c,s()[i+4>>>2>>>0]=c+65536,c=Vr[0];var f=fo[c];return f===void 0&&(f=Lu++,fo[c]=f,ho[f]=c),c=f,n()[i+8>>>2>>>0]=c,i}function Ku(){var i=n()[ut+8>>>2>>>0];return i=Y[ho[i]],--ot,i()}function Yu(i){if(!Ee){if(Ct===0){var c=!1,f=!1;i(($=0)=>{if(!Ee&&(mo=$,c=!0,f)){Ct=2,zr(()=>To(ut)),typeof Browser<"u"&&Browser.nb.Ab&&Browser.nb.resume(),$=!1;try{var E=Ku()}catch(J){E=J,$=!0}var D=!1;if(!ut){var U=wn;U&&(wn=null,($?U.reject:U.resolve)(E),D=!0)}if($&&!D)throw E}}),f=!0,c||(Ct=1,ut=qu(),typeof Browser<"u"&&Browser.nb.Ab&&Browser.nb.pause(),zr(()=>Io(ut)))}else Ct===2?(Ct=0,zr(Eo),wo(ut),ut=null,Fu.forEach($=>{if(!Ee)try{$(),hr()}catch(E){ir(E)}})):nt(`invalid state: ${Ct}`);return mo}}function Zu(i){return Yu(c=>{i().then(c)})}var Yt=[],at,Zt,go=[],yo=(i,c)=>{if(!Zt){Zt=new WeakMap;var f=at.length;if(Zt)for(var $=0;$<0+f;$++){var E=$,D=Yt[E];D||(E>=Yt.length&&(Yt.length=E+1),Yt[E]=D=at.get(E)),(E=D)&&Zt.set(E,$)}}if(f=Zt.get(i)||0)return f;if(go.length)f=go.pop();else{try{at.grow(1)}catch(J){throw J instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":J}f=at.length-1}try{$=f,at.set($,i),Yt[$]=at.get($)}catch(J){if(!(J instanceof TypeError))throw J;if(typeof WebAssembly.Function=="function"){$=WebAssembly.Function,E={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},D={parameters:[],results:c[0]=="v"?[]:[E[c[0]]]};for(var U=1;U<c.length;++U)D.parameters.push(E[c[U]]);c=new $(D,i)}else{for($=[1],E=c.slice(0,1),c=c.slice(1),D={i:127,p:127,j:126,f:125,d:124,e:111},$.push(96),U=c.length,128>U?$.push(U):$.push(U%128|128,U>>7),U=0;U<c.length;++U)$.push(D[c[U]]);E=="v"?$.push(0):$.push(1,D[E]),c=[0,97,115,109,1,0,0,0,1],E=$.length,128>E?c.push(E):c.push(E%128|128,E>>7),c.push.apply(c,$),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),c=new WebAssembly.Module(new Uint8Array(c)),c=new WebAssembly.Instance(c,{e:{f:i}}).exports.f}$=f,at.set($,c),Yt[$]=at.get($)}return Zt.set(i,f),f};ne.mb();var Ju=[ar,sr,Or,Pr,kr,bt,Xe,wt,dr,cr,Dr,oe,pr,jt,mr,fr,Mr,kt,W,L,te,ee,ue,ve],Qu={r:function(i,c,f){return Zu(async()=>{await a.Cb(i,c,f)})},b:function(i,c,f){throw i>>>=0,new Lt(i).mb(c>>>0,f>>>0),ur=i,Er++,ur},P:function(i){vo(i>>>0,!C,1,!y,131072,!1),ne.tb()},n:function(i){i>>>=0,S?postMessage({cmd:"cleanupThread",thread:i}):ne.rb(ne.$a[i])},L:Ft,i:Pr,V:kr,H:bt,J:Xe,z:wt,T:dr,N:cr,S:Dr,p:oe,I:pr,F:jt,U:mr,G:fr,Y:()=>1,D:function(i,c){i>>>=0,i==c>>>0?setTimeout(()=>Pt()):S?postMessage({targetThread:i,cmd:"checkMailbox"}):(i=ne.$a[i])&&i.postMessage({cmd:"checkMailbox"})},M:function(i,c,f,$){c>>>=0,Kt.length=f,$=$>>>0>>>3;for(var E=0;E<f;E++)Kt[E]=d()[$+E>>>0];return i=0>i?Nt[-i-1]:Ju[i],ne.zb=c,c=i.apply(null,Kt),ne.zb=0,c},O:qt,X:function(i){I&&ne.$a[i>>>0].ref()},u:function(i,c,f){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,f>>>=0,i=new Date(1e3*i),n()[f>>>2>>>0]=i.getUTCSeconds(),n()[f+4>>>2>>>0]=i.getUTCMinutes(),n()[f+8>>>2>>>0]=i.getUTCHours(),n()[f+12>>>2>>>0]=i.getUTCDate(),n()[f+16>>>2>>>0]=i.getUTCMonth(),n()[f+20>>>2>>>0]=i.getUTCFullYear()-1900,n()[f+24>>>2>>>0]=i.getUTCDay(),i=(i.getTime()-Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,n()[f+28>>>2>>>0]=i},v:function(i,c,f){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,f>>>=0,i=new Date(1e3*i),n()[f>>>2>>>0]=i.getSeconds(),n()[f+4>>>2>>>0]=i.getMinutes(),n()[f+8>>>2>>>0]=i.getHours(),n()[f+12>>>2>>>0]=i.getDate(),n()[f+16>>>2>>>0]=i.getMonth(),n()[f+20>>>2>>>0]=i.getFullYear()-1900,n()[f+24>>>2>>>0]=i.getDay(),c=(vt(i.getFullYear())?gr:yr)[i.getMonth()]+i.getDate()-1|0,n()[f+28>>>2>>>0]=c,n()[f+36>>>2>>>0]=-(60*i.getTimezoneOffset()),c=new Date(i.getFullYear(),6,1).getTimezoneOffset();var $=new Date(i.getFullYear(),0,1).getTimezoneOffset();i=(c!=$&&i.getTimezoneOffset()==Math.min($,c))|0,n()[f+32>>>2>>>0]=i},w:function(i){i>>>=0;var c=new Date(n()[i+20>>>2>>>0]+1900,n()[i+16>>>2>>>0],n()[i+12>>>2>>>0],n()[i+8>>>2>>>0],n()[i+4>>>2>>>0],n()[i>>>2>>>0],0),f=n()[i+32>>>2>>>0],$=c.getTimezoneOffset(),E=new Date(c.getFullYear(),6,1).getTimezoneOffset(),D=new Date(c.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(D,E);return 0>f?n()[i+32>>>2>>>0]=+(E!=D&&U==$):0<f!=(U==$)&&(E=Math.max(D,E),c.setTime(c.getTime()+6e4*((0<f?U:E)-$))),n()[i+24>>>2>>>0]=c.getDay(),f=(vt(c.getFullYear())?gr:yr)[c.getMonth()]+c.getDate()-1|0,n()[i+28>>>2>>>0]=f,n()[i>>>2>>>0]=c.getSeconds(),n()[i+4>>>2>>>0]=c.getMinutes(),n()[i+8>>>2>>>0]=c.getHours(),n()[i+12>>>2>>>0]=c.getDate(),n()[i+16>>>2>>>0]=c.getMonth(),n()[i+20>>>2>>>0]=c.getYear(),i=c.getTime(),isNaN(i)?(n()[bo()>>>2>>>0]=61,i=-1):i/=1e3,xo((yt=i,1<=+Math.abs(yt)?0<yt?+Math.floor(yt/4294967296)>>>0:~~+Math.ceil((yt-+(~~yt>>>0))/4294967296)>>>0:0)),i>>>0},s:Mr,t:kt,C:function(i,c,f){function $(se){return(se=se.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?se[1]:"GMT"}i>>>=0,c>>>=0,f>>>=0;var E=new Date().getFullYear(),D=new Date(E,0,1),U=new Date(E,6,1);E=D.getTimezoneOffset();var J=U.getTimezoneOffset(),ae=Math.max(E,J);s()[i>>>2>>>0]=60*ae,n()[c>>>2>>>0]=+(E!=J),i=$(D),c=$(U),i=br(i),c=br(c),J<E?(s()[f>>>2>>>0]=i,s()[f+4>>>2>>>0]=c):(s()[f>>>2>>>0]=c,s()[f+4>>>2>>>0]=i)},d:()=>{nt("")},c:function(i,c,f){return i>>>=0,c=p(c>>>0,f>>>0),Nt[i].apply(null,c)},k:function(i,c,f){return i>>>=0,c=p(c>>>0,f>>>0),Nt[i].apply(null,c)},o:()=>{},q:()=>Date.now(),W:()=>{throw ot+=1,"unwind"},E:function(){return 4294901760},f:()=>performance.timeOrigin+performance.now(),g:()=>I?(No(),Jt(Vo)).cpus().length:navigator.hardwareConcurrency,A:function(i){i>>>=0;var c=o().length;if(i<=c||4294901760<i)return!1;for(var f=1;4>=f;f*=2){var $=c*(1+.2/f);$=Math.min($,i+100663296);var E=Math;$=Math.max(i,$);e:{E=(E.min.call(E,4294901760,$+(65536-$%65536)%65536)-Q.buffer.byteLength+65535)/65536;try{Q.grow(E),Ge();var D=1;break e}catch{}D=void 0}if(D)return!0}return!1},Q:W,R:L,K:Gt,h:te,m:ee,x:ue,l:ve,y:function(i,c){return i>>>=0,c>>>=0,k(o().subarray(i>>>0,i+c>>>0)),0},a:Q||a.wasmMemory,B:po,e:function(i,c,f,$){return po(i>>>0,c>>>0,f>>>0,$>>>0)},j:function(i,c,f,$){let E=at.length;i=new Uint8Array(o().slice(i+c,i+f));try{var D=new WebAssembly.Module(i),U=new WebAssembly.Instance(D,{env:{memory:Q}}),J;for(J in U.exports)yo(U.exports[J]);return E<at.length?E:$}catch(ae){return console.log(ae),$}}},Y=function(){function i(f,$){return Y=f.exports,Y=Gu(),Y=Xu(),ne.ub.push(Y.Ha),at=Y.Ia,be.unshift(Y.Z),X=$,St(),Y}var c={a:Qu};if(ze++,a.instantiateWasm)try{return a.instantiateWasm(c,i)}catch(f){K(`Module.instantiateWasm callback failed with error: ${f}`),h(f)}return _t(c,function(f){i(f.instance,f.module)}).catch(h),{}}();a._OrtInit=(i,c)=>(a._OrtInit=Y._)(i,c),a._OrtGetLastError=(i,c)=>(a._OrtGetLastError=Y.$)(i,c),a._OrtCreateSessionOptions=(i,c,f,$,E,D,U,J,ae,se)=>(a._OrtCreateSessionOptions=Y.aa)(i,c,f,$,E,D,U,J,ae,se),a._OrtAppendExecutionProvider=(i,c)=>(a._OrtAppendExecutionProvider=Y.ba)(i,c),a._OrtAddFreeDimensionOverride=(i,c,f)=>(a._OrtAddFreeDimensionOverride=Y.ca)(i,c,f),a._OrtAddSessionConfigEntry=(i,c,f)=>(a._OrtAddSessionConfigEntry=Y.da)(i,c,f),a._OrtReleaseSessionOptions=i=>(a._OrtReleaseSessionOptions=Y.ea)(i),a._OrtCreateSession=(i,c,f)=>(a._OrtCreateSession=Y.fa)(i,c,f),a._OrtReleaseSession=i=>(a._OrtReleaseSession=Y.ga)(i),a._OrtGetInputOutputCount=(i,c,f)=>(a._OrtGetInputOutputCount=Y.ha)(i,c,f),a._OrtGetInputName=(i,c)=>(a._OrtGetInputName=Y.ia)(i,c),a._OrtGetOutputName=(i,c)=>(a._OrtGetOutputName=Y.ja)(i,c),a._OrtFree=i=>(a._OrtFree=Y.ka)(i),a._OrtCreateTensor=(i,c,f,$,E,D)=>(a._OrtCreateTensor=Y.la)(i,c,f,$,E,D),a._OrtGetTensorData=(i,c,f,$,E)=>(a._OrtGetTensorData=Y.ma)(i,c,f,$,E),a._OrtReleaseTensor=i=>(a._OrtReleaseTensor=Y.na)(i),a._OrtCreateRunOptions=(i,c,f,$)=>(a._OrtCreateRunOptions=Y.oa)(i,c,f,$),a._OrtAddRunConfigEntry=(i,c,f)=>(a._OrtAddRunConfigEntry=Y.pa)(i,c,f),a._OrtReleaseRunOptions=i=>(a._OrtReleaseRunOptions=Y.qa)(i),a._OrtCreateBinding=i=>(a._OrtCreateBinding=Y.ra)(i),a._OrtBindInput=(i,c,f)=>(a._OrtBindInput=Y.sa)(i,c,f),a._OrtBindOutput=(i,c,f,$)=>(a._OrtBindOutput=Y.ta)(i,c,f,$),a._OrtClearBoundOutputs=i=>(a._OrtClearBoundOutputs=Y.ua)(i),a._OrtReleaseBinding=i=>(a._OrtReleaseBinding=Y.va)(i),a._OrtRunWithBinding=(i,c,f,$,E)=>(a._OrtRunWithBinding=Y.wa)(i,c,f,$,E),a._OrtRun=(i,c,f,$,E,D,U,J)=>(a._OrtRun=Y.xa)(i,c,f,$,E,D,U,J),a._OrtEndProfiling=i=>(a._OrtEndProfiling=Y.ya)(i),a._OrtConfigure=(i,c)=>(a._OrtConfigure=Y.za)(i,c),a._OrtAuth=(i,c)=>(a._OrtAuth=Y.Aa)(i,c),a._JsepOutput=(i,c,f)=>(a._JsepOutput=Y.Ba)(i,c,f),a._JsepGetNodeName=i=>(a._JsepGetNodeName=Y.Ca)(i);var bo=()=>(bo=Y.Da)(),Nr=a._pthread_self=()=>(Nr=a._pthread_self=Y.Ea)(),vn=a._malloc=i=>(vn=a._malloc=Y.Fa)(i),wo=a._free=i=>(wo=a._free=Y.Ga)(i);a.__emscripten_tls_init=()=>(a.__emscripten_tls_init=Y.Ha)();var vo=a.__emscripten_thread_init=(i,c,f,$,E,D)=>(vo=a.__emscripten_thread_init=Y.Ja)(i,c,f,$,E,D);a.__emscripten_thread_crashed=()=>(a.__emscripten_thread_crashed=Y.Ka)();var $o=(i,c,f,$)=>($o=Y.La)(i,c,f,$),$n=i=>($n=Y.Ma)(i),Sn=a.__emscripten_thread_exit=i=>(Sn=a.__emscripten_thread_exit=Y.Na)(i),So=()=>(So=Y.Oa)(),xo=i=>(xo=Y.Pa)(i),_o=(i,c)=>(_o=Y.Qa)(i,c),xn=()=>(xn=Y.Ra)(),Wr=i=>(Wr=Y.Sa)(i),_n=i=>(_n=Y.Ta)(i),Co=a.dynCall_ii=(i,c)=>(Co=a.dynCall_ii=Y.Va)(i,c),Io=i=>(Io=Y.Wa)(i),Ao=()=>(Ao=Y.Xa)(),To=i=>(To=Y.Ya)(i),Eo=()=>(Eo=Y.Za)();a.___start_em_js=914640,a.___stop_em_js=915413;function Xu(){var i=Y;i=Object.assign({},i);var c=$=>()=>$()>>>0,f=$=>E=>$(E)>>>0;return i.Da=c(i.Da),i.Ea=c(i.Ea),i.Fa=f(i.Fa),i.emscripten_main_runtime_thread_id=c(i.emscripten_main_runtime_thread_id),i.Ra=c(i.Ra),i.Ta=f(i.Ta),i}a.wasmMemory=Q,a.stackAlloc=_n,a.stackSave=xn,a.stackRestore=Wr,a.keepRuntimeAlive=()=>0<ot,a.addFunction=yo,a.UTF8ToString=Ye,a.stringToUTF8=Rr,a.lengthBytesUTF8=lr,a.ExitStatus=Wt,a.PThread=ne;var Hr;Ue=function i(){Hr||Oo(),Hr||(Ue=i)};function Oo(){if(!(0<ze))if(S)m(a),S||Je(be),startWorker(a);else{if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)re.unshift(a.preRun.shift());Je(re),0<ze||Hr||(Hr=!0,a.calledRun=!0,Ee||(S||Je(be),m(a),S||Je(rt)))}}return Oo(),t.ready}})();typeof Ho=="object"&&typeof Pn=="object"?Pn.exports=Wo:typeof define=="function"&&define.amd&&define([],()=>Wo)});var Lo=wr((np,ul)=>{ul.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Rn,et,$r,Fr,Sr,Zo,Dn,Ne=q(()=>{"use strict";Rn=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},et=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},$r=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],Fr=e=>{switch(e){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Sr=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Zo=e=>e==="float32"||e==="int32"||e==="int64"||e==="bool"||e==="float16"||e==="uint32",Dn=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}});var jr=q(()=>{"use strict"});var Qo=q(()=>{"use strict";jr()});var Xo,ea=q(()=>{"use strict";Xo="1.17.0"});var ta,Rt,Mn=q(()=>{"use strict";ea();ta="warning",Rt={wasm:{},webgl:{},webgpu:{},versions:{common:Xo},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);ta=e}},get logLevel(){return ta}};Object.defineProperty(Rt,"logLevel",{enumerable:!0})});var Qt,ra=q(()=>{"use strict";Mn();Qt=Rt});var na=q(()=>{"use strict"});var oa=q(()=>{"use strict";qr()});var ia=q(()=>{"use strict"});var sa=q(()=>{"use strict";qr()});var qr=q(()=>{"use strict";na();oa();ia();sa()});var Kr=q(()=>{"use strict";qr()});var Un,ua,Dt,Mt,zn=q(()=>{"use strict";Mn();Un=(e,t)=>{Rt.wasm.trace&&console.timeStamp(`${e}::ORT::${t}`)},ua=(e,t)=>{let r=new Error().stack?.split(/\\r\\n|\\r|\\n/g)||[],o=!1;for(let n=0;n<r.length;n++){if(o&&!r[n].includes("TRACE_FUNC")){let s=`FUNC_${e}::${r[n].trim().split(" ")[1]}`;t&&(s+=`::${t}`),Un("CPU",s);return}r[n].includes("TRACE_FUNC")&&(o=!0)}},Dt=e=>{Rt.wasm.trace&&ua("BEGIN",e)},Mt=e=>{Rt.wasm.trace&&ua("END",e)}});var la=q(()=>{"use strict";jr();Kr();zn()});var da=q(()=>{"use strict";la()});var ca=q(()=>{"use strict"});var pa=q(()=>{"use strict";jr();Kr()});var ma=q(()=>{"use strict";pa()});var Xt=q(()=>{"use strict";Qo();ra();da();Kr();zn();ca();ma()});var wl,vl,fa,ha,ga,$l,De,It=q(()=>{"use strict";Ne();wl=["V","I","W","E","F"],vl=(e,t)=>{console.log(`[${wl[e]},${new Date().toISOString()}]${t}`)},ga=(e,t)=>{fa=e,ha=t},$l=(e,t)=>{let r=Sr(e),o=Sr(fa);r>=o&&vl(r,typeof t=="function"?t():t)},De=(...e)=>{ha&&$l(...e)}});var ya,ba=q(()=>{"use strict";Ne();ya=(e,t)=>new(Fr(t))(e)});var Yr=q(()=>{"use strict"});var Zr,Sl,wa,Nn,Vn,$a,Sa=q(()=>{"use strict";It();Yr();Zr=e=>Math.ceil(e/16)*16,Sl=1,wa=()=>Sl++,Nn=async(e,t,r,o)=>{let n=Zr(r),s=e.device.createBuffer({size:n,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let u=e.getCommandEncoder();e.endComputePass(),u.copyBufferToBuffer(t,0,s,0,n),e.flush(),await s.mapAsync(GPUMapMode.READ);let d=s.getMappedRange();if(o){let a=o();return a.set(new Uint8Array(d,0,r)),a}else return new Uint8Array(d.slice(0,r))}finally{s.destroy()}},Vn=class{constructor(t){this.backend=t;this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map}upload(t,r){let o=r.buffer,n=r.byteOffset,s=r.byteLength,u=Zr(s),d=this.storageCache.get(t);if(!d)throw new Error("gpu data for uploading does not exist");if(d.originalSize!==s)throw new Error(`inconsistent data size. gpu data size=${d.originalSize}, data size=${s}`);let a=this.backend.device.createBuffer({mappedAtCreation:!0,size:u,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),m=a.getMappedRange();new Uint8Array(m).set(new Uint8Array(o,n,s)),a.unmap();let h=this.backend.getCommandEncoder();this.backend.endComputePass(),h.copyBufferToBuffer(a,0,d.gpuData.buffer,0,u),De("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${t})`),this.buffersForUploadingPending.push(a)}memcpy(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("source gpu data for memcpy does not exist");let n=this.storageCache.get(r);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(o.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");let s=Zr(o.originalSize),u=this.backend.getCommandEncoder();this.backend.endComputePass(),u.copyBufferToBuffer(o.gpuData.buffer,0,n.gpuData.buffer,0,s)}registerExternalBuffer(t,r,o){let n;if(o){if(n=this.externalBuffers.get(o),n===void 0)throw new Error("previous buffer is not registered");if(t===o)return De("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${n}, buffer is the same, skip.`),n;this.externalBuffers.delete(o)}else n=wa();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:t},originalSize:r}),this.externalBuffers.set(t,n),De("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${n}, registered.`),n}unregisterExternalBuffer(t){let r=this.externalBuffers.get(t);r!==void 0&&(this.storageCache.delete(r),this.externalBuffers.delete(t),De("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${r}`))}create(t,r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let o=Zr(t),n,s=(r&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,u=(r&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(s||u){let a=s?this.freeBuffers:this.freeUniformBuffers,m=a.get(o);m||(m=[],a.set(o,m)),m.length>0?n=m.pop():n=this.backend.device.createBuffer({size:o,usage:r})}else n=this.backend.device.createBuffer({size:o,usage:r});let d={id:wa(),type:0,buffer:n};return this.storageCache.set(d.id,{gpuData:d,originalSize:t}),De("verbose",()=>`[WebGPU] GpuDataManager.create(size=${t}) => id=${d.id}`),d}get(t){return this.storageCache.get(t)?.gpuData}release(t){let r=this.storageCache.get(t);if(!r)throw new Error("releasing data does not exist");return De("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("data does not exist");await Nn(this.backend,o.gpuData.buffer,o.originalSize,r)}refreshPendingBuffers(){for(let t of this.buffersForUploadingPending)t.destroy();this.buffersForUploadingPending=[];for(let t of this.buffersPending)(t.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE?this.freeBuffers.get(t.size).push(t):(t.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM?this.freeUniformBuffers.get(t.size).push(t):t.destroy();this.buffersPending=[]}dispose(){this.freeBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.freeUniformBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache.forEach(t=>{t.gpuData.buffer.destroy()}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map}},$a=(...e)=>new Vn(...e)});var Wn,ge,je=q(()=>{"use strict";Wn=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ge=e=>new Wn(e)});var Hn,lt,V,Ut,Jr,Qr,Xr,$e=q(()=>{"use strict";Hn=class{static calcMatMulShape(t,r){return t[1]!==r[0]?void 0:[t[0],r[1]]}},lt=class{static calcShape(t,r,o=!1){let n=t.length,s=r.length;if(n===0)return r;if(s===0)return t;let u=Math.max(t.length,r.length),d=new Array(u);if(o){if(n<2||s<2)return;let a=Hn.calcMatMulShape([t[n-2],t[n-1]],[r[s-2],r[s-1]]);if(a===void 0)return;[d[u-2],d[u-1]]=a}for(let a=o?3:1;a<=u;a++){let m=n-a<0?1:t[n-a],h=s-a<0?1:r[s-a];if(m!==h&&m>1&&h>1)return;d[u-a]=Math.max(m,h)}return d}static isValidBroadcast(t,r){let o=t.length,n=r.length;if(o>n)return!1;for(let s=1;s<=o;s++)if(t[o-s]!==1&&t[o-s]!==r[n-s])return!1;return!0}},V=class e{static size(t){return e.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,o){let n=1;for(let s=r;s<o;s++){if(t[s]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");n*=t[s]}return n}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let o=new Array(r);o[r-1]=1,o[r-2]=t[r-1];for(let n=r-3;n>=0;--n)o[n]=o[n+1]*t[n+1];return o}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(o=>this.normalizeAxis(o,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(o=>t[o]):t.slice().reverse()}static padShape(t,r){let o=t.length;return t.map((n,s)=>n+r[s]+r[s+o])}static areEqual(t,r){return t.length!==r.length?!1:t.every((o,n)=>o===r[n])}},Ut=class e{static adjustPoolAttributes(t,r,o,n,s,u){if(!t&&o.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let d=0;d<r.length-2;d++)d>=o.length?o.push(r[d+2]):o[d]=r[d+2];for(let d=0;d<o.length;d++)if(d<n.length){if(n[d]<0)throw new Error("strides should be greater than or equal to 1")}else n.push(1);for(let d=0;d<o.length;d++)if(d<s.length){if(s[d]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let d=0;d<o.length*2;d++)if(d<u.length){if(u[d]<0)throw new Error("pad should be greater than or equal to 1")}else u.push(0);for(let d=0;d<o.length;d++){if(o[d]<=0)throw new Error("kernel shapes need to be greater than 0");if(u[d]>=o[d]||u[d+o.length]>=o[d])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,o,n,s,u,d){if(d){if(s.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let a=0;a<t.length-2;a++)e.adjustPadAndReturnShape(t[a+(u?1:2)],r[a],o[a],n[a],s,a,a+t.length-2,d)}}static computePoolOutputShape(t,r,o,n,s,u,d){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let a=[r[0],r[1]];return e.computeShapeHelper(t,r,a,o,n,s,u,d),a}static computeConvOutputShape(t,r,o,n,s,u,d){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let a=[t[0],r[0]];return e.computeShapeHelper(!1,t,a,o,n,s,u,d),a}static computeShapeHelper(t,r,o,n,s,u,d,a){if(t)for(let m=0;m<r.length-2;m++)o.push(1);else for(let m=0;m<r.length-2;m++)o.push(e.adjustPadAndReturnShape(r[m+2],n[m],s[m],u[m],d,m,m+r.length-2,a))}static adjustPadAndReturnShape(t,r,o,n,s,u,d,a){let m=o*(n-1)+1;if(a&&a!=="NOTSET")switch(a){case"VALID":return s[u]=0,s[d]=0,Math.floor((t-m)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let g=((t+r-1)/r-1)*r+n-t;return s[u]=Math.floor(a==="SAME_LOWER"?(g+1)/2:g/2),s[d]=g-s[u],Math.floor((t+g-n)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+s[u]+s[d]-m)/r+1)}},Jr=class{static getShapeOfGemmResult(t,r,o,n,s){if(t.length!==2||o.length!==2)throw new Error("shape need to be of size 2");let u,d,a;r?(u=t[1],d=t[0]):(u=t[0],d=t[1]);let m=-1;if(n?(a=o[0],m=1):(a=o[1],m=0),o[m]!==d)throw new Error("dimension mismatch");if(u<=0||a<=0||d<=0)throw new Error("invalid shape specified");if(s&&!lt.isValidBroadcast(s,[u,a]))throw new Error("gemm: invalid bias shape for broadcast");return[u,a,d]}},Qr=-34028234663852886e22,Xr=34028234663852886e22});var xl,Ln,Le,dt,F,Fe,Ze,it,tt,ce,Fn,M,j,en,Gn,xa,er,Be,we=q(()=>{"use strict";Ne();$e();xl=64,Ln=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e}`)}},Le=(e,t=1)=>{let r=Ln(e,t);return typeof r=="string"?r:r[0]},dt=(e,t=1)=>{let r=Ln(e,t);return typeof r=="string"?r:r[1]},F=e=>e.length===0?[]:[{type:"uint32",data:e},{type:"uint32",data:V.computeStrides(e)}],Fe=e=>e%4===0?4:e%2===0?2:1,Ze=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,it=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}f(${r})`,tt=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,ce=(e,t,r)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?`${e}[(${t}) / 4][(${t}) % 4]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,Fn=(e,t,r,o,n)=>{let s=typeof r=="number",u=s?r:r.length,d=[...new Array(u).keys()],a=u<2?"u32":u<=4?`vec${u}<u32>`:`array<u32, ${u}>`,m=Ln(t,n),h=typeof m=="string"?m:m[1],g=typeof m=="string"?m:m[0],w={indices:a,value:h,storage:g,tensor:t},v=G=>typeof G=="string"?G:`${G}u`,y={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},C=s?"uniforms.":"",I=`${C}${e}_shape`,S=`${C}${e}_strides`,_="";for(let G=0;G<u-1;G++)_+=`\n    let dim${G} = current / ${ce(S,G,u)};\n    let rest${G} = current % ${ce(S,G,u)};\n    indices[${G}] = dim${G};\n    current = rest${G};\n    `;_+=`indices[${u-1}] = current;`;let P=u<2?"":`\n  fn o2i_${e}(offset: u32) -> ${w.indices} {\n    var indices: ${w.indices};\n    var current = offset;\n    ${_}\n    return indices;\n  }`,A=G=>(y.offsetToIndices=!0,u<2?G:`o2i_${e}(${G})`),z=[];if(u>=2)for(let G=u-1;G>=0;G--)z.push(`${ce(S,G,u)} * (indices[${G}])`);let R=u<2?"":`\n  fn i2o_${e}(indices: ${w.indices}) -> u32 {\n    return ${z.join("+")};\n  }`,N=G=>(y.indicesToOffset=!0,u<2?G:`i2o_${e}(${G})`),T=(...G)=>u===0?"0u":`${w.indices}(${G.map(v).join(",")})`,H=(G,re)=>u<2?`${G}`:`${ce(G,re,u)}`,ie=(G,re,be)=>u<2?`${G}=${be};`:`${ce(G,re,u)}=${be};`,Z={},K=(G,re)=>{y.broadcastedIndicesToOffset=!0;let be=`${re.name}broadcastedIndicesTo${e}Offset`;if(be in Z)return`${be}(${G})`;let rt=[];for(let ze=u-1;ze>=0;ze--){let Ve=re.indicesGet("outputIndices",ze+re.rank-u);rt.push(`${H(S,ze)} * (${Ve} % ${H(I,ze)})`)}return Z[be]=`fn ${be}(outputIndices: ${re.type.indices}) -> u32 {\n             return ${rt.length>0?rt.join("+"):"0u"};\n           }`,`${be}(${G})`},Q=(G,re)=>(()=>{if(w.storage===w.value)return`${e}[${G}]=${re};`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`${e}[${G}]=vec2<u32>(u32(${re}), select(0u, 0xFFFFFFFFu, ${re} < 0));`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`${e}[${G}]=vec2<u32>(u32(${re}), 0u);`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`${e}[${G}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${re}));`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),X=G=>(()=>{if(w.storage===w.value)return`${e}[${G}]`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`i32(${e}[${G}].x)`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`u32(${e}[${G}].x)`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${G}] & 0xFFu), bool(${e}[${G}] & 0xFF00u), bool(${e}[${G}] & 0xFF0000u), bool(${e}[${G}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),Ee=u<2?"":`\n  fn get_${e}ByIndices(indices: ${w.indices}) -> ${h} {\n    return ${X(`i2o_${e}(indices)`)};\n  }`,Pe=u<2?"":(()=>{let G=d.map(be=>`d${be}: u32`).join(", "),re=d.map(be=>`d${be}`).join(", ");return`\n  fn get_${e}(${G}) -> ${h} {\n    return get_${e}ByIndices(${T(re)});\n  }`})(),fe=(...G)=>{if(G.length!==u)throw new Error(`indices length must be ${u}`);let re=G.map(v).join(",");return u===0?X("0u"):u===1?X(re[0]):(y.get=!0,y.getByIndices=!0,y.indicesToOffset=!0,`get_${e}(${re})`)},Ce=G=>u<2?X(G):(y.getByIndices=!0,y.indicesToOffset=!0,`get_${e}ByIndices(${G})`),he=u<2?"":`\n  fn set_${e}ByIndices(indices: ${w.indices}, value: ${h}) {\n    ${Q(`i2o_${e}(indices)`,"value")}\n  }`,ye=u<2?"":(()=>{let G=d.map(be=>`d${be}: u32`).join(", "),re=d.map(be=>`d${be}`).join(", ");return`\n  fn set_${e}(${G}, value: ${h}) {\n    set_${e}ByIndices(${T(re)}, value);\n  }`})();return{impl:()=>{let G=[],re=!1;return y.offsetToIndices&&(G.push(P),re=!0),y.indicesToOffset&&(G.push(R),re=!0),y.broadcastedIndicesToOffset&&(Object.values(Z).forEach(be=>G.push(be)),re=!0),y.set&&(G.push(ye),re=!0),y.setByIndices&&(G.push(he),re=!0),y.get&&(G.push(Pe),re=!0),y.getByIndices&&(G.push(Ee),re=!0),!s&&re&&G.unshift(`const ${I} = ${w.indices}(${r.join(",")});`,`const ${S} = ${w.indices}(${V.computeStrides(r).join(",")});`),G.join(`\n`)},type:w,offsetToIndices:A,indicesToOffset:N,broadcastedIndicesToOffset:K,indices:T,indicesGet:H,indicesSet:ie,set:(...G)=>{if(G.length!==u+1)throw new Error(`indices length must be ${u}`);let re=G[u];if(typeof re!="string")throw new Error("value must be string");let be=G.slice(0,u).map(v).join(",");return u===0?Q("0u",re):u===1?Q(be[0],re):(y.set=!0,y.setByIndices=!0,y.indicesToOffset=!0,`set_${e}(${be}, ${re})`)},setByOffset:Q,setByIndices:(G,re)=>u<2?Q(G,re):(y.setByIndices=!0,y.indicesToOffset=!0,`set_${e}ByIndices(${G}, ${re});`),get:fe,getByOffset:X,getByIndices:Ce,usage:o,name:e,strides:S,shape:I,rank:u}},M=(e,t,r,o=1)=>Fn(e,t,r,"input",o),j=(e,t,r,o=1)=>Fn(e,t,r,"output",o),en=(e,t,r,o=1)=>Fn(e,t,r,"internal",o),Gn=class{constructor(t){this.normalizedDispatchGroup=t;this.internalVariables=[];this.variables=[];this.uniforms=[];this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(t){return`if (global_idx >= ${typeof t=="number"?`${t}u`:t}) { return; }`}mainStart(t=xl){let r=typeof t=="number"?t:t[0],o=typeof t=="number"?1:t[1],n=typeof t=="number"?1:t[2],s=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,u=s?`@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(local_invocation_id) local_id : vec3<u32>,\n    @builtin(local_invocation_index) local_idx : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(num_workgroups) num_workgroups : vec3<u32>`,d=s?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +\n          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${r*o*n}u + local_idx;`;return`@compute @workgroup_size(${r}, ${o}, ${n})\n  fn main(${u}) {\n    ${d}\n  `}appendVariableUniforms(t){t.rank!==0&&(t.shape.startsWith("uniforms.")&&this.uniforms.push({name:t.shape.replace("uniforms.",""),type:"u32",length:t.rank}),t.strides.startsWith("uniforms.")&&this.uniforms.push({name:t.strides.replace("uniforms.",""),type:"u32",length:t.rank}))}declareVariable(t,r){if(t.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(t),this.appendVariableUniforms(t);let o=t.usage==="input"?"read":"read_write",n=t.type.storage;return`@group(0) @binding(${r}) var<storage, ${o}> ${t.name}: array<${n}>;`}declareVariables(...t){return t.map(r=>this.declareVariable(r,this.variableIndex++)).join(`\n`)}registerInternalVariable(t){if(t.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(t),this.appendVariableUniforms(t)}registerInternalVariables(...t){return t.forEach(r=>this.registerInternalVariable(r)),this}registerUniform(t,r,o=1){return this.uniforms.push({name:t,type:r,length:o}),this}registerUniforms(t){return this.uniforms=this.uniforms.concat(t),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let t=[];for(let{name:r,type:o,length:n}of this.uniforms)if(n&&n>4)t.push(`${r}:array<vec4<${o}>, ${Math.ceil(n/4)}>`);else{let s=n==null||n===1?o:`vec${n}<${o}>`;t.push(`${r}:${s}`)}return`\n      struct Uniforms { ${t.join(", ")} };\n      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(t=>t.impl()).join(`\n`)+this.internalVariables.map(t=>t.impl()).join(`\n`)}},xa=e=>new Gn(e),er=(e,t)=>{let r=e.length,o=[];for(let n=0;n<r;n++){let s=r-1-n,u=e[s]||1;(t[t.length-1-n]||1)>1&&u===1&&o.unshift(s)}return o},Be=e=>!0});var _l,_a,Cl,Il,st,Ca,Ia,tr=q(()=>{"use strict";$e();je();we();_l=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.")},_a=(e,t)=>t&&t.length!==e?[...new Array(e).keys()].reverse():t,Cl=(e,t)=>V.sortBasedOnPerm(e,_a(e.length,t)),Il=(e,t,r,o)=>{let n=[];n.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let s=0;s<t;++s)n.push(r.indicesSet("a",e[s],`i[${s}]`));return n.push("return a;}"),n.join(`\n`)},st=(e,t)=>{let r=e.dataType,o=e.dims.length,n=_a(o,t),s=Be(o),u=Cl(e.dims,n),d=s?u.length:u,a=s?o:e.dims,m=j("output",r,d),h=M("a",r,a),g=w=>`\n  ${w.registerUniform("output_size","u32").declareVariables(h,m)}\n\n  ${Il(n,o,h,m)}\n\n  ${w.mainStart()}\n    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${m.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${m.setByOffset("global_idx",h.getByIndices("aIndices"))}\n  }`;return{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:s?["rank"]:["dims"]},getRunData:w=>{let v=V.size(u);return{outputs:[{dims:u,dataType:w[0].dataType}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:s?[{type:"uint32",data:v},...F(w[0].dims),...F(u)]:[{type:"uint32",data:v}]}},getShaderSource:g}},Ca=(e,t)=>{_l(e.inputs),e.compute(st(e.inputs[0],t.perm))},Ia=e=>ge({perm:e.perm})});var Al,Tl,El,Ol,Pl,kl,Bl,Rl,Dl,Ml,ct,Aa,Ta,Ea,Oa,Pa,ka,Ba,Ra,Da,Ma,Ua=q(()=>{"use strict";$e();we();tn();tr();Al={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Tl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},El={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Ol={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Pl=(e,t)=>{let r=[];for(let o=t-e;o<t;++o)r.push(o);return r},kl=(e,t)=>{let r=[],o=e.length;for(let s=0;s<o;s++)t.indexOf(s)===-1&&r.push(e[s]);let n=t.map(s=>e[s]);return[r,n]},Bl=(e,t)=>{let r=e.length+t.length,o=[],n=0;for(let s=0;s<r;s++)t.indexOf(s)===-1?o.push(e[n++]):o.push(1);return o},Rl=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Dl=(e,t)=>{let r=[];if(!Rl(e,t)){for(let o=0;o<t;++o)e.indexOf(o)===-1&&r.push(o);e.forEach(o=>r.push(o))}return r},Ml=(e,t,r,o,n,s,u)=>{let d=r[0].dims,a=V.size(s),m=V.size(u),h=M("_A",r[0].dataType,d),g=j("output",n,s),w=32,v=`\n          var<workgroup> aBestValues : array<${g.type.storage}, ${w}>;\n       `;return{name:e,shaderCache:t,getShaderSource:C=>`\n        ${C.registerUniform("reduceSize","u32").declareVariables(h,g)}\n        ${v}\n        fn DIV_CEIL(a : u32, b : u32) -> u32 {\n          return ((a - 1u) / b + 1u);\n         }\n         ${C.mainStart(w)}\n\n          let outputIndex = global_idx / ${w};\n          let offset = outputIndex * uniforms.reduceSize;\n\n          var bestValue = ${g.type.storage}(${El[o]});\n          let Length = uniforms.reduceSize;\n          for (var k = local_idx; k < Length; k = k + ${w}) {\n           let candidate = ${g.type.storage}(${h.getByOffset("offset + k")});\n           bestValue = ${Al[o]};\n          }\n          aBestValues[local_idx] = bestValue;\n          workgroupBarrier();\n\n         var reduceSize = min(Length, ${w}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (local_idx < currentSize) {\n            let candidate = aBestValues[local_idx + interval];\n            bestValue = ${Tl[o]};\n            aBestValues[local_idx] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (local_idx == 0u) {\n          ${g.setByOffset("outputIndex",`${o==="mean"?`bestValue / ${g.type.storage}(uniforms.reduceSize)`:`${Ol[o]}`}`)};\n         }\n        }`,getRunData:()=>({outputs:[{dims:s,dataType:n}],dispatchGroup:{x:a},programUniforms:[{type:"uint32",data:m}]})}},ct=(e,t,r,o)=>{let n=e.inputs.length===1?r:jn(e.inputs,r),s=n.axes;s.length===0&&!n.noopWithEmptyAxes&&(s=e.inputs[0].dims.map((v,y)=>y));let u=V.normalizeAxes(s,e.inputs[0].dims.length),d=u,a=e.inputs[0],m=Dl(d,e.inputs[0].dims.length);m.length>0&&(a=e.compute(st(e.inputs[0],m),{inputs:[0],outputs:[-1]})[0],d=Pl(d.length,a.dims.length));let[h,g]=kl(a.dims,d),w=h;n.keepDims&&(w=Bl(h,u)),e.compute(Ml(t,{hint:n.cacheKey,inputDependencies:["type"]},[a],o,e.inputs[0].dataType,w,g),{inputs:[a]})},Aa=(e,t)=>{ct(e,"ReduceMeanShared",t,"mean")},Ta=(e,t)=>{ct(e,"ReduceL1Shared",t,"l1")},Ea=(e,t)=>{ct(e,"ReduceL2Shared",t,"l2")},Oa=(e,t)=>{ct(e,"ReduceLogSumExpShared",t,"logSumExp")},Pa=(e,t)=>{ct(e,"ReduceMaxShared",t,"max")},ka=(e,t)=>{ct(e,"ReduceMinShared",t,"min")},Ba=(e,t)=>{ct(e,"ReduceProdShared",t,"prod")},Ra=(e,t)=>{ct(e,"ReduceSumShared",t,"sum")},Da=(e,t)=>{ct(e,"ReduceSumSquareShared",t,"sumSquare")},Ma=(e,t)=>{ct(e,"ReduceLogSumShared",t,"logSum")}});var pt,Ul,rn,jn,mt,zl,Vl,Nl,Wl,Hl,Gl,Ll,Fl,jl,ql,ft,za,Va,Na,Wa,Ha,Ga,La,Fa,ja,qa,tn=q(()=>{"use strict";$e();je();we();Ua();pt=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Ul=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],rn=(e,t,r,o,n,s,u=!1,d=!1)=>{let a=[],m=r[0].dims,h=m.length,g=V.normalizeAxes(n,h),w=!d&&g.length===0;m.forEach((I,S)=>{w||g.indexOf(S)>=0?u&&a.push(1):a.push(I)});let v=a.length,y=V.size(a);return{name:e,shaderCache:t,getShaderSource:I=>{let S=[],_=M("_A",r[0].dataType,h),P=j("output",s,v),A=o(_,P,g),z=A[2];for(let R=0,N=0;R<h;R++)w||g.indexOf(R)>=0?(u&&N++,z=`for(var j${R}: u32 = 0; j${R} < ${m[R]}; j${R}++) {\n                  ${A[2].includes("last_index")?`let last_index = j${R};`:""}\n                  ${_.indicesSet("input_indices",R,`j${R}`)}\n                  ${z}\n                }`):(S.push(`${_.indicesSet("input_indices",R,P.indicesGet("output_indices",N))};`),N++);return`\n\n        ${I.registerUniform("output_size","u32").declareVariables(_,P)}\n\n        ${I.mainStart()}\n          ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var input_indices: ${_.type.indices};\n          let output_indices = ${P.offsetToIndices("global_idx")};\n\n          ${S.join(`\n`)}\n          ${A[0]}       // init ops for reduce max/min\n          ${A[1]}\n          ${z}\n          ${A[3]}\n          ${A.length===4?P.setByOffset("global_idx","value"):A.slice(4).join(`\n`)}\n        }`},getRunData:()=>({outputs:[{dims:a,dataType:s}],dispatchGroup:{x:Math.ceil(y/64)},programUniforms:[{type:"uint32",data:y},...F(m),...F(a)]})}},jn=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(o=>r.push(Number(o))),ge({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},mt=(e,t,r,o)=>{let n=e.inputs,s=n.length===1?r:jn(n,r);e.compute(rn(t,{hint:s.cacheKey,inputDependencies:["rank"]},[n[0]],s.noopWithEmptyAxes&&s.axes.length===0?Ul:o,s.axes,n[0].dataType,s.keepDims,s.noopWithEmptyAxes),{inputs:[0]})},zl=(e,t)=>{pt(e.inputs),mt(e,"ReduceLogSum",t,(o,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,"value = log(value);"])},Vl=(e,t)=>{pt(e.inputs),mt(e,"ReduceL1",t,(o,n)=>[`var value = ${n.type.storage}(0);`,"",`value += abs(${o.getByIndices("input_indices")});`,""])},Nl=(e,t)=>{pt(e.inputs),mt(e,"ReduceL2",t,(o,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Wl=(e,t)=>{pt(e.inputs),mt(e,"ReduceLogSumExp",t,(o,n)=>[`var value = ${n.type.storage}(0);`,"",`value += exp(${o.getByIndices("input_indices")});`,"value = log(value);"])},Hl=(e,t)=>{pt(e.inputs),mt(e,"ReduceMax",t,(o,n,s)=>{let u=[];for(let d=0;d<o.rank;d++)(s.indexOf(d)>=0||s.length===0)&&u.push(o.indicesSet("input_indices",d,0));return[`${u.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = max(value, ${o.getByIndices("input_indices")});`,""]})},Gl=(e,t)=>{pt(e.inputs),mt(e,"ReduceMean",t,(o,n,s)=>{let u=1;for(let d=0;d<o.rank;d++)(s.indexOf(d)>=0||s.length===0)&&(u*=e.inputs[0].dims[d]);return["var sum = f32(0);","",`sum += f32(${o.getByIndices("input_indices")});`,`let value = ${n.type.value}(sum / ${u});`]})},Ll=(e,t)=>{pt(e.inputs),mt(e,"ReduceMin",t,(o,n,s)=>{let u=[];for(let d=0;d<o.rank;d++)(s.indexOf(d)>=0||s.length===0)&&u.push(`input_indices[${d}] = 0;`);return[`${u.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = min(value, ${o.getByIndices("input_indices")});`,""]})},Fl=(e,t)=>{pt(e.inputs),mt(e,"ReduceProd",t,(o,n)=>[`var value = ${n.type.storage}(1);`,"",`value *= ${o.getByIndices("input_indices")};`,""])},jl=(e,t)=>{pt(e.inputs),mt(e,"ReduceSum",t,(o,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,""])},ql=(e,t)=>{pt(e.inputs),mt(e,"ReduceSumSquare",t,(o,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += t * t;`,""])},ft=(e,t,r)=>{if(t.length===0)return r;let o=1,n=1;for(let s=0;s<t.length;s++)t.indexOf(s)===-1?o*=e[s]:n*=e[s];return n<32&&o>1024},za=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Gl(e,t):Aa(e,t)},Va=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Vl(e,t):Ta(e,t)},Na=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Nl(e,t):Ea(e,t)},Wa=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Wl(e,t):Oa(e,t)},Ha=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hl(e,t):Pa(e,t)},Ga=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Ll(e,t):ka(e,t)},La=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Fl(e,t):Ba(e,t)},Fa=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?jl(e,t):Ra(e,t)},ja=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?ql(e,t):Da(e,t)},qa=(e,t)=>{ft(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?zl(e,t):Ma(e,t)}});var Ka,Ya,Za,qn,Ja=q(()=>{"use strict";Ne();je();tn();Ka=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},Ya=(e,t)=>{Ka(e.inputs);let r=(o,n,s)=>{let u=[];for(let d=0;d<o.rank;d++)(s.indexOf(d)>=0||s.length===0)&&u.push(`input_indices[${d}] = 0;`);return[`${u.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",n.setByOffset("global_idx","best_index")]};e.compute(rn("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},Za=(e,t)=>{Ka(e.inputs);let r=(o,n,s)=>{let u=[];for(let d=0;d<o.rank;d++)(s.indexOf(d)>=0||s.length===0)&&u.push(`input_indices[${d}] = 0;`);return[`${u.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",n.setByOffset("global_idx","best_index")]};e.compute(rn("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},qn=e=>ge(e)});var Kl,Yl,Zl,Jl,nn,Ql,Qa,Kn=q(()=>{"use strict";Ne();Yr();we();Kl=(e,t)=>{let r=e[0],o=e[1],n=e[2],s=e[3],u=e[4],d=e[5];if(u&&d)throw new Error("Attention cannot have both past and relative_position_bias");if(r.dims.length!==3)throw new Error(\'Input "input" must have 3 dimensions\');let a=r.dims[0],m=r.dims[1],h=r.dims[2];if(n.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimensions\');if(o.dims.length!==2)throw new Error(\'Input "weights" is expected to have 2 dimensions\');if(o.dims[0]!==h)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(n.dims[0]!==o.dims[1])throw new Error(\'Input "bias" dimension 0 should have same length as dimension 1 of input "weights"\');let g=n.dims[0]/3,w=g,v=w;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let P of t.qkvHiddenSizes)if(P%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");g=t.qkvHiddenSizes[0],w=t.qkvHiddenSizes[1],v=t.qkvHiddenSizes[2]}let y=m;if(g!==w)throw new Error("qkv_hidden_sizes first element should be same as the second");if(n.dims[0]!==g+w+v)throw new Error(\'Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes\');let C=0;if(u){if(w!==v)throw new Error(\'Input "past" expect k_hidden_size == v_hidden_size\');if(u.dims.length!==5)throw new Error(\'Input "past" must have 5 dimensions\');if(u.dims[0]!==2)throw new Error(\'Input "past" first dimension must be 2\');if(u.dims[1]!==a)throw new Error(\'Input "past" second dimension must be batch_size\');if(u.dims[2]!==t.numHeads)throw new Error(\'Input "past" third dimension must be num_heads\');if(u.dims[4]!==w/t.numHeads)throw new Error(\'Input "past" fifth dimension must be k_hidden_size / num_heads\');t.pastPresentShareBuffer||(C=u.dims[3])}let I=y+C,S=-1,_=0;if(s)throw new Error("Mask not supported");if(u)throw new Error("past is not supported");if(d)throw new Error("relativePositionBias is not supported");return{batchSize:a,sequenceLength:m,pastSequenceLength:C,kvSequenceLength:y,totalSequenceLength:I,maxSequenceLength:S,inputHiddenSize:h,hiddenSize:g,vHiddenSize:v,headSize:Math.floor(g/t.numHeads),vHeadSize:Math.floor(v/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:_,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},Yl=(e,t,r,o)=>{let n=Fe(o),s=64,u=o/n;u<s?s=1:u/8<64&&(s=Math.ceil(u/8));let d=Math.ceil(o/n/s),m=[{type:et(t.dataType),data:1/o},{type:"uint32",data:u},{type:"uint32",data:d}],h=Le(t.dataType,n),g=w=>{let v=j("x",t.dataType,t.dims,n),y="thread_max_vector";n===2?y="max(thread_max_vector.x, thread_max_vector.y)":n===4&&(y="max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))");let C=dt(t.dataType),I=[{name:"d_inv",type:C},{name:"d_comp",type:"u32"},{name:"elements_per_wg",type:"u32"}];return`\n  var<workgroup> wgMax: array<f32, ${s}>;\n  var<workgroup> wgSum: array<f32, ${s}>;\n  ${w.registerUniforms(I).declareVariables(v)}\n  ${w.mainStart([s,1,1])}\n    let localOffset = local_idx * uniforms.elements_per_wg;\n    let offset: u32 = workgroup_id.x * uniforms.d_comp + localOffset;\n\n    var thread_max_vector = ${Ze("f32",n,"-3.402823e+38f")};\n    for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n      thread_max_vector = max(${it(C,n,"x[offset + i]")}, thread_max_vector);\n    }\n    wgMax[local_idx] = ${y};\n    workgroupBarrier();\n\n    var maxValue = -3.402823e+38f;\n    for (var i = 0u; i < ${s}; i++) {\n      maxValue = max(wgMax[i], maxValue);\n    }\n\n    var sumVector = ${Ze("f32",n,"0")};\n    for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n      sumVector += exp(${it(C,n,"x[offset + i]")} - maxValue);\n    }\n    wgSum[local_idx] = ${tt("sumVector",n)};\n    workgroupBarrier();\n\n    var sum: f32 = 0;\n    for (var i = 0u; i < ${s}; i++) {\n      sum += wgSum[i];\n    }\n\n    if (sum == 0) {\n      for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n        x[offset + i] = ${Ze("f32",n,"uniforms.d_inv")};\n      }\n    } else {\n      for (var i: u32 = 0; i < uniforms.elements_per_wg && i + localOffset < uniforms.d_comp; i++) {\n        let f32input = ${it(C,n,"x[offset + i]")};\n        x[offset + i] = ${v.type.value}(exp(f32input - maxValue) / sum);\n      }\n    }\n  }`};e.compute({name:"AttentionProbsSoftmax",shaderCache:{hint:`${s};${h};${n}`},getShaderSource:g,getRunData:()=>({outputs:[],dispatchGroup:{x:r},programUniforms:m})},{inputs:[t],outputs:[]})},Zl=(e,t,r,o,n,s)=>{let u=[n.batchSize,n.numHeads,n.sequenceLength,n.kvSequenceLength+n.pastSequenceLength],d=s.scale===0?1/Math.sqrt(n.headSize):s.scale,a=Fe(n.headSize),m=n.headSize/a,h=12,g={x:Math.ceil(n.totalSequenceLength/h),y:Math.ceil(n.sequenceLength/h),z:n.batchSize*n.numHeads},w=et(t.dataType),v=[{type:"uint32",data:n.sequenceLength},{type:"uint32",data:m},{type:"uint32",data:n.totalSequenceLength},{type:"uint32",data:n.kvSequenceLength},{type:w,data:d}],y=[t,r],C=S=>{let _=M("q",t.dataType,t.dims,a),P=M("key",r.dataType,r.dims,a),A=j("output",t.dataType,u),z=Le(t.dataType),R=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"alpha",type:z}];return`\n  const beta: ${z} = 1.0;\n  const TILE_SIZE = ${h}u;\n\n  var<workgroup> tileQ: array<${_.type.storage}, ${h*h}>;\n  var<workgroup> tileK: array<${_.type.storage}, ${h*h}>;\n  ${S.registerUniforms(R).declareVariables(_,P,A)}\n  ${S.mainStart([h,h,1])}\n    // x holds the N and y holds the M\n    let headIdx = workgroup_id.z;\n    let m = workgroup_id.y * TILE_SIZE;\n    let n = workgroup_id.x * TILE_SIZE;\n    let lm = m + local_id.y;\n    let ln = n + local_id.x;\n\n    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;\n    let kOffset = uniforms.kv_sequence_length * uniforms.K * headIdx + n * uniforms.K;\n\n    var value = ${Ze(z,a)};\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m + local_id.y < uniforms.M && w + local_id.x < uniforms.K) {\n        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {\n        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      workgroupBarrier();\n\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = headIdx * uniforms.M * uniforms.N;\n    if (lm < uniforms.M && ln < uniforms.N) {\n      let outputIdx = headOffset + lm * uniforms.N + ln;\n      output[outputIdx] = ${tt("value",a)} * uniforms.alpha;\n    }\n  }`},I=e.compute({name:"AttentionProbs",shaderCache:{hint:`${a}`,inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType,gpuDataType:0}],dispatchGroup:g,programUniforms:v}),getShaderSource:C},{inputs:y,outputs:[-1]})[0];return Yl(e,I,n.batchSize*n.numHeads*n.sequenceLength,n.totalSequenceLength),I},Jl=(e,t,r,o)=>{let n=[o.batchSize,o.sequenceLength,o.vHiddenSize],s=12,u={x:Math.ceil(o.vHeadSize/s),y:Math.ceil(o.sequenceLength/s),z:o.batchSize*o.numHeads},d=[{type:"uint32",data:o.sequenceLength},{type:"uint32",data:o.totalSequenceLength},{type:"uint32",data:o.vHeadSize},{type:"uint32",data:o.numHeads},{type:"uint32",data:o.vHiddenSize}],a=m=>{let h=M("probs",t.dataType,t.dims),g=M("v",r.dataType,r.dims),w=j("output",t.dataType,n),v=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`\n  const TILE_SIZE = ${s}u;\n  var<workgroup> tileQ: array<${h.type.value}, ${s*s}>;\n  var<workgroup> tileK: array<${h.type.value}, ${s*s}>;\n  ${m.registerUniforms(v).declareVariables(h,g,w)}\n  ${m.mainStart([s,s,1])}\n   let headIdx = workgroup_id.z;\n   let m = workgroup_id.y * TILE_SIZE + local_id.y;\n   let n = workgroup_id.x * TILE_SIZE + local_id.x;\n\n   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;\n   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;\n\n   var value = ${h.type.storage}(0);\n   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n     if (m < uniforms.M && w + local_id.x < uniforms.K) {\n       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];\n     }\n     if (n < uniforms.N && w + local_id.y < uniforms.K) {\n       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];\n     }\n     workgroupBarrier();\n     for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];\n     }\n     workgroupBarrier();\n   }\n\n   // we need to transpose output from BNSH_v to BSND_v\n   let batchIdx = workgroup_id.z / uniforms.num_heads;\n   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;\n   let headOffset = (batchIdx * uniforms.M * uniforms.num_heads + currentBatchHeadNumber) * uniforms.N;\n   if (m < uniforms.M && n < uniforms.N) {\n     let outputIdx = batchIdx * uniforms.M *uniforms.v_hidden_size + m * uniforms.v_hidden_size\n       + currentBatchHeadNumber * uniforms.N + n;\n     output[outputIdx] = value;\n   }\n  }`};return e.compute({name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:n,dataType:t.dataType,gpuDataType:0}],dispatchGroup:u,programUniforms:d}),getShaderSource:a},{inputs:[t,r],outputs:[0]})[0]},nn=(e,t,r,o,n,s,u,d,a,m,h)=>{let g=Zl(e,t,r,a,m,h);Jl(e,g,o,m)},Ql=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],o=t.sequenceLength,n=t.inputHiddenSize,s=t.headSize,u=12,d={x:Math.ceil(t.headSize/u),y:Math.ceil(t.sequenceLength/u),z:t.batchSize*t.numHeads},a=[e.inputs[0],e.inputs[1],e.inputs[2]],m=[{type:"uint32",data:o},{type:"uint32",data:n},{type:"uint32",data:s},{type:"uint32",data:t.numHeads},{type:"uint32",data:t.headSize},{type:"uint32",data:t.hiddenSize},{type:"uint32",data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],h=g=>{let w=j("output_q",a[0].dataType,r),v=j("output_k",a[0].dataType,r),y=j("output_v",a[0].dataType,r),C=M("input",a[0].dataType,a[0].dims),I=M("weight",a[1].dataType,a[1].dims),S=M("bias",a[2].dataType,a[2].dims),_=C.type.storage,P=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`\n  const TILE_SIZE = ${u}u;\n  var<workgroup> tileInput: array<${_}, ${u*u}>;\n  var<workgroup> tileWeightQ: array<${_}, ${u*u}>;\n  var<workgroup> tileWeightK: array<${_}, ${u*u}>;\n  var<workgroup> tileWeightV: array<${_}, ${u*u}>;\n  ${g.registerUniforms(P).declareVariables(C,I,S,w,v,y)}\n  ${g.mainStart([u,u,1])}\n    let batchIndex = workgroup_id.z / uniforms.num_heads;\n    let headNumber = workgroup_id.z % uniforms.num_heads;\n    let m = workgroup_id.y * TILE_SIZE + local_id.y;\n    let n = workgroup_id.x * TILE_SIZE + local_id.x;\n\n    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;\n    let biasOffsetQ = headNumber * uniforms.head_size;\n    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;\n    let biasOffsetV = uniforms.hidden_size + biasOffsetK;\n\n    var valueQ = ${_}(0);\n    var valueK = ${_}(0);\n    var valueV = ${_}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m < uniforms.M && w + local_id.x < uniforms.K) {\n        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];\n      }\n      if (n < uniforms.N && w + local_id.y < uniforms.K) {\n        let offset = n + (w + local_id.y) * uniforms.ldb;\n        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];\n        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];\n        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];\n      }\n      workgroupBarrier();\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        let inputTileOffset = TILE_SIZE * local_id.y + k;\n        let weightTileOffset = TILE_SIZE * k + local_id.x;\n        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];\n        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];\n        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = (m * uniforms.N + n) % uniforms.head_size;\n    valueQ += bias[headOffset + biasOffsetQ];\n    valueK += bias[headOffset + biasOffsetK];\n    valueV += bias[headOffset + biasOffsetV];\n\n    let offset = workgroup_id.z * uniforms.M * uniforms.N;\n    if (m < uniforms.M && n < uniforms.N) {\n      let outputIdx = offset + m * uniforms.N + n;\n      output_q[outputIdx] = valueQ;\n      output_k[outputIdx] = valueK;\n      output_v[outputIdx] = valueV;\n    }\n  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:d,programUniforms:m}),getShaderSource:h},{inputs:a,outputs:[-1,-1,-1]})},Qa=(e,t)=>{let r=Kl(e.inputs,t),[o,n,s]=Ql(e,r);return nn(e,o,n,s,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t)}});var Xl,ed,td,Xa,ei=q(()=>{"use strict";Xt();$e();je();we();Xl=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(o,n,s)=>{let u=n.length;if(u!==o.length)throw new Error(`${s}: num dimensions != ${u}`);n.forEach((d,a)=>{if(d!==o[a])throw new Error(`${s}: dim[${a}] do not match`)})};if(e[0].dims.length>1){let o=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,o,"Invalid input scale"),r(e[2].dims,o,"Invalid input B"),r(e[3].dims,o,"Invalid input mean"),r(e[4].dims,o,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},ed=(e,t)=>{let{epsilon:r,spatial:o,format:n}=t,s=e[0].dims,u=o?Fe(s[s.length-1]):1,d=n==="NHWC"&&s.length>1?u:1,a=V.size(s)/u,m=Be(s.length)&&o,h=m?s.length:s,g=M("x",e[0].dataType,e[0].dims,u),w=M("scale",e[1].dataType,e[1].dims,d),v=M("bias",e[2].dataType,e[2].dims,d),y=M("inputMean",e[3].dataType,e[3].dims,d),C=M("inputVar",e[4].dataType,e[4].dims,d),I=j("y",e[0].dataType,h,u),S=()=>{let P="";if(o)P=`let cOffset = ${s.length===1?"0u":n==="NHWC"?`outputIndices[${s.length-1}] / ${u}`:"outputIndices[1]"};`;else if(n==="NCHW")P=`\n            ${I.indicesSet("outputIndices","0","0")}\n            let cOffset = ${I.indicesToOffset("outputIndices")};`;else{P=`var cIndices = ${w.type.indices}(0);\n                       cIndices[0] = outputIndices[${s.length-1}];`;for(let A=1;A<w.rank;A++)P+=`cIndices[${A}] = outputIndices[${A}];`;P+=`let cOffset = ${w.indicesToOffset("cIndices")};`}return P},_=P=>`\n  const epsilon = ${r};\n  ${P.registerUniform("outputSize","u32").declareVariables(g,w,v,y,C,I)}\n  ${P.mainStart()}\n  ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n    var outputIndices = ${I.offsetToIndices(`global_idx * ${u}`)};\n    ${S()}\n    let scale = ${w.getByOffset("cOffset")};\n    let bias = ${v.getByOffset("cOffset")};\n    let inputMean = ${y.getByOffset("cOffset")};\n    let inputVar = ${C.getByOffset("cOffset")};\n    let x = ${g.getByOffset("global_idx")};\n    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;\n    ${I.setByOffset("global_idx","value")}\n  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${o}_${u}`,inputDependencies:m?["rank","type","type","type","type"]:void 0},getShaderSource:_,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:m?[{type:"uint32",data:a},...F(s)]:[{type:"uint32",data:a}]})}},td=e=>ge(e),Xa=(e,t)=>{let{inputs:r,outputCount:o}=e,n=td({...t,outputCount:o});if(Qt.webgpu.validateInputContent&&Xl(r,n),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(ed(r,n))}});var rd,nd,ti,ri=q(()=>{"use strict";$e();we();rd=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},nd=e=>{let t=e[0].dims,r=e[0].dims[2],o=V.size(t)/4,n=e[0].dataType,s=M("input",n,t,4),u=M("bias",n,[r],4),d=M("residual",n,t,4),a=j("output",n,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:h=>`\n  const channels = ${r}u / 4;\n  ${h.declareVariables(s,u,d,a)}\n\n  ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes(o)}\n    let value = ${s.getByOffset("global_idx")}\n      + ${u.getByOffset("global_idx % channels")} + ${d.getByOffset("global_idx")};\n    ${a.setByOffset("global_idx","value")}\n  }`}},ti=e=>{rd(e.inputs),e.compute(nd(e.inputs))}});var od,Ae,ni,oi,ai,ii,si,ui,li,di,ci,ad,pi,mi,fi,hi,on,gi,an,yi,bi,wi,vi,$i,Si,xi,_i,Ci,Ii,Ai,Ti,Ei,Oi,Pi,ki,Bi,Yn=q(()=>{"use strict";Ne();$e();je();we();od=(e,t,r,o,n,s)=>{let u=Math.ceil(t/4),d="";typeof n=="string"?d=`${n}(a)`:d=n("a");let a=M("inputData",r,[u],4),m=j("outputData",o,[u],4);return`\n      ${e.registerUniform("vec_size","u32").declareVariables(a,m)}\n\n  ${s??""}\n\n  ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n\n    let a = ${a.getByOffset("global_idx")};\n    ${m.setByOffset("global_idx",d)}\n  }`},Ae=(e,t,r,o,n,s=e.dataType)=>({name:t,shaderCache:{hint:n,inputDependencies:["type"]},getShaderSource:u=>od(u,V.size(e.dims),e.dataType,s,r,o),getRunData:u=>({outputs:[{dims:e.dims,dataType:s}],dispatchGroup:{x:Math.ceil(V.size(u[0].dims)/64/4)},programUniforms:[{type:"uint32",data:Math.ceil(V.size(e.dims)/4)}]})}),ni=e=>{e.compute(Ae(e.inputs[0],"Abs","abs"))},oi=e=>{e.compute(Ae(e.inputs[0],"Acos","acos"))},ai=e=>{e.compute(Ae(e.inputs[0],"Acosh","acosh"))},ii=e=>{e.compute(Ae(e.inputs[0],"Asin","asin"))},si=e=>{e.compute(Ae(e.inputs[0],"Asinh","asinh"))},ui=e=>{e.compute(Ae(e.inputs[0],"Atan","atan"))},li=e=>{e.compute(Ae(e.inputs[0],"Atanh","atanh"))},di=e=>ge(e),ci=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute \'to\' from \'Cast\' operator): ${t.to}`)}e.compute(Ae(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},ad=e=>{let t=e.length>=2&&e[1].data!==0?e[1].getFloat32Array()[0]:Qr,r=e.length>=3&&e[2].data!==0?e[2].getFloat32Array()[0]:Xr;return ge({min:t,max:r})},pi=(e,t)=>{let r=e.inputs.length===1?t:ad(e.inputs),o=dt(e.inputs[0].dataType);e.compute(Ae(e.inputs[0],"Clip",n=>`clamp(${n}, clip_min_, clip_max_)`,`\n    const clip_min_: vec4<${o}> = vec4(${o}(${r.min}));\n    const clip_max_: vec4<${o}> = vec4(${o}(${r.max}));\n`,r.cacheKey),{inputs:[0]})},mi=e=>{e.compute(Ae(e.inputs[0],"Ceil","ceil"))},fi=e=>{e.compute(Ae(e.inputs[0],"Cos","cos"))},hi=e=>{e.compute(Ae(e.inputs[0],"Cosh","cosh"))},on=e=>ge(e),gi=(e,t)=>{let r=dt(e.inputs[0].dataType);e.compute(Ae(e.inputs[0],"Elu",o=>`elu_vf32(${o})`,`\n  const elu_alpha_ = ${r}(${t.alpha});\n\n  fn elu_f32(a: ${r}) -> ${r} {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }`,t.cacheKey))},an=(e,t="f32")=>`\nconst r0: ${t} = 0.3275911;\nconst r1: ${t} = 0.254829592;\nconst r2: ${t} = -0.284496736;\nconst r3: ${t} = 1.421413741;\nconst r4: ${t} = -1.453152027;\nconst r5: ${t} = 1.061405429;\n\nfn erf_vf32(v: ${e}) -> ${e} {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}`,yi=e=>{let t=dt(e.inputs[0].dataType);e.compute(Ae(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,an(`vec4<${t}>`,t)))},bi=e=>{e.compute(Ae(e.inputs[0],"Exp","exp"))},wi=e=>{e.compute(Ae(e.inputs[0],"Floor","floor"))},vi=e=>{let t=dt(e.inputs[0].dataType);e.compute(Ae(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,an(`vec4<${t}>`,t)))},$i=(e,t)=>{let r=dt(e.inputs[0].dataType);e.compute(Ae(e.inputs[0],"LeakyRelu",o=>`select(leaky_relu_alpha_ * ${o}, ${o}, ${o} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},Si=e=>{e.compute(Ae(e.inputs[0],"Not",t=>`!${t}`))},xi=e=>{e.compute(Ae(e.inputs[0],"Neg",t=>`-${t}`))},_i=e=>{e.compute(Ae(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},Ci=e=>{let t=dt(e.inputs[0].dataType);e.compute(Ae(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Ii=e=>{e.compute(Ae(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},Ai=e=>{e.compute(Ae(e.inputs[0],"Sin","sin"))},Ti=e=>{e.compute(Ae(e.inputs[0],"Sinh","sinh"))},Ei=e=>{e.compute(Ae(e.inputs[0],"Sqrt","sqrt"))},Oi=e=>{e.compute(Ae(e.inputs[0],"Tan","tan"))},Pi=e=>{e.compute(Ae(e.inputs[0],"Tanh","tanh"))},ki=(e,t)=>{let r=dt(e.inputs[0].dataType);return e.compute(Ae(e.inputs[0],"ThresholdedRelu",o=>`select(vec4<${r}>(0.0), ${o}, ${o} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},Bi=e=>{e.compute(Ae(e.inputs[0],"Log","log"))}});var sd,ud,Ri,Di=q(()=>{"use strict";$e();we();Yn();sd=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},ud=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=M("input",e[0].dataType,e[0].dims,4),o=M("bias",e[0].dataType,[e[0].dims[2]],4),n=j("output",e[0].dataType,t,4),s=V.size(t)/4,u=Le(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)}}),getShaderSource:a=>`\n  const M_SQRT2 = sqrt(2.0);\n  const halfChannels = ${e[0].dims[2]/4/2}u;\n\n  ${a.declareVariables(r,o,n)}\n\n  ${an(`vec4<${u}>`,u)}\n\n  ${a.mainStart()}\n    ${a.guardAgainstOutOfBoundsWorkgroupSizes(s)}\n    let biasIdx = global_idx % halfChannels;\n    let batchIndex = global_idx / halfChannels;\n    let inputOffset = biasIdx + batchIndex * halfChannels * 2;\n    let valueLeft = input[inputOffset] + bias[biasIdx];\n    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];\n    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);\n\n    ${n.setByOffset("global_idx","valueLeft * geluRight")}\n  }`}},Ri=e=>{sd(e.inputs),e.compute(ud(e.inputs))}});var ld,dd,ht,Mi,Ui,zi,Vi,Ni,Wi,Hi,Gi,Li,Fi,ji=q(()=>{"use strict";Ne();$e();we();ld=(e,t,r,o,n,s,u,d,a,m,h,g,w)=>{let v,y;typeof d=="string"?v=y=(R,N)=>`${d}((${R}),(${N}))`:typeof d=="function"?v=y=d:(v=d.scalar,y=d.vector);let C=g?t.length:t,I=g?r.length:r,S=g?o.length:o,_=j("outputData",h,S,4),P=M("aData",a,C,4),A=M("bData",m,I,4),z;if(n)if(s){let R=V.size(t)===1,N=V.size(r)===1,T=t.length>0&&t[t.length-1]%4===0,H=r.length>0&&r[r.length-1]%4===0;R||N?z=_.setByOffset("global_idx",y(R?`${P.type.value}(${P.getByOffset("0")}.x)`:P.getByOffset("global_idx"),N?`${A.type.value}(${A.getByOffset("0")}.x)`:A.getByOffset("global_idx"))):z=`\n            let outputIndices = ${_.offsetToIndices("global_idx * 4u")};\n            let offsetA = ${P.broadcastedIndicesToOffset("outputIndices",_)};\n            let offsetB = ${A.broadcastedIndicesToOffset("outputIndices",_)};\n            ${_.setByOffset("global_idx",y(u||T?P.getByOffset("offsetA / 4u"):`${P.type.value}(${P.getByOffset("offsetA / 4u")}[offsetA % 4u])`,u||H?A.getByOffset("offsetB / 4u"):`${A.type.value}(${A.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}\n          `}else z=_.setByOffset("global_idx",y(P.getByOffset("global_idx"),A.getByOffset("global_idx")));else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let R=(N,T,H="")=>{let ie=`aData[indexA${T}][componentA${T}]`,Z=`bData[indexB${T}][componentB${T}]`;return`\n            let outputIndices${T} = ${_.offsetToIndices(`global_idx * 4u + ${T}u`)};\n            let offsetA${T} = ${P.broadcastedIndicesToOffset(`outputIndices${T}`,_)};\n            let offsetB${T} = ${A.broadcastedIndicesToOffset(`outputIndices${T}`,_)};\n            let indexA${T} = offsetA${T} / 4u;\n            let indexB${T} = offsetB${T} / 4u;\n            let componentA${T} = offsetA${T} % 4u;\n            let componentB${T} = offsetB${T} % 4u;\n            ${N}[${T}] = ${H}(${v(ie,Z)});\n          `};h===9?z=`\n            var data = vec4<u32>(0);\n            ${R("data",0,"u32")}\n            ${R("data",1,"u32")}\n            ${R("data",2,"u32")}\n            ${R("data",3,"u32")}\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:z=`\n            ${R("outputData[global_idx]",0)}\n            ${R("outputData[global_idx]",1)}\n            ${R("outputData[global_idx]",2)}\n            ${R("outputData[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(P,A,_)}\n\n        ${w??""}\n\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${z}\n      }`},dd=(e,t,r,o,n,s,u=r.dataType)=>{let d=!V.areEqual(r.dims,o.dims),a=r.dims,m=V.size(r.dims),h=!1,g=!1,w=[d];if(d){let y=lt.calcShape(r.dims,o.dims,!1);if(!y)throw new Error("Can\'t perform binary op on the given tensors");a=y,m=V.size(a);let C=V.size(r.dims)===1,I=V.size(o.dims)===1,S=r.dims.length>0&&r.dims[r.dims.length-1]%4===0,_=o.dims.length>0&&o.dims[o.dims.length-1]%4===0;w.push(C),w.push(I),w.push(S),w.push(_);let P=1;for(let A=1;A<a.length;A++){let z=r.dims[r.dims.length-A]??1,R=o.dims[o.dims.length-A]??1;if(z===R)P*=z;else break}P%4===0?(g=!0,h=!0):(C||I||S||_)&&(h=!0)}else h=!0;w.push(h);let v=Be(r.dims.length)&&Be(o.dims.length)&&Be(a.length);return{name:e,shaderCache:{hint:t+w.map(y=>y.toString()).join("_"),inputDependencies:v?["rank","rank"]:["dims","dims"]},getShaderSource:y=>ld(y,r.dims,o.dims,a,h,d,g,n,r.dataType,o.dataType,u,v,s),getRunData:()=>({outputs:[{dims:a,dataType:u}],dispatchGroup:{x:Math.ceil(m/64/4)},programUniforms:v?[{type:"uint32",data:Math.ceil(V.size(a)/4)},...F(r.dims),...F(o.dims),...F(a)]:[{type:"uint32",data:Math.ceil(V.size(a)/4)}]})}},ht=(e,t,r,o,n,s)=>{e.compute(dd(t,n??"",e.inputs[0],e.inputs[1],r,o,s))},Mi=e=>{ht(e,"Add",(t,r)=>`${t}+${r}`)},Ui=e=>{ht(e,"Div",(t,r)=>`${t}/${r}`)},zi=e=>{ht(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},Vi=e=>{ht(e,"Mul",(t,r)=>`${t}*${r}`)},Ni=e=>{let t=M("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;ht(e,"Pow",{scalar:(o,n)=>`pow_custom(${o},${n})`,vector:(o,n)=>`pow_vector_custom(${o},${n})`},`\n    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {\n      if (b == ${t}(0.0)) {\n        return ${t}(1.0);\n      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {\n        return ${t}(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {\n      // TODO: implement vectorized pow\n      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      `)},Wi=e=>{ht(e,"Sub",(t,r)=>`${t}-${r}`)},Hi=e=>{ht(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},Gi=e=>{ht(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},Li=e=>{ht(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},Fi=e=>{ht(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}});var pd,md,fd,hd,qi,Ki,Yi=q(()=>{"use strict";$e();je();we();pd=e=>{if(!e||e.length<1)throw new Error("too few inputs");let t=e[0].dataType,r=e[0].dims.length;for(let o of e){if(o.dataType!==t)throw new Error("input tensors should be one type");if(o.dims.length!==r)throw new Error("input tensors should have the same shape")}},md=(e,t)=>`\n  fn calculateInputIndex(index: u32) -> u32 {\n    let sizeInConcatAxis = array<u32, ${e}u>(${t});\n    for (var i: u32 = 0u; i < ${e}; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ${e}u;\n  }`,fd=(e,t)=>{let r=e.length,o=[];for(let n=0;n<r;++n){let s=t.setByOffset("global_idx",e[n].getByIndices("indices"));r===1?o.push(s):n===0?o.push(`if (inputIndex == ${n}u) { ${s} }`):n===r-1?o.push(`else { ${s} }`):o.push(`else if (inputIndex == ${n}) { ${s} }`)}return o.join(`\n`)},hd=(e,t)=>{let r=e[0].dims.slice();if(t>=r.length||t<-1*r.length)throw new Error("axis specified for concat doesn\'t match input dimensionality");let o=t<0?r.length+t:t,n=r.slice(0);for(let A=1;A<e.length;A++){let z=e[A].dims.slice();for(let R=0;R<r.length;R++)if(R===o)n[o]+=z[R];else if(r[R]!==z[R])throw new Error("non concat dimensions must match")}let s=V.size(n),u=new Array(e.length),d=new Array(e.length),a=e[0].dataType,m=0,h=[],g=[],w=[],v=[{type:"uint32",data:s}];for(let A=0;A<e.length;++A)m+=e[A].dims[o],u[A]=m,w.push(Be(e[A].dims.length)),g.push(w[A]?e[A].dims.length:e[A].dims),d[A]=M(`input${A}`,a,g[A]),h.push(w[A]?"rank":"dims"),v.push({type:"uint32",data:u[A]});for(let A=0;A<e.length;++A)w[A]&&v.push(...F(e[A].dims));let y=Be(n.length);y&&v.push(...F(n));let C=y?n.length:n,I=j("output",a,C),S=I.indicesGet("indices",o),_=Array.from(Array(u.length).keys()).map(A=>`uniforms.sizeInConcatAxis${A}`).join(","),P=A=>`\n\n  ${(()=>{A.registerUniform("outputSize","u32");for(let z=0;z<e.length;z++)A.registerUniform(`sizeInConcatAxis${z}`,"u32");return A.declareVariables(...d,I)})()}\n\n  ${md(u.length,_)}\n\n  ${A.mainStart()}\n    ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n    var indices = ${I.offsetToIndices("global_idx")};\n\n    let inputIndex = calculateInputIndex(${S});\n    if (inputIndex != 0u) {\n      let sizeInConcatAxis = array<u32, ${u.length}u>(${_});\n      ${S} -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ${fd(d,I)}\n  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:v}),getShaderSource:P}},qi=(e,t)=>{pd(e.inputs),e.compute(hd(e.inputs,t.axis))},Ki=e=>ge({axis:e.axis})});var gt,sn,At=q(()=>{"use strict";$e();gt=(e,t)=>{switch(e.activation){case"Relu":return{activationFunction:"",applyActivation:`value = max(value, ${t}(0.0));`};case"Sigmoid":return{activationFunction:"",applyActivation:`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`};case"Clip":return{activationFunction:`const clip_min_=${t}(${e.clipMin});const clip_max_=${t}(${e.clipMax});`,applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},sn=e=>{let t=e?.activation||"";if(t==="Clip"){let[r,o]=e?.activation_params||[Qr,Xr];return{activation:t,clipMax:o,clipMin:r,activationCacheKey:`${t}:${r},${o}`}}return{activation:t,activationCacheKey:t}}});var Ke,un,ln=q(()=>{"use strict";Ke=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},un=e=>`\n      ${e?"value = value + getBiasByOutputCoords(coords);":""}\n      `});var dn,Zn=q(()=>{"use strict";dn=e=>`\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));\n}\n`});var gd,yd,xr,Zi,bd,_r,wd,cn,Cr=q(()=>{"use strict";$e();we();At();ln();gd=(e,t)=>e?`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `:`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `,yd=(e,t)=>e?`\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}\n        }`:`\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}\n        }`,xr=(e,t,r="f32",o,n=!1,s=32,u=!1,d=32)=>{let a=t[1]*e[1],m=t[0]*e[0],h=n?a:s,g=n?s:a,w=h/t[0],v=s/t[1];if(!((n&&w===4&&e[1]===4||!n&&(w===3||w===4))&&h%t[0]===0&&s%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${n} is true, innerElementSize ${w} and workPerThread[1] ${e[1]} must be 4.\n      Otherwise, innerElementSize ${w} must be 3 or 4.\n  tileAWidth ${h} must be divisible by workgroupSize[0]${t[0]}. tileInner ${s} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`\nvar<workgroup> mm_Asub: array<array<vec${w}<${r}>, ${h/w}>, ${g}>;\nvar<workgroup> mm_Bsub: array<array<vec4<${r}>, ${m/e[0]}>, ${s}>;\n\nconst rowPerThread = ${e[1]};\nconst colPerThread = ${e[0]};\nconst innerElementSize = ${w};\nconst tileInner = ${s};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ${u?"0":"i32(globalId.z)"};\n  ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n  let globalRowStart = i32(workgroupId.y) * ${a};\n\n  let numTiles = ${u?`${Math.ceil(d/s)}`:"(uniforms.dimInner - 1) / tileInner + 1"};\n  var kStart = ${u?`i32(globalId.z) * ${d}`:"0"};\n\n  var acc: array<vec4<${r}>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ${v};\n  for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ${gd(n,o)}\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ${v}; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${o?", batchIndices":""});\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ${w===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}\n\n          ${yd(n,w)}\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}`},Zi=(e,t)=>e?`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol${t?", batchIndices":""});\n            `:`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol${t?", batchIndices":""});\n            `,bd=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",_r=(e,t,r="f32",o,n=!1,s=32,u=!1,d=32,a=!1)=>{let m=e[1]*t[1],h=e[0]*t[0],g=n?m:s,w=n?s:m;if(!(w%t[1]===0&&g%t[0]===0&&s%t[1]===0))throw new Error(`tileAHight ${w} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${g} must be divisible by workgroupSize[0]${t[0]}, tileInner ${s} must be divisible by workgroupSize[1]${t[1]}`);let v=w/t[1],y=g/t[0],C=s/t[1],I=a?`\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ${m};\n    let globalColStart = i32(workgroupId.x) * ${h};\n\n    // Loop over shared dimension.\n    for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ${w}; inputRow = inputRow + ${t[1]}) {\n        for (var inputCol = localCol; inputCol < ${g}; inputCol = inputCol + ${t[0]}) {\n          ${Zi(n,o)}\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${t[1]}) {\n            for (var inputCol = localCol; inputCol < ${h}; inputCol = inputCol + ${t[0]}) {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol${o?", batchIndices":""});\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<${r}, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ${n?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ${t[1]};\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ${t[0]};\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    `:`\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ${m};\n\nlet tileRowA = i32(localId.y) * ${v};\nlet tileColA = i32(localId.x) * ${y};\nlet tileRowB = i32(localId.y) * ${C};\n// Loop over shared dimension.\nfor (var t = 0; t < numTiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ${v}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ${y}; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ${Zi(n,o)}\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ${C}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol${o?", batchIndices":""});\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<${r}, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ${bd(n)}\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n`;return`\n  var<workgroup> mm_Asub : array<array<${r}, ${g}>, ${w}>;\n  var<workgroup> mm_Bsub : array<array<${r}, ${h}>, ${s}>;\n  const rowPerThread = ${e[1]};\n  const colPerThread = ${e[0]};\n  const tileInner = ${s};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ${u?"0":"i32(globalId.z)"};\n    ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n    let numTiles = ${u?`${Math.ceil(d/s)}`:"(uniforms.dimInner - 1) / tileInner + 1"};\n    var kStart = ${u?`i32(globalId.z) * ${d}`:"0"};\n\n    var acc : array<array<${r}, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ${I}\n  }\n`},wd=(e,t,r,o,n,s=!1)=>{let[u,d,a]=n,[m,h,g,w]=o,v=er(u,a),y=er(d,a),C=Le(o[0].type.tensor),I=()=>{let P=h.rank,A=m.rank,z=`var aIndices: ${h.type.indices};`;for(let R=P-2-1,N=A-1;R>=0;R--,N--)z+=`\naIndices[${R}] = ${A>1?`batchIndices[${N}]`:"batchIndices"};`;return v.forEach(R=>{z+=`\naIndices[${R}] = 0;`}),z+=`\naIndices[${P-2}] = u32(row);\n                   aIndices[${P-1}] = u32(colIn);`,z},S=()=>{let P=g.rank,A=m.rank,z=`var bIndices: ${g.type.indices};`;for(let R=P-2-1,N=A-1;R>=0;R--,N--)z+=`\nbIndices[${R}] = ${A>1?`batchIndices[${N}]`:"batchIndices"};`;return y.forEach(R=>{z+=`\nbIndices[${R}] = 0;`}),z+=`\nbIndices[${P-2}] = u32(row);\n                   bIndices[${P-1}] = u32(colIn);`,z};return`\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${m.type.indices}) -> ${Ke(e,C)} {\n      var value = ${Ke(e,C)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dimAOuter && col < uniforms.dimInner)\n      {\n        ${I()}\n        value = ${h.getByIndices("aIndices")};\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${m.type.indices}) -> ${Ke(e,C)} {\n      var value = ${Ke(e,C)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dimInner && col < uniforms.dimBOuter)\n      {\n        ${S()}\n        value = ${g.getByIndices("bIndices")};\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${Ke(e,C)}) {\n      let col = colIn * ${e};\n      if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ${t?`value = value + ${s?"bias[colIn]":`${Ke(e,C)}(bias[row])`};`:""}\n        ${r}\n        ${w.setByIndices("vec3<u32>(coords)","value")}\n      }\n    }\n    `},cn=(e,t,r,o,n=!1)=>{let s=e[0].dims,u=e[1].dims,d=s.slice(0,-2),a=u.slice(0,-2),m=o?o.slice(0,-2):r.slice(0,-2),h=Be(m.length),g=h?m.length:m,w=en("batchDims",e[0].dataType,g,1),v=V.size(m),y=s[s.length-2],C=s[s.length-1],I=u[u.length-1],S=C%4===0&&I%4===0,_=y<=8?[4,1,1]:[4,4,1],P=[8,8,1],A=[Math.ceil(I/P[0]/_[0]),Math.ceil(y/P[1]/_[1]),Math.ceil(v/P[2]/_[2])],z=Le(e[0].dataType),R=S?4:1,N=[...d,y,C/R],T=Be(N.length),H=T?N.length:N,ie=[...a,C,I/R],Z=Be(ie.length),K=Z?ie.length:ie,Q=[v,y,I/R],X=M("a",e[0].dataType,H,R),Ee=M("b",e[1].dataType,K,R),Pe=j("result",e[0].dataType,Q.length,R),fe=[X,Ee],Ce=[{type:"int32",data:y},{type:"int32",data:I},{type:"int32",data:C}];h&&Ce.push(...F(m)),T&&Ce.push(...F(N)),Z&&Ce.push(...F(ie));let he=[];he.push(T?"rank":"dims"),he.push(Z?"rank":"dims");let ye=e.length>2,{activationFunction:We,applyActivation:Me}=gt(t,Pe.type.value),Ge=wd(R,ye,Me,[w,X,Ee,Pe],[d,a,m],n);if(ye){let re=n?R:1;fe.push(M("bias",e[2].dataType,e[2].dims.length,re)),Ce.push(...F(e[2].dims)),he.push("rank")}Ce.push(...F(Q));let G=re=>`\n  ${re.registerUniform("dimAOuter","i32").registerUniform("dimBOuter","i32").registerUniform("dimInner","i32").registerInternalVariables(w).declareVariables(...fe,Pe)}\n  ${We}\n  ${Ge}\n  ${S?xr(_,P,z,w):_r(_,P,z,w)}\n                   `;return{name:"MatMul",shaderCache:{hint:t.activationCacheKey+`${_}${S}${n}`,inputDependencies:he},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:A[0],y:A[1],z:A[2]},programUniforms:Ce}),getShaderSource:G}}});var vd,Ji,Qi=q(()=>{"use strict";It();we();At();ln();Zn();Cr();vd=(e,t,r,o,n=!1,s,u=4,d=4,a=4,m="f32")=>{let h=Z=>{switch(Z){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${m}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Z} is not supported.`)}},g=Z=>{switch(Z){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${Z} is not supported.`)}},w=e?`\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    `:`\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    `,v=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,y=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",C=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",I=e?"row":"col",S=e?"col":"row",_=`\n    let inChannels = i32(uniforms.w_shape[2]);\n    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n    let outRow = ${I} / outWidth;\n    let outCol = ${I} % outWidth;\n\n    let WRow = ${S} / (filterDims[1] * inChannels);\n    let WCol = ${S} / inChannels % filterDims[1];\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\n    let xCh = ${S} % inChannels;\n    var resData = ${Ke(u,m)}(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the \'same\' padding type.\n    if (xRow >= 0 && xRow < ${y} && xCol >= 0 && xCol < ${C}) {\n      ${w}\n      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));\n      ${h(u)}\n    }\n    return resData;`,P=e?t&&o?`\n    let col = colIn * ${u};\n    ${_}`:`\n    let col = colIn * ${u};\n    if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n      ${_}\n    }\n    return ${Ke(u,m)}(0.0);`:o&&r?`\n    let col = colIn * ${u};\n    ${_}`:`\n    let col = colIn * ${u};\n    if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n      ${_}\n    }\n    return ${Ke(u,m)}(0.0);`,A=`${g(d)}`,z=Ke(a,m),R=e?Ke(u,m):Ke(d,m),N=e?Ke(d,m):Ke(u,m),{activationFunction:T,applyActivation:H}=gt(s,z);return`\n    ${T}\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${R} {\n      ${e?P:A}\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${N} {\n      ${e?A:P}\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${z}) {\n      let col = colIn * ${a};\n      if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n      {\n      var value = valueIn;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${v}\n      ${un(n)}\n      ${H}\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }`},Ji=(e,t,r,o,n,s,u,d)=>{let a=t.format==="NHWC",m=a?e[0].dims[3]:e[0].dims[1],h=r[0],g=a?r[2]:r[3],w=a?r[1]:r[2],v=a?r[3]:r[1],y=a&&(m%4===0||m%3===0)&&v%4===0,C=a?v:g*w,I=a?g*w:v,S=[8,8,1],_=o<=8?[4,1,1]:[4,4,1],P=[Math.ceil(C/S[0]/_[0]),Math.ceil(I/S[1]/_[1]),Math.ceil(h/S[2]/_[2])];De("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${P}`);let A=y?a&&m%4!==0?3:4:1,z=S[1]*_[1],R=S[0]*_[0],N=Math.max(S[0]*A,S[1]),T=o%z===0,H=n%R===0,ie=s%N===0,Z=y?[A,4,4]:[1,1,1],K=Le(e[0].dataType),Q=y?4:1,X=[{type:"int32",data:o},{type:"int32",data:n},{type:"int32",data:s}],Ee=M("x",e[0].dataType,e[0].dims.length,A===3?1:A),Pe=M("w",e[1].dataType,e[1].dims.length,Q),fe=[Ee,Pe];X.push(...F(e[0].dims)),X.push(...F(e[1].dims));let Ce=`\n      fn setOutputAtIndex(flatIndex : i32, value : ${y?`vec4<${K}>`:K}) {\n        result[flatIndex] = ${y?`vec4<${K}>`:K}(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${y?`vec4<${K}>`:K}) {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ${y?"/ 4":""}, value);\n      }`;if(u){let ye=M("bias",e[2].dataType,e[2].dims.length,Q);fe.push(ye),X.push(...F(e[2].dims)),Ce+=`\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${y?`vec4<${K}>`:K} {\n          return bias[coords.${a?"w":"y"}${y?"/ 4":""}];\n        }`}let he=j("result",e[0].dataType,r.length,Q);return X.push(...F(r)),{name:"Conv2DMatMul",shaderCache:{hint:t.cacheKey},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:P[0],y:P[1],z:P[2]},programUniforms:X}),getShaderSource:ye=>`\n        ${dn("uniforms.result_strides")}\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ${ye.registerUniform("dimAOuter","i32").registerUniform("dimBOuter","i32").registerUniform("dimInner","i32").declareVariables(...fe,he)}\n        const filterDims : vec2<i32> = vec2<i32>(${t.kernelShape[0]}, ${t.kernelShape[1]});\n        const pad : vec2<i32> = vec2<i32>(${t.pads[0]}, ${t.pads[1]});\n        const stride : vec2<i32> = vec2<i32>(${t.strides[0]}, ${t.strides[1]});\n        const dilation : vec2<i32> = vec2<i32>(${t.dilations[0]}, ${t.dilations[1]});\n        ${Ce}\n        ${vd(a,T,H,ie,u,t,Z[0],Z[1],Z[2],K)}\n            ${y?xr(_,S,K,void 0,!a,N):_r(_,S,K,void 0,!a,N,!1,void 0,d)}`}}});var Jn,Xi=q(()=>{"use strict";$e();we();Xn();At();Jn=(e,t,r)=>{let o=e.length>2,n=o?"value += b[output_channel];":"",s=e[0].dims,u=e[1].dims,d=u[0]/t.group,a=t.format==="NHWC",m=Qn(s,u,t.dilations,t.pads,t.strides,a),h=V.size(m),g=j("output",e[0].dataType,m),{activationFunction:w,applyActivation:v}=gt(t,g.type.value),y=M("x",e[0].dataType,s),C=M("w",e[1].dataType,u),I=[y,C];o&&I.push(M("b",e[2].dataType,e[2].dims));let S=_=>`\n  const strides: vec2<u32> = vec2(${t.strides[0]}u, ${t.strides[1]}u);\n  const pads: vec2<u32> = vec2(${t.pads[0]}u, ${t.pads[1]}u);\n\n  ${_.declareVariables(...I,g)}\n\n  ${w}\n\n  ${_.mainStart()}\n    ${_.guardAgainstOutOfBoundsWorkgroupSizes(h)}\n\n    let outputIndices = ${g.offsetToIndices("global_idx")};\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[${a?3:1}];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${a?1:2}], outputIndices[${a?2:3}]) * strides - pads;\n    let group_id: u32 = output_channel / ${d}u;\n\n    var value: ${g.type.value} = ${g.type.value}(0);\n    for (var wInChannel: u32 = 0u; wInChannel < ${u[1]}u; wInChannel++) {\n      let input_channel = group_id * ${u[1]}u + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < ${u[2]}u; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * ${t.dilations[0]}u;\n\n        if (xHeight < 0u || xHeight >= ${s[a?1:2]}u) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < ${u[3]}u; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * ${t.dilations[1]}u;\n          if (xWidth < 0u || xWidth >= ${s[a?2:3]}u) {\n            continue;\n          }\n\n          let xVal = ${a?y.get("batch","xHeight","xWidth","input_channel"):y.get("batch","input_channel","xHeight","xWidth")};\n          let wVal = ${C.get("output_channel","wInChannel","wHeight","wWidth")};\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${n}\n    ${v}\n    ${g.setByOffset("global_idx","value")}\n  }`;return{name:"GroupedConv",shaderCache:{hint:t.cacheKey},getRunData:()=>({outputs:[{dims:r?r(m):m,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)}}),getShaderSource:S}}});var eo,$d,es,to=q(()=>{"use strict";$e();Cr();we();At();eo=(e,t,r,o,n=!1)=>{let s=e[0].dims,u=e[1].dims,d=s[s.length-2],a=u[u.length-1],m=s[s.length-1],h=Fe(a),g=Fe(m),w=Fe(d),v=V.size(r)/h/w,y=e.length>2,C=o?o.slice(0,-2):r.slice(0,-2),S=[V.size(C),d,a],_=[{type:"uint32",data:v},{type:"uint32",data:d},{type:"uint32",data:a},{type:"uint32",data:m},...F(C),...F(s),...F(u)];y&&_.push(...F(e[2].dims)),_.push(...F(S));let P=A=>{let z=en("batch_dims",e[0].dataType,C.length),R=M("a",e[0].dataType,s.length,g),N=M("b",e[1].dataType,u.length,h),T=j("output",e[0].dataType,S.length,h),{activationFunction:H,applyActivation:ie}=gt(t,T.type.value),Z=[R,N],K="";if(y){let he=n?h:1;Z.push(M("bias",e[2].dataType,e[2].dims.length,he)),K=`${n?`value += bias[col / ${he}];`:`value += ${T.type.value}(bias[row + i]);`}`}let Q=s.slice(0,-2),X=u.slice(0,-2),Ee=er(Q,C),Pe=er(X,C),fe=(he,ye)=>{let We=he.rank,Me=he.name;if(We===2)return`var ${Me}_indices = ${he.type.indices}(0u, 0u);`;let Ge=z.rank,G=`var ${Me}_indices: ${he.type.indices};`;for(let re=We-2-1,be=Ge-1;re>=0;re--,be--)G+=`\n${Me}_indices[${re}] = ${Ge>1?`batch_indices[${be}]`:"batch_indices"};`;return ye.forEach(re=>{G+=`\n${Me}_indices[${re}] = 0;`}),G+=`${Me}_indices[${We-2}] = 0u;\n                     ${Me}_indices[${We-1}] = 0u;`,G},Ce=()=>{let he=`var a_data: ${R.type.value};`;for(let ye=0;ye<g;ye++)he+=`\n              let b_data${ye} = b[(b_offset + (k + ${ye}) * uniforms.N + col) / ${h}];`;for(let ye=0;ye<w;ye++){he+=`a_data = a[(a_offset + (row + ${ye}) * uniforms.K + k) / ${g}];`;for(let We=0;We<g;We++)he+=`\n            values[${ye}] = fma(${N.type.value}(a_data${g===1?"":`[${We}]`}), b_data${We}, values[${ye}]);\n`}return he};return`\n  ${A.registerUniform("outputSize","u32").registerUniform("M","u32").registerUniform("N","u32").registerUniform("K","u32").registerInternalVariables(z).declareVariables(...Z,T)}\n  ${H}\n  ${A.mainStart()}\n    ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n    let col = (global_idx % (uniforms.N / ${h})) * ${h};\n    var index1 = global_idx / (uniforms.N / ${h});\n    let stride1 = uniforms.M / ${w};\n    let row = (index1 % stride1) * ${w};\n    let batch = index1 / stride1;\n\n    ${r.length===2?"":`let batch_indices = ${z.offsetToIndices("batch")};`}\n    ${fe(R,Ee)}\n    let a_offset = ${R.indicesToOffset("a_indices")};\n    ${fe(N,Pe)}\n    let b_offset = ${N.indicesToOffset("b_indices")};\n    var values: array<${T.type.value}, ${w}>;\n    for (var k: u32 = 0u; k < uniforms.K; k = k + ${g}) {\n      ${Ce()}\n    }\n    for (var i = 0u; i < ${w}u; i++) {\n      var value = values[i];\n      ${K}\n      ${ie}\n      let cur_indices = ${T.type.indices}(batch, row + i, col);\n      let offset = ${T.indicesToOffset("cur_indices")};\n      ${T.setByOffset(`offset / ${h}`,"value")};\n    }\n  }\n  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activationCacheKey}_${h}_${g}_${w}_${n}`,inputDependencies:y?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:_}),getShaderSource:P}},$d=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},es=e=>{$d(e.inputs);let t=lt.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can\'t use matmul on the given tensors");let r=t[t.length-1],o=e.inputs[0].dims[e.inputs[0].dims.length-1];r<8&&o<8?e.compute(eo(e.inputs,{activation:"",activationCacheKey:""},t)):e.compute(cn(e.inputs,{activation:"",activationCacheKey:""},t))}});var Qn,ts,Sd,rs,ro,xd,_d,no,Xn=q(()=>{"use strict";$e();je();Qi();Cr();Xi();At();to();tr();Qn=(e,t,r,o,n,s)=>{let u=e[0],d=e.slice(s?1:2,s?3:4),a=d.length,m=t[0],g=t.slice(2).map((y,C)=>y+(y-1)*(r[C]-1)),v=d.map((y,C)=>y+o[C]+o[C+a]).map((y,C)=>Math.floor((y-g[C]+n[C])/n[C]));return v.splice(0,0,u),v.splice(s?3:1,0,m),v},ts=[2,3,1,0],Sd=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[1]*t.group;if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error(`dilations should be ${n}D`);if(t.strides.length!==n)throw new Error(`strides should be ${n}D`);if(t.pads.length!==n*2)throw new Error(`pads should be ${n*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},rs=(e,t)=>{let r=e.kernelShape.slice();for(let s=2;s<t[1].dims.length;++s)r[s-2]===0&&(r[s-2]=t[1].dims[s]);let o=e.pads.slice();Ut.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,o,e.format==="NHWC",e.autoPad);let n=Object.assign({},e);return Object.assign(n,{kernelShape:r,pads:o,cacheKey:e.cacheKey}),n},ro=e=>{let t=sn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],n=e.dilations,s=e.group,u=e.kernel_shape,d=e.pads,a=e.strides,m=e.w_is_const();return ge({autoPad:o,format:r,dilations:n,group:s,kernelShape:u,pads:d,strides:a,wIsConst:m,...t})},xd=(e,t,r)=>{let o=rs(r,t),n=r.format==="NHWC";if(r.group!==1){e.compute(Jn(t,o));return}let s=t.length===3,u=t[0].dims[n?1:2],d=t[0].dims[n?2:3],a=t[0].dims[n?3:1],m=t[1].dims[2],h=t[1].dims[3],g=Qn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,n),w=g[n?1:2],v=g[n?2:3],y=g[n?3:1],C=n&&m===u&&h===d&&r.pads[0]===0&&r.pads[1]===0;if(C||m===1&&h===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let R=g[0],N,T,H,ie=[];if(n){let Q=e.kernelCustomData.wT??e.compute(st(t[1],ts),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=Q),C){let X=u*d*a;N=t[0].reshape([1,R,X]),T=Q.reshape([1,X,y]),H=[1,R,y]}else N=t[0].reshape([R,u*d,a]),T=Q.reshape([1,a,y]),H=[R,w*v,y];ie.push(N),ie.push(T)}else N=t[0].reshape([R,a,u*d]),T=t[1].reshape([1,y,a]),H=[R,y,w*v],ie.push(T),ie.push(N);s&&ie.push(t[2]);let Z=H[2],K=ie[0].dims[ie[0].dims.length-1];Z<8&&K<8?e.compute(eo(ie,o,g,H,n),{inputs:ie}):e.compute(cn(ie,o,g,H,n),{inputs:ie});return}let I=!0,S=e.kernelCustomData.wT??e.compute(st(t[1],ts),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=S);let _=[t[0],S];s&&_.push(t[2]);let P=n?w*v:y,A=n?y:w*v,z=m*h*a;e.compute(Ji(_,o,g,P,A,z,s,I),{inputs:_})},_d=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let n=[0,t.pads[0],0,t.pads[1]],s=[1].concat(t.strides),u=[1].concat(t.dilations),d=[1].concat(t.kernelShape),a=rs({...t,pads:n,strides:s,dilations:u,kernelShape:d},o);e.compute(Jn(o,a,m=>r?[m[0],m[2],m[3]]:[]))},no=(e,t)=>{Sd(e.inputs,t),e.inputs[0].dims.length===3?_d(e,t):xd(e,e.inputs,t)}});var Cd,ns,os=q(()=>{"use strict";It();we();At();ln();Zn();Cr();Cd=(e,t=!1,r,o=4)=>{let n=Ke(o,"f32"),s=_=>{switch(_){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];\n            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];\n            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];\n            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];\n            return vec4<f32>(v0, v1, v2, v3);\n            `;default:throw new Error(`innerElementSize ${_} is not supported.`)}},u=e?`\n      let coord = vec4<i32>(batch, iXR, iXC, xCh);\n      `:`\n      let coord = vec4<i32>(batch, xCh, iXR, iXC);\n      `,d=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,a=e?"outBackprop[1]":"outBackprop[2]",m=e?"outBackprop[2]":"outBackprop[3]",h=e?"row":"col",g=e?"col":"row",w=`\n      let inChannels = ${e?"outBackprop[3]":"outBackprop[1]"};\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      let outRow = ${h} / outWidth;\n      let outCol = ${h} % outWidth;\n\n      let WRow = ${g} / (filterDims[1] * inChannels);\n      let WCol = ${g} / inChannels % filterDims[1];\n      let xR = f32(outRow - pads[0] + dilation[0] * WRow) / f32(strides[0]);\n      let xC = f32(outCol - pads[1] + dilation[1] * WCol) / f32(strides[1]);\n      if (xR < 0.0 || xR >= f32(${a}) || fract(xR) > 0.0) {\n        return ${n}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(${m}) || fract(xC) > 0.0) {\n        return ${n}(0.0);\n      }\n      let iXR = i32(xR);\n      let iXC = i32(xC);\n      let xCh = ${g} % inChannels;\n      ${u}\n      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${o}];`,v=e?`\n      let col = colIn * ${o};\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ${w}\n      }\n      return ${n}(0.0);`:`\n      let col = colIn * ${o};\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ${w}\n      }\n      return ${n}(0.0);`,y=`\n      let col = colIn * ${o};\n      let inChannels = ${e?"outBackprop[3]":"outBackprop[1]"};\n      let coordX = filterDims.x - 1 - row / (filterDims[1] * inChannels);\n      let coordY = filterDims.y - 1 - (row / inChannels) % filterDims[1];\n      if (${e?"row < uniforms.dimInner && col < uniforms.dimBOuter":"row < uniforms.dimInner && col < uniforms.dimAOuter"}  && coordX >= 0 && coordY >= 0) {\n        let rowInner = row % inChannels;\n        let coord = vec4<i32>(coordX, coordY, col, rowInner);\n        ${s(o)}\n      }\n      return ${n}(0.0);\n      `,{activationFunction:C,applyActivation:I}=gt(r,n);return`\n      ${C}\n  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${n} {\n    ${e?v:y}\n  }\n\n  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${n} {\n    ${e?y:v}\n  }\n\n  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${n}) {\n    let col = colIn * ${o};\n    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n      var value = valueInput;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${d}\n      ${un(t)}\n      ${I}\n      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${o}] = value;\n    }\n  }`},ns=(e,t,r,o,n,s,u,d)=>{let a=t.format==="NHWC",m=a?e[0].dims[3]:e[0].dims[1],h=r[0],g=a?r[2]:r[3],w=a?r[1]:r[2],v=a?r[3]:r[1],y=a?m%4===0&&v%4===0:g%4===0&&v%4===0,C=a?v:g*w,I=a?g*w:v,S=y?[8,8,1]:[C<=4||I<=4?4:16,C>4&&I<=4?4:16,1],_=y?[4,4,1]:[C<=4?1:4,C>4&&I<=4?1:4,1],P=[Math.ceil(C/S[0]/_[0]),Math.ceil(I/S[1]/_[1]),Math.ceil(h/S[2]/_[2])];De("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${P}`);let A=y?4:1,z=Math.max(S[0]*A,S[1]),R=y?4:1,N=[{type:"int32",data:o},{type:"int32",data:n},{type:"int32",data:s}],T=M("x",e[0].dataType,e[0].dims.length,R),H=M("w",e[1].dataType,e[1].dims.length,1),ie=j("result",e[0].dataType,r.length,R),Z=[T,H];N.push(...F(e[0].dims)),N.push(...F(e[1].dims));let K="";if(u){let Q=M("bias",e[2].dataType,e[2].dims.length,R);Z.push(Q),N.push(...F(e[2].dims)),K+=`\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${y?"vec4<f32>":"f32"} {\n          return bias[coords.${a?"w":"y"}${y?"/ 4":""}];\n        }`}return N.push(...F(r)),{name:"Conv2DTransposeMatMul",shaderCache:{hint:t.cacheKey},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:P[0],y:P[1],z:P[2]},programUniforms:N}),getShaderSource:Q=>`\n        ${dn("uniforms.result_strides")}\n        ${Q.registerUniform("dimAOuter","i32").registerUniform("dimBOuter","i32").registerUniform("dimInner","i32").declareVariables(...Z,ie)};\n        const outBackprop : vec4<i32> = vec4<i32>(${e[0].dims.join(",")});\n        const filterDims : vec2<i32> = vec2<i32>(${t.kernelShape[a?1:2]}, ${t.kernelShape[a?2:3]});\n        const effectiveFilterDims : vec2<i32> = filterDims + vec2<i32>(\n              ${t.dilations[0]<=1?0:(t.kernelShape[a?1:2]-1)*(t.dilations[0]-1)},\n              ${t.dilations[1]<=1?0:(t.kernelShape[a?2:3]-1)*(t.dilations[1]-1)});\n        const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (${t.pads[0]+t.pads[2]})/2,\n                                         i32(effectiveFilterDims[1]) - 1 - (${t.pads[1]+t.pads[3]})/2);\n        const strides : vec2<i32> = vec2<i32>(${t.strides[0]}, ${t.strides[1]});\n        const dilation : vec2<i32> = vec2<i32>(${t.dilations[0]}, ${t.dilations[1]});\n        const dimAOuter : i32 = ${o};\n        const dimBOuter : i32 = ${n};\n        const dimInner : i32 = ${s};\n        ${K}\n        ${Cd(a,u,t,A)}\n        ${y?xr(_,S,"f32",void 0,!a,z):_r(_,S,"f32",void 0,!a,z,!1,void 0,d)}`}}});var Id,oo,as=q(()=>{"use strict";It();$e();we();Id=(e,t,r,o,n,s,u=!1,d)=>{let a=r.format==="NHWC",m=a?1:2,h=a?2:3,g=a?3:1,w=V.size(o),v=u?2:1,y=r.group,C=t[1].dims,I=C[0]/y,S=C[1],_=`\n  fn setOutputAtIndex(flatIndex : u32, value : ${u?`vec4<${d}>`:d}) {\n    result[flatIndex] = ${u?`vec4<${d}>`:d}(value);\n  }`;n&&(_+=`\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${u?`vec4<${d}>`:d} {\n      return bias[coords.${a?"w":"y"}${u?"/ 4":""}];\n    }`);let P=u?4:1,A=M("W",t[1].dataType,t[1].dims,P),z=M("Dy",t[0].dataType,t[0].dims,P),R=[z,A];n&&R.push(M("bias",t[2].dataType,[o[g]],P));let N=j("result",t[0].dataType,o,P),T=`{\n        let batch: u32 = ${s?"global_id.z":"workgroup_id.z"} / outShape[1];\n        let r = ${s?"global_id.z":"workgroup_id.z"} % outShape[1];\n        let c = ${s?"global_id.y":"workgroup_id.y"} * ${v};\n        let d1: u32 = ${s?"global_id.x":"workgroup_id.x"} * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<${d}>, ${v}>;\n        for (var i = 0; i < ${v}; i++) {\n          dotProd[i] = vec4<${d}>(0.0);\n        }\n        for (var wR: u32 = 0; wR < filterDims[0]; wR = wR + 1) {\n          var dyR = (${d}(dyCorner.x) + ${d}(wR)) / ${d}(strides.x);\n          let wRPerm = filterDims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= ${d}(outBackprop[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < filterDims[1]; wC = wC + 1) {\n            let dyC = (${d}(dyCorner.y) + ${d}(wC)) / ${d}(strides.y);\n            let dyC2 = (${d}(dyCorner.y) + 1.0 + ${d}(wC)) / ${d}(strides.y);\n            let wCPerm = filterDims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= ${d}(outBackprop[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= ${d}(outBackprop[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${z.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${d}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ${z.get("batch","idyR","idyC2","d2")};\n\n                dotProd[1] = dotProd[1] + vec4<${d}>(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = outBackprop[${g}];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${z.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${d}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = outBackprop[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${A.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${z.get("batch","idyR","idyC2","d2")};\n                let tmpval = vec4<${d}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ${v}; i = i + 1) {\n          let value = dotProd[i] + ${n?"bias[c+i]":`vec4<${d}>(0.0)`};\n          ${N.set("batch","r","c + i","d1","value")};\n        }\n      }`,H=`\n          let outputIndices = ${N.offsetToIndices("global_idx")};\n          let batch = ${N.indicesGet("outputIndices",0)};\n          let d1 = ${N.indicesGet("outputIndices",g)};\n          let r = ${N.indicesGet("outputIndices",m)};\n          let c = ${N.indicesGet("outputIndices",h)};\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / ${S};\n          let wOutChannel = d1 - groupId * ${S};\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = ${d}(0.0);\n          for (var wR: u32 = 0; wR < effectiveFilterDims.x; wR = wR + 1) {\n            if (wR % dilations.x != 0) {\n              continue;\n            }\n            let dyR = (${d}(dyRCorner) + ${d}(wR)) / ${d}(strides[0]);\n            let wRPerm = filterDims.x - 1 - wR / dilations.x;\n            if (dyR < 0.0 || dyR >= ${d}(outBackprop[${m}]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < effectiveFilterDims.y; wC = wC + 1) {\n              if (wC % dilations.y != 0) {\n                continue;\n              }\n              let dyC = (${d}(dyCCorner) + ${d}(wC)) / ${d}(strides.y);\n              let wCPerm = filterDims.y - 1 - wC / dilations.y;\n              if (dyC < 0.0 || dyC >= ${d}(outBackprop[${h}]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n              var inputChannel = groupId * ${I};\n              for (var d2: u32 = 0; d2 < ${I}; d2 = d2 + 1) {\n                let xValue = ${a?z.get("batch","idyR","idyC","inputChannel"):z.get("batch","inputChannel","idyR","idyC")};\n                let wValue = ${A.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};\n                dotProd = dotProd + xValue * wValue;\n                inputChannel = inputChannel + 1;\n              }\n            }\n          }\n          let value = dotProd + ${n?"bias[d1]":`${d}(0.0)`};\n          ${N.setByOffset("global_idx","value")};\n        `;return`\n  ${e.declareVariables(...R,N)}\n  ${_}\n  const outShape : vec4<u32> = vec4<u32>(${o.join(",")});\n  const outBackprop : vec4<u32> = vec4<u32>(${t[0].dims.join(",")});\n  const strides : vec2<u32> = vec2<u32>(${r.strides[0]}, ${r.strides[1]});\n  const filterDims : vec2<u32> = vec2<u32>(${r.kernelShape[a?1:2]}, ${r.kernelShape[a?2:3]});\n  const dilations : vec2<u32> = vec2<u32>(${r.dilations[0]}, ${r.dilations[1]});\n  const effectiveFilterDims : vec2<u32> = filterDims + vec2<u32>(\n          ${r.dilations[0]<=1?0:(r.kernelShape[a?1:2]-1)*(r.dilations[0]-1)},\n          ${r.dilations[1]<=1?0:(r.kernelShape[a?2:3]-1)*(r.dilations[1]-1)});\n  const pads : vec2<i32> = vec2<i32>(i32(effectiveFilterDims[0]) - 1 - (${r.pads[0]+r.pads[2]})/2,\n                                     i32(effectiveFilterDims[1]) - 1 - (${r.pads[1]+r.pads[3]})/2);\n    ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes(w)};\n  ${u?T:H}}`},oo=(e,t,r)=>{let o=e.length>2,n=t.outputShape,s=V.size(n),u=[Math.ceil(s/64),1,1];De("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${u}`);let d=Le(e[0].dataType);return{name:"ConvTranspose2D",shaderCache:{hint:t.cacheKey},getRunData:()=>({dispatchGroup:{x:u[0],y:u[1],z:u[2]},outputs:[{dims:r?r(n):n,dataType:e[0].dataType}]}),getShaderSource:a=>Id(a,e,t,n,o,u[1]===1&&u[2]===1,!1,d)}}});var Ad,Td,Ed,is,ss,Od,Pd,kd,Bd,us,ls=q(()=>{"use strict";je();os();as();At();tr();Ad=(e,t,r,o,n,s)=>(e-1)*t+r+(o-1)*n+1-s,Td=(e,t,r,o,n)=>{let s=Math.floor(e/2);t==="SAME_UPPER"?(r[o]=s,r[n]=e-s):t==="SAME_LOWER"&&(r[o]=e-s,r[n]=s)},Ed=(e,t,r,o,n,s,u,d,a,m)=>{let h=e.length-2,g=m.length===0;if(a.length===0)for(let y=0;y<h;++y)a.push(0);let w=e[0],v=t[d?3:1]*n;for(let y=0,C=e.length-h-(d?1:0);y<h;++y,++C){let I=e[C],S=g?I*u[y]:m[y],_=Ad(I,u[y],s[y],t[C],r[y],S);Td(_,o,s,y,y+h),g&&m.push(u[y]*(I-1)+a[y]+(t[C]-1)*r[y]+1-s[y]-s[y+h])}m.splice(0,0,w),m.splice(d?3:1,0,v)},is=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((w,v)=>w*v,1)===0){r.length=0;for(let w=2;w<t[1].dims.length;++w)r.push(t[1].dims[w])}let o=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(o?3:1,0,t[1].dims[1]);let n=e.pads.slice(),s=e.outputShape.slice(),u=e.outputPadding.slice(),d=t[0].dims,a=e.dilations.slice();if(a.reduce((w,v)=>w+v,0)===0){let w=t[0].dims.length-2;a=new Array(w).fill(1)}let m=e.strides.slice();if(m.reduce((w,v)=>w+v,0)===0){let w=t[0].dims.length-2;m=new Array(w).fill(1)}Ed(d,r,a,e.autoPad,e.group,n,m,o,u,s);let h=Object.assign({},e),g=e.cacheKey+[r.join("n,"),n.join(","),m.join(","),u.join(","),s.join(","),a.join(",")].join("_");return Object.assign(h,{kernelShape:r,pads:n,outputPadding:u,outputShape:s,dilations:a,strides:m,cacheKey:g}),h},ss=e=>{let t=sn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],n=e.dilations,s=e.group,u=e.kernelShape,d=e.pads,a=e.strides,m=e.wIsConst(),h=e.outputPadding,g=e.outputShape;return ge({autoPad:o,format:r,dilations:n,group:s,kernelShape:u,outputPadding:h,outputShape:g,pads:d,strides:a,wIsConst:m,...t})},Od=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[0];if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let n=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==n))throw new Error("invalid bias");let s=e[0].dims.length-2;if(t.dilations.reduce((h,g)=>h+g,0)>0&&t.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(t.strides.reduce((h,g)=>h+g,0)>0&&t.strides.length!==s)throw new Error(`strides should be ${s}D`);if(t.pads.reduce((h,g)=>h+g,0)>0&&t.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(t.outputPadding.length!==s&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${s}D`);if(t.kernelShape.reduce((h,g)=>h+g,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Pd=[2,3,1,0],kd=(e,t,r)=>{let o=is(r,t),n=r.format==="NHWC",s=o.outputShape,u=s[n?3:1],d=t[0].dims[n?3:1];if(o.group!==1||u===1&&d===1){e.compute(oo(t,o));return}let a=s[n?1:2],m=s[n?2:3],h=t[1].dims[2],g=t[1].dims[3],w=n?a*m:u,v=n?u:a*m,y=h*g*d,C=!0,I=e.kernelCustomData.wT??e.compute(st(t[1],Pd),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=I);let S=[t[0],I],_=t.length===3;_&&(!n&&t[2].dims.length===1?S.push(t[2].reshape([t[2].dims[0],1,1])):S.push(t[2])),e.compute(ns(S,o,s,w,v,y,_,C),{inputs:S})},Bd=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];o.length===3&&o.push(e.inputs[2]);let n=t.kernelShape;(n.length===0||n[0]===0)&&(n=[e.inputs[1].dims[2]]);let s=t.dilations;(s.length===0||s[0]===0)&&(s=[1]);let u=t.strides;(u.length===0||u[0]===0)&&(u=[1]);let d=t.pads;d.length===0&&(d=[0,0]),d=[0,d[0],0,d[1]],u=[1].concat(u),s=[1].concat(s),n=[1].concat(n);let a=is({...t,pads:d,strides:u,dilations:s,kernelShape:n},o);e.compute(oo(o,a,m=>r?[m[0],m[2],m[3]]:[m[0],m[1],m[3]]))},us=(e,t)=>{Od(e.inputs,t),e.inputs[0].dims.length===3?Bd(e,t):kd(e,e.inputs,t)}});var Rd,ds,cs,ps=q(()=>{"use strict";Ne();$e();je();we();Rd=(e,t,r,o)=>{let n=V.size(t),s=t.length,u=M("input",e,s),d=j("output",e,s),a=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),m=V.normalizeAxis(a,s),h=g=>{let w=` i32(${u.indicesGet("inputIndices","uniforms.axis")}) `,v=ce("uniforms.input_shape","uniforms.axis",s),y=o.reverse?w+(o.exclusive?" + 1":""):"0",C=o.reverse?v:w+(o.exclusive?"":" + 1");return`\n                ${g.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(u,d)}\n                ${g.mainStart()}\n                  ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n                  var inputIndices = ${d.offsetToIndices("global_idx")};\n                  var sum = ${d.type.value}(0);\n                  let first : i32 = ${y};\n                  let last : i32 = ${C};\n                  for (var i : i32 = first; i < last; i++) {\n                    ${u.indicesSet("inputIndices","uniforms.axis","u32(i)")};\n                    sum = sum + ${u.getByIndices("inputIndices")};\n                  }\n                  ${d.setByOffset("global_idx","sum")};\n                }`};return{name:"CumSum",shaderCache:{hint:o.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:[{type:"uint32",data:n},{type:"int32",data:m},...F(t),...F(t)]}),getShaderSource:h}},ds=(e,t)=>{let r=e.inputs[0].dims,o=e.inputs[0].dataType,n=e.inputs[1];e.compute(Rd(o,r,n,t),{inputs:[0]})},cs=e=>{let t=e.exclusive===1,r=e.reverse===1;return ge({exclusive:t,reverse:r})}});var ao,pn,ms,Dd,Md,io,so,fs,Ud,hs,gs,ys=q(()=>{"use strict";$e();je();we();ao="[a-zA-Z]|\\\\.\\\\.\\\\.",pn="("+ao+")+",ms="^"+pn+"$",Dd="("+pn+",)*"+pn,Md="^"+Dd+"$",io=class{constructor(t=-1){this.symbolToIndices=new Map,this.inputIndex=t}addSymbol(t,r){let o=this.symbolToIndices.get(t);o===void 0?o=[r]:o.push(r),this.symbolToIndices.set(t,o)}},so=class{constructor(t,r){this.equation=r;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[o,n]=r.includes("->")?r.split("->",2):[r,""];if(!o.match(RegExp(Md)))throw new Error("Invalid LHS term");if(o.split(",").forEach((d,a)=>{let m=t[a].dims.slice();if(!d.match(RegExp(ms)))throw new Error("Invalid LHS term");let h=this.processTerm(d,!0,m,a);this.lhs.push(h)}),n==="")n+=[...this.symbolToInfo.entries()].filter(([d,a])=>a.count===1||d==="...").map(([d])=>d).join("");else if(!n.match(RegExp(pn)))throw new Error("Invalid RHS");n.match(RegExp(ao,"g"))?.forEach(d=>{if(d==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let a=this.symbolToInfo.get(d);if(a===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(a.dimValue)}}),this.rhs=this.processTerm(n,!1,this.outputDims)}addSymbol(t,r,o){let n=this.symbolToInfo.get(t);if(n!==void 0){if(n.dimValue!==r&&n.count!==1)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(o)}else n={count:1,dimValue:r,inputIndices:[o]};this.symbolToInfo.set(t,n)}processTerm(t,r,o,n=-1){let s=o.length,u=!1,d=[],a=0;if(!t.match(RegExp(ms))&&!r&&t!=="")throw new Error("Invalid LHS term");let m=t.match(RegExp(ao,"g")),h=new io(n);return m?.forEach((g,w)=>{if(g==="..."){if(u)throw new Error("Only one ellipsis is allowed per input term");u=!0;let v=s-m.length+1;if(v<0)throw new Error("Ellipsis out of bounds");if(d=o.slice(a,a+v),this.hasEllipsis){if(this.ellipsisDims.length!==d.length||this.ellipsisDims.toString()!==d.toString())throw new Error("Ellipsis dimensions mismatch")}else if(r)this.hasEllipsis=!0,this.ellipsisDims=d;else throw new Error("Ellipsis must be specified in the LHS");for(let y=0;y<d.length;y++){let C=String.fromCharCode("0".charCodeAt(0)+y);h.addSymbol(C,w+y),this.addSymbol(C,o[a++],n)}}else h.addSymbol(g,w+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(g,o[a++],n)}),h}},fs=e=>e+"_max",Ud=(e,t,r,o,n)=>{let u=t.map((v,y)=>e[y]?v.length:v).map((v,y)=>M(`input${y}`,r,v)),d=V.size(n),a=Be(n.length),m=a?n.length:n,h=j("output",r,m),g=[...o.symbolToInfo.keys()].filter(v=>!o.rhs.symbolToIndices.has(v)),w=v=>{let y=[],C="var prod = 1.0;",I="var sum = 0.0;",S="sum += prod;",_=[],P=[],A=[],z=[],R=o.symbolToInfo.size===o.rhs.symbolToIndices.size;o.symbolToInfo.forEach((T,H)=>{if(o.rhs.symbolToIndices.has(H)){let ie=o.rhs.symbolToIndices.get(H)?.[0];ie!==void 0&&o.lhs.forEach((Z,K)=>{if(T.inputIndices.includes(K)){let Q=Z.symbolToIndices.get(H);if(Q===void 0)throw new Error("Invalid symbol error");Q.forEach(X=>{y.push(`${u[K].indicesSet(`input${K}Indices`,X,h.indicesGet("outputIndices",ie))}`)})}})}else o.lhs.forEach((ie,Z)=>{if(T.inputIndices.includes(Z)){let K=ie.symbolToIndices.get(H);if(K===void 0)throw new Error("Invalid symbol error");K.forEach(Q=>{_.push(`${u[Z].indicesSet(`input${Z}Indices`,Q,`${H}`)}`)}),z.push(`prod *= ${u[Z].getByIndices(`input${Z}Indices`)};`)}}),P.push(`for(var ${H}: u32 = 0; ${H} < uniforms.${fs(H)}; ${H}++) {`),A.push("}")});let N=R?[...y,`let sum = ${u.map((T,H)=>T.getByIndices(`input${H}Indices`)).join(" * ")};`]:[...y,I,...P,..._,C,...z,S,...A];return`\n            ${v.registerUniforms(g.map(T=>({name:`${fs(T)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...u,h)}\n\n            ${v.mainStart()}\n            ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n            var outputIndices = ${h.offsetToIndices("global_idx")};\n            ${u.map((T,H)=>`var input${H}Indices: ${u[H].type.indices};`).join(`\n`)}\n            ${N.join(`\n`)};\n            ${h.setByOffset("global_idx","sum")};\n          }`};return{name:"Einsum",shaderCache:{hint:o.equation,inputDependencies:e.map(v=>v?"rank":"dims")},getRunData:()=>{let v=g.filter(C=>o.symbolToInfo.has(C)).map(C=>({type:"uint32",data:o.symbolToInfo.get(C)?.dimValue||0}));v.push({type:"uint32",data:d});let y=t.filter((C,I)=>e[I]).map((C,I)=>[...F(C)]).reduce((C,I)=>C.concat(I),v);return a&&y.push(...F(n)),{outputs:[{dims:n,dataType:r}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:y}},getShaderSource:w}},hs=(e,t)=>{let r=new so(e.inputs,t.equation),o=e.inputs.map((u,d)=>Be(u.dims.length)),n=r.outputDims,s=e.inputs.map((u,d)=>u.dims);e.compute(Ud(o,s,e.inputs[0].dataType,r,n))},gs=e=>{let t=e.equation.replace(/\\s+/g,"");return ge({equation:t})}});var zd,bs,Vd,Nd,ws,vs=q(()=>{"use strict";Ne();$e();we();zd=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=r.length<t.length?0:r.length-t.length,n=t.length<r.length?0:t.length-r.length;for(;o<r.length&&n<t.length;++o,++n)if(r[o]!==t[n]&&r[o]!==1&&t[n]!==1)throw new Error("Expand requires shape to be broadcastable to input")},bs=(e,t)=>{let r=e.length-t.length,o=[];for(let n=0;n<r;++n)o.push(e[n]);for(let n=0;n<t.length;++n)o.push(t[n]===1?e[n+r]:t[n]);return o},Vd=(e,t)=>e.length>t.length?bs(e,t):bs(t,e),Nd=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=Vd(t,r),n=e[0].dataType,s=n===9?4:1,u=Math.ceil(V.size(o)/s),d=Be(t.length),a=Be(o.length),m=g=>{let w=d?t.length:t,v=a?o.length:o,y=M("input",n,w,s),C=j("output",n,v,s),I;if(n===9){let S=(_,P,A="")=>`\n          let outputIndices${P} = ${C.offsetToIndices(`outputOffset + ${P}u`)};\n          let offset${P} = ${y.broadcastedIndicesToOffset(`outputIndices${P}`,C)};\n          let index${P} = offset${P} / 4u;\n          let component${P} = offset${P} % 4u;\n          ${_}[${P}] = ${A}(${y.getByOffset(`index${P}`)}[component${P}]);\n        `;I=`\n        let outputOffset = global_idx * ${s};\n        var data = vec4<u32>(0);\n        ${S("data",0,"u32")}\n        ${S("data",1,"u32")}\n        ${S("data",2,"u32")}\n        ${S("data",3,"u32")}\n        ${C.setByOffset("global_idx","data")}\n      }`}else I=`\n        let outputIndices = ${C.offsetToIndices("global_idx")};\n        let inputOffset = ${y.broadcastedIndicesToOffset("outputIndices",C)};\n        ${C.setByOffset("global_idx",y.getByOffset("inputOffset"))}\n      }`;return`\n    ${g.registerUniform("vec_size","u32").declareVariables(y,C)}\n    ${g.mainStart()}\n    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n    ${I}`},h=[{type:"uint32",data:u}];return d&&h.push(...F(t)),a&&h.push(...F(o)),{name:"Expand",shaderCache:{hint:`${o.length}`,inputDependencies:[d?"rank":"dims"]},getShaderSource:m,getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:h})}},ws=e=>{zd(e.inputs),e.compute(Nd(e.inputs),{inputs:[0]})}});var Wd,Hd,$s,Ss,xs=q(()=>{"use strict";Ne();$e();je();we();Wd=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},Hd=(e,t)=>{let r=e[0].dims,o=e[1].dims,n=r.length,s=V.normalizeAxis(t.axis,n),u=r.slice(0);u.splice(s,1,...o);let d=r[s],a=e[0].dataType===9?4:1,m=Math.ceil(V.size(u)/a),h=Be(e[0].dims.length),g=h?e[0].dims.length:e[0].dims,w=Be(e[1].dims.length),v=w?e[1].dims.length:e[1].dims,y=Be(u.length),C=y?u.length:u,I=[{type:"uint32",data:m},{type:"int32",data:d},{type:"uint32",data:s}];h&&I.push(...F(e[0].dims)),w&&I.push(...F(e[1].dims)),y&&I.push(...F(u));let S=[];S.push(h?"rank":"dims"),S.push(w?"rank":"dims");let _=P=>{let A=M("data",e[0].dataType,g,a),z=M("inputIndices",e[1].dataType,v),R=j("output",e[0].dataType,C,a),N=H=>{let ie=o.length,Z=`var indicesIndices${H}  = ${z.type.indices}(0);`;for(let K=0;K<ie;K++)Z+=`${ie>1?`indicesIndices${H}[${K}]`:`indicesIndices${H}`} = ${u.length>1?`outputIndices${H}[uniforms.axis + ${K}]`:`outputIndices${H}`};`;Z+=`\n          var idx${H} = ${z.getByIndices(`indicesIndices${H}`)};\n          if (idx${H} < 0) {\n            idx${H} = idx${H} + uniforms.axisDimLimit;\n          }\n          var dataIndices${H} = ${A.type.indices}(0);\n        `;for(let K=0,Q=0;K<n;K++)K===s?(Z+=`${n>1?`dataIndices${H}[${K}]`:`dataIndices${H}`} = u32(idx${H});`,Q+=ie):(Z+=`${n>1?`dataIndices${H}[${K}]`:`dataIndices${H}`} = ${u.length>1?`outputIndices${H}[${Q}]`:`outputIndices${H}`};`,Q++);return Z},T;if(e[0].dataType===9){let H=(ie,Z,K="")=>`\n          let outputIndices${Z} = ${R.offsetToIndices(`outputOffset + ${Z}u`)};\n          ${N(Z)};\n          let offset${Z} = ${A.indicesToOffset(`dataIndices${Z}`)};\n          let index${Z} = offset${Z} / 4u;\n          let component${Z} = offset${Z} % 4u;\n          ${ie}[${Z}] = ${K}(${A.getByOffset(`index${Z}`)}[component${Z}]);\n        `;T=`\n        let outputOffset = global_idx * ${a};\n        var value = vec4<u32>(0);\n        ${H("value",0,"u32")}\n        ${H("value",1,"u32")}\n        ${H("value",2,"u32")}\n        ${H("value",3,"u32")}\n        ${R.setByOffset("global_idx","value")}\n      `}else T=`\n      let outputIndices = ${R.offsetToIndices("global_idx")};\n      ${N("")};\n      let value = ${A.getByIndices("dataIndices")};\n      ${R.setByOffset("global_idx","value")};\n      `;return`\n      ${P.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(A,z,R)}\n      ${P.mainStart()}\n        ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        ${T}\n      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:S},getRunData:()=>({outputs:[{dims:u,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:I}),getShaderSource:_}},$s=e=>ge({axis:e.axis}),Ss=(e,t)=>{let r=e.inputs;Wd(r),e.compute(Hd(e.inputs,t))}});var Gd,Ld,_s,Cs,Is=q(()=>{"use strict";$e();je();we();Gd=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and\n                     indices input tensors be of same rank.`)},Ld=(e,t)=>{let r=e[0].dims,o=e[0].dataType,n=r.length,s=e[1].dims,u=e[1].dataType,d=V.normalizeAxis(t.axis,n),a=r[d],m=s.slice(0),h=V.size(m),g=M("input",o,n),w=M("indicesInput",u,s.length),v=j("output",o,m.length),y=[{type:"uint32",data:h},{type:"int32",data:a},{type:"uint32",data:d}];return y.push(...F(r)),y.push(...F(s)),y.push(...F(m)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:m,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:y}),getShaderSource:S=>`\n      ${S.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(g,w,v)}\n      ${S.mainStart()}\n      ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n      let outputIndices = ${v.offsetToIndices("global_idx")};\n\n      var idx = ${w.getByOffset("global_idx")};\n      if (idx < 0) {\n        idx = idx + uniforms.axisDimLimit;\n      }\n      var inputIndices = ${g.type.indices}(outputIndices);\n      ${g.indicesSet("inputIndices","uniforms.axis","u32(idx)")};\n      let value = ${g.getByIndices("inputIndices")};\n\n      ${v.setByOffset("global_idx","value")};\n  }`}},_s=e=>ge({axis:e.axis}),Cs=(e,t)=>{let r=e.inputs;Gd(r),e.compute(Ld(e.inputs,t))}});var Fd,jd,As,Ts,Es=q(()=>{"use strict";$e();we();Fd=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},jd=(e,t)=>{let r=e[0].dims.slice(),o=e[1].dims.slice(),[n,s,u]=Jr.getShapeOfGemmResult(r,t.transA,o,t.transB,e.length===3?e[2].dims:void 0),d=[n,s];if(!d)throw new Error("Can\'t use gemm on the given tensors");let a=V.size(d),m=[{type:"uint32",data:a},{type:"uint32",data:n},{type:"uint32",data:s},{type:"uint32",data:u},{type:"float32",data:t.alpha},{type:"float32",data:t.beta}],h=["type","type"];e.length===3&&(m.push(...F(e[2].dims)),h.push("rank")),m.push(...F(d));let g=w=>{let v="";t.transA&&t.transB?v="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?v="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?v="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(v="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let y=t.alpha===1?"":"value *= uniforms.alpha;",C=M("a",e[0].dataType,e[0].dims),I=M("b",e[1].dataType,e[1].dims),S=C.type.value,_=null,P=[C,I];e.length===3&&(_=M("c",e[2].dataType,e[2].dims.length),P.push(_));let A=j("output",e[0].dataType,d.length);P.push(A);let z=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`\n  ${w.registerUniforms(z).declareVariables(...P)}\n\n  ${w.mainStart()}\n    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let m = global_idx / uniforms.N;\n    let n = global_idx % uniforms.N;\n\n    var value = ${S}(0);\n    for (var k: u32 = 0u; k < uniforms.K; k++) {\n      ${v}\n    }\n\n    ${y}\n    ${(()=>_!=null?`let cOffset = ${_.broadcastedIndicesToOffset("vec2(m, n)",A)}; value += ${S}(uniforms.beta) * ${_.getByOffset("cOffset")};`:"")()}\n    output[global_idx] = value;\n  }`};return{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:d,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:m}),getShaderSource:g}},As=e=>{let t=e.transA,r=e.transB,o=e.alpha,n=e.beta;return{transA:t,transB:r,alpha:o,beta:n,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},Ts=(e,t)=>{Fd(e.inputs),e.compute(jd(e.inputs,t))}});var qd,Kd,Yd,Os,Ps=q(()=>{"use strict";Ne();$e();we();qd=(e,t)=>{let r=e[0].dims,o=r,n=2,s=V.sizeToDimension(r,n),u=V.sizeFromDimension(r,n),d=Fe(u),a=u/d,m=[r[0],r[1],a],h=["rank","type","type"],g=[{type:"uint32",data:u},{type:"uint32",data:a}];g.push(...F(m),...F(m));let w=v=>{let y=M("x",e[0].dataType,m.length,d),C=M("scale",e[1].dataType,e[1].dims),I=M("bias",e[2].dataType,e[2].dims),S=j("output",e[0].dataType,m.length,d),_=[y,C,I,S],P=y.type.value,A=d===1?"f32":`vec${d}<f32>`,z=64,R=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`\n  var<workgroup> meanShared : f32;\n  var<workgroup> squaredNormShared : f32;\n  var<workgroup> workgroupShared : array<${A}, ${z}>;\n  const workgroupSize = ${z}u;\n  ${v.registerUniforms(R).declareVariables(..._)}\n  ${v.mainStart(z)}\n    let norm = global_idx / workgroupSize;\n    let batch = norm / uniforms.x_shape[1];\n    let channel = norm % uniforms.x_shape[1];\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial = ${A}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      initial = initial + ${A}(${y.get("batch","channel","h")});\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = ${tt("workgroupShared[0]",d)} / f32(uniforms.normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = ${A}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let deviation =  ${A}(${y.get("batch","channel","h")}) - ${A}(meanShared);\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = ${tt("workgroupShared[0]",d)};\n    }\n    workgroupBarrier();\n\n    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${t.epsilon}));\n    let channelScale = invStdDev * f32(${C.getByOffset("channel")});\n    let channelShift = f32(${I.getByOffset("channel")}) - meanShared * channelScale;\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let value = ${y.get("batch","channel","h")} * ${P}(${A}(channelScale)) + ${P}(${A}(channelShift));\n      ${S.set("batch","channel","h","value")};\n    }\n  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${t.epsilon};${d}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:s},programUniforms:g}),getShaderSource:w}},Kd=(e,t,r,o,n,s,u,d)=>{let a=Fe(u),m=64,h=a===1?"vec2f":`mat2x${a}f`,g=a===1?"f32":`vec${a}f`,w=(R,N)=>`${h}(${R}, ${N})`,v=n*u/a,y=Math.ceil(s/m),C=["type"],I=[{type:"uint32",data:y},{type:"uint32",data:s},{type:"uint32",data:Math.floor(u/a)},{type:"uint32",data:Math.floor(s*u/a)}],S=R=>{let N=M("input",t.dataType,t.dims,a);return`\n  ${R.declareVariables(N)}\n  @group(0) @binding(1) var<storage, read_write> output : array<${h}>;\n  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};\n  @group(0) @binding(2) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart(m)}\n    let currentImageNumber = global_idx / ${m} / uniforms.C;\n    let currentChannelNumber = (global_idx / ${m}) % uniforms.C;\n    let wgId = global_idx % ${m};\n    let wgOffset = wgId * uniforms.wg_size;\n    if (wgOffset >= uniforms.H) {\n        return;\n    }\n    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);\n\n    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;\n    var sum = ${Ze("f32",a)};\n    var squaredSum = ${Ze("f32",a)};\n    for (var i: u32 = wgOffset; i < wgMax; i++) {\n        let value = ${g}(input[offset + i * uniforms.C]);\n        sum += value;\n        squaredSum += value * value;\n    }\n    output[global_idx] = ${w("sum","squaredSum")};\n  }`},_=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${a}`,inputDependencies:C},getRunData:()=>({outputs:[{dims:[n,u,m,2],dataType:1}],dispatchGroup:{x:n*u/a},programUniforms:I}),getShaderSource:S},{inputs:[t],outputs:[-1]})[0],P=[{type:"uint32",data:v},{type:"uint32",data:s},{type:"uint32",data:Math.floor(u/a)},{type:"uint32",data:Math.floor(m*u/a)}],A=["type","type","type"],z=R=>{let N=M("scale",r.dataType,r.dims,a),T=M("bias",o.dataType,o.dims,a);return`\n  @group(0) @binding(0) var<storage, read> input : array<${h}>;\n  @group(0) @binding(1) var<storage, read> scale : array<${N.type.storage}>;\n  @group(0) @binding(2) var<storage, read> bias : array<${T.type.storage}>;\n  @group(0) @binding(3) var<storage, read_write> output : array<${h}>;\n  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};\n  @group(0) @binding(4) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart()}\n    ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}\n    let currentImageNumber = global_idx / uniforms.C;\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let offset = currentImageNumber * uniforms.image_size;\n    var sum = ${Ze("f32",a)};\n    var squaredSum = ${Ze("f32",a)};\n    for (var i: u32 = 0; i < ${m}; i++) {\n        let value = input[offset + i + currentChannelNumber * ${m}];\n        sum += value[0];\n        squaredSum += value[1];\n    }\n    sum = sum / f32(uniforms.H);\n    squaredSum = squaredSum / f32(uniforms.H);\n    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${d}));\n    let channelScale = invStdDev * ${g}(scale[currentChannelNumber]);\n    let channelShift = ${g}(bias[currentChannelNumber]) - sum * channelScale;\n\n    output[global_idx] = ${w("channelScale","channelShift")};\n  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${a};${d}`,inputDependencies:A},getRunData:()=>({outputs:[{dims:[n,u,2],dataType:1}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:P}),getShaderSource:z},{inputs:[_,r,o],outputs:[-1]})[0]},Yd=(e,t,r)=>{let o=t[0].dims,n=o,s=o[0],u=o[o.length-1],d=V.sizeFromDimension(o,1)/u,a=Fe(u),m=V.size(n)/a,h=[{type:"uint32",data:d},{type:"uint32",data:Math.floor(u/a)}],g=["type","type"],w=Kd(e,t[0],t[1],t[2],s,d,u,r.epsilon),v=y=>{let C=Le(t[0].dataType),I=a===1?"vec2f":`mat2x${a}f`,S=a===1?C:`vec${a}<${C}>`,_=M("input",t[0].dataType,t[0].dims,a),P=j("output",t[0].dataType,n,a);return`\n  @group(0) @binding(0) var<storage, read> input : array<${_.type.storage}>;\n  @group(0) @binding(1) var<storage, read> scaleInput : array<${I}>;\n  @group(0) @binding(2) var<storage, read_write> output : array<${P.type.storage}>;\n  struct Uniforms {H: u32, C : u32};\n  @group(0) @binding(3) var<uniform> uniforms: Uniforms;\n\n  ${y.mainStart()}\n    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;\n    let scale = scaleInput[scaleOffset];\n    output[global_idx] = fma(input[global_idx], ${S}(scale[0]), ${S}(scale[1]));\n  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${a}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:n,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:h}),getShaderSource:v},{inputs:[t[0],w]})},Os=(e,t)=>{t.format==="NHWC"?Yd(e,e.inputs,t):e.compute(qd(e.inputs,t))}});var Zd,Jd,ks,Bs=q(()=>{"use strict";Ne();$e();we();Zd=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},Jd=(e,t,r)=>{let o=e[0].dims,n=e[1],s=e[2],u=o,d=V.normalizeAxis(t.axis,o.length),a=V.sizeToDimension(o,d),m=V.sizeFromDimension(o,d),h=V.size(n.dims),g=s?V.size(s.dims):0;if(h!==m||s&&g!==m)throw new Error(`Size of X.shape()[axis:] == ${m}.\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ${h} and bias size of ${g}`);let w=[];for(let A=0;A<o.length;++A)A<d?w.push(o[A]):w.push(1);let v=Fe(m),y=["type","type"],C=[{type:"uint32",data:a},{type:"float32",data:m},{type:"uint32",data:Math.floor(m/v)},{type:"float32",data:t.epsilon}];s&&y.push("type");let I=r>1,S=r>2,_=A=>{let z=Le(e[0].dataType),R=[M("x",e[0].dataType,e[0].dims,v),M("scale",n.dataType,n.dims,v)];s&&R.push(M("bias",s.dataType,s.dims,v)),R.push(j("output",e[0].dataType,u,v)),I&&R.push(j("mean_data_output",1,w)),S&&R.push(j("inv_std_output",1,w));let N=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`\n  ${A.registerUniforms(N).declareVariables(...R)}\n  ${A.mainStart()}\n    ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}\n    let offset = global_idx * uniforms.norm_size_vectorized;\n    var meanVector = ${Ze("f32",v)};\n    var meanSquareVector = ${Ze("f32",v)};\n\n    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {\n      let value = ${it(z,v,"x[h + offset]")};\n      meanVector += value;\n      meanSquareVector += value * value;\n    }\n    let mean = ${tt("meanVector",v)} / uniforms.norm_size;\n    let invStdDev =\n        inverseSqrt(${tt("meanSquareVector",v)} / uniforms.norm_size - mean * mean + uniforms.epsilon);\n\n    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {\n      let f32input = ${it(z,v,"x[j + offset]")};\n      let f32scale = ${it(z,v,"scale[j]")};\n      output[j + offset] = ${R[0].type.value}((f32input - mean) * invStdDev * f32scale\n        ${s?`+ ${it(z,v,"bias[j]")}`:""}\n      );\n    }\n\n    ${I?"mean_data_output[global_idx] = mean":""};\n    ${S?"inv_std_output[global_idx] = invStdDev":""};\n  }`},P=[{dims:u,dataType:e[0].dataType}];return I&&P.push({dims:w,dataType:1}),S&&P.push({dims:w,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${v};${r}`,inputDependencies:y},getRunData:()=>({outputs:P,dispatchGroup:{x:Math.ceil(a/64)},programUniforms:C}),getShaderSource:_}},ks=(e,t)=>{Zd(e.inputs),e.compute(Jd(e.inputs,t,e.outputCount))}});var Qd,Ds,Rs,Xd,uo,Ms,Us=q(()=>{"use strict";$e();je();Yr();Kn();we();tr();Qd=(e,t)=>{let r=e[0],o=e[1],n=e[2],s=e[3],u=e[4],d=e[5],a=e[6],m=e[7];if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let h=!1,g=r.dims[0],w=r.dims[1],v=r.dims.length===3?h?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],y=w,C=0,I=0,S=Math.floor(v/t.numHeads);if(a&&m){if(a.dims.length!==4)throw new Error(\'Input "past_key" is expected to have 4 dimensions\');if(m.dims.length!==4)throw new Error(\'Input "past_value" is expected to have 4 dimensions\');C=a.dims[2],I=a.dims[2]}else if(a||m)throw new Error(\'Input "past_key" and "past_value" shall be both present or both absent\');let _;if(o){if(r.dims.length!==3)throw new Error(\'Input "query" is expected to have 3 dimensions when key is given\');if(o.dims.length<3||o.dims.length>5)throw new Error(\'Input "key" is expected to have 3, 4, or 5 dimensions\');if(r.dims[0]!==o.dims[0])throw new Error(\'Input "query" and "key" shall have same dim 0 (batch size)\');if(o.dims.length===3){if(o.dims[2]!==r.dims[2])throw new Error(\'Input "query" and "key" shall have same dim 2 (hidden_size)\');_=2,y=o.dims[1]}else if(o.dims.length===5){if(o.dims[2]!==t.numHeads||o.dims[3]!==2||o.dims[4]!==S)throw new Error(\'Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv\');if(n)throw new Error(\'Expect "value" be none when "key" has packed kv format.\');_=5,y=o.dims[1]}else{if(o.dims[1]!==t.numHeads||o.dims[3]!==S)throw new Error(\'Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key\');_=0,y=o.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error(\'Input "query" is expected to have 3 or 5 dimensions when key is empty\');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error(\'Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv\');_=3}if(s){if(s.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimension\');if(n&&r.dims.length===5&&r.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let P=0;if(u){P=8;let T=u.dims;throw T.length===1?T[0]===g?P=1:T[0]===3*g+2&&(P=3):T.length===2&&T[0]===g&&T[1]===y&&(P=5),P===8?new Error(\'Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)\'):new Error("Mask not supported")}let A=!1,z=v;if(n){if(n.dims.length!==3&&n.dims.length!==4)throw new Error(\'Input "value" is expected to have 3 or 4 dimensions\');if(r.dims[0]!==n.dims[0])throw new Error(\'Input "query" and "value" shall have same dim 0 (batch_size)\');if(n.dims.length===3){if(y!==n.dims[1])throw new Error(\'Input "key" and "value" shall have the same dim 1 (kv_sequence_length)\');z=n.dims[2]}else{if(y!==n.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)\');z=n.dims[1]*n.dims[3],A=!0}}let R=C+y,N=!1;if(u)throw new Error("Key padding mask is not supported");if(d)throw new Error("extraAddQk is not supported");if(a)throw new Error("pastKey is not supported");if(m)throw new Error("pastValue is not supported");return{batchSize:g,sequenceLength:w,pastSequenceLength:C,kvSequenceLength:y,totalSequenceLength:R,maxSequenceLength:I,inputHiddenSize:0,hiddenSize:v,vHiddenSize:z,headSize:S,vHeadSize:Math.floor(z/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:P,scale:t.scale,broadcastResPosBias:N,passPastInKv:A,qkvFormat:_}},Ds=e=>ge({...e}),Rs=ge({perm:[0,2,1,3]}),Xd=(e,t,r,o,n,s,u)=>{let d=[o,n,s],a=V.size(d),m=[{type:"uint32",data:a},{type:"uint32",data:u},{type:"uint32",data:s}],h=g=>{let w=j("qkv_with_bias",t.dataType,d),v=M("qkv",t.dataType,d),y=M("bias",r.dataType,d),C=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`\n  ${g.registerUniforms(C).declareVariables(v,y,w)}\n  ${g.mainStart()}\n    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;\n\n    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];\n  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:d,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:m}),getShaderSource:h},{inputs:[t,r],outputs:[-1]})[0]},uo=(e,t,r,o,n,s,u,d)=>{let a=s;if(u){if(o===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return a=Xd(e,s,u,t,o,r*n,d),a=a.reshape([t,o,r,n]),e.compute(st(a,Rs.perm),{inputs:[a],outputs:[-1]})[0]}else return s.dims.length===3&&(a=s.reshape([t,o,r,n])),e.compute(st(a,Rs.perm),{inputs:[a],outputs:[-1]})[0]},Ms=(e,t)=>{let r=Qd(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(e.inputs[1]?.dims.length===5)throw new Error("Packed KV is not implemented");let o=e.inputs[1]&&e.inputs[2]&&e.inputs[1].dims.length===4&&e.inputs[2].dims.length===4,n=uo(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,e.inputs[0],e.inputs[3],0);if(o)return nn(e,n,e.inputs[1],e.inputs[2],e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t);let s=uo(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,e.inputs[1],e.inputs[3],r.hiddenSize),u=uo(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,e.inputs[2],e.inputs[3],2*r.hiddenSize);nn(e,n,s,u,e.inputs[4],void 0,e.inputs[6],e.inputs[7],e.inputs[5],r,t)}});var ec,tc,rc,nc,oc,ac,ic,sc,zs,Vs=q(()=>{"use strict";Ne();$e();we();ec=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1)throw new Error("Input type must be float.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},tc=(e,t,r)=>{let o="";for(let n=t-1;n>=0;--n)o+=`\n            k = i32(${e.indicesGet("indices",n)}) - ${ce("uniforms.pads",n,r)};\n            if (k < 0) {\n              break;\n            }\n            if (k >= i32(${ce("uniforms.x_shape",n,t)})) {\n              break;\n            }\n            offset += k * i32(${ce("uniforms.x_strides",n,t)});\n        `;return`\n          value = ${e.type.value}(uniforms.constant_value);\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ${o}\n            value = x[offset];\n          }\n      `},rc=(e,t,r)=>{let o="";for(let n=t-1;n>=0;--n)o+=`\n                k = i32(${e.indicesGet("indices",n)}) - ${ce("uniforms.pads",n,r)};\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = 2 * (i32(${ce("uniforms.x_shape",n,t)}) - 1);\n                  k = k % _2n_1;\n                  if(k >= i32(${ce("uniforms.x_shape",n,t)})) {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * i32(${ce("uniforms.x_strides",n,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},nc=(e,t,r)=>{let o="";for(let n=t-1;n>=0;--n)o+=`\n                k = i32(${e.indicesGet("indices",n)}) - ${ce("uniforms.pads",n,r)};\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= i32(${ce("uniforms.x_shape",n,t)})) {\n                  k = i32(${ce("uniforms.x_shape",n,t)}) - 1;\n                }\n                offset += k * i32(${ce("uniforms.x_strides",n,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},oc=(e,t,r)=>{let o="";for(let n=t-1;n>=0;--n)o+=`\n                k = i32(${e.indicesGet("indices",n)}) - ${ce("uniforms.pads",n,r)};\n                if (k < 0)  {\n                  k += i32(${ce("uniforms.x_shape",n,t)}]);\n                }\n                if (k >= i32(${ce("uniforms.x_shape",n,t)})) {\n                  k -= i32(${ce("uniforms.x_shape",n,t)});\n                }\n                offset += k * i32(${ce("uniforms.x_strides",n,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},ac=(e,t,r)=>{switch(r.mode){case 0:return tc(e,t,r.pads.length);case 1:return rc(e,t,r.pads.length);case 2:return nc(e,t,r.pads.length);case 3:return oc(e,t,r.pads.length);default:throw new Error("Invalid mode")}},ic=(e,t)=>{let r=V.padShape(e[0].dims.slice(),t.pads),o=e[0].dims,s=[{type:"uint32",data:V.size(r)},{type:"uint32",data:t.pads}];if(t.mode===0){let a=et(e[0].dataType);s.push({type:a,data:t.value})}s.push(...F(e[0].dims),...F(r));let u=["rank"],d=a=>{let m=j("output",e[0].dataType,r.length),h=M("x",e[0].dataType,o.length),g=h.type.value,w=ac(m,o.length,t),v=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&v.push({name:"constant_value",type:g}),`\n            ${a.registerUniforms(v).declareVariables(h,m)}\n            ${a.mainStart()}\n            ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n            let indices = ${m.offsetToIndices("global_idx")};\n\n            var value = ${g}(0);\n            ${w}\n            output[global_idx] = value;\n        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(V.size(r)/64)},programUniforms:s}),getShaderSource:d}},sc=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),o=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,n=e[0].dims.length,s=new Int32Array(2*n).fill(0);if(e.length>=4){let d=e[3].getBigInt64Array();for(let a=0;a<d.length;a++)s[Number(d[a])]=Number(r[a]),s[Number(d[a])+n]=Number(r[a+d.length])}else r.forEach((d,a)=>s[Number(a)]=Number(d));let u=[];return s.forEach(d=>u.push(d)),{mode:t.mode,value:o,pads:u}}else return t},zs=(e,t)=>{ec(e.inputs);let r=sc(e.inputs,t);e.compute(ic(e.inputs,r),{inputs:[0]})}});var mn,Ns,Ws,Hs,Gs,uc,lc,Ls,Fs,js,qs,Ks,Ys,Zs,Js,Qs,Xs,eu,tu,ru=q(()=>{"use strict";Xt();$e();we();mn=e=>{if(Qt.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Ns=(e,t,r)=>{let o=t.format==="NHWC",n=e.dims.slice();o&&n.splice(1,0,n.pop());let s=Object.hasOwnProperty.call(t,"dilations"),u=t.kernelShape.slice(),d=t.strides.slice(),a=s?t.dilations.slice():[],m=t.pads.slice();Ut.adjustPoolAttributes(r,n,u,d,a,m);let h=Ut.computePoolOutputShape(r,n,d,a,u,m,t.autoPad),g=Object.assign({},t);s?Object.assign(g,{kernelShape:u,strides:d,pads:m,dilations:a,cacheKey:t.cacheKey}):Object.assign(g,{kernelShape:u,strides:d,pads:m,cacheKey:t.cacheKey});let w=h.slice();return w.push(w.splice(1,1)[0]),[g,o?w:h]},Ws=(e,t)=>{let r=t.format==="NHWC",o=V.size(e),n=V.size(t.kernelShape),s=[{type:"uint32",data:o},{type:"uint32",data:n}],u=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let d=t.kernelShape[t.kernelShape.length-1],a=t.strides[t.strides.length-1],m=t.pads[t.pads.length/2-1],h=t.pads[t.pads.length-1],g=!!(m+h);s.push({type:"uint32",data:d},{type:"uint32",data:a},{type:"uint32",data:m},{type:"uint32",data:h}),u.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let w=!1;if(t.kernelShape.length===2){let v=t.kernelShape[t.kernelShape.length-2],y=t.strides[t.strides.length-2],C=t.pads[t.pads.length/2-2],I=t.pads[t.pads.length-2];w=!!(C+I),s.push({type:"uint32",data:v},{type:"uint32",data:y},{type:"uint32",data:C},{type:"uint32",data:I}),u.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[s,u,!0,g,w]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let d=V.computeStrides(t.kernelShape);s.push({type:"uint32",data:d},{type:"uint32",data:t.pads},{type:"uint32",data:t.strides}),u.push({name:"kernelStrides",type:"u32",length:d.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let a=t.pads.reduce((m,h)=>m+h);return[s,u,!!a,!1,!1]}},Hs=(e,t,r,o,n,s,u,d,a,m,h,g)=>{let w=n.format==="NHWC",v=t.type.value,y=j("output",t.type.tensor,o);if(n.kernelShape.length<=2){let C="",I="",S="",_=r-(w?2:1);if(h?C=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${_}] = indices[${_}] * uniforms.sw - uniforms.pwStart + i;\n                  if (xIndices[${_}] < 0 || xIndices[${_}]\n                      >= uniforms.x_shape[${_}]) {\n                    pad++;\n                    continue;\n                  }\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${s}\n                }`:C=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${_}] = indices[${_}] * uniforms.sw - uniforms.pwStart + i;\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${s}\n                }`,n.kernelShape.length===2){let A=r-(w?3:2);g?I=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${A}] = indices[${A}] * uniforms.sh - uniforms.phStart + j;\n                  if (xIndices[${A}] < 0 || xIndices[${A}] >= uniforms.x_shape[${A}]) {\n                    pad += i32(uniforms.kw);\n                    continue;\n                  }\n              `:I=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${A}] = indices[${A}] * uniforms.sh - uniforms.phStart + j;\n                `,S=`\n              }\n            `}return`\n            ${e.registerUniforms(a).declareVariables(t,y)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n              let indices = ${y.offsetToIndices("global_idx")};\n              var xIndices = ${y.offsetToIndices("global_idx")};\n\n              var value = ${v}(${d});\n              var pad = 0;\n              ${I}\n              ${C}\n              ${S}\n              ${u}\n\n              output[global_idx] = value;\n            }`}else{if(w)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let C=n.kernelShape.length,I=n.pads.length,S="";return m?S=`\n                if (xIndices[j] >= uniforms.x_shape[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[${t.indicesToOffset("xIndices")}];\n                ${s}\n              }`:S=`\n              }\n              let x_val = x[${t.indicesToOffset("xIndices")}];\n              ${s}\n            `,`\n            ${e.registerUniforms(a).declareVariables(t,y)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n              let indices = ${y.offsetToIndices("global_idx")};\n              var xIndices = ${y.offsetToIndices("global_idx")};\n\n              var offsets: array<u32, ${C}>;\n\n              var value = ${v}(${d});\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {\n                var offset = i;\n                for (var j = 0u; j < ${C-1}u; j++) {\n                  offsets[j] = offset / ${ce("uniforms.kernelStrides","j",C)};\n                  offset -= offsets[j] * ${ce("uniforms.kernelStrides","j",C)};\n                }\n                offsets[${C-1}] = offset;\n\n                isPad = false;\n                for (var j = ${r-C}u; j < ${r}u; j++) {\n                  xIndices[j] = indices[j] * ${ce("uniforms.strides",`j - ${r-C}u`,C)}\n                    + offsets[j - ${r-C}u] - ${ce("uniforms.pads","j - 2u",I)};\n                  ${S}\n              }\n              ${u}\n\n              output[global_idx] = value;\n            }`}},Gs=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,uc=e=>`${Gs(e)};${e.countIncludePad}`,lc=e=>`${Gs(e)};${e.storageOrder};${e.dilations}`,Ls=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),Fs=(e,t,r,o)=>{let[n,s]=Ns(t,o,r),u=M("x",t.dataType,t.dims.length),d=u.type.value,a="value += x_val;",m="";n.countIncludePad?m+=`value /= ${d}(uniforms.kernelSize);`:m+=`value /= ${d}(i32(uniforms.kernelSize) - pad);`;let[h,g,w,v,y]=Ws(s,n);h.push(...F(t.dims),...F(s));let C=["rank"];return{name:e,shaderCache:{hint:`${o.cacheKey};${w};${v};${y}`,inputDependencies:C},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(V.size(s)/64)},programUniforms:h}),getShaderSource:I=>Hs(I,u,t.dims.length,s.length,n,a,m,0,g,w,v,y)}},js=e=>{let t=e.count_include_pad!==0,r=Ls(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let o={countIncludePad:t,...r,cacheKey:""};return{...o,cacheKey:uc(o)}},qs=(e,t)=>{mn(e.inputs),e.compute(Fs("AveragePool",e.inputs[0],!1,t))},Ks={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},Ys=e=>{let t=e.format;return{format:t,...Ks,cacheKey:t}},Zs=(e,t)=>{mn(e.inputs),e.compute(Fs("GlobalAveragePool",e.inputs[0],!0,t))},Js=(e,t,r,o)=>{let[n,s]=Ns(t,o,r),u=`\n      value = max(x_val, value);\n    `,d="",a=M("x",t.dataType,t.dims.length),m=["rank"],[h,g,w,v,y]=Ws(s,n);return h.push(...F(t.dims),...F(s)),{name:e,shaderCache:{hint:`${o.cacheKey};${w};${v};${y}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(V.size(s)/64)},programUniforms:h}),getShaderSource:C=>Hs(C,a,t.dims.length,s.length,n,u,d,-1e5,g,w,v,y)}},Qs=(e,t)=>{mn(e.inputs),e.compute(Js("MaxPool",e.inputs[0],!1,t))},Xs=e=>{let t=e.storage_order,r=e.dilations,o=Ls(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let n={storageOrder:t,dilations:r,...o,cacheKey:""};return{...n,cacheKey:lc(n)}},eu=e=>{let t=e.format;return{format:t,...Ks,cacheKey:t}},tu=(e,t)=>{mn(e.inputs),e.compute(Js("GlobalMaxPool",e.inputs[0],!0,t))}});var cc,pc,nu,ou=q(()=>{"use strict";Xt();Ne();we();cc=(e,t,r)=>{let o=e===t,n=e<t&&r<0,s=e>t&&r>0;if(o||n||s)throw new Error("Range these inputs\' contents are invalid.")},pc=(e,t,r,o)=>{let n=Math.abs(Math.ceil((t-e)/r)),s=[n],u=n,d=et(o),a=[{type:"uint32",data:u},{type:d,data:e},{type:d,data:r},...F(s)],m=h=>{let g=j("output",o,s.length),w=g.type.value,v=[{name:"outputSize",type:"u32"},{name:"start",type:w},{name:"delta",type:w}];return`\n        ${h.registerUniforms(v).declareVariables(g)}\n        ${h.mainStart()}\n        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        output[global_idx] = uniforms.start + ${w}(global_idx) * uniforms.delta;\n      }`};return{name:"Range",shaderCache:{hint:`${o}`},getShaderSource:m,getRunData:()=>({outputs:[{dims:s,dataType:o}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:a})}},nu=e=>{let t=0,r=0,o=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],o=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],o=e.inputs[2].getFloat32Array()[0]),Qt.webgpu.validateInputContent&&cc(t,r,o),e.compute(pc(t,r,o,e.inputs[0].dataType),{inputs:[]})}});var mc,fc,hc,gc,yc,bc,wc,vc,$c,Sc,xc,au,_c,Cc,Ic,Ac,Tc,iu,su,uu=q(()=>{"use strict";$e();je();we();mc=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and\n            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},fc=(e,t,r)=>{t.every(n=>n>=0&&n<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let o=new Array(r).fill(1);return t.forEach((n,s)=>o[n]=e[s]),o},hc=(e,t,r,o,n,s)=>{let[u,d,a]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],m=e[0].dims.length;if(u>0&&e.length>u&&e[u].dims.length>0)e[u].getFloat32Array().forEach(h=>s.push(h));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(d>0&&e.length>d&&e[d].dims.length>0){if(e[d].getFloat32Array().forEach(h=>o.push(h)),o.length!==0&&o.length!==m&&r>=18&&o.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");mc(o,t),t.axes.length>0&&fc(o,t.axes,m).forEach((h,g)=>o[g]=h)}if(a>0&&e.length>a&&(e[a].getBigInt64Array().forEach(h=>n.push(Number(h))),n.length!==m||r>=18&&n.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(o.length!==t.axes.length)throw new Error(\'Resize requires "scales" input size to be of axes rank when axes attributes is specified\');if(n.length!==t.axes.length)throw new Error(\'Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified\')}if(typeof o<"u"&&typeof n<"u"&&o.length>0&&n.length>m)throw new Error("Resize requires only of scales or sizes to be specified")},gc=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,\n     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`return ${t}(xResized) / ${t}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {\n                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;\n                  } else {\n                    return 0.0;\n                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {\n                    return 0.0;\n                  } else {\n                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating\n                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an\n                    // offset-by-one error later in floor().\n                    let whole = ${t}(xResized * (lengthOriginal - 1) / (lengthResized - 1));\n                    let fract =\n                        ${t}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${t}(lengthResized - 1);\n                    return whole + fract;\n                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {\n                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +\n                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /\n                        ${t}(lengthResized - 1);\n                  } else {\n                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);\n                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);\n                  const adjustment = ${t}(lengthResized) / outputWidth;\n                  const center = ${t}(lengthOriginal) / 2;\n                  const offset = center * (1 - adjustment);\n                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",yc=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",bc=(e,t,r)=>{let o=new Array(r).fill(0).concat(new Array(r).fill(1)),n=e.length===0?o:e.slice();return t.length>0?(t.forEach((s,u)=>{o[s]=n[u],o[u+r]=n[t.length+u]}),o):n},wc=(e,t,r,o)=>{let n=[];if(r.length>0)if(o.length>0){if(e.forEach(s=>n.push(s)),Math.max(...o)>e.length)throw new Error("axes is out of bound");o.forEach((s,u)=>n[s]=r[u])}else r.forEach(s=>n.push(s));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");n=e.map((s,u)=>Math.round(s*t[u]))}return n},vc=(e,t,r)=>{let o=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(s=>t[s]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(s=>t[s]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let n=e.slice();return r.axes.length>0?(r.axes.forEach(s=>t[s]=o),r.axes.forEach(s=>n[s]=Math.round(e[s]*t[s]))):(t.fill(o,0,t.length),n.forEach((s,u)=>n[u]=Math.round(s*t[u]))),n},$c=(e,t,r,o,n)=>`\n    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {\n      var original_indices: array<${e.type.value}, ${r.length}>;\n      for (var i:u32 = 0; i < ${r.length}; i++) {\n        var output_index = ${e.indicesGet("output_indices","i")};\n        var scale = ${ce("uniforms.scales","i",o)};\n        var roi_low = ${ce("uniforms.roi","i",n)};\n        var roi_hi = ${ce("uniforms.roi",`i + ${t.length}`,n)};\n        if (scale == 1.0) {\n          original_indices[i] = ${e.type.value}(output_index);\n        } else {\n          var input_shape_i = ${ce("uniforms.input_shape","i",t.length)};\n          var output_shape_i = ${ce("uniforms.output_shape","i",r.length)};\n          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                           input_shape_i, roi_low, roi_hi);\n        }\n      }\n      return original_indices;\n    }`,Sc=(e,t,r,o,n,s,u)=>`\n    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n      var input_indices: ${e.type.indices};\n      for (var i:u32 = 0; i < ${o.length}; i++) {\n        var output_index = ${t.indicesGet("output_indices","i")};\n        var input_index: u32;\n        var scale = ${ce("uniforms.scales","i",n)};\n        if (scale == 1.0) {\n          input_index = output_index;\n        } else {\n          var roi_low = ${ce("uniforms.roi","i",s)};\n          var roi_hi = ${ce("uniforms.roi",`i + ${r.length}`,s)};\n          var input_shape_i = ${ce("uniforms.input_shape","i",r.length)};\n          var output_shape_i = ${ce("uniforms.output_shape","i",o.length)};\n          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                        input_shape_i, roi_low, roi_hi);\n          if (!${u} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {\n            if (original_idx < 0) {\n              input_index = 0;\n            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {\n              input_index = input_shape_i - 1;\n            } else {\n              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));\n            }\n          } else {\n            input_index = u32(original_idx);\n          }\n        }\n        ${e.indicesSet("input_indices","i"," input_index")}\n      }\n      return input_indices;\n    }`,xc=(e,t)=>`\n    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {\n      for (var i:u32 = 0; i < ${t.length}; i++) {\n        var input_index = ${e.indicesGet("input_indices","i")};\n        if (input_index < 0 || input_index >= ${ce("uniforms.input_shape","i",t.length)}) {\n          return false;\n        }\n      }\n      return true;\n    }`,au=(e,t,r,o)=>e.rank>o?`\n    ${e.indicesSet("input_indices",t,"channel")};\n    ${e.indicesSet("input_indices",r,"batch")};\n`:"",_c=(e,t,r,o,n)=>{let[u,d,a,m]=r.length===2?[-1,0,1,-1]:[0,2,3,1],h=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${h} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",d,`max(0, min(row, ${r[d]} - 1))`)};\n      ${e.indicesSet("input_indices",a,`max(0, min(col, ${r[a]} - 1))`)};\n      ${au(e,m,u,2)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${h} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var row:${h} = originalIndices[${d}];\n      var col:${h} = originalIndices[${a}];\n      ${o?`if (row < 0 || row > (${r[d]} - 1) || col < 0 || col > (${r[a]} - 1)) {\n        return ${n};\n      }`:""};\n      row = max(0, min(row, ${r[d]} - 1));\n      col = max(0, min(col, ${r[a]} - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = ${r.length>2?`u32(originalIndices[${m}])`:"0"};\n      var batch: u32 =  ${r.length>2?`u32(originalIndices[${u}])`:"0"};\n      var x11: ${h} = getInputValue(batch, channel, row1, col1);\n      var x12: ${h} = getInputValue(batch, channel, row1, col2);\n      var x21: ${h} = getInputValue(batch, channel, row2, col1);\n      var x22: ${h} = getInputValue(batch, channel, row2, col2);\n      var dx1: ${h} = abs(row - ${h}(row1));\n      var dx2: ${h} = abs(${h}(row2) - row);\n      var dy1: ${h} = abs(col - ${h}(col1));\n      var dy2: ${h} = abs(${h}(col2) - col);\n      if (row1 == row2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (col1 == col2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }`},Cc=(e,t,r,o,n,s,u,d,a,m)=>{let h=r.length===2,g=!0,[w,v]=h?[0,1]:g?[2,3]:[1,2],y=e.type.value,C=I=>{let S=I===w?"row":"col";return`\n      fn ${S}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${y} {\n        var output_index = ${t.indicesGet("output_indices",I)};\n        var originalIdx: ${y} = getOriginalCoordinateFromResizedCoordinate(output_index, ${n[I]},\n        ${o[I]}, ${r[I]}, ${s[I]}, ${s[I]} + ${r.length});\n        var fractOriginalIdx: ${y} = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (${d} && (originalIdx < 0 || originalIdx > (${r[I]} - 1))) {\n          return ${a};\n        }\n        var data: array<${y}, 4> = array<${y}, 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ${S}: ${y} = originalIdx + ${y}(i);\n          if (${S} < 0 || ${S} >= ${r[I]}) {\n            ${(()=>m?`coefs[i + 1] = 0.0;\n                        continue;`:d?`return ${a};`:`${S} = max(0, min(${S}, ${r[I]} - 1));`)()};\n          }\n        var input_indices_copy: ${e.type.indices} = input_indices;\n          ${e.indicesSet("input_indices_copy",I,`u32(${S})`)};\n          data[i + 1] = ${I===w?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};\n        }\n        return cubicInterpolation1D(data, coefs);\n      }`};return`\n    ${C(w)};\n    ${C(v)};\n  fn getCubicInterpolationCoefs(s: ${y}) -> array<${y}, 4> {\n    var absS = abs(s);\n    var coeffs: array<${y}, 4> = array<${y}, 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: ${y} = 1.0 - absS;\n    var twoMinusAbsS: ${y} = 2.0 - absS;\n    var onePlusAbsS: ${y} = 1.0 + absS;\n    coeffs[0] = ((${u} * onePlusAbsS - 5 * ${u}) * onePlusAbsS + 8 * ${u}) * onePlusAbsS - 4 * ${u};\n    coeffs[1] = ((${u} + 2) * absS - (${u} + 3)) * absS * absS + 1;\n    coeffs[2] = ((${u} + 2) * oneMinusAbsS - (${u} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((${u} * twoMinusAbsS - 5 * ${u}) * twoMinusAbsS + 8 * ${u}) * twoMinusAbsS - 4 * ${u};\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<${y}, 4>, coefs: array<${y}, 4>) -> ${y} {\n    var coefsSum: ${y} = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${y} {\n    var input_indices: ${e.type.indices} = output_indices;\n    return colCubicInterpolation(input_indices, output_indices);\n  }\n    `},Ic=(e,t,r,o,n)=>{let[u,d,a,m,h]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],g=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${g} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",d,`max(0, min(depth, ${r[d]} - 1))`)};\n      ${e.indicesSet("input_indices",a,`max(0, min(height, ${r[a]} - 1))`)};\n      ${e.indicesSet("input_indices",m,`max(0, min(width, ${r[m]} - 1))`)};\n      ${au(e,h,u,3)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${g} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var depth:${g} = originalIndices[${d}];\n      var height:${g} = originalIndices[${a}];\n      var width:${g} = originalIndices[${m}];\n      ${o?`if (depth < 0 || depth > (${r[d]} - 1) || height < 0 || height > (${r[a]} - 1) || width < 0 || (width > ${r[m]} - 1)) {\n      return ${n};\n        }`:""};\n\n    depth = max(0, min(depth, ${r[d]} - 1));\n      height = max(0, min(height, ${r[a]} - 1));\n      width = max(0, min(width, ${r[m]} - 1));\n      var depth1: u32 = u32(depth);\n      var height1: u32 = u32(height);\n      var width1: u32 = u32(width);\n      var depth2: u32 = u32(depth + 1);\n      var height2: u32 = u32(height + 1);\n      var width2: u32 = u32(width + 1);\n      var channel: u32 = ${r.length>3?`u32(originalIndices[${h}])`:"0"};\n      var batch: u32 =  ${r.length>3?`u32(originalIndices[${u}])`:"0"};\n\n      var x111: ${g} = getInputValue(batch, channel, depth1, height1, width1);\n      var x112: ${g} = getInputValue(batch, channel, depth1, height1, width2);\n      var x121: ${g} = getInputValue(batch, channel, depth1, height2, width1);\n      var x122: ${g} = getInputValue(batch, channel, depth1, height2, width2);\n      var x211: ${g} = getInputValue(batch, channel, depth2, height1, width1);\n      var x212: ${g} = getInputValue(batch, channel, depth2, height1, width2);\n      var x221: ${g} = getInputValue(batch, channel, depth2, height2, width1);\n      var x222: ${g} = getInputValue(batch, channel, depth2, height2, width2);\n      var dx1: ${g} = abs(depth - ${g}(depth1));\n      var dx2: ${g} = abs(${g}(depth2) - depth);\n      var dy1: ${g} = abs(height - ${g}(height1));\n      var dy2: ${g} = abs(${g}(height2) - height);\n      var dz1: ${g} = abs(width - ${g}(width1));\n      var dz2: ${g} = abs(${g}(width2) - width);\n      if (depth1 == depth2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (height1 == height2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      if (width1 == width2) {\n        dz1 = 0.5;\n        dz2 = 0.5;\n      }\n      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +\n              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);\n    }`},Ac=(e,t,r,o,n,s)=>{let u=e.dims,d=bc(s,t.axes,u.length),a=wc(u,o,n,t.axes),m=o.slice();o.length===0&&(m=u.map((_,P)=>_===0?1:a[P]/_),t.keepAspectRatioPolicy!=="stretch"&&(a=vc(u,m,t)));let h=j("output",e.dataType,a.length),g=M("input",e.dataType,u.length),w=V.size(a),v=u.length===a.length&&u.every((_,P)=>_===a[P]),y=t.coordinateTransformMode==="tf_crop_and_resize",C=t.extrapolationValue,I=g.type.value,S=_=>`\n      ${v?"":`\n      ${gc(t.coordinateTransformMode,I)};\n      ${(()=>{switch(t.mode){case"nearest":return`\n              ${xc(g,u)};\n              ${yc(t.nearestMode,r,I)};\n              ${Sc(g,h,u,a,m.length,d.length,y)};\n              `;case"linear":return`\n              ${$c(h,u,a,m.length,d.length)};\n              ${(()=>{if(u.length===2||u.length===4)return`${_c(g,h,u,y,C)}`;if(u.length===3||u.length===5)return`${Ic(g,h,u,y,C)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};\n            `;case"cubic":return`\n            ${(()=>{if(u.length===2||u.length===4)return`${Cc(g,h,u,a,m,d,t.cubicCoeffA,y,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};\n            `;default:throw Error("Invalid resize mode")}})()};\n      `}\n      ${_.registerUniform("output_size","u32").registerUniform("scales","f32",m.length).registerUniform("roi","f32",d.length).declareVariables(g,h)}\n      ${_.mainStart()}\n        ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n        ${v?"output[global_idx] = input[global_idx];":`\n        let output_indices = ${h.offsetToIndices("global_idx")};\n        var input_indices: ${g.type.indices};\n        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);\n                if (checkInputIndices(input_indices)) {\n                  output[global_idx] = ${g.getByIndices("input_indices")};\n                } else {\n                  output[global_idx] = ${t.extrapolationValue};\n                }`;case"linear":return`output[global_idx] = ${u.length===2||u.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};\n`}\n      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${m.length>0?m:""}|${n.length>0?n:""}|${d.length>0?d:""}|${v}|${u}`,inputDependencies:["rank"]},getShaderSource:S,getRunData:()=>({outputs:[{dims:a,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:[{type:"uint32",data:w},{type:"float32",data:m},{type:"float32",data:d},...F(u),...F(a)]})}},Tc=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},iu=(e,t)=>{let r=[],o=[],n=[],s=Tc(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");hc(e.inputs,t,s,r,o,n),e.compute(Ac(e.inputs[0],t,s,r,o,n),{inputs:[0]})},su=e=>{let t=e.antialias,r=e.axes,o=e.coordinateTransformMode,n=e.cubicCoeffA,s=e.excludeOutside!==0,u=e.extrapolationValue,d=e.keepAspectRatioPolicy,a=e.mode,m=e.nearestMode===""?"simple":e.nearestMode;return ge({antialias:t,axes:r,coordinateTransformMode:o,cubicCoeffA:n,excludeOutside:s,extrapolationValue:u,keepAspectRatioPolicy:d,mode:a,nearestMode:m})}});var Ec,Oc,lu,du,cu=q(()=>{"use strict";Ne();$e();je();we();Ec=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],o=e[2];if(t.dataType!==r.dataType||t.dataType!==o.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let n=t.dims[t.dims.length-1],s=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==n)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==s)throw new Error("Skip must have the same sequence length as input");if(o.dims.length!==1)throw new Error("Gamma must be 1D");if(o.dims[o.dims.length-1]!==n)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let u=e[3];if(u.dims.length!==1)throw new Error("Beta must be 1D");if(u.dims[u.dims.length-1]!==n)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let u=e[4];if(u.dims.length!==1)throw new Error("Bias must be 1D");if(u.dims[u.dims.length-1]!==n)throw new Error("Bias must have the same hidden size as input")}},Oc=(e,t,r,o)=>{let n=e[0].dims,s=V.size(n),u=n,d=s,a=n.slice(-1)[0],m=o?n.slice(0,-1).concat(1):[],h=e.length>3,g=e.length>4,w=o&&r>1,v=o&&r>2,y=r>3,C=Fe(a),I=[M("x",e[0].dataType,e[0].dims,C),M("skip",e[1].dataType,e[1].dims,C),M("gamma",e[2].dataType,e[2].dims,C)];h&&I.push(M("beta",e[3].dataType,e[3].dims,C)),g&&I.push(M("bias",e[4].dataType,e[4].dims,C)),I.push(j("output",e[0].dataType,u,C)),w&&I.push(j("meanOutput",1,m)),v&&I.push(j("invStdOutput",1,m)),y&&I.push(j("inputSkipBiasSum",e[0].dataType,u,C));let S=Le(e[0].dataType),_=A=>`\n      const hiddenSize: f32 = ${a};\n      const hiddenSizeVectorized: u32 = ${a/C};\n      const epsilon: f32 = ${t.epsilon};\n\n      ${A.declareVariables(...I)}\n\n      ${A.mainStart()}\n        ${A.guardAgainstOutOfBoundsWorkgroupSizes(d/a)}\n        let offset = global_idx * hiddenSizeVectorized;\n        var sum = ${Ze("f32",C)};\n        var squareSum = ${Ze("f32",C)};\n        for (var i: u32 = 0; i < hiddenSizeVectorized; i++) {\n          let skipValue = skip[offset + i];\n          let biasValue = ${g?"bias[i]":"0.0"};\n          let inputValue = x[offset + i];\n          let value = inputValue + skipValue + biasValue;\n          ${y?"inputSkipBiasSum[offset + i] = value;":""}\n          output[offset + i] = value;\n          let f32Value = ${it(S,C,"value")};\n          sum += f32Value;\n          squareSum += f32Value * f32Value;\n        }\n        let mean = ${tt("sum",C)} / hiddenSize;\n        let invStdDev = inverseSqrt(${tt("squareSum",C)} / hiddenSize - mean * mean + epsilon);\n        ${w?"meanOutput[global_idx] = mean;":""}\n        ${v?"invStdOutput[global_idx] = invStdDev;":""}\n        for (var i: u32 = 0; i < hiddenSizeVectorized; i++) {\n          output[offset + i] = (output[offset + i] - ${S}(mean)) * ${S}(invStdDev) * gamma[i]\n           + ${h?"beta[i]":"0.0"};\n        }\n      }`,P=[{dims:u,dataType:e[0].dataType}];return r>1&&P.push({dims:m,dataType:1}),r>2&&P.push({dims:m,dataType:1}),r>3&&P.push({dims:n,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:t.cacheKey},getShaderSource:_,getRunData:()=>({outputs:P,dispatchGroup:{x:Math.ceil(d/a/64)}})}},lu=(e,t)=>{Ec(e.inputs);let o=[0];e.outputCount>1&&o.push(-3),e.outputCount>2&&o.push(-3),e.outputCount>3&&o.push(3),e.compute(Oc(e.inputs,t,e.outputCount,!1),{outputs:o})},du=e=>{let t=e.epsilon;return ge({epsilon:t})}});var Pc,fn,kc,pu,Bc,Rc,mu,fu,hu=q(()=>{"use strict";Ne();$e();je();we();Pc=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,o)=>{if(e[o+1].dataType!==6&&e[o+1].dataType!==7)throw new Error(`Input ${o} must be an array of int32 or int64`)})},fn=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(o=>r.push(Number(o)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(o=>r.push(Number(o)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},kc=(e,t)=>{if(e.length>1){let r=fn(e,1),o=fn(e,2),n=fn(e,3);return n.length===0&&(n=[...Array(e[0].dims.length).keys()]),ge({starts:r,ends:o,axes:n})}else return t},pu=(e,t,r,o,n)=>{let s=e;return e<0&&(s+=r[o[t]]),n[t]<0?Math.max(0,Math.min(s,r[o[t]]-1)):Math.max(0,Math.min(s,r[o[t]]))},Bc=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n          var input_indices: ${e.type.indices};\n          var carry = 0u;\n          for (var i = ${r.length}; i >= 0; i--) {\n            let input_shape_i = ${ce("uniforms.input_shape","i",r.length)};\n            let steps_i = ${ce("uniforms.steps","i",r.length)};\n            let signs_i = ${ce("uniforms.signs","i",r.length)};\n            let starts_i = ${ce("uniforms.starts","i",r.length)};\n            var output_index = ${t.indicesGet("output_indices","i")};\n            var input_index = output_index * steps_i + starts_i + carry;\n            carry = input_index / input_shape_i;\n            input_index = input_index % input_shape_i;\n            if (signs_i < 0) {\n              input_index = input_shape_i - input_index - 1u + starts_i;\n            }\n            ${e.indicesSet("input_indices","i","input_index")};\n          }\n          return input_indices;\n      }`,Rc=(e,t)=>{let r=e[0].dims,o=V.size(r),n=t.axes.length>0?V.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],s=fn(e,4);s.forEach(S=>S!==0||(()=>{throw new Error("step cannot be 0")})),s.length===0&&(s=Array(n.length).fill(1));let u=t.starts.map((S,_)=>pu(S,_,r,n,s)),d=t.ends.map((S,_)=>pu(S,_,r,n,s));if(n.length!==u.length||n.length!==d.length)throw new Error("start, ends and axes should have the same number of elements");if(n.length!==r.length)for(let S=0;S<r.length;++S)n.includes(S)||(u.splice(S,0,0),d.splice(S,0,r[S]),s.splice(S,0,1));let a=s.map(S=>Math.sign(S));s.forEach((S,_,P)=>{if(S<0){let A=(d[_]-u[_])/S,z=u[_],R=z+A*s[_];u[_]=R,d[_]=z,P[_]=-S}});let m=r.slice(0);n.forEach((S,_)=>{m[S]=Math.ceil((d[S]-u[S])/s[S])});let h={dims:m,dataType:e[0].dataType},g=j("output",e[0].dataType,m.length),w=M("input",e[0].dataType,e[0].dims.length),v=V.size(m),y=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:u.length},{name:"signs",type:"i32",length:a.length},{name:"steps",type:"u32",length:s.length}],C=[{type:"uint32",data:v},{type:"uint32",data:u},{type:"int32",data:a},{type:"uint32",data:s},...F(e[0].dims),...F(m)],I=S=>`\n      ${S.registerUniforms(y).declareVariables(w,g)}\n        ${Bc(w,g,r)}\n        ${S.mainStart()}\n          ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n          let output_indices = ${g.offsetToIndices("global_idx")};\n          let input_indices = calculateInputIndices(output_indices);\n          ${g.setByOffset("global_idx",w.getByIndices("input_indices"))}\n      }`;return{name:"Slice",shaderCache:{hint:`${a.length}_${u.length}_${s.length}`,inputDependencies:["rank"]},getShaderSource:I,getRunData:()=>({outputs:[h],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:C})}},mu=(e,t)=>{Pc(e.inputs,t);let r=kc(e.inputs,t);e.compute(Rc(e.inputs,r),{inputs:[0]})},fu=e=>{let t=e.starts,r=e.ends,o=e.axes;return ge({starts:t,ends:r,axes:o})}});var Dc,Mc,gu,yu,bu=q(()=>{"use strict";$e();je();we();Dc=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},Mc=(e,t)=>{let r=e.dims,o=V.size(r),n=64,s=t.axis;if(s<0&&(s=r.length+s),s<r.length-1)throw new Error("softmax only supports last axis for now.");let u=r[s],d=o/u,a=Fe(u),m=u/a,h=(I,S)=>S===4?`max(max(${I}.x, ${I}.y), max(${I}.z, ${I}.w))`:S===2?`max(${I}.x, ${I}.y)`:S===3?`max(max(${I}.x, ${I}.y), ${I}.z)`:I,g=M("x",e.dataType,e.dims,a),w=j("result",e.dataType,e.dims,a),v=g.type.value,y=Le(e.dataType)==="f32"?`var threadMax = ${v}(-3.402823e+38f);`:`var threadMax = ${v}(-65504.0h);`,C=I=>`\n      var<workgroup> rowMaxShared : ${v};\n      var<workgroup> rowSumShared : ${v};\n      var<workgroup> threadShared : array<${v}, ${n}>;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ${v} {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ${v}) {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n      ${I.registerUniform("packedCols","i32").declareVariables(g,w)}\n      ${I.mainStart()}\n        let gindex = i32(global_idx);\n        let lindex = i32(local_idx);\n        const wg = ${n};\n        let row = gindex / wg;\n        let cols = uniforms.packedCols;\n        let row_stride : i32 = uniforms.packedCols;\n\n        // find the rows max\n        ${y}\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = ${v}(${h("threadShared[0]",a)});\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum = ${v}(0.0);\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = ${v}(${tt("threadShared[0]",a)});\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }`;return{name:"Softmax",shaderCache:{hint:`${a}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.dataType}],dispatchGroup:{x:d},programUniforms:[{type:"uint32",data:m}]}),getShaderSource:C}},gu=(e,t)=>{Dc(e.inputs),e.compute(Mc(e.inputs[0],t))},yu=e=>ge({axis:e.axis})});var Uc,zc,Vc,Nc,Wc,wu,vu,$u=q(()=>{"use strict";$e();je();we();Uc=e=>{if(!e||e.length<1)throw new Error("too few inputs")},zc=(e,t)=>{let r=[],o=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(n=>r.push(Number(n))),o=r.length),ge({numOutputs:o,axis:t.axis,splitSizes:r})},Vc=e=>`\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {\n    if (index < ${ce("uniforms.size_in_split_axis","i",e)}) {\n        return i;\n    }\n    }\n    return ${e}u;\n}`,Nc=e=>{let t=e.length,r=[];for(let o=0;o<t;++o){let n=e[o].setByIndices("indices","input[global_idx]");t===1?r.push(n):o===0?r.push(`if (output_number == ${o}u) { ${n} }`):o===t-1?r.push(`else { ${n} }`):r.push(`else if (output_number == ${o}) { ${n} }`)}return`\n      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {\n        ${r.join(`\n`)}\n      }`},Wc=(e,t)=>{let r=e[0].dims,o=V.size(r),n=e[0].dataType,s=V.normalizeAxis(t.axis,r.length),u=new Array(t.numOutputs),d=M("input",n,r),a=new Array(t.numOutputs),m=[],h=[],g=0,w=[{type:"uint32",data:o}];for(let y=0;y<t.numOutputs;y++){g+=t.splitSizes[y],a[y]=g;let C=r.slice();C[t.axis]=t.splitSizes[y],h.push(C),u[y]=j(`output${y}`,n,C),m.push({dims:h[y],dataType:e[0].dataType})}w.push({type:"uint32",data:a}),w.push(...F(r)),h.forEach(y=>w.push(...F(y)));let v=y=>`\n  ${y.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",a.length).declareVariables(d,...u)}\n  ${Vc(a.length)}\n  ${Nc(u)}\n\n  ${y.mainStart()}\n    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}\n\n    var indices = ${d.offsetToIndices("global_idx")};\n    var index = ${d.indicesGet("indices",s)};\n    let output_number = calculateOutputIndex(index);\n    if (output_number != 0) {\n      index -= ${ce("uniforms.size_in_split_axis","output_number - 1u",a.length)};\n      ${d.indicesSet("indices",s,"index")};\n    }\n    writeBufferData(output_number, indices, global_idx);\n  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:v,getRunData:()=>({outputs:m,dispatchGroup:{x:Math.ceil(o/64)},programUniforms:w})}},wu=(e,t)=>{Uc(e.inputs);let r=e.inputs.length===1?t:zc(e.inputs,t);e.compute(Wc(e.inputs,r),{inputs:[0]})},vu=e=>{let t=e.axis,r=e.splitSizes,o=e.numOutputs<0?r.length:e.numOutputs;if(o!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return ge({axis:t,numOutputs:o,splitSizes:r})}});var Su,Hc,Gc,Lc,xu,_u=q(()=>{"use strict";Ne();$e();we();Su=e=>Array.from(e.getBigInt64Array(),Number),Hc=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Su(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},Gc=(e,t)=>{let r=[];for(let o=0;o<e.length;++o)r.push(e[o]*t[o]);return r},Lc=e=>{let t=e[0].dims,r=Su(e[1]),o=Gc(t,r),n=V.size(o),s=e[0].dataType,u=M("input",s,t.length),d=j("output",s,o.length),a=m=>`\n      const inputShape = ${u.indices(...t)};\n      ${m.registerUniform("output_size","u32").declareVariables(u,d)}\n      ${m.mainStart()}\n      ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n      let output_indices = ${d.offsetToIndices("global_idx")};\n      var input_indices: ${u.type.indices};\n      for (var i = 0; i < ${t.length}; i++) {\n        let input_dim_i = ${u.indicesGet("uniforms.input_shape","i")};\n        let input_dim_value = ${d.indicesGet("output_indices","i")}  % input_dim_i;\n\n        ${u.indicesSet("input_indices","i","input_dim_value")}\n      }\n      ${d.setByOffset("global_idx",u.getByIndices("input_indices"))}\n    }`;return{name:"Tile",shaderCache:{hint:`${r}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:[{type:"uint32",data:n},...F(e[0].dims),...F(o)]}),getShaderSource:a}},xu=e=>{Hc(e.inputs),e.compute(Lc(e.inputs),{inputs:[0]})}});var Fc,jc,Cu,Iu=q(()=>{"use strict";Ne();$e();we();Fc=(e,t,r,o,n)=>{let s=j("output_data",n,r.length,4),u=M("a_data",t[1].dataType,t[1].dims.length,4),d=M("b_data",t[2].dataType,t[2].dims.length,4),a=M("c_data",t[0].dataType,t[0].dims.length,4),m,h=(g,w,v)=>`select(${w}, ${g}, ${v})`;if(!o)m=s.setByOffset("global_idx",h(u.getByOffset("global_idx"),d.getByOffset("global_idx"),a.getByOffset("global_idx")));else{let g=(w,v,y="")=>{let C=`a_data[index_a${v}][component_a${v}]`,I=`b_data[index_b${v}][component_b${v}]`,S=`bool(c_data[index_c${v}] & ${4278190080>>>(3-v)*8}u)`;return`\n            let output_indices${v} = ${s.offsetToIndices(`global_idx * 4u + ${v}u`)};\n            let offset_a${v} = ${u.broadcastedIndicesToOffset(`output_indices${v}`,s)};\n            let offset_b${v} = ${d.broadcastedIndicesToOffset(`output_indices${v}`,s)};\n            let offset_c${v} = ${a.broadcastedIndicesToOffset(`output_indices${v}`,s)};\n            let index_a${v} = offset_a${v} / 4u;\n            let index_b${v} = offset_b${v} / 4u;\n            let index_c${v} = offset_c${v} / 4u;\n            let component_a${v} = offset_a${v} % 4u;\n            let component_b${v} = offset_b${v} % 4u;\n            ${w}[${v}] = ${y}(${h(C,I,S)});\n          `};n===9?m=`\n            var data = vec4<u32>(0);\n            ${g("data",0,"u32")}\n            ${g("data",1,"u32")}\n            ${g("data",2,"u32")}\n            ${g("data",3,"u32")}\n            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:m=`\n            ${g("output_data[global_idx]",0)}\n            ${g("output_data[global_idx]",1)}\n            ${g("output_data[global_idx]",2)}\n            ${g("output_data[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(a,u,d,s)}\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${m}\n      }`},jc=e=>{let t=e[1].dims,r=e[2].dims,o=e[0].dims,n=e[1].dataType,s=!(V.areEqual(t,r)&&V.areEqual(r,o)),u=t,d=V.size(t);if(s){let m=lt.calcShape(lt.calcShape(t,r,!1),o,!1);if(!m)throw new Error("Can\'t perform where op on the given tensors");u=m,d=V.size(u)}let a=Math.ceil(d/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:m=>Fc(m,e,u,s,n),getRunData:()=>({outputs:[{dims:u,dataType:n}],dispatchGroup:{x:Math.ceil(d/64/4)},programUniforms:[{type:"uint32",data:a},...F(o),...F(t),...F(r),...F(u)]})}},Cu=e=>{e.compute(jc(e.inputs))}});var Au,Tu=q(()=>{"use strict";Ja();Kn();ei();ri();Di();ji();Yi();Xn();ls();ps();ys();vs();xs();Is();Es();Ps();Bs();to();Us();Vs();ru();ou();tn();uu();cu();hu();bu();$u();_u();tr();Yn();Iu();Au=new Map([["Abs",[ni]],["Acos",[oi]],["Acosh",[ai]],["Add",[Mi]],["ArgMax",[Za,qn]],["ArgMin",[Ya,qn]],["Asin",[ii]],["Asinh",[si]],["Atan",[ui]],["Atanh",[li]],["Attention",[Qa]],["AveragePool",[qs,js]],["BatchNormalization",[Xa]],["BiasAdd",[ti]],["BiasSplitGelu",[Ri]],["Cast",[ci,di]],["Ceil",[mi]],["Clip",[pi]],["Concat",[qi,Ki]],["Conv",[no,ro]],["ConvTranspose",[us,ss]],["Cos",[fi]],["Cosh",[hi]],["CumSum",[ds,cs]],["Div",[Ui]],["Einsum",[hs,gs]],["Elu",[gi,on]],["Equal",[zi]],["Erf",[yi]],["Exp",[bi]],["Expand",[ws]],["Floor",[wi]],["FusedConv",[no,ro]],["Gather",[Ss,$s]],["GatherElements",[Cs,_s]],["Gelu",[vi]],["Gemm",[Ts,As]],["GlobalAveragePool",[Zs,Ys]],["GlobalMaxPool",[tu,eu]],["Greater",[Hi]],["GreaterOrEqual",[Li]],["InstanceNormalization",[Os]],["LayerNormalization",[ks]],["LeakyRelu",[$i,on]],["Less",[Gi]],["LessOrEqual",[Fi]],["Log",[Bi]],["MatMul",[es]],["MaxPool",[Qs,Xs]],["Mul",[Vi]],["MultiHeadAttention",[Ms,Ds]],["Neg",[xi]],["Not",[Si]],["Pad",[zs]],["Pow",[Ni]],["Range",[nu]],["Reciprocal",[_i]],["ReduceMin",[Ga]],["ReduceMean",[za]],["ReduceMax",[Ha]],["ReduceSum",[Fa]],["ReduceProd",[La]],["ReduceL1",[Va]],["ReduceL2",[Na]],["ReduceLogSum",[qa]],["ReduceLogSumExp",[Wa]],["ReduceSumSquare",[ja]],["Relu",[Ci]],["Resize",[iu,su]],["Sigmoid",[Ii]],["Sin",[Ai]],["Sinh",[Ti]],["Slice",[mu,fu]],["SkipLayerNormalization",[lu,du]],["Split",[wu,vu]],["Sqrt",[Ei]],["Softmax",[gu,yu]],["Sub",[Wi]],["Tan",[Oi]],["Tanh",[Pi]],["ThresholdedRelu",[ki,on]],["Tile",[xu]],["Transpose",[Ca,Ia]],["Where",[Cu]]])});var hn,Eu=q(()=>{"use strict";Xt();It();we();hn=class{constructor(t){this.backend=t;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,r){this.repo.set(t,r)}run(t,r,o,n,s){Dt(t.programInfo.name);let u=this.backend.device,d=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2),d.setPipeline(t.computePipeline);let a=[];for(let h of r)a.push({binding:a.length,resource:{buffer:h.buffer}});for(let h of o)a.push({binding:a.length,resource:{buffer:h.buffer}});s&&a.push({binding:a.length,resource:s});let m=u.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:a,label:t.programInfo.name});d.setBindGroup(0,m),d.dispatchWorkgroups(...n),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Mt(t.programInfo.name)}dispose(){}build(t,r){Dt(t.name);let o=this.backend.device,n=[];o.features.has("shader-f16")&&n.push("enable f16;");let s=xa(r),u=t.getShaderSource(s),d=`${n.join(`\n`)}\n${s.additionalImplementations}\n${u}`,a=o.createShaderModule({code:d,label:t.name});De("verbose",()=>`[WebGPU] ${t.name} shader code: ${d}`);let m=o.createComputePipeline({compute:{module:a,entryPoint:"main"},layout:"auto",label:t.name});return Mt(t.name),{programInfo:t,computePipeline:m}}normalizeDispatchGroupSize(t){let r=typeof t=="number"?t:t.x,o=typeof t=="number"?1:t.y||1,n=typeof t=="number"?1:t.z||1,s=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(r<=s&&o<=s&&n<=s)return[r,o,n];let u=r*o*n,d=Math.ceil(Math.sqrt(u));if(d>s){if(d=Math.ceil(Math.cbrt(u)),d>s)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[d,d,d]}else return[d,d,1]}}});var qc,Kc,gn,Ou=q(()=>{"use strict";Xt();Ne();It();ba();Sa();Tu();Eu();qc=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let o=0;o<e.length;++o){let n=e[o].dataType;switch(t[o]){case"none":{r.push("");break}case"type":{r.push(`${n}`);break}case"rank":{let s=e[o].dims.length;r.push(`${n};${s}`);break}case"dims":{let s=e[o].dims.join(",");r.push(`${n};${s}`);break}default:throw new Error(`unsupported input dependency: ${t[o]}`)}}return r.join("|")},Kc=(e,t,r)=>{let o=e.name;return e.shaderCache?.hint&&(o+="["+e.shaderCache.hint+"]"),o+=":"+r+`:${qc(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,o},gn=class{constructor(){this.currentKernelId=null;this.commandEncoder=null;this.computePassEncoder=null;this.maxDispatchNumber=16;this.pendingDispatchNumber=0;this.pendingKernels=[];this.pendingQueries=new Map;this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t}async initialize(t,r){this.env=t;let o=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:r.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:r.limits.maxStorageBufferBindingSize,maxBufferSize:r.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:r.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:r.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:r.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:r.limits.maxComputeWorkgroupSizeZ},requiredFeatures:o};r.features.has("chromium-experimental-timestamp-query-inside-passes")?o.push("chromium-experimental-timestamp-query-inside-passes"):r.features.has("timestamp-query")&&o.push("timestamp-query"),r.features.has("shader-f16")&&o.push("shader-f16"),this.device=await r.requestDevice(n),this.gpuDataManager=$a(this),this.programManager=new hn(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,ga(t.logLevel,!!t.debug),this.device.onuncapturederror=s=>{s.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${s.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder(),this.setQueryType(),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE}))),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=this.getCommandEncoder().beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;Dt(),this.endComputePass();let t;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),t=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(t,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&t.mapAsync(GPUMapMode.READ).then(()=>{let r=new BigUint64Array(t.getMappedRange()),o=this.pendingQueries.get(t);for(let n=0;n<r.length/2;n++){let s=o[n],u=s.kernelId,d=this.kernels.get(u),a=d.kernelType,m=d.kernelName,h=s.programName,g=s.inputTensorViews,w=s.outputTensorViews,v=r[n*2],y=r[n*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=v);let C=Number(v-this.queryTimeBase),I=Number(y-this.queryTimeBase);if(!Number.isSafeInteger(C)||!Number.isSafeInteger(I))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:g.map(S=>({dims:S.dims,dataType:et(S.dataType)})),outputsMetadata:w.map(S=>({dims:S.dims,dataType:et(S.dataType)})),kernelId:u,kernelType:a,kernelName:m,programName:h,startTime:C,endTime:I});else{let S="";g.forEach((P,A)=>{S+=`input[${A}]: [${P.dims}] | ${et(P.dataType)}, `});let _="";w.forEach((P,A)=>{_+=`output[${A}]: [${P.dims}] | ${et(P.dataType)}, `}),console.log(`[profiling] kernel "${u}|${a}|${m}|${h}" ${S}${_}execution time: ${I-C} ns`)}Un("GPU",`${h}::${v}::${y}`)}t.unmap(),this.pendingQueries.delete(t)}),Mt()}run(t,r,o,n,s){Dt(t.name);let u=[];for(let _=0;_<r.length;++_){let P=this.gpuDataManager.get(r[_].data);if(!P)throw new Error(`no GPU data for input: ${r[_].data}`);u[_]=P}let{outputs:d,dispatchGroup:a,programUniforms:m}=t.getRunData(r),h=o.length===0?d.map((_,P)=>P):o;if(h.length!==d.length)throw new Error(`Output size ${h.length} must be equal to ${d.length}.`);let g=[],w=[];for(let _=0;_<d.length;++_){if(!Number.isInteger(h[_])||h[_]<-3||h[_]>=d.length)throw new Error(`Invalid output index: ${h[_]}`);if(h[_]===-3)continue;let P=h[_]===-1,A=h[_]===-2,z=P||A?s(d[_].dataType,d[_].dims):n(h[_],d[_].dataType,d[_].dims),R=this.gpuDataManager.get(z.data);if(!R)throw new Error(`no GPU data for output: ${z.data}`);if(P&&this.temporaryData.push(R),A){let N=this.kernelPersistentData.get(this.currentKernelId);N||(N=[],this.kernelPersistentData.set(this.currentKernelId,N)),N.push(R)}g.push(z),w.push(R)}let v;if(m){let _=0,P=[];m.forEach(N=>{let T=typeof N.data=="number"?[N.data]:N.data;if(T.length===0)return;let H=T.length<=2?T.length*4:16;_=Math.ceil(_/H)*H,P.push(_),_+=T.length>4?Math.ceil(T.length/4)*16:T.length*4});let A=16;_=Math.ceil(_/A)*A;let z=new ArrayBuffer(_);m.forEach((N,T)=>{let H=P[T],ie=typeof N.data=="number"?[N.data]:N.data;N.type==="int32"?new Int32Array(z,H,ie.length).set(ie):N.type==="uint32"?new Uint32Array(z,H,ie.length).set(ie):new Float32Array(z,H,ie.length).set(ie)});let R=this.gpuDataManager.create(_,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(R.buffer,0,z,0,_),this.gpuDataManager.release(R.id),v={offset:0,size:_,buffer:R.buffer}}let y=this.programManager.normalizeDispatchGroupSize(a),C=y[1]===1&&y[2]===1,I=Kc(t,r,C),S=this.programManager.getArtifact(I);if(S||(S=this.programManager.build(t,y),this.programManager.setArtifact(I,S),De("info",()=>`[artifact] key: ${I}, programName: ${t.name}`)),De("info",()=>`[ProgramManager] run "${t.name}" (key=${I}) with ${y[0]}x${y[1]}x${y[2]}`),this.queryType!=="none"){let _={kernelId:this.currentKernelId,programName:S.programInfo.name,inputTensorViews:r,outputTensorViews:g};this.pendingKernels.push(_)}return this.programManager.run(S,u,w,y,v),Mt(t.name),g}upload(t,r){this.gpuDataManager.upload(t,r)}memcpy(t,r){this.gpuDataManager.memcpy(t,r)}async download(t,r){await this.gpuDataManager.download(t,r)}alloc(t){return this.gpuDataManager.create(t).id}free(t){return this.gpuDataManager.release(t)}createKernel(t,r,o,n){let s=Au.get(t);if(!s)throw new Error(`kernel not implemented: ${t}`);let u={kernelType:t,kernelName:n,kernelEntry:s[0],attributes:[s[1],o]};this.kernels.set(r,u)}releaseKernel(t){let r=this.kernelPersistentData.get(t);if(r){for(let o of r)this.gpuDataManager.release(o.id);this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)}computeKernel(t,r,o){let n=this.kernels.get(t);if(!n)throw new Error(`kernel not created: ${t}`);let s=n.kernelType,u=n.kernelName,d=n.kernelEntry,a=n.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${s}] ${u}" is not allowed to be called recursively`);this.currentKernelId=t,a[0]&&(a[1]=a[0](a[1]),a[0]=void 0),De("info",()=>`[WebGPU] Start to run kernel "[${s}] ${u}"...`);let m=this.env.debug;this.temporaryData=[];try{return m&&this.device.pushErrorScope("validation"),d(r,a[1]),0}catch(h){return o.push(Promise.resolve(`[WebGPU] Kernel "[${s}] ${u}" failed. ${h}`)),1}finally{m&&o.push(this.device.popErrorScope().then(h=>h?`GPU validation error for kernel "[${s}] ${u}": ${h.message}`:null));for(let h of this.temporaryData)this.gpuDataManager.release(h.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(t,r,o,n){let s=this.sessionExternalDataMapping.get(t);s||(s=new Map,this.sessionExternalDataMapping.set(t,s));let u=s.get(r),d=this.gpuDataManager.registerExternalBuffer(o,n,u?.[1]);return s.set(r,[d,o]),d}unregisterBuffers(t){let r=this.sessionExternalDataMapping.get(t);r&&(r.forEach(o=>this.gpuDataManager.unregisterExternalBuffer(o[1])),this.sessionExternalDataMapping.delete(t))}getBuffer(t){let r=this.gpuDataManager.get(t);if(!r)throw new Error(`no GPU data for buffer: ${t}`);return r.buffer}createDownloader(t,r,o){return async()=>{let n=await Nn(this,t,r);return ya(n.buffer,o)}}writeTimestamp(t){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,t)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||this.env.wasm.trace)&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"))}}});var Pu={};Gr(Pu,{init:()=>Yc});var Ir,lo,Yc,ku=q(()=>{"use strict";Ne();Ou();It();$e();Ir=class e{constructor(t,r,o,n){this.module=t;this.dataType=r;this.data=o;this.dims=n}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=V.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=V.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=V.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(V.size(t)!==V.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)}},lo=class{constructor(t,r,o){this.module=t;this.backend=r;this.customDataOffset=0;this.customDataSize=0;let n=t.HEAPU32,s=o>>>2;this.opKernelContext=n[s++];let u=n[s++];this.outputCount=n[s++],this.customDataOffset=n[s++],this.customDataSize=n[s++];let d=[];for(let a=0;a<u;a++){let m=n[s++],h=n[s++],g=n[s++],w=[];for(let v=0;v<g;v++)w.push(n[s++]);d.push(new Ir(t,m,h,w))}this.inputs=d}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(t,r){let o=r?.inputs?.map(d=>typeof d=="number"?this.inputs[d]:d)??this.inputs,n=r?.outputs??[],s=(d,a,m)=>new Ir(this.module,a,this.output(d,m),m),u=(d,a)=>{let m=$r(d);if(!m)throw new Error(`Unsupported data type: ${d}`);let h=m*V.size(a);return new Ir(this.module,d,this.backend.gpuDataManager.create(h).id,a)};return this.backend.run(t,o,n,s,u)}output(t,r){let o=this.module.stackSave();try{let n=this.module.stackAlloc((1+r.length)*4),s=n>>2;this.module.HEAPU32[s++]=r.length;for(let u=0;u<r.length;u++)this.module.HEAPU32[s++]=r[u];return this.module._JsepOutput(this.opKernelContext,t,n)}catch(n){throw new Error(`Failed to generate kernel\'s output[${t}] with dims [${r}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${n}`)}finally{this.module.stackRestore(o)}}},Yc=async(e,t,r)=>{let o=e.jsepInit;if(!o)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");let n=new gn;await n.initialize(t,r),o(n,s=>n.alloc(s),s=>n.free(s),(s,u,d,a=!1)=>{if(a)De("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${s}, dst=${u}, size=${d}`),n.memcpy(s,u);else{De("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${s}, gpuDataId=${u}, size=${d}`);let m=e.HEAPU8.subarray(s>>>0,(s>>>0)+d);n.upload(u,m)}},async(s,u,d)=>{De("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${s}, dataOffset=${u}, size=${d}`),await n.download(s,()=>e.HEAPU8.subarray(u>>>0,(u>>>0)+d))},(s,u,d)=>n.createKernel(s,u,d,e.UTF8ToString(e._JsepGetNodeName(u))),s=>n.releaseKernel(s),(s,u,d,a)=>{De("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${d}, kernel=${s}, contextDataOffset=${u}`);let m=new lo(e,n,u);return n.computeKernel(s,m,a)})}});var jo;jo=Mo();var ll=Go(),kn,Bn=!1,Lr=!1,Fo=!1,dl=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},cl=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},pl=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",qo=async e=>{if(Bn)return Promise.resolve();if(Lr)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Fo)throw new Error("previous call to \'initializeWebAssembly()\' failed.");Lr=!0;let t=e.initTimeout,r=e.numThreads,o=e.simd,n=dl(r),s=o&&cl(),u=e.wasmPaths,d=typeof u=="string"?u:void 0,a=pl(s,n),m=typeof u=="object"?u[a]:void 0,h=!1,g=[];if(t>0&&g.push(new Promise(w=>{setTimeout(()=>{h=!0,w()},t)})),g.push(new Promise((w,v)=>{let y=n?ll:jo,C={locateFile:(I,S)=>{if(n&&I.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Lo()],{type:"text/javascript"}));if(I.endsWith(".wasm")){if(m)return m;let _=d??S;return a==="ort-wasm-simd.wasm"?_+"ort-wasm-simd.jsep.wasm":a==="ort-wasm-simd-threaded.wasm"?_+"ort-wasm-simd-threaded.jsep.wasm":_+a}return S+I}};if(n)if(C.numThreads=r,typeof Blob>"u")C.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let I=`var ortWasmThreaded=${y.toString()};`;C.mainScriptUrlOrBlob=new Blob([I],{type:"text/javascript"})}y(C).then(I=>{Lr=!1,Bn=!0,kn=I,w()},I=>{Lr=!1,Fo=!0,v(I)})})),await Promise.race(g),h)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Re=()=>{if(Bn&&kn)return kn;throw new Error("WebAssembly is not initialized yet.")};var He=(e,t)=>{let r=Re(),o=r.lengthBytesUTF8(e)+1,n=r._malloc(o);return r.stringToUTF8(e,n,o),t.push(n),n},vr=(e,t,r,o)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([n,s])=>{let u=t?t+n:n;if(typeof s=="object")vr(s,u+".",r,o);else if(typeof s=="string"||typeof s=="number")o(u,s.toString());else if(typeof s=="boolean")o(u,s?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof s}`)})},ke=e=>{let t=Re(),r=t.stackSave();try{let o=t.stackAlloc(8);t._OrtGetLastError(o,o+4);let n=t.HEAP32[o/4],s=t.HEAPU32[o/4+1],u=s?t.UTF8ToString(s):"";throw new Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${u}`)}finally{t.stackRestore(r)}};var Ko=e=>{let t=Re(),r=0,o=[],n=e||{};try{if(e?.logSeverityLevel===void 0)n.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)n.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(n.terminate=!1);let s=0;return e?.tag!==void 0&&(s=He(e.tag,o)),r=t._OrtCreateRunOptions(n.logSeverityLevel,n.logVerbosityLevel,!!n.terminate,s),r===0&&ke("Can\'t create run options."),e?.extra!==void 0&&vr(e.extra,"",new WeakSet,(u,d)=>{let a=He(u,o),m=He(d,o);t._OrtAddRunConfigEntry(r,a,m)!==0&&ke(`Can\'t set a run config entry: ${u} - ${d}.`)}),[r,o]}catch(s){throw r!==0&&t._OrtReleaseRunOptions(r),o.forEach(u=>t._free(u)),s}};var ml=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},fl=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},hl=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},gl=(e,t,r)=>{for(let o of t){let n=typeof o=="string"?o:o.name;switch(n){case"webnn":if(n="WEBNN",typeof o!="string"){let u=o;if(u?.deviceType){let d=He("deviceType",r),a=He(u.deviceType,r);Re()._OrtAddSessionConfigEntry(e,d,a)!==0&&ke(`Can\'t set a session config entry: \'deviceType\' - ${u.deviceType}.`)}if(u?.numThreads){let d=u.numThreads;(typeof d!="number"||!Number.isInteger(d)||d<0)&&(d=0);let a=He("numThreads",r),m=He(d.toString(),r);Re()._OrtAddSessionConfigEntry(e,a,m)!==0&&ke(`Can\'t set a session config entry: \'numThreads\' - ${u.numThreads}.`)}if(u?.powerPreference){let d=He("powerPreference",r),a=He(u.powerPreference,r);Re()._OrtAddSessionConfigEntry(e,d,a)!==0&&ke(`Can\'t set a session config entry: \'powerPreference\' - ${u.powerPreference}.`)}}break;case"webgpu":if(n="JS",typeof o!="string"){let u=o;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${u.preferredLayout}`);let d=He("preferredLayout",r),a=He(u.preferredLayout,r);Re()._OrtAddSessionConfigEntry(e,d,a)!==0&&ke(`Can\'t set a session config entry: \'preferredLayout\' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${n}`)}let s=He(n,r);Re()._OrtAppendExecutionProvider(e,s)!==0&&ke(`Can\'t append execution provider: ${n}.`)}},Yo=e=>{let t=Re(),r=0,o=[],n=e||{};hl(n);try{let s=ml(n.graphOptimizationLevel??"all"),u=fl(n.executionMode??"sequential"),d=typeof n.logId=="string"?He(n.logId,o):0,a=n.logSeverityLevel??2;if(!Number.isInteger(a)||a<0||a>4)throw new Error(`log serverity level is not valid: ${a}`);let m=n.logVerbosityLevel??0;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log verbosity level is not valid: ${m}`);let h=typeof n.optimizedModelFilePath=="string"?He(n.optimizedModelFilePath,o):0;if(r=t._OrtCreateSessionOptions(s,!!n.enableCpuMemArena,!!n.enableMemPattern,u,!!n.enableProfiling,0,d,a,m,h),r===0&&ke("Can\'t create session options."),n.executionProviders&&gl(r,n.executionProviders,o),n.freeDimensionOverrides)for(let[g,w]of Object.entries(n.freeDimensionOverrides)){if(typeof g!="string")throw new Error(`free dimension override name must be a string: ${g}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let v=He(g,o);t._OrtAddFreeDimensionOverride(r,v,w)!==0&&ke(`Can\'t set a free dimension override: ${g} - ${w}.`)}return n.extra!==void 0&&vr(n.extra,"",new WeakSet,(g,w)=>{let v=He(g,o),y=He(w,o);t._OrtAddSessionConfigEntry(r,v,y)!==0&&ke(`Can\'t set a session config entry: ${g} - ${w}.`)}),[r,o]}catch(s){throw r!==0&&t._OrtReleaseSessionOptions(r),o.forEach(u=>t._free(u)),s}};Ne();var Jo=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(e),o=[];for await(let n of r)o.push(n);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),o=r?parseInt(r,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let n=t.body.getReader(),s;try{s=new ArrayBuffer(o)}catch(d){if(d instanceof RangeError){let a=Math.ceil(o/65536);s=new WebAssembly.Memory({initial:a,maximum:a}).buffer}else throw d}let u=0;for(;;){let{done:d,value:a}=await n.read();if(d)break;let m=a.byteLength;new Uint8Array(s,u,m).set(a),u+=m}return new Uint8Array(s,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)};var Zc=(e,t)=>{Re()._OrtInit(e,t)!==0&&ke("Can\'t initialize onnxruntime.")},Ru=async e=>{Zc(e.wasm.numThreads,Sr(e.logLevel))},Du=async(e,t)=>{if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let r=await navigator.gpu.requestAdapter();if(!r)throw new Error(\'Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.\');if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");let o=(ku(),Jt(Pu)).init;await o(Re(),e,r)}},Ar=new Map,Jc=e=>{let t=Re(),r=t.stackSave();try{let o=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,o,o+4)!==0&&ke("Can\'t get session input/output count."),[t.HEAP32[o/4],t.HEAP32[o/4+1]]}finally{t.stackRestore(r)}},co=e=>{let t=Re(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},Mu=async(e,t)=>{let r,o,n=Re();Array.isArray(e)?[r,o]=e:e.buffer===n.HEAPU8.buffer?[r,o]=[e.byteOffset,e.byteLength]:[r,o]=co(e);let s=0,u=0,d=0,a=[],m=[],h=[];try{if([u,a]=Yo(t),t?.externalData&&n.mountExternalData){let S=[];for(let _ of t.externalData){let P=typeof _=="string"?_:_.path;S.push(Jo(typeof _=="string"?_:_.data).then(A=>{n.mountExternalData(P,A)}))}await Promise.all(S)}s=n._OrtCreateSession(r,o,u),s===0&&ke("Can\'t create a session.");let[g,w]=Jc(s),v=[],y=[],C=[];for(let S=0;S<g;S++){let _=n._OrtGetInputName(s,S);_===0&&ke("Can\'t get an input name."),m.push(_),v.push(n.UTF8ToString(_))}for(let S=0;S<w;S++){let _=n._OrtGetOutputName(s,S);_===0&&ke("Can\'t get an output name."),h.push(_);let P=n.UTF8ToString(_);y.push(P);{let A=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[P]??"cpu";if(A!=="cpu"&&A!=="cpu-pinned"&&A!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${A}.`);C.push(A)}}let I=null;return C.some(S=>S==="gpu-buffer")&&(d=n._OrtCreateBinding(s),d===0&&ke("Can\'t create IO binding."),I={handle:d,outputPreferredLocations:C,outputPreferredLocationsEncoded:C.map(S=>Dn(S))}),Ar.set(s,[s,m,h,I]),[s,v,y]}catch(g){throw m.forEach(w=>n._OrtFree(w)),h.forEach(w=>n._OrtFree(w)),d!==0&&n._OrtReleaseBinding(d),s!==0&&n._OrtReleaseSession(s),g}finally{n._free(r),u!==0&&n._OrtReleaseSessionOptions(u),a.forEach(g=>n._free(g)),n.unmountExternalData?.()}},Uu=e=>{let t=Re(),r=Ar.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,n,s,u]=r;u&&t._OrtReleaseBinding(u.handle),t.jsepUnregisterBuffers?.(e),n.forEach(d=>t._OrtFree(d)),s.forEach(d=>t._OrtFree(d)),t._OrtReleaseSession(o),Ar.delete(e)},Bu=(e,t,r,o,n)=>{if(!e){t.push(0);return}let s=Re(),u=e[0],d=e[1],a=e[3],m,h;if(u==="string"&&a==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(a==="gpu-buffer"){let v=e[2].gpuBuffer,y=$r(Rn(u));h=d.reduce((C,I)=>C*I,1)*y,m=s.jsepRegisterBuffer(o,n,v,h)}else{let v=e[2];if(Array.isArray(v)){h=4*v.length,m=s._malloc(h),r.push(m);let y=m/4;for(let C=0;C<v.length;C++){if(typeof v[C]!="string")throw new TypeError(`tensor data at index ${C} is not a string`);s.HEAPU32[y++]=He(v[C],r)}}else h=v.byteLength,m=s._malloc(h),r.push(m),s.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,h),m)}let g=s.stackSave(),w=s.stackAlloc(4*d.length);try{let v=w/4;d.forEach(C=>s.HEAP32[v++]=C);let y=s._OrtCreateTensor(Rn(u),m,h,w,d.length,Dn(a));y===0&&ke(`Can\'t create tensor for input/output. session=${o}, index=${n}.`),t.push(y)}finally{s.stackRestore(g)}},zu=e=>{let r=new TextEncoder().encode(e),o=Re(),n=o._malloc(r.byteLength);o.HEAPU8.set(r,n);let s=o._OrtConfigure(n,r.byteLength);if(s===0)throw new Error("Can\'t get an configure key");let u=o.UTF8ToString(s);return o._OrtFree(s),u},Vu=e=>{let r=new TextEncoder().encode(e),o=Re(),n=o._malloc(r.byteLength);o.HEAPU8.set(r,n);let s=o._OrtAuth(n,r.byteLength);if(s===0)throw new Error("Can\'t get an auth result");let u=o.UTF8ToString(s);return o._OrtFree(s),u},Nu=async(e,t,r,o,n,s)=>{let u=Re(),d=Ar.get(e);if(!d)throw new Error(`cannot run inference. invalid session id: ${e}`);let[a,m,h,g]=d,w=t.length,v=o.length,y=0,C=[],I=[],S=[],_=[],P=u.stackSave(),A=u.stackAlloc(w*4),z=u.stackAlloc(w*4),R=u.stackAlloc(v*4),N=u.stackAlloc(v*4);try{[y,C]=Ko(s);for(let X=0;X<w;X++)Bu(r[X],I,_,e,t[X]);for(let X=0;X<v;X++)Bu(n[X],S,_,e,w+o[X]);let T=A/4,H=z/4,ie=R/4,Z=N/4;for(let X=0;X<w;X++)u.HEAPU32[T++]=I[X],u.HEAPU32[H++]=m[t[X]];for(let X=0;X<v;X++)u.HEAPU32[ie++]=S[X],u.HEAPU32[Z++]=h[o[X]];if(g){let{handle:X,outputPreferredLocations:Ee,outputPreferredLocationsEncoded:Pe}=g;if(m.length!==w)throw new Error(`input count from feeds (${w}) is expected to be always equal to model\'s input count (${m.length}).`);for(let fe=0;fe<w;fe++){let Ce=t[fe];await u._OrtBindInput(X,m[Ce],I[fe])!==0&&ke(`Can\'t bind input[${fe}] for session=${e}.`)}for(let fe=0;fe<v;fe++){let Ce=o[fe];n[fe]?.[3]?u._OrtBindOutput(X,h[Ce],S[fe],0)!==0&&ke(`Can\'t bind pre-allocated output[${fe}] for session=${e}.`):u._OrtBindOutput(X,h[Ce],0,Pe[Ce])!==0&&ke(`Can\'t bind output[${fe}] to ${Ee[fe]} for session=${e}.`)}}let K;g?K=await u._OrtRunWithBinding(a,g.handle,v,R,y):K=await u._OrtRun(a,z,A,w,N,v,R,y),K!==0&&ke("failed to call OrtRun().");let Q=[];for(let X=0;X<v;X++){let Ee=u.HEAPU32[R/4+X];if(Ee===S[X]){Q.push(n[X]);continue}let Pe=u.stackSave(),fe=u.stackAlloc(4*4),Ce=!1,he,ye=0;try{u._OrtGetTensorData(Ee,fe,fe+4,fe+8,fe+12)!==0&&ke(`Can\'t access output tensor data on index ${X}.`);let Me=fe/4,Ge=u.HEAPU32[Me++];ye=u.HEAPU32[Me++];let G=u.HEAPU32[Me++],re=u.HEAPU32[Me++],be=[];for(let Ve=0;Ve<re;Ve++)be.push(u.HEAPU32[G/4+Ve]);u._OrtFree(G);let rt=be.reduce((Ve,Ue)=>Ve*Ue,1);he=et(Ge);let ze=g?.outputPreferredLocations[o[X]];if(he==="string"){if(ze==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ve=[],Ue=ye/4;for(let St=0;St<rt;St++){let nt=u.HEAPU32[Ue++],zt=St===rt-1?void 0:u.HEAPU32[Ue]-nt;Ve.push(u.UTF8ToString(nt,zt))}Q.push([he,be,Ve,"cpu"])}else if(ze==="gpu-buffer"&&rt>0){let Ve=u.jsepGetBuffer(ye),Ue=$r(Ge);if(Ue===void 0||!Zo(he))throw new Error(`Unsupported data type: ${he}`);Ce=!0,Q.push([he,be,{gpuBuffer:Ve,download:u.jsepCreateDownloader(Ve,rt*Ue,he),dispose:()=>{u._OrtReleaseTensor(Ee)}},"gpu-buffer"])}else{let Ve=Fr(he),Ue=new Ve(rt);new Uint8Array(Ue.buffer,Ue.byteOffset,Ue.byteLength).set(u.HEAPU8.subarray(ye,ye+Ue.byteLength)),Q.push([he,be,Ue,"cpu"])}}finally{u.stackRestore(Pe),he==="string"&&ye&&u._free(ye),Ce||u._OrtReleaseTensor(Ee)}}return g&&u._OrtClearBoundOutputs(g.handle),Q}finally{u.stackRestore(P),I.forEach(T=>u._OrtReleaseTensor(T)),S.forEach(T=>u._OrtReleaseTensor(T)),_.forEach(T=>u._free(T)),y!==0&&u._OrtReleaseRunOptions(y),C.forEach(T=>u._free(T))}},Wu=e=>{let t=Re(),r=Ar.get(e);if(!r)throw new Error("invalid session id");let o=r[0],n=t._OrtEndProfiling(o);n===0&&ke("Can\'t get an profile file name."),t._OrtFree(n)},Hu=e=>{let t=[];for(let r of e){let o=r[2];!Array.isArray(o)&&"buffer"in o&&t.push(o.buffer)}return t};self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":qo(r.wasm).then(()=>{Ru(r).then(()=>{postMessage({type:t})},o=>{postMessage({type:t,err:o})})},o=>{postMessage({type:t,err:o})});break;case"init-ep":{let{epName:o,env:n}=r;Du(n,o).then(()=>{postMessage({type:t})},s=>{postMessage({type:t,err:s})});break}case"copy-from":{let{buffer:o}=r,n=co(o);postMessage({type:t,out:n});break}case"create":{let{model:o,options:n}=r;Mu(o,n).then(s=>{postMessage({type:t,out:s})},s=>{postMessage({type:t,err:s})});break}case"release":Uu(r),postMessage({type:t});break;case"run":{let{sessionId:o,inputIndices:n,inputs:s,outputIndices:u,options:d}=r;Nu(o,n,s,u,new Array(u.length).fill(null),d).then(a=>{a.some(m=>m[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:a},Hu(a))},a=>{postMessage({type:t,err:a})});break}case"configure":try{let o=zu(e.data.in);postMessage({type:"configure",out:o})}catch(o){postMessage({type:"configure",err:o})}break;case"auth":try{let o=Vu(e.data.in);postMessage({type:"auth",out:o})}catch(o){postMessage({type:"auth",err:o})}break;case"end-profiling":Wu(r),postMessage({type:t});break;default:}}catch(o){postMessage({type:t,err:o})}};})();\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n';}),sx=Mc(function(){var _document2;id(),ox(),db(),Rv=function Rv(){return!!rc.wasm.proxy&&(typeof document==="undefined"?"undefined":_typeof(document))<"u";},Dv=!1,Mv=!1,Lv=!1,Nv=new Map(),Uv=function Uv(e,t){var r=Nv.get(e);r?r.push(t):Nv.set(e,[t]);},jv=function jv(){if(Dv||!Mv||Lv||!Bv)throw new Error("worker not ready");},Gv=function Gv(e){switch(e.data.type){case"init-wasm":Dv=!1,e.data.err?(Lv=!0,Fv[1](e.data.err)):(Mv=!0,Fv[0]());break;case"init-ep":case"copy-from":case"create":case"configure":case"auth":case"release":case"run":case"end-profiling":{var _t392=Nv.get(e.data.type);e.data.err?_t392.shift()[1](e.data.err):_t392.shift()[0](e.data.out);break;}}},zv=(typeof document==="undefined"?"undefined":_typeof(document))<"u"?(_document2=document)===null||_document2===void 0||(_document2=_document2.currentScript)===null||_document2===void 0?void 0:_document2.src:void 0,Vv=/*#__PURE__*/function(){var _ref104=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee168(){return _regeneratorRuntime().wrap(function _callee168$(_context173){while(1)switch(_context173.prev=_context173.next){case 0:if(Mv){_context173.next=21;break;}if(!Dv){_context173.next=3;break;}throw new Error("multiple calls to 'initWasm()' detected.");case 3:if(!Lv){_context173.next=5;break;}throw new Error("previous call to 'initWasm()' failed.");case 5:if(!(Dv=!0,Rv())){_context173.next=7;break;}return _context173.abrupt("return",(void 0===rc.wasm.wasmPaths&&zv&&0!==zv.indexOf("blob:")&&(rc.wasm.wasmPaths=zv.substr(0,+zv.lastIndexOf("/")+1)),new Promise(function(e,t){var _Bv;(_Bv=Bv)===null||_Bv===void 0||_Bv.terminate();var r=URL.createObjectURL(new Blob([ax()],{type:"text/javascript"}));(Bv=new Worker(r,{name:"ort-wasm-proxy-worker"})).onerror=function(e){return t(e);},Bv.onmessage=Gv,URL.revokeObjectURL(r),Fv=[e,t];var n={type:"init-wasm","in":rc};Bv.postMessage(n);})));case 7:_context173.prev=7;_context173.next=10;return Cd(rc.wasm);case 10:_context173.next=12;return vv(rc);case 12:Mv=!0;_context173.next=18;break;case 15:_context173.prev=15;_context173.t0=_context173["catch"](7);throw Lv=!0,_context173.t0;case 18:_context173.prev=18;Dv=!1;return _context173.finish(18);case 21:case"end":return _context173.stop();}},_callee168,null,[[7,15,18,21]]);}));return function Vv(){return _ref104.apply(this,arguments);};}(),Hv=/*#__PURE__*/function(){var _ref105=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee169(e){return _regeneratorRuntime().wrap(function _callee169$(_context174){while(1)switch(_context174.prev=_context174.next){case 0:if(!Rv()){_context174.next=2;break;}return _context174.abrupt("return",(jv(),new Promise(function(t,r){Uv("init-ep",[t,r]);var n={type:"init-ep","in":{epName:e,env:rc}};Bv.postMessage(n);})));case 2:_context174.next=4;return xv(rc,e);case 4:case"end":return _context174.stop();}},_callee169);}));return function Hv(_x208){return _ref105.apply(this,arguments);};}(),Wv=/*#__PURE__*/function(){var _ref106=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee170(e){return _regeneratorRuntime().wrap(function _callee170$(_context175){while(1)switch(_context175.prev=_context175.next){case 0:return _context175.abrupt("return",Rv()?(jv(),new Promise(function(t,r){Uv("copy-from",[t,r]);var n={type:"copy-from","in":{buffer:e}};Bv.postMessage(n,[e.buffer]);})):Av(e));case 1:case"end":return _context175.stop();}},_callee170);}));return function Wv(_x209){return _ref106.apply(this,arguments);};}(),Yv=/*#__PURE__*/function(){var _ref107=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee171(e,t){return _regeneratorRuntime().wrap(function _callee171$(_context176){while(1)switch(_context176.prev=_context176.next){case 0:if(!Rv()){_context176.next=4;break;}if(!(t!==null&&t!==void 0&&t.preferredOutputLocation)){_context176.next=3;break;}throw new Error('session option "preferredOutputLocation" is not supported for proxy.');case 3:return _context176.abrupt("return",(jv(),new Promise(function(r,n){Uv("create",[r,n]);var i={type:"create","in":{model:e,options:t}},o=[];e instanceof Uint8Array&&o.push(e.buffer),Bv.postMessage(i,o);})));case 4:return _context176.abrupt("return",Sv(e,t));case 5:case"end":return _context176.stop();}},_callee171);}));return function Yv(_x210,_x211){return _ref107.apply(this,arguments);};}(),Kv=/*#__PURE__*/function(){var _ref108=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee172(e){return _regeneratorRuntime().wrap(function _callee172$(_context177){while(1)switch(_context177.prev=_context177.next){case 0:if(!Rv()){_context177.next=2;break;}return _context177.abrupt("return",(jv(),new Promise(function(t,r){Uv("release",[t,r]);var n={type:"release","in":e};Bv.postMessage(n);})));case 2:Tv(e);case 3:case"end":return _context177.stop();}},_callee172);}));return function Kv(_x212){return _ref108.apply(this,arguments);};}(),Xv=/*#__PURE__*/function(){var _ref109=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee173(e){return _regeneratorRuntime().wrap(function _callee173$(_context178){while(1)switch(_context178.prev=_context178.next){case 0:return _context178.abrupt("return",Rv()?(jv(),new Promise(function(t,r){Uv("configure",[t,r]);var n={type:"configure","in":e};Bv.postMessage(n);})):Ev(e));case 1:case"end":return _context178.stop();}},_callee173);}));return function Xv(_x213){return _ref109.apply(this,arguments);};}(),Zv=/*#__PURE__*/function(){var _ref110=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee174(e){return _regeneratorRuntime().wrap(function _callee174$(_context179){while(1)switch(_context179.prev=_context179.next){case 0:return _context179.abrupt("return",Rv()?(jv(),new Promise(function(t,r){Uv("auth",[t,r]);var n={type:"auth","in":e};Bv.postMessage(n);})):Ov(e));case 1:case"end":return _context179.stop();}},_callee174);}));return function Zv(_x214){return _ref110.apply(this,arguments);};}(),qv=/*#__PURE__*/function(){var _ref111=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee175(e,t,r,n,i,o){return _regeneratorRuntime().wrap(function _callee175$(_context180){while(1)switch(_context180.prev=_context180.next){case 0:if(!Rv()){_context180.next=6;break;}if(!r.some(function(e){return"cpu"!==e[3];})){_context180.next=3;break;}throw new Error("input tensor on GPU is not supported for proxy.");case 3:if(!i.some(function(e){return e;})){_context180.next=5;break;}throw new Error("pre-allocated output tensor is not supported for proxy.");case 5:return _context180.abrupt("return",(jv(),new Promise(function(i,a){Uv("run",[i,a]);var s=r,u={type:"run","in":{sessionId:e,inputIndices:t,inputs:s,outputIndices:n,options:o}};Bv.postMessage(u,$v(s));})));case 6:return _context180.abrupt("return",kv(e,t,r,n,i,o));case 7:case"end":return _context180.stop();}},_callee175);}));return function qv(_x215,_x216,_x217,_x218,_x219,_x220){return _ref111.apply(this,arguments);};}(),Jv=/*#__PURE__*/function(){var _ref112=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee176(e){return _regeneratorRuntime().wrap(function _callee176$(_context181){while(1)switch(_context181.prev=_context181.next){case 0:if(!Rv()){_context181.next=2;break;}return _context181.abrupt("return",(jv(),new Promise(function(t,r){Uv("end-profiling",[t,r]);var n={type:"end-profiling","in":e};Bv.postMessage(n);})));case 2:Pv(e);case 3:case"end":return _context181.stop();}},_callee176);}));return function Jv(_x221){return _ref112.apply(this,arguments);};}();}),ux=Mc(function(){id(),sx(),gb(),mb(),Qv=function Qv(e,t){switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error("invalid data location: ".concat(e.location," for ").concat(t()));}},ex=function ex(e){switch(e[3]){case"cpu":return new mc(e[0],e[2],e[1]);case"gpu-buffer":{var _t393=e[0];if(!zd(_t393))throw new Error("not supported data type: ".concat(_t393," for deserializing GPU tensor"));var _e$2=e[2],_r363=_e$2.gpuBuffer,n=_e$2.download,i=_e$2.dispose;return mc.fromGpuBuffer(_r363,{dataType:_t393,dims:e[1],download:n,dispose:i});}default:throw new Error("invalid data location: ".concat(e[3]));}},tx=/*#__PURE__*/function(){function tx(){_classCallCheck(this,tx);}_createClass(tx,[{key:"fetchModelAndCopyToWasmMemory",value:function(){var _fetchModelAndCopyToWasmMemory2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee177(e){return _regeneratorRuntime().wrap(function _callee177$(_context182){while(1)switch(_context182.prev=_context182.next){case 0:_context182.t0=Wv;_context182.next=3;return Hd(e);case 3:_context182.t1=_context182.sent;return _context182.abrupt("return",(0,_context182.t0)(_context182.t1));case 5:case"end":return _context182.stop();}},_callee177);}));function fetchModelAndCopyToWasmMemory(_x222){return _fetchModelAndCopyToWasmMemory2.apply(this,arguments);}return fetchModelAndCopyToWasmMemory;}()},{key:"loadModel",value:function(){var _loadModel3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee178(e,t){var _yield$Yv,_yield$Yv2;var r;return _regeneratorRuntime().wrap(function _callee178$(_context183){while(1)switch(_context183.prev=_context183.next){case 0:vc();if(!("string"==typeof e)){_context183.next=14;break;}if(!(_typeof(Oc)<"u"&&Oc.versions&&Oc.versions.node)){_context183.next=8;break;}_context183.next=5;return Hd(e);case 5:_context183.t1=_context183.sent;_context183.next=11;break;case 8:_context183.next=10;return this.fetchModelAndCopyToWasmMemory(e);case 10:_context183.t1=_context183.sent;case 11:_context183.t0=_context183.t1;_context183.next=15;break;case 14:_context183.t0=e;case 15:r=_context183.t0;_context183.next=18;return Yv(r,t);case 18:_yield$Yv=_context183.sent;_yield$Yv2=_slicedToArray(_yield$Yv,3);this.sessionId=_yield$Yv2[0];this.inputNames=_yield$Yv2[1];this.outputNames=_yield$Yv2[2];xc();case 24:case"end":return _context183.stop();}},_callee178,this);}));function loadModel(_x223,_x224){return _loadModel3.apply(this,arguments);}return loadModel;}()},{key:"dispose",value:function(){var _dispose3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee179(){return _regeneratorRuntime().wrap(function _callee179$(_context184){while(1)switch(_context184.prev=_context184.next){case 0:return _context184.abrupt("return",Kv(this.sessionId));case 1:case"end":return _context184.stop();}},_callee179,this);}));function dispose(){return _dispose3.apply(this,arguments);}return dispose;}()},{key:"configure",value:function(){var _configure5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee180(e){return _regeneratorRuntime().wrap(function _callee180$(_context185){while(1)switch(_context185.prev=_context185.next){case 0:return _context185.abrupt("return",Xv(e));case 1:case"end":return _context185.stop();}},_callee180);}));function configure(_x225){return _configure5.apply(this,arguments);}return configure;}()},{key:"auth",value:function(){var _auth5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee181(e){return _regeneratorRuntime().wrap(function _callee181$(_context186){while(1)switch(_context186.prev=_context186.next){case 0:return _context186.abrupt("return",Zv(e));case 1:case"end":return _context186.stop();}},_callee181);}));function auth(_x226){return _auth5.apply(this,arguments);}return auth;}()},{key:"run",value:function(){var _run7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee182(e,t,r){var _this159=this;var n,i,o,a,s,u,l,h,_e944,_o$_e2;return _regeneratorRuntime().wrap(function _callee182$(_context187){while(1)switch(_context187.prev=_context187.next){case 0:vc();n=[],i=[];Object.entries(e).forEach(function(e){var t=e[0],r=e[1],o=_this159.inputNames.indexOf(t);if(-1===o)throw new Error("invalid input '".concat(t,"'"));n.push(r),i.push(o);});o=[],a=[];Object.entries(t).forEach(function(e){var t=e[0],r=e[1],n=_this159.outputNames.indexOf(t);if(-1===n)throw new Error("invalid output '".concat(t,"'"));o.push(r),a.push(n);});s=n.map(function(e,t){return Qv(e,function(){return"input \"".concat(_this159.inputNames[i[t]],"\"");});});u=o.map(function(e,t){return e?Qv(e,function(){return"output \"".concat(_this159.outputNames[a[t]],"\"");}):null;});_context187.next=9;return qv(this.sessionId,i,s,a,u,r);case 9:l=_context187.sent;h={};for(_e944=0;_e944<l.length;_e944++){h[this.outputNames[a[_e944]]]=(_o$_e2=o[_e944])!==null&&_o$_e2!==void 0?_o$_e2:ex(l[_e944]);}return _context187.abrupt("return",(xc(),h));case 13:case"end":return _context187.stop();}},_callee182,this);}));function run(_x227,_x228,_x229){return _run7.apply(this,arguments);}return run;}()},{key:"startProfiling",value:function startProfiling(){}},{key:"endProfiling",value:function endProfiling(){Jv(this.sessionId);}}]);return tx;}();}),lx=Mc(function(){id(),sx(),ux(),rx=function rx(){if(("number"!=typeof rc.wasm.initTimeout||rc.wasm.initTimeout<0)&&(rc.wasm.initTimeout=0),"boolean"!=typeof rc.wasm.simd&&(rc.wasm.simd=!0),"boolean"!=typeof rc.wasm.proxy&&(rc.wasm.proxy=!1),"boolean"!=typeof rc.wasm.trace&&(rc.wasm.trace=!1),"number"!=typeof rc.wasm.numThreads||!Number.isInteger(rc.wasm.numThreads)||rc.wasm.numThreads<=0){((typeof self==="undefined"?"undefined":_typeof(self))<"u"&&!self.crossOriginIsolated||_typeof(Oc)<"u"&&Oc.versions&&Oc.versions.node)&&(rc.wasm.numThreads=1);var _e945=(typeof navigator==="undefined"?"undefined":_typeof(navigator))>"u"?(void 0)().length:navigator.hardwareConcurrency;rc.wasm.numThreads=Math.min(4,Math.ceil((_e945||1)/2));}},nx=/*#__PURE__*/function(){function nx(){_classCallCheck(this,nx);}_createClass(nx,[{key:"init",value:function(){var _init4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee183(e){return _regeneratorRuntime().wrap(function _callee183$(_context188){while(1)switch(_context188.prev=_context188.next){case 0:rx();_context188.next=3;return Vv();case 3:_context188.next=5;return Hv(e);case 5:case"end":return _context188.stop();}},_callee183);}));function init(_x230){return _init4.apply(this,arguments);}return init;}()},{key:"createInferenceSessionHandler",value:function(){var _createInferenceSessionHandler3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee184(e,t){var r;return _regeneratorRuntime().wrap(function _callee184$(_context189){while(1)switch(_context189.prev=_context189.next){case 0:r=new tx();_context189.next=3;return r.loadModel(e,t);case 3:return _context189.abrupt("return",Promise.resolve(r));case 4:case"end":return _context189.stop();}},_callee184);}));function createInferenceSessionHandler(_x231,_x232){return _createInferenceSessionHandler3.apply(this,arguments);}return createInferenceSessionHandler;}()}]);return nx;}();}),hx={};Fc(hx,{wasmBackend:function wasmBackend(){return cx;}});var cx,dx=Mc(function(){lx(),cx=new nx();});id(),id(),id();{var _e946=(dx(),Nc(hx)).wasmBackend;qh("webgpu",_e946,5),qh("cpu",_e946,10),qh("wasm",_e946,10);}Object.defineProperty(rc.versions,"web",{value:"1.17.0",enumerable:!0});var fx=__webpack_require__(5620),px=__webpack_require__(4941),yx=__webpack_require__(9899),gx=__webpack_require__.n(yx);function mx(e){return mx="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},mx(e);}function wx(){wx=function wx(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==mx(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(mx(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function bx(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function vx(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){bx(o,n,i,a,s,"next",e);}function s(e){bx(o,n,i,a,s,"throw",e);}a(void 0);});};}function xx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_x(n.key),n);}}function _x(e){var t=function(e,t){if("object"!=mx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==mx(t)?t:String(t);}var Ix,Ax=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this._name="tsvb";}var t,n,i,o;return t=e,n=[{key:"get",value:function(){var e=vx(wx().mark(function e(t,n){var i,o;return wx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cache){e.next=4;break;}return e.next=3,caches.open(this._name);case 3:this._cache=e.sent;case 4:return e.next=6,this._cache.match(t);case 6:if(void 0===(i=e.sent)){e.next=9;break;}return e.abrupt("return",i);case 9:return e.next=11,fetch(t);case 11:if((i=e.sent).ok){e.next=15;break;}return r.ie.notify({message:"".concat(t," don't found"),emitter:r.E7.ML_INFERENCE}),e.abrupt("return",i);case 15:if(!n){e.next=20;break;}return o=i.clone(),e.next=19,this._cache.put(t,i);case 19:return e.abrupt("return",o);case 20:return e.abrupt("return",i);case 21:case"end":return e.stop();}},e,this);}));return function(t,r){return e.apply(this,arguments);};}()},{key:"delete",value:(o=vx(wx().mark(function e(){return wx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches["delete"](this._name);case 2:case"end":return e.stop();}},e,this);})),function(){return o.apply(this,arguments);})}],n&&xx(t.prototype,n),i&&xx(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function Sx(e){return Sx="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Sx(e);}function Tx(){Tx=function Tx(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==Sx(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(Sx(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function Cx(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function Ex(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Cx(o,n,i,a,s,"next",e);}function s(e){Cx(o,n,i,a,s,"throw",e);}a(void 0);});};}function Ox(){return kx.apply(this,arguments);}function kx(){return kx=Ex(Tx().mark(function e(){var t,r=arguments;return Tx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},void 0===Ix){e.next=3;break;}return e.abrupt("return",Ix);case 3:return e.next=5,Ex(Tx().mark(function e(){var r;return Tx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.gpu){e.next=3;break;}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,navigator.gpu.requestAdapter(t);case 6:return r=e.sent,e.next=9,r.requestDevice();case 9:return e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e["catch"](3),e.abrupt("return",!1);case 15:case"end":return e.stop();}},e,null,[[3,12]]);}))();case 5:return Ix=e.sent,e.abrupt("return",Ix);case 7:case"end":return e.stop();}},e);})),kx.apply(this,arguments);}function Px(e,t){return function(e){if(Array.isArray(e))return e;}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1;}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e;}finally{try{if(!u&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return;}finally{if(l)throw i;}}return s;}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $x(e,t);}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function $x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n;}function Rx(e){return Rx="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Rx(e);}function Bx(){Bx=function Bx(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==Rx(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(Rx(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function Dx(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function Mx(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Dx(o,n,i,a,s,"next",e);}function s(e){Dx(o,n,i,a,s,"throw",e);}a(void 0);});};}function Lx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function Fx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ux(n.key),n);}}function Nx(e,t,r){return t&&Fx(e.prototype,t),r&&Fx(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;}function Ux(e){var t=function(e,t){if("object"!=Rx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Rx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Rx(t)?t:String(t);}var jx={segmentation:4,facedetector:3,colorcorrector:3,lowlighter:3},Gx=function(){function e(){Lx(this,e),this.inference=null,this.ready=!1,this.preset="balanced",this.isGPU=!1;}var t,n,i;return Nx(e,[{key:"onAuth",value:function value(){}},{key:"setPresetManager",value:function value(e){this.presetManager=e;}},{key:"preload",value:(i=Mx(Bx().mark(function e(t){return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop();}},e);})),function(e){return i.apply(this,arguments);})},{key:"cache",value:(n=Mx(Bx().mark(function e(t,r){return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop();}},e);})),function(e,t){return n.apply(this,arguments);})},{key:"getType",value:function value(){return"custom";}},{key:"setPreset",value:function value(e){this.preset=e;}},{key:"setBackend",value:function value(e){this.inference=e;}},{key:"init",value:(t=Mx(Bx().mark(function e(t){var n,i,o,a;return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.inference.setPreset(this.preset);case 3:return e.next=5,this.inference.configure(t);case 5:return i=e.sent,e.next=8,Wx(i,t);case 8:return o=e.sent,e.next=11,this.inference.auth(o.data.key);case 11:if(a=e.sent,"active"==JSON.parse(a).status){e.next=15;break;}throw new Error("Authentication failed");case 15:this.ready=!0,r.ie.notify({message:"custom ".concat(this.preset),type:r.cL.INFO,emitter:r.E7.ML_INFERENCE}),e.next=23;break;case 19:throw e.prev=19,e.t0=e["catch"](0),r.ie.notify({message:null!==(n=e.t0.message)&&void 0!==n?n:e.t0,emitter:r.E7.ML_INFERENCE,cause:e.t0}),e.t0;case 23:case"end":return e.stop();}},e,this,[[0,19]]);})),function(e){return t.apply(this,arguments);})},{key:"isReady",value:function value(){return this.ready;}},{key:"run",value:function value(e,t,r){var n=this;return new Promise(function(t,r){t(n.inference.run(e));});}}]),e;}(),zx=function(){function e(){Lx(this,e),this.sessions=new Map(),this.sessionPromises=new Map(),this.ready=!1,this.preset="balanced",this.segmentationModel="",this.isGPU=!1,this._loader=new Ax();}var t,n,i,o,a;return Nx(e,[{key:"onAuth",value:function value(e){var t="function"==typeof e;this.authFunction=t?e:void 0;}},{key:"setPresetManager",value:function value(e){this.presetManager=e;}},{key:"getModel",value:function value(e){return"segmentation"===e?this.segmentationModel:fx.M.getModelUrl(fx.M.MODELS[e]);}},{key:"getType",value:function value(){return"onnx";}},{key:"setBackend",value:function value(e){}},{key:"setPreset",value:function value(e){this.preset=e,this.presetManager?this.segmentationModel=this.presetManager.getModelURL(this.preset):this.segmentationModel=fx.M.getModelUrl(fx.M.PRESETS[fx.M.PRESET]);}},{key:"cache",value:(a=Mx(Bx().mark(function e(){var t,r,n,i,o,a=arguments;return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>1&&void 0!==a[1]&&a[1],!(a.length>0&&void 0!==a[0]&&a[0])){e.next=6;break;}return e.next=5,this._loader["delete"]();case 5:return e.abrupt("return");case 6:for(r=0,n=Object.entries(fx.M.MODELS);r<n.length;r++)i=Px(n[r],2),o=i[0],""!==i[1]&&this._loader.get(this.getModel(o),!0);t||(this.setPreset(fx.M.PRESET),this._loader.get(this.getModel("segmentation"),!0));case 8:case"end":return e.stop();}},e,this);})),function(){return a.apply(this,arguments);})},{key:"preload",value:(o=Mx(Bx().mark(function e(){var t,r,n,i,o,a=arguments;return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]&&a[0],r=0,n=Object.entries(fx.M.MODELS);case 2:if(!(r<n.length)){e.next=10;break;}if(i=Px(n[r],2),o=i[0],""===i[1]){e.next=7;break;}return e.next=7,this.init(fx.M.CUSTOMER_ID,o);case 7:r++,e.next=2;break;case 10:if(t){e.next=14;break;}return this.setPreset(fx.M.PRESET),e.next=14,this.init(fx.M.CUSTOMER_ID,"segmentation");case 14:case"end":return e.stop();}},e,this);})),function(){return o.apply(this,arguments);})},{key:"init",value:(i=Mx(Bx().mark(function e(t,n){var i,o,a,s,u,l,h,c,d,f=this;return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],this.sessionPromises.forEach(function(e,t,r){"pending"==e.state&&o.push(e.promise);}),e.next=4,Promise.all(o);case 4:if(a=this.getModel(n),!this.sessionPromises.has(a)){e.next=7;break;}return e.abrupt("return",null===(i=this.sessionPromises.get(a))||void 0===i?void 0:i.promise);case 7:return s=new eh(),this.sessionPromises.set(a,s),e.next=11,this._loader.get(a);case 11:return u=e.sent,e.next=14,u.arrayBuffer();case 14:if(l=e.sent,Ec.CU,h="wasm","segmentation"!=n){e.next=23;break;}if("webgpu"!=fx.M.PROVIDER&&"auto"!=fx.M.PROVIDER){e.next=23;break;}return e.next=21,Ox();case 21:e.sent?h="webgpu":r.ie.notify({message:"WebGPU is not supported",emitter:r.E7.ML_INFERENCE});case 23:return"webgpu"==h?(c=this.createGPUSession(l),this.isGPU=!0):c=this.createCPUSession(l),e.abrupt("return",c.then(function(e){return(d=e).configure(t);}).then(function(e){if("extension"!==fx.M.APP_ENV)return Wx(e,fx.M.CUSTOMER_ID);if("function"!=typeof f.authFunction)throw"Can't find auth function";var t=fx.M.API_URL+fx.M.CUSTOMER_ID,r=px.i.getInstance().getUID(fx.M.CUSTOMER_ID);return f.authFunction(t,{user_id:r,payload:e});}).then(function(e){var t;return d.auth(null!==(t=e.key)&&void 0!==t?t:e.data.key);}).then(function(e){if("active"!==JSON.parse(e).status)throw new Error("Authentication failed");f.ready=!0,f.sessions.set(a,d),s.resolve(),r.ie.notify({message:"init ".concat(n),type:r.cL.INFO,emitter:r.E7.ML_INFERENCE});})["catch"](function(e){var t;throw r.ie.notify({message:null!==(t=e.message)&&void 0!==t?t:e,emitter:r.E7.ML_INFERENCE,cause:e}),e;}));case 25:case"end":return e.stop();}},e,this);})),function(e,t){return i.apply(this,arguments);})},{key:"createCPUSession",value:(n=Mx(Bx().mark(function e(t){var r;return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={executionProviders:["wasm"],enableCpuMemArena:!0,enableMemPattern:!0,executionMode:"parallel",graphOptimizationLevel:"all",extra:{session:{set_denormal_as_zero:"1",disable_prepacking:"1",dynamic_block_base:"4"},optimization:{enable_gelu_approximation:"1"}}},Ec._K.wasm.numThreads=1,fx.M.PROXY&&(Ec._K.wasm.proxy=!0),Object.keys(fx.M.WASM_PATHS).length&&(Ec._K.wasm.wasmPaths=fx.M.WASM_PATHS),e.abrupt("return",Ec.CU.create(t,r));case 5:case"end":return e.stop();}},e);})),function(e){return n.apply(this,arguments);})},{key:"createGPUSession",value:(t=Mx(Bx().mark(function e(t){var r,n,i,o,a,s,u,l;return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={executionProviders:["webgpu"]},rc.wasm.numThreads=1,fx.M.PROXY&&(rc.wasm.proxy=!0),Object.keys(fx.M.WASM_PATHS).length){for(n=[],i=0,o=Object.entries(fx.M.WASM_PATHS);i<o.length;i++)a=Px(o[i],2),s=a[0],u=a[1],n[s]=u.replace(".wasm",".jsep.wasm");l=Object.assign({},n),rc.wasm.wasmPaths=l;}return e.abrupt("return",Ic.create(t,r));case 5:case"end":return e.stop();}},e);})),function(e){return t.apply(this,arguments);})},{key:"isReady",value:function value(){return this.ready;}},{key:"run",value:function value(e,t,n,i){var o,a=new Ec.w3("float32",e,[1,jx[i],n,t]),s=this.getModel(i);return this.sessions.has(s)?null===(o=this.sessions.get(s))||void 0===o?void 0:o.run({input:a}):(r.ie.notify({message:"ML inference for ".concat(i," model is not initialized"),emitter:r.E7.ML_INFERENCE}),null);}}]),e;}(),Vx={onnx:zx,custom:Gx},Hx=function(){function e(){Lx(this,e);}return Nx(e,null,[{key:"getInference",value:function value(e){return new Vx[e]();}}]),e;}();function Wx(e,t){return Yx.apply(this,arguments);}function Yx(){return(Yx=Mx(Bx().mark(function e(t,r){return Bx().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gx().post(fx.M.API_URL+r,{user_id:px.i.getInstance().getUID(r),payload:t},{headers:{"Tsvb-Version":fx.M.VERSION}})["catch"](function(e){throw new Error(e.response.data.message);}));case 1:case"end":return e.stop();}},e);}))).apply(this,arguments);}function Kx(e){return Kx="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Kx(e);}function Xx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zx(n.key),n);}}function Zx(e){var t=function(e,t){if("object"!=Kx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Kx(t)?t:String(t);}var qx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.sdkOptions=r,this.container=new co(),this.background=new yo(Sn.WHITE),this.background.tint=0,t.background&&(this.background.tint=t.background);var n={fontFamily:"Arial",fontSize:t.size?t.size:24,fill:t.color?t.color:16777215,align:"left"};this.text=new Bu("",n);var i=t.padding?t.padding:7;this.text.x=i,this.text.y=i,this.container.addChild(this.background),this.container.addChild(this.text),this.container.visible=!1,this.sdkOptions.on("update",this.onOptionsUpdate,this);}var t,r,n;return t=e,(r=[{key:"onOptionsUpdate",value:function value(){this.text.style.fontSize=Math.round(.02*this.sdkOptions.width);}},{key:"updateText",value:function value(e){this.text.text=e;var t=this.text.getLocalBounds();this.background.width=2*this.text.x+t.width,this.background.height=2*this.text.y+t.height;}},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this);}}])&&Xx(t.prototype,r),n&&Xx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function Jx(e){return Jx="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},Jx(e);}function Qx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,e_(n.key),n);}}function e_(e){var t=function(e,t){if("object"!=Jx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==Jx(t)?t:String(t);}function t_(e,t,r){return t=n_(t),function(e,t){if(t&&("object"===Jx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,r_()?Reflect.construct(t,r||[],n_(e).constructor):t.apply(e,r));}function r_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(r_=function r_(){return!!e;})();}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},n_(e);}function i_(e,t){return i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},i_(e,t);}var o_=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=t_(this,t,["in vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nout vec2 vVertexPosition;\nout vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition(void ) {\n  vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.0)) + outputFrame.xy;\n\n  return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord(void ) {\n  return aVertexPosition; // * (outputFrame.zw);\n}\n\nvoid main(void ) {\n  gl_Position = filterVertexPosition();\n  vTextureCoord = filterTextureCoord();\n}\n","precision mediump float;\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nuniform vec4 filterArea;\nlayout(location = 0) out vec4 outColor;\n\nuniform sampler2D u_Texture;\nuniform float u_Offset;\nuniform vec2 u_ImgSize;\n//Y =  0.299R + 0.587G + 0.114B\n//U = -0.147R - 0.289G + 0.436B\n//V =  0.615R - 0.515G - 0.100B\nconst vec3 COEF_Y = vec3(0.2126, 0.7152, 0.0722);\nconst vec3 COEF_U = vec3(-0.1146, -0.3854, 0.5);\nconst vec3 COEF_V = vec3(0.5, -0.4542, -0.0458);\nconst float U_DIVIDE_LINE = 2.0 / 3.0;\nconst float V_DIVIDE_LINE = 5.0 / 6.0;\n\nvoid main() {\n  vec2 texelOffset = vec2(u_Offset, 0.0);\n  //outColor = vec4(vTextureCoord.y, vTextureCoord.y, vTextureCoord.y, vTextureCoord.y);\n\n  if (vTextureCoord.y <= U_DIVIDE_LINE) {\n    vec2 texCoord = vec2(vTextureCoord.x, vTextureCoord.y * 3.0 / 2.0);\n    vec4 color0 = texture(u_Texture, texCoord);\n    vec4 color1 = texture(u_Texture, texCoord + texelOffset);\n    vec4 color2 = texture(u_Texture, texCoord + texelOffset * 2.0);\n    vec4 color3 = texture(u_Texture, texCoord + texelOffset * 3.0);\n\n    float y0 = dot(color0.rgb, COEF_Y);\n    float y1 = dot(color1.rgb, COEF_Y);\n    float y2 = dot(color2.rgb, COEF_Y);\n    float y3 = dot(color3.rgb, COEF_Y);\n    outColor = vec4(y0, y1, y2, y3);\n  } else if (vTextureCoord.y <= V_DIVIDE_LINE) {\n    float offsetY = 1.0 / 3.0 / u_ImgSize.y;\n    vec2 texCoord;\n    if (vTextureCoord.x <= 0.5) {\n      texCoord = vec2(vTextureCoord.x * 2.0, (vTextureCoord.y - U_DIVIDE_LINE) * 2.0 * 3.0);\n    } else {\n      texCoord = vec2(\n        (vTextureCoord.x - 0.5) * 2.0,\n        ((vTextureCoord.y - U_DIVIDE_LINE) * 2.0 + offsetY) * 3.0\n      );\n    }\n\n    vec4 color0 = texture(u_Texture, texCoord);\n    vec4 color1 = texture(u_Texture, texCoord + texelOffset * 2.0);\n    vec4 color2 = texture(u_Texture, texCoord + texelOffset * 4.0);\n    vec4 color3 = texture(u_Texture, texCoord + texelOffset * 6.0);\n\n    float u0 = dot(color0.rgb, COEF_U) + 0.5;\n    float u1 = dot(color1.rgb, COEF_U) + 0.5;\n    float u2 = dot(color2.rgb, COEF_U) + 0.5;\n    float u3 = dot(color3.rgb, COEF_U) + 0.5;\n    outColor = vec4(u0, u1, u2, u3);\n  } else {\n    float offsetY = 1.0 / 3.0 / u_ImgSize.y;\n    vec2 texCoord;\n    if (vTextureCoord.x <= 0.5) {\n      texCoord = vec2(vTextureCoord.x * 2.0, (vTextureCoord.y - V_DIVIDE_LINE) * 2.0 * 3.0);\n    } else {\n      texCoord = vec2(\n        (vTextureCoord.x - 0.5) * 2.0,\n        ((vTextureCoord.y - V_DIVIDE_LINE) * 2.0 + offsetY) * 3.0\n      );\n    }\n\n    vec4 color0 = texture(u_Texture, texCoord);\n    vec4 color1 = texture(u_Texture, texCoord + texelOffset * 2.0);\n    vec4 color2 = texture(u_Texture, texCoord + texelOffset * 4.0);\n    vec4 color3 = texture(u_Texture, texCoord + texelOffset * 6.0);\n\n    float v0 = dot(color0.rgb, COEF_V) + 0.5;\n    float v1 = dot(color1.rgb, COEF_V) + 0.5;\n    float v2 = dot(color2.rgb, COEF_V) + 0.5;\n    float v3 = dot(color3.rgb, COEF_V) + 0.5;\n    outColor = vec4(v0, v1, v2, v3);\n  }\n}\n",e.uniforms])).program.fragmentSrc.includes("#version 300 es")||(r.program.fragmentSrc="#version 300 es \n"+r.program.fragmentSrc),r.program.vertexSrc.includes("#version 300 es")||(r.program.vertexSrc="#version 300 es \n"+r.program.vertexSrc),r;}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i_(e,t);}(t,e),r=t,n&&Qx(r.prototype,n),i&&Qx(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i;}(fn);function a_(e){return a_="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},a_(e);}function s_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u_(n.key),n);}}function u_(e){var t=function(e,t){if("object"!=a_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==a_(t)?t:String(t);}var l_=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.sdkOptions=r;var n=this.sdkOptions.width,i=this.sdkOptions.height;this.renderer=t,this.widthYUV=n/4,this.heightYUV=3*i/2,this.textureYUV=Tn.create({width:this.widthYUV,height:this.heightYUV}),this.textureRBG=Tn.create({width:n,height:i}),this.spriteYUV=new yo(this.textureYUV),this.filterYUV=new o_({uniforms:{u_Offset:1/n,u_ImgSize:[n,i],u_Texture:this.textureRBG}}),this.spriteYUV.filters=[this.filterYUV],this.sdkOptions.on("update",this.onOptionsUpdate,this);}var t,r,n;return t=e,r=[{key:"onOptionsUpdate",value:function value(){var e=this.sdkOptions.width,t=this.sdkOptions.height;this.widthYUV=e/4,this.heightYUV=3*t/2,this.textureYUV.resize(this.widthYUV,this.heightYUV),this.textureRBG.resize(e,t),this.filterYUV.uniforms.u_Offset=1/e,this.filterYUV.uniforms.u_ImgSize=[e,t];}},{key:"getVideoFrameArray",value:function value(){var e=new Uint8Array(4*this.widthYUV*this.heightYUV),t=this.renderer.generateTexture(this.spriteYUV);this.renderer.renderTexture.bind(t);var r=t.framebuffer.glFramebuffers[this.renderer.CONTEXT_UID];r.blitFramebuffer&&this.renderer.framebuffer.bind(r.blitFramebuffer);var n=this.renderer.gl;return n.readPixels(0,0,this.widthYUV,this.heightYUV,n.RGBA,n.UNSIGNED_BYTE,e),t.destroy(!0),e;}},{key:"getVideoFrameSettings",value:function value(){return{format:"I420",codedWidth:this.sdkOptions.width,codedHeight:this.sdkOptions.height};}},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this);}}],r&&s_(t.prototype,r),n&&s_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function h_(e){return h_="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},h_(e);}function c_(){c_=function c_(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==h_(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(h_(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function d_(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function f_(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d_(o,n,i,a,s,"next",e);}function s(e){d_(o,n,i,a,s,"throw",e);}a(void 0);});};}function p_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y_(n.key),n);}}function y_(e){var t=function(e,t){if("object"!=h_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==h_(t)?t:String(t);}var g_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e);}var t,r,n,i,o;return t=e,r=[{key:"clientWaitAsync",value:function value(e,t,r,n){return new Promise(function(i,o){!function a(){var s=e.clientWaitSync(t,r,0);s!==e.WAIT_FAILED?s!==e.TIMEOUT_EXPIRED?i(!0):$l(a,n):o();}();});}},{key:"getBufferSubDataAsync",value:(o=f_(c_().mark(function e(t,r,n,i,o,a,s){var u;return c_().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0),t.flush(),e.next=4,this.clientWaitAsync(t,u,0,2);case 4:t.deleteSync(u),t.bindBuffer(r,n),t.getBufferSubData(r,i,o,a,s),t.bindBuffer(r,null);case 8:case"end":return e.stop();}},e,this);})),function(e,t,r,n,i,a,s){return o.apply(this,arguments);})},{key:"readPixelsAsync",value:(i=f_(c_().mark(function e(t,r,n,i,o,a,s,u){var l;return c_().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.createBuffer(),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,u.byteLength,t.STREAM_READ),t.readPixels(r,n,i,o,a,s,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),e.next=7,this.getBufferSubDataAsync(t,t.PIXEL_PACK_BUFFER,l,0,u);case 7:return t.deleteBuffer(l),e.abrupt("return",u);case 9:case"end":return e.stop();}},e,this);})),function(e,t,r,n,o,a,s,u){return i.apply(this,arguments);})}],r&&p_(t.prototype,r),n&&p_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function m_(e){return m_="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},m_(e);}function w_(){w_=function w_(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==m_(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(m_(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function b_(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function v_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x_(n.key),n);}}function x_(e){var t=function(e,t){if("object"!=m_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==m_(t)?t:String(t);}var __=function(){function e(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.color=65280,this.frameFormat="RGBX",n&&(this.frameFormat=n),this.sdkOptions=r,this.PIXI=t,this.renderer=new Vo({width:this.sdkOptions.width,height:this.sdkOptions.height,antialias:!0}),this.filter_manager=new Rn(this.renderer.renderer),this.timinngs={stats:new T(),sprite:new qx({size:Math.round(.02*this.sdkOptions.width),padding:5},this.sdkOptions)},this.effectsContainer=new co(),this.renderer.stage.addChild(this.effectsContainer),this.overlayContainer=new co(),this.renderer.stage.addChild(this.overlayContainer),this.stopTickers(),this.GLHelper=new g_(),"I420"===this.frameFormat&&(this.converterYUV=new l_(this.renderer.renderer,this.sdkOptions)),this.sdkOptions.on("update",this.onOptionsUpdate,this);}var n,i,o,a;return n=e,i=[{key:"onOptionsUpdate",value:function value(){this.renderer.renderer.resize(this.sdkOptions.width,this.sdkOptions.height);}},{key:"stopTickers",value:function value(){this.renderer.ticker.stop(),Di.system.stop();}},{key:"startTickers",value:function value(){this.renderer.ticker.start(),Di.system.start();}},{key:"updateVideoFrame",value:function value(e){this.video_frame||(this.video_frame=this.createFrom(e)),this.video_frame.texture.destroy(!0),this.video_frame.texture=Sn.from(e);}},{key:"addStatistics",value:function value(){this.addToStage(this.timinngs.sprite.container);}},{key:"removeStatistics",value:function value(){this.removeFromStage(this.timinngs.sprite.container);}},{key:"updateStatistics",value:function value(e,t){this.timinngs.stats.updateStats(e,t);}},{key:"hideStatistics",value:function value(){this.timinngs.sprite.container.visible=!1;}},{key:"drawStatistics",value:function value(){this.timinngs.sprite.updateText(this.timinngs.stats.getText()),this.timinngs.sprite.container.visible=!0;}},{key:"destroy",value:function value(){this.renderer.renderer&&(this.sdkOptions.off("update",this.onOptionsUpdate,this),this.converterYUV&&this.converterYUV.destroy(),this.timinngs.sprite&&this.timinngs.sprite.destroy(),this.renderer.destroy(!0,{children:!0,texture:!0,baseTexture:!0}));}},{key:"renderTo",value:function value(e,t){var n;try{this.renderer.renderer.render(e,{renderTexture:t});}catch(e){r.ie.notify({message:null!==(n=e.message)&&void 0!==n?n:e,emitter:r.E7.RENDERER,cause:e});}}},{key:"createCanvas",value:function value(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r;}},{key:"createTextureFromBuffer",value:function value(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Sn.fromBuffer(e,t,r,n);}},{key:"createRenderTexture",value:function value(e,t){return Tn.create({width:e,height:t});}},{key:"pixels",value:function value(e){return this.renderer.renderer.extract.pixels(e);}},{key:"pixelsAsync",value:(a=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b_(o,n,i,a,s,"next",e);}function s(e){b_(o,n,i,a,s,"throw",e);}a(void 0);});};}(w_().mark(function e(t){var r,n,i;return w_().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.renderer.renderer,n=new Uint8Array(4*t._frame.width*t._frame.height),r.renderTexture.bind(t),(i=t.framebuffer.glFramebuffers[r.CONTEXT_UID]).blitFramebuffer&&r.framebuffer.bind(i.blitFramebuffer),e.next=8,this.GLHelper.readPixelsAsync(r.gl,0,0,t._frame.width,t._frame.height,r.gl.RGBA,r.gl.UNSIGNED_BYTE,n);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop();}},e,this);})),function(e){return a.apply(this,arguments);})},{key:"calculateSpriteMatrix",value:function value(e){var t=new Er();return this.filter_manager.calculateSpriteMatrix(t,e);}},{key:"getFilterManager",value:function value(){return this.filter_manager;}},{key:"setTintColor",value:function value(e){this.color=e;}},{key:"getTintColor",value:function value(){return this.color;}},{key:"createTexture",value:function value(e){return e instanceof Sn?e:Sn.from(e);}},{key:"createFromTexture",value:function value(e){return new yo(e);}},{key:"createFrom",value:function value(e){return new yo(Sn.from(e));}},{key:"createFromURL",value:function value(e){var t;return"string"==typeof e&&"color"===e?((t=new yo(Sn.WHITE)).tint=this.getTintColor(),t.width=this.sdkOptions.width,t.height=this.sdkOptions.height,t):t=yo.from(e);}},{key:"createContainer",value:function value(){return new co();}},{key:"addToStage",value:function value(e){var t;null===(t=this.renderer.stage)||void 0===t||t.addChild(e);}},{key:"addToEffects",value:function value(e){var t;this.renderer.renderer&&(null===(t=this.effectsContainer)||void 0===t||t.addChild(e));}},{key:"addToOverlay",value:function value(e){var t;null===(t=this.overlayContainer)||void 0===t||t.addChild(e);}},{key:"addToStageAt",value:function value(e,t){var r;null===(r=this.renderer.stage)||void 0===r||r.addChildAt(e,t);}},{key:"addToEffectsAt",value:function value(e,t){var r;null===(r=this.effectsContainer)||void 0===r||r.addChildAt(e,t);}},{key:"addToOverlayAt",value:function value(e,t){var r;null===(r=this.overlayContainer)||void 0===r||r.addChildAt(e,t);}},{key:"removeFromStage",value:function value(e){var t;null===(t=this.renderer.stage)||void 0===t||t.removeChild(e);}},{key:"removeFromEffects",value:function value(e){var t;null===(t=this.effectsContainer)||void 0===t||t.removeChild(e);}},{key:"removeFromOverlay",value:function value(e){var t;null===(t=this.overlayContainer)||void 0===t||t.removeChild(e);}},{key:"useAsMask",value:function value(e){this.renderer.stage.mask=e;}},{key:"setCanvas",value:function value(e){this.canvas=e;}},{key:"render",value:function value(){var e;try{this.renderer.render(),this.converterYUV&&(this.renderTo(this.renderer.stage,this.converterYUV.textureRBG),this.renderer.renderer.render(this.renderer.stage,{renderTexture:this.converterYUV.textureYUV}));}catch(t){r.ie.notify({message:null!==(e=t.message)&&void 0!==e?e:t,emitter:r.E7.RENDERER,cause:t});}}},{key:"getVideoFrameData",value:function value(){return this.converterYUV?this.converterYUV.getVideoFrameArray():this.renderer.renderer.view;}},{key:"getVideoFrameSettings",value:function value(e){var t=this.converterYUV?this.converterYUV.getVideoFrameSettings():{displayHeight:this.sdkOptions.height,displayWidth:this.sdkOptions.width};return Object.assign({duration:e,timestamp:Math.round(1e3*performance.now())},t);}}],i&&v_(n.prototype,i),o&&v_(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e;}();function I_(e){return I_="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},I_(e);}function A_(e,t){return function(e){if(Array.isArray(e))return e;}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1;}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e;}finally{try{if(!u&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return;}finally{if(l)throw i;}}return s;}}(e,t)||T_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function S_(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T_(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var _n181=0,i=function i(){};return{s:i,n:function n(){return _n181>=e.length?{done:!0}:{done:!1,value:e[_n181++]};},e:function e(_e947){throw _e947;},f:i};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,s=!1;return{s:function s(){r=r.call(e);},n:function n(){var e=r.next();return a=e.done,e;},e:function e(_e948){s=!0,o=_e948;},f:function f(){try{a||null==r["return"]||r["return"]();}finally{if(s)throw o;}}};}function T_(e,t){if(e){if("string"==typeof e)return C_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C_(e,t):void 0;}}function C_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n;}function E_(){E_=function E_(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==I_(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(I_(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function O_(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function k_(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){O_(o,n,i,a,s,"next",e);}function s(e){O_(o,n,i,a,s,"throw",e);}a(void 0);});};}function P_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R_(n.key),n);}}function $_(e,t,r){return t&&P_(e.prototype,t),r&&P_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;}function R_(e){var t=function(e,t){if("object"!=I_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==I_(t)?t:String(t);}function B_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}var D_=$_(function e(){B_(this,e),this.filters=[],this.transform=null;}),M_=function(){function e(t){B_(this,e),this.isEnabled=!1,this.sdkOptions=t;}var t;return $_(e,[{key:"useResources",value:function value(e){this.resources=e;}},{key:"prepare",value:function value(){}},{key:"process",value:(t=k_(E_().mark(function e(){return E_().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop();}},e);})),function(){return t.apply(this,arguments);})},{key:"nextFrame",value:function value(e){}},{key:"clearBuffers",value:function value(){}},{key:"enable",value:function value(){this.isEnabled=!0;}},{key:"disable",value:function value(){this.isEnabled=!1;}},{key:"destroy",value:function value(){}}]),e;}(),L_=function(){function e(t,r){B_(this,e),this.effects=[],this.isPaused=!1,this.isSkipPipeline=!1,this.components={},this.hasFrames=!1,this.textures=[],this.resources=new D_(),this.resources.renderer=t,this.components=null!=r?r:{},this.resources.texture=new jl();}var t;return $_(e,[{key:"destroy",value:function value(){this.removeComponents(),this.resources.renderer.destroy(),this.effects.forEach(function(e,t){e.destroy();});}},{key:"addEffect",value:function value(e){e.useResources(this.resources),e.prepare(),this.effects.push(e);}},{key:"clearBuffers",value:function value(){this.textures=[],this.effects.forEach(function(e,t){e.clearBuffers();});}},{key:"pause",value:function value(){this.isPaused=!0;}},{key:"unpause",value:function value(){this.isPaused=!1;}},{key:"enablePipelineSkipping",value:function value(){this.isSkipPipeline=!0;}},{key:"disablePipelineSkipping",value:function value(){this.isSkipPipeline=!1;}},{key:"nextFrame",value:function value(e){if(this.isPaused||this.isSkipPipeline)return e.texture.destroy(!0),void(this.textures=[]);if(this.effects.forEach(function(t,r){t.nextFrame(e);}),this.textures.length>1){var t=this.textures.shift();null==t||t.destroy();}this.textures.push(e);}},{key:"updateFrame",value:function value(){if(this.textures.length){var e=this.textures.shift();e&&this.resources.texture.update(e.texture);}}},{key:"addComponents",value:function value(){var e=this;this.components._getSortedComponentsArr.forEach(function(t){return e.resources.renderer.addToStage(t.container);});}},{key:"removeComponents",value:function value(){var e=this;Object.values(this.components).forEach(function(t){return e.resources.renderer.removeFromStage(t.container);});}},{key:"process",value:(t=k_(E_().mark(function e(){var t,r,n,i,o,a;return E_().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPaused){e.next=2;break;}return e.abrupt("return");case 2:if(!this.isSkipPipeline){e.next=7;break;}return this.addComponents(),this.resources.renderer.render(),this.removeComponents(),e.abrupt("return");case 7:this.updateFrame(),t=S_(this.effects.entries()),e.prev=9,t.s();case 11:if((r=t.n()).done){e.next=20;break;}return n=A_(r.value,2),i=n[0],o=n[1],(a=i+1===this.effects.length)&&this.addComponents(),e.next=17,o.process();case 17:a&&this.removeComponents();case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](9),t.e(e.t0);case 25:return e.prev=25,t.f(),e.finish(25);case 28:this.hasFrames=!0;case 29:case"end":return e.stop();}},e,this,[[9,22,25,28]]);})),function(){return t.apply(this,arguments);})}]),e;}();function F_(e){return F_="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},F_(e);}function N_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U_(n.key),n);}}function U_(e){var t=function(e,t){if("object"!=F_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==F_(t)?t:String(t);}function j_(e,t,r){return t=z_(t),function(e,t){if(t&&("object"===F_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,G_()?Reflect.construct(t,r||[],z_(e).constructor):t.apply(e,r));}function G_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(G_=function G_(){return!!e;})();}function z_(e){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},z_(e);}function V_(e,t){return V_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},V_(e,t);}var H_=function(e){function t(e){var r,n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=j_(this,t,[void 0,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D uLUT;\n\nuniform float uFilterPart;\nuniform float uFilterPower;\nuniform float uLutSize;\nuniform float uNormalizator;\nuniform float uHalfPx;\nuniform int uEdges;\nuniform int uEnabled;\n\nvec4 newColor(float rectNum, vec2 coord) {\n  int num = int(rectNum);\n  int red = num - uEdges * (num / uEdges);\n  int green = num / uEdges;\n\n  vec2 bCoord = vec2(float(red) / float(uEdges), float(green) / float(uEdges));\n\n  vec2 lutTextureCoord = vec2(coord.r + bCoord.r, coord.g + bCoord.g);\n  return texture2D(uLUT, lutTextureCoord);\n}\n\nfloat normalizeColor(float color) {\n  return color * uNormalizator + uHalfPx;\n}\n\nvoid main() {\n  vec4 color = texture2D(uSampler, vTextureCoord);\n\n  //. Check enabled\n  if (uEnabled < 1) {\n    gl_FragColor = color;\n    return;\n  }\n\n  //. Check filter part\n  if (vTextureCoord.x > uFilterPart) {\n    gl_FragColor = color;\n    return;\n  }\n\n  vec2 rgCoord = vec2(normalizeColor(color.r), normalizeColor(color.g));\n\n  //. Count number of the LUT-cell\n  float rectNumReal = color.b * (uLutSize - 1.0);\n\n  float rectNumMin = floor(rectNumReal);\n  float rectNumMax = ceil(rectNumReal);\n\n  vec4 colorLut1 = newColor(rectNumMin, rgCoord);\n  vec4 colorLut2 = newColor(rectNumMax, rgCoord);\n\n  vec4 colorInterpolated = mix(colorLut1, colorLut2, rectNumReal - rectNumMin);\n  vec3 resultColor = mix(color.rgb, colorLut1.rgb, uFilterPower);\n\n  gl_FragColor = vec4(resultColor.rgb, color.a);\n}\n\n",{uFilterPart:1,uFilterPower:1,uEnabled:0,uLutSize:null!==(n=null==e?void 0:e.lutSize)&&void 0!==n?n:36,uEdges:null!==(i=null==e?void 0:e.edges)&&void 0!==i?i:6,uLUT:null!==(o=null==e?void 0:e.texture)&&void 0!==o?o:Sn.WHITE}])).calcNormatizator(),r;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V_(e,t);}(t,e),r=t,n=[{key:"setLUT",value:function value(e){var t;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(null===(t=this.uniforms.uLUT)||void 0===t||t.destroy(!0)),(null==e?void 0:e.edges)&&(this.uniforms.uEdges=e.edges),(null==e?void 0:e.lutSize)&&(this.uniforms.uLutSize=e.lutSize),this.calcNormatizator(),(null==e?void 0:e.texture)?(this.uniforms.uLUT=e.texture,this.uniforms.uEnabled=1):this.uniforms.uEnabled=0;}},{key:"setFilterPart",value:function value(e){e=Math.min(1,Math.max(0,e)),this.uniforms.uFilterPart=e;}},{key:"setFilterPower",value:function value(e){e=Math.min(1,Math.max(0,e)),this.uniforms.uFilterPower=e;}},{key:"calcNormatizator",value:function value(){var e=this.uniforms,t=e.uLutSize,r=e.uEdges;this.uniforms.uNormalizator=(t-1)/(t*r),this.uniforms.uHalfPx=.5/(t*r);}}],n&&N_(r.prototype,n),i&&N_(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(fn);function W_(e){return W_="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},W_(e);}function Y_(e){return function(e){if(Array.isArray(e))return K_(e);}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e);}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K_(e,t);}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function K_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n;}function X_(){X_=function X_(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==W_(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(W_(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function Z_(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function q_(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Z_(o,n,i,a,s,"next",e);}function s(e){Z_(o,n,i,a,s,"throw",e);}a(void 0);});};}function J_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q_(n.key),n);}}function Q_(e){var t=function(e,t){if("object"!=W_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==W_(t)?t:String(t);}var eI=["cube"],tI=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e);}var t,r,n,i;return t=e,r=[{key:"parse",value:function value(e){var t,r=this;return new Promise(function(){var n=q_(X_().mark(function n(i,o){var a,s,u,l,h;return X_().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e instanceof File)){n.next=14;break;}if(r.checkFileExtention(e.name)){n.next=4;break;}return o('[ Lut Parser ] - Invalid file extention (file "'.concat(e.name,'", available extentions: ').concat(eI.join(", "),")")),n.abrupt("return");case 4:return n.prev=4,n.next=7,r.readFile(e);case 7:t=n.sent,n.next=14;break;case 10:return n.prev=10,n.t0=n["catch"](4),o(n.t0),n.abrupt("return");case 14:if("string"!=typeof e){n.next=25;break;}return n.prev=15,n.next=18,fetch(e).then(function(e){return e.text();});case 18:t=n.sent,n.next=25;break;case 21:return n.prev=21,n.t1=n["catch"](15),o(n.t1),n.abrupt("return");case 25:if("3D"===(a=r.parseCUBE(t)).type.toUpperCase()){n.next=29;break;}return o("[ Lut Parser ] - invalid lut type(".concat(a.type,"). Support 3DLUT only")),n.abrupt("return");case 29:return s=Math.ceil(Math.sqrt(a.size)),u=r.prepareTextureArray(a,s),l=a.size*s,h=Sn.fromBuffer(u,l,l,{scaleMode:1,mipmap:G.OFF}),i({texture:h,lutSize:a.size,textureSize:l,edges:s}),n.abrupt("return");case 35:case"end":return n.stop();}},n,null,[[4,10],[15,21]]);}));return function(e,t){return n.apply(this,arguments);};}());}},{key:"parseCUBE",value:function value(e){for(var t,r={title:"",type:"",size:0,domain:[[0,0,0],[1,1,1]],data:[]},n=e.split("\n"),i=0;i<n.length;i++){var o=n[i].trim();if("#"!==o[0]&&""!==o){var a=o.split(/\s+/);switch(a[0]){case"TITLE":r.title=o.slice(7,-1);break;case"DOMAIN_MIN":r.domain[0]=a.slice(1).map(Number);break;case"DOMAIN_MAX":r.domain[1]=a.slice(1).map(Number);break;case"LUT_1D_SIZE":r.type="1D",r.size=Number(a[1]);break;case"LUT_3D_SIZE":r.type="3D",r.size=Number(a[1]);break;default:(t=r.data).push.apply(t,Y_(a.map(Number)));}}}return r;}},{key:"prepareTextureArray",value:function value(e,t){var r=e.data,n=e.size,i=n*n*n,o=new Uint8ClampedArray(4*Math.pow(n*t,2)),a={value:0,isNil:function isNil(){return 0===a.value;},setDefault:function setDefault(){return a.value=n*n;},dec:function dec(){return a.value--;}};a.setDefault();for(var s=0,u=0,l=function l(e,r){return 4*(n*(t*u+s)+r%n)+e;},h=0;h<3*i;h+=3)o[l(0,h/3)]=255*r[h+0],o[l(1,h/3)]=255*r[h+1],o[l(2,h/3)]=255*r[h+2],o[l(3,h/3)]=255,a.dec(),h/3%n==n-2&&u++,a.isNil()&&(a.setDefault(),++s>=t?s=0:u-=n);return o;}},{key:"checkFileExtention",value:function value(e){var t=e.split(".").pop();return!!t&&eI.includes(t.toLowerCase());}},{key:"readFile",value:(i=q_(X_().mark(function e(t){return X_().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var n=new FileReader();n.readAsText(t),n.onload=function(){e(n.result);},n.onerror=function(){r("[ Lut Parser ] - filereader: ".concat(n.error));};}));case 1:case"end":return e.stop();}},e);})),function(e){return i.apply(this,arguments);})}],r&&J_(t.prototype,r),n&&J_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function rI(e){return rI="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},rI(e);}function nI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iI(n.key),n);}}function iI(e){var t=function(e,t){if("object"!=rI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==rI(t)?t:String(t);}var oI=function(){function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.size=null!==(r=t.size)&&void 0!==r?r:1,this.store=[];}var t,r,n;return t=e,r=[{key:"add",value:function value(e){var t=this,r=this.store.find(function(t){return t.id===e;}),n=Date.now();if(r)return r.time=n,{hasItem:!0};var i={id:e,time:n};if(this.store.push(i),this.store.length<=this.size)return{};var o=this.store.reduce(function(e,r,n){return t.store[e].time<r.time?e:n;},0);return{removedID:this.store.splice(o,1)[0].id};}},{key:"setSize",value:function value(e){var t;if(this.size=e,!(this.store.length<=e)){this.store=this.store.sort(function(e,t){return t.time-e.time;});for(var r=[];this.store.length>this.size;){var n=null===(t=this.store.pop())||void 0===t?void 0:t.id;void 0!==n&&r.push(n);}return r;}}},{key:"checkItemByID",value:function value(e){return!!~this.store.findIndex(function(t){return t.id===e;});}}],r&&nI(t.prototype,r),n&&nI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function aI(e){return aI="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},aI(e);}function sI(){sI=function sI(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==aI(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(aI(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function uI(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function lI(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){uI(o,n,i,a,s,"next",e);}function s(e){uI(o,n,i,a,s,"throw",e);}a(void 0);});};}function hI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cI(n.key),n);}}function cI(e){var t=function(e,t){if("object"!=aI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==aI(t)?t:String(t);}function dI(e,t,r){return t=pI(t),function(e,t){if(t&&("object"===aI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,fI()?Reflect.construct(t,r||[],pI(e).constructor):t.apply(e,r));}function fI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(fI=function fI(){return!!e;})();}function pI(e){return pI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},pI(e);}function yI(e,t){return yI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},yI(e,t);}var gI=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=dI(this,t,[e])).parser=new tI(),r.lutStore={},r.config={lut:"none",part:1,power:1,capacity:1},r.activityIndexator=new oI({size:r.config.capacity}),r;}var r,n,i,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yI(e,t);}(t,e),r=t,n=[{key:"prepare",value:function value(){var e=this.resources,t=(e.renderer,e.texture);this.original=new Zl(t,{width:this.sdkOptions.width,height:this.sdkOptions.height}),this.original.addBuffer("result"),this.filter=new H_(),this.original.frame.filters=[this.filter],this.setConfig(this.config),this.sdkOptions.on("update",this.onOptionsUpdate,this);}},{key:"onOptionsUpdate",value:function value(){this.original.resize(this.sdkOptions.width,this.sdkOptions.height);}},{key:"process",value:(a=lI(sI().mark(function e(){return sI().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled&&"none"!==this.config.lut){e.next=2;break;}return e.abrupt("return");case 2:this.resources.renderer.renderTo(this.original.frame,this.original.getBuffer("result")),this.resources.texture.update(this.original.getBuffer("result"),!1);case 4:case"end":return e.stop();}},e,this);})),function(){return a.apply(this,arguments);})},{key:"setConfig",value:function value(e){this.setFilterPart(e.part),this.setFilterPower(e.power),this.setFilterLut(e.lut,e.promise),this.setCapacity(e.capacity);}},{key:"setFilterPart",value:function value(e){void 0!==e&&(this.config.part=e,this.filter.setFilterPart(e));}},{key:"setFilterPower",value:function value(e){void 0!==e&&(this.config.power=e,this.filter.setFilterPower(e));}},{key:"setFilterLut",value:(o=lI(sI().mark(function e(t,r){var n,i,o,a,s;return sI().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break;}return e.abrupt("return");case 2:if("none"!==t){e.next=5;break;}return this.config.lut="none",e.abrupt("return");case 5:if(n=this.countID(t),this.config.lut=t,this.selectedID=n,i=this.activityIndexator.add(n),o=i.hasItem,a=i.removedID,o){e.next=19;break;}return e.next=12,this.parser.parse(t);case 12:if(s=e.sent,this.activityIndexator.checkItemByID(n)){e.next=18;break;}return s.texture.destroy(),this.removeLutByID(a),this.resolver(n,null==r?void 0:r.resolve()),e.abrupt("return");case 18:this.lutStore[n]=s;case 19:this.filter.setLUT(this.lutStore[this.selectedID],!1),this.removeLutByID(a),this.resolver(n,null==r?void 0:r.resolve());case 22:case"end":return e.stop();}},e,this);})),function(e,t){return o.apply(this,arguments);})},{key:"setCapacity",value:function value(e){var t=this;if(void 0!==e){this.config.capacity=e;var r=this.activityIndexator.setSize(e);(null==r?void 0:r.length)&&r.forEach(function(e){return t.removeLutByID(e);});}}},{key:"removeLutByID",value:function value(e){var t,r;void 0!==e&&(null===(r=null===(t=this.lutStore[e])||void 0===t?void 0:t.texture)||void 0===r||r.destroy(),delete this.lutStore[e]);}},{key:"countID",value:function value(e){return e instanceof File?e.name:e;}},{key:"onSuccess",value:function value(e){var t="function"==typeof e;this.onSuccessFunction=t?e:void 0;}},{key:"resolver",value:function value(e,t){"function"==typeof this.onSuccessFunction&&this.onSuccessFunction(e),"function"==typeof t&&t();}},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this);}}],n&&hI(r.prototype,n),i&&hI(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(M_);function mI(e){return mI="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},mI(e);}function wI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bI(n.key),n);}}function bI(e){var t=function(e,t){if("object"!=mI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==mI(t)?t:String(t);}function vI(e,t,r){return t=_I(t),function(e,t){if(t&&("object"===mI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,xI()?Reflect.construct(t,r||[],_I(e).constructor):t.apply(e,r));}function xI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(xI=function xI(){return!!e;})();}function _I(e){return _I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},_I(e);}function II(e,t){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},II(e,t);}var AI=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),vI(this,t,[void 0,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\n#define SIGMA (10.0)\n#define BSIGMA (0.1)\n#define MSIZE (15)\n\nfloat kernel[MSIZE];\n\nuniform float uBeautyficationLevel;\nuniform int uWidth;\nuniform int uHeight;\n\nfloat normpdf(float x, float sigma) {\n  return 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n}\n\nfloat normpdf3(vec3 v, float sigma) {\n  return 0.39894 * exp(-0.5 * dot(v, v) / (sigma * sigma)) / sigma;\n}\n\nvec4 overlay(vec4 a, vec4 b) {\n  vec4 x = vec4(2.0) * a * b;\n  vec4 y = vec4(1.0) - vec4(2.0) * (vec4(1.0) - a) * (vec4(1.0) - b);\n  vec4 result;\n  result.r = mix(x.r, y.r, float(a.r > 0.5));\n  result.g = mix(x.g, y.g, float(a.g > 0.5));\n  result.b = mix(x.b, y.b, float(a.b > 0.5));\n  result.a = mix(x.a, y.a, float(a.a > 0.5));\n  return result;\n}\n\nvec3 rgb2xyz(vec3 c) {\n  vec3 tmp;\n  tmp.x = c.r > 0.04045 ? pow((c.r + 0.055) / 1.055, 2.4) : c.r / 12.92;\n  tmp.y = c.g > 0.04045 ? pow((c.g + 0.055) / 1.055, 2.4) : c.g / 12.92,\n    tmp.z = c.b > 0.04045 ? pow((c.b + 0.055) / 1.055, 2.4) : c.b / 12.92;\n  return 100.0 *\n  tmp *\n  mat3(0.4124, 0.3576, 0.1805, 0.2126, 0.7152, 0.0722, 0.0193, 0.1192, 0.9505);\n}\n\nvec3 xyz2lab(vec3 c) {\n  vec3 n = c / vec3(95.047, 100, 108.883);\n  vec3 v;\n  v.x = n.x > 0.008856 ? pow(n.x, 1.0 / 3.0) : 7.787 * n.x + 16.0 / 116.0;\n  v.y = n.y > 0.008856 ? pow(n.y, 1.0 / 3.0) : 7.787 * n.y + 16.0 / 116.0;\n  v.z = n.z > 0.008856 ? pow(n.z, 1.0 / 3.0) : 7.787 * n.z + 16.0 / 116.0;\n  return vec3(116.0 * v.y - 16.0, 500.0 * (v.x - v.y), 200.0 * (v.y - v.z));\n}\n\nvec3 rgb2lab(vec3 c) {\n  vec3 lab = xyz2lab(rgb2xyz(c));\n  return vec3(\n    lab.x / 100.0,\n    0.5 + 0.5 * (lab.y / 127.0),\n    0.5 + 0.5 * (lab.z / 127.0)\n  );\n}\n\nbool skin_mask(vec4 color) {\n  vec3 lab = rgb2lab(color.rgb);\n  return lab.g >= uBeautyficationLevel + 0.05 &&\n  lab.b >= uBeautyficationLevel + 0.04 &&\n  lab.r <= 0.98 &&\n  length(lab.gb) <= 0.9;\n}\n\nvoid main() {\n  vec2 iResolution = vec2(float(uWidth), float(uHeight));\n  vec3 c = texture2D(uSampler, vTextureCoord).rgb;\n  float a = texture2D(uSampler, vTextureCoord).a;\n\n  if (a > 0.9 && (uBeautyficationLevel > 0.95 || skin_mask(texture2D(uSampler, vTextureCoord)))) {\n    const int kSize = (MSIZE - 1) / 2;\n    vec3 final_colour = vec3(0.0);\n    float Z = 0.0;\n\n    kernel[0] = kernel[14] = 0.031225216;\n    kernel[1] = kernel[13] = 0.033322271;\n    kernel[2] = kernel[12] = 0.035206333;\n    kernel[3] = kernel[11] = 0.036826804;\n    kernel[4] = kernel[10] = 0.038138565;\n    kernel[5] = kernel[9] = 0.039104044;\n    kernel[6] = kernel[8] = 0.039695028;\n    kernel[7] = 0.039894;\n    float bZ = 0.2506642602897679;\n\n    //create the 1-D kernel\n\n    //   for (int j = 0; j <= kSize; ++j)\n    //   {\n    //     kernel[kSize+j] = kernel[kSize-j] = normpdf(float(j), SIGMA);\n    //   }\n\n    vec3 cc;\n    float factor;\n    //float bZ = 1.0/normpdf(0.0, BSIGMA);\n    //read out the texels\n    for (int i = -kSize; i <= kSize; ++i) {\n      for (int j = -kSize; j <= kSize; ++j) {\n        cc = texture2D(\n          uSampler,\n          vTextureCoord.xy + vec2(float(i), float(j)) / iResolution.xy\n        ).rgb;\n        factor =\n          normpdf3(cc - c, BSIGMA) * bZ * kernel[kSize + j] * kernel[kSize + i];\n        Z += factor;\n        final_colour += factor * cc;\n      }\n    }\n\n    //fragColor = vec4(final_colour / Z, 1.0);\n\n    vec4 origin = texture2D(uSampler, vTextureCoord);\n    vec4 blurred = vec4(final_colour / Z, 1.0);\n    vec4 highpass =\n      vec4(\n        origin.r - blurred.r,\n        origin.g - blurred.g,\n        origin.b - blurred.b,\n        1\n      ) +\n      vec4(0.5, 0.5, 0.5, 0);\n    vec4 highpass_inverted = vec4(\n      1.0 - highpass.r,\n      1.0 - highpass.g,\n      1.0 - highpass.b,\n      1\n    );\n    gl_FragColor = overlay(origin, highpass_inverted);\n\n  } else {\n    gl_FragColor = vec4(c, a);\n\n  }\n}\n",Object.assign({},e)]);}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&II(e,t);}(t,e),r=t,(n=[{key:"setBeautificationLevel",value:function value(e){this.uniforms.uBeautyficationLevel=e;}}])&&wI(r.prototype,n),i&&wI(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(fn);function SI(e){return SI="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},SI(e);}function TI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CI(n.key),n);}}function CI(e){var t=function(e,t){if("object"!=SI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==SI(t)?t:String(t);}function EI(e,t,r){return t=kI(t),function(e,t){if(t&&("object"===SI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,OI()?Reflect.construct(t,r||[],kI(e).constructor):t.apply(e,r));}function OI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(OI=function OI(){return!!e;})();}function kI(e){return kI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},kI(e);}function PI(e,t){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},PI(e,t);}var $I=function(e){function t(e,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(i=EI(this,t,["attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vOriginCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nuniform mat3 uTransformMatrix;\n\nvec4 filterVertexPosition(void ) {\n  vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.0)) + outputFrame.xy;\n\n  return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord(void ) {\n  return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void ) {\n  gl_Position = filterVertexPosition();\n  vTextureCoord = filterTextureCoord();\n\n  vOriginCoord = (uTransformMatrix * vec3(vTextureCoord * inputSize.xy / outputFrame.zw, 1.0)).xy;\n}\n","uniform sampler2D uSampler;\nuniform sampler2D uOriginFrame;\n\nuniform bool useMask;\nuniform float distColor;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vOriginCoord;\n\nvec3 screen(vec3 a, vec3 b) {\n  return 1.0 - (1.0 - a) * (1.0 - b);\n}\nvec3 linearDodge(vec3 a, vec3 b) {\n  return a + b;\n}\n\nvoid main() {\n  float personMask = texture2D(uSampler, vTextureCoord).r;\n\n  personMask = smoothstep(0.0, 1.0, personMask);\n  personMask = smoothstep(0.0, 1.0, personMask);\n  personMask = smoothstep(0.0, 1.0, personMask);\n\n  vec4 background = texture2D(uOriginFrame, vOriginCoord);\n  if (useMask) {\n    gl_FragColor = mix(vec4(0), background, personMask);  \n  } else {\n    gl_FragColor = mix(vec4(0), background, distColor);\n  }\n  //gl_FragColor = background;\n  //gl_FragColor = mix(vec4(0), background, 0.0);\n}\n",Object.assign({},e)])).matrix=new Er(),i.originalFrame=r,i.maskSprite=n,i.setLayout(),i;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PI(e,t);}(t,e),r=t,(n=[{key:"setLayout",value:function value(){var e=this.maskSprite.position.x<0?1-Math.abs(this.maskSprite.position.x)/this.maskSprite.width:(this.originalFrame.width-this.maskSprite.position.x)/this.maskSprite.width;e=Math.min(1,e);var t=this.maskSprite.position.x<0?-this.maskSprite.position.x/this.maskSprite.width:0,r=this.maskSprite.position.y<0?1-Math.abs(this.maskSprite.position.y)/this.maskSprite.height:(this.originalFrame.height-this.maskSprite.position.y)/this.maskSprite.height;r=Math.min(1,r);var n=this.maskSprite.position.y<0?-this.maskSprite.position.y/this.maskSprite.height:0;this.matrix.a=e,this.matrix.d=r,this.matrix.tx=t,this.matrix.ty=n,this.uniforms.uTransformMatrix=this.matrix;}},{key:"setOrigin",value:function value(e){this.uniforms.uOriginFrame=e;}},{key:"setLayoutMode",value:function value(e){switch(e){case"segmentation":this.uniforms.useMask=!0,this.uniforms.distColor=0;break;case"full":this.uniforms.useMask=!1,this.uniforms.distColor=1;break;case"hide":this.uniforms.useMask=!1,this.uniforms.distColor=0;}}},{key:"setIsBoundaryStrong",value:function value(e){this.uniforms.uIsBoundaryStrong=e;}}])&&TI(r.prototype,n),i&&TI(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(fn);function RI(e){return RI="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},RI(e);}function BI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DI(n.key),n);}}function DI(e){var t=function(e,t){if("object"!=RI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=RI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==RI(t)?t:String(t);}function MI(e,t,r){return t=FI(t),function(e,t){if(t&&("object"===RI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,LI()?Reflect.construct(t,r||[],FI(e).constructor):t.apply(e,r));}function LI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(LI=function LI(){return!!e;})();}function FI(e){return FI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},FI(e);}function NI(e,t){return NI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},NI(e,t);}var UI=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=MI(this,t,[void 0,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 pixelSize;\nuniform vec2 quarter;\nuniform vec2 _vrScale;\nuniform vec4 toPosTransform;\nuniform vec4 fromPosTransform;\nvec4 readTex(vec2 uv)\n{\n    return texture2D(uSampler, uv);\n}\nvec2 mapInsideChannel(vec2 pos)\n{\n    vec2 result = mod(pos, quarter) * 4.0;\n    result.y += floor(pos.x / quarter.x);\n    \n    return result;\n}\nvec4 extractChannel(vec4 c0, vec4 c1, vec4 c2, vec4 c3, float yPos)\n{\n    vec4 result = vec4(c0.r, c1.r, c2.r, c3.r);\n    \n    float condition = step(quarter.y, yPos);\n    result = mix(result, vec4(c0.g, c1.g, c2.g, c3.g), condition);\n    condition = step(2.0 * quarter.y, yPos);\n    result = mix(result, vec4(c0.b, c1.b, c2.b, c3.b), condition);\n    \n    \n    return result;\n}\nvec2 toPos(vec2 uv)\n{\n    return uv * toPosTransform.xy + toPosTransform.zw;\n}\nvec2 fromPos(vec2 pos)\n{\n    return ( pos * fromPosTransform.xy ) + fromPosTransform.zw;\n}\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    \n    vec2 pos = toPos(uv);\n    vec2 chPos = mapInsideChannel(pos);\n    uv = fromPos(chPos);\n    \n    vec4 c0 = readTex(uv);\n    uv.x += pixelSize.x; \n    vec4 c1 = readTex(uv);\n    uv.x += pixelSize.x; \n    vec4 c2 = readTex(uv);\n    uv.x += pixelSize.x; \n    vec4 c3 = readTex(uv);\n    gl_FragColor = extractChannel(c0, c1, c2, c3, pos.y);\n}"])).setSize(e,r),n;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NI(e,t);}(t,e),r=t,(n=[{key:"setSize",value:function value(e,t){var r=e,n=t;t>128&&(n=256),e<256&&(r=256),this.virtualSize=new xr(e,t),this.realSize=new xr(r,n),this._vrScale=new xr(this.realSize.x/this.virtualSize.x,this.realSize.y/this.virtualSize.y),this.pixelSize=new xr(1/this.realSize.x,1/this.realSize.y),this.quarter=new xr(this.virtualSize.x/4,this.virtualSize.y/4),this.toPosTransform=[1/((this.virtualSize.x-1)*this.pixelSize.x)*(this.virtualSize.x-1),1/((this.virtualSize.y-1)*this.pixelSize.y)*(this.virtualSize.y-1),-.5*this.pixelSize.x*(1/((this.virtualSize.x-1)*this.pixelSize.x)*(this.virtualSize.x-1)),-.5*this.pixelSize.y*(1/((this.virtualSize.y-1)*this.pixelSize.y)*(this.virtualSize.y-1))],this.fromPosTransform=[(this.virtualSize.x-1)*this.pixelSize.x/(this.virtualSize.x-1),(this.virtualSize.y-1)*this.pixelSize.y/(this.virtualSize.y-1),.5*this.pixelSize.x,.5*this.pixelSize.y],this.uniforms.pixelSize=this.pixelSize,this.uniforms.quarter=this.quarter,this.uniforms.toPosTransform=this.toPosTransform,this.uniforms.fromPosTransform=this.fromPosTransform;}}])&&BI(r.prototype,n),i&&BI(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(fn);function jI(e){return jI="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},jI(e);}function GI(e){return function(e){if(Array.isArray(e))return zI(e);}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e);}(e)||function(e,t){if(!e)return;if("string"==typeof e)return zI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zI(e,t);}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function zI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n;}function VI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HI(n.key),n);}}function HI(e){var t=function(e,t){if("object"!=jI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==jI(t)?t:String(t);}function WI(e,t,r){return t=KI(t),function(e,t){if(t&&("object"===jI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,YI()?Reflect.construct(t,r||[],KI(e).constructor):t.apply(e,r));}function YI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(YI=function YI(){return!!e;})();}function KI(e){return KI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},KI(e);}function XI(e,t){return XI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},XI(e,t);}var ZI=function(e){function t(e){var r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=WI(this,t,[void 0,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uOffset;\n\nuniform int uHasMask;\nuniform sampler2D uMask;\n\nuniform int uClamped;\nuniform vec4 filterClamp;\n\nuniform mat3 uTransformMatrix;\n\nbool checkCoord(vec2 coord) {\n  vec4 color = texture2D(uMask, coord);\n  return color.r < 0.5;\n}\n\nvoid main(void ) {\n  vec4 color = vec4(0.0);\n  bool hasMask = uHasMask > 0;\n  bool isClamped = uClamped > 0;\n  bool isInside = hasMask && !checkCoord(vTextureCoord);\n\n  vec2 pickCoord[4];\n  pickCoord[0] = vTextureCoord + vec2(-1.0, +1.0) * uOffset;\n  pickCoord[1] = vTextureCoord + vec2(+1.0, +1.0) * uOffset;\n  pickCoord[2] = vTextureCoord + vec2(+1.0, -1.0) * uOffset;\n  pickCoord[3] = vTextureCoord + vec2(-1.0, -1.0) * uOffset;\n\n  for (int i = 0; i < 4; i += 1) {\n    vec2 coord = pickCoord[i];\n\n    //. Get original point if needed\n    if (hasMask && !isInside && !checkCoord(pickCoord[i])) {\n      coord = vTextureCoord;\n    }\n\n    //. Check clamped mode\n    color += isClamped\n      ? texture2D(uSampler, clamp(coord, filterClamp.xy, filterClamp.zw))\n      : texture2D(uSampler, coord);\n  }\n\n  gl_FragColor = color * 0.25;\n}\n"]))._kernels=[],r._blur=4,r._quality=3,r.isMaskEnabled=!0,r.uniforms.uOffset=new Float32Array(2),r.uniforms.uClamped=e.clamp?1:0,r.uniforms.uHasMask=0,r.uniforms.uMask=Sn.WHITE,r.uniforms.uTransformMatrix=new Er(),r._pixelSize=new xr(),r.pixelSize=1,r._clamp=!!e.clamp,Array.isArray(e.blur)?r.kernels=e.blur:(r._blur=null!==(n=e.blur)&&void 0!==n?n:4,r.quality=null!==(i=e.quality)&&void 0!==i?i:3),r;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XI(e,t);}(t,e),r=t,n=[{key:"apply",value:function value(e,t,r,n){var i,o=this._pixelSize.x/t._frame.width,a=this._pixelSize.y/t._frame.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,t,r,n);else{for(var s,u=e.getFilterTexture(),l=t,h=u,c=this._quality-1,d=0;d<c;d++)i=this._kernels[d]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,l,h,1),s=l,l=h,h=s;i=this._kernels[c]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,l,r,n),e.returnFilterTexture(u);}}},{key:"_updatePadding",value:function value(){this.padding=Math.ceil(this._kernels.reduce(function(e,t){return e+t+.5;},0));}},{key:"_generateKernels",value:function value(){var e=this._blur,t=this._quality,r=[e];if(e>0)for(var n=e,i=e/t,o=1;o<t;o++)n-=i,r.push(n);this._kernels=r,this._updatePadding();}},{key:"kernels",get:function get(){return this._kernels;},set:function set(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,GI(e))):(this._kernels=[0],this._quality=1);}},{key:"clamp",get:function get(){return this._clamp;}},{key:"pixelSize",get:function get(){return this._pixelSize;},set:function set(e){"number"==typeof e?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof xr?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1);}},{key:"quality",get:function get(){return this._quality;},set:function set(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels();}},{key:"blur",get:function get(){return this._blur;},set:function set(e){this._blur=e,this._generateKernels();}},{key:"enableMask",value:function value(){this.isMaskEnabled=!0;}},{key:"disableMask",value:function value(){this.isMaskEnabled=!1;}},{key:"setMask",value:function value(e){this.uniforms.uMask=e,this.uniforms.uHasMask=this.isMaskEnabled?1:0;}}],n&&VI(r.prototype,n),i&&VI(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(fn);function qI(e){return qI="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},qI(e);}function JI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QI(n.key),n);}}function QI(e){var t=function(e,t){if("object"!=qI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==qI(t)?t:String(t);}function eA(e,t,r){return t=rA(t),function(e,t){if(t&&("object"===qI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,tA()?Reflect.construct(t,r||[],rA(e).constructor):t.apply(e,r));}function tA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(tA=function tA(){return!!e;})();}function rA(e){return rA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},rA(e);}function nA(e,t){return nA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},nA(e,t);}var iA=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),eA(this,t);}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nA(e,t);}(t,e),r=t,(n=[{key:"set",value:function value(e,t,r){this.preset=e,this.width=t,this.height=r,this.size=4*this.width*this.height,this.emit("update",this);}}])&&JI(r.prototype,n),i&&JI(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(n),oA=__webpack_require__(4300),aA=__webpack_require__.n(oA),sA=__webpack_require__(8684),uA=__webpack_require__.n(sA);function lA(e,t,r){return t=cA(t),function(e,t){if(t&&("object"===pA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,hA()?Reflect.construct(t,r||[],cA(e).constructor):t.apply(e,r));}function hA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(hA=function hA(){return!!e;})();}function cA(e){return cA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},cA(e);}function dA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fA(e,t);}function fA(e,t){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},fA(e,t);}function pA(e){return pA="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},pA(e);}function yA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function gA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wA(n.key),n);}}function mA(e,t,r){return t&&gA(e.prototype,t),r&&gA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;}function wA(e){var t=function(e,t){if("object"!=pA(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==pA(t)?t:String(t);}var bA=function(){function e(t){yA(this,e),this.isLandscape=!0,this.sdkOptions=t,this.landscapeSize={height:144,width:256},this.portraitSize={height:192,width:192},this.updateOrientation();}return mA(e,[{key:"isOrientationChanged",value:function value(){return this.isLandscape!=this.sdkOptions.isLandscape();}},{key:"updateOrientation",value:function value(){this.isLandscape=this.sdkOptions.isLandscape();}},{key:"getModelSize",value:function value(){return this.isLandscape?this.landscapeSize:this.portraitSize;}},{key:"getURL",value:function value(){var e=this.isLandscape?"PRESETS":"PRESETS_PORTRAIT",t=fx.M[e][this.preset];return t?fx.M.getPresetUrl(t):fx.M.MODEL_URL;}}]),e;}(),vA=function(e){function t(e){var r;return yA(this,t),(r=lA(this,t,[e])).preset="quality",r;}return dA(t,e),mA(t);}(bA),xA=function(e){function t(e){var r;return yA(this,t),(r=lA(this,t,[e])).preset="balanced",r.landscapeSize={height:128,width:256},r;}return dA(t,e),mA(t);}(bA),_A=function(e){function t(e){var r;return yA(this,t),(r=lA(this,t,[e])).preset="speed",r.landscapeSize={height:160,width:256},r;}return dA(t,e),mA(t);}(bA),IA=function(e){function t(e){var r;return yA(this,t),(r=lA(this,t,[e])).preset="lightning",r;}return dA(t,e),mA(t);}(bA),AA=function(){function e(t){yA(this,e),this.modelMap=new Map(),this.modelMap.set("balanced",new xA(t)),this.modelMap.set("quality",new vA(t)),this.modelMap.set("speed",new _A(t)),this.modelMap.set("lightning",new IA(t));}return mA(e,[{key:"isOrientationChanged",value:function value(e){var t;return null===(t=this.getModel(e))||void 0===t?void 0:t.isOrientationChanged();}},{key:"updateOrientation",value:function value(){return this.modelMap.forEach(function(e,t){e.updateOrientation();});}},{key:"getModelSize",value:function value(e){var t,r;return null!==(r=null===(t=this.getModel(e))||void 0===t?void 0:t.getModelSize())&&void 0!==r?r:{height:144,width:256};}},{key:"getModelURL",value:function value(e){var t,r;return null!==(r=null===(t=this.getModel(e))||void 0===t?void 0:t.getURL())&&void 0!==r?r:"";}},{key:"getModel",value:function value(e){return this.modelMap.has(e)?this.modelMap.get(e):(r.ie.notify({emitter:r.E7.PRESET_INIT,message:"Can't find preset ".concat(e)}),null);}}]),e;}();function SA(e){return SA="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},SA(e);}function TA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CA(n.key),n);}}function CA(e){var t=function(e,t){if("object"!=SA(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==SA(t)?t:String(t);}function EA(e,t,r){return t=kA(t),function(e,t){if(t&&("object"===SA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return PA(e);}(e,OA()?Reflect.construct(t,r||[],kA(e).constructor):t.apply(e,r));}function OA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(OA=function OA(){return!!e;})();}function kA(e){return kA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},kA(e);}function PA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function $A(e,t){return $A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},$A(e,t);}var RA,BA=function(e){function t(e,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(i=EA(this,t)).filters={blur:{}},i.sdkOptions=e,i.type="origin",i.options=Object.assign({},t.defaultOptions,n),i.frame=r,i.filters.blur=new ZI({blur:5,quality:5}),i.backgroundTrack=new b(),i.backgroundTrack.on("ended",i.clearBackground,PA(i)),i.backgroundTrack.on("update",i.calculateBackgroundSize,PA(i)),i.globalWidth=e.width,i.globalHeight=e.height,i.sdkOptions.on("update",i.onOptionsUpdate,PA(i)),i;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$A(e,t);}(t,e),r=t,n=[{key:"destroy",value:function value(){this.backgroundTrack.off("ended",this.clearBackground,this),this.backgroundTrack.off("update",this.calculateBackgroundSize,this),this.sdkOptions.off("update",this.onOptionsUpdate,this);}},{key:"onOptionsUpdate",value:function value(e){this.globalWidth=e.width,this.globalHeight=e.height,this.frame.resize(this.globalWidth,this.globalHeight),this.calculateBackgroundSize();}},{key:"render",value:function value(){this.backgroundTrack.update(),document.hidden&&this.frame.frame.texture.baseTexture.resource&&this.frame.frame.texture.baseTexture.resource.source instanceof HTMLVideoElement&&this.frame.frame.texture.baseTexture.update();}},{key:"set",value:function value(e){this.backgroundTrack.stop(),this.applyBackground(e);}},{key:"applyBlur",value:function value(e){this.frame.frame.filters=[],this.filters.blur.disableMask(),e&&(this.filters.blur.blur=+e,this.frame.frame.filters.push(this.filters.blur),"origin"==this.frame.active&&this.filters.blur.enableMask());}},{key:"setMask",value:function value(e){this.filters.blur.blur&&this.filters.blur.setMask(e);}},{key:"applyBackground",value:function value(e){var t,r=this;if(this.frame.frame.tint="color"==e?this.options.color:16777215,this.options.source!=e){if(this.options.source=e,null==e)return this.type="origin",void(this.frame.active!==this.type&&(this.frame.activateTexture(this.type),this.calculateBackgroundSize(),(null===(t=this.frame.frame.filters)||void 0===t?void 0:t.length)&&"origin"==this.frame.active?this.filters.blur.enableMask():this.filters.blur.disableMask()));var n,i,o;switch(e.constructor){case String:"color"==e?(this.type="color",n=Sn.WHITE):(n=e,this.type="url");break;case MediaStream:this.backgroundTrack.set(e),(i=document.createElement("video")).srcObject=e,n=i,this.type="media_stream";break;case CanvasCaptureMediaStreamTrack:case BrowserCaptureMediaStreamTrack:case MediaStreamTrack:o=new MediaStream([e]),this.backgroundTrack.set(o),(i=document.createElement("video")).srcObject=o,n=i,this.type="media_stream_track";break;case HTMLVideoElement:n=e,this.type="video";}if(n&&n instanceof Sn)this.texture=n;else{if(e.constructor==String)return void Sn.fromURL(n).then(function(e){r.texture=e,r.onBackgroundLoaded();});this.texture=Sn.from(n);}this.texture.baseTexture.valid?this.onBackgroundLoaded():this.texture.baseTexture.once("loaded",function(){return r.onBackgroundLoaded();});}}},{key:"onBackgroundLoaded",value:function value(){this.texture.baseTexture&&(this.frame.addTexture("swap",this.texture),this.switchBackground(),this.calculateBackgroundSize(),this.loopAndRestart());}},{key:"loopAndRestart",value:function value(){this.frame.frame.texture.baseTexture.resource.source instanceof HTMLVideoElement&&(this.frame.frame.texture.baseTexture.resource.source.loop=!0,this.frame.frame.texture.baseTexture.resource.source.currentTime=0,this.frame.frame.texture.baseTexture.resource.source.muted=!0);}},{key:"setColor",value:function value(e){this.options.color=e,this.frame.frame.tint=this.options.color;}},{key:"switchBackground",value:function value(){var e;this.frame.activateTexture("swap"),"color"==this.type&&(this.frame.frame.tint=this.options.color),(null===(e=this.frame.frame.filters)||void 0===e?void 0:e.length)&&"origin"==this.frame.active?this.filters.blur.enableMask():this.filters.blur.disableMask(),this.emit("update",this);}},{key:"clearBackground",value:function value(){this.backgroundTrack.stop(),this.applyBackground(null),this.emit("clear",this);}},{key:"updateBackgroundSize",value:function value(e,t,r,n){this.frame.frame.width=r,this.frame.frame.height=n,this.frame.frame.x=e,this.frame.frame.y=t;}},{key:"setFitMode",value:function value(e){this.options.fit_mode=e,this.calculateBackgroundSize();}},{key:"calculateBackgroundSize",value:function value(){var e=this.globalWidth,t=this.globalHeight;if("color"!=this.type&&"origin"!=this.type){if(!(this.frame.frame.texture.baseTexture.width<20)){var r=this.frame.frame.texture.baseTexture.width/this.frame.frame.texture.baseTexture.height;"fill"==this.options.fit_mode?e/r>=t?this.updateBackgroundSize(0,-Math.abs(t-e/r)/2,e,e/r):this.updateBackgroundSize(-Math.abs(e-t*r)/2,0,t*r,t):e/r<=t?this.updateBackgroundSize(0,Math.abs(t-e/r)/2,e,e/r):this.updateBackgroundSize(Math.abs(e-t*r)/2,0,t*r,t);}}else this.updateBackgroundSize(0,0,e,t);}}],n&&TA(r.prototype,n),i&&TA(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(n);function DA(e){return DA="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},DA(e);}function MA(){MA=function MA(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==DA(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(DA(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function LA(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function FA(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){LA(o,n,i,a,s,"next",e);}function s(e){LA(o,n,i,a,s,"throw",e);}a(void 0);});};}function NA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UA(n.key),n);}}function UA(e){var t=function(e,t){if("object"!=DA(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==DA(t)?t:String(t);}function jA(e,t,r){return t=zA(t),function(e,t){if(t&&("object"===DA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VA(e);}(e,GA()?Reflect.construct(t,r||[],zA(e).constructor):t.apply(e,r));}function GA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(GA=function GA(){return!!e;})();}function zA(e){return zA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},zA(e);}function VA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function HA(e,t){return HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},HA(e,t);}BA.defaultOptions={source:null,fit_mode:"fill",color:16777215},function(e){e.Segmentation="segmentation",e.Full="full",e.Hide="hide";}(RA||(RA={}));var WA=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=jA(this,t,[e])).pixels=[],n.filters={blurMask:{},show:{},beautification:{},nchw:{}},n.skip_frames_counter=0,n.customLayoutOptions={width:1280,height:720,xOffset:0,yOffset:0},n.customLayoutOptions.width=e.width,n.customLayoutOptions.height=e.height,n.customer_id=r,n.presetManager=new AA(n.sdkOptions),n.inferenceTimer=new S(),n.drawTimer=new S(),n.settings={boundary_level:0,boundary_mode:"strong",beautification:!1,beautification_level:.48,blur:0,layout:"center",preset:fx.M.PRESET,skip_frames:!1,layout_mode:RA.Segmentation},n.model=new iA(),n.model.on("update",n.updateModelSize,VA(n)),n.is_running=!1,n.isNewPreset=!1,n.enable(),n;}var n,i,o,a,s,u,l,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HA(e,t);}(t,e),n=t,i=[{key:"onOptionsUpdate",value:function value(){this.original.resize(this.sdkOptions.width,this.sdkOptions.height),this.mask.resize(this.sdkOptions.width,this.sdkOptions.height),this.applyLayout();}},{key:"clearBuffers",value:function value(){this.pixels=[];}},{key:"nextFrame",value:function value(e){if(this.isActive()&&!(this.pixels.length>1)){if(this.small.addTexture("frame",e.texture),this.small.activateTexture("frame"),this.resources.transform){var t=this.resources.transform.xOffset,r=this.resources.transform.yOffset,n=Math.abs(this.sdkOptions.width*this.resources.transform.scaleValue),i=Math.abs(this.sdkOptions.height*this.resources.transform.scaleValue);this.small.frame.texture.trim=new Ir(t,r,n,i);}this.small.frame.filters=[this.filters.nchw],this.resources.renderer.renderTo(this.small.frame,this.small.getBuffer("model")),this.small.frame.filters=[],this.small.frame.texture.trim=new Ir(0,0,this.sdkOptions.width,this.sdkOptions.height),this.small.activateTexture("origin");var o=this.small.getBuffer("model");this.pixels.push(this.resources.renderer.pixelsAsync(o));}}},{key:"init",value:(h=FA(MA().mark(function e(t){var r=this;return MA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.disable(),this.inference=t,this.inference.setPresetManager(this.presetManager),this.inference.setPreset(this.settings.preset),e.next=6,this.setPreset(this.settings.preset);case 6:return e.abrupt("return",this.inference.init(this.customer_id,"segmentation").then(function(){r.enable();}));case 7:case"end":return e.stop();}},e,this);})),function(e){return h.apply(this,arguments);})},{key:"setPreset",value:(l=FA(MA().mark(function e(t){var r,n,i;return MA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.model.preset!=t||this.presetManager.isOrientationChanged(this.model.preset)){e.next=2;break;}return e.abrupt("return");case 2:if(!this.onProcessPromise||!this.onProcessPromise.isPending()){e.next=5;break;}return e.next=5,this.onProcessPromise.promise;case 5:this.isNewPreset=!0,this.settings.preset=t,this.presetManager.updateOrientation(),r=this.presetManager.getModelSize(t),n=r.width,i=r.height,this.model.set(t,n,i);case 10:case"end":return e.stop();}},e,this);})),function(e){return l.apply(this,arguments);})},{key:"updateModelSize",value:(u=FA(MA().mark(function e(){var t,r;return MA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.buffer_pixels=new Uint8Array(this.model.size),this.buffer_mask=aA()(new Float32Array(this.model.size).fill(255),[1,this.model.height,this.model.width,4]),this.model.previous=aA()(new Float32Array(this.model.size),[1,1,this.model.height,this.model.width]),null===(t=this.small)||void 0===t||t.resize(this.model.width,this.model.height),null===(r=this.mask)||void 0===r||r.resize(this.model.width,this.model.height),this.filters.nchw=new UI(this.model.width,this.model.height),this.filters.nchw.setSize(this.model.width,this.model.height),this.mask&&this.applyLayout();case 8:case"end":return e.stop();}},e,this);})),function(){return u.apply(this,arguments);})},{key:"prepare",value:function value(){var e=this.model.width,t=this.model.height;this.original=new Zl(this.resources.texture,{width:this.sdkOptions.width,height:this.sdkOptions.height}),this.background=new BA(this.sdkOptions,new Zl(this.resources.texture,{width:this.sdkOptions.width,height:this.sdkOptions.height})),this.small=new Zl(this.resources.texture,{width:e,height:t}),this.small.addBuffer("model"),this.small.addBuffer("mask"),this.mask=new Zl(this.small.getBuffer("mask"),{width:this.sdkOptions.width,height:this.sdkOptions.height}),this.buffer_pixels=new Uint8Array(4*e*t),this.buffer_mask=aA()(new Float32Array(4*e*t).fill(255),[1,t,e,4]),this.prepareFilters(),this.applyBlur(),this.updateModelSize(),this.sdkOptions.on("update",this.onOptionsUpdate,this);}},{key:"prepareFilters",value:function value(){var e={uIsBoundaryStrong:"strong"===this.settings.boundary_mode,uOriginFrame:this.original.frame.texture,useMask:!0,distColor:1};this.filters.blurMask=new ZI({blur:.1,quality:4,clamp:!0}),this.filters.show=new $I(e,this.original.frame,this.mask.frame),this.filters.nchw=new UI(this.model.width,this.model.height),this.filters.beautification=new AI({uBeautificationLevel:this.settings.beautification_level,uWidth:this.mask.frame.width,uHeight:this.mask.frame.height}),this.mask.frame.filters=[this.filters.show];}},{key:"clearBackground",value:function value(){this.background.clearBackground();}},{key:"process",value:(s=FA(MA().mark(function e(){var t;return MA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break;}return e.abrupt("return");case 2:if(!this.onProcessPromise||!this.onProcessPromise.isPending()){e.next=5;break;}return e.next=5,this.onProcessPromise.promise;case 5:if(this.onProcessPromise=new eh(),this.drawTimer.start(),this.inference&&this.inference.isReady()){e.next=9;break;}return e.abrupt("return");case 9:if(e.prev=9,!this.shouldSegmentationRun()){e.next=13;break;}return e.next=13,this.prepareSegmentationMask();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](9),r.ie.notify({message:null!==(t="Prepare segmentation mask. "+e.t0.message)&&void 0!==t?t:e.t0,emitter:r.E7.EFFECT_VIRTUAL_BACKGROUND,cause:e.t0}),this.disable();case 19:this.skip_frames_counter=this.skip_frames_counter?0:1,this.isActive()?(this.filters.show.setOrigin(this.original.frame.texture),this.resources.renderer.addToEffects(this.background.frame.frame),this.resources.renderer.addToEffects(this.mask.frame),this.resources.renderer.addStatistics(),this.background.render(),this.resources.renderer.render(),this.resources.renderer.removeStatistics(),this.resources.renderer.removeFromEffects(this.mask.frame),this.resources.renderer.removeFromEffects(this.background.frame.frame)):(this.resources.renderer.addToEffects(this.original.frame),this.resources.renderer.addStatistics(),this.resources.renderer.render(),this.resources.renderer.removeStatistics(),this.resources.renderer.removeFromEffects(this.original.frame)),this.drawTimer.finish(),this.resources.renderer.updateStatistics("frame_time",this.drawTimer.getFrameTime()),this.resources.renderer.updateStatistics("inference_time",this.inferenceTimer.getFrameTime()),this.onProcessPromise.resolve();case 25:case"end":return e.stop();}},e,this,[[9,15]]);})),function(){return s.apply(this,arguments);})},{key:"isActive",value:function value(){return null!==this.background.options.source||"center"!==this.settings.layout||!!this.settings.blur||!!this.settings.beautification;}},{key:"shouldSegmentationRun",value:function value(){return(!this.settings.skip_frames||!this.skip_frames_counter)&&this.isActive();}},{key:"setBoundaryMode",value:function value(e){this.settings.boundary_mode=e,this.filters.show.setIsBoundaryStrong("strong"===e);}},{key:"setBoundaryLevel",value:function value(e){r.ie.notify({type:r.cL.INFO,message:"Boundary level was deprecated and will not show any effect.",emitter:r.E7.EFFECT_VIRTUAL_BACKGROUND});}},{key:"setBeautificationLevel",value:function value(e){e=.34+.34*(e=1-Math.min(Math.max(Number(e),0),1)),this.filters.beautification.setBeautificationLevel(e);}},{key:"enableFrameSkipping",value:function value(){this.settings.skip_frames=!0;}},{key:"disableFrameSkipping",value:function value(){this.settings.skip_frames=!1;}},{key:"enableBeautification",value:function value(){this.settings.beautification||(this.mask.frame.filters.push(this.filters.beautification),this.settings.beautification=!0);}},{key:"disableBeautification",value:function value(){this.settings.beautification&&(this.mask.frame.filters.pop(),this.settings.beautification=!1);}},{key:"getPreset",value:function value(){return this.settings.preset;}},{key:"setLayout",value:function value(e){this.settings.layout=e,this.applyLayout();}},{key:"setLayoutMode",value:function value(e){this.settings.layout_mode=e,this.filters.show.setLayoutMode(e);}},{key:"setCustomLayout",value:function value(e){var t=this;Object.keys(e).forEach(function(r){t.customLayoutOptions[r]=e[r];}),this.updateMaskPosition(this.customLayoutOptions.width,this.customLayoutOptions.height,this.customLayoutOptions.xOffset,this.customLayoutOptions.yOffset);}},{key:"applyLayout",value:function value(){switch(this.settings.layout){case"left":this.updateMaskPosition(this.sdkOptions.width,this.sdkOptions.height,-this.sdkOptions.width/4,0);break;case"right":this.updateMaskPosition(this.sdkOptions.width,this.sdkOptions.height,this.sdkOptions.width/4,0);break;case"left-bottom":this.updateMaskPosition(this.sdkOptions.width/2,this.sdkOptions.height/2,0,this.sdkOptions.height/2);break;case"right-bottom":this.updateMaskPosition(this.sdkOptions.width/2,this.sdkOptions.height/2,this.sdkOptions.width/2,this.sdkOptions.height/2);break;case"center":this.updateMaskPosition(this.sdkOptions.width,this.sdkOptions.height,0,0);}}},{key:"updateMaskPosition",value:function value(e,t,r,n){this.mask.frame.width=e,this.mask.frame.height=t,this.mask.frame.position.x=r,this.mask.frame.position.y=n,this.filters.show.setLayout();}},{key:"setBackground",value:function value(e){this.background.set(e);}},{key:"setBackgroundFitMode",value:function value(e){this.background.setFitMode(e);}},{key:"setBackgroundColor",value:function value(e){this.background.setColor(e);}},{key:"setBlur",value:function value(e){this.settings.blur=e,this.applyBlur();}},{key:"clearBlur",value:function value(){this.settings.blur=0,this.applyBlur();}},{key:"applyBlur",value:function value(){this.background.applyBlur(this.settings.blur);}},{key:"prepareSegmentationMask",value:(a=FA(MA().mark(function e(){var t,n,i,o,a,s=this;return MA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.model.width,n=this.model.height,this.pixels.length){e.next=4;break;}return e.abrupt("return");case 4:return e.next=6,this.pixels.pop();case 6:if((null==(i=e.sent)?void 0:i.length)==4*t*n){e.next=9;break;}return e.abrupt("return");case 9:return o=[1,1,n,t],a=aA()(new Float32Array(i),[1,4,n,t]),uA().assign(a.pick(0,3,null,null),this.model.previous.pick(0,0,null,null)),this.inferenceTimer.start(),e.abrupt("return",this.inference.run(a.data,t,n,"segmentation").then(function(e){var r,i,a;if(s.inferenceTimer.finish(),s.isNewPreset)s.isNewPreset=!1;else{var u=null!==(a=null!==(i=null===(r=e.seg)||void 0===r?void 0:r.data)&&void 0!==i?i:e.seg)&&void 0!==a?a:e,l=aA()(u,o);uA().assign(s.model.previous,l),uA().mulseq(l,255),uA().assign(s.buffer_mask.pick(0,null,null,0),l.pick(0,0,null,null));var h=s.resources.renderer.createTextureFromBuffer(new Uint8Array(s.buffer_mask.data),t,n);s.small.addTexture("mask",h,!0),s.small.activateTexture("mask"),s.small.frame.filters=[s.filters.blurMask],s.resources.renderer.renderTo(s.small.frame,s.small.getBuffer("mask")),s.small.frame.filters=[],s.small.activateTexture("origin"),s.background.setMask(s.small.getBuffer("mask"));}})["catch"](function(e){var t;r.ie.notify({message:null!==(t=e.message)&&void 0!==t?t:e,emitter:r.E7.EFFECT_VIRTUAL_BACKGROUND,cause:e});}));case 14:case"end":return e.stop();}},e,this);})),function(){return a.apply(this,arguments);})},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this),this.model.off("update",this.updateModelSize,this),this.background.destroy();}}],i&&NA(n.prototype,i),o&&NA(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(M_);function YA(e){return YA="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},YA(e);}function KA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XA(n.key),n);}}function XA(e){var t=function(e,t){if("object"!=YA(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==YA(t)?t:String(t);}function ZA(e,t,r){return t=JA(t),function(e,t){if(t&&("object"===YA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,qA()?Reflect.construct(t,r||[],JA(e).constructor):t.apply(e,r));}function qA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(qA=function qA(){return!!e;})();}function JA(e){return JA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},JA(e);}function QA(e,t){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},QA(e,t);}var eS=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),ZA(this,t,[void 0,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLL;\nuniform int uEnabled;\n\nvoid main() {\n  vec4 texel = texture2D(uSampler, vTextureCoord);\n\n  if (uEnabled == 0) {\n    gl_FragColor = vec4(texel);\n    return;\n  }\n\n  vec3 curve = texture2D(uLL, vTextureCoord).rgb;\n\n  vec3 x = texel.rgb + curve * (texel.rgb * texel.rgb - texel.rgb);\n\n  x = x - curve * (x * x - x);\n  x = x - curve * (x * x - x);\n  x = x - curve * (x * x - x);\n  x = x - curve * (x * x - x);\n  x = x - curve * (x * x - x);\n  x = x - curve * (x * x - x);\n  x = x - curve * (x * x - x);\n\n  x = clamp(x, 0.0, 1.0);\n\n  gl_FragColor = vec4(x, texel.a);\n}\n",{uLL:Sn.EMPTY,uEnabled:0}]);}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QA(e,t);}(t,e),r=t,(n=[{key:"setLowLightTexture",value:function value(e){this.uniforms.uLL=e,this.uniforms.uEnabled=1;}}])&&KA(r.prototype,n),i&&KA(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(fn);var tS={modelHeight:144,modelWidth:144,power:1};var rS=Symbol("Comlink.proxy"),nS=Symbol("Comlink.endpoint"),iS=Symbol("Comlink.releaseProxy"),oS=Symbol("Comlink.finalizer"),aS=Symbol("Comlink.thrown"),sS=function sS(e){return"object"==_typeof(e)&&null!==e||"function"==typeof e;},uS=new Map([["proxy",{canHandle:function canHandle(e){return sS(e)&&e[rS];},serialize:function serialize(e){var _MessageChannel=new MessageChannel(),t=_MessageChannel.port1,r=_MessageChannel.port2;return lS(e,t),[r,[r]];},deserialize:function deserialize(e){return e.start(),cS(e);}}],["throw",{canHandle:function canHandle(e){return sS(e)&&aS in e;},serialize:function serialize(_ref113){var e=_ref113.value;var t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]];},deserialize:function deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value;}}]]);function lS(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:globalThis;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["*"];t.addEventListener("message",function n(i){if(!i||!i.data)return;if(!function(e,t){var _iterator76=_createForOfIteratorHelper(e),_step76;try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var _r364=_step76.value;if(t===_r364||"*"===_r364)return!0;if(_r364 instanceof RegExp&&_r364.test(t))return!0;}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}return!1;}(r,i.origin))return void console.warn("Invalid origin '".concat(i.origin,"' for comlink proxy"));var _Object$assign4=Object.assign({path:[]},i.data),o=_Object$assign4.id,a=_Object$assign4.type,s=_Object$assign4.path,u=(i.data.argumentList||[]).map(vS);var l;try{var _t394=s.slice(0,-1).reduce(function(e,t){return e[t];},e),_r365=s.reduce(function(e,t){return e[t];},e);switch(a){case"GET":l=_r365;break;case"SET":_t394[s.slice(-1)[0]]=vS(i.data.value),l=!0;break;case"APPLY":l=_r365.apply(_t394,u);break;case"CONSTRUCT":l=function(e){return Object.assign(e,_defineProperty({},rS,!0));}(_construct(_r365,_toConsumableArray(u)));break;case"ENDPOINT":{var _MessageChannel2=new MessageChannel(),_t395=_MessageChannel2.port1,_r366=_MessageChannel2.port2;lS(e,_r366),l=function(e,t){return wS.set(e,t),e;}(_t395,[_t395]);}break;case"RELEASE":l=void 0;break;default:return;}}catch(e){l=_defineProperty({value:e},aS,0);}Promise.resolve(l)["catch"](function(e){return _defineProperty({value:e},aS,0);}).then(function(r){var _bS=bS(r),_bS2=_slicedToArray(_bS,2),i=_bS2[0],s=_bS2[1];t.postMessage(Object.assign(Object.assign({},i),{id:o}),s),"RELEASE"===a&&(t.removeEventListener("message",n),hS(t),oS in e&&"function"==typeof e[oS]&&e[oS]());})["catch"](function(e){var _bS3=bS(_defineProperty({value:new TypeError("Unserializable return value")},aS,0)),_bS4=_slicedToArray(_bS3,2),r=_bS4[0],n=_bS4[1];t.postMessage(Object.assign(Object.assign({},r),{id:o}),n);});}),t.start&&t.start();}function hS(e){(function(e){return"MessagePort"===e.constructor.name;})(e)&&e.close();}function cS(e,t){return gS(e,[],t);}function dS(e){if(e)throw new Error("Proxy has been released and is not useable");}function fS(e){return xS(e,{type:"RELEASE"}).then(function(){hS(e);});}var pS=new WeakMap(),yS="FinalizationRegistry"in globalThis&&new FinalizationRegistry(function(e){var t=(pS.get(e)||0)-1;pS.set(e,t),0===t&&fS(e);});function gS(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};var n=!1;var i=new Proxy(r,{get:function get(r,o){if(dS(n),o===iS)return function(){!function(e){yS&&yS.unregister(e);}(i),fS(e),n=!0;};if("then"===o){if(0===t.length)return{then:function then(){return i;}};var _r367=xS(e,{type:"GET",path:t.map(function(e){return e.toString();})}).then(vS);return _r367.then.bind(_r367);}return gS(e,[].concat(_toConsumableArray(t),[o]));},set:function set(r,i,o){dS(n);var _bS6=bS(o),_bS7=_slicedToArray(_bS6,2),a=_bS7[0],s=_bS7[1];return xS(e,{type:"SET",path:[].concat(_toConsumableArray(t),[i]).map(function(e){return e.toString();}),value:a},s).then(vS);},apply:function apply(r,i,o){dS(n);var a=t[t.length-1];if(a===nS)return xS(e,{type:"ENDPOINT"}).then(vS);if("bind"===a)return gS(e,t.slice(0,-1));var _mS=mS(o),_mS2=_slicedToArray(_mS,2),s=_mS2[0],u=_mS2[1];return xS(e,{type:"APPLY",path:t.map(function(e){return e.toString();}),argumentList:s},u).then(vS);},construct:function construct(r,i){dS(n);var _mS3=mS(i),_mS4=_slicedToArray(_mS3,2),o=_mS4[0],a=_mS4[1];return xS(e,{type:"CONSTRUCT",path:t.map(function(e){return e.toString();}),argumentList:o},a).then(vS);}});return function(e,t){var r=(pS.get(t)||0)+1;pS.set(t,r),yS&&yS.register(e,t,e);}(i,e),i;}function mS(e){var t=e.map(bS);return[t.map(function(e){return e[0];}),(r=t.map(function(e){return e[1];}),Array.prototype.concat.apply([],r))];var r;}var wS=new WeakMap();function bS(e){var _iterator77=_createForOfIteratorHelper(uS),_step77;try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var _step77$value=_slicedToArray(_step77.value,2),_t396=_step77$value[0],r=_step77$value[1];if(r.canHandle(e)){var _r$serialize=r.serialize(e),_r$serialize2=_slicedToArray(_r$serialize,2),n=_r$serialize2[0],i=_r$serialize2[1];return[{type:"HANDLER",name:_t396,value:n},i];}}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}return[{type:"RAW",value:e},wS.get(e)||[]];}function vS(e){switch(e.type){case"HANDLER":return uS.get(e.name).deserialize(e.value);case"RAW":return e.value;}}function xS(e,t,r){return new Promise(function(n){var i=new Array(4).fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16);}).join("-");e.addEventListener("message",function t(r){r.data&&r.data.id&&r.data.id===i&&(e.removeEventListener("message",t),n(r.data));}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),r);});}function _S(e){return _S="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},_S(e);}function IS(){IS=function IS(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==_S(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(_S(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function AS(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function SS(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){AS(o,n,i,a,s,"next",e);}function s(e){AS(o,n,i,a,s,"throw",e);}a(void 0);});};}function TS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CS(n.key),n);}}function CS(e){var t=function(e,t){if("object"!=_S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==_S(t)?t:String(t);}function ES(e,t,r){return t=PS(t),function(e,t){if(t&&("object"===_S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,OS()?Reflect.construct(t,r||[],PS(e).constructor):t.apply(e,r));}function OS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(OS=function OS(){return!!e;})();}function kS(){return kS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PS(e)););return e;}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value;}},kS.apply(this,arguments);}function PS(e){return PS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},PS(e);}function $S(e,t){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},$S(e,t);}var RS=new URL(__webpack_require__(8804),__webpack_require__.b).href,BS=new Worker(RS,{type:"module"}),DS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=ES(this,t,[e])).customer_id=r,n.setConfig(tS),n.worker=cS(BS),n;}var n,i,o,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$S(e,t);}(t,e),n=t,i=[{key:"init",value:(s=SS(IS().mark(function e(t){return IS().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.inference=t,e.next=3,this.inference.init(this.customer_id,"lowlighter");case 3:case"end":return e.stop();}},e,this);})),function(e){return s.apply(this,arguments);})},{key:"prepare",value:function value(){this.filterLowLight=new eS(),this.original=new Zl(this.resources.texture,{width:this.sdkOptions.width,height:this.sdkOptions.height}),this.original.addBuffer("result"),this.original.addBuffer("output"),this.filterLUT=new H_(),this.lut=new Zl(this.resources.texture,{width:this.sdkOptions.width,height:this.sdkOptions.height}),this.lut.addBuffer("result"),this.lut.frame.filters=[this.filterLUT];var e=this.config,t=e.modelHeight,r=e.modelWidth;this.small=new Zl(this.resources.texture,{width:r,height:t}),this.small.addBuffer("model"),this.sdkOptions.on("update",this.onOptionsUpdate,this);}},{key:"onOptionsUpdate",value:function value(){this.original.resize(this.sdkOptions.width,this.sdkOptions.height),this.lut.resize(this.sdkOptions.width,this.sdkOptions.height);}},{key:"process",value:(a=SS(IS().mark(function e(){return IS().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break;}return e.abrupt("return");case 2:this.isOutdatedLUT&&this.updateLUT(),this.resources.renderer.renderTo(this.lut.frame,this.lut.getBuffer("result")),this.resources.texture.update(this.lut.getBuffer("result"),!1);case 5:case"end":return e.stop();}},e,this);})),function(){return a.apply(this,arguments);})},{key:"setConfig",value:function value(e){var t;this.config=Object.assign(null!==(t=this.config)&&void 0!==t?t:{},e),this.setFilterPower(e.power);}},{key:"onSuccess",value:function value(e){var t="function"==typeof e;this.onSuccessFunction=t?e:void 0;}},{key:"enable",value:function value(){kS(PS(t.prototype),"enable",this).call(this),this.isOutdatedLUT=!this.inWork;}},{key:"updateLUT",value:function value(){var e=this;if(!this.inWork){this.inWork=!0;var t=this.config,n=t.modelHeight,i=t.modelWidth;this.resources.renderer.renderTo(this.original.frame,this.original.getBuffer("result")),this.resources.renderer.renderTo(this.small.frame,this.small.getBuffer("model"));var o=this.small.getBuffer("model"),a=this.resources.renderer.pixels(o),s=function(e,t,r){var n=aA()(new Float32Array(e),[1,r,t,4]);n=n.transpose(0,3,1,2);var i=aA()(new Float32Array(r*t*3),[1,3,r,t]);return uA().assign(i.pick(0,0,null,null),n.pick(0,0,null,null)),uA().assign(i.pick(0,1,null,null),n.pick(0,1,null,null)),uA().assign(i.pick(0,2,null,null),n.pick(0,2,null,null)),n=n.transpose(2,0,1),uA().mulseq(i,1/255),i;}(new Uint8ClampedArray(a),i,n);this.inference.run(s.data,i,n,"lowlighter").then(function(t){e.original.activateBuffer("result"),e.original.frame.filters=[e.filterLowLight],e.filterLowLight.setLowLightTexture(t.coefs),e.resources.renderer.renderTo(e.original.frame,e.original.getBuffer("output")),e.original.activateTexture("origin"),e.original.frame.filters=[];var r=e.resources.renderer.pixels(e.original.getBuffer("output")),n=e.resources.renderer.pixels(e.original.getBuffer("result"));return e.worker.getLUTTexture(new Uint8ClampedArray(n),new Uint8ClampedArray(r));}).then(function(t){e.applyLowlightLUT(t),e.emitSuccess();})["catch"](function(e){var t;r.ie.notify({message:null!==(t=e.message)&&void 0!==t?t:e,emitter:r.E7.EFFECT_LOW_LIGHT,cause:e});})["finally"](function(){e.inWork=!1,e.isOutdatedLUT=!1;});}}},{key:"applyLowlightLUT",value:function value(e){var t=this.getLutTextureData(e).LUTTexture;this.filterLUT.setLUT({texture:t});}},{key:"getLutTextureData",value:function value(e){var t=Math.sqrt(e.length/4);return{LUTTexture:Sn.fromBuffer(new Uint8Array(e),t,t,{scaleMode:1}),LUTSize:t};}},{key:"setFilterPower",value:function value(e){var t;void 0!==e&&(this.config.power=e,null===(t=this.filterLUT)||void 0===t||t.setFilterPower(e));}},{key:"emitSuccess",value:function value(){"function"==typeof this.onSuccessFunction&&this.onSuccessFunction();}},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this);}}],i&&TS(n.prototype,i),o&&TS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(M_);var MS={modelHeight:256,modelWidth:256,modelPediod_ms:1e3,filterPart:100,cc_power:100};function LS(e,t,r){var n=aA()(new Float32Array(e),[1,r,t,4]);n=n.transpose(0,3,1,2);var i=aA()(new Float32Array(r*t*3),[1,3,r,t]);return uA().assign(i.pick(0,0,null,null),n.pick(0,0,null,null)),uA().assign(i.pick(0,1,null,null),n.pick(0,1,null,null)),uA().assign(i.pick(0,2,null,null),n.pick(0,2,null,null)),i;}function FS(e){var t=e.tensor,r=33,n=35937,i=aA()(t.output.data,[3,r,r,r]).data,o=new Uint8ClampedArray(4*Math.pow(198,2)),a={value:0,isNil:function isNil(){return 0===a.value;},setDefault:function setDefault(){return a.value=1089;},dec:function dec(){return a.value--;}};a.setDefault();for(var s=0,u=0,l=function l(e,t){return 4*(r*(6*u+s)+t%r)+e;},h=function h(e){[e,n+e,71874+e].forEach(function(t,r){o[l(r,e)]=255*i[t];}),o[l(3,e)]=255,a.dec(),e%r==32&&u++,a.isNil()&&(a.setDefault(),++s>=6?s=0:u-=r);},c=0;c<n;c++)h(c);return o;}function NS(e){return NS="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},NS(e);}function US(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jS(n.key),n);}}function jS(e){var t=function(e,t){if("object"!=NS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=NS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==NS(t)?t:String(t);}function GS(e,t,r){return t=VS(t),function(e,t){if(t&&("object"===NS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,zS()?Reflect.construct(t,r||[],VS(e).constructor):t.apply(e,r));}function zS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(zS=function zS(){return!!e;})();}function VS(e){return VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},VS(e);}function HS(e,t){return HS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},HS(e,t);}var WS=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(e=GS(this,t,[void 0,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLUT;\nuniform float uFilterPart;\nuniform float uFilterPower;\n\nfloat clampedCoord(float coord) {\n  float min = 0.5 / 198.0;\n  float max = 1.0 - min;\n  return clamp(coord, min, max);\n}\n\nfloat clampColor(float color) {\n  float min = 1.0 / 256.0;\n  float max = 1.0 / 6.0 - min;\n  return clamp(color, min, max);\n}\n\nvec4 newColor(float rectNum, vec2 coord) {\n  vec2 bCoord = vec2(mod(rectNum, 6.0) / 6.0, floor(rectNum / 6.0) / 6.0);\n  vec2 lutTextureCoord = vec2(clampedCoord(coord.r + bCoord.r), clampedCoord(coord.g + bCoord.g));\n  return texture2D(uLUT, lutTextureCoord);\n}\n\nvoid main() {\n  vec4 color = texture2D(uSampler, vTextureCoord);\n\n  if (vTextureCoord.x > uFilterPart) {\n    gl_FragColor = color;\n    return;\n  }\n\n  vec2 rgCoord = vec2(clampColor(color.r / 6.0), clampColor(color.g / 6.0));\n\n  //. Count number of the LUT-cell\n  float rectNumReal = color.b * 32.0;\n  float rectNumMin = floor(rectNumReal);\n  float rectNumMax = ceil(rectNumReal);\n\n  vec4 colorLut1 = newColor(rectNumMin, rgCoord);\n  vec4 colorLut2 = newColor(rectNumMax, rgCoord);\n\n  vec3 interpolatedColor = mix(colorLut1.rgb, colorLut2.rgb, rectNumReal - rectNumMin);\n\n  //. Add filter power\n  vec3 resultColor = mix(color.rgb, interpolatedColor.rgb, uFilterPower);\n\n  gl_FragColor = vec4(resultColor.rgb, color.a);\n}\n",{uFilterPart:1,uFilterPower:1}])).lutTextureHeight=198,e.lutTextureWidth=198,e;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HS(e,t);}(t,e),r=t,n=[{key:"setLUT",value:function value(e){var t;null===(t=this.lutTexture)||void 0===t||t.destroy(!0),this.lutTexture=Sn.fromBuffer(e,this.lutTextureWidth,this.lutTextureHeight,{scaleMode:1}),this.uniforms.uLUT=this.lutTexture;}},{key:"setFilterPart",value:function value(e){e=Math.min(1,Math.max(0,e)),this.uniforms.uFilterPart=e;}},{key:"setFilterPower",value:function value(e){e=Math.min(1,Math.max(0,e)),this.uniforms.uFilterPower=e;}}],n&&US(r.prototype,n),i&&US(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(fn);function YS(e){return YS="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},YS(e);}function KS(){KS=function KS(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==YS(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(YS(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function XS(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function ZS(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){XS(o,n,i,a,s,"next",e);}function s(e){XS(o,n,i,a,s,"throw",e);}a(void 0);});};}function qS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JS(n.key),n);}}function JS(e){var t=function(e,t){if("object"!=YS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==YS(t)?t:String(t);}function QS(e,t,r){return t=tT(t),function(e,t){if(t&&("object"===YS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,eT()?Reflect.construct(t,r||[],tT(e).constructor):t.apply(e,r));}function eT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(eT=function eT(){return!!e;})();}function tT(e){return tT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},tT(e);}function rT(e,t){return rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},rT(e,t);}var nT=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=QS(this,t,[e])).hasLUT=!1,n.inWork=!1,n.customer_id=r,n.config=Object.assign({},MS),n;}var n,i,o,a,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rT(e,t);}(t,e),n=t,i=[{key:"init",value:(u=ZS(KS().mark(function e(t){return KS().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.inference=t,e.next=3,this.inference.init(this.customer_id,"colorcorrector");case 3:case"end":return e.stop();}},e,this);})),function(e){return u.apply(this,arguments);})},{key:"prepare",value:function value(){var e=this.config,t=e.modelHeight,r=e.modelWidth,n=this.resources.texture;this.original=new Zl(n,{width:this.sdkOptions.width,height:this.sdkOptions.height}),this.original.addBuffer("result"),this.small=new Zl(n,{width:r,height:t}),this.small.addBuffer("model"),this.ccFilter=new WS(),this.original.frame.filters=[this.ccFilter],this.sdkOptions.on("update",this.onOptionsUpdate,this);}},{key:"onOptionsUpdate",value:function value(){this.original.resize(this.sdkOptions.width,this.sdkOptions.height);}},{key:"process",value:(s=ZS(KS().mark(function e(){return KS().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break;}return e.abrupt("return");case 2:this.resources.renderer.renderTo(this.small.frame,this.small.getBuffer("model")),this.modelProcess(),this.hasLUT&&(this.resources.renderer.renderTo(this.original.frame,this.original.getBuffer("result")),this.resources.texture.update(this.original.getBuffer("result"),!1));case 5:case"end":return e.stop();}},e,this);})),function(){return s.apply(this,arguments);})},{key:"modelProcess",value:(a=ZS(KS().mark(function e(){var t,n,i,o,a,s,u=this;return KS().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inWork){e.next=2;break;}return e.abrupt("return");case 2:if(this.checkTimer()){e.next=4;break;}return e.abrupt("return");case 4:return this.inWork=!0,t=this.config,n=t.modelHeight,i=t.modelWidth,o=this.small.getBuffer("model"),e.next=9,this.resources.renderer.pixelsAsync(o);case 9:return a=e.sent,s=LS(new Uint8ClampedArray(a),i,n),e.abrupt("return",this.inference.run(s.data,i,n,"colorcorrector").then(function(e){var t=FS({tensor:e});u.ccFilter.setLUT(t),u.hasLUT=!0;})["catch"](function(e){var t;r.ie.notify({message:null!==(t=e.message)&&void 0!==t?t:e,emitter:r.E7.EFFECT_COLOR_CORRECTION,cause:e});})["finally"](function(){return u.inWork=!1;}));case 12:case"end":return e.stop();}},e,this);})),function(){return a.apply(this,arguments);})},{key:"setConfig",value:function value(e,t){this.config[e]=t,"filterPart"===e&&this.ccFilter.setFilterPart(t),"cc_power"===e&&this.ccFilter.setFilterPower(t);}},{key:"checkTimer",value:function value(){return this.modelTimer?(performance.now()-this.modelTimer<this.config.modelPediod_ms||(this.modelTimer=0),!1):(this.modelTimer=performance.now(),!0);}},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this);}}],i&&qS(n.prototype,i),o&&qS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(M_);var iT={smoothPower:20,sensitivityValue:.15,faceAreaProportion:.1,modelHeight:240,modelWidth:320,faceDetectorAccuracy:.75,waiterSeconds:1,isFaceSquareDrawingEnabled:!1,isPreFaceSquareDrawingEnabled:!1,faceDetectorPediod_ms:250};function oT(e){return oT="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},oT(e);}function aT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sT(n.key),n);}}function sT(e){var t=function(e,t){if("object"!=oT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==oT(t)?t:String(t);}var uT=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.setCoord(t),this.id=null!=r?r:Math.round(100*Math.random());}var t,r,n;return t=e,r=[{key:"setID",value:function value(e){this.id=e;}},{key:"getID",value:function value(){return this.id;}},{key:"checkSame",value:function value(e){if(void 0===this.x1)return!1;if(!(e.x1>this.x1&&e.x1<this.x2||e.x2>this.x1&&e.x2<this.x2||this.x1>e.x1&&this.x1<e.x2||this.x2>e.x1&&this.x2<e.x2))return!1;if(!(e.y1>this.y1&&e.y1<this.y2||e.y2>this.y1&&e.y2<this.y2||this.y1>e.y1&&this.y1<e.y2||this.y2>e.y1&&this.y2<e.y2))return!1;var t=this.calcSquare(e),r=Math.abs(Math.max(this.x1,e.x1)-Math.min(this.x2,e.x2));return!!(Math.abs(Math.max(this.y1,e.y1)-Math.min(this.y2,e.y2))*r/Math.min(this.square,t)>.7)&&(this.setCoord(e),!0);}},{key:"getRect",value:function value(){return{x1:this.x1,y1:this.y1,width:this.x2-this.x1,height:this.y2-this.y1};}},{key:"getCoord",value:function value(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2};}},{key:"getSquare",value:function value(){return this.square;}},{key:"getCenter",value:function value(){return{x:this.x1+(this.x2-this.x1)/2,y:this.y1+(this.y2-this.y1)/2};}},{key:"isEqual",value:function value(e,t,r,n){if(!e)return!1;var i=e.getCoord();return!(Math.abs(this.x1-i.x1)/(null!=n?n:this.x2-this.x1)>t||Math.abs(this.x2-i.x2)/(null!=n?n:this.x2-this.x1)>t||Math.abs(this.y1-i.y1)/(null!=r?r:this.y2-this.y1)>t||Math.abs(this.y2-i.y2)/(null!=r?r:this.y2-this.y1)>t);}},{key:"setCoord",value:function value(e){var t=void 0===this.x1;this.x1=t?e.x1:Math.min(this.x1,e.x1),this.y1=t?e.y1:Math.min(this.y1,e.y1),this.x2=t?e.x2:Math.max(this.x2,e.x2),this.y2=t?e.y2:Math.max(this.y2,e.y2),this.square=this.calcSquare(e);}},{key:"calcSquare",value:function value(e){return(e.x2-e.x1)*(e.y2-e.y1);}}],r&&aT(t.prototype,r),n&&aT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();var lT=[{x:.0125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.0125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.0125,y:.016666666666666666,w:.075,h:.1},{x:.0375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.0375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.0375,y:.016666666666666666,w:.075,h:.1},{x:.0625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.0625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.0625,y:.016666666666666666,w:.075,h:.1},{x:.0875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.0875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.0875,y:.016666666666666666,w:.075,h:.1},{x:.1125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.1125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.1125,y:.016666666666666666,w:.075,h:.1},{x:.1375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.1375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.1375,y:.016666666666666666,w:.075,h:.1},{x:.1625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.1625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.1625,y:.016666666666666666,w:.075,h:.1},{x:.1875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.1875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.1875,y:.016666666666666666,w:.075,h:.1},{x:.2125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.2125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.2125,y:.016666666666666666,w:.075,h:.1},{x:.2375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.2375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.2375,y:.016666666666666666,w:.075,h:.1},{x:.2625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.2625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.2625,y:.016666666666666666,w:.075,h:.1},{x:.2875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.2875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.2875,y:.016666666666666666,w:.075,h:.1},{x:.3125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.3125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.3125,y:.016666666666666666,w:.075,h:.1},{x:.3375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.3375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.3375,y:.016666666666666666,w:.075,h:.1},{x:.3625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.3625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.3625,y:.016666666666666666,w:.075,h:.1},{x:.3875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.3875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.3875,y:.016666666666666666,w:.075,h:.1},{x:.4125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.4125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.4125,y:.016666666666666666,w:.075,h:.1},{x:.4375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.4375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.4375,y:.016666666666666666,w:.075,h:.1},{x:.4625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.4625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.4625,y:.016666666666666666,w:.075,h:.1},{x:.4875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.4875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.4875,y:.016666666666666666,w:.075,h:.1},{x:.5125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.5125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.5125,y:.016666666666666666,w:.075,h:.1},{x:.5375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.5375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.5375,y:.016666666666666666,w:.075,h:.1},{x:.5625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.5625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.5625,y:.016666666666666666,w:.075,h:.1},{x:.5875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.5875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.5875,y:.016666666666666666,w:.075,h:.1},{x:.6125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.6125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.6125,y:.016666666666666666,w:.075,h:.1},{x:.6375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.6375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.6375,y:.016666666666666666,w:.075,h:.1},{x:.6625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.6625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.6625,y:.016666666666666666,w:.075,h:.1},{x:.6875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.6875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.6875,y:.016666666666666666,w:.075,h:.1},{x:.7125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.7125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.7125,y:.016666666666666666,w:.075,h:.1},{x:.7375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.7375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.7375,y:.016666666666666666,w:.075,h:.1},{x:.7625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.7625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.7625,y:.016666666666666666,w:.075,h:.1},{x:.7875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.7875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.7875,y:.016666666666666666,w:.075,h:.1},{x:.8125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.8125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.8125,y:.016666666666666666,w:.075,h:.1},{x:.8375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.8375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.8375,y:.016666666666666666,w:.075,h:.1},{x:.8625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.8625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.8625,y:.016666666666666666,w:.075,h:.1},{x:.8875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.8875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.8875,y:.016666666666666666,w:.075,h:.1},{x:.9125,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.9125,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.9125,y:.016666666666666666,w:.075,h:.1},{x:.9375,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.9375,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.9375,y:.016666666666666666,w:.075,h:.1},{x:.9625,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.9625,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.9625,y:.016666666666666666,w:.075,h:.1},{x:.9875,y:.016666666666666666,w:.03125,h:.041666666666666664},{x:.9875,y:.016666666666666666,w:.05,h:.06666666666666667},{x:.9875,y:.016666666666666666,w:.075,h:.1},{x:.0125,y:.05,w:.03125,h:.041666666666666664},{x:.0125,y:.05,w:.05,h:.06666666666666667},{x:.0125,y:.05,w:.075,h:.1},{x:.0375,y:.05,w:.03125,h:.041666666666666664},{x:.0375,y:.05,w:.05,h:.06666666666666667},{x:.0375,y:.05,w:.075,h:.1},{x:.0625,y:.05,w:.03125,h:.041666666666666664},{x:.0625,y:.05,w:.05,h:.06666666666666667},{x:.0625,y:.05,w:.075,h:.1},{x:.0875,y:.05,w:.03125,h:.041666666666666664},{x:.0875,y:.05,w:.05,h:.06666666666666667},{x:.0875,y:.05,w:.075,h:.1},{x:.1125,y:.05,w:.03125,h:.041666666666666664},{x:.1125,y:.05,w:.05,h:.06666666666666667},{x:.1125,y:.05,w:.075,h:.1},{x:.1375,y:.05,w:.03125,h:.041666666666666664},{x:.1375,y:.05,w:.05,h:.06666666666666667},{x:.1375,y:.05,w:.075,h:.1},{x:.1625,y:.05,w:.03125,h:.041666666666666664},{x:.1625,y:.05,w:.05,h:.06666666666666667},{x:.1625,y:.05,w:.075,h:.1},{x:.1875,y:.05,w:.03125,h:.041666666666666664},{x:.1875,y:.05,w:.05,h:.06666666666666667},{x:.1875,y:.05,w:.075,h:.1},{x:.2125,y:.05,w:.03125,h:.041666666666666664},{x:.2125,y:.05,w:.05,h:.06666666666666667},{x:.2125,y:.05,w:.075,h:.1},{x:.2375,y:.05,w:.03125,h:.041666666666666664},{x:.2375,y:.05,w:.05,h:.06666666666666667},{x:.2375,y:.05,w:.075,h:.1},{x:.2625,y:.05,w:.03125,h:.041666666666666664},{x:.2625,y:.05,w:.05,h:.06666666666666667},{x:.2625,y:.05,w:.075,h:.1},{x:.2875,y:.05,w:.03125,h:.041666666666666664},{x:.2875,y:.05,w:.05,h:.06666666666666667},{x:.2875,y:.05,w:.075,h:.1},{x:.3125,y:.05,w:.03125,h:.041666666666666664},{x:.3125,y:.05,w:.05,h:.06666666666666667},{x:.3125,y:.05,w:.075,h:.1},{x:.3375,y:.05,w:.03125,h:.041666666666666664},{x:.3375,y:.05,w:.05,h:.06666666666666667},{x:.3375,y:.05,w:.075,h:.1},{x:.3625,y:.05,w:.03125,h:.041666666666666664},{x:.3625,y:.05,w:.05,h:.06666666666666667},{x:.3625,y:.05,w:.075,h:.1},{x:.3875,y:.05,w:.03125,h:.041666666666666664},{x:.3875,y:.05,w:.05,h:.06666666666666667},{x:.3875,y:.05,w:.075,h:.1},{x:.4125,y:.05,w:.03125,h:.041666666666666664},{x:.4125,y:.05,w:.05,h:.06666666666666667},{x:.4125,y:.05,w:.075,h:.1},{x:.4375,y:.05,w:.03125,h:.041666666666666664},{x:.4375,y:.05,w:.05,h:.06666666666666667},{x:.4375,y:.05,w:.075,h:.1},{x:.4625,y:.05,w:.03125,h:.041666666666666664},{x:.4625,y:.05,w:.05,h:.06666666666666667},{x:.4625,y:.05,w:.075,h:.1},{x:.4875,y:.05,w:.03125,h:.041666666666666664},{x:.4875,y:.05,w:.05,h:.06666666666666667},{x:.4875,y:.05,w:.075,h:.1},{x:.5125,y:.05,w:.03125,h:.041666666666666664},{x:.5125,y:.05,w:.05,h:.06666666666666667},{x:.5125,y:.05,w:.075,h:.1},{x:.5375,y:.05,w:.03125,h:.041666666666666664},{x:.5375,y:.05,w:.05,h:.06666666666666667},{x:.5375,y:.05,w:.075,h:.1},{x:.5625,y:.05,w:.03125,h:.041666666666666664},{x:.5625,y:.05,w:.05,h:.06666666666666667},{x:.5625,y:.05,w:.075,h:.1},{x:.5875,y:.05,w:.03125,h:.041666666666666664},{x:.5875,y:.05,w:.05,h:.06666666666666667},{x:.5875,y:.05,w:.075,h:.1},{x:.6125,y:.05,w:.03125,h:.041666666666666664},{x:.6125,y:.05,w:.05,h:.06666666666666667},{x:.6125,y:.05,w:.075,h:.1},{x:.6375,y:.05,w:.03125,h:.041666666666666664},{x:.6375,y:.05,w:.05,h:.06666666666666667},{x:.6375,y:.05,w:.075,h:.1},{x:.6625,y:.05,w:.03125,h:.041666666666666664},{x:.6625,y:.05,w:.05,h:.06666666666666667},{x:.6625,y:.05,w:.075,h:.1},{x:.6875,y:.05,w:.03125,h:.041666666666666664},{x:.6875,y:.05,w:.05,h:.06666666666666667},{x:.6875,y:.05,w:.075,h:.1},{x:.7125,y:.05,w:.03125,h:.041666666666666664},{x:.7125,y:.05,w:.05,h:.06666666666666667},{x:.7125,y:.05,w:.075,h:.1},{x:.7375,y:.05,w:.03125,h:.041666666666666664},{x:.7375,y:.05,w:.05,h:.06666666666666667},{x:.7375,y:.05,w:.075,h:.1},{x:.7625,y:.05,w:.03125,h:.041666666666666664},{x:.7625,y:.05,w:.05,h:.06666666666666667},{x:.7625,y:.05,w:.075,h:.1},{x:.7875,y:.05,w:.03125,h:.041666666666666664},{x:.7875,y:.05,w:.05,h:.06666666666666667},{x:.7875,y:.05,w:.075,h:.1},{x:.8125,y:.05,w:.03125,h:.041666666666666664},{x:.8125,y:.05,w:.05,h:.06666666666666667},{x:.8125,y:.05,w:.075,h:.1},{x:.8375,y:.05,w:.03125,h:.041666666666666664},{x:.8375,y:.05,w:.05,h:.06666666666666667},{x:.8375,y:.05,w:.075,h:.1},{x:.8625,y:.05,w:.03125,h:.041666666666666664},{x:.8625,y:.05,w:.05,h:.06666666666666667},{x:.8625,y:.05,w:.075,h:.1},{x:.8875,y:.05,w:.03125,h:.041666666666666664},{x:.8875,y:.05,w:.05,h:.06666666666666667},{x:.8875,y:.05,w:.075,h:.1},{x:.9125,y:.05,w:.03125,h:.041666666666666664},{x:.9125,y:.05,w:.05,h:.06666666666666667},{x:.9125,y:.05,w:.075,h:.1},{x:.9375,y:.05,w:.03125,h:.041666666666666664},{x:.9375,y:.05,w:.05,h:.06666666666666667},{x:.9375,y:.05,w:.075,h:.1},{x:.9625,y:.05,w:.03125,h:.041666666666666664},{x:.9625,y:.05,w:.05,h:.06666666666666667},{x:.9625,y:.05,w:.075,h:.1},{x:.9875,y:.05,w:.03125,h:.041666666666666664},{x:.9875,y:.05,w:.05,h:.06666666666666667},{x:.9875,y:.05,w:.075,h:.1},{x:.0125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.0125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.0125,y:.08333333333333333,w:.075,h:.1},{x:.0375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.0375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.0375,y:.08333333333333333,w:.075,h:.1},{x:.0625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.0625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.0625,y:.08333333333333333,w:.075,h:.1},{x:.0875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.0875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.0875,y:.08333333333333333,w:.075,h:.1},{x:.1125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.1125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.1125,y:.08333333333333333,w:.075,h:.1},{x:.1375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.1375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.1375,y:.08333333333333333,w:.075,h:.1},{x:.1625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.1625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.1625,y:.08333333333333333,w:.075,h:.1},{x:.1875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.1875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.1875,y:.08333333333333333,w:.075,h:.1},{x:.2125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.2125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.2125,y:.08333333333333333,w:.075,h:.1},{x:.2375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.2375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.2375,y:.08333333333333333,w:.075,h:.1},{x:.2625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.2625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.2625,y:.08333333333333333,w:.075,h:.1},{x:.2875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.2875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.2875,y:.08333333333333333,w:.075,h:.1},{x:.3125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.3125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.3125,y:.08333333333333333,w:.075,h:.1},{x:.3375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.3375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.3375,y:.08333333333333333,w:.075,h:.1},{x:.3625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.3625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.3625,y:.08333333333333333,w:.075,h:.1},{x:.3875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.3875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.3875,y:.08333333333333333,w:.075,h:.1},{x:.4125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.4125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.4125,y:.08333333333333333,w:.075,h:.1},{x:.4375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.4375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.4375,y:.08333333333333333,w:.075,h:.1},{x:.4625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.4625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.4625,y:.08333333333333333,w:.075,h:.1},{x:.4875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.4875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.4875,y:.08333333333333333,w:.075,h:.1},{x:.5125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.5125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.5125,y:.08333333333333333,w:.075,h:.1},{x:.5375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.5375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.5375,y:.08333333333333333,w:.075,h:.1},{x:.5625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.5625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.5625,y:.08333333333333333,w:.075,h:.1},{x:.5875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.5875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.5875,y:.08333333333333333,w:.075,h:.1},{x:.6125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.6125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.6125,y:.08333333333333333,w:.075,h:.1},{x:.6375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.6375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.6375,y:.08333333333333333,w:.075,h:.1},{x:.6625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.6625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.6625,y:.08333333333333333,w:.075,h:.1},{x:.6875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.6875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.6875,y:.08333333333333333,w:.075,h:.1},{x:.7125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.7125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.7125,y:.08333333333333333,w:.075,h:.1},{x:.7375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.7375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.7375,y:.08333333333333333,w:.075,h:.1},{x:.7625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.7625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.7625,y:.08333333333333333,w:.075,h:.1},{x:.7875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.7875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.7875,y:.08333333333333333,w:.075,h:.1},{x:.8125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.8125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.8125,y:.08333333333333333,w:.075,h:.1},{x:.8375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.8375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.8375,y:.08333333333333333,w:.075,h:.1},{x:.8625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.8625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.8625,y:.08333333333333333,w:.075,h:.1},{x:.8875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.8875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.8875,y:.08333333333333333,w:.075,h:.1},{x:.9125,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.9125,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.9125,y:.08333333333333333,w:.075,h:.1},{x:.9375,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.9375,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.9375,y:.08333333333333333,w:.075,h:.1},{x:.9625,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.9625,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.9625,y:.08333333333333333,w:.075,h:.1},{x:.9875,y:.08333333333333333,w:.03125,h:.041666666666666664},{x:.9875,y:.08333333333333333,w:.05,h:.06666666666666667},{x:.9875,y:.08333333333333333,w:.075,h:.1},{x:.0125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.0125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.0125,y:.11666666666666667,w:.075,h:.1},{x:.0375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.0375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.0375,y:.11666666666666667,w:.075,h:.1},{x:.0625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.0625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.0625,y:.11666666666666667,w:.075,h:.1},{x:.0875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.0875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.0875,y:.11666666666666667,w:.075,h:.1},{x:.1125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.1125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.1125,y:.11666666666666667,w:.075,h:.1},{x:.1375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.1375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.1375,y:.11666666666666667,w:.075,h:.1},{x:.1625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.1625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.1625,y:.11666666666666667,w:.075,h:.1},{x:.1875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.1875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.1875,y:.11666666666666667,w:.075,h:.1},{x:.2125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.2125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.2125,y:.11666666666666667,w:.075,h:.1},{x:.2375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.2375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.2375,y:.11666666666666667,w:.075,h:.1},{x:.2625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.2625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.2625,y:.11666666666666667,w:.075,h:.1},{x:.2875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.2875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.2875,y:.11666666666666667,w:.075,h:.1},{x:.3125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.3125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.3125,y:.11666666666666667,w:.075,h:.1},{x:.3375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.3375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.3375,y:.11666666666666667,w:.075,h:.1},{x:.3625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.3625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.3625,y:.11666666666666667,w:.075,h:.1},{x:.3875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.3875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.3875,y:.11666666666666667,w:.075,h:.1},{x:.4125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.4125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.4125,y:.11666666666666667,w:.075,h:.1},{x:.4375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.4375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.4375,y:.11666666666666667,w:.075,h:.1},{x:.4625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.4625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.4625,y:.11666666666666667,w:.075,h:.1},{x:.4875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.4875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.4875,y:.11666666666666667,w:.075,h:.1},{x:.5125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.5125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.5125,y:.11666666666666667,w:.075,h:.1},{x:.5375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.5375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.5375,y:.11666666666666667,w:.075,h:.1},{x:.5625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.5625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.5625,y:.11666666666666667,w:.075,h:.1},{x:.5875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.5875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.5875,y:.11666666666666667,w:.075,h:.1},{x:.6125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.6125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.6125,y:.11666666666666667,w:.075,h:.1},{x:.6375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.6375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.6375,y:.11666666666666667,w:.075,h:.1},{x:.6625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.6625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.6625,y:.11666666666666667,w:.075,h:.1},{x:.6875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.6875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.6875,y:.11666666666666667,w:.075,h:.1},{x:.7125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.7125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.7125,y:.11666666666666667,w:.075,h:.1},{x:.7375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.7375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.7375,y:.11666666666666667,w:.075,h:.1},{x:.7625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.7625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.7625,y:.11666666666666667,w:.075,h:.1},{x:.7875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.7875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.7875,y:.11666666666666667,w:.075,h:.1},{x:.8125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.8125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.8125,y:.11666666666666667,w:.075,h:.1},{x:.8375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.8375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.8375,y:.11666666666666667,w:.075,h:.1},{x:.8625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.8625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.8625,y:.11666666666666667,w:.075,h:.1},{x:.8875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.8875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.8875,y:.11666666666666667,w:.075,h:.1},{x:.9125,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.9125,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.9125,y:.11666666666666667,w:.075,h:.1},{x:.9375,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.9375,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.9375,y:.11666666666666667,w:.075,h:.1},{x:.9625,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.9625,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.9625,y:.11666666666666667,w:.075,h:.1},{x:.9875,y:.11666666666666667,w:.03125,h:.041666666666666664},{x:.9875,y:.11666666666666667,w:.05,h:.06666666666666667},{x:.9875,y:.11666666666666667,w:.075,h:.1},{x:.0125,y:.15,w:.03125,h:.041666666666666664},{x:.0125,y:.15,w:.05,h:.06666666666666667},{x:.0125,y:.15,w:.075,h:.1},{x:.0375,y:.15,w:.03125,h:.041666666666666664},{x:.0375,y:.15,w:.05,h:.06666666666666667},{x:.0375,y:.15,w:.075,h:.1},{x:.0625,y:.15,w:.03125,h:.041666666666666664},{x:.0625,y:.15,w:.05,h:.06666666666666667},{x:.0625,y:.15,w:.075,h:.1},{x:.0875,y:.15,w:.03125,h:.041666666666666664},{x:.0875,y:.15,w:.05,h:.06666666666666667},{x:.0875,y:.15,w:.075,h:.1},{x:.1125,y:.15,w:.03125,h:.041666666666666664},{x:.1125,y:.15,w:.05,h:.06666666666666667},{x:.1125,y:.15,w:.075,h:.1},{x:.1375,y:.15,w:.03125,h:.041666666666666664},{x:.1375,y:.15,w:.05,h:.06666666666666667},{x:.1375,y:.15,w:.075,h:.1},{x:.1625,y:.15,w:.03125,h:.041666666666666664},{x:.1625,y:.15,w:.05,h:.06666666666666667},{x:.1625,y:.15,w:.075,h:.1},{x:.1875,y:.15,w:.03125,h:.041666666666666664},{x:.1875,y:.15,w:.05,h:.06666666666666667},{x:.1875,y:.15,w:.075,h:.1},{x:.2125,y:.15,w:.03125,h:.041666666666666664},{x:.2125,y:.15,w:.05,h:.06666666666666667},{x:.2125,y:.15,w:.075,h:.1},{x:.2375,y:.15,w:.03125,h:.041666666666666664},{x:.2375,y:.15,w:.05,h:.06666666666666667},{x:.2375,y:.15,w:.075,h:.1},{x:.2625,y:.15,w:.03125,h:.041666666666666664},{x:.2625,y:.15,w:.05,h:.06666666666666667},{x:.2625,y:.15,w:.075,h:.1},{x:.2875,y:.15,w:.03125,h:.041666666666666664},{x:.2875,y:.15,w:.05,h:.06666666666666667},{x:.2875,y:.15,w:.075,h:.1},{x:.3125,y:.15,w:.03125,h:.041666666666666664},{x:.3125,y:.15,w:.05,h:.06666666666666667},{x:.3125,y:.15,w:.075,h:.1},{x:.3375,y:.15,w:.03125,h:.041666666666666664},{x:.3375,y:.15,w:.05,h:.06666666666666667},{x:.3375,y:.15,w:.075,h:.1},{x:.3625,y:.15,w:.03125,h:.041666666666666664},{x:.3625,y:.15,w:.05,h:.06666666666666667},{x:.3625,y:.15,w:.075,h:.1},{x:.3875,y:.15,w:.03125,h:.041666666666666664},{x:.3875,y:.15,w:.05,h:.06666666666666667},{x:.3875,y:.15,w:.075,h:.1},{x:.4125,y:.15,w:.03125,h:.041666666666666664},{x:.4125,y:.15,w:.05,h:.06666666666666667},{x:.4125,y:.15,w:.075,h:.1},{x:.4375,y:.15,w:.03125,h:.041666666666666664},{x:.4375,y:.15,w:.05,h:.06666666666666667},{x:.4375,y:.15,w:.075,h:.1},{x:.4625,y:.15,w:.03125,h:.041666666666666664},{x:.4625,y:.15,w:.05,h:.06666666666666667},{x:.4625,y:.15,w:.075,h:.1},{x:.4875,y:.15,w:.03125,h:.041666666666666664},{x:.4875,y:.15,w:.05,h:.06666666666666667},{x:.4875,y:.15,w:.075,h:.1},{x:.5125,y:.15,w:.03125,h:.041666666666666664},{x:.5125,y:.15,w:.05,h:.06666666666666667},{x:.5125,y:.15,w:.075,h:.1},{x:.5375,y:.15,w:.03125,h:.041666666666666664},{x:.5375,y:.15,w:.05,h:.06666666666666667},{x:.5375,y:.15,w:.075,h:.1},{x:.5625,y:.15,w:.03125,h:.041666666666666664},{x:.5625,y:.15,w:.05,h:.06666666666666667},{x:.5625,y:.15,w:.075,h:.1},{x:.5875,y:.15,w:.03125,h:.041666666666666664},{x:.5875,y:.15,w:.05,h:.06666666666666667},{x:.5875,y:.15,w:.075,h:.1},{x:.6125,y:.15,w:.03125,h:.041666666666666664},{x:.6125,y:.15,w:.05,h:.06666666666666667},{x:.6125,y:.15,w:.075,h:.1},{x:.6375,y:.15,w:.03125,h:.041666666666666664},{x:.6375,y:.15,w:.05,h:.06666666666666667},{x:.6375,y:.15,w:.075,h:.1},{x:.6625,y:.15,w:.03125,h:.041666666666666664},{x:.6625,y:.15,w:.05,h:.06666666666666667},{x:.6625,y:.15,w:.075,h:.1},{x:.6875,y:.15,w:.03125,h:.041666666666666664},{x:.6875,y:.15,w:.05,h:.06666666666666667},{x:.6875,y:.15,w:.075,h:.1},{x:.7125,y:.15,w:.03125,h:.041666666666666664},{x:.7125,y:.15,w:.05,h:.06666666666666667},{x:.7125,y:.15,w:.075,h:.1},{x:.7375,y:.15,w:.03125,h:.041666666666666664},{x:.7375,y:.15,w:.05,h:.06666666666666667},{x:.7375,y:.15,w:.075,h:.1},{x:.7625,y:.15,w:.03125,h:.041666666666666664},{x:.7625,y:.15,w:.05,h:.06666666666666667},{x:.7625,y:.15,w:.075,h:.1},{x:.7875,y:.15,w:.03125,h:.041666666666666664},{x:.7875,y:.15,w:.05,h:.06666666666666667},{x:.7875,y:.15,w:.075,h:.1},{x:.8125,y:.15,w:.03125,h:.041666666666666664},{x:.8125,y:.15,w:.05,h:.06666666666666667},{x:.8125,y:.15,w:.075,h:.1},{x:.8375,y:.15,w:.03125,h:.041666666666666664},{x:.8375,y:.15,w:.05,h:.06666666666666667},{x:.8375,y:.15,w:.075,h:.1},{x:.8625,y:.15,w:.03125,h:.041666666666666664},{x:.8625,y:.15,w:.05,h:.06666666666666667},{x:.8625,y:.15,w:.075,h:.1},{x:.8875,y:.15,w:.03125,h:.041666666666666664},{x:.8875,y:.15,w:.05,h:.06666666666666667},{x:.8875,y:.15,w:.075,h:.1},{x:.9125,y:.15,w:.03125,h:.041666666666666664},{x:.9125,y:.15,w:.05,h:.06666666666666667},{x:.9125,y:.15,w:.075,h:.1},{x:.9375,y:.15,w:.03125,h:.041666666666666664},{x:.9375,y:.15,w:.05,h:.06666666666666667},{x:.9375,y:.15,w:.075,h:.1},{x:.9625,y:.15,w:.03125,h:.041666666666666664},{x:.9625,y:.15,w:.05,h:.06666666666666667},{x:.9625,y:.15,w:.075,h:.1},{x:.9875,y:.15,w:.03125,h:.041666666666666664},{x:.9875,y:.15,w:.05,h:.06666666666666667},{x:.9875,y:.15,w:.075,h:.1},{x:.0125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.0125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.0125,y:.18333333333333332,w:.075,h:.1},{x:.0375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.0375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.0375,y:.18333333333333332,w:.075,h:.1},{x:.0625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.0625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.0625,y:.18333333333333332,w:.075,h:.1},{x:.0875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.0875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.0875,y:.18333333333333332,w:.075,h:.1},{x:.1125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.1125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.1125,y:.18333333333333332,w:.075,h:.1},{x:.1375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.1375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.1375,y:.18333333333333332,w:.075,h:.1},{x:.1625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.1625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.1625,y:.18333333333333332,w:.075,h:.1},{x:.1875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.1875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.1875,y:.18333333333333332,w:.075,h:.1},{x:.2125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.2125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.2125,y:.18333333333333332,w:.075,h:.1},{x:.2375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.2375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.2375,y:.18333333333333332,w:.075,h:.1},{x:.2625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.2625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.2625,y:.18333333333333332,w:.075,h:.1},{x:.2875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.2875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.2875,y:.18333333333333332,w:.075,h:.1},{x:.3125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.3125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.3125,y:.18333333333333332,w:.075,h:.1},{x:.3375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.3375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.3375,y:.18333333333333332,w:.075,h:.1},{x:.3625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.3625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.3625,y:.18333333333333332,w:.075,h:.1},{x:.3875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.3875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.3875,y:.18333333333333332,w:.075,h:.1},{x:.4125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.4125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.4125,y:.18333333333333332,w:.075,h:.1},{x:.4375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.4375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.4375,y:.18333333333333332,w:.075,h:.1},{x:.4625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.4625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.4625,y:.18333333333333332,w:.075,h:.1},{x:.4875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.4875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.4875,y:.18333333333333332,w:.075,h:.1},{x:.5125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.5125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.5125,y:.18333333333333332,w:.075,h:.1},{x:.5375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.5375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.5375,y:.18333333333333332,w:.075,h:.1},{x:.5625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.5625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.5625,y:.18333333333333332,w:.075,h:.1},{x:.5875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.5875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.5875,y:.18333333333333332,w:.075,h:.1},{x:.6125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.6125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.6125,y:.18333333333333332,w:.075,h:.1},{x:.6375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.6375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.6375,y:.18333333333333332,w:.075,h:.1},{x:.6625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.6625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.6625,y:.18333333333333332,w:.075,h:.1},{x:.6875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.6875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.6875,y:.18333333333333332,w:.075,h:.1},{x:.7125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.7125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.7125,y:.18333333333333332,w:.075,h:.1},{x:.7375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.7375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.7375,y:.18333333333333332,w:.075,h:.1},{x:.7625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.7625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.7625,y:.18333333333333332,w:.075,h:.1},{x:.7875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.7875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.7875,y:.18333333333333332,w:.075,h:.1},{x:.8125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.8125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.8125,y:.18333333333333332,w:.075,h:.1},{x:.8375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.8375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.8375,y:.18333333333333332,w:.075,h:.1},{x:.8625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.8625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.8625,y:.18333333333333332,w:.075,h:.1},{x:.8875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.8875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.8875,y:.18333333333333332,w:.075,h:.1},{x:.9125,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.9125,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.9125,y:.18333333333333332,w:.075,h:.1},{x:.9375,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.9375,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.9375,y:.18333333333333332,w:.075,h:.1},{x:.9625,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.9625,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.9625,y:.18333333333333332,w:.075,h:.1},{x:.9875,y:.18333333333333332,w:.03125,h:.041666666666666664},{x:.9875,y:.18333333333333332,w:.05,h:.06666666666666667},{x:.9875,y:.18333333333333332,w:.075,h:.1},{x:.0125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.0125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.0125,y:.21666666666666667,w:.075,h:.1},{x:.0375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.0375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.0375,y:.21666666666666667,w:.075,h:.1},{x:.0625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.0625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.0625,y:.21666666666666667,w:.075,h:.1},{x:.0875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.0875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.0875,y:.21666666666666667,w:.075,h:.1},{x:.1125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.1125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.1125,y:.21666666666666667,w:.075,h:.1},{x:.1375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.1375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.1375,y:.21666666666666667,w:.075,h:.1},{x:.1625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.1625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.1625,y:.21666666666666667,w:.075,h:.1},{x:.1875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.1875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.1875,y:.21666666666666667,w:.075,h:.1},{x:.2125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.2125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.2125,y:.21666666666666667,w:.075,h:.1},{x:.2375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.2375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.2375,y:.21666666666666667,w:.075,h:.1},{x:.2625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.2625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.2625,y:.21666666666666667,w:.075,h:.1},{x:.2875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.2875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.2875,y:.21666666666666667,w:.075,h:.1},{x:.3125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.3125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.3125,y:.21666666666666667,w:.075,h:.1},{x:.3375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.3375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.3375,y:.21666666666666667,w:.075,h:.1},{x:.3625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.3625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.3625,y:.21666666666666667,w:.075,h:.1},{x:.3875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.3875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.3875,y:.21666666666666667,w:.075,h:.1},{x:.4125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.4125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.4125,y:.21666666666666667,w:.075,h:.1},{x:.4375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.4375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.4375,y:.21666666666666667,w:.075,h:.1},{x:.4625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.4625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.4625,y:.21666666666666667,w:.075,h:.1},{x:.4875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.4875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.4875,y:.21666666666666667,w:.075,h:.1},{x:.5125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.5125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.5125,y:.21666666666666667,w:.075,h:.1},{x:.5375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.5375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.5375,y:.21666666666666667,w:.075,h:.1},{x:.5625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.5625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.5625,y:.21666666666666667,w:.075,h:.1},{x:.5875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.5875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.5875,y:.21666666666666667,w:.075,h:.1},{x:.6125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.6125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.6125,y:.21666666666666667,w:.075,h:.1},{x:.6375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.6375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.6375,y:.21666666666666667,w:.075,h:.1},{x:.6625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.6625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.6625,y:.21666666666666667,w:.075,h:.1},{x:.6875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.6875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.6875,y:.21666666666666667,w:.075,h:.1},{x:.7125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.7125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.7125,y:.21666666666666667,w:.075,h:.1},{x:.7375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.7375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.7375,y:.21666666666666667,w:.075,h:.1},{x:.7625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.7625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.7625,y:.21666666666666667,w:.075,h:.1},{x:.7875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.7875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.7875,y:.21666666666666667,w:.075,h:.1},{x:.8125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.8125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.8125,y:.21666666666666667,w:.075,h:.1},{x:.8375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.8375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.8375,y:.21666666666666667,w:.075,h:.1},{x:.8625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.8625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.8625,y:.21666666666666667,w:.075,h:.1},{x:.8875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.8875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.8875,y:.21666666666666667,w:.075,h:.1},{x:.9125,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.9125,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.9125,y:.21666666666666667,w:.075,h:.1},{x:.9375,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.9375,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.9375,y:.21666666666666667,w:.075,h:.1},{x:.9625,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.9625,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.9625,y:.21666666666666667,w:.075,h:.1},{x:.9875,y:.21666666666666667,w:.03125,h:.041666666666666664},{x:.9875,y:.21666666666666667,w:.05,h:.06666666666666667},{x:.9875,y:.21666666666666667,w:.075,h:.1},{x:.0125,y:.25,w:.03125,h:.041666666666666664},{x:.0125,y:.25,w:.05,h:.06666666666666667},{x:.0125,y:.25,w:.075,h:.1},{x:.0375,y:.25,w:.03125,h:.041666666666666664},{x:.0375,y:.25,w:.05,h:.06666666666666667},{x:.0375,y:.25,w:.075,h:.1},{x:.0625,y:.25,w:.03125,h:.041666666666666664},{x:.0625,y:.25,w:.05,h:.06666666666666667},{x:.0625,y:.25,w:.075,h:.1},{x:.0875,y:.25,w:.03125,h:.041666666666666664},{x:.0875,y:.25,w:.05,h:.06666666666666667},{x:.0875,y:.25,w:.075,h:.1},{x:.1125,y:.25,w:.03125,h:.041666666666666664},{x:.1125,y:.25,w:.05,h:.06666666666666667},{x:.1125,y:.25,w:.075,h:.1},{x:.1375,y:.25,w:.03125,h:.041666666666666664},{x:.1375,y:.25,w:.05,h:.06666666666666667},{x:.1375,y:.25,w:.075,h:.1},{x:.1625,y:.25,w:.03125,h:.041666666666666664},{x:.1625,y:.25,w:.05,h:.06666666666666667},{x:.1625,y:.25,w:.075,h:.1},{x:.1875,y:.25,w:.03125,h:.041666666666666664},{x:.1875,y:.25,w:.05,h:.06666666666666667},{x:.1875,y:.25,w:.075,h:.1},{x:.2125,y:.25,w:.03125,h:.041666666666666664},{x:.2125,y:.25,w:.05,h:.06666666666666667},{x:.2125,y:.25,w:.075,h:.1},{x:.2375,y:.25,w:.03125,h:.041666666666666664},{x:.2375,y:.25,w:.05,h:.06666666666666667},{x:.2375,y:.25,w:.075,h:.1},{x:.2625,y:.25,w:.03125,h:.041666666666666664},{x:.2625,y:.25,w:.05,h:.06666666666666667},{x:.2625,y:.25,w:.075,h:.1},{x:.2875,y:.25,w:.03125,h:.041666666666666664},{x:.2875,y:.25,w:.05,h:.06666666666666667},{x:.2875,y:.25,w:.075,h:.1},{x:.3125,y:.25,w:.03125,h:.041666666666666664},{x:.3125,y:.25,w:.05,h:.06666666666666667},{x:.3125,y:.25,w:.075,h:.1},{x:.3375,y:.25,w:.03125,h:.041666666666666664},{x:.3375,y:.25,w:.05,h:.06666666666666667},{x:.3375,y:.25,w:.075,h:.1},{x:.3625,y:.25,w:.03125,h:.041666666666666664},{x:.3625,y:.25,w:.05,h:.06666666666666667},{x:.3625,y:.25,w:.075,h:.1},{x:.3875,y:.25,w:.03125,h:.041666666666666664},{x:.3875,y:.25,w:.05,h:.06666666666666667},{x:.3875,y:.25,w:.075,h:.1},{x:.4125,y:.25,w:.03125,h:.041666666666666664},{x:.4125,y:.25,w:.05,h:.06666666666666667},{x:.4125,y:.25,w:.075,h:.1},{x:.4375,y:.25,w:.03125,h:.041666666666666664},{x:.4375,y:.25,w:.05,h:.06666666666666667},{x:.4375,y:.25,w:.075,h:.1},{x:.4625,y:.25,w:.03125,h:.041666666666666664},{x:.4625,y:.25,w:.05,h:.06666666666666667},{x:.4625,y:.25,w:.075,h:.1},{x:.4875,y:.25,w:.03125,h:.041666666666666664},{x:.4875,y:.25,w:.05,h:.06666666666666667},{x:.4875,y:.25,w:.075,h:.1},{x:.5125,y:.25,w:.03125,h:.041666666666666664},{x:.5125,y:.25,w:.05,h:.06666666666666667},{x:.5125,y:.25,w:.075,h:.1},{x:.5375,y:.25,w:.03125,h:.041666666666666664},{x:.5375,y:.25,w:.05,h:.06666666666666667},{x:.5375,y:.25,w:.075,h:.1},{x:.5625,y:.25,w:.03125,h:.041666666666666664},{x:.5625,y:.25,w:.05,h:.06666666666666667},{x:.5625,y:.25,w:.075,h:.1},{x:.5875,y:.25,w:.03125,h:.041666666666666664},{x:.5875,y:.25,w:.05,h:.06666666666666667},{x:.5875,y:.25,w:.075,h:.1},{x:.6125,y:.25,w:.03125,h:.041666666666666664},{x:.6125,y:.25,w:.05,h:.06666666666666667},{x:.6125,y:.25,w:.075,h:.1},{x:.6375,y:.25,w:.03125,h:.041666666666666664},{x:.6375,y:.25,w:.05,h:.06666666666666667},{x:.6375,y:.25,w:.075,h:.1},{x:.6625,y:.25,w:.03125,h:.041666666666666664},{x:.6625,y:.25,w:.05,h:.06666666666666667},{x:.6625,y:.25,w:.075,h:.1},{x:.6875,y:.25,w:.03125,h:.041666666666666664},{x:.6875,y:.25,w:.05,h:.06666666666666667},{x:.6875,y:.25,w:.075,h:.1},{x:.7125,y:.25,w:.03125,h:.041666666666666664},{x:.7125,y:.25,w:.05,h:.06666666666666667},{x:.7125,y:.25,w:.075,h:.1},{x:.7375,y:.25,w:.03125,h:.041666666666666664},{x:.7375,y:.25,w:.05,h:.06666666666666667},{x:.7375,y:.25,w:.075,h:.1},{x:.7625,y:.25,w:.03125,h:.041666666666666664},{x:.7625,y:.25,w:.05,h:.06666666666666667},{x:.7625,y:.25,w:.075,h:.1},{x:.7875,y:.25,w:.03125,h:.041666666666666664},{x:.7875,y:.25,w:.05,h:.06666666666666667},{x:.7875,y:.25,w:.075,h:.1},{x:.8125,y:.25,w:.03125,h:.041666666666666664},{x:.8125,y:.25,w:.05,h:.06666666666666667},{x:.8125,y:.25,w:.075,h:.1},{x:.8375,y:.25,w:.03125,h:.041666666666666664},{x:.8375,y:.25,w:.05,h:.06666666666666667},{x:.8375,y:.25,w:.075,h:.1},{x:.8625,y:.25,w:.03125,h:.041666666666666664},{x:.8625,y:.25,w:.05,h:.06666666666666667},{x:.8625,y:.25,w:.075,h:.1},{x:.8875,y:.25,w:.03125,h:.041666666666666664},{x:.8875,y:.25,w:.05,h:.06666666666666667},{x:.8875,y:.25,w:.075,h:.1},{x:.9125,y:.25,w:.03125,h:.041666666666666664},{x:.9125,y:.25,w:.05,h:.06666666666666667},{x:.9125,y:.25,w:.075,h:.1},{x:.9375,y:.25,w:.03125,h:.041666666666666664},{x:.9375,y:.25,w:.05,h:.06666666666666667},{x:.9375,y:.25,w:.075,h:.1},{x:.9625,y:.25,w:.03125,h:.041666666666666664},{x:.9625,y:.25,w:.05,h:.06666666666666667},{x:.9625,y:.25,w:.075,h:.1},{x:.9875,y:.25,w:.03125,h:.041666666666666664},{x:.9875,y:.25,w:.05,h:.06666666666666667},{x:.9875,y:.25,w:.075,h:.1},{x:.0125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.0125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.0125,y:.2833333333333333,w:.075,h:.1},{x:.0375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.0375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.0375,y:.2833333333333333,w:.075,h:.1},{x:.0625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.0625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.0625,y:.2833333333333333,w:.075,h:.1},{x:.0875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.0875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.0875,y:.2833333333333333,w:.075,h:.1},{x:.1125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.1125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.1125,y:.2833333333333333,w:.075,h:.1},{x:.1375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.1375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.1375,y:.2833333333333333,w:.075,h:.1},{x:.1625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.1625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.1625,y:.2833333333333333,w:.075,h:.1},{x:.1875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.1875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.1875,y:.2833333333333333,w:.075,h:.1},{x:.2125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.2125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.2125,y:.2833333333333333,w:.075,h:.1},{x:.2375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.2375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.2375,y:.2833333333333333,w:.075,h:.1},{x:.2625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.2625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.2625,y:.2833333333333333,w:.075,h:.1},{x:.2875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.2875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.2875,y:.2833333333333333,w:.075,h:.1},{x:.3125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.3125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.3125,y:.2833333333333333,w:.075,h:.1},{x:.3375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.3375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.3375,y:.2833333333333333,w:.075,h:.1},{x:.3625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.3625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.3625,y:.2833333333333333,w:.075,h:.1},{x:.3875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.3875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.3875,y:.2833333333333333,w:.075,h:.1},{x:.4125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.4125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.4125,y:.2833333333333333,w:.075,h:.1},{x:.4375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.4375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.4375,y:.2833333333333333,w:.075,h:.1},{x:.4625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.4625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.4625,y:.2833333333333333,w:.075,h:.1},{x:.4875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.4875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.4875,y:.2833333333333333,w:.075,h:.1},{x:.5125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.5125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.5125,y:.2833333333333333,w:.075,h:.1},{x:.5375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.5375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.5375,y:.2833333333333333,w:.075,h:.1},{x:.5625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.5625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.5625,y:.2833333333333333,w:.075,h:.1},{x:.5875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.5875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.5875,y:.2833333333333333,w:.075,h:.1},{x:.6125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.6125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.6125,y:.2833333333333333,w:.075,h:.1},{x:.6375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.6375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.6375,y:.2833333333333333,w:.075,h:.1},{x:.6625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.6625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.6625,y:.2833333333333333,w:.075,h:.1},{x:.6875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.6875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.6875,y:.2833333333333333,w:.075,h:.1},{x:.7125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.7125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.7125,y:.2833333333333333,w:.075,h:.1},{x:.7375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.7375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.7375,y:.2833333333333333,w:.075,h:.1},{x:.7625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.7625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.7625,y:.2833333333333333,w:.075,h:.1},{x:.7875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.7875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.7875,y:.2833333333333333,w:.075,h:.1},{x:.8125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.8125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.8125,y:.2833333333333333,w:.075,h:.1},{x:.8375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.8375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.8375,y:.2833333333333333,w:.075,h:.1},{x:.8625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.8625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.8625,y:.2833333333333333,w:.075,h:.1},{x:.8875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.8875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.8875,y:.2833333333333333,w:.075,h:.1},{x:.9125,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.9125,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.9125,y:.2833333333333333,w:.075,h:.1},{x:.9375,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.9375,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.9375,y:.2833333333333333,w:.075,h:.1},{x:.9625,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.9625,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.9625,y:.2833333333333333,w:.075,h:.1},{x:.9875,y:.2833333333333333,w:.03125,h:.041666666666666664},{x:.9875,y:.2833333333333333,w:.05,h:.06666666666666667},{x:.9875,y:.2833333333333333,w:.075,h:.1},{x:.0125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.0125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.0125,y:.31666666666666665,w:.075,h:.1},{x:.0375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.0375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.0375,y:.31666666666666665,w:.075,h:.1},{x:.0625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.0625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.0625,y:.31666666666666665,w:.075,h:.1},{x:.0875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.0875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.0875,y:.31666666666666665,w:.075,h:.1},{x:.1125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.1125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.1125,y:.31666666666666665,w:.075,h:.1},{x:.1375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.1375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.1375,y:.31666666666666665,w:.075,h:.1},{x:.1625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.1625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.1625,y:.31666666666666665,w:.075,h:.1},{x:.1875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.1875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.1875,y:.31666666666666665,w:.075,h:.1},{x:.2125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.2125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.2125,y:.31666666666666665,w:.075,h:.1},{x:.2375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.2375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.2375,y:.31666666666666665,w:.075,h:.1},{x:.2625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.2625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.2625,y:.31666666666666665,w:.075,h:.1},{x:.2875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.2875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.2875,y:.31666666666666665,w:.075,h:.1},{x:.3125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.3125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.3125,y:.31666666666666665,w:.075,h:.1},{x:.3375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.3375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.3375,y:.31666666666666665,w:.075,h:.1},{x:.3625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.3625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.3625,y:.31666666666666665,w:.075,h:.1},{x:.3875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.3875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.3875,y:.31666666666666665,w:.075,h:.1},{x:.4125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.4125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.4125,y:.31666666666666665,w:.075,h:.1},{x:.4375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.4375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.4375,y:.31666666666666665,w:.075,h:.1},{x:.4625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.4625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.4625,y:.31666666666666665,w:.075,h:.1},{x:.4875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.4875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.4875,y:.31666666666666665,w:.075,h:.1},{x:.5125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.5125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.5125,y:.31666666666666665,w:.075,h:.1},{x:.5375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.5375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.5375,y:.31666666666666665,w:.075,h:.1},{x:.5625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.5625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.5625,y:.31666666666666665,w:.075,h:.1},{x:.5875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.5875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.5875,y:.31666666666666665,w:.075,h:.1},{x:.6125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.6125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.6125,y:.31666666666666665,w:.075,h:.1},{x:.6375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.6375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.6375,y:.31666666666666665,w:.075,h:.1},{x:.6625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.6625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.6625,y:.31666666666666665,w:.075,h:.1},{x:.6875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.6875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.6875,y:.31666666666666665,w:.075,h:.1},{x:.7125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.7125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.7125,y:.31666666666666665,w:.075,h:.1},{x:.7375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.7375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.7375,y:.31666666666666665,w:.075,h:.1},{x:.7625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.7625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.7625,y:.31666666666666665,w:.075,h:.1},{x:.7875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.7875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.7875,y:.31666666666666665,w:.075,h:.1},{x:.8125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.8125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.8125,y:.31666666666666665,w:.075,h:.1},{x:.8375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.8375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.8375,y:.31666666666666665,w:.075,h:.1},{x:.8625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.8625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.8625,y:.31666666666666665,w:.075,h:.1},{x:.8875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.8875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.8875,y:.31666666666666665,w:.075,h:.1},{x:.9125,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.9125,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.9125,y:.31666666666666665,w:.075,h:.1},{x:.9375,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.9375,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.9375,y:.31666666666666665,w:.075,h:.1},{x:.9625,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.9625,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.9625,y:.31666666666666665,w:.075,h:.1},{x:.9875,y:.31666666666666665,w:.03125,h:.041666666666666664},{x:.9875,y:.31666666666666665,w:.05,h:.06666666666666667},{x:.9875,y:.31666666666666665,w:.075,h:.1},{x:.0125,y:.35,w:.03125,h:.041666666666666664},{x:.0125,y:.35,w:.05,h:.06666666666666667},{x:.0125,y:.35,w:.075,h:.1},{x:.0375,y:.35,w:.03125,h:.041666666666666664},{x:.0375,y:.35,w:.05,h:.06666666666666667},{x:.0375,y:.35,w:.075,h:.1},{x:.0625,y:.35,w:.03125,h:.041666666666666664},{x:.0625,y:.35,w:.05,h:.06666666666666667},{x:.0625,y:.35,w:.075,h:.1},{x:.0875,y:.35,w:.03125,h:.041666666666666664},{x:.0875,y:.35,w:.05,h:.06666666666666667},{x:.0875,y:.35,w:.075,h:.1},{x:.1125,y:.35,w:.03125,h:.041666666666666664},{x:.1125,y:.35,w:.05,h:.06666666666666667},{x:.1125,y:.35,w:.075,h:.1},{x:.1375,y:.35,w:.03125,h:.041666666666666664},{x:.1375,y:.35,w:.05,h:.06666666666666667},{x:.1375,y:.35,w:.075,h:.1},{x:.1625,y:.35,w:.03125,h:.041666666666666664},{x:.1625,y:.35,w:.05,h:.06666666666666667},{x:.1625,y:.35,w:.075,h:.1},{x:.1875,y:.35,w:.03125,h:.041666666666666664},{x:.1875,y:.35,w:.05,h:.06666666666666667},{x:.1875,y:.35,w:.075,h:.1},{x:.2125,y:.35,w:.03125,h:.041666666666666664},{x:.2125,y:.35,w:.05,h:.06666666666666667},{x:.2125,y:.35,w:.075,h:.1},{x:.2375,y:.35,w:.03125,h:.041666666666666664},{x:.2375,y:.35,w:.05,h:.06666666666666667},{x:.2375,y:.35,w:.075,h:.1},{x:.2625,y:.35,w:.03125,h:.041666666666666664},{x:.2625,y:.35,w:.05,h:.06666666666666667},{x:.2625,y:.35,w:.075,h:.1},{x:.2875,y:.35,w:.03125,h:.041666666666666664},{x:.2875,y:.35,w:.05,h:.06666666666666667},{x:.2875,y:.35,w:.075,h:.1},{x:.3125,y:.35,w:.03125,h:.041666666666666664},{x:.3125,y:.35,w:.05,h:.06666666666666667},{x:.3125,y:.35,w:.075,h:.1},{x:.3375,y:.35,w:.03125,h:.041666666666666664},{x:.3375,y:.35,w:.05,h:.06666666666666667},{x:.3375,y:.35,w:.075,h:.1},{x:.3625,y:.35,w:.03125,h:.041666666666666664},{x:.3625,y:.35,w:.05,h:.06666666666666667},{x:.3625,y:.35,w:.075,h:.1},{x:.3875,y:.35,w:.03125,h:.041666666666666664},{x:.3875,y:.35,w:.05,h:.06666666666666667},{x:.3875,y:.35,w:.075,h:.1},{x:.4125,y:.35,w:.03125,h:.041666666666666664},{x:.4125,y:.35,w:.05,h:.06666666666666667},{x:.4125,y:.35,w:.075,h:.1},{x:.4375,y:.35,w:.03125,h:.041666666666666664},{x:.4375,y:.35,w:.05,h:.06666666666666667},{x:.4375,y:.35,w:.075,h:.1},{x:.4625,y:.35,w:.03125,h:.041666666666666664},{x:.4625,y:.35,w:.05,h:.06666666666666667},{x:.4625,y:.35,w:.075,h:.1},{x:.4875,y:.35,w:.03125,h:.041666666666666664},{x:.4875,y:.35,w:.05,h:.06666666666666667},{x:.4875,y:.35,w:.075,h:.1},{x:.5125,y:.35,w:.03125,h:.041666666666666664},{x:.5125,y:.35,w:.05,h:.06666666666666667},{x:.5125,y:.35,w:.075,h:.1},{x:.5375,y:.35,w:.03125,h:.041666666666666664},{x:.5375,y:.35,w:.05,h:.06666666666666667},{x:.5375,y:.35,w:.075,h:.1},{x:.5625,y:.35,w:.03125,h:.041666666666666664},{x:.5625,y:.35,w:.05,h:.06666666666666667},{x:.5625,y:.35,w:.075,h:.1},{x:.5875,y:.35,w:.03125,h:.041666666666666664},{x:.5875,y:.35,w:.05,h:.06666666666666667},{x:.5875,y:.35,w:.075,h:.1},{x:.6125,y:.35,w:.03125,h:.041666666666666664},{x:.6125,y:.35,w:.05,h:.06666666666666667},{x:.6125,y:.35,w:.075,h:.1},{x:.6375,y:.35,w:.03125,h:.041666666666666664},{x:.6375,y:.35,w:.05,h:.06666666666666667},{x:.6375,y:.35,w:.075,h:.1},{x:.6625,y:.35,w:.03125,h:.041666666666666664},{x:.6625,y:.35,w:.05,h:.06666666666666667},{x:.6625,y:.35,w:.075,h:.1},{x:.6875,y:.35,w:.03125,h:.041666666666666664},{x:.6875,y:.35,w:.05,h:.06666666666666667},{x:.6875,y:.35,w:.075,h:.1},{x:.7125,y:.35,w:.03125,h:.041666666666666664},{x:.7125,y:.35,w:.05,h:.06666666666666667},{x:.7125,y:.35,w:.075,h:.1},{x:.7375,y:.35,w:.03125,h:.041666666666666664},{x:.7375,y:.35,w:.05,h:.06666666666666667},{x:.7375,y:.35,w:.075,h:.1},{x:.7625,y:.35,w:.03125,h:.041666666666666664},{x:.7625,y:.35,w:.05,h:.06666666666666667},{x:.7625,y:.35,w:.075,h:.1},{x:.7875,y:.35,w:.03125,h:.041666666666666664},{x:.7875,y:.35,w:.05,h:.06666666666666667},{x:.7875,y:.35,w:.075,h:.1},{x:.8125,y:.35,w:.03125,h:.041666666666666664},{x:.8125,y:.35,w:.05,h:.06666666666666667},{x:.8125,y:.35,w:.075,h:.1},{x:.8375,y:.35,w:.03125,h:.041666666666666664},{x:.8375,y:.35,w:.05,h:.06666666666666667},{x:.8375,y:.35,w:.075,h:.1},{x:.8625,y:.35,w:.03125,h:.041666666666666664},{x:.8625,y:.35,w:.05,h:.06666666666666667},{x:.8625,y:.35,w:.075,h:.1},{x:.8875,y:.35,w:.03125,h:.041666666666666664},{x:.8875,y:.35,w:.05,h:.06666666666666667},{x:.8875,y:.35,w:.075,h:.1},{x:.9125,y:.35,w:.03125,h:.041666666666666664},{x:.9125,y:.35,w:.05,h:.06666666666666667},{x:.9125,y:.35,w:.075,h:.1},{x:.9375,y:.35,w:.03125,h:.041666666666666664},{x:.9375,y:.35,w:.05,h:.06666666666666667},{x:.9375,y:.35,w:.075,h:.1},{x:.9625,y:.35,w:.03125,h:.041666666666666664},{x:.9625,y:.35,w:.05,h:.06666666666666667},{x:.9625,y:.35,w:.075,h:.1},{x:.9875,y:.35,w:.03125,h:.041666666666666664},{x:.9875,y:.35,w:.05,h:.06666666666666667},{x:.9875,y:.35,w:.075,h:.1},{x:.0125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.0125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.0125,y:.38333333333333336,w:.075,h:.1},{x:.0375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.0375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.0375,y:.38333333333333336,w:.075,h:.1},{x:.0625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.0625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.0625,y:.38333333333333336,w:.075,h:.1},{x:.0875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.0875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.0875,y:.38333333333333336,w:.075,h:.1},{x:.1125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.1125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.1125,y:.38333333333333336,w:.075,h:.1},{x:.1375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.1375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.1375,y:.38333333333333336,w:.075,h:.1},{x:.1625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.1625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.1625,y:.38333333333333336,w:.075,h:.1},{x:.1875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.1875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.1875,y:.38333333333333336,w:.075,h:.1},{x:.2125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.2125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.2125,y:.38333333333333336,w:.075,h:.1},{x:.2375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.2375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.2375,y:.38333333333333336,w:.075,h:.1},{x:.2625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.2625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.2625,y:.38333333333333336,w:.075,h:.1},{x:.2875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.2875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.2875,y:.38333333333333336,w:.075,h:.1},{x:.3125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.3125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.3125,y:.38333333333333336,w:.075,h:.1},{x:.3375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.3375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.3375,y:.38333333333333336,w:.075,h:.1},{x:.3625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.3625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.3625,y:.38333333333333336,w:.075,h:.1},{x:.3875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.3875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.3875,y:.38333333333333336,w:.075,h:.1},{x:.4125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.4125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.4125,y:.38333333333333336,w:.075,h:.1},{x:.4375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.4375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.4375,y:.38333333333333336,w:.075,h:.1},{x:.4625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.4625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.4625,y:.38333333333333336,w:.075,h:.1},{x:.4875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.4875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.4875,y:.38333333333333336,w:.075,h:.1},{x:.5125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.5125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.5125,y:.38333333333333336,w:.075,h:.1},{x:.5375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.5375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.5375,y:.38333333333333336,w:.075,h:.1},{x:.5625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.5625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.5625,y:.38333333333333336,w:.075,h:.1},{x:.5875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.5875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.5875,y:.38333333333333336,w:.075,h:.1},{x:.6125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.6125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.6125,y:.38333333333333336,w:.075,h:.1},{x:.6375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.6375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.6375,y:.38333333333333336,w:.075,h:.1},{x:.6625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.6625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.6625,y:.38333333333333336,w:.075,h:.1},{x:.6875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.6875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.6875,y:.38333333333333336,w:.075,h:.1},{x:.7125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.7125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.7125,y:.38333333333333336,w:.075,h:.1},{x:.7375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.7375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.7375,y:.38333333333333336,w:.075,h:.1},{x:.7625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.7625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.7625,y:.38333333333333336,w:.075,h:.1},{x:.7875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.7875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.7875,y:.38333333333333336,w:.075,h:.1},{x:.8125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.8125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.8125,y:.38333333333333336,w:.075,h:.1},{x:.8375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.8375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.8375,y:.38333333333333336,w:.075,h:.1},{x:.8625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.8625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.8625,y:.38333333333333336,w:.075,h:.1},{x:.8875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.8875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.8875,y:.38333333333333336,w:.075,h:.1},{x:.9125,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.9125,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.9125,y:.38333333333333336,w:.075,h:.1},{x:.9375,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.9375,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.9375,y:.38333333333333336,w:.075,h:.1},{x:.9625,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.9625,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.9625,y:.38333333333333336,w:.075,h:.1},{x:.9875,y:.38333333333333336,w:.03125,h:.041666666666666664},{x:.9875,y:.38333333333333336,w:.05,h:.06666666666666667},{x:.9875,y:.38333333333333336,w:.075,h:.1},{x:.0125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.0125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.0125,y:.4166666666666667,w:.075,h:.1},{x:.0375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.0375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.0375,y:.4166666666666667,w:.075,h:.1},{x:.0625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.0625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.0625,y:.4166666666666667,w:.075,h:.1},{x:.0875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.0875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.0875,y:.4166666666666667,w:.075,h:.1},{x:.1125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.1125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.1125,y:.4166666666666667,w:.075,h:.1},{x:.1375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.1375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.1375,y:.4166666666666667,w:.075,h:.1},{x:.1625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.1625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.1625,y:.4166666666666667,w:.075,h:.1},{x:.1875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.1875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.1875,y:.4166666666666667,w:.075,h:.1},{x:.2125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.2125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.2125,y:.4166666666666667,w:.075,h:.1},{x:.2375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.2375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.2375,y:.4166666666666667,w:.075,h:.1},{x:.2625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.2625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.2625,y:.4166666666666667,w:.075,h:.1},{x:.2875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.2875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.2875,y:.4166666666666667,w:.075,h:.1},{x:.3125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.3125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.3125,y:.4166666666666667,w:.075,h:.1},{x:.3375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.3375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.3375,y:.4166666666666667,w:.075,h:.1},{x:.3625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.3625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.3625,y:.4166666666666667,w:.075,h:.1},{x:.3875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.3875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.3875,y:.4166666666666667,w:.075,h:.1},{x:.4125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.4125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.4125,y:.4166666666666667,w:.075,h:.1},{x:.4375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.4375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.4375,y:.4166666666666667,w:.075,h:.1},{x:.4625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.4625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.4625,y:.4166666666666667,w:.075,h:.1},{x:.4875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.4875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.4875,y:.4166666666666667,w:.075,h:.1},{x:.5125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.5125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.5125,y:.4166666666666667,w:.075,h:.1},{x:.5375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.5375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.5375,y:.4166666666666667,w:.075,h:.1},{x:.5625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.5625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.5625,y:.4166666666666667,w:.075,h:.1},{x:.5875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.5875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.5875,y:.4166666666666667,w:.075,h:.1},{x:.6125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.6125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.6125,y:.4166666666666667,w:.075,h:.1},{x:.6375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.6375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.6375,y:.4166666666666667,w:.075,h:.1},{x:.6625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.6625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.6625,y:.4166666666666667,w:.075,h:.1},{x:.6875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.6875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.6875,y:.4166666666666667,w:.075,h:.1},{x:.7125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.7125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.7125,y:.4166666666666667,w:.075,h:.1},{x:.7375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.7375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.7375,y:.4166666666666667,w:.075,h:.1},{x:.7625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.7625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.7625,y:.4166666666666667,w:.075,h:.1},{x:.7875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.7875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.7875,y:.4166666666666667,w:.075,h:.1},{x:.8125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.8125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.8125,y:.4166666666666667,w:.075,h:.1},{x:.8375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.8375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.8375,y:.4166666666666667,w:.075,h:.1},{x:.8625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.8625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.8625,y:.4166666666666667,w:.075,h:.1},{x:.8875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.8875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.8875,y:.4166666666666667,w:.075,h:.1},{x:.9125,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.9125,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.9125,y:.4166666666666667,w:.075,h:.1},{x:.9375,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.9375,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.9375,y:.4166666666666667,w:.075,h:.1},{x:.9625,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.9625,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.9625,y:.4166666666666667,w:.075,h:.1},{x:.9875,y:.4166666666666667,w:.03125,h:.041666666666666664},{x:.9875,y:.4166666666666667,w:.05,h:.06666666666666667},{x:.9875,y:.4166666666666667,w:.075,h:.1},{x:.0125,y:.45,w:.03125,h:.041666666666666664},{x:.0125,y:.45,w:.05,h:.06666666666666667},{x:.0125,y:.45,w:.075,h:.1},{x:.0375,y:.45,w:.03125,h:.041666666666666664},{x:.0375,y:.45,w:.05,h:.06666666666666667},{x:.0375,y:.45,w:.075,h:.1},{x:.0625,y:.45,w:.03125,h:.041666666666666664},{x:.0625,y:.45,w:.05,h:.06666666666666667},{x:.0625,y:.45,w:.075,h:.1},{x:.0875,y:.45,w:.03125,h:.041666666666666664},{x:.0875,y:.45,w:.05,h:.06666666666666667},{x:.0875,y:.45,w:.075,h:.1},{x:.1125,y:.45,w:.03125,h:.041666666666666664},{x:.1125,y:.45,w:.05,h:.06666666666666667},{x:.1125,y:.45,w:.075,h:.1},{x:.1375,y:.45,w:.03125,h:.041666666666666664},{x:.1375,y:.45,w:.05,h:.06666666666666667},{x:.1375,y:.45,w:.075,h:.1},{x:.1625,y:.45,w:.03125,h:.041666666666666664},{x:.1625,y:.45,w:.05,h:.06666666666666667},{x:.1625,y:.45,w:.075,h:.1},{x:.1875,y:.45,w:.03125,h:.041666666666666664},{x:.1875,y:.45,w:.05,h:.06666666666666667},{x:.1875,y:.45,w:.075,h:.1},{x:.2125,y:.45,w:.03125,h:.041666666666666664},{x:.2125,y:.45,w:.05,h:.06666666666666667},{x:.2125,y:.45,w:.075,h:.1},{x:.2375,y:.45,w:.03125,h:.041666666666666664},{x:.2375,y:.45,w:.05,h:.06666666666666667},{x:.2375,y:.45,w:.075,h:.1},{x:.2625,y:.45,w:.03125,h:.041666666666666664},{x:.2625,y:.45,w:.05,h:.06666666666666667},{x:.2625,y:.45,w:.075,h:.1},{x:.2875,y:.45,w:.03125,h:.041666666666666664},{x:.2875,y:.45,w:.05,h:.06666666666666667},{x:.2875,y:.45,w:.075,h:.1},{x:.3125,y:.45,w:.03125,h:.041666666666666664},{x:.3125,y:.45,w:.05,h:.06666666666666667},{x:.3125,y:.45,w:.075,h:.1},{x:.3375,y:.45,w:.03125,h:.041666666666666664},{x:.3375,y:.45,w:.05,h:.06666666666666667},{x:.3375,y:.45,w:.075,h:.1},{x:.3625,y:.45,w:.03125,h:.041666666666666664},{x:.3625,y:.45,w:.05,h:.06666666666666667},{x:.3625,y:.45,w:.075,h:.1},{x:.3875,y:.45,w:.03125,h:.041666666666666664},{x:.3875,y:.45,w:.05,h:.06666666666666667},{x:.3875,y:.45,w:.075,h:.1},{x:.4125,y:.45,w:.03125,h:.041666666666666664},{x:.4125,y:.45,w:.05,h:.06666666666666667},{x:.4125,y:.45,w:.075,h:.1},{x:.4375,y:.45,w:.03125,h:.041666666666666664},{x:.4375,y:.45,w:.05,h:.06666666666666667},{x:.4375,y:.45,w:.075,h:.1},{x:.4625,y:.45,w:.03125,h:.041666666666666664},{x:.4625,y:.45,w:.05,h:.06666666666666667},{x:.4625,y:.45,w:.075,h:.1},{x:.4875,y:.45,w:.03125,h:.041666666666666664},{x:.4875,y:.45,w:.05,h:.06666666666666667},{x:.4875,y:.45,w:.075,h:.1},{x:.5125,y:.45,w:.03125,h:.041666666666666664},{x:.5125,y:.45,w:.05,h:.06666666666666667},{x:.5125,y:.45,w:.075,h:.1},{x:.5375,y:.45,w:.03125,h:.041666666666666664},{x:.5375,y:.45,w:.05,h:.06666666666666667},{x:.5375,y:.45,w:.075,h:.1},{x:.5625,y:.45,w:.03125,h:.041666666666666664},{x:.5625,y:.45,w:.05,h:.06666666666666667},{x:.5625,y:.45,w:.075,h:.1},{x:.5875,y:.45,w:.03125,h:.041666666666666664},{x:.5875,y:.45,w:.05,h:.06666666666666667},{x:.5875,y:.45,w:.075,h:.1},{x:.6125,y:.45,w:.03125,h:.041666666666666664},{x:.6125,y:.45,w:.05,h:.06666666666666667},{x:.6125,y:.45,w:.075,h:.1},{x:.6375,y:.45,w:.03125,h:.041666666666666664},{x:.6375,y:.45,w:.05,h:.06666666666666667},{x:.6375,y:.45,w:.075,h:.1},{x:.6625,y:.45,w:.03125,h:.041666666666666664},{x:.6625,y:.45,w:.05,h:.06666666666666667},{x:.6625,y:.45,w:.075,h:.1},{x:.6875,y:.45,w:.03125,h:.041666666666666664},{x:.6875,y:.45,w:.05,h:.06666666666666667},{x:.6875,y:.45,w:.075,h:.1},{x:.7125,y:.45,w:.03125,h:.041666666666666664},{x:.7125,y:.45,w:.05,h:.06666666666666667},{x:.7125,y:.45,w:.075,h:.1},{x:.7375,y:.45,w:.03125,h:.041666666666666664},{x:.7375,y:.45,w:.05,h:.06666666666666667},{x:.7375,y:.45,w:.075,h:.1},{x:.7625,y:.45,w:.03125,h:.041666666666666664},{x:.7625,y:.45,w:.05,h:.06666666666666667},{x:.7625,y:.45,w:.075,h:.1},{x:.7875,y:.45,w:.03125,h:.041666666666666664},{x:.7875,y:.45,w:.05,h:.06666666666666667},{x:.7875,y:.45,w:.075,h:.1},{x:.8125,y:.45,w:.03125,h:.041666666666666664},{x:.8125,y:.45,w:.05,h:.06666666666666667},{x:.8125,y:.45,w:.075,h:.1},{x:.8375,y:.45,w:.03125,h:.041666666666666664},{x:.8375,y:.45,w:.05,h:.06666666666666667},{x:.8375,y:.45,w:.075,h:.1},{x:.8625,y:.45,w:.03125,h:.041666666666666664},{x:.8625,y:.45,w:.05,h:.06666666666666667},{x:.8625,y:.45,w:.075,h:.1},{x:.8875,y:.45,w:.03125,h:.041666666666666664},{x:.8875,y:.45,w:.05,h:.06666666666666667},{x:.8875,y:.45,w:.075,h:.1},{x:.9125,y:.45,w:.03125,h:.041666666666666664},{x:.9125,y:.45,w:.05,h:.06666666666666667},{x:.9125,y:.45,w:.075,h:.1},{x:.9375,y:.45,w:.03125,h:.041666666666666664},{x:.9375,y:.45,w:.05,h:.06666666666666667},{x:.9375,y:.45,w:.075,h:.1},{x:.9625,y:.45,w:.03125,h:.041666666666666664},{x:.9625,y:.45,w:.05,h:.06666666666666667},{x:.9625,y:.45,w:.075,h:.1},{x:.9875,y:.45,w:.03125,h:.041666666666666664},{x:.9875,y:.45,w:.05,h:.06666666666666667},{x:.9875,y:.45,w:.075,h:.1},{x:.0125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.0125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.0125,y:.48333333333333334,w:.075,h:.1},{x:.0375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.0375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.0375,y:.48333333333333334,w:.075,h:.1},{x:.0625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.0625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.0625,y:.48333333333333334,w:.075,h:.1},{x:.0875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.0875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.0875,y:.48333333333333334,w:.075,h:.1},{x:.1125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.1125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.1125,y:.48333333333333334,w:.075,h:.1},{x:.1375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.1375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.1375,y:.48333333333333334,w:.075,h:.1},{x:.1625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.1625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.1625,y:.48333333333333334,w:.075,h:.1},{x:.1875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.1875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.1875,y:.48333333333333334,w:.075,h:.1},{x:.2125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.2125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.2125,y:.48333333333333334,w:.075,h:.1},{x:.2375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.2375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.2375,y:.48333333333333334,w:.075,h:.1},{x:.2625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.2625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.2625,y:.48333333333333334,w:.075,h:.1},{x:.2875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.2875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.2875,y:.48333333333333334,w:.075,h:.1},{x:.3125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.3125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.3125,y:.48333333333333334,w:.075,h:.1},{x:.3375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.3375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.3375,y:.48333333333333334,w:.075,h:.1},{x:.3625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.3625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.3625,y:.48333333333333334,w:.075,h:.1},{x:.3875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.3875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.3875,y:.48333333333333334,w:.075,h:.1},{x:.4125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.4125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.4125,y:.48333333333333334,w:.075,h:.1},{x:.4375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.4375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.4375,y:.48333333333333334,w:.075,h:.1},{x:.4625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.4625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.4625,y:.48333333333333334,w:.075,h:.1},{x:.4875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.4875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.4875,y:.48333333333333334,w:.075,h:.1},{x:.5125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.5125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.5125,y:.48333333333333334,w:.075,h:.1},{x:.5375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.5375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.5375,y:.48333333333333334,w:.075,h:.1},{x:.5625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.5625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.5625,y:.48333333333333334,w:.075,h:.1},{x:.5875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.5875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.5875,y:.48333333333333334,w:.075,h:.1},{x:.6125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.6125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.6125,y:.48333333333333334,w:.075,h:.1},{x:.6375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.6375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.6375,y:.48333333333333334,w:.075,h:.1},{x:.6625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.6625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.6625,y:.48333333333333334,w:.075,h:.1},{x:.6875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.6875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.6875,y:.48333333333333334,w:.075,h:.1},{x:.7125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.7125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.7125,y:.48333333333333334,w:.075,h:.1},{x:.7375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.7375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.7375,y:.48333333333333334,w:.075,h:.1},{x:.7625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.7625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.7625,y:.48333333333333334,w:.075,h:.1},{x:.7875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.7875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.7875,y:.48333333333333334,w:.075,h:.1},{x:.8125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.8125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.8125,y:.48333333333333334,w:.075,h:.1},{x:.8375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.8375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.8375,y:.48333333333333334,w:.075,h:.1},{x:.8625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.8625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.8625,y:.48333333333333334,w:.075,h:.1},{x:.8875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.8875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.8875,y:.48333333333333334,w:.075,h:.1},{x:.9125,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.9125,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.9125,y:.48333333333333334,w:.075,h:.1},{x:.9375,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.9375,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.9375,y:.48333333333333334,w:.075,h:.1},{x:.9625,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.9625,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.9625,y:.48333333333333334,w:.075,h:.1},{x:.9875,y:.48333333333333334,w:.03125,h:.041666666666666664},{x:.9875,y:.48333333333333334,w:.05,h:.06666666666666667},{x:.9875,y:.48333333333333334,w:.075,h:.1},{x:.0125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.0125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.0125,y:.5166666666666667,w:.075,h:.1},{x:.0375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.0375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.0375,y:.5166666666666667,w:.075,h:.1},{x:.0625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.0625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.0625,y:.5166666666666667,w:.075,h:.1},{x:.0875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.0875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.0875,y:.5166666666666667,w:.075,h:.1},{x:.1125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.1125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.1125,y:.5166666666666667,w:.075,h:.1},{x:.1375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.1375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.1375,y:.5166666666666667,w:.075,h:.1},{x:.1625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.1625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.1625,y:.5166666666666667,w:.075,h:.1},{x:.1875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.1875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.1875,y:.5166666666666667,w:.075,h:.1},{x:.2125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.2125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.2125,y:.5166666666666667,w:.075,h:.1},{x:.2375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.2375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.2375,y:.5166666666666667,w:.075,h:.1},{x:.2625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.2625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.2625,y:.5166666666666667,w:.075,h:.1},{x:.2875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.2875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.2875,y:.5166666666666667,w:.075,h:.1},{x:.3125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.3125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.3125,y:.5166666666666667,w:.075,h:.1},{x:.3375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.3375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.3375,y:.5166666666666667,w:.075,h:.1},{x:.3625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.3625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.3625,y:.5166666666666667,w:.075,h:.1},{x:.3875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.3875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.3875,y:.5166666666666667,w:.075,h:.1},{x:.4125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.4125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.4125,y:.5166666666666667,w:.075,h:.1},{x:.4375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.4375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.4375,y:.5166666666666667,w:.075,h:.1},{x:.4625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.4625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.4625,y:.5166666666666667,w:.075,h:.1},{x:.4875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.4875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.4875,y:.5166666666666667,w:.075,h:.1},{x:.5125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.5125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.5125,y:.5166666666666667,w:.075,h:.1},{x:.5375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.5375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.5375,y:.5166666666666667,w:.075,h:.1},{x:.5625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.5625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.5625,y:.5166666666666667,w:.075,h:.1},{x:.5875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.5875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.5875,y:.5166666666666667,w:.075,h:.1},{x:.6125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.6125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.6125,y:.5166666666666667,w:.075,h:.1},{x:.6375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.6375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.6375,y:.5166666666666667,w:.075,h:.1},{x:.6625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.6625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.6625,y:.5166666666666667,w:.075,h:.1},{x:.6875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.6875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.6875,y:.5166666666666667,w:.075,h:.1},{x:.7125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.7125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.7125,y:.5166666666666667,w:.075,h:.1},{x:.7375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.7375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.7375,y:.5166666666666667,w:.075,h:.1},{x:.7625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.7625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.7625,y:.5166666666666667,w:.075,h:.1},{x:.7875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.7875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.7875,y:.5166666666666667,w:.075,h:.1},{x:.8125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.8125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.8125,y:.5166666666666667,w:.075,h:.1},{x:.8375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.8375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.8375,y:.5166666666666667,w:.075,h:.1},{x:.8625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.8625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.8625,y:.5166666666666667,w:.075,h:.1},{x:.8875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.8875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.8875,y:.5166666666666667,w:.075,h:.1},{x:.9125,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.9125,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.9125,y:.5166666666666667,w:.075,h:.1},{x:.9375,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.9375,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.9375,y:.5166666666666667,w:.075,h:.1},{x:.9625,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.9625,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.9625,y:.5166666666666667,w:.075,h:.1},{x:.9875,y:.5166666666666667,w:.03125,h:.041666666666666664},{x:.9875,y:.5166666666666667,w:.05,h:.06666666666666667},{x:.9875,y:.5166666666666667,w:.075,h:.1},{x:.0125,y:.55,w:.03125,h:.041666666666666664},{x:.0125,y:.55,w:.05,h:.06666666666666667},{x:.0125,y:.55,w:.075,h:.1},{x:.0375,y:.55,w:.03125,h:.041666666666666664},{x:.0375,y:.55,w:.05,h:.06666666666666667},{x:.0375,y:.55,w:.075,h:.1},{x:.0625,y:.55,w:.03125,h:.041666666666666664},{x:.0625,y:.55,w:.05,h:.06666666666666667},{x:.0625,y:.55,w:.075,h:.1},{x:.0875,y:.55,w:.03125,h:.041666666666666664},{x:.0875,y:.55,w:.05,h:.06666666666666667},{x:.0875,y:.55,w:.075,h:.1},{x:.1125,y:.55,w:.03125,h:.041666666666666664},{x:.1125,y:.55,w:.05,h:.06666666666666667},{x:.1125,y:.55,w:.075,h:.1},{x:.1375,y:.55,w:.03125,h:.041666666666666664},{x:.1375,y:.55,w:.05,h:.06666666666666667},{x:.1375,y:.55,w:.075,h:.1},{x:.1625,y:.55,w:.03125,h:.041666666666666664},{x:.1625,y:.55,w:.05,h:.06666666666666667},{x:.1625,y:.55,w:.075,h:.1},{x:.1875,y:.55,w:.03125,h:.041666666666666664},{x:.1875,y:.55,w:.05,h:.06666666666666667},{x:.1875,y:.55,w:.075,h:.1},{x:.2125,y:.55,w:.03125,h:.041666666666666664},{x:.2125,y:.55,w:.05,h:.06666666666666667},{x:.2125,y:.55,w:.075,h:.1},{x:.2375,y:.55,w:.03125,h:.041666666666666664},{x:.2375,y:.55,w:.05,h:.06666666666666667},{x:.2375,y:.55,w:.075,h:.1},{x:.2625,y:.55,w:.03125,h:.041666666666666664},{x:.2625,y:.55,w:.05,h:.06666666666666667},{x:.2625,y:.55,w:.075,h:.1},{x:.2875,y:.55,w:.03125,h:.041666666666666664},{x:.2875,y:.55,w:.05,h:.06666666666666667},{x:.2875,y:.55,w:.075,h:.1},{x:.3125,y:.55,w:.03125,h:.041666666666666664},{x:.3125,y:.55,w:.05,h:.06666666666666667},{x:.3125,y:.55,w:.075,h:.1},{x:.3375,y:.55,w:.03125,h:.041666666666666664},{x:.3375,y:.55,w:.05,h:.06666666666666667},{x:.3375,y:.55,w:.075,h:.1},{x:.3625,y:.55,w:.03125,h:.041666666666666664},{x:.3625,y:.55,w:.05,h:.06666666666666667},{x:.3625,y:.55,w:.075,h:.1},{x:.3875,y:.55,w:.03125,h:.041666666666666664},{x:.3875,y:.55,w:.05,h:.06666666666666667},{x:.3875,y:.55,w:.075,h:.1},{x:.4125,y:.55,w:.03125,h:.041666666666666664},{x:.4125,y:.55,w:.05,h:.06666666666666667},{x:.4125,y:.55,w:.075,h:.1},{x:.4375,y:.55,w:.03125,h:.041666666666666664},{x:.4375,y:.55,w:.05,h:.06666666666666667},{x:.4375,y:.55,w:.075,h:.1},{x:.4625,y:.55,w:.03125,h:.041666666666666664},{x:.4625,y:.55,w:.05,h:.06666666666666667},{x:.4625,y:.55,w:.075,h:.1},{x:.4875,y:.55,w:.03125,h:.041666666666666664},{x:.4875,y:.55,w:.05,h:.06666666666666667},{x:.4875,y:.55,w:.075,h:.1},{x:.5125,y:.55,w:.03125,h:.041666666666666664},{x:.5125,y:.55,w:.05,h:.06666666666666667},{x:.5125,y:.55,w:.075,h:.1},{x:.5375,y:.55,w:.03125,h:.041666666666666664},{x:.5375,y:.55,w:.05,h:.06666666666666667},{x:.5375,y:.55,w:.075,h:.1},{x:.5625,y:.55,w:.03125,h:.041666666666666664},{x:.5625,y:.55,w:.05,h:.06666666666666667},{x:.5625,y:.55,w:.075,h:.1},{x:.5875,y:.55,w:.03125,h:.041666666666666664},{x:.5875,y:.55,w:.05,h:.06666666666666667},{x:.5875,y:.55,w:.075,h:.1},{x:.6125,y:.55,w:.03125,h:.041666666666666664},{x:.6125,y:.55,w:.05,h:.06666666666666667},{x:.6125,y:.55,w:.075,h:.1},{x:.6375,y:.55,w:.03125,h:.041666666666666664},{x:.6375,y:.55,w:.05,h:.06666666666666667},{x:.6375,y:.55,w:.075,h:.1},{x:.6625,y:.55,w:.03125,h:.041666666666666664},{x:.6625,y:.55,w:.05,h:.06666666666666667},{x:.6625,y:.55,w:.075,h:.1},{x:.6875,y:.55,w:.03125,h:.041666666666666664},{x:.6875,y:.55,w:.05,h:.06666666666666667},{x:.6875,y:.55,w:.075,h:.1},{x:.7125,y:.55,w:.03125,h:.041666666666666664},{x:.7125,y:.55,w:.05,h:.06666666666666667},{x:.7125,y:.55,w:.075,h:.1},{x:.7375,y:.55,w:.03125,h:.041666666666666664},{x:.7375,y:.55,w:.05,h:.06666666666666667},{x:.7375,y:.55,w:.075,h:.1},{x:.7625,y:.55,w:.03125,h:.041666666666666664},{x:.7625,y:.55,w:.05,h:.06666666666666667},{x:.7625,y:.55,w:.075,h:.1},{x:.7875,y:.55,w:.03125,h:.041666666666666664},{x:.7875,y:.55,w:.05,h:.06666666666666667},{x:.7875,y:.55,w:.075,h:.1},{x:.8125,y:.55,w:.03125,h:.041666666666666664},{x:.8125,y:.55,w:.05,h:.06666666666666667},{x:.8125,y:.55,w:.075,h:.1},{x:.8375,y:.55,w:.03125,h:.041666666666666664},{x:.8375,y:.55,w:.05,h:.06666666666666667},{x:.8375,y:.55,w:.075,h:.1},{x:.8625,y:.55,w:.03125,h:.041666666666666664},{x:.8625,y:.55,w:.05,h:.06666666666666667},{x:.8625,y:.55,w:.075,h:.1},{x:.8875,y:.55,w:.03125,h:.041666666666666664},{x:.8875,y:.55,w:.05,h:.06666666666666667},{x:.8875,y:.55,w:.075,h:.1},{x:.9125,y:.55,w:.03125,h:.041666666666666664},{x:.9125,y:.55,w:.05,h:.06666666666666667},{x:.9125,y:.55,w:.075,h:.1},{x:.9375,y:.55,w:.03125,h:.041666666666666664},{x:.9375,y:.55,w:.05,h:.06666666666666667},{x:.9375,y:.55,w:.075,h:.1},{x:.9625,y:.55,w:.03125,h:.041666666666666664},{x:.9625,y:.55,w:.05,h:.06666666666666667},{x:.9625,y:.55,w:.075,h:.1},{x:.9875,y:.55,w:.03125,h:.041666666666666664},{x:.9875,y:.55,w:.05,h:.06666666666666667},{x:.9875,y:.55,w:.075,h:.1},{x:.0125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.0125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.0125,y:.5833333333333334,w:.075,h:.1},{x:.0375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.0375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.0375,y:.5833333333333334,w:.075,h:.1},{x:.0625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.0625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.0625,y:.5833333333333334,w:.075,h:.1},{x:.0875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.0875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.0875,y:.5833333333333334,w:.075,h:.1},{x:.1125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.1125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.1125,y:.5833333333333334,w:.075,h:.1},{x:.1375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.1375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.1375,y:.5833333333333334,w:.075,h:.1},{x:.1625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.1625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.1625,y:.5833333333333334,w:.075,h:.1},{x:.1875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.1875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.1875,y:.5833333333333334,w:.075,h:.1},{x:.2125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.2125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.2125,y:.5833333333333334,w:.075,h:.1},{x:.2375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.2375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.2375,y:.5833333333333334,w:.075,h:.1},{x:.2625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.2625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.2625,y:.5833333333333334,w:.075,h:.1},{x:.2875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.2875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.2875,y:.5833333333333334,w:.075,h:.1},{x:.3125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.3125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.3125,y:.5833333333333334,w:.075,h:.1},{x:.3375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.3375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.3375,y:.5833333333333334,w:.075,h:.1},{x:.3625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.3625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.3625,y:.5833333333333334,w:.075,h:.1},{x:.3875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.3875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.3875,y:.5833333333333334,w:.075,h:.1},{x:.4125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.4125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.4125,y:.5833333333333334,w:.075,h:.1},{x:.4375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.4375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.4375,y:.5833333333333334,w:.075,h:.1},{x:.4625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.4625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.4625,y:.5833333333333334,w:.075,h:.1},{x:.4875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.4875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.4875,y:.5833333333333334,w:.075,h:.1},{x:.5125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.5125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.5125,y:.5833333333333334,w:.075,h:.1},{x:.5375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.5375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.5375,y:.5833333333333334,w:.075,h:.1},{x:.5625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.5625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.5625,y:.5833333333333334,w:.075,h:.1},{x:.5875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.5875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.5875,y:.5833333333333334,w:.075,h:.1},{x:.6125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.6125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.6125,y:.5833333333333334,w:.075,h:.1},{x:.6375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.6375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.6375,y:.5833333333333334,w:.075,h:.1},{x:.6625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.6625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.6625,y:.5833333333333334,w:.075,h:.1},{x:.6875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.6875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.6875,y:.5833333333333334,w:.075,h:.1},{x:.7125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.7125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.7125,y:.5833333333333334,w:.075,h:.1},{x:.7375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.7375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.7375,y:.5833333333333334,w:.075,h:.1},{x:.7625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.7625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.7625,y:.5833333333333334,w:.075,h:.1},{x:.7875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.7875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.7875,y:.5833333333333334,w:.075,h:.1},{x:.8125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.8125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.8125,y:.5833333333333334,w:.075,h:.1},{x:.8375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.8375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.8375,y:.5833333333333334,w:.075,h:.1},{x:.8625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.8625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.8625,y:.5833333333333334,w:.075,h:.1},{x:.8875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.8875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.8875,y:.5833333333333334,w:.075,h:.1},{x:.9125,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.9125,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.9125,y:.5833333333333334,w:.075,h:.1},{x:.9375,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.9375,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.9375,y:.5833333333333334,w:.075,h:.1},{x:.9625,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.9625,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.9625,y:.5833333333333334,w:.075,h:.1},{x:.9875,y:.5833333333333334,w:.03125,h:.041666666666666664},{x:.9875,y:.5833333333333334,w:.05,h:.06666666666666667},{x:.9875,y:.5833333333333334,w:.075,h:.1},{x:.0125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.0125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.0125,y:.6166666666666667,w:.075,h:.1},{x:.0375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.0375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.0375,y:.6166666666666667,w:.075,h:.1},{x:.0625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.0625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.0625,y:.6166666666666667,w:.075,h:.1},{x:.0875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.0875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.0875,y:.6166666666666667,w:.075,h:.1},{x:.1125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.1125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.1125,y:.6166666666666667,w:.075,h:.1},{x:.1375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.1375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.1375,y:.6166666666666667,w:.075,h:.1},{x:.1625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.1625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.1625,y:.6166666666666667,w:.075,h:.1},{x:.1875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.1875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.1875,y:.6166666666666667,w:.075,h:.1},{x:.2125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.2125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.2125,y:.6166666666666667,w:.075,h:.1},{x:.2375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.2375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.2375,y:.6166666666666667,w:.075,h:.1},{x:.2625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.2625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.2625,y:.6166666666666667,w:.075,h:.1},{x:.2875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.2875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.2875,y:.6166666666666667,w:.075,h:.1},{x:.3125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.3125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.3125,y:.6166666666666667,w:.075,h:.1},{x:.3375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.3375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.3375,y:.6166666666666667,w:.075,h:.1},{x:.3625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.3625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.3625,y:.6166666666666667,w:.075,h:.1},{x:.3875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.3875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.3875,y:.6166666666666667,w:.075,h:.1},{x:.4125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.4125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.4125,y:.6166666666666667,w:.075,h:.1},{x:.4375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.4375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.4375,y:.6166666666666667,w:.075,h:.1},{x:.4625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.4625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.4625,y:.6166666666666667,w:.075,h:.1},{x:.4875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.4875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.4875,y:.6166666666666667,w:.075,h:.1},{x:.5125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.5125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.5125,y:.6166666666666667,w:.075,h:.1},{x:.5375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.5375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.5375,y:.6166666666666667,w:.075,h:.1},{x:.5625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.5625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.5625,y:.6166666666666667,w:.075,h:.1},{x:.5875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.5875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.5875,y:.6166666666666667,w:.075,h:.1},{x:.6125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.6125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.6125,y:.6166666666666667,w:.075,h:.1},{x:.6375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.6375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.6375,y:.6166666666666667,w:.075,h:.1},{x:.6625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.6625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.6625,y:.6166666666666667,w:.075,h:.1},{x:.6875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.6875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.6875,y:.6166666666666667,w:.075,h:.1},{x:.7125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.7125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.7125,y:.6166666666666667,w:.075,h:.1},{x:.7375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.7375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.7375,y:.6166666666666667,w:.075,h:.1},{x:.7625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.7625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.7625,y:.6166666666666667,w:.075,h:.1},{x:.7875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.7875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.7875,y:.6166666666666667,w:.075,h:.1},{x:.8125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.8125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.8125,y:.6166666666666667,w:.075,h:.1},{x:.8375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.8375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.8375,y:.6166666666666667,w:.075,h:.1},{x:.8625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.8625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.8625,y:.6166666666666667,w:.075,h:.1},{x:.8875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.8875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.8875,y:.6166666666666667,w:.075,h:.1},{x:.9125,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.9125,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.9125,y:.6166666666666667,w:.075,h:.1},{x:.9375,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.9375,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.9375,y:.6166666666666667,w:.075,h:.1},{x:.9625,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.9625,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.9625,y:.6166666666666667,w:.075,h:.1},{x:.9875,y:.6166666666666667,w:.03125,h:.041666666666666664},{x:.9875,y:.6166666666666667,w:.05,h:.06666666666666667},{x:.9875,y:.6166666666666667,w:.075,h:.1},{x:.0125,y:.65,w:.03125,h:.041666666666666664},{x:.0125,y:.65,w:.05,h:.06666666666666667},{x:.0125,y:.65,w:.075,h:.1},{x:.0375,y:.65,w:.03125,h:.041666666666666664},{x:.0375,y:.65,w:.05,h:.06666666666666667},{x:.0375,y:.65,w:.075,h:.1},{x:.0625,y:.65,w:.03125,h:.041666666666666664},{x:.0625,y:.65,w:.05,h:.06666666666666667},{x:.0625,y:.65,w:.075,h:.1},{x:.0875,y:.65,w:.03125,h:.041666666666666664},{x:.0875,y:.65,w:.05,h:.06666666666666667},{x:.0875,y:.65,w:.075,h:.1},{x:.1125,y:.65,w:.03125,h:.041666666666666664},{x:.1125,y:.65,w:.05,h:.06666666666666667},{x:.1125,y:.65,w:.075,h:.1},{x:.1375,y:.65,w:.03125,h:.041666666666666664},{x:.1375,y:.65,w:.05,h:.06666666666666667},{x:.1375,y:.65,w:.075,h:.1},{x:.1625,y:.65,w:.03125,h:.041666666666666664},{x:.1625,y:.65,w:.05,h:.06666666666666667},{x:.1625,y:.65,w:.075,h:.1},{x:.1875,y:.65,w:.03125,h:.041666666666666664},{x:.1875,y:.65,w:.05,h:.06666666666666667},{x:.1875,y:.65,w:.075,h:.1},{x:.2125,y:.65,w:.03125,h:.041666666666666664},{x:.2125,y:.65,w:.05,h:.06666666666666667},{x:.2125,y:.65,w:.075,h:.1},{x:.2375,y:.65,w:.03125,h:.041666666666666664},{x:.2375,y:.65,w:.05,h:.06666666666666667},{x:.2375,y:.65,w:.075,h:.1},{x:.2625,y:.65,w:.03125,h:.041666666666666664},{x:.2625,y:.65,w:.05,h:.06666666666666667},{x:.2625,y:.65,w:.075,h:.1},{x:.2875,y:.65,w:.03125,h:.041666666666666664},{x:.2875,y:.65,w:.05,h:.06666666666666667},{x:.2875,y:.65,w:.075,h:.1},{x:.3125,y:.65,w:.03125,h:.041666666666666664},{x:.3125,y:.65,w:.05,h:.06666666666666667},{x:.3125,y:.65,w:.075,h:.1},{x:.3375,y:.65,w:.03125,h:.041666666666666664},{x:.3375,y:.65,w:.05,h:.06666666666666667},{x:.3375,y:.65,w:.075,h:.1},{x:.3625,y:.65,w:.03125,h:.041666666666666664},{x:.3625,y:.65,w:.05,h:.06666666666666667},{x:.3625,y:.65,w:.075,h:.1},{x:.3875,y:.65,w:.03125,h:.041666666666666664},{x:.3875,y:.65,w:.05,h:.06666666666666667},{x:.3875,y:.65,w:.075,h:.1},{x:.4125,y:.65,w:.03125,h:.041666666666666664},{x:.4125,y:.65,w:.05,h:.06666666666666667},{x:.4125,y:.65,w:.075,h:.1},{x:.4375,y:.65,w:.03125,h:.041666666666666664},{x:.4375,y:.65,w:.05,h:.06666666666666667},{x:.4375,y:.65,w:.075,h:.1},{x:.4625,y:.65,w:.03125,h:.041666666666666664},{x:.4625,y:.65,w:.05,h:.06666666666666667},{x:.4625,y:.65,w:.075,h:.1},{x:.4875,y:.65,w:.03125,h:.041666666666666664},{x:.4875,y:.65,w:.05,h:.06666666666666667},{x:.4875,y:.65,w:.075,h:.1},{x:.5125,y:.65,w:.03125,h:.041666666666666664},{x:.5125,y:.65,w:.05,h:.06666666666666667},{x:.5125,y:.65,w:.075,h:.1},{x:.5375,y:.65,w:.03125,h:.041666666666666664},{x:.5375,y:.65,w:.05,h:.06666666666666667},{x:.5375,y:.65,w:.075,h:.1},{x:.5625,y:.65,w:.03125,h:.041666666666666664},{x:.5625,y:.65,w:.05,h:.06666666666666667},{x:.5625,y:.65,w:.075,h:.1},{x:.5875,y:.65,w:.03125,h:.041666666666666664},{x:.5875,y:.65,w:.05,h:.06666666666666667},{x:.5875,y:.65,w:.075,h:.1},{x:.6125,y:.65,w:.03125,h:.041666666666666664},{x:.6125,y:.65,w:.05,h:.06666666666666667},{x:.6125,y:.65,w:.075,h:.1},{x:.6375,y:.65,w:.03125,h:.041666666666666664},{x:.6375,y:.65,w:.05,h:.06666666666666667},{x:.6375,y:.65,w:.075,h:.1},{x:.6625,y:.65,w:.03125,h:.041666666666666664},{x:.6625,y:.65,w:.05,h:.06666666666666667},{x:.6625,y:.65,w:.075,h:.1},{x:.6875,y:.65,w:.03125,h:.041666666666666664},{x:.6875,y:.65,w:.05,h:.06666666666666667},{x:.6875,y:.65,w:.075,h:.1},{x:.7125,y:.65,w:.03125,h:.041666666666666664},{x:.7125,y:.65,w:.05,h:.06666666666666667},{x:.7125,y:.65,w:.075,h:.1},{x:.7375,y:.65,w:.03125,h:.041666666666666664},{x:.7375,y:.65,w:.05,h:.06666666666666667},{x:.7375,y:.65,w:.075,h:.1},{x:.7625,y:.65,w:.03125,h:.041666666666666664},{x:.7625,y:.65,w:.05,h:.06666666666666667},{x:.7625,y:.65,w:.075,h:.1},{x:.7875,y:.65,w:.03125,h:.041666666666666664},{x:.7875,y:.65,w:.05,h:.06666666666666667},{x:.7875,y:.65,w:.075,h:.1},{x:.8125,y:.65,w:.03125,h:.041666666666666664},{x:.8125,y:.65,w:.05,h:.06666666666666667},{x:.8125,y:.65,w:.075,h:.1},{x:.8375,y:.65,w:.03125,h:.041666666666666664},{x:.8375,y:.65,w:.05,h:.06666666666666667},{x:.8375,y:.65,w:.075,h:.1},{x:.8625,y:.65,w:.03125,h:.041666666666666664},{x:.8625,y:.65,w:.05,h:.06666666666666667},{x:.8625,y:.65,w:.075,h:.1},{x:.8875,y:.65,w:.03125,h:.041666666666666664},{x:.8875,y:.65,w:.05,h:.06666666666666667},{x:.8875,y:.65,w:.075,h:.1},{x:.9125,y:.65,w:.03125,h:.041666666666666664},{x:.9125,y:.65,w:.05,h:.06666666666666667},{x:.9125,y:.65,w:.075,h:.1},{x:.9375,y:.65,w:.03125,h:.041666666666666664},{x:.9375,y:.65,w:.05,h:.06666666666666667},{x:.9375,y:.65,w:.075,h:.1},{x:.9625,y:.65,w:.03125,h:.041666666666666664},{x:.9625,y:.65,w:.05,h:.06666666666666667},{x:.9625,y:.65,w:.075,h:.1},{x:.9875,y:.65,w:.03125,h:.041666666666666664},{x:.9875,y:.65,w:.05,h:.06666666666666667},{x:.9875,y:.65,w:.075,h:.1},{x:.0125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.0125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.0125,y:.6833333333333333,w:.075,h:.1},{x:.0375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.0375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.0375,y:.6833333333333333,w:.075,h:.1},{x:.0625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.0625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.0625,y:.6833333333333333,w:.075,h:.1},{x:.0875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.0875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.0875,y:.6833333333333333,w:.075,h:.1},{x:.1125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.1125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.1125,y:.6833333333333333,w:.075,h:.1},{x:.1375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.1375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.1375,y:.6833333333333333,w:.075,h:.1},{x:.1625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.1625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.1625,y:.6833333333333333,w:.075,h:.1},{x:.1875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.1875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.1875,y:.6833333333333333,w:.075,h:.1},{x:.2125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.2125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.2125,y:.6833333333333333,w:.075,h:.1},{x:.2375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.2375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.2375,y:.6833333333333333,w:.075,h:.1},{x:.2625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.2625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.2625,y:.6833333333333333,w:.075,h:.1},{x:.2875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.2875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.2875,y:.6833333333333333,w:.075,h:.1},{x:.3125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.3125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.3125,y:.6833333333333333,w:.075,h:.1},{x:.3375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.3375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.3375,y:.6833333333333333,w:.075,h:.1},{x:.3625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.3625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.3625,y:.6833333333333333,w:.075,h:.1},{x:.3875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.3875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.3875,y:.6833333333333333,w:.075,h:.1},{x:.4125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.4125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.4125,y:.6833333333333333,w:.075,h:.1},{x:.4375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.4375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.4375,y:.6833333333333333,w:.075,h:.1},{x:.4625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.4625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.4625,y:.6833333333333333,w:.075,h:.1},{x:.4875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.4875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.4875,y:.6833333333333333,w:.075,h:.1},{x:.5125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.5125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.5125,y:.6833333333333333,w:.075,h:.1},{x:.5375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.5375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.5375,y:.6833333333333333,w:.075,h:.1},{x:.5625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.5625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.5625,y:.6833333333333333,w:.075,h:.1},{x:.5875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.5875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.5875,y:.6833333333333333,w:.075,h:.1},{x:.6125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.6125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.6125,y:.6833333333333333,w:.075,h:.1},{x:.6375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.6375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.6375,y:.6833333333333333,w:.075,h:.1},{x:.6625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.6625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.6625,y:.6833333333333333,w:.075,h:.1},{x:.6875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.6875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.6875,y:.6833333333333333,w:.075,h:.1},{x:.7125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.7125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.7125,y:.6833333333333333,w:.075,h:.1},{x:.7375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.7375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.7375,y:.6833333333333333,w:.075,h:.1},{x:.7625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.7625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.7625,y:.6833333333333333,w:.075,h:.1},{x:.7875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.7875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.7875,y:.6833333333333333,w:.075,h:.1},{x:.8125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.8125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.8125,y:.6833333333333333,w:.075,h:.1},{x:.8375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.8375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.8375,y:.6833333333333333,w:.075,h:.1},{x:.8625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.8625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.8625,y:.6833333333333333,w:.075,h:.1},{x:.8875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.8875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.8875,y:.6833333333333333,w:.075,h:.1},{x:.9125,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.9125,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.9125,y:.6833333333333333,w:.075,h:.1},{x:.9375,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.9375,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.9375,y:.6833333333333333,w:.075,h:.1},{x:.9625,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.9625,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.9625,y:.6833333333333333,w:.075,h:.1},{x:.9875,y:.6833333333333333,w:.03125,h:.041666666666666664},{x:.9875,y:.6833333333333333,w:.05,h:.06666666666666667},{x:.9875,y:.6833333333333333,w:.075,h:.1},{x:.0125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.0125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.0125,y:.7166666666666667,w:.075,h:.1},{x:.0375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.0375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.0375,y:.7166666666666667,w:.075,h:.1},{x:.0625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.0625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.0625,y:.7166666666666667,w:.075,h:.1},{x:.0875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.0875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.0875,y:.7166666666666667,w:.075,h:.1},{x:.1125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.1125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.1125,y:.7166666666666667,w:.075,h:.1},{x:.1375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.1375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.1375,y:.7166666666666667,w:.075,h:.1},{x:.1625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.1625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.1625,y:.7166666666666667,w:.075,h:.1},{x:.1875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.1875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.1875,y:.7166666666666667,w:.075,h:.1},{x:.2125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.2125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.2125,y:.7166666666666667,w:.075,h:.1},{x:.2375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.2375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.2375,y:.7166666666666667,w:.075,h:.1},{x:.2625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.2625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.2625,y:.7166666666666667,w:.075,h:.1},{x:.2875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.2875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.2875,y:.7166666666666667,w:.075,h:.1},{x:.3125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.3125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.3125,y:.7166666666666667,w:.075,h:.1},{x:.3375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.3375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.3375,y:.7166666666666667,w:.075,h:.1},{x:.3625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.3625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.3625,y:.7166666666666667,w:.075,h:.1},{x:.3875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.3875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.3875,y:.7166666666666667,w:.075,h:.1},{x:.4125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.4125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.4125,y:.7166666666666667,w:.075,h:.1},{x:.4375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.4375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.4375,y:.7166666666666667,w:.075,h:.1},{x:.4625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.4625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.4625,y:.7166666666666667,w:.075,h:.1},{x:.4875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.4875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.4875,y:.7166666666666667,w:.075,h:.1},{x:.5125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.5125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.5125,y:.7166666666666667,w:.075,h:.1},{x:.5375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.5375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.5375,y:.7166666666666667,w:.075,h:.1},{x:.5625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.5625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.5625,y:.7166666666666667,w:.075,h:.1},{x:.5875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.5875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.5875,y:.7166666666666667,w:.075,h:.1},{x:.6125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.6125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.6125,y:.7166666666666667,w:.075,h:.1},{x:.6375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.6375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.6375,y:.7166666666666667,w:.075,h:.1},{x:.6625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.6625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.6625,y:.7166666666666667,w:.075,h:.1},{x:.6875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.6875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.6875,y:.7166666666666667,w:.075,h:.1},{x:.7125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.7125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.7125,y:.7166666666666667,w:.075,h:.1},{x:.7375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.7375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.7375,y:.7166666666666667,w:.075,h:.1},{x:.7625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.7625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.7625,y:.7166666666666667,w:.075,h:.1},{x:.7875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.7875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.7875,y:.7166666666666667,w:.075,h:.1},{x:.8125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.8125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.8125,y:.7166666666666667,w:.075,h:.1},{x:.8375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.8375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.8375,y:.7166666666666667,w:.075,h:.1},{x:.8625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.8625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.8625,y:.7166666666666667,w:.075,h:.1},{x:.8875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.8875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.8875,y:.7166666666666667,w:.075,h:.1},{x:.9125,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.9125,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.9125,y:.7166666666666667,w:.075,h:.1},{x:.9375,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.9375,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.9375,y:.7166666666666667,w:.075,h:.1},{x:.9625,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.9625,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.9625,y:.7166666666666667,w:.075,h:.1},{x:.9875,y:.7166666666666667,w:.03125,h:.041666666666666664},{x:.9875,y:.7166666666666667,w:.05,h:.06666666666666667},{x:.9875,y:.7166666666666667,w:.075,h:.1},{x:.0125,y:.75,w:.03125,h:.041666666666666664},{x:.0125,y:.75,w:.05,h:.06666666666666667},{x:.0125,y:.75,w:.075,h:.1},{x:.0375,y:.75,w:.03125,h:.041666666666666664},{x:.0375,y:.75,w:.05,h:.06666666666666667},{x:.0375,y:.75,w:.075,h:.1},{x:.0625,y:.75,w:.03125,h:.041666666666666664},{x:.0625,y:.75,w:.05,h:.06666666666666667},{x:.0625,y:.75,w:.075,h:.1},{x:.0875,y:.75,w:.03125,h:.041666666666666664},{x:.0875,y:.75,w:.05,h:.06666666666666667},{x:.0875,y:.75,w:.075,h:.1},{x:.1125,y:.75,w:.03125,h:.041666666666666664},{x:.1125,y:.75,w:.05,h:.06666666666666667},{x:.1125,y:.75,w:.075,h:.1},{x:.1375,y:.75,w:.03125,h:.041666666666666664},{x:.1375,y:.75,w:.05,h:.06666666666666667},{x:.1375,y:.75,w:.075,h:.1},{x:.1625,y:.75,w:.03125,h:.041666666666666664},{x:.1625,y:.75,w:.05,h:.06666666666666667},{x:.1625,y:.75,w:.075,h:.1},{x:.1875,y:.75,w:.03125,h:.041666666666666664},{x:.1875,y:.75,w:.05,h:.06666666666666667},{x:.1875,y:.75,w:.075,h:.1},{x:.2125,y:.75,w:.03125,h:.041666666666666664},{x:.2125,y:.75,w:.05,h:.06666666666666667},{x:.2125,y:.75,w:.075,h:.1},{x:.2375,y:.75,w:.03125,h:.041666666666666664},{x:.2375,y:.75,w:.05,h:.06666666666666667},{x:.2375,y:.75,w:.075,h:.1},{x:.2625,y:.75,w:.03125,h:.041666666666666664},{x:.2625,y:.75,w:.05,h:.06666666666666667},{x:.2625,y:.75,w:.075,h:.1},{x:.2875,y:.75,w:.03125,h:.041666666666666664},{x:.2875,y:.75,w:.05,h:.06666666666666667},{x:.2875,y:.75,w:.075,h:.1},{x:.3125,y:.75,w:.03125,h:.041666666666666664},{x:.3125,y:.75,w:.05,h:.06666666666666667},{x:.3125,y:.75,w:.075,h:.1},{x:.3375,y:.75,w:.03125,h:.041666666666666664},{x:.3375,y:.75,w:.05,h:.06666666666666667},{x:.3375,y:.75,w:.075,h:.1},{x:.3625,y:.75,w:.03125,h:.041666666666666664},{x:.3625,y:.75,w:.05,h:.06666666666666667},{x:.3625,y:.75,w:.075,h:.1},{x:.3875,y:.75,w:.03125,h:.041666666666666664},{x:.3875,y:.75,w:.05,h:.06666666666666667},{x:.3875,y:.75,w:.075,h:.1},{x:.4125,y:.75,w:.03125,h:.041666666666666664},{x:.4125,y:.75,w:.05,h:.06666666666666667},{x:.4125,y:.75,w:.075,h:.1},{x:.4375,y:.75,w:.03125,h:.041666666666666664},{x:.4375,y:.75,w:.05,h:.06666666666666667},{x:.4375,y:.75,w:.075,h:.1},{x:.4625,y:.75,w:.03125,h:.041666666666666664},{x:.4625,y:.75,w:.05,h:.06666666666666667},{x:.4625,y:.75,w:.075,h:.1},{x:.4875,y:.75,w:.03125,h:.041666666666666664},{x:.4875,y:.75,w:.05,h:.06666666666666667},{x:.4875,y:.75,w:.075,h:.1},{x:.5125,y:.75,w:.03125,h:.041666666666666664},{x:.5125,y:.75,w:.05,h:.06666666666666667},{x:.5125,y:.75,w:.075,h:.1},{x:.5375,y:.75,w:.03125,h:.041666666666666664},{x:.5375,y:.75,w:.05,h:.06666666666666667},{x:.5375,y:.75,w:.075,h:.1},{x:.5625,y:.75,w:.03125,h:.041666666666666664},{x:.5625,y:.75,w:.05,h:.06666666666666667},{x:.5625,y:.75,w:.075,h:.1},{x:.5875,y:.75,w:.03125,h:.041666666666666664},{x:.5875,y:.75,w:.05,h:.06666666666666667},{x:.5875,y:.75,w:.075,h:.1},{x:.6125,y:.75,w:.03125,h:.041666666666666664},{x:.6125,y:.75,w:.05,h:.06666666666666667},{x:.6125,y:.75,w:.075,h:.1},{x:.6375,y:.75,w:.03125,h:.041666666666666664},{x:.6375,y:.75,w:.05,h:.06666666666666667},{x:.6375,y:.75,w:.075,h:.1},{x:.6625,y:.75,w:.03125,h:.041666666666666664},{x:.6625,y:.75,w:.05,h:.06666666666666667},{x:.6625,y:.75,w:.075,h:.1},{x:.6875,y:.75,w:.03125,h:.041666666666666664},{x:.6875,y:.75,w:.05,h:.06666666666666667},{x:.6875,y:.75,w:.075,h:.1},{x:.7125,y:.75,w:.03125,h:.041666666666666664},{x:.7125,y:.75,w:.05,h:.06666666666666667},{x:.7125,y:.75,w:.075,h:.1},{x:.7375,y:.75,w:.03125,h:.041666666666666664},{x:.7375,y:.75,w:.05,h:.06666666666666667},{x:.7375,y:.75,w:.075,h:.1},{x:.7625,y:.75,w:.03125,h:.041666666666666664},{x:.7625,y:.75,w:.05,h:.06666666666666667},{x:.7625,y:.75,w:.075,h:.1},{x:.7875,y:.75,w:.03125,h:.041666666666666664},{x:.7875,y:.75,w:.05,h:.06666666666666667},{x:.7875,y:.75,w:.075,h:.1},{x:.8125,y:.75,w:.03125,h:.041666666666666664},{x:.8125,y:.75,w:.05,h:.06666666666666667},{x:.8125,y:.75,w:.075,h:.1},{x:.8375,y:.75,w:.03125,h:.041666666666666664},{x:.8375,y:.75,w:.05,h:.06666666666666667},{x:.8375,y:.75,w:.075,h:.1},{x:.8625,y:.75,w:.03125,h:.041666666666666664},{x:.8625,y:.75,w:.05,h:.06666666666666667},{x:.8625,y:.75,w:.075,h:.1},{x:.8875,y:.75,w:.03125,h:.041666666666666664},{x:.8875,y:.75,w:.05,h:.06666666666666667},{x:.8875,y:.75,w:.075,h:.1},{x:.9125,y:.75,w:.03125,h:.041666666666666664},{x:.9125,y:.75,w:.05,h:.06666666666666667},{x:.9125,y:.75,w:.075,h:.1},{x:.9375,y:.75,w:.03125,h:.041666666666666664},{x:.9375,y:.75,w:.05,h:.06666666666666667},{x:.9375,y:.75,w:.075,h:.1},{x:.9625,y:.75,w:.03125,h:.041666666666666664},{x:.9625,y:.75,w:.05,h:.06666666666666667},{x:.9625,y:.75,w:.075,h:.1},{x:.9875,y:.75,w:.03125,h:.041666666666666664},{x:.9875,y:.75,w:.05,h:.06666666666666667},{x:.9875,y:.75,w:.075,h:.1},{x:.0125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.0125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.0125,y:.7833333333333333,w:.075,h:.1},{x:.0375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.0375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.0375,y:.7833333333333333,w:.075,h:.1},{x:.0625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.0625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.0625,y:.7833333333333333,w:.075,h:.1},{x:.0875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.0875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.0875,y:.7833333333333333,w:.075,h:.1},{x:.1125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.1125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.1125,y:.7833333333333333,w:.075,h:.1},{x:.1375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.1375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.1375,y:.7833333333333333,w:.075,h:.1},{x:.1625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.1625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.1625,y:.7833333333333333,w:.075,h:.1},{x:.1875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.1875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.1875,y:.7833333333333333,w:.075,h:.1},{x:.2125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.2125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.2125,y:.7833333333333333,w:.075,h:.1},{x:.2375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.2375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.2375,y:.7833333333333333,w:.075,h:.1},{x:.2625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.2625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.2625,y:.7833333333333333,w:.075,h:.1},{x:.2875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.2875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.2875,y:.7833333333333333,w:.075,h:.1},{x:.3125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.3125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.3125,y:.7833333333333333,w:.075,h:.1},{x:.3375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.3375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.3375,y:.7833333333333333,w:.075,h:.1},{x:.3625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.3625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.3625,y:.7833333333333333,w:.075,h:.1},{x:.3875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.3875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.3875,y:.7833333333333333,w:.075,h:.1},{x:.4125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.4125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.4125,y:.7833333333333333,w:.075,h:.1},{x:.4375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.4375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.4375,y:.7833333333333333,w:.075,h:.1},{x:.4625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.4625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.4625,y:.7833333333333333,w:.075,h:.1},{x:.4875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.4875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.4875,y:.7833333333333333,w:.075,h:.1},{x:.5125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.5125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.5125,y:.7833333333333333,w:.075,h:.1},{x:.5375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.5375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.5375,y:.7833333333333333,w:.075,h:.1},{x:.5625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.5625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.5625,y:.7833333333333333,w:.075,h:.1},{x:.5875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.5875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.5875,y:.7833333333333333,w:.075,h:.1},{x:.6125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.6125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.6125,y:.7833333333333333,w:.075,h:.1},{x:.6375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.6375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.6375,y:.7833333333333333,w:.075,h:.1},{x:.6625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.6625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.6625,y:.7833333333333333,w:.075,h:.1},{x:.6875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.6875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.6875,y:.7833333333333333,w:.075,h:.1},{x:.7125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.7125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.7125,y:.7833333333333333,w:.075,h:.1},{x:.7375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.7375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.7375,y:.7833333333333333,w:.075,h:.1},{x:.7625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.7625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.7625,y:.7833333333333333,w:.075,h:.1},{x:.7875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.7875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.7875,y:.7833333333333333,w:.075,h:.1},{x:.8125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.8125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.8125,y:.7833333333333333,w:.075,h:.1},{x:.8375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.8375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.8375,y:.7833333333333333,w:.075,h:.1},{x:.8625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.8625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.8625,y:.7833333333333333,w:.075,h:.1},{x:.8875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.8875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.8875,y:.7833333333333333,w:.075,h:.1},{x:.9125,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.9125,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.9125,y:.7833333333333333,w:.075,h:.1},{x:.9375,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.9375,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.9375,y:.7833333333333333,w:.075,h:.1},{x:.9625,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.9625,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.9625,y:.7833333333333333,w:.075,h:.1},{x:.9875,y:.7833333333333333,w:.03125,h:.041666666666666664},{x:.9875,y:.7833333333333333,w:.05,h:.06666666666666667},{x:.9875,y:.7833333333333333,w:.075,h:.1},{x:.0125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.0125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.0125,y:.8166666666666667,w:.075,h:.1},{x:.0375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.0375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.0375,y:.8166666666666667,w:.075,h:.1},{x:.0625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.0625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.0625,y:.8166666666666667,w:.075,h:.1},{x:.0875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.0875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.0875,y:.8166666666666667,w:.075,h:.1},{x:.1125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.1125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.1125,y:.8166666666666667,w:.075,h:.1},{x:.1375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.1375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.1375,y:.8166666666666667,w:.075,h:.1},{x:.1625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.1625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.1625,y:.8166666666666667,w:.075,h:.1},{x:.1875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.1875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.1875,y:.8166666666666667,w:.075,h:.1},{x:.2125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.2125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.2125,y:.8166666666666667,w:.075,h:.1},{x:.2375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.2375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.2375,y:.8166666666666667,w:.075,h:.1},{x:.2625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.2625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.2625,y:.8166666666666667,w:.075,h:.1},{x:.2875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.2875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.2875,y:.8166666666666667,w:.075,h:.1},{x:.3125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.3125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.3125,y:.8166666666666667,w:.075,h:.1},{x:.3375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.3375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.3375,y:.8166666666666667,w:.075,h:.1},{x:.3625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.3625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.3625,y:.8166666666666667,w:.075,h:.1},{x:.3875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.3875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.3875,y:.8166666666666667,w:.075,h:.1},{x:.4125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.4125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.4125,y:.8166666666666667,w:.075,h:.1},{x:.4375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.4375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.4375,y:.8166666666666667,w:.075,h:.1},{x:.4625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.4625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.4625,y:.8166666666666667,w:.075,h:.1},{x:.4875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.4875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.4875,y:.8166666666666667,w:.075,h:.1},{x:.5125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.5125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.5125,y:.8166666666666667,w:.075,h:.1},{x:.5375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.5375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.5375,y:.8166666666666667,w:.075,h:.1},{x:.5625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.5625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.5625,y:.8166666666666667,w:.075,h:.1},{x:.5875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.5875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.5875,y:.8166666666666667,w:.075,h:.1},{x:.6125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.6125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.6125,y:.8166666666666667,w:.075,h:.1},{x:.6375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.6375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.6375,y:.8166666666666667,w:.075,h:.1},{x:.6625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.6625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.6625,y:.8166666666666667,w:.075,h:.1},{x:.6875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.6875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.6875,y:.8166666666666667,w:.075,h:.1},{x:.7125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.7125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.7125,y:.8166666666666667,w:.075,h:.1},{x:.7375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.7375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.7375,y:.8166666666666667,w:.075,h:.1},{x:.7625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.7625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.7625,y:.8166666666666667,w:.075,h:.1},{x:.7875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.7875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.7875,y:.8166666666666667,w:.075,h:.1},{x:.8125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.8125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.8125,y:.8166666666666667,w:.075,h:.1},{x:.8375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.8375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.8375,y:.8166666666666667,w:.075,h:.1},{x:.8625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.8625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.8625,y:.8166666666666667,w:.075,h:.1},{x:.8875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.8875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.8875,y:.8166666666666667,w:.075,h:.1},{x:.9125,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.9125,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.9125,y:.8166666666666667,w:.075,h:.1},{x:.9375,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.9375,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.9375,y:.8166666666666667,w:.075,h:.1},{x:.9625,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.9625,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.9625,y:.8166666666666667,w:.075,h:.1},{x:.9875,y:.8166666666666667,w:.03125,h:.041666666666666664},{x:.9875,y:.8166666666666667,w:.05,h:.06666666666666667},{x:.9875,y:.8166666666666667,w:.075,h:.1},{x:.0125,y:.85,w:.03125,h:.041666666666666664},{x:.0125,y:.85,w:.05,h:.06666666666666667},{x:.0125,y:.85,w:.075,h:.1},{x:.0375,y:.85,w:.03125,h:.041666666666666664},{x:.0375,y:.85,w:.05,h:.06666666666666667},{x:.0375,y:.85,w:.075,h:.1},{x:.0625,y:.85,w:.03125,h:.041666666666666664},{x:.0625,y:.85,w:.05,h:.06666666666666667},{x:.0625,y:.85,w:.075,h:.1},{x:.0875,y:.85,w:.03125,h:.041666666666666664},{x:.0875,y:.85,w:.05,h:.06666666666666667},{x:.0875,y:.85,w:.075,h:.1},{x:.1125,y:.85,w:.03125,h:.041666666666666664},{x:.1125,y:.85,w:.05,h:.06666666666666667},{x:.1125,y:.85,w:.075,h:.1},{x:.1375,y:.85,w:.03125,h:.041666666666666664},{x:.1375,y:.85,w:.05,h:.06666666666666667},{x:.1375,y:.85,w:.075,h:.1},{x:.1625,y:.85,w:.03125,h:.041666666666666664},{x:.1625,y:.85,w:.05,h:.06666666666666667},{x:.1625,y:.85,w:.075,h:.1},{x:.1875,y:.85,w:.03125,h:.041666666666666664},{x:.1875,y:.85,w:.05,h:.06666666666666667},{x:.1875,y:.85,w:.075,h:.1},{x:.2125,y:.85,w:.03125,h:.041666666666666664},{x:.2125,y:.85,w:.05,h:.06666666666666667},{x:.2125,y:.85,w:.075,h:.1},{x:.2375,y:.85,w:.03125,h:.041666666666666664},{x:.2375,y:.85,w:.05,h:.06666666666666667},{x:.2375,y:.85,w:.075,h:.1},{x:.2625,y:.85,w:.03125,h:.041666666666666664},{x:.2625,y:.85,w:.05,h:.06666666666666667},{x:.2625,y:.85,w:.075,h:.1},{x:.2875,y:.85,w:.03125,h:.041666666666666664},{x:.2875,y:.85,w:.05,h:.06666666666666667},{x:.2875,y:.85,w:.075,h:.1},{x:.3125,y:.85,w:.03125,h:.041666666666666664},{x:.3125,y:.85,w:.05,h:.06666666666666667},{x:.3125,y:.85,w:.075,h:.1},{x:.3375,y:.85,w:.03125,h:.041666666666666664},{x:.3375,y:.85,w:.05,h:.06666666666666667},{x:.3375,y:.85,w:.075,h:.1},{x:.3625,y:.85,w:.03125,h:.041666666666666664},{x:.3625,y:.85,w:.05,h:.06666666666666667},{x:.3625,y:.85,w:.075,h:.1},{x:.3875,y:.85,w:.03125,h:.041666666666666664},{x:.3875,y:.85,w:.05,h:.06666666666666667},{x:.3875,y:.85,w:.075,h:.1},{x:.4125,y:.85,w:.03125,h:.041666666666666664},{x:.4125,y:.85,w:.05,h:.06666666666666667},{x:.4125,y:.85,w:.075,h:.1},{x:.4375,y:.85,w:.03125,h:.041666666666666664},{x:.4375,y:.85,w:.05,h:.06666666666666667},{x:.4375,y:.85,w:.075,h:.1},{x:.4625,y:.85,w:.03125,h:.041666666666666664},{x:.4625,y:.85,w:.05,h:.06666666666666667},{x:.4625,y:.85,w:.075,h:.1},{x:.4875,y:.85,w:.03125,h:.041666666666666664},{x:.4875,y:.85,w:.05,h:.06666666666666667},{x:.4875,y:.85,w:.075,h:.1},{x:.5125,y:.85,w:.03125,h:.041666666666666664},{x:.5125,y:.85,w:.05,h:.06666666666666667},{x:.5125,y:.85,w:.075,h:.1},{x:.5375,y:.85,w:.03125,h:.041666666666666664},{x:.5375,y:.85,w:.05,h:.06666666666666667},{x:.5375,y:.85,w:.075,h:.1},{x:.5625,y:.85,w:.03125,h:.041666666666666664},{x:.5625,y:.85,w:.05,h:.06666666666666667},{x:.5625,y:.85,w:.075,h:.1},{x:.5875,y:.85,w:.03125,h:.041666666666666664},{x:.5875,y:.85,w:.05,h:.06666666666666667},{x:.5875,y:.85,w:.075,h:.1},{x:.6125,y:.85,w:.03125,h:.041666666666666664},{x:.6125,y:.85,w:.05,h:.06666666666666667},{x:.6125,y:.85,w:.075,h:.1},{x:.6375,y:.85,w:.03125,h:.041666666666666664},{x:.6375,y:.85,w:.05,h:.06666666666666667},{x:.6375,y:.85,w:.075,h:.1},{x:.6625,y:.85,w:.03125,h:.041666666666666664},{x:.6625,y:.85,w:.05,h:.06666666666666667},{x:.6625,y:.85,w:.075,h:.1},{x:.6875,y:.85,w:.03125,h:.041666666666666664},{x:.6875,y:.85,w:.05,h:.06666666666666667},{x:.6875,y:.85,w:.075,h:.1},{x:.7125,y:.85,w:.03125,h:.041666666666666664},{x:.7125,y:.85,w:.05,h:.06666666666666667},{x:.7125,y:.85,w:.075,h:.1},{x:.7375,y:.85,w:.03125,h:.041666666666666664},{x:.7375,y:.85,w:.05,h:.06666666666666667},{x:.7375,y:.85,w:.075,h:.1},{x:.7625,y:.85,w:.03125,h:.041666666666666664},{x:.7625,y:.85,w:.05,h:.06666666666666667},{x:.7625,y:.85,w:.075,h:.1},{x:.7875,y:.85,w:.03125,h:.041666666666666664},{x:.7875,y:.85,w:.05,h:.06666666666666667},{x:.7875,y:.85,w:.075,h:.1},{x:.8125,y:.85,w:.03125,h:.041666666666666664},{x:.8125,y:.85,w:.05,h:.06666666666666667},{x:.8125,y:.85,w:.075,h:.1},{x:.8375,y:.85,w:.03125,h:.041666666666666664},{x:.8375,y:.85,w:.05,h:.06666666666666667},{x:.8375,y:.85,w:.075,h:.1},{x:.8625,y:.85,w:.03125,h:.041666666666666664},{x:.8625,y:.85,w:.05,h:.06666666666666667},{x:.8625,y:.85,w:.075,h:.1},{x:.8875,y:.85,w:.03125,h:.041666666666666664},{x:.8875,y:.85,w:.05,h:.06666666666666667},{x:.8875,y:.85,w:.075,h:.1},{x:.9125,y:.85,w:.03125,h:.041666666666666664},{x:.9125,y:.85,w:.05,h:.06666666666666667},{x:.9125,y:.85,w:.075,h:.1},{x:.9375,y:.85,w:.03125,h:.041666666666666664},{x:.9375,y:.85,w:.05,h:.06666666666666667},{x:.9375,y:.85,w:.075,h:.1},{x:.9625,y:.85,w:.03125,h:.041666666666666664},{x:.9625,y:.85,w:.05,h:.06666666666666667},{x:.9625,y:.85,w:.075,h:.1},{x:.9875,y:.85,w:.03125,h:.041666666666666664},{x:.9875,y:.85,w:.05,h:.06666666666666667},{x:.9875,y:.85,w:.075,h:.1},{x:.0125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.0125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.0125,y:.8833333333333333,w:.075,h:.1},{x:.0375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.0375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.0375,y:.8833333333333333,w:.075,h:.1},{x:.0625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.0625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.0625,y:.8833333333333333,w:.075,h:.1},{x:.0875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.0875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.0875,y:.8833333333333333,w:.075,h:.1},{x:.1125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.1125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.1125,y:.8833333333333333,w:.075,h:.1},{x:.1375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.1375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.1375,y:.8833333333333333,w:.075,h:.1},{x:.1625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.1625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.1625,y:.8833333333333333,w:.075,h:.1},{x:.1875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.1875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.1875,y:.8833333333333333,w:.075,h:.1},{x:.2125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.2125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.2125,y:.8833333333333333,w:.075,h:.1},{x:.2375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.2375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.2375,y:.8833333333333333,w:.075,h:.1},{x:.2625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.2625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.2625,y:.8833333333333333,w:.075,h:.1},{x:.2875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.2875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.2875,y:.8833333333333333,w:.075,h:.1},{x:.3125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.3125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.3125,y:.8833333333333333,w:.075,h:.1},{x:.3375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.3375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.3375,y:.8833333333333333,w:.075,h:.1},{x:.3625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.3625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.3625,y:.8833333333333333,w:.075,h:.1},{x:.3875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.3875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.3875,y:.8833333333333333,w:.075,h:.1},{x:.4125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.4125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.4125,y:.8833333333333333,w:.075,h:.1},{x:.4375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.4375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.4375,y:.8833333333333333,w:.075,h:.1},{x:.4625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.4625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.4625,y:.8833333333333333,w:.075,h:.1},{x:.4875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.4875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.4875,y:.8833333333333333,w:.075,h:.1},{x:.5125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.5125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.5125,y:.8833333333333333,w:.075,h:.1},{x:.5375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.5375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.5375,y:.8833333333333333,w:.075,h:.1},{x:.5625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.5625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.5625,y:.8833333333333333,w:.075,h:.1},{x:.5875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.5875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.5875,y:.8833333333333333,w:.075,h:.1},{x:.6125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.6125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.6125,y:.8833333333333333,w:.075,h:.1},{x:.6375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.6375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.6375,y:.8833333333333333,w:.075,h:.1},{x:.6625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.6625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.6625,y:.8833333333333333,w:.075,h:.1},{x:.6875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.6875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.6875,y:.8833333333333333,w:.075,h:.1},{x:.7125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.7125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.7125,y:.8833333333333333,w:.075,h:.1},{x:.7375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.7375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.7375,y:.8833333333333333,w:.075,h:.1},{x:.7625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.7625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.7625,y:.8833333333333333,w:.075,h:.1},{x:.7875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.7875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.7875,y:.8833333333333333,w:.075,h:.1},{x:.8125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.8125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.8125,y:.8833333333333333,w:.075,h:.1},{x:.8375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.8375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.8375,y:.8833333333333333,w:.075,h:.1},{x:.8625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.8625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.8625,y:.8833333333333333,w:.075,h:.1},{x:.8875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.8875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.8875,y:.8833333333333333,w:.075,h:.1},{x:.9125,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.9125,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.9125,y:.8833333333333333,w:.075,h:.1},{x:.9375,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.9375,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.9375,y:.8833333333333333,w:.075,h:.1},{x:.9625,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.9625,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.9625,y:.8833333333333333,w:.075,h:.1},{x:.9875,y:.8833333333333333,w:.03125,h:.041666666666666664},{x:.9875,y:.8833333333333333,w:.05,h:.06666666666666667},{x:.9875,y:.8833333333333333,w:.075,h:.1},{x:.0125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.0125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.0125,y:.9166666666666666,w:.075,h:.1},{x:.0375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.0375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.0375,y:.9166666666666666,w:.075,h:.1},{x:.0625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.0625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.0625,y:.9166666666666666,w:.075,h:.1},{x:.0875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.0875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.0875,y:.9166666666666666,w:.075,h:.1},{x:.1125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.1125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.1125,y:.9166666666666666,w:.075,h:.1},{x:.1375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.1375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.1375,y:.9166666666666666,w:.075,h:.1},{x:.1625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.1625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.1625,y:.9166666666666666,w:.075,h:.1},{x:.1875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.1875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.1875,y:.9166666666666666,w:.075,h:.1},{x:.2125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.2125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.2125,y:.9166666666666666,w:.075,h:.1},{x:.2375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.2375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.2375,y:.9166666666666666,w:.075,h:.1},{x:.2625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.2625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.2625,y:.9166666666666666,w:.075,h:.1},{x:.2875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.2875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.2875,y:.9166666666666666,w:.075,h:.1},{x:.3125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.3125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.3125,y:.9166666666666666,w:.075,h:.1},{x:.3375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.3375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.3375,y:.9166666666666666,w:.075,h:.1},{x:.3625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.3625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.3625,y:.9166666666666666,w:.075,h:.1},{x:.3875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.3875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.3875,y:.9166666666666666,w:.075,h:.1},{x:.4125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.4125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.4125,y:.9166666666666666,w:.075,h:.1},{x:.4375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.4375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.4375,y:.9166666666666666,w:.075,h:.1},{x:.4625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.4625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.4625,y:.9166666666666666,w:.075,h:.1},{x:.4875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.4875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.4875,y:.9166666666666666,w:.075,h:.1},{x:.5125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.5125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.5125,y:.9166666666666666,w:.075,h:.1},{x:.5375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.5375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.5375,y:.9166666666666666,w:.075,h:.1},{x:.5625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.5625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.5625,y:.9166666666666666,w:.075,h:.1},{x:.5875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.5875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.5875,y:.9166666666666666,w:.075,h:.1},{x:.6125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.6125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.6125,y:.9166666666666666,w:.075,h:.1},{x:.6375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.6375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.6375,y:.9166666666666666,w:.075,h:.1},{x:.6625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.6625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.6625,y:.9166666666666666,w:.075,h:.1},{x:.6875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.6875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.6875,y:.9166666666666666,w:.075,h:.1},{x:.7125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.7125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.7125,y:.9166666666666666,w:.075,h:.1},{x:.7375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.7375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.7375,y:.9166666666666666,w:.075,h:.1},{x:.7625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.7625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.7625,y:.9166666666666666,w:.075,h:.1},{x:.7875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.7875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.7875,y:.9166666666666666,w:.075,h:.1},{x:.8125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.8125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.8125,y:.9166666666666666,w:.075,h:.1},{x:.8375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.8375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.8375,y:.9166666666666666,w:.075,h:.1},{x:.8625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.8625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.8625,y:.9166666666666666,w:.075,h:.1},{x:.8875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.8875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.8875,y:.9166666666666666,w:.075,h:.1},{x:.9125,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.9125,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.9125,y:.9166666666666666,w:.075,h:.1},{x:.9375,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.9375,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.9375,y:.9166666666666666,w:.075,h:.1},{x:.9625,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.9625,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.9625,y:.9166666666666666,w:.075,h:.1},{x:.9875,y:.9166666666666666,w:.03125,h:.041666666666666664},{x:.9875,y:.9166666666666666,w:.05,h:.06666666666666667},{x:.9875,y:.9166666666666666,w:.075,h:.1},{x:.0125,y:.95,w:.03125,h:.041666666666666664},{x:.0125,y:.95,w:.05,h:.06666666666666667},{x:.0125,y:.95,w:.075,h:.1},{x:.0375,y:.95,w:.03125,h:.041666666666666664},{x:.0375,y:.95,w:.05,h:.06666666666666667},{x:.0375,y:.95,w:.075,h:.1},{x:.0625,y:.95,w:.03125,h:.041666666666666664},{x:.0625,y:.95,w:.05,h:.06666666666666667},{x:.0625,y:.95,w:.075,h:.1},{x:.0875,y:.95,w:.03125,h:.041666666666666664},{x:.0875,y:.95,w:.05,h:.06666666666666667},{x:.0875,y:.95,w:.075,h:.1},{x:.1125,y:.95,w:.03125,h:.041666666666666664},{x:.1125,y:.95,w:.05,h:.06666666666666667},{x:.1125,y:.95,w:.075,h:.1},{x:.1375,y:.95,w:.03125,h:.041666666666666664},{x:.1375,y:.95,w:.05,h:.06666666666666667},{x:.1375,y:.95,w:.075,h:.1},{x:.1625,y:.95,w:.03125,h:.041666666666666664},{x:.1625,y:.95,w:.05,h:.06666666666666667},{x:.1625,y:.95,w:.075,h:.1},{x:.1875,y:.95,w:.03125,h:.041666666666666664},{x:.1875,y:.95,w:.05,h:.06666666666666667},{x:.1875,y:.95,w:.075,h:.1},{x:.2125,y:.95,w:.03125,h:.041666666666666664},{x:.2125,y:.95,w:.05,h:.06666666666666667},{x:.2125,y:.95,w:.075,h:.1},{x:.2375,y:.95,w:.03125,h:.041666666666666664},{x:.2375,y:.95,w:.05,h:.06666666666666667},{x:.2375,y:.95,w:.075,h:.1},{x:.2625,y:.95,w:.03125,h:.041666666666666664},{x:.2625,y:.95,w:.05,h:.06666666666666667},{x:.2625,y:.95,w:.075,h:.1},{x:.2875,y:.95,w:.03125,h:.041666666666666664},{x:.2875,y:.95,w:.05,h:.06666666666666667},{x:.2875,y:.95,w:.075,h:.1},{x:.3125,y:.95,w:.03125,h:.041666666666666664},{x:.3125,y:.95,w:.05,h:.06666666666666667},{x:.3125,y:.95,w:.075,h:.1},{x:.3375,y:.95,w:.03125,h:.041666666666666664},{x:.3375,y:.95,w:.05,h:.06666666666666667},{x:.3375,y:.95,w:.075,h:.1},{x:.3625,y:.95,w:.03125,h:.041666666666666664},{x:.3625,y:.95,w:.05,h:.06666666666666667},{x:.3625,y:.95,w:.075,h:.1},{x:.3875,y:.95,w:.03125,h:.041666666666666664},{x:.3875,y:.95,w:.05,h:.06666666666666667},{x:.3875,y:.95,w:.075,h:.1},{x:.4125,y:.95,w:.03125,h:.041666666666666664},{x:.4125,y:.95,w:.05,h:.06666666666666667},{x:.4125,y:.95,w:.075,h:.1},{x:.4375,y:.95,w:.03125,h:.041666666666666664},{x:.4375,y:.95,w:.05,h:.06666666666666667},{x:.4375,y:.95,w:.075,h:.1},{x:.4625,y:.95,w:.03125,h:.041666666666666664},{x:.4625,y:.95,w:.05,h:.06666666666666667},{x:.4625,y:.95,w:.075,h:.1},{x:.4875,y:.95,w:.03125,h:.041666666666666664},{x:.4875,y:.95,w:.05,h:.06666666666666667},{x:.4875,y:.95,w:.075,h:.1},{x:.5125,y:.95,w:.03125,h:.041666666666666664},{x:.5125,y:.95,w:.05,h:.06666666666666667},{x:.5125,y:.95,w:.075,h:.1},{x:.5375,y:.95,w:.03125,h:.041666666666666664},{x:.5375,y:.95,w:.05,h:.06666666666666667},{x:.5375,y:.95,w:.075,h:.1},{x:.5625,y:.95,w:.03125,h:.041666666666666664},{x:.5625,y:.95,w:.05,h:.06666666666666667},{x:.5625,y:.95,w:.075,h:.1},{x:.5875,y:.95,w:.03125,h:.041666666666666664},{x:.5875,y:.95,w:.05,h:.06666666666666667},{x:.5875,y:.95,w:.075,h:.1},{x:.6125,y:.95,w:.03125,h:.041666666666666664},{x:.6125,y:.95,w:.05,h:.06666666666666667},{x:.6125,y:.95,w:.075,h:.1},{x:.6375,y:.95,w:.03125,h:.041666666666666664},{x:.6375,y:.95,w:.05,h:.06666666666666667},{x:.6375,y:.95,w:.075,h:.1},{x:.6625,y:.95,w:.03125,h:.041666666666666664},{x:.6625,y:.95,w:.05,h:.06666666666666667},{x:.6625,y:.95,w:.075,h:.1},{x:.6875,y:.95,w:.03125,h:.041666666666666664},{x:.6875,y:.95,w:.05,h:.06666666666666667},{x:.6875,y:.95,w:.075,h:.1},{x:.7125,y:.95,w:.03125,h:.041666666666666664},{x:.7125,y:.95,w:.05,h:.06666666666666667},{x:.7125,y:.95,w:.075,h:.1},{x:.7375,y:.95,w:.03125,h:.041666666666666664},{x:.7375,y:.95,w:.05,h:.06666666666666667},{x:.7375,y:.95,w:.075,h:.1},{x:.7625,y:.95,w:.03125,h:.041666666666666664},{x:.7625,y:.95,w:.05,h:.06666666666666667},{x:.7625,y:.95,w:.075,h:.1},{x:.7875,y:.95,w:.03125,h:.041666666666666664},{x:.7875,y:.95,w:.05,h:.06666666666666667},{x:.7875,y:.95,w:.075,h:.1},{x:.8125,y:.95,w:.03125,h:.041666666666666664},{x:.8125,y:.95,w:.05,h:.06666666666666667},{x:.8125,y:.95,w:.075,h:.1},{x:.8375,y:.95,w:.03125,h:.041666666666666664},{x:.8375,y:.95,w:.05,h:.06666666666666667},{x:.8375,y:.95,w:.075,h:.1},{x:.8625,y:.95,w:.03125,h:.041666666666666664},{x:.8625,y:.95,w:.05,h:.06666666666666667},{x:.8625,y:.95,w:.075,h:.1},{x:.8875,y:.95,w:.03125,h:.041666666666666664},{x:.8875,y:.95,w:.05,h:.06666666666666667},{x:.8875,y:.95,w:.075,h:.1},{x:.9125,y:.95,w:.03125,h:.041666666666666664},{x:.9125,y:.95,w:.05,h:.06666666666666667},{x:.9125,y:.95,w:.075,h:.1},{x:.9375,y:.95,w:.03125,h:.041666666666666664},{x:.9375,y:.95,w:.05,h:.06666666666666667},{x:.9375,y:.95,w:.075,h:.1},{x:.9625,y:.95,w:.03125,h:.041666666666666664},{x:.9625,y:.95,w:.05,h:.06666666666666667},{x:.9625,y:.95,w:.075,h:.1},{x:.9875,y:.95,w:.03125,h:.041666666666666664},{x:.9875,y:.95,w:.05,h:.06666666666666667},{x:.9875,y:.95,w:.075,h:.1},{x:.0125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.0125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.0125,y:.9833333333333333,w:.075,h:.1},{x:.0375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.0375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.0375,y:.9833333333333333,w:.075,h:.1},{x:.0625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.0625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.0625,y:.9833333333333333,w:.075,h:.1},{x:.0875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.0875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.0875,y:.9833333333333333,w:.075,h:.1},{x:.1125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.1125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.1125,y:.9833333333333333,w:.075,h:.1},{x:.1375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.1375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.1375,y:.9833333333333333,w:.075,h:.1},{x:.1625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.1625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.1625,y:.9833333333333333,w:.075,h:.1},{x:.1875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.1875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.1875,y:.9833333333333333,w:.075,h:.1},{x:.2125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.2125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.2125,y:.9833333333333333,w:.075,h:.1},{x:.2375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.2375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.2375,y:.9833333333333333,w:.075,h:.1},{x:.2625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.2625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.2625,y:.9833333333333333,w:.075,h:.1},{x:.2875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.2875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.2875,y:.9833333333333333,w:.075,h:.1},{x:.3125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.3125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.3125,y:.9833333333333333,w:.075,h:.1},{x:.3375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.3375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.3375,y:.9833333333333333,w:.075,h:.1},{x:.3625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.3625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.3625,y:.9833333333333333,w:.075,h:.1},{x:.3875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.3875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.3875,y:.9833333333333333,w:.075,h:.1},{x:.4125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.4125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.4125,y:.9833333333333333,w:.075,h:.1},{x:.4375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.4375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.4375,y:.9833333333333333,w:.075,h:.1},{x:.4625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.4625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.4625,y:.9833333333333333,w:.075,h:.1},{x:.4875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.4875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.4875,y:.9833333333333333,w:.075,h:.1},{x:.5125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.5125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.5125,y:.9833333333333333,w:.075,h:.1},{x:.5375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.5375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.5375,y:.9833333333333333,w:.075,h:.1},{x:.5625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.5625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.5625,y:.9833333333333333,w:.075,h:.1},{x:.5875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.5875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.5875,y:.9833333333333333,w:.075,h:.1},{x:.6125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.6125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.6125,y:.9833333333333333,w:.075,h:.1},{x:.6375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.6375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.6375,y:.9833333333333333,w:.075,h:.1},{x:.6625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.6625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.6625,y:.9833333333333333,w:.075,h:.1},{x:.6875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.6875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.6875,y:.9833333333333333,w:.075,h:.1},{x:.7125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.7125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.7125,y:.9833333333333333,w:.075,h:.1},{x:.7375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.7375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.7375,y:.9833333333333333,w:.075,h:.1},{x:.7625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.7625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.7625,y:.9833333333333333,w:.075,h:.1},{x:.7875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.7875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.7875,y:.9833333333333333,w:.075,h:.1},{x:.8125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.8125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.8125,y:.9833333333333333,w:.075,h:.1},{x:.8375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.8375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.8375,y:.9833333333333333,w:.075,h:.1},{x:.8625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.8625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.8625,y:.9833333333333333,w:.075,h:.1},{x:.8875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.8875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.8875,y:.9833333333333333,w:.075,h:.1},{x:.9125,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.9125,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.9125,y:.9833333333333333,w:.075,h:.1},{x:.9375,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.9375,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.9375,y:.9833333333333333,w:.075,h:.1},{x:.9625,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.9625,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.9625,y:.9833333333333333,w:.075,h:.1},{x:.9875,y:.9833333333333333,w:.03125,h:.041666666666666664},{x:.9875,y:.9833333333333333,w:.05,h:.06666666666666667},{x:.9875,y:.9833333333333333,w:.075,h:.1},{x:.025,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.025,y:.03333333333333333,w:.15,h:.2},{x:.075,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.075,y:.03333333333333333,w:.15,h:.2},{x:.125,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.125,y:.03333333333333333,w:.15,h:.2},{x:.175,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.175,y:.03333333333333333,w:.15,h:.2},{x:.225,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.225,y:.03333333333333333,w:.15,h:.2},{x:.275,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.275,y:.03333333333333333,w:.15,h:.2},{x:.325,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.325,y:.03333333333333333,w:.15,h:.2},{x:.375,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.375,y:.03333333333333333,w:.15,h:.2},{x:.425,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.425,y:.03333333333333333,w:.15,h:.2},{x:.475,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.475,y:.03333333333333333,w:.15,h:.2},{x:.525,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.525,y:.03333333333333333,w:.15,h:.2},{x:.575,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.575,y:.03333333333333333,w:.15,h:.2},{x:.625,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.625,y:.03333333333333333,w:.15,h:.2},{x:.675,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.675,y:.03333333333333333,w:.15,h:.2},{x:.725,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.725,y:.03333333333333333,w:.15,h:.2},{x:.775,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.775,y:.03333333333333333,w:.15,h:.2},{x:.825,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.825,y:.03333333333333333,w:.15,h:.2},{x:.875,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.875,y:.03333333333333333,w:.15,h:.2},{x:.925,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.925,y:.03333333333333333,w:.15,h:.2},{x:.975,y:.03333333333333333,w:.1,h:.13333333333333333},{x:.975,y:.03333333333333333,w:.15,h:.2},{x:.025,y:.1,w:.1,h:.13333333333333333},{x:.025,y:.1,w:.15,h:.2},{x:.075,y:.1,w:.1,h:.13333333333333333},{x:.075,y:.1,w:.15,h:.2},{x:.125,y:.1,w:.1,h:.13333333333333333},{x:.125,y:.1,w:.15,h:.2},{x:.175,y:.1,w:.1,h:.13333333333333333},{x:.175,y:.1,w:.15,h:.2},{x:.225,y:.1,w:.1,h:.13333333333333333},{x:.225,y:.1,w:.15,h:.2},{x:.275,y:.1,w:.1,h:.13333333333333333},{x:.275,y:.1,w:.15,h:.2},{x:.325,y:.1,w:.1,h:.13333333333333333},{x:.325,y:.1,w:.15,h:.2},{x:.375,y:.1,w:.1,h:.13333333333333333},{x:.375,y:.1,w:.15,h:.2},{x:.425,y:.1,w:.1,h:.13333333333333333},{x:.425,y:.1,w:.15,h:.2},{x:.475,y:.1,w:.1,h:.13333333333333333},{x:.475,y:.1,w:.15,h:.2},{x:.525,y:.1,w:.1,h:.13333333333333333},{x:.525,y:.1,w:.15,h:.2},{x:.575,y:.1,w:.1,h:.13333333333333333},{x:.575,y:.1,w:.15,h:.2},{x:.625,y:.1,w:.1,h:.13333333333333333},{x:.625,y:.1,w:.15,h:.2},{x:.675,y:.1,w:.1,h:.13333333333333333},{x:.675,y:.1,w:.15,h:.2},{x:.725,y:.1,w:.1,h:.13333333333333333},{x:.725,y:.1,w:.15,h:.2},{x:.775,y:.1,w:.1,h:.13333333333333333},{x:.775,y:.1,w:.15,h:.2},{x:.825,y:.1,w:.1,h:.13333333333333333},{x:.825,y:.1,w:.15,h:.2},{x:.875,y:.1,w:.1,h:.13333333333333333},{x:.875,y:.1,w:.15,h:.2},{x:.925,y:.1,w:.1,h:.13333333333333333},{x:.925,y:.1,w:.15,h:.2},{x:.975,y:.1,w:.1,h:.13333333333333333},{x:.975,y:.1,w:.15,h:.2},{x:.025,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.025,y:.16666666666666666,w:.15,h:.2},{x:.075,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.075,y:.16666666666666666,w:.15,h:.2},{x:.125,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.125,y:.16666666666666666,w:.15,h:.2},{x:.175,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.175,y:.16666666666666666,w:.15,h:.2},{x:.225,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.225,y:.16666666666666666,w:.15,h:.2},{x:.275,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.275,y:.16666666666666666,w:.15,h:.2},{x:.325,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.325,y:.16666666666666666,w:.15,h:.2},{x:.375,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.375,y:.16666666666666666,w:.15,h:.2},{x:.425,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.425,y:.16666666666666666,w:.15,h:.2},{x:.475,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.475,y:.16666666666666666,w:.15,h:.2},{x:.525,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.525,y:.16666666666666666,w:.15,h:.2},{x:.575,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.575,y:.16666666666666666,w:.15,h:.2},{x:.625,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.625,y:.16666666666666666,w:.15,h:.2},{x:.675,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.675,y:.16666666666666666,w:.15,h:.2},{x:.725,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.725,y:.16666666666666666,w:.15,h:.2},{x:.775,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.775,y:.16666666666666666,w:.15,h:.2},{x:.825,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.825,y:.16666666666666666,w:.15,h:.2},{x:.875,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.875,y:.16666666666666666,w:.15,h:.2},{x:.925,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.925,y:.16666666666666666,w:.15,h:.2},{x:.975,y:.16666666666666666,w:.1,h:.13333333333333333},{x:.975,y:.16666666666666666,w:.15,h:.2},{x:.025,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.025,y:.23333333333333334,w:.15,h:.2},{x:.075,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.075,y:.23333333333333334,w:.15,h:.2},{x:.125,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.125,y:.23333333333333334,w:.15,h:.2},{x:.175,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.175,y:.23333333333333334,w:.15,h:.2},{x:.225,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.225,y:.23333333333333334,w:.15,h:.2},{x:.275,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.275,y:.23333333333333334,w:.15,h:.2},{x:.325,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.325,y:.23333333333333334,w:.15,h:.2},{x:.375,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.375,y:.23333333333333334,w:.15,h:.2},{x:.425,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.425,y:.23333333333333334,w:.15,h:.2},{x:.475,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.475,y:.23333333333333334,w:.15,h:.2},{x:.525,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.525,y:.23333333333333334,w:.15,h:.2},{x:.575,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.575,y:.23333333333333334,w:.15,h:.2},{x:.625,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.625,y:.23333333333333334,w:.15,h:.2},{x:.675,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.675,y:.23333333333333334,w:.15,h:.2},{x:.725,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.725,y:.23333333333333334,w:.15,h:.2},{x:.775,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.775,y:.23333333333333334,w:.15,h:.2},{x:.825,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.825,y:.23333333333333334,w:.15,h:.2},{x:.875,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.875,y:.23333333333333334,w:.15,h:.2},{x:.925,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.925,y:.23333333333333334,w:.15,h:.2},{x:.975,y:.23333333333333334,w:.1,h:.13333333333333333},{x:.975,y:.23333333333333334,w:.15,h:.2},{x:.025,y:.3,w:.1,h:.13333333333333333},{x:.025,y:.3,w:.15,h:.2},{x:.075,y:.3,w:.1,h:.13333333333333333},{x:.075,y:.3,w:.15,h:.2},{x:.125,y:.3,w:.1,h:.13333333333333333},{x:.125,y:.3,w:.15,h:.2},{x:.175,y:.3,w:.1,h:.13333333333333333},{x:.175,y:.3,w:.15,h:.2},{x:.225,y:.3,w:.1,h:.13333333333333333},{x:.225,y:.3,w:.15,h:.2},{x:.275,y:.3,w:.1,h:.13333333333333333},{x:.275,y:.3,w:.15,h:.2},{x:.325,y:.3,w:.1,h:.13333333333333333},{x:.325,y:.3,w:.15,h:.2},{x:.375,y:.3,w:.1,h:.13333333333333333},{x:.375,y:.3,w:.15,h:.2},{x:.425,y:.3,w:.1,h:.13333333333333333},{x:.425,y:.3,w:.15,h:.2},{x:.475,y:.3,w:.1,h:.13333333333333333},{x:.475,y:.3,w:.15,h:.2},{x:.525,y:.3,w:.1,h:.13333333333333333},{x:.525,y:.3,w:.15,h:.2},{x:.575,y:.3,w:.1,h:.13333333333333333},{x:.575,y:.3,w:.15,h:.2},{x:.625,y:.3,w:.1,h:.13333333333333333},{x:.625,y:.3,w:.15,h:.2},{x:.675,y:.3,w:.1,h:.13333333333333333},{x:.675,y:.3,w:.15,h:.2},{x:.725,y:.3,w:.1,h:.13333333333333333},{x:.725,y:.3,w:.15,h:.2},{x:.775,y:.3,w:.1,h:.13333333333333333},{x:.775,y:.3,w:.15,h:.2},{x:.825,y:.3,w:.1,h:.13333333333333333},{x:.825,y:.3,w:.15,h:.2},{x:.875,y:.3,w:.1,h:.13333333333333333},{x:.875,y:.3,w:.15,h:.2},{x:.925,y:.3,w:.1,h:.13333333333333333},{x:.925,y:.3,w:.15,h:.2},{x:.975,y:.3,w:.1,h:.13333333333333333},{x:.975,y:.3,w:.15,h:.2},{x:.025,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.025,y:.36666666666666664,w:.15,h:.2},{x:.075,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.075,y:.36666666666666664,w:.15,h:.2},{x:.125,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.125,y:.36666666666666664,w:.15,h:.2},{x:.175,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.175,y:.36666666666666664,w:.15,h:.2},{x:.225,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.225,y:.36666666666666664,w:.15,h:.2},{x:.275,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.275,y:.36666666666666664,w:.15,h:.2},{x:.325,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.325,y:.36666666666666664,w:.15,h:.2},{x:.375,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.375,y:.36666666666666664,w:.15,h:.2},{x:.425,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.425,y:.36666666666666664,w:.15,h:.2},{x:.475,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.475,y:.36666666666666664,w:.15,h:.2},{x:.525,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.525,y:.36666666666666664,w:.15,h:.2},{x:.575,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.575,y:.36666666666666664,w:.15,h:.2},{x:.625,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.625,y:.36666666666666664,w:.15,h:.2},{x:.675,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.675,y:.36666666666666664,w:.15,h:.2},{x:.725,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.725,y:.36666666666666664,w:.15,h:.2},{x:.775,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.775,y:.36666666666666664,w:.15,h:.2},{x:.825,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.825,y:.36666666666666664,w:.15,h:.2},{x:.875,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.875,y:.36666666666666664,w:.15,h:.2},{x:.925,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.925,y:.36666666666666664,w:.15,h:.2},{x:.975,y:.36666666666666664,w:.1,h:.13333333333333333},{x:.975,y:.36666666666666664,w:.15,h:.2},{x:.025,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.025,y:.43333333333333335,w:.15,h:.2},{x:.075,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.075,y:.43333333333333335,w:.15,h:.2},{x:.125,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.125,y:.43333333333333335,w:.15,h:.2},{x:.175,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.175,y:.43333333333333335,w:.15,h:.2},{x:.225,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.225,y:.43333333333333335,w:.15,h:.2},{x:.275,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.275,y:.43333333333333335,w:.15,h:.2},{x:.325,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.325,y:.43333333333333335,w:.15,h:.2},{x:.375,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.375,y:.43333333333333335,w:.15,h:.2},{x:.425,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.425,y:.43333333333333335,w:.15,h:.2},{x:.475,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.475,y:.43333333333333335,w:.15,h:.2},{x:.525,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.525,y:.43333333333333335,w:.15,h:.2},{x:.575,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.575,y:.43333333333333335,w:.15,h:.2},{x:.625,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.625,y:.43333333333333335,w:.15,h:.2},{x:.675,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.675,y:.43333333333333335,w:.15,h:.2},{x:.725,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.725,y:.43333333333333335,w:.15,h:.2},{x:.775,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.775,y:.43333333333333335,w:.15,h:.2},{x:.825,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.825,y:.43333333333333335,w:.15,h:.2},{x:.875,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.875,y:.43333333333333335,w:.15,h:.2},{x:.925,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.925,y:.43333333333333335,w:.15,h:.2},{x:.975,y:.43333333333333335,w:.1,h:.13333333333333333},{x:.975,y:.43333333333333335,w:.15,h:.2},{x:.025,y:.5,w:.1,h:.13333333333333333},{x:.025,y:.5,w:.15,h:.2},{x:.075,y:.5,w:.1,h:.13333333333333333},{x:.075,y:.5,w:.15,h:.2},{x:.125,y:.5,w:.1,h:.13333333333333333},{x:.125,y:.5,w:.15,h:.2},{x:.175,y:.5,w:.1,h:.13333333333333333},{x:.175,y:.5,w:.15,h:.2},{x:.225,y:.5,w:.1,h:.13333333333333333},{x:.225,y:.5,w:.15,h:.2},{x:.275,y:.5,w:.1,h:.13333333333333333},{x:.275,y:.5,w:.15,h:.2},{x:.325,y:.5,w:.1,h:.13333333333333333},{x:.325,y:.5,w:.15,h:.2},{x:.375,y:.5,w:.1,h:.13333333333333333},{x:.375,y:.5,w:.15,h:.2},{x:.425,y:.5,w:.1,h:.13333333333333333},{x:.425,y:.5,w:.15,h:.2},{x:.475,y:.5,w:.1,h:.13333333333333333},{x:.475,y:.5,w:.15,h:.2},{x:.525,y:.5,w:.1,h:.13333333333333333},{x:.525,y:.5,w:.15,h:.2},{x:.575,y:.5,w:.1,h:.13333333333333333},{x:.575,y:.5,w:.15,h:.2},{x:.625,y:.5,w:.1,h:.13333333333333333},{x:.625,y:.5,w:.15,h:.2},{x:.675,y:.5,w:.1,h:.13333333333333333},{x:.675,y:.5,w:.15,h:.2},{x:.725,y:.5,w:.1,h:.13333333333333333},{x:.725,y:.5,w:.15,h:.2},{x:.775,y:.5,w:.1,h:.13333333333333333},{x:.775,y:.5,w:.15,h:.2},{x:.825,y:.5,w:.1,h:.13333333333333333},{x:.825,y:.5,w:.15,h:.2},{x:.875,y:.5,w:.1,h:.13333333333333333},{x:.875,y:.5,w:.15,h:.2},{x:.925,y:.5,w:.1,h:.13333333333333333},{x:.925,y:.5,w:.15,h:.2},{x:.975,y:.5,w:.1,h:.13333333333333333},{x:.975,y:.5,w:.15,h:.2},{x:.025,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.025,y:.5666666666666667,w:.15,h:.2},{x:.075,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.075,y:.5666666666666667,w:.15,h:.2},{x:.125,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.125,y:.5666666666666667,w:.15,h:.2},{x:.175,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.175,y:.5666666666666667,w:.15,h:.2},{x:.225,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.225,y:.5666666666666667,w:.15,h:.2},{x:.275,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.275,y:.5666666666666667,w:.15,h:.2},{x:.325,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.325,y:.5666666666666667,w:.15,h:.2},{x:.375,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.375,y:.5666666666666667,w:.15,h:.2},{x:.425,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.425,y:.5666666666666667,w:.15,h:.2},{x:.475,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.475,y:.5666666666666667,w:.15,h:.2},{x:.525,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.525,y:.5666666666666667,w:.15,h:.2},{x:.575,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.575,y:.5666666666666667,w:.15,h:.2},{x:.625,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.625,y:.5666666666666667,w:.15,h:.2},{x:.675,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.675,y:.5666666666666667,w:.15,h:.2},{x:.725,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.725,y:.5666666666666667,w:.15,h:.2},{x:.775,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.775,y:.5666666666666667,w:.15,h:.2},{x:.825,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.825,y:.5666666666666667,w:.15,h:.2},{x:.875,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.875,y:.5666666666666667,w:.15,h:.2},{x:.925,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.925,y:.5666666666666667,w:.15,h:.2},{x:.975,y:.5666666666666667,w:.1,h:.13333333333333333},{x:.975,y:.5666666666666667,w:.15,h:.2},{x:.025,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.025,y:.6333333333333333,w:.15,h:.2},{x:.075,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.075,y:.6333333333333333,w:.15,h:.2},{x:.125,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.125,y:.6333333333333333,w:.15,h:.2},{x:.175,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.175,y:.6333333333333333,w:.15,h:.2},{x:.225,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.225,y:.6333333333333333,w:.15,h:.2},{x:.275,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.275,y:.6333333333333333,w:.15,h:.2},{x:.325,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.325,y:.6333333333333333,w:.15,h:.2},{x:.375,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.375,y:.6333333333333333,w:.15,h:.2},{x:.425,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.425,y:.6333333333333333,w:.15,h:.2},{x:.475,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.475,y:.6333333333333333,w:.15,h:.2},{x:.525,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.525,y:.6333333333333333,w:.15,h:.2},{x:.575,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.575,y:.6333333333333333,w:.15,h:.2},{x:.625,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.625,y:.6333333333333333,w:.15,h:.2},{x:.675,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.675,y:.6333333333333333,w:.15,h:.2},{x:.725,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.725,y:.6333333333333333,w:.15,h:.2},{x:.775,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.775,y:.6333333333333333,w:.15,h:.2},{x:.825,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.825,y:.6333333333333333,w:.15,h:.2},{x:.875,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.875,y:.6333333333333333,w:.15,h:.2},{x:.925,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.925,y:.6333333333333333,w:.15,h:.2},{x:.975,y:.6333333333333333,w:.1,h:.13333333333333333},{x:.975,y:.6333333333333333,w:.15,h:.2},{x:.025,y:.7,w:.1,h:.13333333333333333},{x:.025,y:.7,w:.15,h:.2},{x:.075,y:.7,w:.1,h:.13333333333333333},{x:.075,y:.7,w:.15,h:.2},{x:.125,y:.7,w:.1,h:.13333333333333333},{x:.125,y:.7,w:.15,h:.2},{x:.175,y:.7,w:.1,h:.13333333333333333},{x:.175,y:.7,w:.15,h:.2},{x:.225,y:.7,w:.1,h:.13333333333333333},{x:.225,y:.7,w:.15,h:.2},{x:.275,y:.7,w:.1,h:.13333333333333333},{x:.275,y:.7,w:.15,h:.2},{x:.325,y:.7,w:.1,h:.13333333333333333},{x:.325,y:.7,w:.15,h:.2},{x:.375,y:.7,w:.1,h:.13333333333333333},{x:.375,y:.7,w:.15,h:.2},{x:.425,y:.7,w:.1,h:.13333333333333333},{x:.425,y:.7,w:.15,h:.2},{x:.475,y:.7,w:.1,h:.13333333333333333},{x:.475,y:.7,w:.15,h:.2},{x:.525,y:.7,w:.1,h:.13333333333333333},{x:.525,y:.7,w:.15,h:.2},{x:.575,y:.7,w:.1,h:.13333333333333333},{x:.575,y:.7,w:.15,h:.2},{x:.625,y:.7,w:.1,h:.13333333333333333},{x:.625,y:.7,w:.15,h:.2},{x:.675,y:.7,w:.1,h:.13333333333333333},{x:.675,y:.7,w:.15,h:.2},{x:.725,y:.7,w:.1,h:.13333333333333333},{x:.725,y:.7,w:.15,h:.2},{x:.775,y:.7,w:.1,h:.13333333333333333},{x:.775,y:.7,w:.15,h:.2},{x:.825,y:.7,w:.1,h:.13333333333333333},{x:.825,y:.7,w:.15,h:.2},{x:.875,y:.7,w:.1,h:.13333333333333333},{x:.875,y:.7,w:.15,h:.2},{x:.925,y:.7,w:.1,h:.13333333333333333},{x:.925,y:.7,w:.15,h:.2},{x:.975,y:.7,w:.1,h:.13333333333333333},{x:.975,y:.7,w:.15,h:.2},{x:.025,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.025,y:.7666666666666667,w:.15,h:.2},{x:.075,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.075,y:.7666666666666667,w:.15,h:.2},{x:.125,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.125,y:.7666666666666667,w:.15,h:.2},{x:.175,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.175,y:.7666666666666667,w:.15,h:.2},{x:.225,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.225,y:.7666666666666667,w:.15,h:.2},{x:.275,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.275,y:.7666666666666667,w:.15,h:.2},{x:.325,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.325,y:.7666666666666667,w:.15,h:.2},{x:.375,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.375,y:.7666666666666667,w:.15,h:.2},{x:.425,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.425,y:.7666666666666667,w:.15,h:.2},{x:.475,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.475,y:.7666666666666667,w:.15,h:.2},{x:.525,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.525,y:.7666666666666667,w:.15,h:.2},{x:.575,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.575,y:.7666666666666667,w:.15,h:.2},{x:.625,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.625,y:.7666666666666667,w:.15,h:.2},{x:.675,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.675,y:.7666666666666667,w:.15,h:.2},{x:.725,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.725,y:.7666666666666667,w:.15,h:.2},{x:.775,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.775,y:.7666666666666667,w:.15,h:.2},{x:.825,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.825,y:.7666666666666667,w:.15,h:.2},{x:.875,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.875,y:.7666666666666667,w:.15,h:.2},{x:.925,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.925,y:.7666666666666667,w:.15,h:.2},{x:.975,y:.7666666666666667,w:.1,h:.13333333333333333},{x:.975,y:.7666666666666667,w:.15,h:.2},{x:.025,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.025,y:.8333333333333334,w:.15,h:.2},{x:.075,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.075,y:.8333333333333334,w:.15,h:.2},{x:.125,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.125,y:.8333333333333334,w:.15,h:.2},{x:.175,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.175,y:.8333333333333334,w:.15,h:.2},{x:.225,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.225,y:.8333333333333334,w:.15,h:.2},{x:.275,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.275,y:.8333333333333334,w:.15,h:.2},{x:.325,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.325,y:.8333333333333334,w:.15,h:.2},{x:.375,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.375,y:.8333333333333334,w:.15,h:.2},{x:.425,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.425,y:.8333333333333334,w:.15,h:.2},{x:.475,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.475,y:.8333333333333334,w:.15,h:.2},{x:.525,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.525,y:.8333333333333334,w:.15,h:.2},{x:.575,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.575,y:.8333333333333334,w:.15,h:.2},{x:.625,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.625,y:.8333333333333334,w:.15,h:.2},{x:.675,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.675,y:.8333333333333334,w:.15,h:.2},{x:.725,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.725,y:.8333333333333334,w:.15,h:.2},{x:.775,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.775,y:.8333333333333334,w:.15,h:.2},{x:.825,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.825,y:.8333333333333334,w:.15,h:.2},{x:.875,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.875,y:.8333333333333334,w:.15,h:.2},{x:.925,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.925,y:.8333333333333334,w:.15,h:.2},{x:.975,y:.8333333333333334,w:.1,h:.13333333333333333},{x:.975,y:.8333333333333334,w:.15,h:.2},{x:.025,y:.9,w:.1,h:.13333333333333333},{x:.025,y:.9,w:.15,h:.2},{x:.075,y:.9,w:.1,h:.13333333333333333},{x:.075,y:.9,w:.15,h:.2},{x:.125,y:.9,w:.1,h:.13333333333333333},{x:.125,y:.9,w:.15,h:.2},{x:.175,y:.9,w:.1,h:.13333333333333333},{x:.175,y:.9,w:.15,h:.2},{x:.225,y:.9,w:.1,h:.13333333333333333},{x:.225,y:.9,w:.15,h:.2},{x:.275,y:.9,w:.1,h:.13333333333333333},{x:.275,y:.9,w:.15,h:.2},{x:.325,y:.9,w:.1,h:.13333333333333333},{x:.325,y:.9,w:.15,h:.2},{x:.375,y:.9,w:.1,h:.13333333333333333},{x:.375,y:.9,w:.15,h:.2},{x:.425,y:.9,w:.1,h:.13333333333333333},{x:.425,y:.9,w:.15,h:.2},{x:.475,y:.9,w:.1,h:.13333333333333333},{x:.475,y:.9,w:.15,h:.2},{x:.525,y:.9,w:.1,h:.13333333333333333},{x:.525,y:.9,w:.15,h:.2},{x:.575,y:.9,w:.1,h:.13333333333333333},{x:.575,y:.9,w:.15,h:.2},{x:.625,y:.9,w:.1,h:.13333333333333333},{x:.625,y:.9,w:.15,h:.2},{x:.675,y:.9,w:.1,h:.13333333333333333},{x:.675,y:.9,w:.15,h:.2},{x:.725,y:.9,w:.1,h:.13333333333333333},{x:.725,y:.9,w:.15,h:.2},{x:.775,y:.9,w:.1,h:.13333333333333333},{x:.775,y:.9,w:.15,h:.2},{x:.825,y:.9,w:.1,h:.13333333333333333},{x:.825,y:.9,w:.15,h:.2},{x:.875,y:.9,w:.1,h:.13333333333333333},{x:.875,y:.9,w:.15,h:.2},{x:.925,y:.9,w:.1,h:.13333333333333333},{x:.925,y:.9,w:.15,h:.2},{x:.975,y:.9,w:.1,h:.13333333333333333},{x:.975,y:.9,w:.15,h:.2},{x:.025,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.025,y:.9666666666666667,w:.15,h:.2},{x:.075,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.075,y:.9666666666666667,w:.15,h:.2},{x:.125,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.125,y:.9666666666666667,w:.15,h:.2},{x:.175,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.175,y:.9666666666666667,w:.15,h:.2},{x:.225,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.225,y:.9666666666666667,w:.15,h:.2},{x:.275,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.275,y:.9666666666666667,w:.15,h:.2},{x:.325,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.325,y:.9666666666666667,w:.15,h:.2},{x:.375,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.375,y:.9666666666666667,w:.15,h:.2},{x:.425,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.425,y:.9666666666666667,w:.15,h:.2},{x:.475,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.475,y:.9666666666666667,w:.15,h:.2},{x:.525,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.525,y:.9666666666666667,w:.15,h:.2},{x:.575,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.575,y:.9666666666666667,w:.15,h:.2},{x:.625,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.625,y:.9666666666666667,w:.15,h:.2},{x:.675,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.675,y:.9666666666666667,w:.15,h:.2},{x:.725,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.725,y:.9666666666666667,w:.15,h:.2},{x:.775,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.775,y:.9666666666666667,w:.15,h:.2},{x:.825,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.825,y:.9666666666666667,w:.15,h:.2},{x:.875,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.875,y:.9666666666666667,w:.15,h:.2},{x:.925,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.925,y:.9666666666666667,w:.15,h:.2},{x:.975,y:.9666666666666667,w:.1,h:.13333333333333333},{x:.975,y:.9666666666666667,w:.15,h:.2},{x:.05,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.05,y:.06666666666666667,w:.3,h:.4},{x:.15,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.15,y:.06666666666666667,w:.3,h:.4},{x:.25,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.25,y:.06666666666666667,w:.3,h:.4},{x:.35,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.35,y:.06666666666666667,w:.3,h:.4},{x:.45,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.45,y:.06666666666666667,w:.3,h:.4},{x:.55,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.55,y:.06666666666666667,w:.3,h:.4},{x:.65,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.65,y:.06666666666666667,w:.3,h:.4},{x:.75,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.75,y:.06666666666666667,w:.3,h:.4},{x:.85,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.85,y:.06666666666666667,w:.3,h:.4},{x:.95,y:.06666666666666667,w:.2,h:.26666666666666666},{x:.95,y:.06666666666666667,w:.3,h:.4},{x:.05,y:.2,w:.2,h:.26666666666666666},{x:.05,y:.2,w:.3,h:.4},{x:.15,y:.2,w:.2,h:.26666666666666666},{x:.15,y:.2,w:.3,h:.4},{x:.25,y:.2,w:.2,h:.26666666666666666},{x:.25,y:.2,w:.3,h:.4},{x:.35,y:.2,w:.2,h:.26666666666666666},{x:.35,y:.2,w:.3,h:.4},{x:.45,y:.2,w:.2,h:.26666666666666666},{x:.45,y:.2,w:.3,h:.4},{x:.55,y:.2,w:.2,h:.26666666666666666},{x:.55,y:.2,w:.3,h:.4},{x:.65,y:.2,w:.2,h:.26666666666666666},{x:.65,y:.2,w:.3,h:.4},{x:.75,y:.2,w:.2,h:.26666666666666666},{x:.75,y:.2,w:.3,h:.4},{x:.85,y:.2,w:.2,h:.26666666666666666},{x:.85,y:.2,w:.3,h:.4},{x:.95,y:.2,w:.2,h:.26666666666666666},{x:.95,y:.2,w:.3,h:.4},{x:.05,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.05,y:.3333333333333333,w:.3,h:.4},{x:.15,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.15,y:.3333333333333333,w:.3,h:.4},{x:.25,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.25,y:.3333333333333333,w:.3,h:.4},{x:.35,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.35,y:.3333333333333333,w:.3,h:.4},{x:.45,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.45,y:.3333333333333333,w:.3,h:.4},{x:.55,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.55,y:.3333333333333333,w:.3,h:.4},{x:.65,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.65,y:.3333333333333333,w:.3,h:.4},{x:.75,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.75,y:.3333333333333333,w:.3,h:.4},{x:.85,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.85,y:.3333333333333333,w:.3,h:.4},{x:.95,y:.3333333333333333,w:.2,h:.26666666666666666},{x:.95,y:.3333333333333333,w:.3,h:.4},{x:.05,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.05,y:.4666666666666667,w:.3,h:.4},{x:.15,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.15,y:.4666666666666667,w:.3,h:.4},{x:.25,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.25,y:.4666666666666667,w:.3,h:.4},{x:.35,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.35,y:.4666666666666667,w:.3,h:.4},{x:.45,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.45,y:.4666666666666667,w:.3,h:.4},{x:.55,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.55,y:.4666666666666667,w:.3,h:.4},{x:.65,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.65,y:.4666666666666667,w:.3,h:.4},{x:.75,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.75,y:.4666666666666667,w:.3,h:.4},{x:.85,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.85,y:.4666666666666667,w:.3,h:.4},{x:.95,y:.4666666666666667,w:.2,h:.26666666666666666},{x:.95,y:.4666666666666667,w:.3,h:.4},{x:.05,y:.6,w:.2,h:.26666666666666666},{x:.05,y:.6,w:.3,h:.4},{x:.15,y:.6,w:.2,h:.26666666666666666},{x:.15,y:.6,w:.3,h:.4},{x:.25,y:.6,w:.2,h:.26666666666666666},{x:.25,y:.6,w:.3,h:.4},{x:.35,y:.6,w:.2,h:.26666666666666666},{x:.35,y:.6,w:.3,h:.4},{x:.45,y:.6,w:.2,h:.26666666666666666},{x:.45,y:.6,w:.3,h:.4},{x:.55,y:.6,w:.2,h:.26666666666666666},{x:.55,y:.6,w:.3,h:.4},{x:.65,y:.6,w:.2,h:.26666666666666666},{x:.65,y:.6,w:.3,h:.4},{x:.75,y:.6,w:.2,h:.26666666666666666},{x:.75,y:.6,w:.3,h:.4},{x:.85,y:.6,w:.2,h:.26666666666666666},{x:.85,y:.6,w:.3,h:.4},{x:.95,y:.6,w:.2,h:.26666666666666666},{x:.95,y:.6,w:.3,h:.4},{x:.05,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.05,y:.7333333333333333,w:.3,h:.4},{x:.15,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.15,y:.7333333333333333,w:.3,h:.4},{x:.25,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.25,y:.7333333333333333,w:.3,h:.4},{x:.35,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.35,y:.7333333333333333,w:.3,h:.4},{x:.45,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.45,y:.7333333333333333,w:.3,h:.4},{x:.55,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.55,y:.7333333333333333,w:.3,h:.4},{x:.65,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.65,y:.7333333333333333,w:.3,h:.4},{x:.75,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.75,y:.7333333333333333,w:.3,h:.4},{x:.85,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.85,y:.7333333333333333,w:.3,h:.4},{x:.95,y:.7333333333333333,w:.2,h:.26666666666666666},{x:.95,y:.7333333333333333,w:.3,h:.4},{x:.05,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.05,y:.8666666666666667,w:.3,h:.4},{x:.15,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.15,y:.8666666666666667,w:.3,h:.4},{x:.25,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.25,y:.8666666666666667,w:.3,h:.4},{x:.35,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.35,y:.8666666666666667,w:.3,h:.4},{x:.45,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.45,y:.8666666666666667,w:.3,h:.4},{x:.55,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.55,y:.8666666666666667,w:.3,h:.4},{x:.65,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.65,y:.8666666666666667,w:.3,h:.4},{x:.75,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.75,y:.8666666666666667,w:.3,h:.4},{x:.85,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.85,y:.8666666666666667,w:.3,h:.4},{x:.95,y:.8666666666666667,w:.2,h:.26666666666666666},{x:.95,y:.8666666666666667,w:.3,h:.4},{x:.05,y:1,w:.2,h:.26666666666666666},{x:.05,y:1,w:.3,h:.4},{x:.15,y:1,w:.2,h:.26666666666666666},{x:.15,y:1,w:.3,h:.4},{x:.25,y:1,w:.2,h:.26666666666666666},{x:.25,y:1,w:.3,h:.4},{x:.35,y:1,w:.2,h:.26666666666666666},{x:.35,y:1,w:.3,h:.4},{x:.45,y:1,w:.2,h:.26666666666666666},{x:.45,y:1,w:.3,h:.4},{x:.55,y:1,w:.2,h:.26666666666666666},{x:.55,y:1,w:.3,h:.4},{x:.65,y:1,w:.2,h:.26666666666666666},{x:.65,y:1,w:.3,h:.4},{x:.75,y:1,w:.2,h:.26666666666666666},{x:.75,y:1,w:.3,h:.4},{x:.85,y:1,w:.2,h:.26666666666666666},{x:.85,y:1,w:.3,h:.4},{x:.95,y:1,w:.2,h:.26666666666666666},{x:.95,y:1,w:.3,h:.4},{x:.1,y:.13333333333333333,w:.4,h:.5333333333333333},{x:.1,y:.13333333333333333,w:.6,h:.8},{x:.1,y:.13333333333333333,w:.8,h:1},{x:.3,y:.13333333333333333,w:.4,h:.5333333333333333},{x:.3,y:.13333333333333333,w:.6,h:.8},{x:.3,y:.13333333333333333,w:.8,h:1},{x:.5,y:.13333333333333333,w:.4,h:.5333333333333333},{x:.5,y:.13333333333333333,w:.6,h:.8},{x:.5,y:.13333333333333333,w:.8,h:1},{x:.7,y:.13333333333333333,w:.4,h:.5333333333333333},{x:.7,y:.13333333333333333,w:.6,h:.8},{x:.7,y:.13333333333333333,w:.8,h:1},{x:.9,y:.13333333333333333,w:.4,h:.5333333333333333},{x:.9,y:.13333333333333333,w:.6,h:.8},{x:.9,y:.13333333333333333,w:.8,h:1},{x:.1,y:.4,w:.4,h:.5333333333333333},{x:.1,y:.4,w:.6,h:.8},{x:.1,y:.4,w:.8,h:1},{x:.3,y:.4,w:.4,h:.5333333333333333},{x:.3,y:.4,w:.6,h:.8},{x:.3,y:.4,w:.8,h:1},{x:.5,y:.4,w:.4,h:.5333333333333333},{x:.5,y:.4,w:.6,h:.8},{x:.5,y:.4,w:.8,h:1},{x:.7,y:.4,w:.4,h:.5333333333333333},{x:.7,y:.4,w:.6,h:.8},{x:.7,y:.4,w:.8,h:1},{x:.9,y:.4,w:.4,h:.5333333333333333},{x:.9,y:.4,w:.6,h:.8},{x:.9,y:.4,w:.8,h:1},{x:.1,y:.6666666666666666,w:.4,h:.5333333333333333},{x:.1,y:.6666666666666666,w:.6,h:.8},{x:.1,y:.6666666666666666,w:.8,h:1},{x:.3,y:.6666666666666666,w:.4,h:.5333333333333333},{x:.3,y:.6666666666666666,w:.6,h:.8},{x:.3,y:.6666666666666666,w:.8,h:1},{x:.5,y:.6666666666666666,w:.4,h:.5333333333333333},{x:.5,y:.6666666666666666,w:.6,h:.8},{x:.5,y:.6666666666666666,w:.8,h:1},{x:.7,y:.6666666666666666,w:.4,h:.5333333333333333},{x:.7,y:.6666666666666666,w:.6,h:.8},{x:.7,y:.6666666666666666,w:.8,h:1},{x:.9,y:.6666666666666666,w:.4,h:.5333333333333333},{x:.9,y:.6666666666666666,w:.6,h:.8},{x:.9,y:.6666666666666666,w:.8,h:1},{x:.1,y:.9333333333333333,w:.4,h:.5333333333333333},{x:.1,y:.9333333333333333,w:.6,h:.8},{x:.1,y:.9333333333333333,w:.8,h:1},{x:.3,y:.9333333333333333,w:.4,h:.5333333333333333},{x:.3,y:.9333333333333333,w:.6,h:.8},{x:.3,y:.9333333333333333,w:.8,h:1},{x:.5,y:.9333333333333333,w:.4,h:.5333333333333333},{x:.5,y:.9333333333333333,w:.6,h:.8},{x:.5,y:.9333333333333333,w:.8,h:1},{x:.7,y:.9333333333333333,w:.4,h:.5333333333333333},{x:.7,y:.9333333333333333,w:.6,h:.8},{x:.7,y:.9333333333333333,w:.8,h:1},{x:.9,y:.9333333333333333,w:.4,h:.5333333333333333},{x:.9,y:.9333333333333333,w:.6,h:.8},{x:.9,y:.9333333333333333,w:.8,h:1}];function hT(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return cT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cT(e,t);}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var _n182=0,i=function i(){};return{s:i,n:function n(){return _n182>=e.length?{done:!0}:{done:!1,value:e[_n182++]};},e:function e(_e949){throw _e949;},f:i};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,s=!1;return{s:function s(){r=r.call(e);},n:function n(){var e=r.next();return a=e.done,e;},e:function e(_e950){s=!0,o=_e950;},f:function f(){try{a||null==r["return"]||r["return"]();}finally{if(s)throw o;}}};}function cT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n;}function dT(e,t,r){var n=aA()(new Float32Array(e),[1,r,t,4]);n=n.transpose(0,3,1,2);var i=aA()(new Float32Array(r*t*3),[1,3,r,t]);return uA().assign(i.pick(0,0,null,null),n.pick(0,0,null,null)),uA().assign(i.pick(0,1,null,null),n.pick(0,1,null,null)),uA().assign(i.pick(0,2,null,null),n.pick(0,2,null,null)),uA().mulseq(i,1/127.5),uA().subseq(i,1),i;}function fT(e){for(var t=e.tensor,r=e.faceDetectorAccuracy,n=void 0===r?.85:r,i=e.outputHeight,o=void 0===i?240:i,a=e.outputWidth,s=void 0===a?320:a,u=[],l=aA()(t.boxes.data,[1,4420,4]),h=aA()(t.scores.data,[1,4420,2]),c=0;c<4420;c++){if(!(h.data[2*c+1]<=n)){var d=.1*l.data[4*c+0]*lT[c].w+lT[c].x,f=.1*l.data[4*c+1]*lT[c].h+lT[c].y,p=Math.exp(.2*l.data[4*c+2])*lT[c].w,y=Math.exp(.2*l.data[4*c+3])*lT[c].h,g={x1:(d-p/2)*s,y1:(f-y/2)*o,x2:(d+p/2)*s,y2:(f+y/2)*o};if(u.length){var m,w=!1,b=hT(u);try{for(b.s();!(m=b.n()).done;){if(m.value.checkSame(g)){w=!0;break;}}}catch(e){b.e(e);}finally{b.f();}w||u.push(new uT(g));}else u.push(new uT(g));}}return u;}function pT(e){return pT="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},pT(e);}function yT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gT(n.key),n);}}function gT(e){var t=function(e,t){if("object"!=pT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==pT(t)?t:String(t);}var mT=function(){function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.isFinished=!0,this.startValue=t.startValue,this.currentValue=t.startValue,this.currentStep=0,this.endValue=null!==(r=t.endValue)&&void 0!==r?r:t.startValue,this.smoothPower=null!==(n=t.smoothPower)&&void 0!==n?n:1,this.smoothFunction=function(e){switch(t.smoothFunctionType){case"ease-out-sine":return Math.sin(e*Math.PI/2);case"ease-out-quint":return 1-Math.pow(1-e,5);case"ease-out-cubic":Math.pow(1-e,3);default:return e;}};}var t,r,n;return t=e,r=[{key:"isEnded",value:function value(e){var t,r=Math.max(0,Math.min(1,null!==(t=null==e?void 0:e.percentage)&&void 0!==t?t:1));return(null==e?void 0:e.isreverse)&&(r=1-r),(null==e?void 0:e.isreverse)?this.currentStep<=this.smoothPower*r:this.currentStep>=this.smoothPower*r;}},{key:"getCurrentValue",value:function value(){return this.currentValue;}},{key:"getEndValue",value:function value(){return this.endValue;}},{key:"setCurrentStep",value:function value(e){this.currentStep=e;}},{key:"checkEndValueChange",value:function value(e){e!==this.endValue&&(this.startValue=this.currentValue,this.endValue=e,this.currentStep=1);}},{key:"useAnimationPart",value:function value(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Math.min(1,Math.max(0,e));var r=Math.max(1,Math.round(this.smoothPower*e));t?this.currentStep<r&&(this.currentStep=r):this.currentStep>r&&(this.currentStep=r);}},{key:"useSmooth",value:function value(e){var t;if(this.startValue===this.endValue)return this.currentValue;var r=(null==e?void 0:e.isReverse)?-1:1,n=this.currentStep/this.smoothPower,i=this.smoothFunction(n);return this.currentValue=this.startValue+(this.endValue-this.startValue)*i,this.smoothPower=null!==(t=null==e?void 0:e.newSmoothPower)&&void 0!==t?t:this.smoothPower,this.isFinished=this.currentStep===((null==e?void 0:e.isReverse)?0:this.smoothPower),this.currentStep=Math.max(0,Math.min(this.smoothPower,this.currentStep+r)),this.currentValue;}}],r&&yT(t.prototype,r),n&&yT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function wT(e){return wT="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},wT(e);}function bT(){bT=function bT(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==wT(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(wT(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function vT(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function xT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){vT(o,n,i,a,s,"next",e);}function s(e){vT(o,n,i,a,s,"throw",e);}a(void 0);});};}function _T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IT(n.key),n);}}function IT(e){var t=function(e,t){if("object"!=wT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==wT(t)?t:String(t);}function AT(e,t,r){return t=CT(t),function(e,t){if(t&&("object"===wT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,ST()?Reflect.construct(t,r||[],CT(e).constructor):t.apply(e,r));}function ST(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(ST=function ST(){return!!e;})();}function TT(){return TT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CT(e)););return e;}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value;}},TT.apply(this,arguments);}function CT(e){return CT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},CT(e);}function ET(e,t){return ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},ET(e,t);}var OT=["x1","x2","y1","y2"],kT=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=AT(this,t,[e])).faceCoord={},n.inWork=!1,n.customer_id=r,n.config=Object.assign({},iT),n;}var n,i,o,a,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ET(e,t);}(t,e),n=t,i=[{key:"init",value:(u=xT(bT().mark(function e(t){return bT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.inference=t,e.next=3,this.inference.init(this.customer_id,"facedetector");case 3:case"end":return e.stop();}},e,this);})),function(e){return u.apply(this,arguments);})},{key:"prepare",value:function value(){var e=this,t=this.config,r=t.modelHeight,n=t.modelWidth,i=t.smoothPower;this.globalWidth=this.sdkOptions.width,this.globalHeight=this.sdkOptions.height,this.original=new Zl(this.resources.texture,{width:this.globalWidth,height:this.globalHeight}),this.original.addBuffer("result"),this.small=new Zl(this.resources.texture,{width:n,height:r}),this.small.addBuffer("model"),this.scaleValue=1,this.xOffset=0,this.yOffset=0;var o=this.defaultFaceCoord(),a={};OT.forEach(function(t){e.faceCoord[t]=new mT({startValue:o[t],smoothPower:i}),a[t]=e.faceCoord[t].getCurrentValue();}),this.currentFace=new uT(a),this.sdkOptions.on("update",this.onOptionsUpdate,this);}},{key:"onOptionsUpdate",value:function value(){this.globalWidth=this.sdkOptions.width,this.globalHeight=this.sdkOptions.height,this.original.resize(this.globalWidth,this.globalHeight),this.scaleValue=1,this.xOffset=0,this.yOffset=0;}},{key:"process",value:(s=xT(bT().mark(function e(){var t=arguments;return bT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break;}return e.abrupt("return");case 2:this.fps=t[1]||1,this.updateWaiter(),this.resources.renderer.renderTo(this.small.frame,this.small.getBuffer("model")),this.findFaces(),this.setCurrentFace(),this.calcScale(),this.calcOffset(),this.setTransfrom(),this.original.frame.setTransform(this.xOffset,this.yOffset,this.scaleValue,this.scaleValue),this.resources.renderer.renderTo(this.original.frame,this.original.getBuffer("result")),this.resources.texture.update(this.original.getBuffer("result"),!1);case 13:case"end":return e.stop();}},e,this);})),function(){return s.apply(this,arguments);})},{key:"setCurrentFace",value:function value(){var e,t=this;(null===(e=this.faces)||void 0===e?void 0:e.length)?this.checkCurrentFace():this.noFaceWay();var r={};OT.forEach(function(e){t.faceCoord[e].useSmooth({newSmoothPower:t.config.smoothPower}),r[e]=t.faceCoord[e].getCurrentValue();}),this.currentFace=new uT(r),this.config.isFaceSquareDrawingEnabled,this.config.isPreFaceSquareDrawingEnabled;}},{key:"checkCurrentFace",value:function value(){var e=this;this.updateWaiter(!0);var t=this.faces.reduce(function(e,t){return t.getSquare()>e.getSquare()&&(e=t),e;},this.faces[0]),r=this.config.sensitivityValue/this.scaleValue;if(!t.isEqual(this.currentFace,r,this.globalHeight,this.globalWidth)){var n=t.getCoord();OT.forEach(function(t){e.faceCoord[t].checkEndValueChange(n[t]);});}}},{key:"noFaceWay",value:function value(){var e=this;if(this.waiter.value>0)return this.waiter.value--,void this.updateWaiter(!1);var t=this.defaultFaceCoord();OT.forEach(function(r){e.faceCoord[r].checkEndValueChange(t[r]);}),this.updateWaiter(!0);}},{key:"calcScale",value:function value(){var e=this.globalHeight*this.globalWidth,t=this.currentFace.getSquare()/e,r=this.config.faceAreaProportion/t;this.scaleValue=Math.sqrt(Math.max(r,1));}},{key:"calcOffset",value:function value(){var e=this,t=this.currentFace.getCenter(),r={x:{faceCenter:t.x,newOffset:0,base:this.globalWidth},y:{faceCenter:t.y,newOffset:0,base:this.globalHeight}};Object.values(r).forEach(function(t){var r=(e.scaleValue-1)/2*t.base,n=(t.base/2-t.faceCenter)*e.scaleValue,i=(e.scaleValue-1)*t.base,o=Math.max(n-r,-i);t.newOffset=Math.min(0,o);}),this.xOffset=r.x.newOffset,this.yOffset=r.y.newOffset;}},{key:"defaultFaceCoord",value:function value(){var e=this.globalWidth/2,t=this.globalHeight/2,r=e*Math.sqrt(this.config.faceAreaProportion),n=t*Math.sqrt(this.config.faceAreaProportion);return{x1:e-r,x2:e+r,y1:t-n,y2:t+n};}},{key:"updateWaiter",value:function value(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!this.waiter?this.waiter={value:this.fps*this.config.waiterSeconds,fps:this.fps}:(this.waiter.value=this.waiter.value/this.waiter.fps*this.fps,this.waiter.fps=this.fps);}},{key:"findFaces",value:(a=xT(bT().mark(function e(){var t,n,i,o,a,s,u,l=this;return bT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inWork){e.next=2;break;}return e.abrupt("return");case 2:if(this.checkTimer()){e.next=4;break;}return e.abrupt("return");case 4:return this.inWork=!0,t=this.config,n=t.faceDetectorAccuracy,i=t.modelHeight,o=t.modelWidth,a=this.small.getBuffer("model"),e.next=9,this.resources.renderer.pixelsAsync(a);case 9:return s=e.sent,u=dT(new Uint8ClampedArray(s),o,i),e.abrupt("return",this.inference.run(u.data,320,240,"facedetector").then(function(e){l.faces=fT({tensor:e,faceDetectorAccuracy:n,outputHeight:l.globalHeight,outputWidth:l.globalWidth});})["catch"](function(e){var t;r.ie.notify({message:null!==(t=e.message)&&void 0!==t?t:e,emitter:r.E7.EFFECT_SMART_ZOOM,cause:e});})["finally"](function(){return l.inWork=!1;}));case 13:case"end":return e.stop();}},e,this);})),function(){return a.apply(this,arguments);})},{key:"enable",value:function value(){TT(CT(t.prototype),"enable",this).call(this),this.setTransfrom();}},{key:"setTransfrom",value:function value(){this.resources.transform={xOffset:this.xOffset,yOffset:this.yOffset,scaleValue:this.scaleValue};}},{key:"disable",value:function value(){TT(CT(t.prototype),"disable",this).call(this),this.resources.transform=null,this.scaleValue=1,this.xOffset=0,this.yOffset=0;}},{key:"setConfig",value:function value(e,t){this.config[e]=t;}},{key:"checkTimer",value:function value(){return this.faceDetectorTimer?(performance.now()-this.faceDetectorTimer<this.config.faceDetectorPediod_ms||(this.faceDetectorTimer=0),!1):(this.faceDetectorTimer=performance.now(),!0);}},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this);}}],i&&_T(n.prototype,i),o&&_T(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(M_);function PT(e){return PT="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},PT(e);}function $T(){$T=function $T(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==PT(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(PT(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function RT(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function BT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DT(n.key),n);}}function DT(e){var t=function(e,t){if("object"!=PT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==PT(t)?t:String(t);}function MT(e,t,r){return t=FT(t),function(e,t){if(t&&("object"===PT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,LT()?Reflect.construct(t,r||[],FT(e).constructor):t.apply(e,r));}function LT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(LT=function LT(){return!!e;})();}function FT(e){return FT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},FT(e);}function NT(e,t){return NT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},NT(e,t);}var UT=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),MT(this,t,[e]);}var r,n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NT(e,t);}(t,e),r=t,n=[{key:"prepare",value:function value(){var e=this.resources.texture;this.original=new Zl(e,{width:this.sdkOptions.width,height:this.sdkOptions.height}),this.original.addBuffer("result"),this.sdkOptions.on("update",this.onOptionsUpdate,this);}},{key:"onOptionsUpdate",value:function value(){this.sdkOptions.isCustomSize()?(this.original.resize(this.sdkOptions.width,this.sdkOptions.height),this.enable()):this.disable();}},{key:"process",value:(o=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){RT(o,n,i,a,s,"next",e);}function s(e){RT(o,n,i,a,s,"throw",e);}a(void 0);});};}($T().mark(function e(){return $T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnabled){e.next=2;break;}return e.abrupt("return");case 2:this.resources.renderer.renderTo(this.original.frame,this.original.getBuffer("result")),this.resources.texture.update(this.original.getBuffer("result"),!1);case 4:case"end":return e.stop();}},e,this);})),function(){return o.apply(this,arguments);})},{key:"destroy",value:function value(){this.sdkOptions.off("update",this.onOptionsUpdate,this);}}],n&&BT(r.prototype,n),i&&BT(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(M_);function jT(e){return jT="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},jT(e);}function GT(e,t){return function(e){if(Array.isArray(e))return e;}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1;}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e;}finally{try{if(!u&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return;}finally{if(l)throw i;}}return s;}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zT(e,t);}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}();}function zT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n;}function VT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HT(n.key),n);}}function HT(e){var t=function(e,t){if("object"!=jT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==jT(t)?t:String(t);}var WT=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.options={},this.sdkOptions=t,this.container=new co(),this.setOptions(r);}var t,r,n;return t=e,r=[{key:"setOptions",value:function value(e){var t=this;e&&Object.entries(e).forEach(function(e){var r=GT(e,2),n=r[0],i=r[1];t.options[n]=i;});}},{key:"show",value:function value(){this.beforeShowFunction&&this.beforeShowFunction(),this.container.visible=!0,this.afterShowFunction&&this.afterShowFunction();}},{key:"hide",value:function value(){this.beforeHideFunction&&this.beforeHideFunction(),this.container.visible=!1,this.afterHideFunction&&this.afterHideFunction();}},{key:"onBeforeShow",value:function value(e){"function"==typeof e&&(this.beforeShowFunction=e);}},{key:"onAfterShow",value:function value(e){"function"==typeof e&&(this.afterShowFunction=e);}},{key:"onBeforeHide",value:function value(e){"function"==typeof e&&(this.beforeHideFunction=e);}},{key:"onAfterHide",value:function value(e){"function"==typeof e&&(this.afterHideFunction=e);}},{key:"isVisible",value:function value(){return this.container.visible;}},{key:"getOptions",value:function value(){return this.options;}},{key:"destroy",value:function value(){this.container.destroy(!0);}},{key:"px",value:function value(e){return this.sdkOptions.width/640*e;}},{key:"render",value:function value(){}}],r&&VT(t.prototype,r),n&&VT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}(),YT={set:function set(e,t,n){return n instanceof WT?"_"!==t[0]?Reflect.set(e,t,n):e.hasOwnProperty(t)?void 0!==e[t]?(r.ie.notify({type:r.cL.WARNING,message:"You can't overwrite service component '".concat(t,"' (components that begin with a '_' character)"),emitter:r.E7.COMPONENTS_SYSTEM}),!1):Reflect.set(e,t,n):(r.ie.notify({type:r.cL.WARNING,message:"The component ID('".concat(t,"') cannot begin with the character '_', this case reserved for service components."),emitter:r.E7.COMPONENTS_SYSTEM}),!1):(r.ie.notify({type:r.cL.WARNING,message:"Wrong assigned value",emitter:r.E7.COMPONENTS_SYSTEM}),!1);},get:function get(e,t,r){if("_getSortedComponentsArr"===t){var n=[],i=[];return Object.keys(e).forEach(function(t){e[t]&&("_"===t[0]?i.push(e[t]):n.push(e[t]));}),n.concat(i);}return Reflect.get(e,t,r);}};var KT=__webpack_require__(9e3);function XT(e){return function(t,r,n){var i=n.value;n.value=function(){var t,n=r+((t=e)?t.charAt(0).toUpperCase()+t.slice(1):"");KT.k.Instance.push(n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return i.apply(this,a);};};}function ZT(){ZT=function ZT(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==uC(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(uC(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function qT(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function JT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){qT(o,n,i,a,s,"next",e);}function s(e){qT(o,n,i,a,s,"throw",e);}a(void 0);});};}function QT(e,t,r){return t=rC(t),function(e,t){if(t&&("object"===uC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,eC()?Reflect.construct(t,r||[],rC(e).constructor):t.apply(e,r));}function eC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(eC=function eC(){return!!e;})();}function tC(){return tC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rC(e)););return e;}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value;}},tC.apply(this,arguments);}function rC(e){return rC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},rC(e);}function nC(e,t){return nC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},nC(e,t);}function iC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function oC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sC(n.key),n);}}function aC(e,t,r){return t&&oC(e.prototype,t),r&&oC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;}function sC(e){var t=function(e,t){if("object"!=uC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==uC(t)?t:String(t);}function uC(e){return uC="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},uC(e);}var lC=function lC(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":uC(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a;},hC=function hC(e,t){if("object"===("undefined"==typeof Reflect?"undefined":uC(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);},cC=function(){function e(t,r,n){iC(this,e),this.sprite=yo.from(t),this.sprite.width=null!=r?r:this.sprite.texture.baseTexture.width,this.sprite.height=null!=n?n:this.sprite.texture.baseTexture.height,this.ratio=this.sprite.width/this.sprite.height;}return aC(e,[{key:"destroy",value:function value(){var e,t;null===(t=null===(e=this.sprite)||void 0===e?void 0:e.texture)||void 0===t||t.destroy(!0);}}]),e;}(),dC=function(e){function t(e,r){var n;return iC(this,t),(n=QT(this,t,[e,r])).isVideo=!1,n.hide(),n.render(),n;}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nC(e,t);}(t,e),aC(t,[{key:"render",value:function value(){var e=this;this.container.removeChildren(),this.defaultOverlaySprite=new cC(Sn.WHITE,1920,1280),this.initOverlayFromUrl(this.options)["finally"](function(){return e.setOverlayImage();});}},{key:"show",value:function value(){this.switchVideoTexture(!0),tC(rC(t.prototype),"show",this).call(this);}},{key:"hide",value:function value(){tC(rC(t.prototype),"hide",this).call(this),this.switchVideoTexture(!1);}},{key:"initOverlayFromUrl",value:(o=JT(ZT().mark(function e(t){return ZT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadImage(null==t?void 0:t.url).then(function(){var e;return null===(e=null==t?void 0:t.promise)||void 0===e?void 0:e.resolve();})["catch"](function(e){var r;return null===(r=null==t?void 0:t.promise)||void 0===r?void 0:r.reject(e);})["finally"](function(){return null==t||delete t.promise;}));case 1:case"end":return e.stop();}},e,this);})),function(e){return o.apply(this,arguments);})},{key:"setOptions",value:(i=JT(ZT().mark(function e(t){return ZT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break;}return e.abrupt("return");case 2:this.loadImage(t.url).then(function(){var e;return null===(e=t.promise)||void 0===e?void 0:e.resolve();})["catch"](function(e){var r;return null===(r=t.promise)||void 0===r?void 0:r.reject(e);})["finally"](function(){return null==t||delete t.promise;});case 3:case"end":return e.stop();}},e,this);})),function(e){return i.apply(this,arguments);})},{key:"setOverlayImage",value:function value(){var e,t=null!==(e=this.loadedOverlaySprite)&&void 0!==e?e:this.defaultOverlaySprite,r=t.sprite,n=t.ratio,i=this.sdkOptions.width,o=this.sdkOptions.height,a=i/o-n,s=r.width;r.width=a>0?i:i-i*a,r.height=r.height*r.width/s,r.anchor.set(.5-i/r.width/2,.5-o/r.height/2),this.container.addChild(r);}},{key:"loadImage",value:(n=JT(ZT().mark(function e(t){var n=this;return ZT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break;}throw new Error("Invalid url");case 2:if(this.currentURL!==t&&this.processedURL!==t){e.next=4;break;}throw new Error("Same url");case 4:return this.processedURL=t,e.next=7,fetch(t,{method:"HEAD"}).then(function(e){if(!e.ok)throw new Error("Overlay Screen: Image loading error");})["catch"](function(e){throw r.ie.notify({type:r.cL.WARNING,message:'OverlayScreen image loading error [url = "'.concat(t,'"]. Error: ').concat(e),emitter:r.E7.COMPONENTS_SYSTEM,cause:e}),new Error("Overlay Screen: Image loading error");});case 7:Sn.fromURL(t).then(function(e){var r,i;n.isVideo=(null===(r=e.baseTexture.resource)||void 0===r?void 0:r.source)instanceof HTMLVideoElement,n.resource=e.baseTexture.resource,n.isVideo&&(n.resource.source.loop=!0,n.resource.source.autoplay=!1,n.container.visible&&n.resource.source.play(),n.resource.source.loop=!0,n.resource.source.muted=!0),n.container.removeChildren(),null===(i=n.loadedOverlaySprite)||void 0===i||i.destroy(),n.loadedOverlaySprite=new cC(e),n.currentURL=t;})["catch"](function(e){throw r.ie.notify({type:r.cL.WARNING,message:'OverlayScreen image loading error [url = "'.concat(t,'"]. Error: ').concat(e),emitter:r.E7.COMPONENTS_SYSTEM,cause:e}),new Error("Overlay Screen: Image loading error");})["finally"](function(){n.setOverlayImage(),n.processedURL="";});case 8:case"end":return e.stop();}},e,this);})),function(e){return n.apply(this,arguments);})},{key:"switchVideoTexture",value:function value(e){if(this.isVideo)return e?(this.resource.source.currentTime=0,void this.resource.source.play()):void this.resource.source.pause();}}]),t;}(WT);function fC(e){return fC="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},fC(e);}function pC(){pC=function pC(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==fC(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(fC(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function yC(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function gC(e){return mC.apply(this,arguments);}function mC(){return mC=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){yC(o,n,i,a,s,"next",e);}function s(e){yC(o,n,i,a,s,"throw",e);}a(void 0);});};}(pC().mark(function e(t){return pC().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"HEAD"});case 2:if(e.sent.ok){e.next=5;break;}throw new Error("Url is not available");case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop();}},e);})),mC.apply(this,arguments);}function wC(e){return wC="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},wC(e);}function bC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vC(n.key),n);}}function vC(e){var t=function(e,t){if("object"!=wC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==wC(t)?t:String(t);}lC([XT("overlayScreen"),hC("design:type",Function),hC("design:paramtypes",[]),hC("design:returntype",void 0)],dC.prototype,"show",null),lC([XT("overlayScreen"),hC("design:type",Function),hC("design:paramtypes",[]),hC("design:returntype",void 0)],dC.prototype,"hide",null);var xC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e);}var t,r,n;return t=e,n=[{key:"calcPosition",value:function value(e,t,r,n){return"custom"===r.placement?this.getCustomPosition(e,t,r.x,r.y):this.getPositionFromPlacement(e,t,r.placement,n);}},{key:"getPositionFromPlacement",value:function value(e,t,r,n){var i=n.height,o=n.width,a=e,s=t,u={x:0,y:0};return"center"==r?(u.x=(a-o)/2,u.y=(s-i)/2,u):(r.endsWith("right")&&(u.x=a-o),r.startsWith("bottom")&&(u.y=s-i),u);}},{key:"getCustomPosition",value:function value(e,t,r,n){return{x:e*r,y:t*n};}}],(r=null)&&bC(t.prototype,r),n&&bC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function _C(e){return _C="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},_C(e);}function IC(){IC=function IC(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==_C(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(_C(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function AC(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function SC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TC(n.key),n);}}function TC(e){var t=function(e,t){if("object"!=_C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==_C(t)?t:String(t);}function CC(e,t,r){return t=OC(t),function(e,t){if(t&&("object"===_C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,EC()?Reflect.construct(t,r||[],OC(e).constructor):t.apply(e,r));}function EC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(EC=function EC(){return!!e;})();}function OC(e){return OC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},OC(e);}function kC(e,t){return kC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},kC(e,t);}var PC=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=CC(this,t,[e])).sprite=new yo(),n.sprite.visible=!1,n.container.addChild(n.sprite),n.setOptions(Object.assign({url:"",position:{placement:"top-left",x:0,y:0},size:.05},r)),n;}var n,i,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kC(e,t);}(t,e),n=t,i=[{key:"setOptions",value:function value(e){(null==e?void 0:e.size)&&this.setSize(e.size),(null==e?void 0:e.position)&&this.setPosition(e.position),(null==e?void 0:e.url)&&this.setURL(e.url);}},{key:"setURL",value:(a=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){AC(o,n,i,a,s,"next",e);}function s(e){AC(o,n,i,a,s,"throw",e);}a(void 0);});};}(IC().mark(function e(t){var n=this;return IC().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.url!==t){e.next=2;break;}return e.abrupt("return");case 2:return e.abrupt("return",gC(t).then(function(){return Sn.fromURL(t);}).then(function(e){n.sprite.visible=!0,n.sprite.texture=e,n.sprite.height=n.sdkOptions.height*n.options.size,n.sprite.width=e.width/e.height*n.sprite.height,n.options.url=t,n.sprite.visible=!0;})["catch"](function(e){var t;r.ie.notify({message:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e,emitter:r.E7.COMPONENTS_SYSTEM,cause:e});}));case 3:case"end":return e.stop();}},e,this);})),function(e){return a.apply(this,arguments);})},{key:"setSize",value:function value(e){this.options.size=Math.min(1,Math.max(.01,e));var t=this.sprite.width/this.sprite.height;this.sprite.height=this.sdkOptions.height*this.options.size,this.sprite.width=this.sprite.height*t,this.options.position&&"custom"!==this.options.position.placement&&this.setPosition(this.options.position);}},{key:"setPosition",value:function value(e){this.options.position=e;var t={width:this.sprite.width,height:this.sprite.height},r=xC.calcPosition(this.sdkOptions.width,this.sdkOptions.height,e,t),n=r.x,i=r.y;this.sprite.position.x=n,this.sprite.position.y=i;}},{key:"clear",value:function value(){this.sprite.visible=!1;}},{key:"render",value:function value(){this.setSize(this.options.size),this.setPosition(this.options.position);}}],i&&SC(n.prototype,i),o&&SC(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(WT);function $C(e){return $C="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},$C(e);}function RC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BC(n.key),n);}}function BC(e){var t=function(e,t){if("object"!=$C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==$C(t)?t:String(t);}var DC=function(){function e(t,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.sdkOptions=t,this.sprite=r.sprite,this.id=r.id,this.player=r.player,this.canvas=r.canvas,this.aminationPhase=null!==(n=r.aminationPhase)&&void 0!==n?n:"static",this.sprite.alpha=0,this.shrink=Math.max(0,Math.min(1,r.shrink)),this.sourceRatio=this.sprite.texture.baseTexture.width/this.sprite.texture.baseTexture.height,this.setSpriteSize(r.size),this.sprite.height=this.height*this.shrink,this.sprite.width=this.width*this.shrink;}var t,r,n;return t=e,(r=[{key:"isShowing",value:function value(){return"showing"===this.aminationPhase;}},{key:"isStatic",value:function value(){return"static"===this.aminationPhase;}},{key:"isHidingStop",value:function value(){return 0===this.sprite.alpha;}},{key:"animateAlpha",value:function value(e){this.isStatic()||(this.sprite.alpha=this.isShowing()?Math.min(this.sprite.alpha+e,1):Math.max(this.sprite.alpha-e,0),1!==this.sprite.alpha&&0!==this.sprite.alpha||(this.aminationPhase="static"));}},{key:"animateSize",value:function value(e){if(!this.isStatic()){var t=this.height*e*(1-this.shrink),r=this.width*e*(1-this.shrink);this.sprite.height=this.isShowing()?Math.min(this.sprite.height+t,this.height):Math.max(this.sprite.height-t,this.height*this.shrink),this.sprite.width=this.isShowing()?Math.min(this.sprite.width+r,this.width):Math.max(this.sprite.width-r,this.width*this.shrink);}}},{key:"animatePosition",value:function value(e){this.isStatic()||(this.sprite.position.x=e.x+(this.width-this.sprite.width)/2,this.sprite.position.y=e.y+(this.height-this.sprite.height)/2);}},{key:"reset",value:function value(){this.sprite.height=this.height*this.shrink,this.sprite.width=this.width*this.shrink,this.sprite.alpha=0;}},{key:"setSpriteSize",value:function value(e){this.height=this.sdkOptions.height*(null!=e?e:.3),this.width=this.height*this.sourceRatio,this.sprite.height=this.height,this.sprite.width=this.width;}}])&&RC(t.prototype,r),n&&RC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}(),MC=__webpack_require__(6240),LC=__webpack_require__.n(MC);function FC(){FC=function FC(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==KC(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(KC(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function NC(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function UC(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){NC(o,n,i,a,s,"next",e);}function s(e){NC(o,n,i,a,s,"throw",e);}a(void 0);});};}function jC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GC(n.key),n);}}function GC(e){var t=function(e,t){if("object"!=KC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=KC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==KC(t)?t:String(t);}function zC(e,t,r){return t=WC(t),function(e,t){if(t&&("object"===KC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,VC()?Reflect.construct(t,r||[],WC(e).constructor):t.apply(e,r));}function VC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(VC=function VC(){return!!e;})();}function HC(){return HC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WC(e)););return e;}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value;}},HC.apply(this,arguments);}function WC(e){return WC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},WC(e);}function YC(e,t){return YC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},YC(e,t);}function KC(e){return KC="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},KC(e);}var XC=function XC(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":KC(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a;},ZC=function ZC(e,t){if("object"===("undefined"==typeof Reflect?"undefined":KC(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);},qC=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(r=zC(this,t,[e,Object.assign({capacity:8,duration:1500,animationSpeed:.08,position:{x:0,y:0,placement:"top-left"}},n)])).spriteStore=[],r.ticker=new Di(),r.ticker.add(function(){return r.animateSticker();}),r.hide(),r;}var r,n,i,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YC(e,t);}(t,e),r=t,n=[{key:"show",value:function value(){HC(WC(t.prototype),"show",this).call(this),this.ticker.start();}},{key:"hide",value:function value(){HC(WC(t.prototype),"hide",this).call(this),this.ticker.stop();}},{key:"onLoadSucccess",value:function value(e){var t="function"==typeof e;this.loadSuccesssFunc=t?e:void 0;}},{key:"onLoadError",value:function value(e){var t="function"==typeof e;this.loadErrorFunc=t?e:void 0;}},{key:"setOptions",value:(a=UC(FC().mark(function e(r){return FC().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break;}return e.abrupt("return");case 2:r.position&&(this.updateSpritePosition(r.position),delete r.position),r.sticker&&(this.addSticker(r.sticker),delete r.sticker),r.id&&(this.selectSticker(r.id),delete r.id),HC(WC(t.prototype),"setOptions",this).call(this,r),r.size&&this.activeSticker&&this.activeSticker.setSpriteSize(r.size),r.duration&&this.activeSticker&&!this.activeSticker.isHidingStop()&&this.setOptions({id:this.activeID});case 8:case"end":return e.stop();}},e,this);})),function(e){return a.apply(this,arguments);})},{key:"selectSticker",value:function value(e){var t,r,n=this;if(e===this.activeID)return 0===this.activeSticker.sprite.alpha&&this.show(),this.activeSticker.aminationPhase="showing",clearTimeout(this.timerId),void(this.timerId=setTimeout(function(){return n.activeSticker.aminationPhase="hiding";},this.options.duration));this.activeSticker&&(this.container.removeChildren(),null===(t=this.activeSticker.player)||void 0===t||t.stop(),this.activeSticker.reset()),this.activeID=e;var i=this.spriteStore.find(function(e){return e.id===n.activeID;});i&&(null===(r=i.player)||void 0===r||r.play(),i.sprite.position.x=this.options.position.x,i.sprite.position.y=this.options.position.y,i.aminationPhase="showing",this.container.addChild(i.sprite),this.activeSticker=i,this.activeSticker.setSpriteSize(this.options.size),this.calcPosition(),clearTimeout(this.timerId),this.show(),this.timerId=setTimeout(function(){n.activeSticker.aminationPhase="hiding";},this.options.duration));}},{key:"loadSticker",value:(o=UC(FC().mark(function e(t){var r,n,i,o,a,s,u,l,h,c=arguments;return FC().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]&&c[1],i=void 0,o=void 0,a=void 0,e.next=6,JC(t);case 6:if(!e.sent){e.next=16;break;}return e.t0=yo,e.next=11,Sn.fromURL(t);case 11:e.t1=e.sent,(a=new e.t0(e.t1)).texture.baseTexture.resource.source.loop=!0,e.next=35;break;case 16:return e.next=18,fetch(t).then(function(e){return e.arrayBuffer();})["catch"](function(e){throw console.log("[ Stickers component ] - url fetching: ".concat(e)),e;});case 18:if(s=e.sent,!((u=LC()(s))instanceof Error)){e.next=28;break;}return e.t2=yo,e.next=24,Sn.fromURL(t);case 24:e.t3=e.sent,a=new e.t2(e.t3),e.next=35;break;case 28:return(i=document.createElement("canvas")).width=u.width,i.height=u.height,e.next=33,u.getPlayer(i.getContext("2d",{willReadFrequently:!0}),!0);case 33:o=e.sent,a=new yo(Sn.from(i));case 35:return this.spriteStore.push(new DC(this.sdkOptions,{id:t,sprite:a,player:o,canvas:i,shrink:.99,size:this.options.size})),r||this.setOptions({id:t}),l={},this.spriteStore.length>this.options.capacity&&(h=this.spriteStore.shift(),l.removedID=null==h?void 0:h.id,null==h||h.sprite.destroy(!0),null===(n=null==h?void 0:h.canvas)||void 0===n||n.remove()),e.abrupt("return",l);case 40:case"end":return e.stop();}},e,this);})),function(e){return o.apply(this,arguments);})},{key:"animateSticker",value:function value(){var e,t,r;(null===(r=null===(t=null===(e=this.activeSticker)||void 0===e?void 0:e.sprite)||void 0===t?void 0:t.texture)||void 0===r?void 0:r.baseTexture)&&(this.activeSticker.animateSize(this.options.animationSpeed),this.activeSticker.animatePosition(this.options.position),this.activeSticker.animateAlpha(this.options.animationSpeed),this.activeSticker.isHidingStop()?this.hide():this.activeSticker.sprite.texture.update());}},{key:"updateSpritePosition",value:function value(e){var t;this.options.position||(this.options.position={});var r=this.sdkOptions.width,n=this.sdkOptions.height;e.x&&(this.options.position.x=r*e.x),e.y&&(this.options.position.y=n*e.y),e.placement&&(this.options.position.placement=e.placement),(null===(t=this.activeSticker)||void 0===t?void 0:t.sprite)&&(this.calcPosition(),this.activeSticker.sprite.position.x=this.options.position.x,this.activeSticker.sprite.position.y=this.options.position.y);}},{key:"addSticker",value:function value(e){var t=this,r=function r(_r368){var n,i;"function"==typeof(null===(n=null==e?void 0:e.promise)||void 0===n?void 0:n.resolve)&&(null===(i=null==e?void 0:e.promise)||void 0===i||i.resolve(_r368)),"function"==typeof t.loadSuccesssFunc&&t.loadSuccesssFunc(e.url,null==_r368?void 0:_r368.removedID);};this.spriteStore.some(function(t){return t.id===e.url;})?r():this.loadSticker(e.url,null==e?void 0:e.silenceMode).then(r)["catch"](function(r){var n,i;"function"==typeof(null===(n=null==e?void 0:e.promise)||void 0===n?void 0:n.reject)&&(null===(i=null==e?void 0:e.promise)||void 0===i||i.reject(r)),"function"==typeof t.loadErrorFunc&&t.loadErrorFunc(e.url);});}},{key:"calcPosition",value:function value(){if("custom"!==this.options.position.placement&&this.options.position.placement){var e=this.sdkOptions.width-this.activeSticker.width,t=this.sdkOptions.height-this.activeSticker.height;if("center"===this.options.position.placement)return this.options.position.x=.5*e,void(this.options.position.y=.5*t);this.options.position.x=~this.options.position.placement.indexOf("left")?0:e,this.options.position.y=~this.options.position.placement.indexOf("top")?0:t;}}}],n&&jC(r.prototype,n),i&&jC(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(WT);function JC(e){return QC.apply(this,arguments);}function QC(){return QC=UC(FC().mark(function e(t){var r;return FC().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"HEAD"});case 2:return r=e.sent,e.abrupt("return",!!~r.headers.get("content-type").indexOf("video"));case 4:case"end":return e.stop();}},e);})),QC.apply(this,arguments);}function eE(){eE=function eE(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==uE(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(uE(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function tE(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function rE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nE(n.key),n);}}function nE(e){var t=function(e,t){if("object"!=uE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==uE(t)?t:String(t);}function iE(e,t,r){return t=aE(t),function(e,t){if(t&&("object"===uE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,oE()?Reflect.construct(t,r||[],aE(e).constructor):t.apply(e,r));}function oE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(oE=function oE(){return!!e;})();}function aE(e){return aE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},aE(e);}function sE(e,t){return sE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},sE(e,t);}function uE(e){return uE="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},uE(e);}XC([XT(),ZC("design:type",Function),ZC("design:paramtypes",[String]),ZC("design:returntype",void 0)],qC.prototype,"selectSticker",null);var lE=function lE(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":uE(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a;},hE=function hE(e,t){if("object"===("undefined"==typeof Reflect?"undefined":uE(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);},cE=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=iE(this,t,[e])).fonts={},n.isShowing=!1,n.isHiding=!1,n.options={position:{x:0,y:0,placement:"bottom-left"},color:{primary:33777,secondary:16777215,text:1118481},offset:{x:0,y:0},text:{title:"LowerThird Title",subtitle:"LowerThird Subtitle",maxLengthTitle:10,maxLengthSubtitle:100}},n.setOptions(r,!1),n.ticker=new Di(),n.container.visible=!1,n;}var n,i,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sE(e,t);}(t,e),n=t,i=[{key:"render",value:function value(){}},{key:"setOptions",value:function value(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(this.setColor(e.color),this.setOffset(e.offset),this.setPosition(e.position),this.setText(e.text),t&&this.render());}},{key:"showLowerThird",value:function value(){this.stopHiding(),"function"==typeof this.showFunction&&(this.ticker.add(this.showFunction),this.ticker.started||this.ticker.start(),this.isShowing=!0);}},{key:"hideLowerThird",value:function value(){this.stopShowing(),"function"==typeof this.hideFunction&&(this.isHiding=!0,this.ticker.add(this.hideFunction),this.ticker.started||this.ticker.start());}},{key:"stopShowing",value:function value(){this.ticker.started&&this.ticker.stop(),this.ticker.remove(this.showFunction),this.isShowing=!1;}},{key:"stopHiding",value:function value(){this.ticker.started&&this.ticker.stop(),this.ticker.remove(this.hideFunction),this.isHiding=!1;}},{key:"setColor",value:function value(e){var t=this;e&&Object.keys(e).forEach(function(r){t.options.color[r]=e[r];});}},{key:"setOffset",value:function value(e){var t=this;e&&Object.keys(e).forEach(function(r){t.options.offset[r]=Math.min(.25,Math.max(0,e[r]));});}},{key:"setPosition",value:function value(e){var t=this;e&&Object.keys(e).forEach(function(r){t.options.position[r]=e[r];});}},{key:"setText",value:function value(e){var t=this;e&&Object.keys(e).forEach(function(r){t.options.text[r]=e[r];});}},{key:"offsetX",value:function value(){var e;return this.sdkOptions.width*(null!==(e=this.options.offset.x)&&void 0!==e?e:0);}},{key:"offsetY",value:function value(){var e;return this.sdkOptions.height*(null!==(e=this.options.offset.y)&&void 0!==e?e:0);}},{key:"strTrimAndEllipsis",value:function value(e,t){return(e=e.trim()).length<t?e:e.substring(0,t-3)+"...";}},{key:"showOffset",value:function value(){var e=new ou();e.lineStyle({color:14550873,width:1}).drawRect(this.offsetX(),this.offsetY(),this.sdkOptions.width-2*this.offsetX(),this.sdkOptions.height-2*this.offsetY()),this.container.addChild(e);}},{key:"drawRectPrimary",value:function value(e,t,r,n){var i=new ou();return i.beginFill(this.options.color.primary).drawRect(e,t,r,n).endFill(),i;}},{key:"drawRectSecondary",value:function value(e,t,r,n){var i=new ou();return i.beginFill(this.options.color.secondary).drawRect(e,t,r,n).endFill(),i;}},{key:"fontFamily",value:function value(e){var t;return null!==(t=this.fonts[e])&&void 0!==t?t:"Arial, Helvetica, sans-serif";}},{key:"loadFont",value:(a=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){tE(o,n,i,a,s,"next",e);}function s(e){tE(o,n,i,a,s,"throw",e);}a(void 0);});};}(eE().mark(function e(t,n){var i=this;return eE().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.load(n).then(function(e){i.fonts[t]||(i.fonts[t]=[]),i.fonts[t].push('"'.concat(e.family.replace(/[\\"]/g,"\\$&"),'"'));})["catch"](function(e){r.ie.notify({type:r.cL.WARNING,message:"LowerThird font loading. ".concat(e),cause:e,emitter:r.E7.COMPONENTS_SYSTEM});});case 2:case"end":return e.stop();}},e);})),function(e,t){return a.apply(this,arguments);})},{key:"destroy",value:function value(){var e;this.stopShowing(),this.stopHiding(),this.hide(),null===(e=this.container)||void 0===e||e.destroy(!0);}}],i&&rE(n.prototype,i),o&&rE(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t;}(WT);function dE(e){return dE="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},dE(e);}function fE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pE(n.key),n);}}function pE(e){var t=function(e,t){if("object"!=dE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==dE(t)?t:String(t);}lE([XT(),hE("design:type",Function),hE("design:paramtypes",[]),hE("design:returntype",void 0)],cE.prototype,"showLowerThird",null),lE([XT(),hE("design:type",Function),hE("design:paramtypes",[]),hE("design:returntype",void 0)],cE.prototype,"hideLowerThird",null);var yE=function(){function e(t){var r,n,i,o,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.startValue=t.startValue,this.currentValue=t.startValue,this.currentStep=0,this.endValue=null!==(r=t.endValue)&&void 0!==r?r:t.startValue,this.smoothPower=null!==(n=t.smoothPower)&&void 0!==n?n:1,this.range=this.endValue-this.startValue,this.speedNext=null!==(i=t.speedNext)&&void 0!==i?i:1,this.speedBack=null!==(a=null!==(o=t.speedBack)&&void 0!==o?o:t.speedNext)&&void 0!==a?a:1,this.smoothFunctionNext=this.getSmoothFunction(t.smoothFunctionNext),this.smoothFunctionBack=this.getSmoothFunction(null!==(s=t.smoothFunctionBack)&&void 0!==s?s:t.smoothFunctionNext);}var t,r,n;return t=e,r=[{key:"setCurrentStep",value:function value(e){this.currentStep=Math.max(0,Math.min(e,this.smoothPower));}},{key:"getCurrentStep",value:function value(){return this.currentStep;}},{key:"setEnd",value:function value(){return this.currentStep=this.smoothPower,this.endValue;}},{key:"isEnd",value:function value(e){return this.currentStep>=this.smoothPower*(null!=e?e:1);}},{key:"isStart",value:function value(e){return this.currentStep<=this.smoothPower*(null!=e?e:0);}},{key:"reset",value:function value(){this.currentStep=0;}},{key:"next",value:function value(){if(this.startValue===this.endValue)return this.currentValue;var e=this.currentStep/this.smoothPower,t=this.smoothFunctionNext(e);return this.currentValue=this.startValue+this.range*t,this.currentStep=Math.min(this.smoothPower,this.currentStep+this.speedNext),this.currentValue;}},{key:"back",value:function value(){if(this.startValue===this.endValue)return this.currentValue;this.currentStep=Math.max(0,this.currentStep-this.speedBack);var e=this.currentStep/this.smoothPower,t=this.smoothFunctionBack(e);return this.currentValue=this.startValue+this.range*t,this.currentValue;}},{key:"getSmoothFunction",value:function value(e){return function(t){switch(e){case"ease-out-sine":return Math.sin(t*Math.PI/2);case"ease-out-quint":return 1-Math.pow(1-t,5);case"ease-out-cubic":Math.pow(1-t,3);default:return t;}};}}],r&&fE(t.prototype,r),n&&fE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function gE(e){return gE="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},gE(e);}function mE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wE(n.key),n);}}function wE(e){var t=function(e,t){if("object"!=gE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==gE(t)?t:String(t);}function bE(e,t,r){return t=xE(t),function(e,t){if(t&&("object"===gE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,vE()?Reflect.construct(t,r||[],xE(e).constructor):t.apply(e,r));}function vE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(vE=function vE(){return!!e;})();}function xE(e){return xE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},xE(e);}function _E(e,t){return _E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},_E(e,t);}var IE=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=bE(this,t,[e,r])).animations={},n.smoothPower=65,n.ltContainer=new co(),n.container.addChild(n.ltContainer),n.addShowFunction(),n.addHideFunction(),n.render(),n;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_E(e,t);}(t,e),r=t,n=[{key:"render",value:function value(){var e;null===(e=this.ltContainer)||void 0===e||e.destroy(!0),this.ltContainer=new co(),this.ltContainer.position.x=this.offsetX(),this.container.addChild(this.ltContainer),this.createText(),this.addRectangles(),this.addSpriteMask(),this.ltContainer.addChild(this.rectBack),this.ltContainer.addChild(this.rectFront),this.ltContainer.addChild(this.title),this.ltContainer.addChild(this.subtitle);}},{key:"createText",value:function value(){var e=this,t=this.sdkOptions.width-2*this.offsetX()-this.px(70),r=function r(_r369,n,i){return{fontFamily:"Trebuchet MS",fontSize:e.px(_r369),fontWeight:n,fill:i,wordWrapWidth:t,wordWrap:!0,breakWords:!0};};this.subtitle=new Bu(this.options.text.subtitle,r(12,"400",this.options.color.primary)),this.subtitle.position.x=-this.subtitle.width,this.subtitle.position.y=this.sdkOptions.height-this.offsetY()-this.px(12)-this.subtitle.height,this.animations.subtitle=new yE({startValue:-this.subtitle.width,endValue:this.px(15),smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint",speedBack:1.3}),this.title=new Bu(this.options.text.title,r(20,"700",1118481)),this.title.width=Math.min(t,this.title.width),this.title.position.x=-this.title.width,this.title.position.y=this.sdkOptions.height-this.offsetY()-this.px(15)-this.subtitle.height-this.title.height,this.animations.title=new yE({startValue:-this.title.width,endValue:this.px(15),smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint",speedBack:1.3}),this.ltWidth=Math.max(this.title.width,this.subtitle.width)+this.px(45),this.ltHeight=this.title.height+this.subtitle.height+this.px(23),this.isVisible()&&(this.title.position.x=this.animations.title.setEnd(),this.subtitle.position.x=this.animations.subtitle.setEnd());}},{key:"addRectangles",value:function value(){var e=this.sdkOptions.height-this.offsetY()-this.ltHeight;this.rectBack=new ou().beginFill(this.options.color.primary).drawRoundedRect(0,e,this.ltWidth,this.ltHeight,this.px(5)).endFill(),this.animations.rectBack=new yE({startValue:-this.rectBack.width,endValue:0,smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint",speedBack:1.1}),this.rectFront=new ou().beginFill(16777215).drawRoundedRect(0,e,this.ltWidth-this.px(15),this.ltHeight,this.px(5)).endFill(),this.rectFront.position.x=-this.ltWidth+this.px(15),this.animations.rectFront=new yE({startValue:-this.rectFront.width,endValue:0,smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint",speedBack:1.1}),this.isVisible()&&(this.rectBack.position.x=this.animations.rectBack.setEnd(),this.rectFront.position.x=this.animations.rectFront.setEnd());}},{key:"addSpriteMask",value:function value(){this.mask=new yo(Sn.WHITE),this.mask.width=this.ltWidth,this.mask.height=this.sdkOptions.height,this.ltContainer.addChild(this.mask),this.ltContainer.mask=this.mask;}},{key:"addShowFunction",value:function value(){var e=this;this.showFunction=function(){e.show(),e.rectBack.position.x=e.animations.rectBack.next(),e.animations.rectBack.isEnd(.3)&&(e.rectFront.position.x=e.animations.rectFront.next()),e.animations.rectBack.isEnd(.8)&&(e.title.position.x=e.animations.title.next()),e.animations.title.isEnd(.3)&&(e.subtitle.position.x=e.animations.subtitle.next()),Object.values(e.animations).reduce(function(e,t){return e&&t.isEnd();},!0)&&e.stopShowing();};}},{key:"addHideFunction",value:function value(){var e=this;this.hideFunction=function(){e.isHiding||(e.stopHiding(),e.hide()),e.subtitle.position.x=e.animations.subtitle.back(),e.title.position.x=e.animations.title.back(),e.rectFront.position.x=e.animations.rectFront.back(),e.rectBack.position.x=e.animations.rectBack.back(),e.isHiding=!e.animations.rectBack.isStart();};}}],n&&mE(r.prototype,n),i&&mE(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(cE);function AE(e){return AE="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},AE(e);}function SE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TE(n.key),n);}}function TE(e){var t=function(e,t){if("object"!=AE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==AE(t)?t:String(t);}function CE(e,t,r){return t=OE(t),function(e,t){if(t&&("object"===AE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,EE()?Reflect.construct(t,r||[],OE(e).constructor):t.apply(e,r));}function EE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(EE=function EE(){return!!e;})();}function OE(e){return OE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},OE(e);}function kE(e,t){return kE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},kE(e,t);}var PE={cyrillic:"https://fonts.gstatic.com/s/notosans/v28/o-0NIpQlx3QUlC5A4PNjFhdVYNyB1Wk.woff2",latin:"https://fonts.gstatic.com/s/notosans/v28/o-0NIpQlx3QUlC5A4PNjFhdVZNyB.woff2"},$E={cyrillic:"https://fonts.gstatic.com/s/notosans/v28/o-0NIpQlx3QUlC5A4PNjKhVVYNyB1Wk.woff2",latin:"https://fonts.gstatic.com/s/notosans/v28/o-0NIpQlx3QUlC5A4PNjKhVVZNyB.woff2"},RE=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=CE(this,t,[e,r])).isReady=!1,n.animations={},n.smoothPower={title:35,subtitle:35,middleLine:50},n.addShowFunction(),n.addHideFunction(),Promise.all([n.loadFont("title",PE.cyrillic),n.loadFont("title",PE.latin),n.loadFont("subtitle",$E.cyrillic),n.loadFont("subtitle",$E.latin)])["finally"](function(){n.isReady=!0,n.render();}),n;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kE(e,t);}(t,e),r=t,n=[{key:"render",value:function value(){var e,t;this.container.removeChild(this.middleLine),this.container.removeChild(this.titleContainer),this.container.removeChild(this.subtitleContainer),null===(e=this.titleContainer)||void 0===e||e.destroy(!0),null===(t=this.subtitleContainer)||void 0===t||t.destroy(!0),this.createText(),this.createRectangles(),this.container.addChild(this.middleLine),this.container.addChild(this.titleContainer),this.container.addChild(this.subtitleContainer);}},{key:"createText",value:function value(){this.title=new Bu(this.options.text.title,{fontFamily:this.fontFamily("title"),fontSize:this.px(35),fill:16777215,wordWrapWidth:this.sdkOptions.width-2*this.offsetX(),wordWrap:!0,breakWords:!0,align:"right"}),this.title.position.x=0,this.title.position.y=this.title.height,this.titleContainer=new co(),this.titleContainer.width=this.title.width,this.titleContainer.height=this.title.height+this.px(200);var e=new yo(Sn.WHITE);e.tint=0,e.width=this.title.width,e.height=this.title.height,e.position.x=0,e.position.y=0,this.titleContainer.addChild(e),this.titleContainer.mask=e,this.titleContainer.addChild(this.title),this.animations.title=new yE({startValue:this.title.position.y,endValue:0,smoothPower:this.smoothPower.title,smoothFunctionNext:"ease-out-quint"}),this.subtitle=new Bu(this.options.text.subtitle,{fontFamily:this.fontFamily("subtitle"),fontSize:this.px(13),fontWeight:"100",fill:16777215,wordWrapWidth:this.sdkOptions.width-2*this.offsetX(),wordWrap:!0,breakWords:!0,align:"right"}),this.subtitle.position.x=0,this.subtitle.position.y=-this.subtitle.height-this.px(20),this.subtitleContainer=new co(),this.subtitleContainer.width=this.subtitle.width,this.subtitleContainer.height=this.subtitle.height+this.px(20);var t=new yo(Sn.WHITE);t.tint=0,t.width=this.subtitle.width,t.height=this.subtitle.height,t.position.x=0,t.position.y=0,this.subtitleContainer.addChild(t),this.subtitleContainer.mask=t,this.subtitleContainer.addChild(this.subtitle),this.animations.subtitle=new yE({startValue:this.subtitle.position.y,smoothPower:this.smoothPower.subtitle,endValue:0,smoothFunctionNext:"ease-out-quint"}),this.ltWidth=Math.max(this.title.width,this.subtitle.width)+this.px(25),this.ltHeight=this.titleContainer.height+this.subtitleContainer.height+this.px(10),this.titleContainer.position.x=this.offsetX(),this.subtitleContainer.position.x=this.offsetX();var r=this.titleContainer.width-this.subtitleContainer.width;r>0?this.subtitleContainer.position.x+=r:this.titleContainer.position.x-=r,this.titleContainer.position.y=this.sdkOptions.height-this.offsetY()-this.ltHeight,this.subtitleContainer.position.y=this.sdkOptions.height-this.offsetY()-this.subtitleContainer.height,this.isVisible()&&(this.title.position.y=0,this.subtitle.position.y=0,this.animations.title.setCurrentStep(this.smoothPower.title),this.animations.subtitle.setCurrentStep(this.smoothPower.subtitle));}},{key:"createRectangles",value:function value(){this.middleLine=new ou();var e=this.ltWidth+this.offsetX(),t=this.sdkOptions.height-this.offsetY()-this.subtitleContainer.height-this.px(8);this.middleLine.beginFill(this.options.color.primary).drawRoundedRect(-e-this.px(2),t,e,this.px(3),this.px(2)).endFill(),this.animations.middleLine=new yE({startValue:0,smoothPower:this.smoothPower.middleLine,endValue:e,smoothFunctionNext:"ease-out-quint"}),this.isVisible()&&(this.middleLine.position.x=e,this.animations.middleLine.setCurrentStep(this.smoothPower.middleLine));}},{key:"addShowFunction",value:function value(){var e=this;this.showFunction=function(){e.isReady&&(e.show(),e.middleLine.position.x=e.animations.middleLine.next(),e.animations.middleLine.isEnd(.5)&&(e.title.position.y=e.animations.title.next()),e.animations.middleLine.isEnd(.5)&&(e.subtitle.position.y=e.animations.subtitle.next()),Object.values(e.animations).reduce(function(e,t){return e&&t.isEnd();},!0)&&e.stopShowing());};}},{key:"addHideFunction",value:function value(){var e=this;this.hideFunction=function(){if(!e.isHiding)return e.stopHiding(),void e.hide();e.title.position.y=e.animations.title.back(),e.subtitle.position.y=e.animations.subtitle.back(),e.animations.title.isStart(.7)&&(e.middleLine.position.x=e.animations.middleLine.back()),e.isHiding=!Object.values(e.animations).reduce(function(e,t){return e&&t.isStart();},!0);};}}],n&&SE(r.prototype,n),i&&SE(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(cE);function BE(e){return BE="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},BE(e);}function DE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ME(n.key),n);}}function ME(e){var t=function(e,t){if("object"!=BE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==BE(t)?t:String(t);}function LE(e,t,r){return t=NE(t),function(e,t){if(t&&("object"===BE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,FE()?Reflect.construct(t,r||[],NE(e).constructor):t.apply(e,r));}function FE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(FE=function FE(){return!!e;})();}function NE(e){return NE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},NE(e);}function UE(e,t){return UE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},UE(e,t);}var jE={cyrillic:"https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCvr73w9aXpsog.woff2",latin:"https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCvr73w5aXo.woff2"},GE={cyrillic:"https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCvr6Hw9aXpsog.woff2",latin:"https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCvr6Hw5aXo.woff2"},zE=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=LE(this,t,[e,r])).titleFontSize=35,n.animations={},n.isReady=!1,n.smoothPower={title:95,subtitle:95,titleRect:75,titleTextMask:75,titleRectMask:75,rectFront:40,rectBack:40},n.addShowFunction(),n.addHideFunction(),Promise.all([n.loadFont("title",jE.cyrillic),n.loadFont("title",jE.latin),n.loadFont("subtitle",GE.cyrillic),n.loadFont("subtitle",GE.latin)])["finally"](function(){n.isReady=!0,n.render();}),n;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UE(e,t);}(t,e),r=t,n=[{key:"render",value:function value(){var e,t,r;this.container.removeChild(this.titleContainer),this.container.removeChild(this.subtitleContainer),this.container.removeChild(this.vertLineContainer),null===(e=this.titleContainer)||void 0===e||e.destroy(!0),null===(t=this.subtitleContainer)||void 0===t||t.destroy(!0),null===(r=this.vertLineContainer)||void 0===r||r.destroy(!0),this.createSubtitle(),this.createTitle(),this.createRectangles(),this.container.addChild(this.titleContainer),this.container.addChild(this.subtitleContainer),this.container.addChild(this.vertLineContainer);}},{key:"createTitle",value:function value(){var e;this.title=new Bu(null===(e=this.options.text.title)||void 0===e?void 0:e.toUpperCase(),{fontFamily:this.fontFamily("title"),fontSize:this.px(this.titleFontSize),fill:16777215,wordWrapWidth:this.sdkOptions.width-2*this.offsetX(),wordWrap:!0,breakWords:!0,lineHeight:this.px(this.titleFontSize)}),this.title.position.x=.3*this.title.width,this.animations.title=new yE({startValue:this.title.position.x,endValue:this.px(10),smoothPower:this.smoothPower.title,smoothFunctionNext:"ease-out-quint",speedBack:1.3});var t=new co();t.width=this.title.width+this.px(10),t.height=this.title.height,t.addChild(this.title),this.titleTextMask=new yo(Sn.WHITE),this.titleTextMask.width=0,this.titleTextMask.height=this.title.height,t.addChild(this.titleTextMask),t.mask=this.titleTextMask,this.animations.titleTextMask=new yE({startValue:0,endValue:this.title.width+this.px(10),smoothPower:this.smoothPower.titleTextMask,smoothFunctionNext:"ease-out-quint",speedBack:1.25}),this.titleRect=this.drawRectSecondary(0,this.px(this.titleFontSize/3.5),this.title.width,this.title.height-this.px(this.titleFontSize/2.2)),this.animations.titleRect=new yE({startValue:.2*-this.title.width,endValue:this.title.width+this.px(35),smoothPower:this.smoothPower.titleRect,smoothFunctionNext:"ease-out-quint",speedNext:.5,speedBack:1.1});var r=new co();r.width=this.titleRect.width,r.height=this.titleRect.height,r.addChild(this.titleRect),this.titleRectMask=new yo(Sn.WHITE),this.titleRectMask.width=0,this.titleRectMask.height=this.title.height,r.addChild(this.titleRectMask),r.mask=this.titleRectMask,this.animations.titleRectMask=new yE({startValue:0,endValue:this.title.width+this.px(35),smoothPower:this.smoothPower.titleRectMask,smoothFunctionNext:"ease-out-quint",speedNext:1.5,speedBack:1}),this.titleContainer=new co(),this.titleContainer.width=this.title.width+this.px(10),this.titleContainer.height=this.title.height,this.titleContainer.addChild(t),this.titleContainer.addChild(r),this.ltHeight=this.title.height+this.subtitleContainer.height,this.titleContainer.position.x=this.offsetX(),this.titleContainer.position.y=this.sdkOptions.height-this.offsetY()-this.ltHeight+this.px(3),this.isVisible()&&(this.title.position.x=this.animations.title.setEnd(),this.titleTextMask.width=this.animations.titleTextMask.setEnd(),this.titleRect.position.x=this.animations.titleRect.setEnd(),this.titleRectMask.width=this.animations.titleRectMask.setEnd());}},{key:"createSubtitle",value:function value(){var e;this.subtitle=new Bu(null===(e=this.options.text.subtitle)||void 0===e?void 0:e.toUpperCase(),{fontFamily:this.fontFamily("subtitle"),fontSize:this.px(11),fill:16777215,wordWrapWidth:this.sdkOptions.width-2*this.offsetX(),wordWrap:!0,breakWords:!0}),this.subtitle.position.x=-this.subtitle.width,this.animations.subtitle=new yE({startValue:this.subtitle.position.x,endValue:this.px(11),smoothPower:this.smoothPower.subtitle,smoothFunctionNext:"ease-out-quint",speedBack:1.2}),this.subtitleContainer=new co(),this.subtitleContainer.width=this.subtitle.width+this.px(10),this.subtitleContainer.height=this.subtitle.height,this.subtitleContainer.addChild(this.subtitle),this.subtitleContainer.position.x=this.offsetX(),this.subtitleContainer.position.y=this.sdkOptions.height-this.offsetY()-this.subtitle.height;var t=new yo(Sn.WHITE);t.width=this.subtitle.width+this.px(10),t.height=this.subtitle.height,this.subtitleContainer.addChild(t),this.subtitleContainer.mask=t,this.isVisible()&&(this.subtitle.position.x=this.animations.subtitle.setEnd());}},{key:"createRectangles",value:function value(){var e=this.title.height-this.px(this.titleFontSize/2.2);this.rectFront=this.drawRectPrimary(0,0,this.px(4),e),this.animations.rectFront=new yE({startValue:e,endValue:0,smoothPower:this.smoothPower.rectFront,smoothFunctionNext:"ease-out-quint",speedNext:.8,speedBack:1}),this.rectBack=this.drawRectSecondary(0,0,this.px(4),this.px(4)),this.animations.rectBack=new yE({startValue:e,endValue:-this.px(4),smoothPower:this.smoothPower.rectFront,smoothFunctionNext:"ease-out-quint",speedNext:1.5,speedBack:.6}),this.vertLineContainer=new co(),this.vertLineContainer.width=this.rectFront.width,this.vertLineContainer.height=e,this.vertLineContainer.addChild(this.rectBack),this.vertLineContainer.addChild(this.rectFront),this.vertLineContainer.position.x=this.offsetX(),this.vertLineContainer.position.y=this.titleContainer.position.y+this.px(this.titleFontSize/3.5);var t=new yo(Sn.WHITE);t.width=this.vertLineContainer.width,t.height=e,this.vertLineContainer.addChild(t),this.vertLineContainer.mask=t,this.isVisible()&&(this.rectFront.position.y=this.animations.rectFront.setEnd());}},{key:"addShowFunction",value:function value(){var e=this;this.showFunction=function(){e.isReady&&(e.show(),e.rectFront.position.y=e.animations.rectFront.next(),e.rectBack.position.y=e.animations.rectBack.next(),e.animations.rectFront.isEnd(.9)&&(e.title.position.x=e.animations.title.next(),e.subtitle.position.x=e.animations.subtitle.next(),e.titleTextMask.width=e.animations.titleTextMask.next(),e.titleRectMask.width=e.animations.titleRectMask.next(),e.titleRect.position.x=e.animations.titleRect.next(),Object.values(e.animations).reduce(function(e,t){return e&&t.isEnd();},!0)&&e.stopShowing()));};}},{key:"addHideFunction",value:function value(){var e=this;this.hideFunction=function(){if(!e.isHiding)return e.stopHiding(),void e.hide();e.title.position.x=e.animations.title.back(),e.subtitle.position.x=e.animations.subtitle.back(),e.animations.titleRect.getCurrentStep()<e.smoothPower.titleRect-2&&(e.titleTextMask.width=e.animations.titleTextMask.back()),e.titleRect.position.x=e.animations.titleRect.back(),e.titleRectMask.width=e.animations.titleRectMask.back(),e.animations.titleRectMask.isStart(.2)&&(e.rectBack.position.y=e.animations.rectBack.back(),e.rectFront.position.y=e.animations.rectFront.back()),e.isHiding=!Object.values(e.animations).reduce(function(e,t){return e&&t.isStart();},!0);};}}],n&&DE(r.prototype,n),i&&DE(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(cE);function VE(e){return VE="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},VE(e);}function HE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WE(n.key),n);}}function WE(e){var t=function(e,t){if("object"!=VE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==VE(t)?t:String(t);}function YE(e,t,r){return t=XE(t),function(e,t){if(t&&("object"===VE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,KE()?Reflect.construct(t,r||[],XE(e).constructor):t.apply(e,r));}function KE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(KE=function KE(){return!!e;})();}function XE(e){return XE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},XE(e);}function ZE(e,t){return ZE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},ZE(e,t);}var qE={cyrillic:"https://fonts.gstatic.com/s/geologica/v1/oY1l8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckUWF1lEP2A.woff2",latin:"https://fonts.gstatic.com/s/geologica/v1/oY1l8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckUWE1lE.woff2"},JE={cyrillic:"https://fonts.gstatic.com/s/geologica/v1/oY1o8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckU8H3G11_z-_OZqD8Hsc-ASAEWn.woff2",latin:"https://fonts.gstatic.com/s/geologica/v1/oY1o8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckU8H3G11_z-_OZqD8Hsc-QSAA.woff2"},QE=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=YE(this,t,[e,r])).animations={},n.isReady=!1,n.smoothPower={title:75,subtitle:65,rectFront:40,rectBack:40},n.addShowFunction(),n.addHideFunction(),Promise.all([n.loadFont("title",qE.cyrillic),n.loadFont("title",qE.latin),n.loadFont("subtitle",JE.cyrillic),n.loadFont("subtitle",JE.latin)])["finally"](function(){n.isReady=!0,n.render();}),n;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZE(e,t);}(t,e),r=t,n=[{key:"render",value:function value(){var e,t;this.container.removeChild(this.titleContainer),this.container.removeChild(this.subtitleContainer),null===(e=this.titleContainer)||void 0===e||e.destroy(!0),null===(t=this.subtitleContainer)||void 0===t||t.destroy(!0),this.createSubtitle(),this.createTitle(),this.createRectangles(),this.container.addChild(this.titleContainer),this.container.addChild(this.subtitleContainer);}},{key:"createSubtitle",value:function value(){this.subtitle=new Bu(this.options.text.subtitle,{fontFamily:this.fontFamily("subtitle"),fontSize:this.px(13),fill:16777215,wordWrapWidth:this.sdkOptions.width-2*this.offsetX(),wordWrap:!0,breakWords:!0});var e=this.subtitle.width+this.px(6);this.subtitle.position.x=-this.subtitle.width,this.subtitle.position.y=this.px(3),this.animations.subtitle=new yE({startValue:this.subtitle.position.x,endValue:this.px(10),smoothPower:this.smoothPower.subtitle,smoothFunctionNext:"ease-out-quint"}),this.subtitleContainer=new co(),this.subtitleContainer.width=e,this.subtitleContainer.height=this.subtitle.height+this.px(6),this.subtitleContainer.position.x=this.offsetX(),this.subtitleContainer.position.y=this.sdkOptions.height-this.offsetY()-this.subtitle.height-this.px(6),this.isVisible()&&(this.subtitle.position.x=this.animations.subtitle.setEnd());}},{key:"createTitle",value:function value(){this.title=new Bu(this.options.text.title,{fontFamily:this.fontFamily("title"),fontSize:this.px(30),fill:16777215,wordWrapWidth:this.sdkOptions.width-2*this.offsetX(),wordWrap:!0,breakWords:!0}),this.title.position.y=this.title.height,this.animations.title=new yE({startValue:this.title.position.y,endValue:0,smoothPower:this.smoothPower.title,smoothFunctionNext:"ease-out-quint"});var e=new yo(Sn.WHITE);e.width=this.title.width,e.height=this.title.height,this.titleContainer=new co(),this.titleContainer.width=this.title.width,this.titleContainer.height=this.title.height,this.titleContainer.addChild(this.title),this.titleContainer.addChild(e),this.titleContainer.mask=e,this.ltWidth=Math.max(this.title.width,this.subtitle.width+this.px(15)),this.ltHeight=this.title.height+this.subtitle.height,this.titleContainer.position.x=this.offsetX(),this.titleContainer.position.y=this.sdkOptions.height-this.offsetY()-this.ltHeight-this.px(6),this.isVisible()&&(this.title.position.y=this.animations.title.setEnd());}},{key:"createRectangles",value:function value(){var e=this.subtitle.height+this.px(6),t=this.ltWidth;this.rectFront=this.drawRectPrimary(0,0,t,e),this.rectFront.position.x=-t,this.animations.rectFront=new yE({startValue:-t,endValue:0,smoothPower:this.smoothPower.rectFront,smoothFunctionNext:"ease-out-quint"}),this.rectBack=this.drawRectSecondary(0,0,t,e),this.rectBack.position.x=t,this.animations.rectBack=new yE({startValue:t,endValue:0,smoothPower:this.smoothPower.rectFront,smoothFunctionNext:"ease-out-quint"});var r=new yo(Sn.WHITE);r.width=t,r.height=this.subtitle.height+this.px(6),this.subtitleContainer.addChild(r),this.subtitleContainer.mask=r,this.subtitleContainer.addChild(this.rectBack),this.subtitleContainer.addChild(this.rectFront),this.subtitleContainer.addChild(this.subtitle),this.isVisible()&&(this.rectFront.position.x=this.animations.rectFront.setEnd(),this.rectBack.position.x=this.animations.rectBack.setEnd());}},{key:"addShowFunction",value:function value(){var e=this;this.showFunction=function(){e.isReady&&(e.show(),e.rectBack.position.x=e.animations.rectBack.next(),e.animations.rectBack.isEnd()&&(e.rectFront.position.x=e.animations.rectFront.next(),e.animations.rectFront.isEnd(.3)&&(e.subtitle.position.x=e.animations.subtitle.next(),e.title.position.y=e.animations.title.next(),e.animations.title.isEnd()&&e.animations.subtitle.isEnd()&&e.stopShowing())));};}},{key:"addHideFunction",value:function value(){var e=this;this.hideFunction=function(){if(!e.isHiding)return e.stopHiding(),void e.hide();e.title.position.y=e.animations.title.back(),e.subtitle.position.x=e.animations.subtitle.back(),e.animations.subtitle.isStart(.5)&&(e.rectFront.position.x=e.animations.rectFront.back(),e.animations.rectFront.isStart()&&(e.rectBack.position.x=e.animations.rectBack.back())),e.isHiding=!Object.values(e.animations).reduce(function(e,t){return e&&t.isStart();},!0);};}}],n&&HE(r.prototype,n),i&&HE(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(cE);function eO(e){return eO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},eO(e);}function tO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rO(n.key),n);}}function rO(e){var t=function(e,t){if("object"!=eO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==eO(t)?t:String(t);}var nO=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.padding=20,this.smoothPower=75,this.startRectValue=0,this.sdkOptions=t,this.container=new co(),this.addText(r),this.addRect(r),this.addHidden(r);var n=new yo(Sn.WHITE);n.height=this.height,n.width=r.offsetX+this.width,n.position.x=-r.offsetX,this.container.addChild(n),this.container.mask=n,r.isVisible&&(this.text.position.x=this.textInAnimation.setEnd(),this.hiddenMask.position.x=this.hiddenMaskAnimation.setEnd(),this.rect.position.x=this.rectAnimation.setEnd());}var t,r,n;return t=e,r=[{key:"textInAnimateFunction",value:function value(){this.text.position.x=this.textInAnimation.next();}},{key:"textOutAnimateFunction",value:function value(){this.text.position.x=this.textOutAnimation.next();}},{key:"textResetFunction",value:function value(){this.text.position.x=2*this.px(this.padding)+this.width;}},{key:"rectAnimateFunction",value:function value(e){this.rect.position.x=e?this.rectAnimation.next():this.rectAnimation.back();}},{key:"hiddenMaskAnimateFunction",value:function value(e){this.hiddenMask.position.x=e?this.rectAnimation.next():this.rectAnimation.back();}},{key:"destroy",value:function value(){var e;null===(e=this.container)||void 0===e||e.destroy(!0);}},{key:"addText",value:function value(e){this.text=new Bu(e.text,{fontFamily:e.fontfamily,fontSize:this.px(e.size),fill:e.colorText,wordWrapWidth:this.sdkOptions.width-2*e.offsetX-2*this.px(this.padding),wordWrap:!0,breakWords:!0}),this.height=1.2*this.text.height,this.width=this.text.width+2*this.px(this.padding);var t=2*this.px(this.padding)+this.width;this.text.position.x=t,this.text.position.y=this.px(e.size/8.5),this.textInAnimation=new yE({startValue:t,endValue:this.px(this.padding),smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint"}),this.textOutAnimation=new yE({startValue:this.px(this.padding),endValue:-this.width-this.px(this.padding)-e.offsetX,smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint"}),this.container.addChild(this.text);}},{key:"addRect",value:function value(e){this.rect=new ou().beginFill(e.colorRect).drawRect(0,0,this.width,this.height).endFill(),this.startRectValue=-e.offsetX-this.width,this.rect.position.x=this.startRectValue,this.rectAnimation=new yE({startValue:this.startRectValue,endValue:0,smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint"}),this.container.addChild(this.rect);}},{key:"addHidden",value:function value(e){this.hiddenMask=new yo(Sn.WHITE),this.hiddenMask.width=this.width,this.hiddenMask.height=this.height,this.hiddenMask.position.x=this.startRectValue,this.hiddenMaskAnimation=new yE({startValue:this.startRectValue,endValue:0,smoothPower:this.smoothPower,smoothFunctionNext:"ease-out-quint"});var t=new Bu(e.text,{fontFamily:e.fontfamily,fontSize:this.px(e.size),fill:e.colorTextHidden,wordWrapWidth:this.sdkOptions.width-2*e.offsetX-2*this.px(this.padding),wordWrap:!0,breakWords:!0});this.hiddenContainer=new co(),this.hiddenContainer.addChild(t),this.hiddenContainer.position.x=this.px(this.padding),this.hiddenContainer.position.y=this.px(e.size/8.5),this.hiddenContainer.addChild(this.hiddenMask),this.hiddenContainer.mask=this.hiddenMask,this.container.addChild(this.hiddenContainer);}},{key:"px",value:function value(e){return this.sdkOptions.width/640*e;}}],r&&tO(t.prototype,r),n&&tO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function iO(e){return iO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},iO(e);}function oO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aO(n.key),n);}}function aO(e){var t=function(e,t){if("object"!=iO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==iO(t)?t:String(t);}function sO(e,t,r){return t=lO(t),function(e,t){if(t&&("object"===iO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,uO()?Reflect.construct(t,r||[],lO(e).constructor):t.apply(e,r));}function uO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(uO=function uO(){return!!e;})();}function lO(e){return lO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},lO(e);}function hO(e,t){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},hO(e,t);}var cO={cyrillic:"https://fonts.gstatic.com/s/geologica/v1/oY1o8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckU8H3G11_z-_OZqD8Hsc-ASAEWn.woff2",latin:"https://fonts.gstatic.com/s/geologica/v1/oY1o8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckU8H3G11_z-_OZqD8Hsc-QSAA.woff2"},dO={cyrillic:"https://fonts.gstatic.com/s/geologica/v1/oY1o8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckU8H3G11_z-_OZqDx_rc-ASAEWn.woff2",latin:"https://fonts.gstatic.com/s/geologica/v1/oY1o8evIr7j9P3TN9YwNAdyjzUyDKkKdAGOJh1UlCDUIhAIdhCZOn1fLsig7jfvCCPHZckU8H3G11_z-_OZqDx_rc-QSAA.woff2"},fO=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(n=sO(this,t,[e,r])).isTitleTextShown=!1,n.isTitleRectHidden=!1,n.isSubtitleTextShown=!1,n.isSubtitleRectHidden=!1,n.delay=300,n.gap=3,n.isReady=!1,n.addShowFunction(),n.addHideFunction(),Promise.all([n.loadFont("title",cO.cyrillic),n.loadFont("title",cO.latin),n.loadFont("subtitle",dO.cyrillic),n.loadFont("subtitle",dO.latin)])["finally"](function(){n.isReady=!0,n.render();}),n;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hO(e,t);}(t,e),r=t,n=[{key:"render",value:function value(){var e,t,r,n;this.container.removeChild(null===(e=this.titleBox)||void 0===e?void 0:e.container),null===(t=this.titleBox)||void 0===t||t.destroy(),this.container.removeChild(null===(r=this.subtitleBox)||void 0===r?void 0:r.container),null===(n=this.subtitleBox)||void 0===n||n.destroy(),this.subtitleBox=new nO(this.sdkOptions,{fontfamily:this.fontFamily("subtitle"),text:this.options.text.subtitle,colorText:this.options.color.primary,colorTextHidden:16777215,colorRect:this.options.color.primary,size:12,isVisible:this.isVisible(),offsetX:this.offsetX()}),this.subtitleBox.container.position.x=this.offsetX(),this.subtitleBox.container.position.y=this.sdkOptions.height-this.offsetY()-this.subtitleBox.height,this.titleBox=new nO(this.sdkOptions,{fontfamily:this.fontFamily("title"),text:this.options.text.title,colorText:this.options.color.primary,colorTextHidden:2236962,colorRect:this.options.color.secondary,size:25,isVisible:this.isVisible(),offsetX:this.offsetX()}),this.titleBox.container.position.x=this.offsetX(),this.titleBox.container.position.y=this.sdkOptions.height-this.offsetY()-this.titleBox.height-this.subtitleBox.height-this.px(this.gap),this.container.addChild(this.titleBox.container),this.container.addChild(this.subtitleBox.container);}},{key:"addShowFunction",value:function value(){var e=this;this.showFunction=function(){var t,r;e.isReady&&(e.isTitleRectHidden=!1,e.isSubtitleRectHidden=!1,null===(t=e.titleBox)||void 0===t||t.textOutAnimation.reset(),null===(r=e.subtitleBox)||void 0===r||r.textOutAnimation.reset(),e.show(),e.titleBox.textInAnimateFunction(),e.titleBox.textInAnimation.isEnd(.8)&&setTimeout(function(){return e.isTitleTextShown=!0;},e.delay),e.isTitleTextShown&&(e.titleBox.rectAnimateFunction(!0),e.titleBox.hiddenMaskAnimateFunction(!0)),e.subtitleBox.textInAnimateFunction(),e.subtitleBox.textInAnimation.isEnd(.8)&&setTimeout(function(){e.isSubtitleTextShown=!0;},e.delay),e.isSubtitleTextShown&&(e.subtitleBox.rectAnimateFunction(!0),e.subtitleBox.hiddenMaskAnimateFunction(!0)),e.titleBox.rectAnimation.isEnd()&&e.subtitleBox.rectAnimation.isEnd()&&e.stopShowing());};}},{key:"addHideFunction",value:function value(){var e=this;this.hideFunction=function(){if(e.isTitleTextShown=!1,e.isSubtitleTextShown=!1,e.titleBox.textInAnimation.reset(),e.subtitleBox.textInAnimation.reset(),!e.isHiding)return e.stopHiding(),e.hide(),e.titleBox.textResetFunction(),void e.subtitleBox.textResetFunction();e.titleBox.rectAnimateFunction(!1),e.titleBox.hiddenMaskAnimateFunction(!1),e.titleBox.rectAnimation.isStart()&&setTimeout(function(){return e.isTitleRectHidden=!0;},e.delay),e.isTitleRectHidden&&e.titleBox.textOutAnimateFunction(),e.subtitleBox.rectAnimateFunction(!1),e.subtitleBox.hiddenMaskAnimateFunction(!1),e.subtitleBox.rectAnimation.isStart()&&setTimeout(function(){return e.isSubtitleRectHidden=!0;},e.delay),e.isSubtitleRectHidden&&e.subtitleBox.textOutAnimateFunction(),e.isHiding=!e.titleBox.textOutAnimation.isEnd()&&!e.subtitleBox.textOutAnimation.isEnd();};}}],n&&oO(r.prototype,n),i&&oO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(cE);function pO(e){return pO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},pO(e);}function yO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gO(n.key),n);}}function gO(e){var t=function(e,t){if("object"!=pO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==pO(t)?t:String(t);}var mO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.store=new Map();}var t,r,n;return t=e,r=[{key:"setCallback",value:function value(e,t){return"function"!=typeof t?(this.store["delete"](e),!1):(this.store.set(e,t),!0);}},{key:"getCallback",value:function value(e){return this.store.get(e);}},{key:"call",value:function value(e){var t=this.store.get(e);if("function"==typeof t)return t();}}],r&&yO(t.prototype,r),n&&yO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function wO(e){return wO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},wO(e);}function bO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vO(n.key),n);}}function vO(e){var t=function(e,t){if("object"!=wO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==wO(t)?t:String(t);}var xO={recorder:["start","stop","pause","resume"],tsvb:["run","stop","enableBeautification","disableBeautification","setBlur","clearBlur","setBackground","clearBackground","enableSmartZoom","disableSmartZoom","enableColorCorrector","disableColorCorrector","enableFrameSkipping","disableFrameSkipping","setLayout","enableColorFilter","disableColorFilter","setSegmentationPreset","enableLowLightEffect","disableLowLightEffect"]},_O=["setBlur"],IO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.featuresList=xO,this.debouncedList=_O;}var t,r,n;return t=e,n=[{key:"getInstance",value:function value(){return e._instance||(e._instance=new e()),e._instance;}}],(r=[{key:"isEnabledToPush",value:function value(e,t){if(!this.featuresList[t].includes(e))return!1;var r=this.lastPushedFeature===e;return this.lastPushedFeature=e,!r||!this.debouncedList.includes(e);}}])&&bO(t.prototype,r),n&&bO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}().getInstance();function AO(e){return AO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},AO(e);}function SO(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return TO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TO(e,t);}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var _n183=0,i=function i(){};return{s:i,n:function n(){return _n183>=e.length?{done:!0}:{done:!1,value:e[_n183++]};},e:function e(_e951){throw _e951;},f:i};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,s=!1;return{s:function s(){r=r.call(e);},n:function n(){var e=r.next();return a=e.done,e;},e:function e(_e952){s=!0,o=_e952;},f:function f(){try{a||null==r["return"]||r["return"]();}finally{if(s)throw o;}}};}function TO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n;}function CO(e){return function(t){var r,n=SO(Object.getOwnPropertyNames(t.prototype));try{var i=function i(){var n=r.value,i=Object.getOwnPropertyDescriptor(t.prototype,n);if(!i)return 0;var o=i.value;if(!(o instanceof Function))return 0;i.value=function(){!function(e,t){if(IO.isEnabledToPush(t,e)){var r="tsvb"!==e?"".concat(e[0].toUpperCase()+e.slice(1)):"";KT.k.Instance.push(t+r);}}(e,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=o.apply(this,r),s=function s(){};if("object"===AO(a)&&"function"==typeof a.then){var u=a.then(s);"function"==typeof u["catch"]&&u["catch"](function(e){return e;});}return a;},Object.defineProperty(t.prototype,n,i);};for(n.s();!(r=n.n()).done;)i();}catch(e){n.e(e);}finally{n.f();}};}var EO=__webpack_require__(4220),OO=__webpack_require__(4412),kO=__webpack_require__.n(OO);function PO(e){return PO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},PO(e);}function $O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RO(n.key),n);}}function RO(e){var t=function(e,t){if("object"!=PO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==PO(t)?t:String(t);}var BO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.state="inactive",this._duration=0,this.timeStart=0;}var t,r,n;return t=e,(r=[{key:"duration",get:function get(){return"active"===this.state?Date.now()-this.timeStart+this._duration:this._duration;}},{key:"start",value:function value(){"inactive"===this.state&&(this._duration=0,this.state="active",this.timeStart=Date.now());}},{key:"stop",value:function value(){"inactive"!==this.state&&("active"===this.state&&(this._duration=this._duration+Date.now()-this.timeStart),this.state="inactive");}},{key:"pause",value:function value(){"active"===this.state&&(this.state="paused",this._duration=this._duration+Date.now()-this.timeStart);}},{key:"resume",value:function value(){"paused"===this.state&&(this.state="active",this.timeStart=Date.now());}}])&&$O(t.prototype,r),n&&$O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function DO(){DO=function DO(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==NO(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(NO(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function MO(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function LO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FO(n.key),n);}}function FO(e){var t=function(e,t){if("object"!=NO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=NO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==NO(t)?t:String(t);}function NO(e){return NO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},NO(e);}var UO=function UO(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":NO(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a;},jO=function jO(e,t){if("object"===("undefined"==typeof Reflect?"undefined":NO(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);},GO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.onStartFunction=function(){},this.blobPromise=new EO.w(),this.timer=new BO();}var t,n,i,o;return t=e,n=[{key:"removeTracks",value:function value(e){var t=this;this.stream&&("audio"===e?t.stream.getAudioTracks():"video"===e?t.stream.getVideoTracks():t.stream.getTracks()).forEach(function(e){t.stream.removeTrack(e);});}},{key:"initRecorder",value:function value(e){var t=this;this.isActive()&&this.stop(),this.recorder=new MediaRecorder(e,{mimeType:this.mimeType}),this.recorder.ondataavailable=function(e){return t.blobPromise.resolve(e.data);};}},{key:"start",value:function value(){return!!this.recorder&&"inactive"===this.recorder.state&&(this.blobPromise.createPromise(),this.recorder.start(),this.timer.start(),this.onStartFunction(),!0);}},{key:"resume",value:function value(){return!!this.recorder&&"paused"===this.recorder.state&&(this.recorder.resume(),this.timer.resume(),!0);}},{key:"pause",value:function value(){return!!this.recorder&&"recording"===this.recorder.state&&(this.recorder.pause(),this.timer.pause(),!0);}},{key:"stop",value:function value(){return!!this.recorder&&"inactive"!==this.recorder.state&&(this.recorder.stop(),this.timer.stop(),!0);}},{key:"getRecord",value:(o=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){MO(o,n,i,a,s,"next",e);}function s(e){MO(o,n,i,a,s,"throw",e);}a(void 0);});};}(DO().mark(function e(){var t;return DO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("inactive"===this.recorder.state){e.next=2;break;}throw"[ recorder ]: Cannot get blob. First you need to stop the record.";case 2:return e.next=4,this.blobPromise.promise;case 4:if(t=e.sent){e.next=7;break;}return e.abrupt("return",void 0);case 7:return e.next=9,kO()(t,this.timer.duration,{logger:!1});case 9:return e.abrupt("return",t);case 10:case"end":return e.stop();}},e,this);})),function(){return o.apply(this,arguments);})},{key:"setVideoTrack",value:function value(e){e&&(this.removeTracks("video"),this.stream||(this.stream=new MediaStream()),this.stream.addTrack(e),this.initRecorder(this.stream));}},{key:"setSDKVideoTrack",value:function value(e){this.sdkVideoTrack=e,this.setVideoTrack(e);}},{key:"setAudioTracks",value:function value(e){if(0!==e.length){if(this.removeTracks("audio"),this.stream||(this.stream=new MediaStream()),1===e.length)return this.stream.addTrack(e[0]),void this.initRecorder(this.stream);var t=new AudioContext(),r=t.createMediaStreamDestination();e.forEach(function(e){var n=new MediaStream();n.addTrack(e),t.createMediaStreamSource(n).connect(r);});var n=r.stream;this.stream.addTrack(n.getAudioTracks()[0]),this.initRecorder(this.stream);}}},{key:"setMimeType",value:function value(e){MediaRecorder.isTypeSupported(e)?(this.mimeType=e,this.recorder&&this.stream&&this.initRecorder(this.stream)):r.ie.notify({message:"mimeType ".concat(e," is not supported."),emitter:r.E7.RECORDER});}},{key:"onStart",value:function value(e){"function"==typeof e&&(this.onStartFunction=e);}},{key:"isActive",value:function value(){var e,t;return"recording"===(null===(e=this.recorder)||void 0===e?void 0:e.state)||"paused"===(null===(t=this.recorder)||void 0===t?void 0:t.state);}},{key:"getDuration",value:function value(){return this.timer.duration;}},{key:"getSDKTracks",value:function value(){return{sdkAudioTrack:this.sdkAudioTrack,sdkVideoTrack:this.sdkVideoTrack};}}],n&&LO(t.prototype,n),i&&LO(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e;}();function zO(e){return zO="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},zO(e);}function VO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HO(n.key),n);}}function HO(e){var t=function(e,t){if("object"!=zO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==zO(t)?t:String(t);}function WO(e,t,r){return t=KO(t),function(e,t){if(t&&("object"===zO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}(e);}(e,YO()?Reflect.construct(t,r||[],KO(e).constructor):t.apply(e,r));}function YO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(e){}return(YO=function YO(){return!!e;})();}function KO(e){return KO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e);},KO(e);}function XO(e,t){return XO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e;},XO(e,t);}GO=UO([CO("recorder"),jO("design:paramtypes",[])],GO);var ZO=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,t),(e=WO(this,t)).width=1280,e.height=720,e.customWidth=1280,e.customHeight=720,e.customSize=!1,e;}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XO(e,t);}(t,e),r=t,(n=[{key:"setSize",value:function value(e,t){var r=!1;this.width!=e&&(this.width=e,r=!0),this.height!=t&&(this.height=t,r=!0),r&&this.emit("update",this);}},{key:"setCustomSize",value:function value(e,t){this.customSize=!0,this.setSize(e,t);}},{key:"isCustomSize",value:function value(){return this.customSize;}},{key:"isLandscape",value:function value(){return this.getAspect()>1;}},{key:"getAspect",value:function value(){return this.width/this.height;}}])&&VO(r.prototype,n),i&&VO(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t;}(n);function qO(){qO=function qO(){return t;};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value;},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t];}try{l({},"");}catch(e){l=function l(e,t,r){return e[t]=r;};}function h(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:T(e,r,s)}),a;}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)};}catch(e){return{type:"throw",arg:e};}}t.wrap=h;var d="suspendedStart",f="suspendedYield",p="executing",y="completed",g={};function m(){}function w(){}function b(){}var v={};l(v,a,function(){return this;});var x=Object.getPrototypeOf,_=x&&x(x(P([])));_&&_!==r&&n.call(_,a)&&(v=_);var I=b.prototype=m.prototype=Object.create(v);function A(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e);});});}function S(e,t){function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==rk(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,a,s);},function(e){r("throw",e,a,s);}):t.resolve(h).then(function(e){l.value=e,a(l);},function(e){return r("throw",e,a,s);});}s(u.arg);}var o;i(this,"_invoke",{value:function value(e,n){function i(){return new t(function(t,i){r(e,n,t,i);});}return o=o?o.then(i,i):i();}});}function T(t,r,n){var i=d;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0};}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=C(s,n);if(u){if(u===g)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=y,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===g)continue;return{value:l.arg,done:n.done};}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg);}};}function C(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=c(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g);}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t);}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t;}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0);}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r;};return o.next=o;}}throw new TypeError(rk(t)+" is not iterable");}return w.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name));},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e;},t.awrap=function(e){return{__await:e};},A(S.prototype),l(S.prototype,s,function(){return this;}),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next();});},A(I),l(I,u,"Generator"),l(I,a,function(){return this;}),l(I,"toString",function(){return"[object Generator]";}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e;}return e.done=!0,e;};},t.values=P,k.prototype={constructor:k,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e);},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval;},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i;}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc);}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc);}}}},abrupt:function abrupt(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break;}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a);},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g;},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g;}},"catch":function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r);}return i;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g;}},t;}function JO(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value;}catch(e){return void r(e);}s.done?t(u):Promise.resolve(u).then(n,i);}function QO(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){JO(o,n,i,a,s,"next",e);}function s(e){JO(o,n,i,a,s,"throw",e);}a(void 0);});};}function ek(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tk(n.key),n);}}function tk(e){var t=function(e,t){if("object"!=rk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(e);}(e,"string");return"symbol"==rk(t)?t:String(t);}function rk(e){return rk="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e);}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e);},rk(e);}var nk,ik=function ik(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":rk(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a;},ok=function ok(e,t){if("object"===("undefined"==typeof Reflect?"undefined":rk(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);},ak=function ak(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e);},sk=function sk(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r;},uk=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}(this,e),this.outputFrameFormat="RGBX",this.components=new Proxy({},YT),nk.set(this,void 0),this.customer_id=t,fx.M.CUSTOMER_ID=t,fx.M.setVersion(),px.i.getInstance().getUID(this.customer_id),KT.k.Instance.setCustomerID(this.customer_id),r&&(this.custom_inference=Hx.getInference("custom"),this.custom_inference.setBackend(r)),this.onnx_inference=Hx.getInference("onnx"),this.sdkOptions=new ZO(),this.recorder=new GO(),this.callbackStore=new mO(),this.colorFilterEffect=new gI(this.sdkOptions),this.customResolutionEffect=new UT(this.sdkOptions),this.sdkOptions.on("update",this.onOptionsUpdate,this);}var t,n,i,o,a,s,u;return t=e,n=[{key:"onOptionsUpdate",value:function value(e){Object.values(this.components).forEach(function(e){return e.render();}),this.virtualBackgroundEffect&&this.setSegmentationPreset(this.virtualBackgroundEffect.settings.preset);}},{key:"cache",value:(u=QO(qO().mark(function e(){var t,r,n=arguments;return qO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],r=!1,this.custom_inference&&(r=!0),e.abrupt("return",this.onnx_inference.cache(t,r));case 4:case"end":return e.stop();}},e,this);})),function(){return u.apply(this,arguments);})},{key:"preload",value:(s=QO(qO().mark(function e(){var t;return qO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,this.custom_inference&&(t=!0),e.abrupt("return",this.onnx_inference.preload(t));case 3:case"end":return e.stop();}},e,this);})),function(){return s.apply(this,arguments);})},{key:"config",value:function value(e){e.hasOwnProperty("app_env")&&(fx.M.APP_ENV=e.app_env),e.hasOwnProperty("api_url")&&(fx.M.API_URL=e.api_url),e.hasOwnProperty("model_url")&&(fx.M.MODEL_URL=e.model_url),e.hasOwnProperty("sdk_url")&&(fx.M.SDK_URL=e.sdk_url),e.hasOwnProperty("provider")&&(fx.M.PROVIDER=e.provider),e.hasOwnProperty("preset")&&(fx.M.PRESET=e.preset),e.hasOwnProperty("proxy")&&(fx.M.PROXY=e.proxy),e.hasOwnProperty("stats")&&(fx.M.STATS=e.stats),e.hasOwnProperty("wasmPaths")&&Object.keys(e.wasmPaths).length&&(fx.M.WASM_PATHS=Object.assign(fx.M.WASM_PATHS,e.wasmPaths)),e.hasOwnProperty("presets")&&Object.keys(e.presets).length&&(fx.M.PRESETS=Object.assign(fx.M.PRESETS,e.presets)),e.hasOwnProperty("models")&&Object.keys(e.models).length&&(fx.M.MODELS=Object.assign(fx.M.MODELS,e.models));}},{key:"init",value:(a=QO(qO().mark(function e(t){var n,i,o,a=this;return qO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.aborted){e.next=2;break;}return e.abrupt("return");case 2:if(this.streamProcessor&&(this.streamProcessor.destroy(),this.effectProcessor.destroy(),delete this.streamProcessor,delete this.effectProcessor),i="requestAnimationFrameCallback","MediaStreamTrackProcessor"in window&&"MediaStreamTrackGenerator"in window?(this.streamProcessor=Cc.getStreamProcessor("transform",this.sdkOptions),i="MediaStreamTrackProcessor"):"requestVideoFrameCallback"in HTMLVideoElement.prototype?(this.streamProcessor=Cc.getStreamProcessor("videocallback",this.sdkOptions),i="requestVideoFrameCallback"):this.streamProcessor=Cc.getStreamProcessor("animationcallback",this.sdkOptions),r.ie.notify({message:"".concat(i," supported"),type:r.cL.INFO,emitter:r.E7.TSVB}),this.streamProcessor.onFrameDraw(this.callbackStore.getCallback("onFrameDraw")),this.streamProcessor.onChangeInputResolution(this.callbackStore.getCallback("onChangeInputResolution")),o=new __(this.sdkOptions,this.outputFrameFormat),this.streamProcessor.setRenderer(o),this.effectProcessor=new L_(o,this.components),t.aborted||this.effectProcessor.addEffect(this.customResolutionEffect),!fx.M.MODELS.lowlighter||""===fx.M.MODELS.lowlighter){e.next=16;break;}return this.lowLightEffect=new DS(this.sdkOptions,this.customer_id),e.next=16,this.lowLightEffect.init(this.onnx_inference).then(function(){if(!t.aborted){a.effectProcessor.addEffect(a.lowLightEffect);var e=a.callbackStore.getCallback("onLowLightSuccess");a.lowLightEffect.onSuccess(e);}})["catch"](function(){});case 16:if(t.aborted||this.effectProcessor.addEffect(this.colorFilterEffect),!fx.M.MODELS.colorcorrector||""===fx.M.MODELS.colorcorrector){e.next=21;break;}return this.colorCorrectorEffect=new nT(this.sdkOptions,this.customer_id),e.next=21,this.colorCorrectorEffect.init(this.onnx_inference).then(function(){t.aborted||a.effectProcessor.addEffect(a.colorCorrectorEffect);})["catch"](function(){});case 21:if(!fx.M.MODELS.facedetector||""===fx.M.MODELS.facedetector){e.next=25;break;}return this.smartZoomEffect=new kT(this.sdkOptions,this.customer_id),e.next=25,this.smartZoomEffect.init(this.onnx_inference).then(function(){t.aborted||a.effectProcessor.addEffect(a.smartZoomEffect);})["catch"](function(){});case 25:return this.virtualBackgroundEffect=new WA(this.sdkOptions,this.customer_id),e.next=28,this.virtualBackgroundEffect.init(null!==(n=this.custom_inference)&&void 0!==n?n:this.onnx_inference).then(function(){t.aborted||a.effectProcessor.addEffect(a.virtualBackgroundEffect);})["catch"](function(){});case 28:this.streamProcessor.useEffectProcessor(this.effectProcessor),this.callbackStore.call("onReady");case 30:case"end":return e.stop();}},e,this);})),function(e){return a.apply(this,arguments);})},{key:"getCustomerId",value:function value(){return this.customer_id;}},{key:"useStream",value:function value(e,t){var n;if(e.getVideoTracks().length){var i=e.getVideoTracks()[0].getSettings();if(t?this.sdkOptions.setCustomSize(t.width,t.height):this.sdkOptions.setSize(i.width,i.height),Object.values(this.components).forEach(function(e){return e.render();}),ak(this,nk,"f")&&ak(this,nk,"f").abort(),sk(this,nk,new AbortController(),"f"),this.init(ak(this,nk,"f").signal),this.streamProcessor.useStream(e),this.streamProcessor.getInputVideoTrack()){this.streamProcessor.process();var o=null===(n=this.streamProcessor.getStream())||void 0===n?void 0:n.getVideoTracks()[0];o&&this.recorder.setSDKVideoTrack(o);}else r.ie.notify({message:"There is no input videoTrack to process",emitter:r.E7.TSVB});}else r.ie.notify({message:"There is no input videoTrack in the Media Stream",emitter:r.E7.TSVB});}},{key:"setSegmentationPreset",value:(o=QO(qO().mark(function e(t){var n;return qO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.virtualBackgroundEffect){e.next=2;break;}return e.abrupt("return",!1);case 2:if(!this.onnx_inference.isGPU||["quality","balanced"].includes(t)){e.next=5;break;}return r.ie.notify({message:"WebGPU backend support only quality and balanced presets",emitter:r.E7.TSVB}),e.abrupt("return",!1);case 5:return this.effectProcessor.hasFrames?this.effectProcessor.pause():this.streamProcessor.pause(),this.streamProcessor.clearBuffers(),this.streamProcessor.clearBuffers(),e.next=10,this.virtualBackgroundEffect.setPreset(t);case 10:return e.next=12,this.virtualBackgroundEffect.init(null!==(n=this.custom_inference)&&void 0!==n?n:this.onnx_inference);case 12:return this.effectProcessor.hasFrames?this.effectProcessor.unpause():this.streamProcessor.unpause(),e.abrupt("return",!0);case 14:case"end":return e.stop();}},e,this);})),function(e){return o.apply(this,arguments);})},{key:"getSegmentationPreset",value:function value(){return this.virtualBackgroundEffect.getPreset();}},{key:"setBackgroundColor",value:function value(e){this.virtualBackgroundEffect.setBackgroundColor(e);}},{key:"getStream",value:function value(){return this.streamProcessor.getStream();}},{key:"toCanvas",value:function value(e){this.streamProcessor.renderToCanvas(e);}},{key:"setFpsLimit",value:function value(e){return!!this.streamProcessor&&(this.streamProcessor.setFpsLimit(e),!0);}},{key:"showFps",value:function value(){return!!this.streamProcessor&&(this.streamProcessor.showFps(),!0);}},{key:"hideFps",value:function value(){return!!this.streamProcessor&&(this.streamProcessor.hideFps(),!0);}},{key:"freeze",value:function value(){return!!this.effectProcessor&&(this.effectProcessor.pause(),!0);}},{key:"unfreeze",value:function value(){return!!this.effectProcessor&&(this.effectProcessor.unpause(),!0);}},{key:"enableBeautification",value:function value(){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.enableBeautification(),!0);}},{key:"disableBeautification",value:function value(){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.disableBeautification(),!0);}},{key:"setBoundaryMode",value:function value(e){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.setBoundaryMode(e),!0);}},{key:"setBackgroundFitMode",value:function value(e){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.setBackgroundFitMode(e),!0);}},{key:"setBoundaryLevel",value:function value(e){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.setBoundaryLevel(e),!0);}},{key:"setBeautificationLevel",value:function value(e){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.setBeautificationLevel(e),!0);}},{key:"setBlur",value:function value(e){if(!this.virtualBackgroundEffect)return!1;var t=15*Math.cbrt(this.sdkOptions.height*this.sdkOptions.width)/67;return this.virtualBackgroundEffect.setBlur(Math.round(e*t)),!0;}},{key:"clearBlur",value:function value(){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.clearBlur(),!0);}},{key:"setBackground",value:function value(e){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.setBackground(e),!0);}},{key:"clearBackground",value:function value(){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.clearBackground(),!0);}},{key:"enableFrameSkipping",value:function value(){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.enableFrameSkipping(),!0);}},{key:"disableFrameSkipping",value:function value(){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.disableFrameSkipping(),!0);}},{key:"setLayout",value:function value(e){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.setLayout(e),!0);}},{key:"setLayoutMode",value:function value(e){return!!this.virtualBackgroundEffect&&(this.virtualBackgroundEffect.setLayoutMode(e),!0);}},{key:"setCustomLayout",value:function value(e){if(!this.virtualBackgroundEffect)return!1;var t={};return void 0!==e.xOffset&&(t.xOffset=e.xOffset*this.sdkOptions.width),void 0!==e.yOffset&&(t.yOffset=e.yOffset*this.sdkOptions.height),void 0!==e.size&&(t.width=e.size*this.sdkOptions.width,t.height=e.size*this.sdkOptions.height),this.virtualBackgroundEffect.setCustomLayout(t),!0;}},{key:"setFaceArea",value:function value(e){return!!this.smartZoomEffect&&(e=Math.max(e,.01),e=Math.min(e,1),this.smartZoomEffect.setConfig("faceAreaProportion",e),!0);}},{key:"setFaceDetectorAccuracy",value:function value(e){return!!this.smartZoomEffect&&(e=Math.max(e,.2),e=Math.min(e,1),this.smartZoomEffect.setConfig("faceDetectorAccuracy",e),!0);}},{key:"setSmartZoomSmoothing",value:function value(e){return!!this.smartZoomEffect&&(e=Math.max(e,.01),e=Math.min(e,1),this.smartZoomEffect.setConfig("smoothPower",100*e),!0);}},{key:"setSmartZoomSensitivity",value:function value(e){return!!this.smartZoomEffect&&(e=Math.max(e,0),e=Math.min(e,1),this.smartZoomEffect.setConfig("sensitivityValue",e),!0);}},{key:"setSmartZoomPerod",value:function value(e){return!!this.smartZoomEffect&&(e=Math.max(e,0),e=Math.min(e,1e3),this.smartZoomEffect.setConfig("faceDetectorPediod_ms",e),!0);}},{key:"switchDrawFaceSquare",value:function value(e){return!!this.smartZoomEffect&&(this.smartZoomEffect.setConfig("isFaceSquareDrawingEnabled",e),!0);}},{key:"switchDrawPreFaceSquare",value:function value(e){return!!this.smartZoomEffect&&(this.smartZoomEffect.setConfig("isPreFaceSquareDrawingEnabled",e),!0);}},{key:"enableSmartZoom",value:function value(){return!!this.smartZoomEffect&&(this.smartZoomEffect.enable(),!0);}},{key:"disableSmartZoom",value:function value(){return!!this.smartZoomEffect&&(this.smartZoomEffect.disable(),!0);}},{key:"enableColorCorrector",value:function value(){return!!this.colorCorrectorEffect&&(this.colorCorrectorEffect.enable(),!0);}},{key:"disableColorCorrector",value:function value(){return!!this.colorCorrectorEffect&&(this.colorCorrectorEffect.disable(),!0);}},{key:"enableColorFilter",value:function value(){return!!this.colorFilterEffect&&(this.colorFilterEffect.enable(),!0);}},{key:"disableColorFilter",value:function value(){return!!this.colorFilterEffect&&(this.colorFilterEffect.disable(),!0);}},{key:"setColorFilterConfig",value:function value(e){return!!this.colorFilterEffect&&(this.colorFilterEffect.setConfig(e),!0);}},{key:"setFilterPart",value:function value(e){return!!this.colorCorrectorEffect&&(this.colorCorrectorEffect.setConfig("filterPart",e),!0);}},{key:"setColorCorrectorPeriod",value:function value(e){return!!this.colorCorrectorEffect&&(e=Math.max(e,0),e=Math.min(e,5e3),this.colorCorrectorEffect.setConfig("modelPediod_ms",e),!0);}},{key:"setColorCorrectorPower",value:function value(e){return!!this.colorCorrectorEffect&&(e=Math.max(e,0),e=Math.min(e,1),this.colorCorrectorEffect.setConfig("cc_power",e),!0);}},{key:"enableLowLightEffect",value:function value(){return!!this.lowLightEffect&&(this.lowLightEffect.enable(),!0);}},{key:"disableLowLightEffect",value:function value(){return!!this.lowLightEffect&&(this.lowLightEffect.disable(),!0);}},{key:"setLowLightEffectConfig",value:function value(e){return!!this.lowLightEffect&&(this.lowLightEffect.setConfig(e),!0);}},{key:"setLowLightEffectPower",value:function value(e){return this.setLowLightEffectConfig({power:e}),!0;}},{key:"clear",value:function value(){return!!this.streamProcessor&&(this.streamProcessor.destroy(),!0);}},{key:"run",value:function value(){return this.streamProcessor&&(this.streamProcessor.isRunning=!0),!0;}},{key:"stop",value:function value(){return this.streamProcessor&&(this.streamProcessor.isRunning=!1),!0;}},{key:"enablePipelineSkipping",value:function value(){var e;null===(e=this.effectProcessor)||void 0===e||e.enablePipelineSkipping();}},{key:"disablePipelineSkipping",value:function value(){var e;null===(e=this.effectProcessor)||void 0===e||e.disablePipelineSkipping();}},{key:"getEffectProcessor",value:function value(){return this.effectProcessor;}},{key:"createComponent",value:function value(e){return new lk[e.component](this.sdkOptions,e.options);}},{key:"addComponent",value:function value(e,t){this.components[t]=e;}},{key:"getComponentConstructor",value:function value(e){return lk[e];}},{key:"setOutputResolution",value:function value(e){this.streamProcessor&&this.streamProcessor.setOutputResolution(e.width,e.height);}},{key:"clearOutputResolution",value:function value(){this.streamProcessor&&this.streamProcessor.clearOutputResolution();}},{key:"setOutputFrameFormat",value:function value(e){this.outputFrameFormat=e;}},{key:"onReady",set:function set(e){this.callbackStore.setCallback("onReady",e);}},{key:"onError",value:function value(e){r.ie.subscribe(e);}},{key:"onFrame",set:function set(e){var t;this.callbackStore.setCallback("onFrameDraw",e),null===(t=this.streamProcessor)||void 0===t||t.onFrameDraw(e);}},{key:"onChangeInputResolution",value:function value(e){var t;this.callbackStore.setCallback("onChangeInputResolution",e),null===(t=this.streamProcessor)||void 0===t||t.onChangeInputResolution(e);}},{key:"onAuthRequest",value:function value(e){this.onnx_inference&&this.onnx_inference.onAuth(e);}},{key:"onColorFilterSuccess",value:function value(e){this.callbackStore.setCallback("onColorFilterSuccess",e),this.colorFilterEffect.onSuccess(e);}},{key:"onLowLightSuccess",value:function value(e){var t;this.callbackStore.setCallback("onLowLightSuccess",e),null===(t=this.lowLightEffect)||void 0===t||t.onSuccess(e);}}],n&&ek(t.prototype,n),i&&ek(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e;}();nk=new WeakMap(),uk=ik([CO("tsvb"),ok("design:paramtypes",[String,Object])],uk);var lk={overlay_screen:dC,watermark:PC,lowerthird_1:IE,lowerthird_2:RE,lowerthird_3:zE,lowerthird_4:QE,lowerthird_5:fO,stickers:qC};})();var __webpack_exports__tsvb=exports.tsvb=__webpack_exports__.O;
